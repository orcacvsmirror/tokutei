Only in ../nittoku_src_127: README.txt
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/app/JApplication.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/app/JApplication.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/app/JApplication.java	Wed Apr 21 09:46:08 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/app/JApplication.java	Tue Aug 11 17:55:30 2009
***************
*** 102,115 ****
  	public static final String COLUMN_NAME_KANANAME = "KANANAME";
  	public static final String COLUMN_NAME_BIRTHDAY = "BIRTHDAY";
  	public static final String COLUMN_NAME_SEX = "SEX";
! 	// add s.inoue 2010/01/26
! 	// 日医フォーマット
! 	public static final Integer CSV_NITII_ZOKUSEI_JISIKIKAN_NO = 0;
! 	public static final Integer CSV_NITII_ZOKUSEI_JISI_DATE = 2;
! 	public static final Integer CSV_NITII_ZOKUSEI_JUSIN_SEIRI_NO = 125;
! 	public static final Integer CSV_NITII_ZOKUSEI_SHIMEI = 5;
! 	public static final Integer CSV_NITII_ZOKUSEI_SEINENGAPI = 3;
! 	public static final Integer CSV_NITII_ZOKUSEI_SEIBETU = 4;
  	// CSVフォーマット
  	public static final Integer CSV_ZOKUSEI_KENSA_KIKAN = 0;
  	public static final Integer CSV_ZOKUSEI_JISIKIKAN_NO = 1;
--- 102,108 ----
  	public static final String COLUMN_NAME_KANANAME = "KANANAME";
  	public static final String COLUMN_NAME_BIRTHDAY = "BIRTHDAY";
  	public static final String COLUMN_NAME_SEX = "SEX";
! 
  	// CSVフォーマット
  	public static final Integer CSV_ZOKUSEI_KENSA_KIKAN = 0;
  	public static final Integer CSV_ZOKUSEI_JISIKIKAN_NO = 1;
***************
*** 185,217 ****
  	//	private static String VERSION_FILE = "MainVersion.properties";
  	private static final String DB_FILENAME_SYSTEM_FDB = "System.fdb";
  
- 	// add s.inoue 2010/03/18
- 	// 画面リスト対応コード一覧
- 	public static final String SCREEN_JYUSINKEN_CODE = "001";     // 受診券入力画面
- 	public static final String SCREEN_KEKKATOUROKU_CODE = "002";  // 健診結果データ入力
- 	public static final String SCREEN_KEKKATORIKOMI_CODE = "003"; // 検査データ取り込み
- 	public static final String SCREEN_HANTEI_CODE = "004"; // メタボ判定・階層化
- 	public static final String SCREEN_SHOSAI_CODE = "005"; // 詳細表示
- 	public static final String SCREEN_NITIJI_CODE = "006"; // 日時処理(請求)
- 	public static final String SCREEN_GETUJI_CODE = "007"; // 月時処理(請求確定/HL7出力)
- 
- 	public static final String SCREEN_SEIKYU_EDIT_CODE = "008";    // 請求データ編集
- 	public static final String SCREEN_KIKAN_DBBACKUP_CODE = "009"; // 機関ＤＢバックアップ
- 	public static final String SCREEN_LOGIN_CODE = "010"; 		  // ログイン
- 	public static final String SCREEN_NYURYOKUHYO_CODE = "011";   // 入力票
- 	public static final String SCREEN_KEKKATUTIHYO_CODE = "012";  // 結果通知表
- 	public static final String SCREEN_ONLINE_UPDATE_CODE = "013"; // オンラインアップデート
- 
- 	public static final String SCREEN_MASTER_KIKAN_CODE = "101"; // 機関情報メンテナンス
- 	public static final String SCREEN_MASTER_KENSHIN_CODE = "102"; // 健診項目マスタメンテナンス
- 	public static final String SCREEN_MASTER_PATTERN_CODE = "103"; // 健診パターンメンテナンス
- 	public static final String SCREEN_MASTER_SHIHARAI_CODE = "104"; // 支払代行機関マスタメンテ
- 	public static final String SCREEN_MASTER_HOKENJYA_CODE = "105"; // 保険者情報マスタメンテナンス
- 	public static final String SCREEN_MASTER_USER_CODE = "106"; // システム管理ユーザ情報メンテナンス
- 	public static final String SCREEN_MASTER_SYSTEM_CODE = "107"; // システム利用者メンテナンス
- 	public static final String SCREEN_MASTER_KEINEN_CODE = "108"; // 経年マスタメンテナンス
- 	public static final String SCREEN_MASTER_USEBILITY_CODE = "109"; // ユーザビリティメンテナンス
- 
  	/**
  	 * 設定ファイルなどを読み込むa。
  	 */
--- 178,183 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/app/JPath.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/app/JPath.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/app/JPath.java	Wed Apr 21 09:46:08 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/app/JPath.java	Fri Oct 30 14:34:44 2009
***************
*** 4,12 ****
  import java.io.File;
  import java.io.IOException;
  import java.io.InputStreamReader;
- import java.text.DateFormat;
- import java.text.SimpleDateFormat;
- import java.util.Date;
  
  import org.apache.log4j.Logger;
  
--- 4,9 ----
***************
*** 255,291 ****
  	    return ret;
  	}
  
- 	// add s.inoue 2010/03/09
- 	/**
- 	 * 出力用のフォルダ名を生成する(_1-10)
- 	 * @return エラーコード
- 	 * ret = 0 -> 正常終了
- 	 * ret = 1 -> フォルダの作成に失敗
- 	 * ret = 2 -> フォルダ作成の上限に達した
- 	 * ret = 4 -> スキーマのファイルコピーに失敗
- 	 */
- 	public static String createDirectoryUniqueName(String uniqueName)
- 	{
- 		String retFileName = "";
- 
- 		// 変換日時
- 		DateFormat format = new SimpleDateFormat("yyyyMMdd");
- 		String CreateDate = format.format(new Date());
- 
- 		int count;
- 
- 		for(count = 1 ; count < 10000 ; count++)
- 		{
- 			retFileName = uniqueName + CreateDate + "_" + String.valueOf(count) + ".csv";
- 
- 			File newFile = new File(getDesktopPath()+ File.separator + retFileName);
- 
- 			if(newFile.exists() == false)
- 				break;
- 		}
- 
- 		return retFileName;
- 	}
  //	      String cmdline = "";
  //	      osname = "reg query \"HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\Shell Folders\" /v Desktop";
  //
--- 252,257 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/component/DateSelectDialog.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/component/DateSelectDialog.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/component/DateSelectDialog.java	Wed May 19 14:38:00 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/component/DateSelectDialog.java	Wed Feb 24 17:44:44 2010
***************
*** 2,33 ****
  
  import java.awt.BorderLayout;
  import java.awt.CardLayout;
  import java.awt.Dimension;
  import java.awt.Font;
  import java.awt.Frame;
  import java.awt.GridBagConstraints;
  import java.awt.GridBagLayout;
  import java.awt.event.ActionEvent;
  import java.awt.event.ActionListener;
  import java.awt.event.KeyEvent;
  import java.awt.event.KeyListener;
! import java.awt.event.WindowEvent;
  import java.util.ArrayList;
  import java.util.Hashtable;
  
  import javax.swing.BorderFactory;
  import javax.swing.JDialog;
  import javax.swing.JPanel;
! import javax.swing.WindowConstants;
  
  import org.apache.log4j.Logger;
  
  import jp.or.med.orca.jma_tokutei.common.component.ImeController.ImeMode;
  import jp.or.med.orca.jma_tokutei.common.errormessage.RETURN_VALUE;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  import jp.or.med.orca.jma_tokutei.common.sql.JConnection;
  import jp.or.med.orca.jma_tokutei.common.sql.dao.TKensakekaSonotaDao;
  import jp.or.med.orca.jma_tokutei.common.sql.dao.TKensakekaTokuteiDao;
  import jp.or.med.orca.jma_tokutei.common.util.FiscalYearUtil;
  import jp.or.med.orca.jma_tokutei.common.validate.JValidate;
  
--- 2,42 ----
  
  import java.awt.BorderLayout;
  import java.awt.CardLayout;
+ import java.awt.Color;
  import java.awt.Dimension;
  import java.awt.Font;
  import java.awt.Frame;
  import java.awt.GridBagConstraints;
  import java.awt.GridBagLayout;
+ import java.awt.Insets;
  import java.awt.event.ActionEvent;
  import java.awt.event.ActionListener;
  import java.awt.event.KeyEvent;
  import java.awt.event.KeyListener;
! import java.sql.SQLException;
  import java.util.ArrayList;
  import java.util.Hashtable;
+ import java.util.Iterator;
  
  import javax.swing.BorderFactory;
  import javax.swing.JDialog;
  import javax.swing.JPanel;
! import javax.swing.SwingConstants;
  
  import org.apache.log4j.Logger;
  
+ import jp.or.med.orca.jma_tokutei.common.app.JApplication;
  import jp.or.med.orca.jma_tokutei.common.component.ImeController.ImeMode;
+ import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
  import jp.or.med.orca.jma_tokutei.common.errormessage.RETURN_VALUE;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
+ import jp.or.med.orca.jma_tokutei.common.frame.ViewSettingsKey;
  import jp.or.med.orca.jma_tokutei.common.sql.JConnection;
+ import jp.or.med.orca.jma_tokutei.common.sql.dao.DaoFactory;
  import jp.or.med.orca.jma_tokutei.common.sql.dao.TKensakekaSonotaDao;
  import jp.or.med.orca.jma_tokutei.common.sql.dao.TKensakekaTokuteiDao;
+ import jp.or.med.orca.jma_tokutei.common.sql.model.TKensakekaSonota;
+ import jp.or.med.orca.jma_tokutei.common.sql.model.TKensakekaTokutei;
  import jp.or.med.orca.jma_tokutei.common.util.FiscalYearUtil;
  import jp.or.med.orca.jma_tokutei.common.validate.JValidate;
  
***************
*** 87,102 ****
  		// this.setText(ViewSettings.getTokuteFrameTitleWithKikanInfomation());
  		this.jButtonOK.grabFocus();
  
- 		// edit s.inoue 2010/05/19
- 		//以下はｳｨﾝﾄﾞｳ右上の終了[X]ﾎﾞﾀﾝを押した場合の処理
- 		this.setDefaultCloseOperation(WindowConstants.DO_NOTHING_ON_CLOSE);
- 			this.addWindowListener(new java.awt.event.WindowAdapter() {
- 			public void windowClosing(WindowEvent e) {
- 				ReturnValue = RETURN_VALUE.CANCEL;
- 				setVisible(false);
- 			}
- 		});
- 
  		setModal(true);
  	}
  
--- 96,101 ----
***************
*** 172,181 ****
  	private ExtendedButton getJButtonOK() {
  		if (jButtonOK == null) {
  			jButtonOK = new ExtendedButton();
! 			jButtonOK.setText("OK(Y)");
  			jButtonOK.setActionCommand("終了");
  			jButtonOK.addActionListener(this);
- 			jButtonOK.setMnemonic(KeyEvent.VK_Y);
  		}
  		return jButtonOK;
  	}
--- 171,179 ----
  	private ExtendedButton getJButtonOK() {
  		if (jButtonOK == null) {
  			jButtonOK = new ExtendedButton();
! 			jButtonOK.setText("OK");
  			jButtonOK.setActionCommand("終了");
  			jButtonOK.addActionListener(this);
  		}
  		return jButtonOK;
  	}
***************
*** 188,220 ****
  	private ExtendedButton getJButtonCancel() {
  		if (jButtonCancel == null) {
  			jButtonCancel = new ExtendedButton();
! 			jButtonCancel.setText("キャンセル[C]");
  			jButtonCancel.addActionListener(this);
- 			jButtonCancel.setMnemonic(KeyEvent.VK_C);
  		}
  		return jButtonCancel;
  	}
  
! 	// add s.inoue 2009/12/24
! 	public void keyPressed(KeyEvent keyEvent) {
! 		switch(keyEvent.getKeyCode()){
! //		case KeyEvent.VK_C:
! //			ReturnValue = RETURN_VALUE.CANCEL;
! //			// モーダルダイアログの制御解除。
! //			setVisible(false);
! //			break;
! 		case KeyEvent.VK_Y:
! 			if (setKensaJissiDate(jTextField_KenshinDate.getText())) {
! 				ReturnKenshinDate = jTextField_KenshinDate.getText();
! 			}else{
! 				ReturnKenshinDate = String.valueOf(FiscalYearUtil.getSystemDate(""));
! 			}
! 			ReturnValue = RETURN_VALUE.YES;
! 			setVisible(false);
! 			break;
! 		}
  	}
- 
  	public void keyReleased(KeyEvent arg0) {
  	}
  	public void keyTyped(KeyEvent arg0) {
--- 186,200 ----
  	private ExtendedButton getJButtonCancel() {
  		if (jButtonCancel == null) {
  			jButtonCancel = new ExtendedButton();
! 			jButtonCancel.setText("キャンセル");
  			jButtonCancel.addActionListener(this);
  		}
  		return jButtonCancel;
  	}
  
! 	// edit s.inoue 2009/09/29
! 	public void keyPressed(KeyEvent arg0) {
  	}
  	public void keyReleased(KeyEvent arg0) {
  	}
  	public void keyTyped(KeyEvent arg0) {
***************
*** 256,264 ****
  				ReturnKenshinDate = String.valueOf(FiscalYearUtil.getSystemDate(""));
  			}
  
! 			// edit s.inoue 2009/12/06
! 			// ReturnValue = RETURN_VALUE.OK;
! 			ReturnValue = RETURN_VALUE.YES;
  		}
  		else if(e.getSource() == jButtonCancel) {
  			ReturnValue = RETURN_VALUE.CANCEL;
--- 236,242 ----
  				ReturnKenshinDate = String.valueOf(FiscalYearUtil.getSystemDate(""));
  			}
  
! 			ReturnValue = RETURN_VALUE.OK;
  		}
  		else if(e.getSource() == jButtonCancel) {
  			ReturnValue = RETURN_VALUE.CANCEL;
***************
*** 441,447 ****
  			jTextField_KenshinDate = new ExtendedTextField("",	8,	ImeMode.IME_OFF);
  			jTextField_KenshinDate.setPreferredSize(new Dimension(130, 20));
  			jTextField_KenshinDate.addActionListener(this);
- 			jTextField_KenshinDate.addKeyListener(this);
  		}
  		return jTextField_KenshinDate;
  	}
--- 419,424 ----
***************
*** 457,491 ****
  		return jLabel_KenshinDate;
  	}
  
- 	@Override
- 	public Integer getPrintSelect() {
- 		// TODO 自動生成されたメソッド・スタブ
- 		return null;
- 	}
- 
- 	@Override
- 	public String getFilePath() {
- 		// TODO 自動生成されたメソッド・スタブ
- 		return null;
- 	}
- 
- 	@Override
- 	public void setDialogTitle(String title) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void setDialogSelect(boolean enabled) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void setSaveFileName(String title) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 
  }  //  @jve:decl-index=0:visual-constraint="10,10"
--- 434,437 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/component/DialogFactory.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/component/DialogFactory.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/component/DialogFactory.java	Mon May 10 15:57:38 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/component/DialogFactory.java	Tue Oct 20 21:39:58 2009
***************
*** 15,40 ****
   * @author nishiyama
   */
  public class DialogFactory {
- 	// add s.inoue 2009/12/18
- 	private static final String JLOGINFLAME = "jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame.JLoginFrameCtrl";
  	// add s.inoue 2009/10/04
  	private static final String JKEKKALISTFRAME = "jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame.JKekkaListFrameCtrl";  //  @jve:decl-index=0:
  	private static final String JKOJINFRAME = "jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame.JKojinRegisterFrameCtrl";  //  @jve:decl-index=0:
  	private static final String JOUTPUTGETUJIFRAME = "jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame.JOutputGetujiFrameCtrl";  //  @jve:decl-index=0:
  	private static final String JOUTPUTNITIJIFRAME = "jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame.JOutputNitijiFrameCtrl";
- 	// add s.inoue 2009/12/24
- 	private static final String JSEARCHRESULTLISTFRAME = "jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame.JSearchResultListFrameCtrl";
- 	private static final String JSHOWRESULTFRAME = "jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame.JShowResultFrameCtrl";
- 
- 	// add s.inoue 2010/02/26
- 	private static final String JHOKENJYAMASTERMAINTENANCE = "jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame.JHokenjyaMasterMaintenanceListFrameCtrl";
- 	// add s.inoue 2010/02/26
- 	private static final String JSHIHARAIMASTERMAINTENANCE = "jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame.JShiharaiMasterMaintenanceListFrameCtrl";
- 	private static final String JKENSHINPATTERNMASTERMAINTENANCE = "jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame.JKenshinPatternMaintenanceListFrameCtrl";
- 	private static final String JTEIKEIMAINTENANCE= "jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame.JKekkaTeikeiMaintenanceListFrameCtrl";
- 	private static final String JKENSHINMAINTENANCE= "jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame.JKenshinMasterMaintenanceFrameCtrl";
- 	private static final String JKENSHINOUTPUTGETUJI= "jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame.JOutputGetujiFrameCtrl";
- 
  	private static DialogFactory instance;
  	private Map<Object, IDialog> dialogEventSrcMap;
  
--- 15,25 ----
***************
*** 65,116 ****
  		}else if (parentFlame.equals(JKEKKALISTFRAME) ||
  				parentFlame.equals(JKOJINFRAME)){
  			return new DateSelectDialog(parent,selectedRow);
- 		}else if (parentFlame.equals(JLOGINFLAME)){
- 			return new SettingDialog(parent);
  		}else{
  			return null;
  		}
  	}
  	/**
- 	 * ダイアログ生成
- 	 * @param parent ダイアログ表示元親ウインドウ
- 	 * @param eventSrc イベントソース
- 	 * @return
- 	 */
- 	public IDialog createDialog(JFrame parent, String defaultPath)
- 	throws IllegalAccessException, InstantiationException, NoSuchMethodException, InvocationTargetException {
- 		// edit s.inoue 2009/10/06
- 		String parentFlame = parent.getClass().getName();
- 
- 		// edit s.inoue 2010/02/26
- 		if (parentFlame.equals(JHOKENJYAMASTERMAINTENANCE) ||
- 			parentFlame.equals(JSHIHARAIMASTERMAINTENANCE) ||
- 			parentFlame.equals(JKENSHINPATTERNMASTERMAINTENANCE) ||
- 			parentFlame.equals(JTEIKEIMAINTENANCE) ||
- 			parentFlame.equals(JKENSHINMAINTENANCE) ||
- 			parentFlame.equals(JKENSHINOUTPUTGETUJI)
- 			){
- 			return new FileSelectDialog(parent,defaultPath);
- 		}else{
- 			return null;
- 		}
- 	}
- 
- 
- 	public IDialog createDialog(JFrame parent){
- 		// edit s.inoue 2009/10/06
- 		String parentFlame = parent.getClass().getName();
- 
- 		// edit s.inoue 2010/04/21
- 		if (parentFlame.equals(JSEARCHRESULTLISTFRAME) ||
- 				parentFlame.equals(JSHOWRESULTFRAME)){
- 			return new PageSelectDialog(parent);
- 		}else{
- 			return null;
- 		}
- 	}
- 
- 	/**
  	 * インスタンス生成
  	 * @return DialogFactoryインスタンス
  	 */
--- 50,60 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedButton.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedButton.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedButton.java	Mon Nov 16 09:59:02 2009
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedButton.java	Tue Aug 11 17:55:30 2009
***************
*** 13,48 ****
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  
  /**
!  * JButton の独自拡張
   */
  public class ExtendedButton extends JButton {
! 
  	public ExtendedButton() {
  		super();
  		this.initActions();
  		this.setMargin(new Insets(2, 2, 2, 2));
! 
! 		// edit s.inoue 2009/11/09
! 		// this.setPreferredSize(new Dimension(75,25));
! 		this.setPreferredSize(new Dimension(100,25));
  		this.setFont(ViewSettings.getCommonUserInputFont());
  	}
  
  	public ExtendedButton(String text) {
  		this();
  		this.setText(text);
  	}
! 
  	private void initActions() {
  		ActionMap actions = getActionMap();
! 
  		actions.put("focusOutNext", new FocusOutNextAction()); //$NON-NLS-1$
  		actions.put("focusOutPrevious", new FocusOutPreviousAction()); //$NON-NLS-1$
  
  		InputMap inputs = this.getInputMap(JComponent.WHEN_FOCUSED);
  		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0), "focusOutNext"); //$NON-NLS-1$
  		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0), "focusOutPrevious"); //$NON-NLS-1$
! 
  		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "pressed"); //$NON-NLS-1$
  		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0, true), "released"); //$NON-NLS-1$
  	}
--- 13,53 ----
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  
  /**
!  * JButton の独自拡張 
   */
  public class ExtendedButton extends JButton {
! 	
  	public ExtendedButton() {
  		super();
  		this.initActions();
  		this.setMargin(new Insets(2, 2, 2, 2));
! 		
! 		/* Added 2008/03/06 若月  */
! 		/* --------------------------------------------------- */
! 		this.setPreferredSize(new Dimension(75,25));
! 		/* --------------------------------------------------- */
! 		
! 		/* Added 2008/03/10 若月  */
! 		/* --------------------------------------------------- */
  		this.setFont(ViewSettings.getCommonUserInputFont());
+ 		/* --------------------------------------------------- */
  	}
  
  	public ExtendedButton(String text) {
  		this();
  		this.setText(text);
  	}
! 	
  	private void initActions() {
  		ActionMap actions = getActionMap();
! 		
  		actions.put("focusOutNext", new FocusOutNextAction()); //$NON-NLS-1$
  		actions.put("focusOutPrevious", new FocusOutPreviousAction()); //$NON-NLS-1$
  
  		InputMap inputs = this.getInputMap(JComponent.WHEN_FOCUSED);
  		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0), "focusOutNext"); //$NON-NLS-1$
  		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0), "focusOutPrevious"); //$NON-NLS-1$
! 		
  		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "pressed"); //$NON-NLS-1$
  		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0, true), "released"); //$NON-NLS-1$
  	}
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedCheckBox.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedCheckBox.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedCheckBox.java	Mon Dec 21 13:29:12 2009
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedCheckBox.java	Tue Aug 11 17:55:30 2009
***************
*** 11,37 ****
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  
  /**
!  * JComboBox の独自拡張
   */
  public class ExtendedCheckBox extends JCheckBox {
  
  	public ExtendedCheckBox() {
  		super();
  		this.initActions();
! 
  		this.setFont(ViewSettings.getCommonUserInputFont());
  	}
  
  	private void initActions() {
  		ActionMap actions = getActionMap();
! 
! 		actions.put("focusOutNext", new FocusOutNextAction());
! 		actions.put("focusOutPrevious", new FocusOutPreviousAction());
  
  		InputMap inputs = this.getInputMap(JComponent.WHEN_FOCUSED);
! 		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0), "focusOutNext");
! 		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0), "focusOutPrevious");
! 		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "pressed");
! 		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0, true), "released");
  	}
  }
--- 11,37 ----
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  
  /**
!  * JComboBox の独自拡張 
   */
  public class ExtendedCheckBox extends JCheckBox {
  
  	public ExtendedCheckBox() {
  		super();
  		this.initActions();
! 		
  		this.setFont(ViewSettings.getCommonUserInputFont());
  	}
  
  	private void initActions() {
  		ActionMap actions = getActionMap();
! 		
! 		actions.put("focusOutNext", new FocusOutNextAction()); //$NON-NLS-1$
! 		actions.put("focusOutPrevious", new FocusOutPreviousAction()); //$NON-NLS-1$
  
  		InputMap inputs = this.getInputMap(JComponent.WHEN_FOCUSED);
! 		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0), "focusOutNext"); //$NON-NLS-1$
! 		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0), "focusOutPrevious"); //$NON-NLS-1$
! 		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "pressed"); //$NON-NLS-1$
! 		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0, true), "released"); //$NON-NLS-1$
  	}
  }
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedComboBox.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedComboBox.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedComboBox.java	Mon Dec 21 13:29:12 2009
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedComboBox.java	Thu Oct  1 19:35:56 2009
***************
*** 62,73 ****
  	private void initActions() {
  		ActionMap actions = getActionMap();
  
! 		actions.put("focusOutNext", new FocusOutNextAction());
! 		actions.put("focusOutPrevious", new FocusOutPreviousAction());
  
  		InputMap inputs = this.getInputMap(JComponent.WHEN_FOCUSED);
! 		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "focusOutNext");
! 
  	}
  
  	// add s.inoue 2009/10/01
--- 62,72 ----
  	private void initActions() {
  		ActionMap actions = getActionMap();
  
! 		actions.put("focusOutNext", new FocusOutNextAction()); //$NON-NLS-1$
! 		actions.put("focusOutPrevious", new FocusOutPreviousAction()); //$NON-NLS-1$
  
  		InputMap inputs = this.getInputMap(JComponent.WHEN_FOCUSED);
! 		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "focusOutNext"); //$NON-NLS-1$
  	}
  
  	// add s.inoue 2009/10/01
***************
*** 75,86 ****
  		ActionMap actions = getActionMap();
  		InputMap inputs = getInputMap();
  
- 		actions.put("focusOutNext", new FocusOutNextAction());
- 		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0), "focusOutNext");
- 
- 		actions.put("focusOutPrevious", new FocusOutPreviousAction());
- 		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0), "focusOutPrevious");
- 
  		if (handleEnterKey) {
  			inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "focusOutNext");
  		}
--- 74,79 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedEditorPane.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedEditorPane.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedEditorPane.java	Wed May 26 16:04:40 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedEditorPane.java	Tue Aug 11 17:55:30 2009
***************
*** 1,130 ****
  package jp.or.med.orca.jma_tokutei.common.component;
  
- import java.awt.event.KeyEvent;
- 
- import javax.swing.Action;
- import javax.swing.ActionMap;
- import javax.swing.InputMap;
- import javax.swing.JComponent;
  import javax.swing.JEditorPane;
! import javax.swing.JMenuItem;
! import javax.swing.JPopupMenu;
! import javax.swing.JTextArea;
! import javax.swing.KeyStroke;
! import javax.swing.text.DefaultEditorKit;
  
  import jp.or.med.orca.jma_tokutei.common.component.ImeController.ImeMode;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  
  /**
!  * JTextField の独自拡張
!  *
!  *  Modified 2008/03/12 若月
!  *  IME 制御機能をExtendedEditorPane クラスと共有するため、ImeController クラスに移動。
   */
  public class ExtendedEditorPane extends JEditorPane {
! 
  	private ImeController imeController = null;
  
! 	/**
! 	 * コンストラクタ
! 	 */
! 	public ExtendedEditorPane(String text, int n, ImeMode mode, boolean handleEnterKey) {
  		super();
  		setFont(ViewSettings.getCommonUserInputFont());
! 
! 		LengthLimitableDocument doc = new LengthLimitableDocument();
! 		if (n > 0) {
! 			doc.setLimit(n);
! 		}
! 		this.setDocument(doc);
! 
! 		this.setText(text);
! 
! 		initActions(handleEnterKey);
! 
  		this.imeController = new ImeController();
- 		this.imeController.addFocusListenerForCharcterSubsets(this, mode);
- 	}
- 
- 	public ExtendedEditorPane() {
- 		this("", -1, ImeMode.IME_NO_CONTROLL, true);
- 	}
- 
- 	public ExtendedEditorPane(boolean handleEnterKey) {
- 		this("", -1, ImeMode.IME_NO_CONTROLL, handleEnterKey);
  	}
  
  	public ExtendedEditorPane(String text, int n) {
! 		this(text, n, ImeMode.IME_NO_CONTROLL, true);
! 	}
! 
! 	public ExtendedEditorPane(String text, int n, boolean handleEnterKey) {
! 		this(text, n, ImeMode.IME_NO_CONTROLL, handleEnterKey);
  	}
  
  	public ExtendedEditorPane(String text, int n, ImeMode mode) {
! 		this(text, n, mode, true);
  	}
  
  	public ExtendedEditorPane(ImeMode mode) {
! 		this("", -1, mode, true);
! 	}
! 
! 	private void initActions(boolean handleEnterKey) {
! 		ActionMap actions = getActionMap();
! 		InputMap inputs = getInputMap();
! 
! 		actions.put("focusOutNext", new FocusOutNextAction());
! 		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0), "focusOutNext");
! 
! 		actions.put("focusOutPrevious", new FocusOutPreviousAction());
! 		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0), "focusOutPrevious");
! 
! 		if (handleEnterKey) {
! 			inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "focusOutNext");
! 		}
  	}
  
- 	/**
- 	 * エディタのプルダウンメニュー設定
- 	 */
- 	public void showPopup(JComponent c, int x, int y) {
- 		JPopupMenu menu = new JPopupMenu();
- 
- 		ActionMap am = c.getActionMap();
- 
- 		Action cut = am.get(DefaultEditorKit.cutAction);
- 		addPopupMenu(menu, "切り取り(X)", cut, 'X', KeyStroke.getKeyStroke(KeyEvent.VK_X, KeyEvent.CTRL_DOWN_MASK));
- 
- 		Action copy = am.get(DefaultEditorKit.copyAction);
- 		addPopupMenu(menu, "コピー(C)", copy, 'C', KeyStroke.getKeyStroke(KeyEvent.VK_C, KeyEvent.CTRL_DOWN_MASK));
- 
- 		Action paste = am.get(DefaultEditorKit.pasteAction);
- 		addPopupMenu(menu, "貼り付け(V)", paste, 'V', KeyStroke.getKeyStroke(KeyEvent.VK_V, KeyEvent.CTRL_DOWN_MASK));
- 
- 		Action all = am.get(DefaultEditorKit.selectAllAction);
- 		addPopupMenu(menu, "すべて選択(A)", all, 'A', KeyStroke.getKeyStroke(KeyEvent.VK_A, KeyEvent.CTRL_DOWN_MASK));
- 
- 		menu.show(c, x, y);
- 	}
- 
- 	// add s.inoue 2009/12/07
- 	// プルダウンメニュー項目を追加
- 	protected void addPopupMenu(JPopupMenu pmenu, String text, Action action, int mnemonic, KeyStroke ks) {
- 		if (action != null) {
- 			JMenuItem mi = pmenu.add(action);
- 			if (text != null) {
- 				mi.setText(text);
- 			}
- 			if (mnemonic != 0) {
- 				mi.setMnemonic(mnemonic);
- 			}
- 			if (ks != null) {
- 				mi.setAccelerator(ks);
- 			}
- 		}
- 	}
  	public void setLimit(int limit) {
  		LengthLimitableDocument doc = (LengthLimitableDocument)getDocument();
  		doc.setLimit(limit);
--- 1,60 ----
  package jp.or.med.orca.jma_tokutei.common.component;
  
  import javax.swing.JEditorPane;
! 
! import javax.swing.text.Document;
  
  import jp.or.med.orca.jma_tokutei.common.component.ImeController.ImeMode;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  
  /**
!  * JEditorPane の独自拡張 
   */
  public class ExtendedEditorPane extends JEditorPane {
! 	
  	private ImeController imeController = null;
  
! 	public ExtendedEditorPane() {
  		super();
+ 		setDocument(new LengthLimitableDocument());
  		setFont(ViewSettings.getCommonUserInputFont());
! //		initActions();
! 		
  		this.imeController = new ImeController();
  	}
  
  	public ExtendedEditorPane(String text, int n) {
! 		this();
! 		
! 		Document doc = this.getDocument();
! 		if (doc instanceof LengthLimitableDocument) {
! 			((LengthLimitableDocument)doc).setLimit(n);	
! 		}
! 		
! 		setText(text);
  	}
  
  	public ExtendedEditorPane(String text, int n, ImeMode mode) {
! 		this(text, n);
! 		this.imeController.addFocusListenerForCharcterSubsets(this, mode);
  	}
  
  	public ExtendedEditorPane(ImeMode mode) {
! 		this();
! 		this.imeController.addFocusListenerForCharcterSubsets(this, mode);
  	}
+ 	
+ //	private void initActions() {
+ //		ActionMap actions = getActionMap();
+ //		InputMap inputs = getInputMap();
+ //
+ //		actions.put("focusOutNext", new FocusOutNextAction()); //$NON-NLS-1$
+ //		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0), "focusOutNext"); //$NON-NLS-1$
+ //
+ //		actions.put("focusOutPrevious", new FocusOutPreviousAction()); //$NON-NLS-1$
+ //		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0), "focusOutPrevious"); //$NON-NLS-1$
+ //	}
  
  	public void setLimit(int limit) {
  		LengthLimitableDocument doc = (LengthLimitableDocument)getDocument();
  		doc.setLimit(limit);
***************
*** 135,249 ****
  		return doc.getLimit();
  	}
  }
- // edit 2010/05/21 修正前不具合対応
- //package jp.or.med.orca.jma_tokutei.common.component;
- //
- //import java.awt.event.ActionListener;
- //import java.awt.event.KeyEvent;
- //import java.awt.event.MouseEvent;
- //
- //import javax.swing.Action;
- //import javax.swing.ActionMap;
- //import javax.swing.JComponent;
- //import javax.swing.JEditorPane;
- //import javax.swing.JMenuItem;
- //import javax.swing.JPopupMenu;
- //import javax.swing.KeyStroke;
- //import javax.swing.text.DefaultEditorKit;
- //import javax.swing.text.Document;
- //
- //import jp.or.med.orca.jma_tokutei.common.component.ImeController.ImeMode;
- //import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
- //
- ///**
- // * JEditorPane の独自拡張
- // */
- //public class ExtendedEditorPane extends JEditorPane {
- //
- //	private ImeController imeController = null;
- //
- //	public ExtendedEditorPane() {
- //		super();
- //		setDocument(new LengthLimitableDocument());
- //		setFont(ViewSettings.getCommonUserInputFont());
- //
- //		this.imeController = new ImeController();
- //	}
- //
- //	// add s.inoue 2009/11/11
- //	/**
- //	 * エディタのプルダウンメニュー設定
- //	 */
- //	public void showPopup(JComponent c, int x, int y) {
- //		JPopupMenu menu = new JPopupMenu();
- //
- //		ActionMap am = c.getActionMap();
- //
- //		Action cut = am.get(DefaultEditorKit.cutAction);
- //		addPopupMenu(menu, "切り取り(X)", cut, 'X', KeyStroke.getKeyStroke(KeyEvent.VK_X, KeyEvent.CTRL_DOWN_MASK));
- //
- //		Action copy = am.get(DefaultEditorKit.copyAction);
- //		addPopupMenu(menu, "コピー(C)", copy, 'C', KeyStroke.getKeyStroke(KeyEvent.VK_C, KeyEvent.CTRL_DOWN_MASK));
- //
- //		Action paste = am.get(DefaultEditorKit.pasteAction);
- //		addPopupMenu(menu, "貼り付け(V)", paste, 'V', KeyStroke.getKeyStroke(KeyEvent.VK_V, KeyEvent.CTRL_DOWN_MASK));
- //
- //		Action all = am.get(DefaultEditorKit.selectAllAction);
- //		addPopupMenu(menu, "すべて選択(A)", all, 'A', KeyStroke.getKeyStroke(KeyEvent.VK_A, KeyEvent.CTRL_DOWN_MASK));
- //
- //		menu.show(c, x, y);
- //	}
- //
- //	// add s.inoue 2009/11/11
- //	// プルダウンメニュー項目を追加
- //	protected void addPopupMenu(JPopupMenu pmenu, String text, Action action, int mnemonic, KeyStroke ks) {
- //		if (action != null) {
- //			JMenuItem mi = pmenu.add(action);
- //			if (text != null) {
- //				mi.setText(text);
- //			}
- //			if (mnemonic != 0) {
- //				mi.setMnemonic(mnemonic);
- //			}
- //			if (ks != null) {
- //				mi.setAccelerator(ks);
- //			}
- //		}
- //	}
- //
- //	// マウスリスナのメソッドを定義
- //	public void mouseClicked(MouseEvent e){
- //	}
- //
- //	// MouseListenerに宣言されている各種メソッドを定義（ここでは省略）
- //	public ExtendedEditorPane(String text, int n) {
- //		this();
- //
- //		Document doc = this.getDocument();
- //		if (doc instanceof LengthLimitableDocument) {
- //			((LengthLimitableDocument)doc).setLimit(n);
- //		}
- //
- //		setText(text);
- //	}
- //
- //	public ExtendedEditorPane(String text, int n, ImeMode mode) {
- //		this(text, n);
- //		this.imeController.addFocusListenerForCharcterSubsets(this, mode);
- //	}
- //
- //	public ExtendedEditorPane(ImeMode mode) {
- //		this();
- //		this.imeController.addFocusListenerForCharcterSubsets(this, mode);
- //	}
- //
- //	public void setLimit(int limit) {
- //		LengthLimitableDocument doc = (LengthLimitableDocument)getDocument();
- //		doc.setLimit(limit);
- //	}
- //
- //	public int getLimit() {
- //		LengthLimitableDocument doc = (LengthLimitableDocument)getDocument();
- //		return doc.getLimit();
- //	}
- //}
--- 65,67 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedPasswordField.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedPasswordField.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedPasswordField.java	Mon Dec  7 11:47:16 2009
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedPasswordField.java	Tue Aug 11 17:55:30 2009
***************
*** 27,40 ****
  		ActionMap actions = getActionMap();
  		InputMap inputs = getInputMap();
  
! 		actions.put("focusOutNext", new FocusOutNextAction());
! 		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0), "focusOutNext");
  
! 		actions.put("focusOutPrevious", new FocusOutPreviousAction());
! 		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0), "focusOutPrevious");
! 
! 		// edit s.inoue 2009/12/06
! 		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "focusOutNext");
  	}
  
  	public void setLimit(int limit) {
--- 27,37 ----
  		ActionMap actions = getActionMap();
  		InputMap inputs = getInputMap();
  
! 		actions.put("focusOutNext", new FocusOutNextAction()); //$NON-NLS-1$
! 		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0), "focusOutNext"); //$NON-NLS-1$
  
! 		actions.put("focusOutPrevious", new FocusOutPreviousAction()); //$NON-NLS-1$
! 		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0), "focusOutPrevious"); //$NON-NLS-1$
  	}
  
  	public void setLimit(int limit) {
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedTextArea.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedTextArea.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedTextArea.java	Mon Dec 21 13:29:12 2009
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedTextArea.java	Tue Aug 11 17:55:30 2009
***************
*** 2,30 ****
  
  import java.awt.event.KeyEvent;
  
- import javax.swing.Action;
  import javax.swing.ActionMap;
  import javax.swing.InputMap;
- import javax.swing.JComponent;
- import javax.swing.JMenuItem;
- import javax.swing.JPopupMenu;
  import javax.swing.JTextArea;
  import javax.swing.KeyStroke;
- import javax.swing.text.DefaultEditorKit;
  
  import jp.or.med.orca.jma_tokutei.common.component.ImeController.ImeMode;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  
  /**
   * JTextField の独自拡張
!  *
   *  Modified 2008/03/12 若月
   *  IME 制御機能をExtendedEditorPane クラスと共有するため、ImeController クラスに移動。
   */
  public class ExtendedTextArea extends JTextArea {
! 
  	private ImeController imeController = null;
! 
  	/**
  	 * コンストラクタ
  	 */
--- 2,25 ----
  
  import java.awt.event.KeyEvent;
  
  import javax.swing.ActionMap;
  import javax.swing.InputMap;
  import javax.swing.JTextArea;
  import javax.swing.KeyStroke;
  
  import jp.or.med.orca.jma_tokutei.common.component.ImeController.ImeMode;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  
  /**
   * JTextField の独自拡張
!  * 
   *  Modified 2008/03/12 若月
   *  IME 制御機能をExtendedEditorPane クラスと共有するため、ImeController クラスに移動。
   */
  public class ExtendedTextArea extends JTextArea {
! 	
  	private ImeController imeController = null;
! 	
  	/**
  	 * コンストラクタ
  	 */
***************
*** 32,71 ****
  		super();
  		setFont(ViewSettings.getCommonUserInputFont());
  
! 		LengthLimitableDocument doc = new LengthLimitableDocument();
  		if (n > 0) {
! 			doc.setLimit(n);
  		}
  		this.setDocument(doc);
  
  		this.setText(text);
! 
  		initActions(handleEnterKey);
  
  		this.imeController = new ImeController();
  		this.imeController.addFocusListenerForCharcterSubsets(this, mode);
! 	}
! 
  	public ExtendedTextArea() {
  		this("", -1, ImeMode.IME_NO_CONTROLL, true);
  	}
  
  	public ExtendedTextArea(boolean handleEnterKey) {
  		this("", -1, ImeMode.IME_NO_CONTROLL, handleEnterKey);
! 	}
! 
  	public ExtendedTextArea(String text, int n) {
  		this(text, n, ImeMode.IME_NO_CONTROLL, true);
  	}
  
  	public ExtendedTextArea(String text, int n, boolean handleEnterKey) {
  		this(text, n, ImeMode.IME_NO_CONTROLL, handleEnterKey);
! 	}
! 
  	public ExtendedTextArea(String text, int n, ImeMode mode) {
  		this(text, n, mode, true);
  	}
! 
  	public ExtendedTextArea(ImeMode mode) {
  		this("", -1, mode, true);
  	}
--- 27,66 ----
  		super();
  		setFont(ViewSettings.getCommonUserInputFont());
  
! 		LengthLimitableDocument doc = new LengthLimitableDocument();		
  		if (n > 0) {
! 			doc.setLimit(n);			
  		}
  		this.setDocument(doc);
  
  		this.setText(text);
! 		
  		initActions(handleEnterKey);
  
  		this.imeController = new ImeController();
  		this.imeController.addFocusListenerForCharcterSubsets(this, mode);
! 	}	
! 	
  	public ExtendedTextArea() {
  		this("", -1, ImeMode.IME_NO_CONTROLL, true);
  	}
  
  	public ExtendedTextArea(boolean handleEnterKey) {
  		this("", -1, ImeMode.IME_NO_CONTROLL, handleEnterKey);
! 	}	
! 	
  	public ExtendedTextArea(String text, int n) {
  		this(text, n, ImeMode.IME_NO_CONTROLL, true);
  	}
  
  	public ExtendedTextArea(String text, int n, boolean handleEnterKey) {
  		this(text, n, ImeMode.IME_NO_CONTROLL, handleEnterKey);
! 	}	
! 	
  	public ExtendedTextArea(String text, int n, ImeMode mode) {
  		this(text, n, mode, true);
  	}
! 	
  	public ExtendedTextArea(ImeMode mode) {
  		this("", -1, mode, true);
  	}
***************
*** 79,129 ****
  
  		actions.put("focusOutPrevious", new FocusOutPreviousAction());
  		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0), "focusOutPrevious");
! 
  		if (handleEnterKey) {
  			inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "focusOutNext");
  		}
  	}
  
- 	/**
- 	 * エディタのプルダウンメニュー設定
- 	 */
- 	public void showPopup(JComponent c, int x, int y) {
- 		JPopupMenu menu = new JPopupMenu();
- 
- 		ActionMap am = c.getActionMap();
- 
- 		Action cut = am.get(DefaultEditorKit.cutAction);
- 		addPopupMenu(menu, "切り取り(X)", cut, 'X', KeyStroke.getKeyStroke(KeyEvent.VK_X, KeyEvent.CTRL_DOWN_MASK));
- 
- 		Action copy = am.get(DefaultEditorKit.copyAction);
- 		addPopupMenu(menu, "コピー(C)", copy, 'C', KeyStroke.getKeyStroke(KeyEvent.VK_C, KeyEvent.CTRL_DOWN_MASK));
- 
- 		Action paste = am.get(DefaultEditorKit.pasteAction);
- 		addPopupMenu(menu, "貼り付け(V)", paste, 'V', KeyStroke.getKeyStroke(KeyEvent.VK_V, KeyEvent.CTRL_DOWN_MASK));
- 
- 		Action all = am.get(DefaultEditorKit.selectAllAction);
- 		addPopupMenu(menu, "すべて選択(A)", all, 'A', KeyStroke.getKeyStroke(KeyEvent.VK_A, KeyEvent.CTRL_DOWN_MASK));
- 
- 		menu.show(c, x, y);
- 	}
- 
- 	// add s.inoue 2009/12/07
- 	// プルダウンメニュー項目を追加
- 	protected void addPopupMenu(JPopupMenu pmenu, String text, Action action, int mnemonic, KeyStroke ks) {
- 		if (action != null) {
- 			JMenuItem mi = pmenu.add(action);
- 			if (text != null) {
- 				mi.setText(text);
- 			}
- 			if (mnemonic != 0) {
- 				mi.setMnemonic(mnemonic);
- 			}
- 			if (ks != null) {
- 				mi.setAccelerator(ks);
- 			}
- 		}
- 	}
  	public void setLimit(int limit) {
  		LengthLimitableDocument doc = (LengthLimitableDocument)getDocument();
  		doc.setLimit(limit);
--- 74,86 ----
  
  		actions.put("focusOutPrevious", new FocusOutPreviousAction());
  		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0), "focusOutPrevious");
! 		
  		if (handleEnterKey) {
  			inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "focusOutNext");
  		}
  	}
+ 	/* --------------------------------------------------- */
  
  	public void setLimit(int limit) {
  		LengthLimitableDocument doc = (LengthLimitableDocument)getDocument();
  		doc.setLimit(limit);
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedTextField.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedTextField.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedTextField.java	Wed Apr 21 09:46:08 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/component/ExtendedTextField.java	Tue Aug 11 17:55:30 2009
***************
*** 1,12 ****
  package jp.or.med.orca.jma_tokutei.common.component;
  
- import java.awt.event.FocusEvent;
- import java.awt.event.FocusListener;
  import java.awt.event.KeyEvent;
  
  import javax.swing.ActionMap;
  import javax.swing.InputMap;
- import javax.swing.JComponent;
  import javax.swing.JTextField;
  import javax.swing.KeyStroke;
  import javax.swing.text.Document;
--- 1,9 ----
***************
*** 16,88 ****
  
  /**
   * JTextField の独自拡張
!  *
   *  IME 制御機能をExtendedEditorPane クラスと共有するため、ImeController クラスに移動。
   */
! public class ExtendedTextField extends JTextField implements FocusListener{
! 
  	private ImeController imeController = null;
! 
  	/**
  	 * コンストラクタ
  	 */
  	public ExtendedTextField(String text, int n, ImeMode mode, boolean handleEnterKey) {
  		super();
  		setFont(ViewSettings.getCommonUserInputFont());
  
! 		LengthLimitableDocument doc = new LengthLimitableDocument();
  		if (n > 0) {
! 			doc.setLimit(n);
  		}
  		this.setDocument(doc);
  
  		this.setText(text);
! 
  		initActions(handleEnterKey);
  
  		this.imeController = new ImeController();
  		this.imeController.addFocusListenerForCharcterSubsets(this, mode);
! 		this.addFocusListener(this);
! 	}
! 
! 	// add s.inoue 2010/01/14
! 	public void focusGained(FocusEvent e) {
! 		this.selectAll();
! 	}
! 
  	public ExtendedTextField() {
  		this("", -1, ImeMode.IME_NO_CONTROLL, true);
! 		this.addFocusListener(this);
  	}
  
  	public ExtendedTextField(boolean handleEnterKey) {
  		this("", -1, ImeMode.IME_NO_CONTROLL, handleEnterKey);
! 		this.addFocusListener(this);
! 	}
! 
  	public ExtendedTextField(String text, int n) {
  		this(text, n, ImeMode.IME_NO_CONTROLL, true);
! 		this.addFocusListener(this);
  	}
  
  	public ExtendedTextField(String text, int n, boolean handleEnterKey) {
  		this(text, n, ImeMode.IME_NO_CONTROLL, handleEnterKey);
! 		this.addFocusListener(this);
! 	}
  
  	public ExtendedTextField(String text, int n, ImeMode mode) {
  		this(text, n, mode, true);
! 		this.addFocusListener(this);
  	}
! 
  	public ExtendedTextField(ImeMode mode) {
  		this("", -1, mode, true);
! 		this.addFocusListener(this);
  	}
  
! 
! 	/* Enterキーによるフォーカス制御のON/OFFを
  	 * 切り替えられるようにする*/
  	private void initActions(boolean handleEnterKey) {
  		ActionMap actions = getActionMap();
  		InputMap inputs = getInputMap();
--- 13,232 ----
  
  /**
   * JTextField の独自拡張
!  * 
!  *  Modified 2008/03/12 若月
   *  IME 制御機能をExtendedEditorPane クラスと共有するため、ImeController クラスに移動。
   */
! public class ExtendedTextField extends JTextField {
! 	
! 	/* Modified 2008/03/12 若月  */
! 	/* --------------------------------------------------- */
! //	private Subset[] subsets = null;
! //	private boolean characterSubsetsManaged = false;
! 	
! //	public enum ImeMode {
! //		IME_NONE,
! //		IME_ZENKAKU,
! //		IME_HANKAKU_KANA,
! //		IME_ZENKAKU_KANA,
! //		IME_ZENKAKU_ASCII,
! //		IME_OFF
! //	}
! 	/* --------------------------------------------------- */
  	private ImeController imeController = null;
! 	/* --------------------------------------------------- */
! 	
  	/**
  	 * コンストラクタ
  	 */
+ 	/* Added 2008/03/20 若月  */
+ 	/* --------------------------------------------------- */
  	public ExtendedTextField(String text, int n, ImeMode mode, boolean handleEnterKey) {
  		super();
  		setFont(ViewSettings.getCommonUserInputFont());
  
! 		LengthLimitableDocument doc = new LengthLimitableDocument();		
  		if (n > 0) {
! 			doc.setLimit(n);			
  		}
  		this.setDocument(doc);
  
  		this.setText(text);
! 		
  		initActions(handleEnterKey);
  
  		this.imeController = new ImeController();
  		this.imeController.addFocusListenerForCharcterSubsets(this, mode);
! 	}	
! 	/* --------------------------------------------------- */
! 	
  	public ExtendedTextField() {
+ 		/* Modified 2008/03/20 若月  */
+ 		/* --------------------------------------------------- */
+ //		super();
+ //		setDocument(new LengthLimitableDocument());
+ //		setFont(ViewSettings.getCommonUserInputFont());
+ //		initActions(true);
+ //		
+ //		/* Added 2008/03/12 若月  */
+ //		/* --------------------------------------------------- */
+ //		this.imeController = new ImeController();
+ //		/* --------------------------------------------------- */
+ 		/* --------------------------------------------------- */
  		this("", -1, ImeMode.IME_NO_CONTROLL, true);
! 		/* --------------------------------------------------- */
  	}
  
  	public ExtendedTextField(boolean handleEnterKey) {
+ 		/* Modified 2008/03/20 若月  */
+ 		/* --------------------------------------------------- */
+ //		super();
+ //		setDocument(new LengthLimitableDocument());
+ //		setFont(ViewSettings.getCommonUserInputFont());
+ //		initActions(handleEnterKey);
+ //		this.imeController = new ImeController();
+ 		/* --------------------------------------------------- */
  		this("", -1, ImeMode.IME_NO_CONTROLL, handleEnterKey);
! 		/* --------------------------------------------------- */
! 	}	
! 	
  	public ExtendedTextField(String text, int n) {
+ 		
+ 		/* Modified 2008/03/20 若月  */
+ 		/* --------------------------------------------------- */
+ //		this();
+ //		
+ //		/* Modified 2008/03/12 若月  */
+ //		/* --------------------------------------------------- */
+ ////		LengthLimitableDocument doc = new LengthLimitableDocument();
+ ////		doc.setLimit(n);
+ ////		setDocument(doc);
+ //		/* --------------------------------------------------- */
+ //		Document doc = this.getDocument();
+ //		if (doc instanceof LengthLimitableDocument) {
+ //			((LengthLimitableDocument)doc).setLimit(n);	
+ //		}
+ //		/* --------------------------------------------------- */
+ //		
+ //		setText(text);
+ ////		setColumns(n);
+ ////		initActions();
+ 		/* --------------------------------------------------- */
  		this(text, n, ImeMode.IME_NO_CONTROLL, true);
! 		/* --------------------------------------------------- */
! 
  	}
  
  	public ExtendedTextField(String text, int n, boolean handleEnterKey) {
+ 		/* Modified 2008/03/20 若月  */
+ 		/* --------------------------------------------------- */
+ //		this();
+ //		Document doc = this.getDocument();
+ //		if (doc instanceof LengthLimitableDocument) {
+ //			((LengthLimitableDocument)doc).setLimit(n);	
+ //		}
+ //		setText(text);
+ 		/* --------------------------------------------------- */
  		this(text, n, ImeMode.IME_NO_CONTROLL, handleEnterKey);
! 		/* --------------------------------------------------- */
  
+ 	}	
+ 	
  	public ExtendedTextField(String text, int n, ImeMode mode) {
+ 		/* Modified 2008/03/20 若月  */
+ 		/* --------------------------------------------------- */
+ //		this(text, n);
+ //		this.imeController.addFocusListenerForCharcterSubsets(this, mode);
+ 		/* --------------------------------------------------- */
  		this(text, n, mode, true);
! 		/* --------------------------------------------------- */
  	}
! 	
  	public ExtendedTextField(ImeMode mode) {
+ 		/* Modified 2008/03/20 若月  */
+ 		/* --------------------------------------------------- */
+ //		this();
+ //		this.imeController.addFocusListenerForCharcterSubsets(this, mode);
+ 		/* --------------------------------------------------- */
  		this("", -1, mode, true);
! 		/* --------------------------------------------------- */
  	}
  
! 	/* Deleted 2008/03/12 若月 IME 制御を ImeController クラスに移動 */
! 	/* --------------------------------------------------- */
! //	/**
! //	 * IME 疑似制御のための FocusListener を追加する。 
! //	 */
! //	private void addFocusListenerForCharcterSubsets(ImeMode mode) {
! //		
! //		Subset subset = null;
! //		
! //		switch(mode){
! //		case IME_NONE:
! //			break;
! //			
! //		case IME_ZENKAKU:
! //			this.characterSubsetsManaged = true;
! //			this.subsets = new Subset[]{ InputSubset.KANJI };
! //			break;
! //			
! //		case IME_HANKAKU_KANA:
! //			this.characterSubsetsManaged = true;
! //			this.subsets = new Subset[]{ InputSubset.HALFWIDTH_KATAKANA };
! //			break;
! //			
! //		case IME_ZENKAKU_KANA:
! //			this.characterSubsetsManaged = true;
! //			this.subsets = new Subset[]{ InputSubset.KANJI, InputSubset.HALFWIDTH_KATAKANA };
! //			break;
! //			
! //		case IME_ZENKAKU_ASCII:
! //			this.characterSubsetsManaged = true;
! //			this.subsets = new Subset[]{ InputSubset.FULLWIDTH_LATIN };
! //			break;
! //			
! //		case IME_OFF:
! //			this.characterSubsetsManaged = true;
! //			this.subsets = null;
! //			break;
! //			
! //		default:
! //		}
! //
! //		
! //		this.addFocusListener(new FocusListener(){
! //
! //			public void focusGained(FocusEvent arg0) {
! //				if (ExtendedTextField.this.characterSubsetsManaged) {
! //					ExtendedTextField.this.getInputContext().setCharacterSubsets(
! //							ExtendedTextField.this.subsets);				
! //				}
! //			}
! //
! //			public void focusLost(FocusEvent arg0) {
! //				/* なにもしない */
! //			}
! //		});
! //	}
! 	/* --------------------------------------------------- */
! 	
! 	/* Modified 2008/03/20 若月 Enterキーによるフォーカス制御のON/OFFを 
  	 * 切り替えられるようにする*/
+ 	/* --------------------------------------------------- */
+ //	private void initActions() {
+ //		ActionMap actions = getActionMap();
+ //		InputMap inputs = getInputMap();
+ //
+ //		actions.put("focusOutNext", new FocusOutNextAction());
+ //		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0), "focusOutNext");
+ //
+ //		actions.put("focusOutPrevious", new FocusOutPreviousAction());
+ //		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0), "focusOutPrevious");
+ //		
+ //		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "focusOutNext");
+ ////		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0, true), "focusOutNext");
+ //	}
+ 	/* --------------------------------------------------- */
  	private void initActions(boolean handleEnterKey) {
  		ActionMap actions = getActionMap();
  		InputMap inputs = getInputMap();
***************
*** 92,102 ****
  
  		actions.put("focusOutPrevious", new FocusOutPreviousAction());
  		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0), "focusOutPrevious");
! 
  		if (handleEnterKey) {
  			inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "focusOutNext");
  		}
  	}
  
  	public void setLimit(int limit) {
  		LengthLimitableDocument doc = (LengthLimitableDocument)getDocument();
--- 236,248 ----
  
  		actions.put("focusOutPrevious", new FocusOutPreviousAction());
  		inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0), "focusOutPrevious");
! 		
  		if (handleEnterKey) {
  			inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "focusOutNext");
+ //			inputs.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0, true), "focusOutNext");			
  		}
  	}
+ 	/* --------------------------------------------------- */
  
  	public void setLimit(int limit) {
  		LengthLimitableDocument doc = (LengthLimitableDocument)getDocument();
***************
*** 107,116 ****
  		LengthLimitableDocument doc = (LengthLimitableDocument)getDocument();
  		return doc.getLimit();
  	}
- 
- 	@Override
- 	public void focusLost(FocusEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
  }
--- 253,256 ----
Only in ./common-component/src/jp/or/med/orca/jma_tokutei/common/component: FileSelectDialog.java
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/component/IDialog.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/component/IDialog.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/component/IDialog.java	Thu May  6 10:45:08 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/component/IDialog.java	Mon Oct 19 14:40:24 2009
***************
*** 24,47 ****
  	RETURN_VALUE getStatus();
  
  	/**
- 	 * ファイルパス取得
- 	 * @return ファイルパス
- 	 */
- 	String getFilePath();
- 
- 	/**
  	 * 指定健診日取得
  	 * @return 健診日
  	 */
  	String getKenshinDate();
  
  	/**
- 	 * 印刷方法取得 枚数(1 or 2)
- 	 * @return 印刷方法
- 	 */
- 	Integer getPrintSelect();
- 
- 	/**
  	 * ダイアログのテキストエリア/リストボックスに
  	 * 選択中セルのテキストを設定する
  	 * @param text 選択中セルテキスト
--- 24,35 ----
***************
*** 55,84 ****
  	void setMessageTitle(String title);
  
  	/**
- 	 * 文字列を非活性設定
- 	 * @param title タイトル文字列
- 	 */
- 	void setEnabled(boolean enabled);
- 
- 	/**
- 	 * 文字列を非活性設定
- 	 * @param title タイトル文字列
- 	 */
- 	void setDialogSelect(boolean enabled);
- 
- 	/**
- 	 * タイトル部分に表示する文字列を設定
- 	 * @param title タイトル文字列
- 	 */
- 	void setDialogTitle(String title);
- 
- 	/**
- 	 * タイトル部分に表示する文字列を設定
- 	 * @param title タイトル文字列
- 	 */
- 	void setSaveFileName(String title);
- 
- 	/**
  	 * キャンセルボタン表示/非表示設定
  	 * @param isShowCancel
  	 */
--- 43,48 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/component/MessageDialog.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/component/MessageDialog.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/component/MessageDialog.java	Thu May  6 10:45:08 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/component/MessageDialog.java	Mon Oct 19 14:40:24 2009
***************
*** 157,167 ****
  	private ExtendedButton getJButtonOK() {
  		if (jButtonOK == null) {
  			jButtonOK = new ExtendedButton();
! 			jButtonOK.setText("OK(Y)");
  //			jButtonOK.setFont(defaultFont);
  			jButtonOK.setActionCommand("終了");
  			jButtonOK.addActionListener(this);
- 			jButtonOK.setMnemonic(KeyEvent.VK_Y);
  		}
  		return jButtonOK;
  	}
--- 157,166 ----
  	private ExtendedButton getJButtonOK() {
  		if (jButtonOK == null) {
  			jButtonOK = new ExtendedButton();
! 			jButtonOK.setText("OK");
  //			jButtonOK.setFont(defaultFont);
  			jButtonOK.setActionCommand("終了");
  			jButtonOK.addActionListener(this);
  		}
  		return jButtonOK;
  	}
***************
*** 175,183 ****
  		if (jButtonCancel == null) {
  			jButtonCancel = new ExtendedButton();
  //			jButtonCancel.setFont(defaultFont);
! 			jButtonCancel.setText("キャンセル[C]");
  			jButtonCancel.addActionListener(this);
- 			jButtonCancel.setMnemonic(KeyEvent.VK_C);
  		}
  		return jButtonCancel;
  	}
--- 174,181 ----
  		if (jButtonCancel == null) {
  			jButtonCancel = new ExtendedButton();
  //			jButtonCancel.setFont(defaultFont);
! 			jButtonCancel.setText("キャンセル");
  			jButtonCancel.addActionListener(this);
  		}
  		return jButtonCancel;
  	}
***************
*** 207,215 ****
  	 */
  	public void actionPerformed(ActionEvent e) {
  		if(e.getSource() == jButtonOK) {
! 			// edit s.inoue 2009/12/06
! 			// ReturnValue = RETURN_VALUE.OK;
! 			ReturnValue = RETURN_VALUE.YES;
  		}
  		else if(e.getSource() == jButtonCancel) {
  			ReturnValue = RETURN_VALUE.CANCEL;
--- 205,211 ----
  	 */
  	public void actionPerformed(ActionEvent e) {
  		if(e.getSource() == jButtonOK) {
! 			ReturnValue = RETURN_VALUE.OK;
  		}
  		else if(e.getSource() == jButtonCancel) {
  			ReturnValue = RETURN_VALUE.CANCEL;
***************
*** 285,318 ****
  		return null;
  	}
  
- 	@Override
- 	public Integer getPrintSelect() {
- 		// TODO 自動生成されたメソッド・スタブ
- 		return null;
- 	}
- 
- 	@Override
- 	public String getFilePath() {
- 		// TODO 自動生成されたメソッド・スタブ
- 		return null;
- 	}
- 
- 	@Override
- 	public void setDialogTitle(String title) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void setDialogSelect(boolean enabled) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void setSaveFileName(String title) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
  }  //  @jve:decl-index=0:visual-constraint="10,10"
--- 281,284 ----
Only in ./common-component/src/jp/or/med/orca/jma_tokutei/common/component: PageSelectDialog.java
Only in ./common-component/src/jp/or/med/orca/jma_tokutei/common/component: SettingDialog.java
Only in ./common-component/src/jp/or/med/orca/jma_tokutei/common/component: ShowDirectoryDialog.java
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/csv/JCSVWriterStream.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/csv/JCSVWriterStream.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/csv/JCSVWriterStream.java	Wed Apr 21 09:46:08 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/csv/JCSVWriterStream.java	Tue Aug 11 17:55:30 2009
***************
*** 1,13 ****
  package jp.or.med.orca.jma_tokutei.common.csv;
  
  import java.io  .*;
- import java.text.DateFormat;
- import java.text.SimpleDateFormat;
  import java.util.*;
  
- import jp.or.med.orca.jma_tokutei.common.app.JPath;
- import jp.or.med.orca.jma_tokutei.common.filectrl.JFile;
- 
  // ----------------------------------------------------------------------------
  /**
  	class::name	JCSVWriterStream
--- 1,8 ----
***************
*** 17,23 ****
  // ----------------------------------------------------------------------------
  public class JCSVWriterStream extends JCSVWriter
  {
- 	private final static String SEPARATOR = System.getProperty("file.separator");
  	/*
  	 *  コンストラクタ
  	 *
--- 12,17 ----
***************
*** 29,50 ****
  	{
  	}
  
- 	public void saveCSV( String path ) throws IOException
- 	{
- 		saveCSV(path,"UTF-8");
- 	}
  	/*
  	 *  ＣＳＶを保存
  	 *		@param  ファイルパス
  	 *		@return none
  	 */
! 	public void saveCSV( String path ,String charSet) throws IOException
  	{
  		BufferedWriter writer = null;
  
  		try
  		{
! 			writer = new BufferedWriter( new OutputStreamWriter( new FileOutputStream( path ), charSet ) );
  
  			for( int i=0; i<m_vectTable.size(); ++i )
  			{
--- 23,42 ----
  	{
  	}
  
  	/*
  	 *  ＣＳＶを保存
+ 	 *
  	 *		@param  ファイルパス
+ 	 *
  	 *		@return none
  	 */
! 	public void saveCSV( String path ) throws IOException
  	{
  		BufferedWriter writer = null;
  
  		try
  		{
! 			writer = new BufferedWriter( new OutputStreamWriter( new FileOutputStream( path ), "UTF-8" ) );
  
  			for( int i=0; i<m_vectTable.size(); ++i )
  			{
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/errormessage/JErrorMessageDialogFrame.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/errormessage/JErrorMessageDialogFrame.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/errormessage/JErrorMessageDialogFrame.java	Thu May  6 10:45:08 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/errormessage/JErrorMessageDialogFrame.java	Tue Aug 11 17:55:30 2009
***************
*** 10,16 ****
  import java.awt.Color;
  import javax.swing.JTextArea;
  import java.awt.event.*;
- 
  import javax.swing.JDialog;
  import javax.swing.JScrollBar;
  import javax.swing.JScrollPane;
--- 10,15 ----
***************
*** 21,27 ****
  import java.awt.Dimension;
  
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedButton;
- import jp.or.med.orca.jma_tokutei.common.component.ExtendedTextArea;
  import jp.or.med.orca.jma_tokutei.common.component.TitleLabel;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  import java.awt.GridBagLayout;
--- 20,25 ----
***************
*** 33,39 ****
  /**
   * エラーメッセージダイアログクラス
   */
! public class JErrorMessageDialogFrame extends JDialog implements ActionListener,KeyListener,MouseListener {
  
  	private static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
--- 31,37 ----
  /**
   * エラーメッセージダイアログクラス
   */
! public class JErrorMessageDialogFrame extends JDialog implements ActionListener {
  
  	private static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
***************
*** 42,48 ****
  	protected JPanel jPanel_NaviArea = null;
  	protected TitleLabel jLabel_Title = null;
  	protected JPanel jPanel_TitleArea = null;
! 	protected ExtendedTextArea jTextArea_ErrorMessage = null;
  	protected JPanel jPanel = null;
  	protected ExtendedButton jButton_Yes = null;
  	protected ExtendedButton jButton_No = null;
--- 40,46 ----
  	protected JPanel jPanel_NaviArea = null;
  	protected TitleLabel jLabel_Title = null;
  	protected JPanel jPanel_TitleArea = null;
! 	protected JTextArea jTextArea_ErrorMessage = null;
  	protected JPanel jPanel = null;
  	protected ExtendedButton jButton_Yes = null;
  	protected ExtendedButton jButton_No = null;
***************
*** 123,129 ****
  			scrollpane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);
  			scrollpane.setName("scrollpane");
  			scrollpane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
! 			scrollpane.addKeyListener(this);
  			GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
  			gridBagConstraints2.fill = GridBagConstraints.BOTH;
  			gridBagConstraints2.gridx = 0;
--- 121,127 ----
  			scrollpane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);
  			scrollpane.setName("scrollpane");
  			scrollpane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
! 
  			GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
  			gridBagConstraints2.fill = GridBagConstraints.BOTH;
  			gridBagConstraints2.gridx = 0;
***************
*** 185,194 ****
  			jButton_OK = new ExtendedButton();
  			jButton_OK.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_OK.setActionCommand("終了");
! 			jButton_OK.setText("OK(Y)");
  			jButton_OK.addActionListener(this);
- 			jButton_OK.addKeyListener(this);
- 			jButton_OK.setMnemonic(KeyEvent.VK_Y);
  		}
  		return jButton_OK;
  	}
--- 183,190 ----
  			jButton_OK = new ExtendedButton();
  			jButton_OK.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_OK.setActionCommand("終了");
! 			jButton_OK.setText("OK");
  			jButton_OK.addActionListener(this);
  		}
  		return jButton_OK;
  	}
***************
*** 238,261 ****
  	 *
  	 * @return javax.swing.JTextArea
  	 */
! 	private ExtendedTextArea getJTextArea_ErrorMessage() {
  		if (jTextArea_ErrorMessage == null) {
! 			jTextArea_ErrorMessage = new ExtendedTextArea();
  			jTextArea_ErrorMessage.setRows(3);
  			jTextArea_ErrorMessage.setLineWrap(true);
! 			// dell s.inoue 2009/12/07
! 			 jTextArea_ErrorMessage.setEnabled(false);
  			jTextArea_ErrorMessage.setName("jTextArea_ErrorMessage");
  			jTextArea_ErrorMessage.setText("");
  			jTextArea_ErrorMessage.setDisabledTextColor(Color.black);
! 			// edit s.inoue 2009/12/07
! 			// jTextArea_ErrorMessage.setEditable(false);
! 			jTextArea_ErrorMessage.setFocusable(false);
! 			// add s.inoue 2009/12/07
! 			jTextArea_ErrorMessage.addMouseListener(this); // マウスリスナを登録
! 			// edit s.inoue 2009/12/15
! 			jTextArea_ErrorMessage.addKeyListener(this);
! 
  		}
  		return jTextArea_ErrorMessage;
  	}
--- 234,249 ----
  	 *
  	 * @return javax.swing.JTextArea
  	 */
! 	private JTextArea getJTextArea_ErrorMessage() {
  		if (jTextArea_ErrorMessage == null) {
! 			jTextArea_ErrorMessage = new JTextArea();
  			jTextArea_ErrorMessage.setRows(3);
  			jTextArea_ErrorMessage.setLineWrap(true);
! 			jTextArea_ErrorMessage.setEnabled(false);
  			jTextArea_ErrorMessage.setName("jTextArea_ErrorMessage");
  			jTextArea_ErrorMessage.setText("");
  			jTextArea_ErrorMessage.setDisabledTextColor(Color.black);
! 			jTextArea_ErrorMessage.setEditable(false);
  		}
  		return jTextArea_ErrorMessage;
  	}
***************
*** 292,301 ****
  	private ExtendedButton getJButton_Yes() {
  		if (jButton_Yes == null) {
  			jButton_Yes = new ExtendedButton();
! 			jButton_Yes.setText("はい(Y)");
  			jButton_Yes.addActionListener(this);
- 			jButton_Yes.addKeyListener(this);
- 			jButton_Yes.setMnemonic(KeyEvent.VK_Y);
  		}
  		return jButton_Yes;
  	}
--- 280,287 ----
  	private ExtendedButton getJButton_Yes() {
  		if (jButton_Yes == null) {
  			jButton_Yes = new ExtendedButton();
! 			jButton_Yes.setText("はい");
  			jButton_Yes.addActionListener(this);
  		}
  		return jButton_Yes;
  	}
***************
*** 308,317 ****
  	private ExtendedButton getJButton_No() {
  		if (jButton_No == null) {
  			jButton_No = new ExtendedButton();
! 			jButton_No.setText("いいえ[N]");
  			jButton_No.addActionListener(this);
- 			jButton_No.addKeyListener(this);
- 			jButton_No.setMnemonic(KeyEvent.VK_N);
  		}
  		return jButton_No;
  	}
--- 294,301 ----
  	private ExtendedButton getJButton_No() {
  		if (jButton_No == null) {
  			jButton_No = new ExtendedButton();
! 			jButton_No.setText("いいえ");
  			jButton_No.addActionListener(this);
  		}
  		return jButton_No;
  	}
***************
*** 324,333 ****
  	private ExtendedButton getJButton_Cancel() {
  		if (jButton_Cancel == null) {
  			jButton_Cancel = new ExtendedButton();
! 			jButton_Cancel.setText("キャンセル[C]");
  			jButton_Cancel.addActionListener(this);
- 			jButton_Cancel.addKeyListener(this);
- 			jButton_Cancel.setMnemonic(KeyEvent.VK_C);
  		}
  		return jButton_Cancel;
  	}
--- 308,315 ----
  	private ExtendedButton getJButton_Cancel() {
  		if (jButton_Cancel == null) {
  			jButton_Cancel = new ExtendedButton();
! 			jButton_Cancel.setText("キャンセル");
  			jButton_Cancel.addActionListener(this);
  		}
  		return jButton_Cancel;
  	}
***************
*** 340,400 ****
  	private ExtendedButton getJButton_ALL() {
  		if (jButton_ALL == null) {
  			jButton_ALL = new ExtendedButton();
! 			jButton_ALL.setText("全て上書き[A]");
  			jButton_ALL.addActionListener(this);
- 			jButton_ALL.addKeyListener(this);
- 			jButton_ALL.setMnemonic(KeyEvent.VK_A);
  		}
  		return jButton_ALL;
  	}
- 
- 	@Override
- 	public void keyPressed(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyReleased(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyTyped(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void mouseClicked(MouseEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void mouseEntered(MouseEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void mouseExited(MouseEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void mousePressed(MouseEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void mouseReleased(MouseEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
  }
  
  //Source Code Version Tag System v1.00  -- Do not remove --
--- 322,332 ----
  	private ExtendedButton getJButton_ALL() {
  		if (jButton_ALL == null) {
  			jButton_ALL = new ExtendedButton();
! 			jButton_ALL.setText("全て上書き");
  			jButton_ALL.addActionListener(this);
  		}
  		return jButton_ALL;
  	}
  }
  
  //Source Code Version Tag System v1.00  -- Do not remove --
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/errormessage/JErrorMessageDialogFrameCtrl.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/errormessage/JErrorMessageDialogFrameCtrl.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/errormessage/JErrorMessageDialogFrameCtrl.java	Thu May  6 10:45:08 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/errormessage/JErrorMessageDialogFrameCtrl.java	Wed Feb 24 17:44:44 2010
***************
*** 1,14 ****
  package jp.or.med.orca.jma_tokutei.common.errormessage;
  
- import java.awt.Component;
  import java.awt.event.*;
- 
- import javax.swing.JComponent;
  import javax.swing.JFrame;
  import javax.swing.JTextArea;
  
- import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
- 
  public class JErrorMessageDialogFrameCtrl extends JErrorMessageDialogFrame {
  	/**
  	 * エラーダイアログを表示する
--- 1,9 ----
***************
*** 20,26 ****
  	 * @param ID メッセージID
  	 */
  	private static String LINE_SEPARATOR = System.getProperty("line.separator");
! 	private JFocusTraversalPolicy focusTraversalPolicy = null;
  	public JErrorMessageDialogFrameCtrl(
  			JFrame ParentFrame,
  			String ErrorTitle,
--- 15,21 ----
  	 * @param ID メッセージID
  	 */
  	private static String LINE_SEPARATOR = System.getProperty("line.separator");
! 
  	public JErrorMessageDialogFrameCtrl(
  			JFrame ParentFrame,
  			String ErrorTitle,
***************
*** 61,70 ****
  			jButton_Cancel.setVisible(false);
  			jButton_ALL.setVisible(false);
  
! 			// del s.inoue 2009/12/21
! 			// if (defaultButton == 0) {
! 			// 	jButton_OK.setSelected(true);
! 			// }
  			break;
  		case 1:
  			// はい、いいえボタン
--- 56,64 ----
  			jButton_Cancel.setVisible(false);
  			jButton_ALL.setVisible(false);
  
! 			if (defaultButton == 0) {
! 				jButton_OK.setSelected(true);
! 			}
  			break;
  		case 1:
  			// はい、いいえボタン
***************
*** 76,83 ****
  
  			if (defaultButton == 0) {
  				jButton_Yes.setVisible(true);
- 				// del s.inoue 2009/12/21
- 				// jButton_Yes.setSelected(true);
  			}
  			if (defaultButton == 1) {
  				jButton_No.setVisible(true);
--- 70,75 ----
***************
*** 94,101 ****
  
  			if (defaultButton == 0) {
  				jButton_Yes.setVisible(true);
- 				// del s.inoue 2009/12/21
- 				// jButton_Yes.setSelected(true);
  			}
  			if (defaultButton == 1) {
  				jButton_No.setVisible(true);
--- 86,91 ----
***************
*** 116,123 ****
  
  			if (defaultButton == 0) {
  				jButton_Yes.setVisible(true);
- 				// del s.inoue 2009/12/21
- 				// jButton_Yes.setSelected(true);
  			}
  			if (defaultButton == 1) {
  				jButton_No.setVisible(true);
--- 106,111 ----
***************
*** 133,143 ****
  			jButton_OK.setVisible(false);
  			jButton_Yes.setVisible(true);
  			jButton_No.setVisible(true);
! 			// edit s.inoue 2010/04/21
! 			jButton_Yes.setText("追加(A)");
! 			jButton_Yes.setMnemonic(KeyEvent.VK_A);
! 			jButton_No.setText("更新(E)");
! 			jButton_No.setMnemonic(KeyEvent.VK_E);
  
  			jButton_Cancel.setVisible(true);
  			jButton_ALL.setVisible(false);
--- 121,129 ----
  			jButton_OK.setVisible(false);
  			jButton_Yes.setVisible(true);
  			jButton_No.setVisible(true);
! 			// edit s.inoue 2010/02/09
! 			jButton_Yes.setText("追加");
! 			jButton_No.setText("更新");
  
  			jButton_Cancel.setVisible(true);
  			jButton_ALL.setVisible(false);
***************
*** 209,218 ****
  
  	public void actionPerformed(ActionEvent e) {
  		Object source = e.getSource();
! 		// edit s.inoue 2009/12/06
! //		if (source == jButton_OK) {
! //			ReturnValue = RETURN_VALUE.OK;
! 		if (source == jButton_Yes || source == jButton_OK) {
  			ReturnValue = RETURN_VALUE.YES;
  		} else if (source == jButton_No) {
  			ReturnValue = RETURN_VALUE.NO;
--- 195,203 ----
  
  	public void actionPerformed(ActionEvent e) {
  		Object source = e.getSource();
! 		if (source == jButton_OK) {
! 			ReturnValue = RETURN_VALUE.OK;
! 		} else if (source == jButton_Yes) {
  			ReturnValue = RETURN_VALUE.YES;
  		} else if (source == jButton_No) {
  			ReturnValue = RETURN_VALUE.NO;
***************
*** 225,282 ****
  		// モーダルダイアログの制御解除。
  		setVisible(false);
  	}
- 	// add s.inoue 2009/12/01
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 		switch(keyEvent.getKeyCode()){
- //		case KeyEvent.VK_Y:
- //			ReturnValue = RETURN_VALUE.OK;break;
- 		// edit s.inoue 2009/12/15
- 
- 		case KeyEvent.VK_ENTER:
- 			if(jButton_ALL.isFocusOwner()){
- 				ReturnValue = RETURN_VALUE.ALL;setVisible(false);break;
- 			}else if(jButton_Cancel.isFocusOwner()){
- 				ReturnValue = RETURN_VALUE.CANCEL;setVisible(false);break;
- 			}else if(jButton_No.isFocusOwner()){
- 				ReturnValue = RETURN_VALUE.NO;setVisible(false);break;
- 			}else if(jButton_Yes.isFocusOwner() ||
- 					jButton_OK.isFocusOwner()){
- 				ReturnValue = RETURN_VALUE.YES;setVisible(false);break;
- 			}
- 			// edit s.inoue 2010/04/21
- //		case KeyEvent.VK_Y:
- //			ReturnValue = RETURN_VALUE.YES;break;
- //		case KeyEvent.VK_N:
- //			ReturnValue = RETURN_VALUE.NO;break;
- //		case KeyEvent.VK_C:
- //			ReturnValue = RETURN_VALUE.CANCEL;break;
- //		case KeyEvent.VK_A:
- //			ReturnValue = RETURN_VALUE.ALL;break;
- 		}
- 		// モーダルダイアログの制御解除。
- 		// setVisible(false);
- 	}
- 	// add s.inoue 2009/12/07
- 	// マウスリスナのメソッドを定義
- 	@Override
- 	public void mousePressed(MouseEvent e) {
- 		mousePopup(e);
- 	}
- 	@Override
- 	public void mouseReleased(MouseEvent e) {
- 		mousePopup(e);
- 	}
- 
- 	// add s.inoue 2009/11/11
- 	private void mousePopup(MouseEvent e) {
- 		if (e.isPopupTrigger()) {
- 			// ポップアップメニューを表示する
- 			JComponent c = (JComponent)e.getSource();
- 			jTextArea_ErrorMessage.showPopup(c, e.getX(), e.getY());
- 			e.consume();
- 		}
- 	}
  
  }
  
--- 210,215 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/event/JSingleDoubleClickEvent.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/event/JSingleDoubleClickEvent.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/event/JSingleDoubleClickEvent.java	Wed Apr 21 09:46:08 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/event/JSingleDoubleClickEvent.java	Wed Feb 24 17:44:44 2010
***************
*** 39,66 ****
  				return;
  			int i = fixedtable.getSelectedRow();
  
! 			// add s.inoue 2010/02/19
! 			int j = fixedtable.getSelectedColumn();
! 
! 			if((fixedtable.getValueAt(i, 0) == null)){
  				if (i==0){
  		    		 fixedtable.setValueAt(Boolean.TRUE, i, 0);
  				}
  				return;
  			}
- 			// edit s.inoue 2010/02/19
- 			// 0列対応
- 			boolean checkVal = false;
- 			if (j == 0)
- 				checkVal = !checkVal;
- 
- 			if (fixedtable.getValueAt(i, 0).equals(Boolean.TRUE)){
- 				fixedtable.setValueAt(checkVal, i, 0);
- 			}else{
- 				fixedtable.setValueAt(!checkVal, i, 0);
- 			}
  
! 		// double
  		}else if(e.getClickCount() == 2){
  			if (ActionFrame == null || TargetComponent == null)
  				return;
--- 39,58 ----
  				return;
  			int i = fixedtable.getSelectedRow();
  
! 			if(fixedtable.getValueAt(i, 0) == null){
  				if (i==0){
  		    		 fixedtable.setValueAt(Boolean.TRUE, i, 0);
  				}
  				return;
  			}
  
! 			 System.out.println("smp " + fixedtable.getValueAt(i, 0));
! //	     if (fixedtable.getValueAt(i, 0).equals(Boolean.TRUE)){
! //	    	 fixedtable.setValueAt(Boolean.FALSE, i, 0);
! //	     }else{
! //	    	 fixedtable.setValueAt(Boolean.TRUE, i, 0);
! //	     }
! 	    // double
  		}else if(e.getClickCount() == 2){
  			if (ActionFrame == null || TargetComponent == null)
  				return;
Only in ./common-component/src/jp/or/med/orca/jma_tokutei/common/filectrl: DirectoryChooser.java
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/frame/JAddKikanInformationFrame.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/frame/JAddKikanInformationFrame.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/frame/JAddKikanInformationFrame.java	Thu May  6 10:45:08 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/frame/JAddKikanInformationFrame.java	Fri Oct 16 09:50:46 2009
***************
*** 12,22 ****
  import java.awt.Color;
  import java.awt.event.ActionEvent;
  import java.awt.event.ActionListener;
- import java.awt.event.FocusEvent;
- import java.awt.event.FocusListener;
  import java.awt.event.ItemEvent;
  import java.awt.event.ItemListener;
- import java.awt.event.KeyListener;
  
  
  import java.awt.Cursor;
--- 12,19 ----
***************
*** 41,47 ****
   * 機関情報追加画面
   */
  public class JAddKikanInformationFrame extends JFrame
! 	implements ActionListener, ItemListener, KeyListener ,FocusListener{
  
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
--- 38,44 ----
   * 機関情報追加画面
   */
  public class JAddKikanInformationFrame extends JFrame
! 	implements ActionListener, ItemListener {
  
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
***************
*** 253,259 ****
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
--- 250,256 ----
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
***************
*** 379,385 ****
  	private ExtendedButton getJButton_Register() {
  		if (jButton_Register == null) {
  			jButton_Register = new ExtendedButton();
! 			jButton_Register.setText("登録(F12)");
  //			jButton_Register.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Register.addActionListener(this);
  		}
--- 376,382 ----
  	private ExtendedButton getJButton_Register() {
  		if (jButton_Register == null) {
  			jButton_Register = new ExtendedButton();
! 			jButton_Register.setText("登録");
  //			jButton_Register.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Register.addActionListener(this);
  		}
***************
*** 1026,1032 ****
  		if (jTextField_zip == null) {
  			jTextField_zip = new ExtendedTextField("", 7, ImeMode.IME_OFF);
  			jTextField_zip.setPreferredSize(new Dimension(150, 20));
- 			jTextField_zip.addFocusListener(this);
  		}
  		return jTextField_zip;
  	}
--- 1023,1028 ----
***************
*** 1282,1290 ****
  	private ExtendedButton getJButton_ConnectionTest() {
  		if (jButton_ConnectionTest == null) {
  			jButton_ConnectionTest = new ExtendedButton();
! 			jButton_ConnectionTest.setText("接続テスト(C)");
  			jButton_ConnectionTest.addActionListener(this);
- 			jButton_ConnectionTest.setMnemonic(KeyEvent.VK_C);
  		}
  		return jButton_ConnectionTest;
  	}
--- 1278,1285 ----
  	private ExtendedButton getJButton_ConnectionTest() {
  		if (jButton_ConnectionTest == null) {
  			jButton_ConnectionTest = new ExtendedButton();
! 			jButton_ConnectionTest.setText("接続テスト");
  			jButton_ConnectionTest.addActionListener(this);
  		}
  		return jButton_ConnectionTest;
  	}
***************
*** 1387,1420 ****
  		}
  		return jTextField_orcaIdDigit;
  	}
- 
- 	@Override
- 	public void keyPressed(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyReleased(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyTyped(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void focusGained(FocusEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void focusLost(FocusEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
  }
--- 1382,1385 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/frame/JAddKikanInformationFrameCtrl.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/frame/JAddKikanInformationFrameCtrl.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/frame/JAddKikanInformationFrameCtrl.java	Wed Apr 21 09:46:08 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/frame/JAddKikanInformationFrameCtrl.java	Fri Oct 30 14:34:44 2009
***************
*** 4,13 ****
  import javax.swing.JComponent;
  import javax.swing.JTextField;
  
- import org.apache.log4j.Logger;
- 
  import java.awt.Color;
- import java.awt.Component;
  import java.awt.event.*;
  import java.io.*;
  import java.sql.SQLException;
--- 4,10 ----
***************
*** 33,39 ****
  	protected JConnection systemDatabase = null;
  	/* フォーカス移動制御 */
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
- 	private static Logger logger = Logger.getLogger(JAddKikanInformationFrameCtrl.class);
  
  	/* 必須項目のコンポーネント */
  	private JComponent[] requiredComponents = new JComponent[]{
--- 30,35 ----
***************
*** 168,179 ****
  		this.focusTraversalPolicy.addComponent(jButton_Register);
  		this.focusTraversalPolicy.addComponent(jButton_End);
  
- 		// add s.inoue 2009/12/03
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			Component comp = focusTraversalPolicy.getComponent(i);
- 			comp.addKeyListener(this);
- 		}
- 
  		Color requiedItemColor = ViewSettings.getRequiedItemBgColor();
  		jLabel_requiredExample.setBackground(requiedItemColor);
  
--- 164,169 ----
***************
*** 229,235 ****
  	 * 終了ボタン
  	 */
  	public void pushedEndButton(ActionEvent e) {
- 		logger.info(jButton_End.getText());
  		dispose();
  	}
  
--- 219,224 ----
***************
*** 552,614 ****
  		}
  	}
  
- 	@Override
- 	public void focusLost(FocusEvent event) {
- 		Object source = event.getSource();
- 
- 		// add s.inoue 2010/03/29
- 		if(source.equals(this.jTextField_zip)){
- 			if (jTextField_zip.getText().equals(""))
- 				return;
- 
- 			String zipText = setZipCodeAddress(this.jTextField_zip.getText());
- 			if (zipText.equals(""))
- 				return;
- 
- 			jTextField_address.setText(zipText);
- 		}
- 	}
- 
- 	// add s.inoue 2010/04/02
- 	private String setZipCodeAddress(String zipCode){
- 
- 		ArrayList<Hashtable<String, String>> result = new ArrayList<Hashtable<String, String>>();
- 		Hashtable<String, String> resultItem = new Hashtable<String, String>();
- 
- 		StringBuilder sb = new StringBuilder();
- 		sb.append(" SELECT SUB_POST.POSTCD,ADDRESS FROM T_POST,");
- 		sb.append(" (SELECT SUBSTRING(POST_CD FROM 1 FOR 3) || SUBSTRING(POST_CD FROM 5 FOR 4) POSTCD,");
- 		sb.append(" POST_CD SP_POSTCD FROM T_POST) SUB_POST");
- 		sb.append(" where SUB_POST.POSTCD = ");
- 		sb.append(JQueryConvert.queryConvert(zipCode));
- 		sb.append(" and SUB_POST.SP_POSTCD = T_POST.POST_CD ");
- 
- 		try {
- 			result = JApplication.systemDatabase.sendExecuteQuery(sb.toString());
- 		} catch (SQLException e) {
- 			logger.error(e.getMessage());
- 			e.printStackTrace();
- 		}
- 
- 		if (result.size() <= 0)
- 			return "";
- 
- 		resultItem = result.get(0);
- 		return resultItem.get("ADDRESS");
- 
- 	}
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 		switch(keyEvent.getKeyCode()){
- 		case KeyEvent.VK_F1:
- 			logger.info(jButton_End.getText());
- 			pushedEndButton(null);break;
- 		case KeyEvent.VK_F12:
- 			logger.info(jButton_Register.getText());
- 			pushedRegisterButton(null);break;
- 		}
- 	}
- 
  	private void pushedConnectionTestButton() {
  
  		validatedData.initialize();
--- 541,546 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/frame/JSelectCommentInputDialog.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/frame/JSelectCommentInputDialog.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/frame/JSelectCommentInputDialog.java	Mon Nov 16 09:58:16 2009
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/frame/JSelectCommentInputDialog.java	Fri Oct 30 14:34:44 2009
***************
*** 85,91 ****
  		this.setFocusTraversalPolicy(this.focusTraversalPolicy);
  
  		this.focusTraversalPolicy.setDefaultComponent(this.jListComment);
- 		this.focusTraversalPolicy.addComponent(this.jListComment);
  		this.focusTraversalPolicy.addComponent(this.jButtonOK);
  		this.focusTraversalPolicy.addComponent(this.jButtonCancel);
  
--- 85,90 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/frame/ViewSettings.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/frame/ViewSettings.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/frame/ViewSettings.java	Thu Sep 24 10:11:12 2009
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/frame/ViewSettings.java	Wed Feb 24 17:44:44 2010
***************
*** 175,180 ****
--- 175,191 ----
  		return color;
  	}
  
+ 	// add s.inoue 2010/01/30
+ 	/**
+ 	 * デフォルト項目の背景色を取得する。
+ 	 * @return Color
+ 	 */
+ 	public static Color getDefaultItemBgColor() {
+ 		Color color = getUsingValueColor("common.frame.default.bgcolor");
+ 
+ 		return color;
+ 	}
+ 
  	/**
  	 * String 型の設定値を取得する。
       */
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/frame/ViewSettingsDefault.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/frame/ViewSettingsDefault.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/frame/ViewSettingsDefault.java	Mon Dec 21 13:29:12 2009
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/frame/ViewSettingsDefault.java	Fri Oct  9 17:05:02 2009
***************
*** 52,59 ****
  		getMap().put(KEY_TOKUTEI_APPLICATION_NAME, "日医特定健康診査システム");
  		getMap().put(KEY_TOKUTEI_FRAME_TITLE_TEXT, "日医特定健康診査システム");
  
- 		// add s.inoue 2009/12/21
- 		getMap().put(KEY_TOKUTEI_SYOKEN_DIALOG_TITLE, "所見選択");
  		/* スプラッシュ画面 */
  		getMap().put(KEY_TOKUTEI_SPLASH_DISPLAY_TIME,"3500");
  
--- 52,57 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/frame/ViewSettingsKey.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/frame/ViewSettingsKey.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/frame/ViewSettingsKey.java	Wed Apr 21 09:46:08 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/frame/ViewSettingsKey.java	Fri Oct 16 09:50:46 2009
***************
*** 19,24 ****
--- 19,25 ----
  
  	/* 機関情報メンテナンス */
  	String KEY_TOKUTEI_KIKAN_MASTERMAINTENANCE_FRAME_TITLE = "tokutei.kikaninformation.frame.title";
+ 	// edit s.inoue 2009/10/15
  	String KEY_TOKUTEI_KIKAN_MASTERMAINTENANCE_ADD_FRAME_TITLE = "tokutei.kikaninformation-add.frame.title";
  	String KEY_TOKUTEI_KIKAN_MASTERMAINTENANCE_EDIT_FRAME_TITLE = "tokutei.kikaninformation-edit.frame.title";
  
***************
*** 28,40 ****
  
  	String KEY_TOKUTEI_SYSTEMMAINTENANCE_MENU_FRAME_TITLE = "tokutei.systemmaintenance-menu.frame.title";
  	String KEY_TOKUTEI_MASTERMAINTENANCE_MENU_FRAME_TITLE = "tokutei.mastermaintenance-menu.frame.title";
  	String KEY_TOKUTEI_NAYOSE_MASTERMAINTENANCE_FRAME_TITLE = "tokutei.nayose-code-mastermaintenance.frame.title";
  	String KEY_TOKUTEI_NAYOSE_MASTERMAINTENANCE_EDIT_FRAME_TITLE = "tokutei.nayose-code-mastermaintenance-edit.frame.title";
  
- 	/* 定型文 */
- 	String KEY_TOKUTEI_TEIKEI_MASTERMAINTENANCE_FRAME_TITLE = "tokutei.teikei-mastermaintenance.frame.title";
- 	String KEY_TOKUTEI_TEIKEI_MASTERMAINTENANCE_EDIT_FRAME_TITLE = "tokutei.teikei-mastermaintenance-edit.frame.title";
- 
  	/* 健診ソフト */
  	String KEY_TOKUTEI_SHOWRESULT_FRAME_PROGRESS_GUIDANCE_PRINT1 = "tokutei.showresult.frame.progress.guidance.print1";
  	String KEY_TOKUTEI_SHOWRESULT_FRAME_TITLE = "tokutei.showresult.frame.title";
--- 29,38 ----
  
  	String KEY_TOKUTEI_SYSTEMMAINTENANCE_MENU_FRAME_TITLE = "tokutei.systemmaintenance-menu.frame.title";
  	String KEY_TOKUTEI_MASTERMAINTENANCE_MENU_FRAME_TITLE = "tokutei.mastermaintenance-menu.frame.title";
+ 	// edit ver2 s.inoue 2009/06/23
  	String KEY_TOKUTEI_NAYOSE_MASTERMAINTENANCE_FRAME_TITLE = "tokutei.nayose-code-mastermaintenance.frame.title";
  	String KEY_TOKUTEI_NAYOSE_MASTERMAINTENANCE_EDIT_FRAME_TITLE = "tokutei.nayose-code-mastermaintenance-edit.frame.title";
  
  	/* 健診ソフト */
  	String KEY_TOKUTEI_SHOWRESULT_FRAME_PROGRESS_GUIDANCE_PRINT1 = "tokutei.showresult.frame.progress.guidance.print1";
  	String KEY_TOKUTEI_SHOWRESULT_FRAME_TITLE = "tokutei.showresult.frame.title";
***************
*** 48,54 ****
  	String KEY_TOKUTEI_NITIJI_FRAME_GUIDANCE_MAIN = "tokutei.nitiji.frame.guidance.main";
  	String KEY_TOKUTEI_GETUJI_FRAME_TITLE = "tokutei.getuji.frame.title";
  	String KEY_TOKUTEI_GETUJI_FRAME_GUIDANCE_MAIN = "tokutei.getuji.frame.guidance.main";
! 	String KEY_TOKUTEI_SYOKEN_DIALOG_TITLE = "tokutei.shoken.dialog.title";
  	String KEY_TOKUTEI_INPUTKESSAI_FRAME_TITLE = "tokutei.inputkessai.frame.title";
  	String KEY_TOKUTEI_IRAISHO_FRAME_TITLE = "tokutei.iraisho.frame.title";
  	String KEY_TOKUTEI_IRAISHO_FRAME_GUIDANCE_MAIN = "tokutei.iraisho.frame.guidance.main";
--- 46,52 ----
  	String KEY_TOKUTEI_NITIJI_FRAME_GUIDANCE_MAIN = "tokutei.nitiji.frame.guidance.main";
  	String KEY_TOKUTEI_GETUJI_FRAME_TITLE = "tokutei.getuji.frame.title";
  	String KEY_TOKUTEI_GETUJI_FRAME_GUIDANCE_MAIN = "tokutei.getuji.frame.guidance.main";
! 
  	String KEY_TOKUTEI_INPUTKESSAI_FRAME_TITLE = "tokutei.inputkessai.frame.title";
  	String KEY_TOKUTEI_IRAISHO_FRAME_TITLE = "tokutei.iraisho.frame.title";
  	String KEY_TOKUTEI_IRAISHO_FRAME_GUIDANCE_MAIN = "tokutei.iraisho.frame.guidance.main";
***************
*** 66,73 ****
  	String KEY_TOKUTEI_SPLASH_DISPLAY_TIME = "tokutei.splash.display-time";
  	String KEY_TOKUTEI_FRAME_TITLE_TEXT = "tokutei.frame.title.text";
  	String KEY_TOKUTEI_APPLICATION_NAME = "tokutei.application.name";
- 	String KEY_TOKUTEI_APPLICATION_ENVIRO_TITLE = "tokutei.frame.enviroment.title";
- 
  	/* 管理ソフト */
  	String KEY_ADMIN_LOGIN_FRAME_HEIGHT = "admin.login.frame.height";
  	String KEY_ADMIN_LOGIN_FRAME_WIDTH = "admin.login.frame.width";
--- 64,69 ----
***************
*** 79,85 ****
  	/* 共通ソフト */
  	String KEY_COMMON_FRAME_PROGRESS_GUIDANCE_MAIN = "common.frame.progress.guidance.main";
  	String KEY_COMMON_FRAME_PROGRESS_TITLE = "common.frame.progress.title";
- 
  	// add h.yoshitama 2009/09/18
  	String KEY_COMMON_FRAME_ABLEITEM_BGCOLOR = "common.frame.ableitem.bgcolor";
  	String KEY_COMMON_FRAME_DISABLEITEM_BGCOLOR = "common.frame.disableitem.bgcolor";
--- 75,80 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/CheckupClaimWriter.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/CheckupClaimWriter.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/CheckupClaimWriter.java	Wed Apr 21 09:46:08 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/CheckupClaimWriter.java	Tue Aug 11 17:55:30 2009
***************
*** 31,79 ****
  		}
  		DOMImplementation impl;
  		Transformer transformer;
! 
  		// 初期化処理
  		try
  		{
  			DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
              DocumentBuilder builder = factory.newDocumentBuilder();
! 
  			impl = builder.getDOMImplementation();
  		}
  		catch(Exception e)
  		{
  			throw new RuntimeException();
  		}
! 
  		// XML作成
  		Document document = impl.createDocument("http://tokuteikenshin.jp/checkup/2007","checkupClaim",null);
  		Element root = document.getDocumentElement();
  		root.setAttribute("xmlns:xsi", "http://www.w3.org/2001/XMLSchema-instance");
! 
! 		// edit s.inoue 2009/12/09
! 		// edit s.inoue 2009/12/09 XSD相対パス回避
! 		// root.setAttribute("xsi:schemaLocation", "http://tokuteikenshin.jp/checkup/2007 ../XSD/cc08_V08.xsd");
! 		root.setAttribute("xsi:schemaLocation", "http://tokuteikenshin.jp/checkup/2007 ./XSD/cc08_V08.xsd");
! 
! 		// add s.inoue 2010/01/18
! 		root.appendChild(document.createComment("受診情報"));
  		// 要素の追加
  		Element element_encounter = document.createElement("encounter");
  		Element element_service = document.createElement("serviceEventType");
- 
- 		// add s.inoue 2010/01/18
- 		element_encounter.appendChild(document.createComment("実施区分"));
  		element_service.setAttribute("code", ServiceEventType);
  		element_encounter.appendChild(element_service);
  		root.appendChild(element_encounter);
! 
! 		root.appendChild(document.createComment("受診者情報"));
  		root.appendChild(subjectPerson.GetElement(document));
- 		root.appendChild(document.createComment("受診情報"));
  		root.appendChild(chckupCard.GetElement(document));
- 		root.appendChild(document.createComment("決済情報"));
  		root.appendChild(settlement.GetElement(document));
! 
  		// XML出力
  		TransformerFactory transFactory = TransformerFactory.newInstance();
  		try
--- 31,72 ----
  		}
  		DOMImplementation impl;
  		Transformer transformer;
! 		
  		// 初期化処理
  		try
  		{
  			DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
              DocumentBuilder builder = factory.newDocumentBuilder();
!             
  			impl = builder.getDOMImplementation();
  		}
  		catch(Exception e)
  		{
  			throw new RuntimeException();
  		}
! 		
  		// XML作成
  		Document document = impl.createDocument("http://tokuteikenshin.jp/checkup/2007","checkupClaim",null);
  		Element root = document.getDocumentElement();
  		root.setAttribute("xmlns:xsi", "http://www.w3.org/2001/XMLSchema-instance");
! 		/* Modified 2008/05/27 若月  */
! 		/* --------------------------------------------------- */
! //		root.setAttribute("xsi:schemaLocation", "http://tokuteikenshin.jp/checkup/2007 ./xsd/cc08_V08.xsd");
! 		/* --------------------------------------------------- */
! 		root.setAttribute("xsi:schemaLocation", "http://tokuteikenshin.jp/checkup/2007 ../XSD/cc08_V08.xsd");
! 		/* --------------------------------------------------- */
! 		
  		// 要素の追加
  		Element element_encounter = document.createElement("encounter");
  		Element element_service = document.createElement("serviceEventType");
  		element_service.setAttribute("code", ServiceEventType);
  		element_encounter.appendChild(element_service);
  		root.appendChild(element_encounter);
! 		
  		root.appendChild(subjectPerson.GetElement(document));
  		root.appendChild(chckupCard.GetElement(document));
  		root.appendChild(settlement.GetElement(document));
! 		
  		// XML出力
  		TransformerFactory transFactory = TransformerFactory.newInstance();
  		try
***************
*** 85,97 ****
  			throw new RuntimeException();
  		}
  		transformer.setOutputProperty(OutputKeys.INDENT,"yes");
! 
  		/* Added 2008/04/06 若月  */
  		/* --------------------------------------------------- */
  		/* インデントの文字数を指定する。 */
! 		transformer.setOutputProperty(OutputPropertiesFactory.S_KEY_INDENT_AMOUNT, "2");
  		/* --------------------------------------------------- */
! 
  		DOMSource source = new DOMSource(document);
  		File Xml = new File(FileName);
  		FileOutputStream stream = new FileOutputStream(Xml);
--- 78,90 ----
  			throw new RuntimeException();
  		}
  		transformer.setOutputProperty(OutputKeys.INDENT,"yes");
! 		
  		/* Added 2008/04/06 若月  */
  		/* --------------------------------------------------- */
  		/* インデントの文字数を指定する。 */
! 		transformer.setOutputProperty(OutputPropertiesFactory.S_KEY_INDENT_AMOUNT, "2");		
  		/* --------------------------------------------------- */
! 		
  		DOMSource source = new DOMSource(document);
  		File Xml = new File(FileName);
  		FileOutputStream stream = new FileOutputStream(Xml);
***************
*** 99,109 ****
  		transformer.transform(source, result);
  
  		stream.close();
! 
  		// XMLスキーマの検証
! 		Utility.checkXmlSchema(FileName,"./XSD/cc08_V08.xsd");
  	}
! 
  	public boolean check()
  	{
  		if(
--- 92,102 ----
  		transformer.transform(source, result);
  
  		stream.close();
! 		
  		// XMLスキーマの検証
! 		Utility.checkXmlSchema(FileName,"./XSD/cc08_V08.xsd"); 
  	}
! 	
  	public boolean check()
  	{
  		if(
***************
*** 115,121 ****
  		{
  			return false;
  		}
! 
  		if(
  				chckupCard.Check() == false ||
  				settlement.Check() == false ||
--- 108,114 ----
  		{
  			return false;
  		}
! 		
  		if(
  				chckupCard.Check() == false ||
  				settlement.Check() == false ||
***************
*** 124,151 ****
  		{
  			return false;
  		}
! 
  		return true;
  	}
! 
  	public void setCheckupCard(CheckupCard Card)
  	{
  		chckupCard = Card;
  	}
  	private CheckupCard chckupCard = null;
! 
  	public void setSettlement(jp.or.med.orca.jma_tokutei.common.hl7.checkupclaim.Settlement set)
  	{
  		settlement = set;
  	}
  	private jp.or.med.orca.jma_tokutei.common.hl7.checkupclaim.Settlement settlement = null;
! 
  	public void setSubjectPerson(SubjectPerson person)
  	{
  		subjectPerson = person;
  	}
  	private SubjectPerson subjectPerson = null;
! 
  	public void setServiceEventType(String Value)
  	{
  		ServiceEventType = Value;
--- 117,144 ----
  		{
  			return false;
  		}
! 		
  		return true;
  	}
! 	
  	public void setCheckupCard(CheckupCard Card)
  	{
  		chckupCard = Card;
  	}
  	private CheckupCard chckupCard = null;
! 	
  	public void setSettlement(jp.or.med.orca.jma_tokutei.common.hl7.checkupclaim.Settlement set)
  	{
  		settlement = set;
  	}
  	private jp.or.med.orca.jma_tokutei.common.hl7.checkupclaim.Settlement settlement = null;
! 	
  	public void setSubjectPerson(SubjectPerson person)
  	{
  		subjectPerson = person;
  	}
  	private SubjectPerson subjectPerson = null;
! 	
  	public void setServiceEventType(String Value)
  	{
  		ServiceEventType = Value;
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/ClinicalDocumentWriter.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/ClinicalDocumentWriter.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/ClinicalDocumentWriter.java	Wed Jan  6 09:52:00 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/ClinicalDocumentWriter.java	Tue Aug 11 17:55:30 2009
***************
*** 25,34 ****
  
  /**
   * Modified 2008/05/03 若月
!  * Java コーディング規約に従って、一部をリファクタリングした。
   */
  public class ClinicalDocumentWriter {
! 
  	private RecordTarget patientRole = null;
  	private RepresentedOrganization assignedAuthor = null;
  	private DocumentationOf documentationOf = null;
--- 25,34 ----
  
  /**
   * Modified 2008/05/03 若月
!  * Java コーディング規約に従って、一部をリファクタリングした。 
   */
  public class ClinicalDocumentWriter {
! 	
  	private RecordTarget patientRole = null;
  	private RepresentedOrganization assignedAuthor = null;
  	private DocumentationOf documentationOf = null;
***************
*** 64,88 ****
  		Element root = document.getDocumentElement();
  		root.setAttribute("xmlns:xsi",
  				"http://www.w3.org/2001/XMLSchema-instance");
- 		// edit s.inoue 2009/12/09 XSD相対パス回避
- 		// root.setAttribute("xsi:schemaLocation",
- 		// 		"urn:hl7-org:v3 ../XSD/hc08_V08.xsd");
  		root.setAttribute("xsi:schemaLocation",
! 				"urn:hl7-org:v3 ./XSD/hc08_V08.xsd");
  
  		// 要素の追加
  		ClinicalDocument.appendChild(document, root);
  
- 		// add s.inoue 2009/12/29
- 		root.appendChild(document.createComment("受診者情報"));
  		root.appendChild(patientRole.getElement(document));
  		root.appendChild(Author.GetElement(document, assignedAuthor));
  		root.appendChild(Custodian.getElement(document));
  
  		String seiriNumberExtension = participant.getSeiriNumberExtension();
  		if (seiriNumberExtension != null && !seiriNumberExtension.isEmpty()) {
  			root.appendChild(participant.getElement(document));
  		}
  
  		root.appendChild(documentationOf.getElement(document));
  		root.appendChild(Component.getElement(document,
--- 64,88 ----
  		Element root = document.getDocumentElement();
  		root.setAttribute("xmlns:xsi",
  				"http://www.w3.org/2001/XMLSchema-instance");
  		root.setAttribute("xsi:schemaLocation",
! 				"urn:hl7-org:v3 ../XSD/hc08_V08.xsd");
  
  		// 要素の追加
  		ClinicalDocument.appendChild(document, root);
  
  		root.appendChild(patientRole.getElement(document));
  		root.appendChild(Author.GetElement(document, assignedAuthor));
  		root.appendChild(Custodian.getElement(document));
  
+ 		/* Modified 2008/04/11 若月 受診券番号がない場合は、表示しない。 */
+ 		/* --------------------------------------------------- */
+ 		//		root.appendChild(participant.getElement(document));
+ 		/* --------------------------------------------------- */
  		String seiriNumberExtension = participant.getSeiriNumberExtension();
  		if (seiriNumberExtension != null && !seiriNumberExtension.isEmpty()) {
  			root.appendChild(participant.getElement(document));
  		}
+ 		/* --------------------------------------------------- */
  
  		root.appendChild(documentationOf.getElement(document));
  		root.appendChild(Component.getElement(document,
***************
*** 105,111 ****
  
  		/* 以下の処理は機能しないため、コメントアウトする。 */
  		//		/* スタンドアロンのドキュメント宣言出力を抑制する。 */
! 		//		transformer.setOutputProperty(OutputKeys.STANDALONE, "no");
  		/* --------------------------------------------------- */
  
  		DOMSource source = new DOMSource(document);
--- 105,111 ----
  
  		/* 以下の処理は機能しないため、コメントアウトする。 */
  		//		/* スタンドアロンのドキュメント宣言出力を抑制する。 */
! 		//		transformer.setOutputProperty(OutputKeys.STANDALONE, "no");		
  		/* --------------------------------------------------- */
  
  		DOMSource source = new DOMSource(document);
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/checkupclaim/CheckupCard.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/checkupclaim/CheckupCard.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/checkupclaim/CheckupCard.java	Wed Apr 21 09:46:08 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/checkupclaim/CheckupCard.java	Wed Feb 24 17:44:44 2010
***************
*** 15,22 ****
  			Element element_id = doc.createElement("id");
  			element_id.setAttribute("root","1.2.392.200119.6.209");
  			element_id.setAttribute("extension",Id);
- 			// add s.inoue 2010/01/18
- 			element.appendChild(doc.createComment("受診券整理番号"));
  			element.appendChild(element_id);
  		}
  
--- 15,20 ----
***************
*** 25,40 ****
  			Element element_time = doc.createElement("effectiveTime");
  			Element element_high = doc.createElement("high");
  			element_high.setAttribute("value", LimitTime);
- 			// add s.inoue 2010/01/18
- 			element_time.appendChild(doc.createComment("受診券有効期限"));
  			element_time.appendChild(element_high);
  			element.appendChild(element_time);
  		}
  
  		if(1 <= ClaimType && ClaimType <= 4)
  		{
- 			// add s.inoue 2010/01/18
- 			element.appendChild(doc.createComment("窓口負担（基本的な健診）"));
  			Element element_basic = doc.createElement("chargeTypeBasic");
  			element_basic.setAttribute("code", BasicCode);
  
--- 23,34 ----
***************
*** 52,64 ****
  				element_rate.setAttribute("unit", "%");
  				element_basic.appendChild(element_rate);
  			}
  			element.appendChild(element_basic);
  		}
  
  		if(ClaimType == 2 || ClaimType == 4)
  		{
- 			// add s.inoue 2010/01/18
- 			element.appendChild(doc.createComment("窓口負担（詳細）"));
  			Element element_detail = doc.createElement("chargeTypeDetail");
  			element_detail.setAttribute("code", DetailCode);
  
--- 46,57 ----
  				element_rate.setAttribute("unit", "%");
  				element_basic.appendChild(element_rate);
  			}
+ 
  			element.appendChild(element_basic);
  		}
  
  		if(ClaimType == 2 || ClaimType == 4)
  		{
  			Element element_detail = doc.createElement("chargeTypeDetail");
  			element_detail.setAttribute("code", DetailCode);
  
***************
*** 77,89 ****
  				element_rate.setAttribute("unit", "%");
  				element_detail.appendChild(element_rate);
  			}
  			element.appendChild(element_detail);
  		}
  
  		if(ClaimType == 3 || ClaimType == 4)
  		{
- 			// add s.inoue 2010/01/18
- 			element.appendChild(doc.createComment("窓口負担（追加健診）"));
  			Element element_other = doc.createElement("chargeTypeOther");
  			element_other.setAttribute("code", OtherCode);
  
--- 70,81 ----
  				element_rate.setAttribute("unit", "%");
  				element_detail.appendChild(element_rate);
  			}
+ 
  			element.appendChild(element_detail);
  		}
  
  		if(ClaimType == 3 || ClaimType == 4)
  		{
  			Element element_other = doc.createElement("chargeTypeOther");
  			element_other.setAttribute("code", OtherCode);
  
***************
*** 102,114 ****
  				element_rate.setAttribute("unit", "%");
  				element_other.appendChild(element_rate);
  			}
  			element.appendChild(element_other);
  		}
  
  		if(ClaimType == 5)
  		{
- 			// add s.inoue 2010/01/18
- 			element.appendChild(doc.createComment("窓口負担（人間ドック）"));
  			Element element_dock = doc.createElement("chargeTypeHumanDryDock");
  
  			// 後の条件分岐を簡略化するためにnullを入れておく
--- 94,105 ----
  				element_rate.setAttribute("unit", "%");
  				element_other.appendChild(element_rate);
  			}
+ 
  			element.appendChild(element_other);
  		}
  
  		if(ClaimType == 5)
  		{
  			Element element_dock = doc.createElement("chargeTypeHumanDryDock");
  
  			// 後の条件分岐を簡略化するためにnullを入れておく
***************
*** 119,125 ****
  					MaxInsurance = null;
  				}
  			}
- 
  // move s.inoue 2010/02/03
  // 条件修正 4以外の時
  //			Element element_copyment = doc.createElement("copayment");
--- 110,115 ----
***************
*** 143,163 ****
  //			}
  //
  //			element_dock.appendChild(element_copyment);
! //
! //			if(MaxInsurance != null && DockCode.equals("3"))
! //			{
! //				Element element_max = doc.createElement("maxInsuranceLimit");
! //				element_max.setAttribute("code", "4");
! //
! //				Element element_amount = doc.createElement("amount");
! //				element_amount.setAttribute("value", MaxInsurance);
! //				element_amount.setAttribute("currence", "JPY");
! //				element_max.appendChild(element_amount);
! //
! //				element_dock.appendChild(element_max);
! //			}
! //			element.appendChild(element_dock);
! //		}
  			// edit s.inoue 2010/02/03
  			// maxInsuranceLimitは4のみ負担区分を3から4へ
  			// if(MaxInsurance != null && DockCode.equals("3"))
--- 133,139 ----
  //			}
  //
  //			element_dock.appendChild(element_copyment);
! 
  			// edit s.inoue 2010/02/03
  			// maxInsuranceLimitは4のみ負担区分を3から4へ
  			// if(MaxInsurance != null && DockCode.equals("3"))
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/checkupclaim/Settlement.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/checkupclaim/Settlement.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/checkupclaim/Settlement.java	Wed Apr 21 09:46:08 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/checkupclaim/Settlement.java	Tue Aug 11 17:55:30 2009
***************
*** 19,32 ****
  	public Element GetElement(Document doc)
  	{
  		Element element = doc.createElement("settlement");
! 		// add s.inoue 2010/01/18
! 		element.appendChild(doc.createComment("請求区分コード"));
  		Element element_claimType = doc.createElement("claimType");
  		element_claimType.setAttribute("code", ClaimType);
  		element.appendChild(element_claimType);
  
- 		// add s.inoue 2010/01/18
- 		element.appendChild(doc.createComment("委託料単価(個別健診・集団健診)区分コード"));
  		Element element_commissionType = doc.createElement("commissionType");
  		element_commissionType.setAttribute("code", CommissionType);
  		element.appendChild(element_commissionType);
--- 19,29 ----
  	public Element GetElement(Document doc)
  	{
  		Element element = doc.createElement("settlement");
! 
  		Element element_claimType = doc.createElement("claimType");
  		element_claimType.setAttribute("code", ClaimType);
  		element.appendChild(element_claimType);
  
  		Element element_commissionType = doc.createElement("commissionType");
  		element_commissionType.setAttribute("code", CommissionType);
  		element.appendChild(element_commissionType);
***************
*** 36,43 ****
  		if(1 <= iClaimType && iClaimType <= 4)
  		{
  			Element element_priceBasic = doc.createElement("unitPriceBasic");
- 			// add s.inoue 2010/01/18
- 			element_priceBasic.appendChild(doc.createComment("単価(基本的な健診)"));
  			Element element_amount = doc.createElement("amount");
  			element_amount.setAttribute("value", PriceBasic);
  			element_amount.setAttribute("currency", "JPY");
--- 33,38 ----
***************
*** 60,76 ****
  					if (! amount.isEmpty() && amount != null) {
  						try {
  							Element element_priceDetail = doc.createElement("unitPriceDetail");
  							Element element_amount = doc.createElement("amount");
  							element_amount.setAttribute("value", amount);
  							element_amount.setAttribute("currency", "JPY");
- 							// add s.inoue 2010/01/18
- 							element_priceDetail.appendChild(doc.createComment("単価(詳細な健診)"));
  							element_priceDetail.appendChild(element_amount);
  
  							Element element_observation = doc.createElement("observation");
  							element_observation.setAttribute("code", Code);
- 							// add s.inoue 2010/01/18
- 							element_priceDetail.appendChild(doc.createComment("詳細な健診項目コード"));
  							element_priceDetail.appendChild(element_observation);
  
  							element.appendChild(element_priceDetail);
--- 55,68 ----
  					if (! amount.isEmpty() && amount != null) {
  						try {
  							Element element_priceDetail = doc.createElement("unitPriceDetail");
+ 
  							Element element_amount = doc.createElement("amount");
  							element_amount.setAttribute("value", amount);
  							element_amount.setAttribute("currency", "JPY");
  							element_priceDetail.appendChild(element_amount);
  
  							Element element_observation = doc.createElement("observation");
  							element_observation.setAttribute("code", Code);
  							element_priceDetail.appendChild(element_observation);
  
  							element.appendChild(element_priceDetail);
***************
*** 93,101 ****
  				{
  					String Code = Keys.nextElement();
  					String Amount = PriceOther.get(Code);
  					Element element_priceOther = doc.createElement("unitPriceOther");
- 					// add s.inoue 2010/01/18
- 					element_priceOther.appendChild(doc.createComment("単価(追加健診)"));
  
  					Element element_amount = doc.createElement("amount");
  					element_amount.setAttribute("value", Amount);
--- 85,92 ----
  				{
  					String Code = Keys.nextElement();
  					String Amount = PriceOther.get(Code);
+ 
  					Element element_priceOther = doc.createElement("unitPriceOther");
  
  					Element element_amount = doc.createElement("amount");
  					element_amount.setAttribute("value", Amount);
***************
*** 105,113 ****
  					if(3 <= iClaimType && iClaimType <= 4)
  					{
  						Element element_observation = doc.createElement("observation");
- 						// add s.inoue 2010/01/18
- 						element_priceOther.appendChild(doc.createComment("追加健診項目コード"));
- 
  						element_observation.setAttribute("code", Code);
  						element_observation.setAttribute("codeSystem", "1.2.392.200119.6.1005");
  						element_priceOther.appendChild(element_observation);
--- 96,101 ----
***************
*** 127,134 ****
  
  				Element element_priceOther = doc.createElement("unitPriceOther");
  				Element element_amount = doc.createElement("amount");
- 				// add s.inoue 2010/01/18
- 				element_priceOther.appendChild(doc.createComment("人間ドック項目コード"));
  				element_amount.setAttribute("value", Amount);
  				element_amount.setAttribute("currency", "JPY");
  				element_priceOther.appendChild(element_amount);
--- 115,120 ----
***************
*** 138,147 ****
  
  		if(1 <= iClaimType && iClaimType <= 4)
  		{
- 
  			Element element_basic = doc.createElement("paymentForBasic");
! 			// add s.inoue 2010/01/18
! 			element_basic.appendChild(doc.createComment("窓口負担金額(基本的な健診)"));
  			Element element_amount = doc.createElement("amount");
  			element_amount.setAttribute("value", PaymentBasic);
  			element_amount.setAttribute("currency", "JPY");
--- 124,131 ----
  
  		if(1 <= iClaimType && iClaimType <= 4)
  		{
  			Element element_basic = doc.createElement("paymentForBasic");
! 
  			Element element_amount = doc.createElement("amount");
  			element_amount.setAttribute("value", PaymentBasic);
  			element_amount.setAttribute("currency", "JPY");
***************
*** 152,164 ****
  
  		if(iClaimType == 2 || iClaimType == 4)
  		{
- 
  			Element element_detail = doc.createElement("paymentForDetail");
! 			element_detail.appendChild(doc.createComment("窓口負担金額(詳細な健診)"));
  			Element element_amount = doc.createElement("amount");
  			element_amount.setAttribute("value", PaymentDetail);
  			element_amount.setAttribute("currency", "JPY");
- 			// add s.inoue 2010/01/18
  
  			element_detail.appendChild(element_amount);
  			element.appendChild(element_detail);
--- 136,146 ----
  
  		if(iClaimType == 2 || iClaimType == 4)
  		{
  			Element element_detail = doc.createElement("paymentForDetail");
! 
  			Element element_amount = doc.createElement("amount");
  			element_amount.setAttribute("value", PaymentDetail);
  			element_amount.setAttribute("currency", "JPY");
  
  			element_detail.appendChild(element_amount);
  			element.appendChild(element_detail);
***************
*** 166,175 ****
  
  		if(3 <= iClaimType && iClaimType <= 5)
  		{
- 
  			Element element_other = doc.createElement("paymentForOther");
! 			// add s.inoue 2010/01/18
! 			element_other.appendChild(doc.createComment("窓口負担金額(追加健診)"));
  			Element element_amount = doc.createElement("amount");
  			element_amount.setAttribute("value", PaymentOther);
  			element_amount.setAttribute("currency", "JPY");
--- 148,155 ----
  
  		if(3 <= iClaimType && iClaimType <= 5)
  		{
  			Element element_other = doc.createElement("paymentForOther");
! 
  			Element element_amount = doc.createElement("amount");
  			element_amount.setAttribute("value", PaymentOther);
  			element_amount.setAttribute("currency", "JPY");
***************
*** 178,192 ****
  			element.appendChild(element_other);
  		}
  
- 		// add s.inoue 2010/01/18
- 		element.appendChild(doc.createComment("単価合計金額"));
  		Element element_unitAmount = doc.createElement("unitAmount");
  		element_unitAmount.setAttribute("value", UnitAmount);
  		element_unitAmount.setAttribute("currency", "JPY");
  		element.appendChild(element_unitAmount);
  
- 		// add s.inoue 2010/01/18
- 		element.appendChild(doc.createComment("窓口負担金額"));
  		Element element_paymentAmount = doc.createElement("paymentAmount");
  		element_paymentAmount.setAttribute("value", PaymentAmount);
  		element_paymentAmount.setAttribute("currency", "JPY");
--- 158,168 ----
***************
*** 212,220 ****
  			}
  		}
  
- 		// add s.inoue 2010/01/18
- 		element.appendChild(doc.createComment("保険者への請求金額"));
- 
  		Element element_claimAmount = doc.createElement("claimAmount");
  		element_claimAmount.setAttribute("value", ClaimAmount);
  		element_claimAmount.setAttribute("currency", "JPY");
--- 188,193 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/checkupclaim/SubjectPerson.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/checkupclaim/SubjectPerson.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/checkupclaim/SubjectPerson.java	Wed Apr 21 09:46:08 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/checkupclaim/SubjectPerson.java	Tue Aug 11 17:55:30 2009
***************
*** 10,30 ****
  	public Element GetElement(Document doc)
  	{
  		Element element = doc.createElement("subjectPerson");
! 
  		Element element_performer = doc.createElement("performerOrganization");
! 		// add s.inoue 2010/01/18
! 		element.appendChild(doc.createComment("実施機関番号"));
! 
  		Element element_id = doc.createElement("id");
  		element_id.setAttribute("root", "1.2.392.200119.6.102");
  		element_id.setAttribute("extension", OrganizationId);
  		element_performer.appendChild(element_id);
! 
  		element.appendChild(element_performer);
! 
  		Element element_card = doc.createElement("insuranceCard");
! 		// add s.inoue 2010/01/18
! 		element_card.appendChild(doc.createComment("保険者番号"));
  		Element element_insure = doc.createElement("insurerNumber");
  		element_insure.setAttribute("root", "1.2.392.200119.6.101");
  		element_insure.setAttribute("extension", InsureNumber);
--- 10,27 ----
  	public Element GetElement(Document doc)
  	{
  		Element element = doc.createElement("subjectPerson");
! 		
  		Element element_performer = doc.createElement("performerOrganization");
! 		
  		Element element_id = doc.createElement("id");
  		element_id.setAttribute("root", "1.2.392.200119.6.102");
  		element_id.setAttribute("extension", OrganizationId);
  		element_performer.appendChild(element_id);
! 		
  		element.appendChild(element_performer);
! 		
  		Element element_card = doc.createElement("insuranceCard");
! 		
  		Element element_insure = doc.createElement("insurerNumber");
  		element_insure.setAttribute("root", "1.2.392.200119.6.101");
  		element_insure.setAttribute("extension", InsureNumber);
***************
*** 43,57 ****
  		/* --------------------------------------------------- */
  		if(InsurerCardSymbol != null && ! InsurerCardSymbol.isEmpty())
  		{
- 			// add s.inoue 2010/01/18
- 			element_card.appendChild(doc.createComment("被保険者証等記号"));
  			Element element_symbol = doc.createElement("symbol");
  			element_symbol.setAttribute("root", "1.2.392.200119.6.204");
  			element_symbol.setAttribute("extension", InsurerCardSymbol);
  			element_card.appendChild(element_symbol);
  		}
  		/* --------------------------------------------------- */
! 
  		/* Modified 2008/03/31 若月  */
  		/* --------------------------------------------------- */
  //		Element element_number = doc.createElement("number");
--- 40,52 ----
  		/* --------------------------------------------------- */
  		if(InsurerCardSymbol != null && ! InsurerCardSymbol.isEmpty())
  		{
  			Element element_symbol = doc.createElement("symbol");
  			element_symbol.setAttribute("root", "1.2.392.200119.6.204");
  			element_symbol.setAttribute("extension", InsurerCardSymbol);
  			element_card.appendChild(element_symbol);
  		}
  		/* --------------------------------------------------- */
! 		
  		/* Modified 2008/03/31 若月  */
  		/* --------------------------------------------------- */
  //		Element element_number = doc.createElement("number");
***************
*** 60,80 ****
  //		element_card.appendChild(element_number);
  		/* --------------------------------------------------- */
  		if (InsurerCardNumber != null && ! InsurerCardNumber.isEmpty()) {
- 			// add s.inoue 2010/01/18
- 			element_card.appendChild(doc.createComment("被保険者証等番号"));
  			Element element_number = doc.createElement("number");
  			element_number.setAttribute("root", "1.2.392.200119.6.205");
  			element_number.setAttribute("extension", InsurerCardNumber);
  			element_card.appendChild(element_number);
  		}
  		/* --------------------------------------------------- */
! 
  		element.appendChild(element_card);
! 
! 		// add s.inoue 2010/01/18
! 		element.appendChild(doc.createComment("氏名"));
  		Element element_name = doc.createElement("name");
! 
  		/* Modified 2008/06/08 若月  */
  		/* --------------------------------------------------- */
  //		element_name.setTextContent(Name);
--- 55,71 ----
  //		element_card.appendChild(element_number);
  		/* --------------------------------------------------- */
  		if (InsurerCardNumber != null && ! InsurerCardNumber.isEmpty()) {
  			Element element_number = doc.createElement("number");
  			element_number.setAttribute("root", "1.2.392.200119.6.205");
  			element_number.setAttribute("extension", InsurerCardNumber);
  			element_card.appendChild(element_number);
  		}
  		/* --------------------------------------------------- */
! 		
  		element.appendChild(element_card);
! 		
  		Element element_name = doc.createElement("name");
! 		
  		/* Modified 2008/06/08 若月  */
  		/* --------------------------------------------------- */
  //		element_name.setTextContent(Name);
***************
*** 83,94 ****
  		String name = Name.replaceAll("[ 　\\t]", "");
  		element_name.setTextContent(name);
  		/* --------------------------------------------------- */
! 
  		element.appendChild(element_name);
! 		// add s.inoue 2010/01/18
! 		element.appendChild(doc.createComment("住所と郵便番号"));
  		Element element_addr = doc.createElement("addr");
! 
  		/* Modified 2008/06/08 若月  */
  		/* --------------------------------------------------- */
  //		element_addr.setTextContent(Address);
--- 74,84 ----
  		String name = Name.replaceAll("[ 　\\t]", "");
  		element_name.setTextContent(name);
  		/* --------------------------------------------------- */
! 		
  		element.appendChild(element_name);
! 		
  		Element element_addr = doc.createElement("addr");
! 		
  		/* Modified 2008/06/08 若月  */
  		/* --------------------------------------------------- */
  //		element_addr.setTextContent(Address);
***************
*** 97,123 ****
  		String address = Address.replaceAll("[ 　\\t]", "");
  		element_addr.setTextContent(address);
  		/* --------------------------------------------------- */
! 
  		Element element_postal = doc.createElement("postalCode");
  		element_postal.setTextContent(PostalCode);
  		element_addr.appendChild(element_postal);
  		element.appendChild(element_addr);
! 
  		Element element_birth = doc.createElement("birthTime");
  		element_birth.setAttribute("value", BirthTime);
- 		// add s.inoue 2010/01/18
- 		element.appendChild(doc.createComment("生年月日"));
  		element.appendChild(element_birth);
! 
  		Element element_gender = doc.createElement("administrativeGender");
  		element_gender.setAttribute("code", Gender);
- 		// add s.inoue 2010/01/18
- 		element.appendChild(doc.createComment("性別"));
  		element.appendChild(element_gender);
! 
  		return element;
  	}
! 
  	public boolean Check()
  	{
  		if(
--- 87,109 ----
  		String address = Address.replaceAll("[ 　\\t]", "");
  		element_addr.setTextContent(address);
  		/* --------------------------------------------------- */
! 		
  		Element element_postal = doc.createElement("postalCode");
  		element_postal.setTextContent(PostalCode);
  		element_addr.appendChild(element_postal);
  		element.appendChild(element_addr);
! 		
  		Element element_birth = doc.createElement("birthTime");
  		element_birth.setAttribute("value", BirthTime);
  		element.appendChild(element_birth);
! 		
  		Element element_gender = doc.createElement("administrativeGender");
  		element_gender.setAttribute("code", Gender);
  		element.appendChild(element_gender);
! 		
  		return element;
  	}
! 	
  	public boolean Check()
  	{
  		if(
***************
*** 133,142 ****
  		{
  			return false;
  		}
! 
  		return true;
  	}
! 
  	/**
  	 * @param Value 機関番号
  	 */
--- 119,128 ----
  		{
  			return false;
  		}
! 		
  		return true;
  	}
! 	
  	/**
  	 * @param Value 機関番号
  	 */
***************
*** 149,155 ****
  		OrganizationId = Value;
  	}
  	private String OrganizationId = null;
! 
  	/**
  	 * @param Value 保険者番号
  	 */
--- 135,141 ----
  		OrganizationId = Value;
  	}
  	private String OrganizationId = null;
! 	
  	/**
  	 * @param Value 保険者番号
  	 */
***************
*** 162,168 ****
  		InsureNumber = Value;
  	}
  	private String InsureNumber = null;
! 
  	/**
  	 * @param Value 被保険者証等記号
  	 */
--- 148,154 ----
  		InsureNumber = Value;
  	}
  	private String InsureNumber = null;
! 	
  	/**
  	 * @param Value 被保険者証等記号
  	 */
***************
*** 171,177 ****
  		InsurerCardSymbol = Value;
  	}
  	private String InsurerCardSymbol = null;
! 
  	/**
  	 * @param Value 被保険者証等番号
  	 */
--- 157,163 ----
  		InsurerCardSymbol = Value;
  	}
  	private String InsurerCardSymbol = null;
! 	
  	/**
  	 * @param Value 被保険者証等番号
  	 */
***************
*** 180,186 ****
  		InsurerCardNumber = Value;
  	}
  	private String InsurerCardNumber = null;
! 
  	/**
  	 * @param Value 名前
  	 */
--- 166,172 ----
  		InsurerCardNumber = Value;
  	}
  	private String InsurerCardNumber = null;
! 	
  	/**
  	 * @param Value 名前
  	 */
***************
*** 189,195 ****
  		Name = Value;
  	}
  	private String Name = null;
! 
  	/**
  	 * @param Value 住所
  	 */
--- 175,181 ----
  		Name = Value;
  	}
  	private String Name = null;
! 	
  	/**
  	 * @param Value 住所
  	 */
***************
*** 198,204 ****
  		Address = Value;
  	}
  	private String Address = null;
! 
  	/**
  	 * @param Value 郵便番号
  	 */
--- 184,190 ----
  		Address = Value;
  	}
  	private String Address = null;
! 	
  	/**
  	 * @param Value 郵便番号
  	 */
***************
*** 207,213 ****
  		PostalCode = Utility.ConvertPostalCode(Value);
  	}
  	private String PostalCode = null;
! 
  	/**
  	 * @param Value 生年月日
  	 */
--- 193,199 ----
  		PostalCode = Utility.ConvertPostalCode(Value);
  	}
  	private String PostalCode = null;
! 	
  	/**
  	 * @param Value 生年月日
  	 */
***************
*** 216,222 ****
  		BirthTime = Value;
  	}
  	private String BirthTime = null;
! 
  	/**
  	 * @param Value 性別
  	 */
--- 202,208 ----
  		BirthTime = Value;
  	}
  	private String BirthTime = null;
! 	
  	/**
  	 * @param Value 性別
  	 */
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/Author.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/Author.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/Author.java	Wed Jan  6 09:52:00 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/Author.java	Tue Aug 11 17:55:30 2009
***************
*** 10,32 ****
  	public static Element GetElement(Document doc, RepresentedOrganization author)
  	{
  		Element element = doc.createElement("author");
! 
! 		// add s.inoue 2009/12/29
! 		element.appendChild(doc.createComment("ファイル作成年月日"));
  		Element element_time = doc.createElement("time");
  		element_time.setAttribute("value", Utility.NowDate());
! 
  		element.appendChild(element_time);
! 
  		Element element_auth = doc.createElement("assignedAuthor");
! 
  		Element element_id = doc.createElement("id");
  		element_id.setAttribute("nullFlavor", "NI");
  		element_auth.appendChild(element_id);
  		element_auth.appendChild(author.getElement(doc));
! 
  		element.appendChild(element_auth);
! 
  		return element;
  	}
  }
--- 10,30 ----
  	public static Element GetElement(Document doc, RepresentedOrganization author)
  	{
  		Element element = doc.createElement("author");
! 		
  		Element element_time = doc.createElement("time");
  		element_time.setAttribute("value", Utility.NowDate());
! 		
  		element.appendChild(element_time);
! 		
  		Element element_auth = doc.createElement("assignedAuthor");
! 		
  		Element element_id = doc.createElement("id");
  		element_id.setAttribute("nullFlavor", "NI");
  		element_auth.appendChild(element_id);
  		element_auth.appendChild(author.getElement(doc));
! 		
  		element.appendChild(element_auth);
! 		
  		return element;
  	}
  }
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/ClinicalDocument.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/ClinicalDocument.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/ClinicalDocument.java	Wed Jan  6 09:52:00 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/ClinicalDocument.java	Tue Aug 11 17:55:30 2009
***************
*** 1,40 ****
  package jp.or.med.orca.jma_tokutei.common.hl7.clinicaldocument;
  
- import jp.or.med.orca.jma_tokutei.common.hl7.ClinicalDocumentWriter;
  import jp.or.med.orca.jma_tokutei.common.hl7.common.Utility;
  
  import org.w3c.dom.Document;
  import org.w3c.dom.Element;
  
- import com.lowagie.text.ElementTags;
- 
  
  public class ClinicalDocument {
! 
  	public static Element appendChild(Document doc,Element element)
  	{
- 		// add s.inoue 2009/12/29
- 		element.appendChild(doc.createComment("CDAのデフォルト"));
  		element.appendChild(Typeid.getElement(doc));
! 
  		Element element_id = doc.createElement("id");
  		element_id.setAttribute("nullFlavor", "NI");
  		element.appendChild(element_id);
! 
! 		// add s.inoue 2009/12/29
! 		element.appendChild(doc.createComment("報告区分コード"));
  		element.appendChild(Code.getElement(doc));
! 
! 		// add s.inoue 2009/12/29
! 		element.appendChild(doc.createComment("文書発行日（西暦）"));
  		Element element_time = doc.createElement("effectiveTime");
  		element_time.setAttribute("value", Utility.NowDate());
  		element.appendChild(element_time);
! 
  		Element element_code = doc.createElement("confidentialityCode");
  		element_code.setAttribute("code", "N");
  		element.appendChild(element_code);
! 
  		return element;
  	}
  }
--- 1,31 ----
  package jp.or.med.orca.jma_tokutei.common.hl7.clinicaldocument;
  
  import jp.or.med.orca.jma_tokutei.common.hl7.common.Utility;
  
  import org.w3c.dom.Document;
  import org.w3c.dom.Element;
  
  
  public class ClinicalDocument {
! 	
  	public static Element appendChild(Document doc,Element element)
  	{
  		element.appendChild(Typeid.getElement(doc));
! 		
  		Element element_id = doc.createElement("id");
  		element_id.setAttribute("nullFlavor", "NI");
  		element.appendChild(element_id);
! 		
  		element.appendChild(Code.getElement(doc));
! 		
  		Element element_time = doc.createElement("effectiveTime");
  		element_time.setAttribute("value", Utility.NowDate());
  		element.appendChild(element_time);
! 		
  		Element element_code = doc.createElement("confidentialityCode");
  		element_code.setAttribute("code", "N");
  		element.appendChild(element_code);
! 		
  		return element;
  	}
  }
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/DocumentationOf.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/DocumentationOf.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/DocumentationOf.java	Wed Jan  6 09:52:00 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/DocumentationOf.java	Tue Aug 11 17:55:30 2009
***************
*** 12,68 ****
  	public Element getElement(Document doc)
  	{
  		Element element = doc.createElement("documentationOf");
! 
  		Element element_service = doc.createElement("serviceEvent");
! 
! 		// add s.inoue 2009/12/29
! 		element_service.appendChild(doc.createComment("健診実施時のプログラム種別"));
  		Element element_code = doc.createElement("code");
  		element_code.setAttribute("code", "010");
  		element_code.setAttribute("codeSystem", "1.2.392.200119.6.1002");
  		element_code.setAttribute("displayName", "特定健診");
  		element_service.appendChild(element_code);
! 
! 		// add s.inoue 2009/12/29
! 		element_service.appendChild(doc.createComment("健診実施年月日"));
  		Element element_time = doc.createElement("effectiveTime");
  		element_time.setAttribute("value", EffectiveTime);
  		element_service.appendChild(element_time);
! 
  		Element element_performer = doc.createElement("performer");
  		element_performer.setAttribute("typeCode", "PRF");
! 
  		Element element_assigned = doc.createElement("assignedEntity");
! 
  		Element element_id = doc.createElement("id");
  		element_id.setAttribute("nullFlavor", "NI");
  		element_assigned.appendChild(element_id);
! 
  		element_assigned.appendChild(representedOrganization.getElement(doc));
! 
  		element_performer.appendChild(element_assigned);
! 
  		element_service.appendChild(element_performer);
  		element.appendChild(element_service);
! 
  		return element;
  	}
! 
  	public boolean Check()
  	{
  		if(EffectiveTime == null || representedOrganization == null)
  		{
  			return false;
  		}
! 
  		if(representedOrganization.Check() == false)
  		{
  			return false;
  		}
! 
  		return true;
  	}
! 
  	public void setEffectiveTime(Calendar Value)
  	{
  		EffectiveTime = Utility.GetTimeString(Value);
--- 12,65 ----
  	public Element getElement(Document doc)
  	{
  		Element element = doc.createElement("documentationOf");
! 		
  		Element element_service = doc.createElement("serviceEvent");
! 		
  		Element element_code = doc.createElement("code");
  		element_code.setAttribute("code", "010");
  		element_code.setAttribute("codeSystem", "1.2.392.200119.6.1002");
  		element_code.setAttribute("displayName", "特定健診");
  		element_service.appendChild(element_code);
! 		
! 		
  		Element element_time = doc.createElement("effectiveTime");
  		element_time.setAttribute("value", EffectiveTime);
  		element_service.appendChild(element_time);
! 		
  		Element element_performer = doc.createElement("performer");
  		element_performer.setAttribute("typeCode", "PRF");
! 		
  		Element element_assigned = doc.createElement("assignedEntity");
! 		
  		Element element_id = doc.createElement("id");
  		element_id.setAttribute("nullFlavor", "NI");
  		element_assigned.appendChild(element_id);
! 		
  		element_assigned.appendChild(representedOrganization.getElement(doc));
! 		
  		element_performer.appendChild(element_assigned);
! 		
  		element_service.appendChild(element_performer);
  		element.appendChild(element_service);
! 		
  		return element;
  	}
! 	
  	public boolean Check()
  	{
  		if(EffectiveTime == null || representedOrganization == null)
  		{
  			return false;
  		}
! 		
  		if(representedOrganization.Check() == false)
  		{
  			return false;
  		}
! 		
  		return true;
  	}
! 	
  	public void setEffectiveTime(Calendar Value)
  	{
  		EffectiveTime = Utility.GetTimeString(Value);
***************
*** 72,78 ****
  		EffectiveTime = Value;
  	}
  	private String EffectiveTime = null;
! 
  	public void setRepresentedOrganization(RepresentedOrganization Value)
  	{
  		representedOrganization = Value;
--- 69,75 ----
  		EffectiveTime = Value;
  	}
  	private String EffectiveTime = null;
! 	
  	public void setRepresentedOrganization(RepresentedOrganization Value)
  	{
  		representedOrganization = Value;
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/Participant.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/Participant.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/Participant.java	Wed Jan  6 09:52:00 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/Participant.java	Tue Aug 11 17:55:30 2009
***************
*** 13,55 ****
  	{
  		Element element = doc.createElement("participant");
  		element.setAttribute("typeCode", "HLD");
! 
  		Element element_func = doc.createElement("functionCode");
  
  		element_func.setAttribute("code", "1");
  		element_func.setAttribute("codeSystem", "1.2.392.200119.6.208");
! 
  		element.appendChild(element_func);
! 
  		Element element_time = doc.createElement("time");
! 
  		if (Time != null && ! Time.isEmpty()) {
- 			// add s.inoue 2009/12/29
- 			element_time.appendChild(doc.createComment("受診券有効期限"));
  			Element element_high = doc.createElement("high");
  			element_high.setAttribute("value", Time);
  			element_time.appendChild(element_high);
  		}
! 
  		element.appendChild(element_time);
! 
  		Element element_associate = doc.createElement("associatedEntity");
  		element_associate.setAttribute("classCode", "IDENT");
  
  		Element element_id = doc.createElement("id");
! 
  		if (SeiriNumberExtension != null && ! SeiriNumberExtension.isEmpty()) {
  			element_id.setAttribute("extension", SeiriNumberExtension);
  		}
  
  		element_id.setAttribute("root", SeiriNumberRoot);
- 
- 		// add s.inoue 2009/12/29
- 		element_associate.appendChild(doc.createComment("受診券整理番号"));
  		element_associate.appendChild(element_id);
  
- 		// add s.inoue 2009/12/29
- 		element_associate.appendChild(doc.createComment("受診券を発行した保険者番号"));
  		Element element_scoping = doc.createElement("scopingOrganization");
  		Element element_id2 = doc.createElement("id");
  		element_id2.setAttribute("extension", HokenjyaNumberExtension);
--- 13,60 ----
  	{
  		Element element = doc.createElement("participant");
  		element.setAttribute("typeCode", "HLD");
! 		
  		Element element_func = doc.createElement("functionCode");
  
  		element_func.setAttribute("code", "1");
  		element_func.setAttribute("codeSystem", "1.2.392.200119.6.208");
! 		
  		element.appendChild(element_func);
! 		
  		Element element_time = doc.createElement("time");
! 		
! 		/* Modified 2008/03/31 若月  */
! 		/* --------------------------------------------------- */
! //		Element element_high = doc.createElement("high");
! //		element_high.setAttribute("value", Time);
! //		element_time.appendChild(element_high);
! 		/* --------------------------------------------------- */
  		if (Time != null && ! Time.isEmpty()) {
  			Element element_high = doc.createElement("high");
  			element_high.setAttribute("value", Time);
  			element_time.appendChild(element_high);
  		}
! 		/* --------------------------------------------------- */
! 	
  		element.appendChild(element_time);
! 		
  		Element element_associate = doc.createElement("associatedEntity");
  		element_associate.setAttribute("classCode", "IDENT");
  
  		Element element_id = doc.createElement("id");
! 		
! 		/* Modified 2008/03/31 若月  */
! 		/* --------------------------------------------------- */
! //		element_id.setAttribute("extension", SeiriNumberExtension);
! 		/* --------------------------------------------------- */
  		if (SeiriNumberExtension != null && ! SeiriNumberExtension.isEmpty()) {
  			element_id.setAttribute("extension", SeiriNumberExtension);
  		}
+ 		/* --------------------------------------------------- */
  
  		element_id.setAttribute("root", SeiriNumberRoot);
  		element_associate.appendChild(element_id);
  
  		Element element_scoping = doc.createElement("scopingOrganization");
  		Element element_id2 = doc.createElement("id");
  		element_id2.setAttribute("extension", HokenjyaNumberExtension);
***************
*** 58,67 ****
  		element_associate.appendChild(element_scoping);
  
  		element.appendChild(element_associate);
! 
  		return element;
  	}
! 
  	public boolean Check()
  	{
  		if(
--- 63,72 ----
  		element_associate.appendChild(element_scoping);
  
  		element.appendChild(element_associate);
! 		
  		return element;
  	}
! 	
  	public boolean Check()
  	{
  		if(
***************
*** 76,85 ****
  		{
  			return false;
  		}
! 
  		return true;
  	}
! 
  	/**
  	 * @param Value 受診券整理番号
  	 */
--- 81,90 ----
  		{
  			return false;
  		}
! 		
  		return true;
  	}
! 	
  	/**
  	 * @param Value 受診券整理番号
  	 */
***************
*** 92,105 ****
  		SeiriNumberExtension = Value;
  	}
  	private String SeiriNumberExtension = null;
! 
  	/**
  	 * @param Value 保険者番号（recordTargetの保険者番号と同じ値を設定する）
  	 */
  	public void setHokenjyaNumber(long Value)
  	{
  		String Temp = Utility.FillZero(Value, 8);
! 
  		HokenjyaNumberExtension = Temp;
  		SeiriNumberRoot = "1.2.392.200119.6.209.1" + Temp;
  	}
--- 97,110 ----
  		SeiriNumberExtension = Value;
  	}
  	private String SeiriNumberExtension = null;
! 	
  	/**
  	 * @param Value 保険者番号（recordTargetの保険者番号と同じ値を設定する）
  	 */
  	public void setHokenjyaNumber(long Value)
  	{
  		String Temp = Utility.FillZero(Value, 8);
! 		
  		HokenjyaNumberExtension = Temp;
  		SeiriNumberRoot = "1.2.392.200119.6.209.1" + Temp;
  	}
***************
*** 110,116 ****
  	}
  	private String HokenjyaNumberExtension = null;;
  	private String SeiriNumberRoot = null;
! 
  	/**
  	 * @param Value 受診券の有効期限
  	 */
--- 115,121 ----
  	}
  	private String HokenjyaNumberExtension = null;;
  	private String SeiriNumberRoot = null;
! 	
  	/**
  	 * @param Value 受診券の有効期限
  	 */
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/RecordTarget.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/RecordTarget.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/RecordTarget.java	Wed Jan  6 09:52:00 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/RecordTarget.java	Tue Aug 11 17:55:30 2009
***************
*** 16,94 ****
  		{
  			return null;
  		}
! 
  		Element element = doc.createElement("recordTarget");
! 
  		Element element_role = doc.createElement("patientRole");
! 
! 		// add s.inoue 2009/12/29
! 		element_role.appendChild(doc.createComment("保険者番号"));
  		Element element_id = doc.createElement("id");
  		element_id.setAttribute("extension", HokenjyaNumberExtension);
  		element_id.setAttribute("root", "1.2.392.200119.6.101");
  		element_role.appendChild(element_id);
  
  		if(HokensyoCodeExtension != null && ! HokensyoCodeExtension.isEmpty())
  		{
- 			// add s.inoue 2009/12/29
- 			element_role.appendChild(doc.createComment("被保険者証等記号"));
  			Element element_id2 = doc.createElement("id");
  			element_id2.setAttribute("extension", HokensyoCodeExtension);
  			element_id2.setAttribute("root", "1.2.392.200119.6.204");
  			element_role.appendChild(element_id2);
  		}
  
- 		// add s.inoue 2009/12/29
- 		element_role.appendChild(doc.createComment("被保険者証等番号"));
  		Element element_id3 = doc.createElement("id");
  		element_id3.setAttribute("extension", HokensyoNumberExtension);
  		element_id3.setAttribute("root", "1.2.392.200119.6.205");
  		element_role.appendChild(element_id3);
! 
  		Element element_addr = doc.createElement("addr");
! 
  		/* 空白文字を削除する。 */
- 		// add s.inoue 2009/12/29
- 		element_role.appendChild(doc.createComment("住所、郵便番号"));
  		String address = Address.replaceAll("[ 　\\t]", "");
  		element_addr.setTextContent(address);
! 
  		Element element_addr_postalCode = doc.createElement("postalCode");
  		element_addr_postalCode.setTextContent(PostalCode);
  		element_addr.appendChild(element_addr_postalCode);
  		element_role.appendChild(element_addr);
! 
  
  		Element element_patient = doc.createElement("patient");
  		Element element_patient_name = doc.createElement("name");
! 
  		/* 空白文字を削除する。 */
- 		// add s.inoue 2009/12/29
- 		element_patient.appendChild(doc.createComment("氏名"));
  		String name = Name.replaceAll("[ 　\\t]", "");
  		element_patient_name.setTextContent(name);
  		element_patient.appendChild(element_patient_name);
! 
! 		// add s.inoue 2009/12/29
! 		element_patient.appendChild(doc.createComment("性別"));
  		Element element_patient_gender = doc.createElement("administrativeGenderCode");
  		element_patient_gender.setAttribute("code", GenderCode);
  		element_patient_gender.setAttribute("codeSystem", "1.2.392.200119.6.1104");
  		element_patient.appendChild(element_patient_gender);
! 
! 		// add s.inoue 2009/12/29
! 		element_patient.appendChild(doc.createComment("生年月日"));
  		Element element_patient_birthTime = doc.createElement("birthTime");
  		element_patient_birthTime.setAttribute("value", BirthTime);
  		element_patient.appendChild(element_patient_birthTime);
! 
  		element_role.appendChild(element_patient);
! 
  		element.appendChild(element_role);
! 
  		return element;
  	}
! 
  	/**
  	 * @return すべての項目が設定されているかチェック
  	 */
--- 16,102 ----
  		{
  			return null;
  		}
! 		
  		Element element = doc.createElement("recordTarget");
! 		
  		Element element_role = doc.createElement("patientRole");
! 		
  		Element element_id = doc.createElement("id");
  		element_id.setAttribute("extension", HokenjyaNumberExtension);
  		element_id.setAttribute("root", "1.2.392.200119.6.101");
  		element_role.appendChild(element_id);
  
+ 		// 被保険者証等記号が必須ではなくなったので、それの対応。
+ 		/* Modified 2008/04/03 若月  */
+ 		/* --------------------------------------------------- */
+ //		if(HokensyoCodeExtension != null)
+ //		{
+ //			Element element_id2 = doc.createElement("id");
+ //			element_id2.setAttribute("extension", HokensyoCodeExtension);
+ //			element_id2.setAttribute("root", "1.2.392.200119.6.204");
+ //			element_role.appendChild(element_id2);
+ //		}
+ 		/* --------------------------------------------------- */
  		if(HokensyoCodeExtension != null && ! HokensyoCodeExtension.isEmpty())
  		{
  			Element element_id2 = doc.createElement("id");
  			element_id2.setAttribute("extension", HokensyoCodeExtension);
  			element_id2.setAttribute("root", "1.2.392.200119.6.204");
  			element_role.appendChild(element_id2);
  		}
+ 		/* --------------------------------------------------- */
  
  		Element element_id3 = doc.createElement("id");
  		element_id3.setAttribute("extension", HokensyoNumberExtension);
  		element_id3.setAttribute("root", "1.2.392.200119.6.205");
  		element_role.appendChild(element_id3);
! 		
  		Element element_addr = doc.createElement("addr");
! 		
! 		/* Modified 2008/06/08 若月  */
! 		/* --------------------------------------------------- */
! //		element_addr.setTextContent(Address);
! 		/* --------------------------------------------------- */
  		/* 空白文字を削除する。 */
  		String address = Address.replaceAll("[ 　\\t]", "");
  		element_addr.setTextContent(address);
! 		/* --------------------------------------------------- */
! 		
  		Element element_addr_postalCode = doc.createElement("postalCode");
  		element_addr_postalCode.setTextContent(PostalCode);
  		element_addr.appendChild(element_addr_postalCode);
  		element_role.appendChild(element_addr);
! 		
  
  		Element element_patient = doc.createElement("patient");
  		Element element_patient_name = doc.createElement("name");
! 		
! 		/* Modified 2008/06/08 若月  */
! 		/* --------------------------------------------------- */
! //		element_patient_name.setTextContent(Name);
! 		/* --------------------------------------------------- */
  		/* 空白文字を削除する。 */
  		String name = Name.replaceAll("[ 　\\t]", "");
  		element_patient_name.setTextContent(name);
+ 		/* --------------------------------------------------- */
  		element_patient.appendChild(element_patient_name);
! 		
  		Element element_patient_gender = doc.createElement("administrativeGenderCode");
  		element_patient_gender.setAttribute("code", GenderCode);
  		element_patient_gender.setAttribute("codeSystem", "1.2.392.200119.6.1104");
  		element_patient.appendChild(element_patient_gender);
! 		
  		Element element_patient_birthTime = doc.createElement("birthTime");
  		element_patient_birthTime.setAttribute("value", BirthTime);
  		element_patient.appendChild(element_patient_birthTime);
! 		
  		element_role.appendChild(element_patient);
! 		
  		element.appendChild(element_role);
! 		
  		return element;
  	}
! 	
  	/**
  	 * @return すべての項目が設定されているかチェック
  	 */
***************
*** 98,137 ****
  		{
  			return false;
  		}
! 
  		if(HokensyoNumberExtension == null)
  		{
  			return false;
  		}
! 
  		if(Address == null)
  		{
  			return false;
  		}
! 
  		if(PostalCode == null)
  		{
  			return false;
  		}
! 
  		if(Name == null)
  		{
  			return false;
  		}
! 
  		if(GenderCode == null)
  		{
  			return false;
  		}
! 
  		if(BirthTime == null)
  		{
  			return false;
  		}
! 
  		return true;
  	}
! 
  	/**
  	 * @param Value 保険者番号
  	 */
--- 106,145 ----
  		{
  			return false;
  		}
! 		
  		if(HokensyoNumberExtension == null)
  		{
  			return false;
  		}
! 		
  		if(Address == null)
  		{
  			return false;
  		}
! 		
  		if(PostalCode == null)
  		{
  			return false;
  		}
! 		
  		if(Name == null)
  		{
  			return false;
  		}
! 		
  		if(GenderCode == null)
  		{
  			return false;
  		}
! 		
  		if(BirthTime == null)
  		{
  			return false;
  		}
! 		
  		return true;
  	}
! 	
  	/**
  	 * @param Value 保険者番号
  	 */
***************
*** 144,150 ****
  		HokenjyaNumberExtension = Value;
  	}
  	private String HokenjyaNumberExtension = null;
! 
  	/**
  	 * @param Value 被保険者証等記号
  	 */
--- 152,158 ----
  		HokenjyaNumberExtension = Value;
  	}
  	private String HokenjyaNumberExtension = null;
! 	
  	/**
  	 * @param Value 被保険者証等記号
  	 */
***************
*** 153,159 ****
  		HokensyoCodeExtension = Value;
  	}
  	private String HokensyoCodeExtension = null;
! 
  	/**
  	 * @param Value 被保険者証等番号
  	 */
--- 161,167 ----
  		HokensyoCodeExtension = Value;
  	}
  	private String HokensyoCodeExtension = null;
! 	
  	/**
  	 * @param Value 被保険者証等番号
  	 */
***************
*** 162,168 ****
  		HokensyoNumberExtension = Value;
  	}
  	private String HokensyoNumberExtension = null;
! 
  	/**
  	 * @param Value 受診者住所
  	 */
--- 170,176 ----
  		HokensyoNumberExtension = Value;
  	}
  	private String HokensyoNumberExtension = null;
! 	
  	/**
  	 * @param Value 受診者住所
  	 */
***************
*** 171,187 ****
  		Address = Value;
  	}
  	private String Address = null;
! 
  	/**
  	 * @param Value 受診者郵便番号
  	 */
  	public void setPostalCode(String Value)
  	{
! 		PostalCode = Utility.ConvertPostalCode(Value);
  	}
  	private String PostalCode = null;
! 
! 
  	/**
  	 * @param Value 受診者の氏名
  	 */
--- 179,195 ----
  		Address = Value;
  	}
  	private String Address = null;
! 	
  	/**
  	 * @param Value 受診者郵便番号
  	 */
  	public void setPostalCode(String Value)
  	{
! 		PostalCode = Utility.ConvertPostalCode(Value);	
  	}
  	private String PostalCode = null;
! 	
! 	
  	/**
  	 * @param Value 受診者の氏名
  	 */
***************
*** 190,196 ****
  		Name = Value;
  	}
  	private String Name = null;
! 
  	/**
  	 * @param Value 受診者性別のコード
  	 */
--- 198,204 ----
  		Name = Value;
  	}
  	private String Name = null;
! 	
  	/**
  	 * @param Value 受診者性別のコード
  	 */
***************
*** 199,205 ****
  		GenderCode = Value;
  	}
  	private String GenderCode = null;
! 
  	/**
  	 * @param Value 受診者の生年月日（Calendarクラスの月成分の1月ずれる問題は、内部で修正）
  	 */
--- 207,213 ----
  		GenderCode = Value;
  	}
  	private String GenderCode = null;
! 	
  	/**
  	 * @param Value 受診者の生年月日（Calendarクラスの月成分の1月ずれる問題は、内部で修正）
  	 */
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/RepresentedOrganization.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/RepresentedOrganization.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/RepresentedOrganization.java	Wed Jan  6 09:52:00 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/RepresentedOrganization.java	Tue Aug 11 17:55:30 2009
***************
*** 14,58 ****
  		{
  			return null;
  		}
! 
  		Element element_representedOrg = doc.createElement("representedOrganization");
! 
! 		// add s.inoue 2009/12/29
! 		element_representedOrg.appendChild(doc.createComment("ファイル作成機関番号"));
  		Element element_id2 = doc.createElement("id");
  		element_id2.setAttribute("extension", NumberExtension);
  		element_id2.setAttribute("root", "1.2.392.200119.6.102");
  		element_representedOrg.appendChild(element_id2);
  
- 		// add s.inoue 2009/12/29
- 		element_representedOrg.appendChild(doc.createComment("ファイル作成機関名称"));
  		Element element_name = doc.createElement("name");
  		element_name.setTextContent(Name);
  		element_representedOrg.appendChild(element_name);
! 
! 		// add s.inoue 2009/12/29
! 		element_representedOrg.appendChild(doc.createComment("ファイル作成機関電話番号"));
  		Element element_telecom = doc.createElement("telecom");
  		element_telecom.setAttribute("value", Telecom);
  		element_representedOrg.appendChild(element_telecom);
  
  		Element element_addr = doc.createElement("addr");
! 
  		/* 空白文字を削除する。 */
  		String address = Address.replaceAll("[ 　\\t]", "");
  		element_addr.setTextContent(address);
! 
! 		// add s.inoue 2009/12/29
! 		element_representedOrg.appendChild(doc.createComment("ファイル作成機関住所、郵便番号"));
  		Element element_postalCode = doc.createElement("postalCode");
  		element_postalCode.setTextContent(PostalCode);
  		element_addr.appendChild(element_postalCode);
! 
  		element_representedOrg.appendChild(element_addr);
  
  		return element_representedOrg;
  	}
! 
  	public boolean Check()
  	{
  		if(
--- 14,55 ----
  		{
  			return null;
  		}
! 		
  		Element element_representedOrg = doc.createElement("representedOrganization");
! 		
  		Element element_id2 = doc.createElement("id");
  		element_id2.setAttribute("extension", NumberExtension);
  		element_id2.setAttribute("root", "1.2.392.200119.6.102");
  		element_representedOrg.appendChild(element_id2);
  
  		Element element_name = doc.createElement("name");
  		element_name.setTextContent(Name);
  		element_representedOrg.appendChild(element_name);
! 		
  		Element element_telecom = doc.createElement("telecom");
  		element_telecom.setAttribute("value", Telecom);
  		element_representedOrg.appendChild(element_telecom);
  
  		Element element_addr = doc.createElement("addr");
! 		
! 		/* Modified 2008/06/08 若月  */
! 		/* --------------------------------------------------- */
! //		element_addr.setTextContent(Address);
! 		/* --------------------------------------------------- */
  		/* 空白文字を削除する。 */
  		String address = Address.replaceAll("[ 　\\t]", "");
  		element_addr.setTextContent(address);
! 		/* --------------------------------------------------- */
! 		
  		Element element_postalCode = doc.createElement("postalCode");
  		element_postalCode.setTextContent(PostalCode);
  		element_addr.appendChild(element_postalCode);
! 		
  		element_representedOrg.appendChild(element_addr);
  
  		return element_representedOrg;
  	}
! 	
  	public boolean Check()
  	{
  		if(
***************
*** 65,74 ****
  		{
  			return false;
  		}
! 
  		return true;
  	}
! 
  	/**
  	 * @param Value 機関の番号
  	 */
--- 62,71 ----
  		{
  			return false;
  		}
! 		
  		return true;
  	}
! 	
  	/**
  	 * @param Value 機関の番号
  	 */
***************
*** 81,87 ****
  		NumberExtension = Value;
  	}
  	private String NumberExtension = null;
! 
  	/**
  	 * @param Value 機関の名称
  	 */
--- 78,84 ----
  		NumberExtension = Value;
  	}
  	private String NumberExtension = null;
! 	
  	/**
  	 * @param Value 機関の名称
  	 */
***************
*** 90,96 ****
  		Name = Value;
  	}
  	private String Name = null;
! 
  	/**
  	 * @param Value 機関の連絡先情報
  	 */
--- 87,93 ----
  		Name = Value;
  	}
  	private String Name = null;
! 	
  	/**
  	 * @param Value 機関の連絡先情報
  	 */
***************
*** 99,105 ****
  		Telecom = "tel:" + Value;
  	}
  	private String Telecom = null;
! 
  	/**
  	 * @param Value 機関の所在地情報
  	 */
--- 96,102 ----
  		Telecom = "tel:" + Value;
  	}
  	private String Telecom = null;
! 	
  	/**
  	 * @param Value 機関の所在地情報
  	 */
***************
*** 108,121 ****
  		Address = Value;
  	}
  	private String Address = null;
! 
  	/**
  	 * @param Value 機関の郵便番号情報
  	 */
  	public void setPostalCode(String Value)
  	{
  		Value = Utility.ConvertPostalCode(Value);
! 
  		PostalCode = Value;
  	}
  	private String PostalCode = null;
--- 105,118 ----
  		Address = Value;
  	}
  	private String Address = null;
! 	
  	/**
  	 * @param Value 機関の郵便番号情報
  	 */
  	public void setPostalCode(String Value)
  	{
  		Value = Utility.ConvertPostalCode(Value);
! 		
  		PostalCode = Value;
  	}
  	private String PostalCode = null;
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/component/Component.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/component/Component.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/component/Component.java	Wed Jan  6 09:52:00 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/component/Component.java	Tue Aug 11 17:55:30 2009
***************
*** 9,27 ****
  	public static Element getElement(Document doc, List<Observation> TokuteiKenshin, List<Observation> Other)
  	{
  		Element element = doc.createElement("component");
! 
  		Element element_struct = doc.createElement("structuredBody");
  
  		Element element_component1 = doc.createElement("component");
  		element_component1.appendChild(Section.getElement(doc, TokuteiKenshin, 0));
  		element_struct.appendChild(element_component1);
! 
  		Element element_component2 = doc.createElement("component");
  		element_component2.appendChild(Section.getElement(doc, Other, 1));
  		element_struct.appendChild(element_component2);
! 
  		element.appendChild(element_struct);
! 
  		return element;
  	}
  }
--- 9,27 ----
  	public static Element getElement(Document doc, List<Observation> TokuteiKenshin, List<Observation> Other)
  	{
  		Element element = doc.createElement("component");
! 		
  		Element element_struct = doc.createElement("structuredBody");
  
  		Element element_component1 = doc.createElement("component");
  		element_component1.appendChild(Section.getElement(doc, TokuteiKenshin, 0));
  		element_struct.appendChild(element_component1);
! 		
  		Element element_component2 = doc.createElement("component");
  		element_component2.appendChild(Section.getElement(doc, Other, 1));
  		element_struct.appendChild(element_component2);
! 		
  		element.appendChild(element_struct);
! 		
  		return element;
  	}
  }
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/component/Section.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/component/Section.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/component/Section.java	Wed Jan  6 09:52:00 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/hl7/clinicaldocument/component/Section.java	Tue Aug 11 17:55:30 2009
***************
*** 10,21 ****
  import org.w3c.dom.Element;
  
  public class Section {
! 
  	/* Added 2008/06/10 若月  */
  	/* --------------------------------------------------- */
! 	private static HashMap<String, String> doctorIkenNameMap =
  		createDoctorIkenNameMap();
! 
  	private static HashMap<String, String> createDoctorIkenNameMap(){
  		HashMap<String, String> map = new HashMap<String, String>();
  		map.put("9N511000000000049", "9N516000000000049");
--- 10,21 ----
  import org.w3c.dom.Element;
  
  public class Section {
! 	
  	/* Added 2008/06/10 若月  */
  	/* --------------------------------------------------- */
! 	private static HashMap<String, String> doctorIkenNameMap = 
  		createDoctorIkenNameMap();
! 		
  	private static HashMap<String, String> createDoctorIkenNameMap(){
  		HashMap<String, String> map = new HashMap<String, String>();
  		map.put("9N511000000000049", "9N516000000000049");
***************
*** 30,40 ****
  		map.put("9N621161400000049", "9N626000000000049");
  		map.put("9N631161400000049", "9N636000000000049");
  		map.put("9N641000000000049", "9N646000000000049");
! 
  		return map;
  	}
  	/* --------------------------------------------------- */
! 
  	/**
  	 * @param observationList
  	 * @param Purpose 報告の目的（0 = 特定健診 , 1 = その他）
--- 30,40 ----
  		map.put("9N621161400000049", "9N626000000000049");
  		map.put("9N631161400000049", "9N636000000000049");
  		map.put("9N641000000000049", "9N646000000000049");
! 		
  		return map;
  	}
  	/* --------------------------------------------------- */
! 	
  	/**
  	 * @param observationList
  	 * @param Purpose 報告の目的（0 = 特定健診 , 1 = その他）
***************
*** 45,75 ****
  		{
  			throw new RuntimeException();
  		}
! 
  		Element element = doc.createElement("section");
  		Element element_code = doc.createElement("code");
! 
! 		// add s.inoue 2009/12/29
! 		String displayTitle = "";
  		if(Purpose == 0)
  		{
- 			// edit s.inoue 2009/12/29
- 			displayTitle = "検査・問診結果セクション";
- 			element_code.setAttribute("displayName", displayTitle);
  			element_code.setAttribute("code", "01010");
  			element_code.setAttribute("codeSystem", "1.2.392.200119.6.1010");
  		}else{
! 			// edit s.inoue 2009/12/29
! 			displayTitle = "任意追加項目";
! 			element_code.setAttribute("displayName", displayTitle);
  			element_code.setAttribute("code", "01990");
  			element_code.setAttribute("codeSystem", "1.2.392.200119.6.1010");
  		}
  		element.appendChild(element_code);
  		element.appendChild(doc.createElement("text"));
! 
! 		/*
! 		 * 項目リストを順番号に従ってソートする。
  		 */
  		Collections.sort(observationList, new Comparator<Observation>(){
  			public int compare(Observation o1, Observation o2) {
--- 45,145 ----
  		{
  			throw new RuntimeException();
  		}
! 		
  		Element element = doc.createElement("section");
  		Element element_code = doc.createElement("code");
! 		
  		if(Purpose == 0)
  		{
  			element_code.setAttribute("code", "01010");
  			element_code.setAttribute("codeSystem", "1.2.392.200119.6.1010");
+ 			element_code.setAttribute("displayName", "検査・問診結果セクション");
  		}else{
! 			/* Modified 2008/04/03 若月 サンプルファイルのコード番号が間違っていたため、
! 			 * 正しい番号に修正。 */
! 			/* --------------------------------------------------- */
! //			element_code.setAttribute("code", "01070");
! 			/* --------------------------------------------------- */
  			element_code.setAttribute("code", "01990");
+ 			/* --------------------------------------------------- */
+ 			
  			element_code.setAttribute("codeSystem", "1.2.392.200119.6.1010");
+ 			element_code.setAttribute("displayName", "任意追加項目");
+ 			
  		}
  		element.appendChild(element_code);
  		element.appendChild(doc.createElement("text"));
! 		
! 		
! 		/* Modified 2008/04/06 若月 個票の「順番号」列を考慮した実装に変更する。 */
! 		/* --------------------------------------------------- */
! //		// 一連検査コードが割り当てられている項目一覧を作成
! //		Hashtable<String,List<observation>> IchirenKensaList = new Hashtable<String, List<observation>>();
! //		
! //		for(int i = 0 ; i < ObservationList.size() ; i++)
! //		{
! //			observation Item = ObservationList.get(i);
! //			
! //			if(!Item.getEntryType().equals(""))
! //			{
! //				if(IchirenKensaList.containsKey(Item.getEntryType()))
! //				{
! //					List<observation> IchirenKensa = IchirenKensaList.get(Item.getEntryType());
! //					IchirenKensa.add(Item);
! //				}else{
! //					List<observation> IchirenKensa = new ArrayList<observation>();
! //					IchirenKensa.add(Item);
! //					IchirenKensaList.put(Item.getEntryType(), IchirenKensa);
! //				}
! //				
! //				ObservationList.remove(i);
! //				i--;
! //			}
! //			
! //		}
! //		
! //		// 一連検査を登録
! //		Enumeration<String> IchirenKensaKeys = IchirenKensaList.keys();
! //		
! //		while(IchirenKensaKeys.hasMoreElements())
! //		{
! //			String KeyName = IchirenKensaKeys.nextElement();
! //			List<observation> IchirenKensa = IchirenKensaList.get(KeyName);
! //			
! //			Element element_entry = doc.createElement("entry");
! //			
! //			Element element_observation = doc.createElement("observation");
! //			element_observation.setAttribute("classCode", "OBS");
! //			element_observation.setAttribute("moodCode", "EVN");
! //			
! //			Element element_code2 = doc.createElement("code");
! //			element_code2.setAttribute("nullFlavor", "NA");
! //			element_observation.appendChild(element_code2);
! //			
! //			for(int i = 0 ; i < IchirenKensa.size() ; i++)
! //			{
! //				observation Item = IchirenKensa.get(i);
! //				
! //				Element element_relation = doc.createElement("entryRelationship");
! //				element_relation.setAttribute("typeCode", Item.getEntryCode());
! //				element_relation.appendChild(Item.GetElement(doc));
! //				element_observation.appendChild(element_relation);
! //			}
! //			
! //			element_entry.appendChild(element_observation);
! //			element.appendChild(element_entry);
! //		}
! //		
! //		// それ以外を記録
! //		for(int i = 0 ; i < ObservationList.size() ; i++)
! //		{
! //			Element element_entry = doc.createElement("entry");
! //			element_entry.appendChild(ObservationList.get(i).GetElement(doc));
! //			element.appendChild(element_entry);
! //		}
! 		/* --------------------------------------------------- */
! 		/* 
! 		 * 項目リストを順番号に従ってソートする。 
  		 */
  		Collections.sort(observationList, new Comparator<Observation>(){
  			public int compare(Observation o1, Observation o2) {
***************
*** 80,145 ****
  			}
  		});
  
  		HashMap<String, Observation> doctorNameObservationMap = new HashMap<String, Observation>();
! 
  		/* 医師名の項目（検査項目として扱わない）を取り除き、HashMap に登録する。 */
  		for(int i = 0 ; i < observationList.size() ; i++){
  			Observation observationItem = observationList.get(i);
  			String code = observationItem.getCode();
! 
  			if (doctorIkenNameMap.containsValue(code)) {
  				/* 医師名の項目の場合 */
  				observationList.remove(observationItem);
  				doctorNameObservationMap.put(code, observationItem);
  			}
  		}
! 
  		/* 医師名を設定可能な項目で、対応する医師名が存在する場合は、医師名を
  		 * 設定する。 */
  		for(int i = 0 ; i < observationList.size() ; i++){
  			Observation ikenItem = observationList.get(i);
  			String code = ikenItem.getCode();
! 
  			if (doctorIkenNameMap.containsKey(code)) {
  				String doctorNameCode = doctorIkenNameMap.get(code);
  				Observation nameItem = doctorNameObservationMap.get(doctorNameCode);
  
  				if (nameItem == null ) {
  					continue;
  				}
! 
  				String name = nameItem.getResult();
  				ikenItem.setAuthor(name);
  			}
  		}
! 
  		/* 一連検査グループ関係コードと、その要素のマップ */
  		HashMap<String, Element> ichirenKensaMap = new HashMap<String, Element>();
  
  		for(int i = 0 ; i < observationList.size() ; i++){
  			Observation observationItem = observationList.get(i);
! 
  			/* 一連検査コードの有無で処理を分岐する。 */
  			String entryType = observationItem.getEntryType();
! 
  			Element entryElement = doc.createElement("entry");
  			Element observationElement = observationItem.getElement(doc);
  
  			if (observationElement == null) {
  				continue;
  			}
! 
  			/* 一連検査グループに属さない場合 */
  			if (entryType == null || entryType.isEmpty()) {
  				if (Purpose == 1)
  				{
- 					// add s.inoue 2009/12/29
- 					entryElement.appendChild(doc.createComment(observationItem.getCodeDisplayName()));
  					entryElement.appendChild(observationElement);
  					element.appendChild(entryElement);
  				}else{
- 					// add s.inoue 2009/12/29
- 					entryElement.appendChild(doc.createComment(observationItem.getCodeDisplayName()));
  					entryElement.appendChild(observationElement);
  					element.appendChild(entryElement);
  				}
--- 150,220 ----
  			}
  		});
  
+ 		/* Added 2008/06/08 若月  */
+ 		/* --------------------------------------------------- */
  		HashMap<String, Observation> doctorNameObservationMap = new HashMap<String, Observation>();
! 				
  		/* 医師名の項目（検査項目として扱わない）を取り除き、HashMap に登録する。 */
  		for(int i = 0 ; i < observationList.size() ; i++){
  			Observation observationItem = observationList.get(i);
  			String code = observationItem.getCode();
! 			
  			if (doctorIkenNameMap.containsValue(code)) {
  				/* 医師名の項目の場合 */
  				observationList.remove(observationItem);
  				doctorNameObservationMap.put(code, observationItem);
  			}
  		}
! 		
  		/* 医師名を設定可能な項目で、対応する医師名が存在する場合は、医師名を
  		 * 設定する。 */
  		for(int i = 0 ; i < observationList.size() ; i++){
  			Observation ikenItem = observationList.get(i);
  			String code = ikenItem.getCode();
! 			
  			if (doctorIkenNameMap.containsKey(code)) {
  				String doctorNameCode = doctorIkenNameMap.get(code);
  				Observation nameItem = doctorNameObservationMap.get(doctorNameCode);
  
+ 				/* Added 2008/06/10 若月  */
+ 				/* --------------------------------------------------- */
  				if (nameItem == null ) {
  					continue;
  				}
! 				/* --------------------------------------------------- */
! 				
  				String name = nameItem.getResult();
  				ikenItem.setAuthor(name);
  			}
  		}
! 		/* --------------------------------------------------- */
! 		
  		/* 一連検査グループ関係コードと、その要素のマップ */
  		HashMap<String, Element> ichirenKensaMap = new HashMap<String, Element>();
  
  		for(int i = 0 ; i < observationList.size() ; i++){
  			Observation observationItem = observationList.get(i);
! 			
  			/* 一連検査コードの有無で処理を分岐する。 */
  			String entryType = observationItem.getEntryType();
! 			
  			Element entryElement = doc.createElement("entry");
  			Element observationElement = observationItem.getElement(doc);
  
+ 			/* Added 2008/06/23 若月  */
+ 			/* --------------------------------------------------- */
  			if (observationElement == null) {
  				continue;
  			}
! 			/* --------------------------------------------------- */
! 			
  			/* 一連検査グループに属さない場合 */
  			if (entryType == null || entryType.isEmpty()) {
  				if (Purpose == 1)
  				{
  					entryElement.appendChild(observationElement);
  					element.appendChild(entryElement);
  				}else{
  					entryElement.appendChild(observationElement);
  					element.appendChild(entryElement);
  				}
***************
*** 153,178 ****
  				/* まだ登録されていないグループの場合は、新規にグループを作成して追加する。 */
  				Element groupObservationElement = ichirenKensaMap.get(entryType);
  				if (groupObservationElement == null) {
! 
  					groupObservationElement = doc.createElement("observation");
  					groupObservationElement.setAttribute("classCode", "OBS");
  					groupObservationElement.setAttribute("moodCode", "EVN");
! 
  					Element codeElement = doc.createElement("code");
  					codeElement.setAttribute("nullFlavor", "NA");
  					groupObservationElement.appendChild(codeElement);
  
- 					// add s.inoue 2009/12/29
- 					entryElement.appendChild(doc.createComment(observationItem.getCodeDisplayName()));
  					entryElement.appendChild(groupObservationElement);
  					element.appendChild(entryElement);
! 
  					ichirenKensaMap.put(entryType, groupObservationElement);
  				}
  				groupObservationElement.appendChild(elementRelationship);
! 			}
! 		}
! 
  		return element;
  	}
  
--- 228,251 ----
  				/* まだ登録されていないグループの場合は、新規にグループを作成して追加する。 */
  				Element groupObservationElement = ichirenKensaMap.get(entryType);
  				if (groupObservationElement == null) {
! 					
  					groupObservationElement = doc.createElement("observation");
  					groupObservationElement.setAttribute("classCode", "OBS");
  					groupObservationElement.setAttribute("moodCode", "EVN");
! 					
  					Element codeElement = doc.createElement("code");
  					codeElement.setAttribute("nullFlavor", "NA");
  					groupObservationElement.appendChild(codeElement);
  
  					entryElement.appendChild(groupObservationElement);
  					element.appendChild(entryElement);
! 					
  					ichirenKensaMap.put(entryType, groupObservationElement);
  				}
  				groupObservationElement.appendChild(elementRelationship);
! 			}			
! 		}		
! 		
  		return element;
  	}
  
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/printer/JGraphicPrinter.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/printer/JGraphicPrinter.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/printer/JGraphicPrinter.java	Mon Dec 21 13:29:12 2009
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/printer/JGraphicPrinter.java	Wed Feb 24 17:44:44 2010
***************
*** 12,26 ****
--- 12,36 ----
  import java.io.IOException;
  import java.io.InputStream;
  import java.io.InputStreamReader;
+ 
+ import javax.print.PrintService;
+ import javax.print.attribute.HashPrintRequestAttributeSet;
+ import javax.print.attribute.PrintRequestAttributeSet;
+ import javax.print.attribute.standard.Chromaticity;
+ import javax.print.attribute.standard.MediaSizeName;
  import javax.swing.JFrame;
+ 
  import org.apache.log4j.Logger;
  
+ import jp.or.med.orca.jma_tokutei.common.app.JPath;
  import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
+ 
  import com.lowagie.tools.Executable;
  
  // ----------------------------------------------------------------------------
  /**
   class::name	JGraphicPrinter
+ 
   class::expl	グラフィック印刷クラス
   */
  // ----------------------------------------------------------------------------
***************
*** 33,46 ****
--- 43,65 ----
  	private static org.apache.log4j.Logger logger = Logger.getLogger(JGraphicPrinter.class);
  
  	public final static double A4_WIDTH = 595.2755905511810;
+ 
  	public final static double A4_HEIGHT = 841.8897637795276;
+ 
  	public final static double A4_IX = 15.0;
+ 
  	public final static double A4_IY = 15.0;
+ 
  	public final static double A4_IW = A4_WIDTH - A4_IX * 2;
+ 
  	public final static double A4_IH = A4_HEIGHT - A4_IY * 2;
+ 
  	PrinterJob job = PrinterJob.getPrinterJob();
+ 
  	PageFormat pageFormat = job.defaultPage();
+ 
  	File rtn = new File("");
+ 
  	JFrame ParentFrame = null;
  
  	/*
***************
*** 59,72 ****
  		 */
  		PrinterJob job = PrinterJob.getPrinterJob();
  
  		PageFormat pageFormat = job.defaultPage();
  		Paper pFormat = pageFormat.getPaper();
! 
  		/*A4縦*/
  		pFormat.setSize(A4_WIDTH, A4_HEIGHT);
  		pFormat.setImageableArea(A4_IX, A4_IY, A4_IW, A4_IH);
  		pageFormat.setPaper(pFormat);
  
  			try {
  				rtn = this.printKekka();
  
--- 78,115 ----
  		 */
  		PrinterJob job = PrinterJob.getPrinterJob();
  
+ 		// add ver2 s.inoue 2009/07/29
+ 		// job.printDialog();
+ 
  		PageFormat pageFormat = job.defaultPage();
  		Paper pFormat = pageFormat.getPaper();
! 		// edit ver2 s.inoue 2009/09/04
  		/*A4縦*/
  		pFormat.setSize(A4_WIDTH, A4_HEIGHT);
  		pFormat.setImageableArea(A4_IX, A4_IY, A4_IW, A4_IH);
+ 
+ 		/*A4横*/
+ //		pFormat.setSize(21.0/2.54*72,29.7/2.54*72);
+ //		pFormat.setImageableArea(72,72,21.0/2.54*72-144,29.7/2.54*72-144);
+ 
  		pageFormat.setPaper(pFormat);
  
+ 		//job.setPrintable( this, pageFormat );
+ 		//job.setPrintable(this);
+ 
+ 		/*
+ 		 *  印刷検索
+ 		 */
+ 		/* --------------------------------------------------- */
+ 		/* Delete 2008/09/11 薮  */
+ 		/* --------------------------------------------------- */
+ //		PrintService[] services = PrinterJob.lookupPrintServices();
+ 
+ //		if (services.length > 0) {
+ 			// 最後に検出されたプリンタに対して標準設定
+ //			job.setPrintService(services[services.length - 1]);
+ 		/* --------------------------------------------------- */
+ 
  			try {
  				rtn = this.printKekka();
  
***************
*** 76,86 ****
  					return;
  				}
  
  				Executable pdfexe = new Executable();
  				Process process=null;
  				if (!pdfexe.isWindows() && !pdfexe.isMac()) {
  
! 					// edit s.inoue 20090119 adobe優先
  					// Process process0=  Runtime.getRuntime().exec("which acroread xpdf");
  					Process process0=  Runtime.getRuntime().exec("which xpdf acroread");
  					InputStream is = process0.getInputStream();
--- 119,137 ----
  					return;
  				}
  
+ 				/* --------------------------------------------------- */
+ 				/* Modified 2008/09/11 薮  */
+ 				/* --------------------------------------------------- */
+ //				Process process = Executable.openDocument(rtn, true);
  				Executable pdfexe = new Executable();
  				Process process=null;
  				if (!pdfexe.isWindows() && !pdfexe.isMac()) {
+ 					logger.info("Linux 開始");
+ 					System.out.println("Linux 開始");
+ 					// del s.inoue 2009/12/07
+ 					// System.out.println(rtn.getPath());
  
! 					// add s.inoue 20090119 adobe優先
  					// Process process0=  Runtime.getRuntime().exec("which acroread xpdf");
  					Process process0=  Runtime.getRuntime().exec("which xpdf acroread");
  					InputStream is = process0.getInputStream();
***************
*** 155,160 ****
--- 206,218 ----
  			} catch (RuntimeException e) {
  				e.printStackTrace();
  			}
+ 		/* --------------------------------------------------- */
+ 		/* Delete 2008/09/11 薮  */
+ 		/* --------------------------------------------------- */
+ //		} else {
+ //			throw new PrinterException("Can not find printers.");
+ //		}
+ 		/* --------------------------------------------------- */
  	}
  
  	public File printKekka() {
***************
*** 165,178 ****
  
  	/*
  	 *  印刷内容
  	 */
  	public int print(Graphics g, PageFormat pf, int pageIndex) {
  		if (pageIndex >= 1) {
  			return Printable.NO_SUCH_PAGE;
  		}
! 		g.translate((int) (pageFormat.getImageableX()), (int) (pageFormat.getImageableY()));
  
! 		((Graphics2D) g).transform(java.awt.geom.AffineTransform.getScaleInstance(1, 1));
  
  		//
  		// ここに印刷処理を記述する.
--- 223,244 ----
  
  	/*
  	 *  印刷内容
+ 	 *
+ 	 *		@param  none
+ 	 *
+ 	 *		@return none
+ 	 *
  	 */
  	public int print(Graphics g, PageFormat pf, int pageIndex) {
  		if (pageIndex >= 1) {
  			return Printable.NO_SUCH_PAGE;
  		}
! 		//		g.translate( (int)(pf.getImageableX()), (int)(pf.getImageableY()) );
! 		g.translate((int) (pageFormat.getImageableX()), (int) (pageFormat
! 				.getImageableY()));
  
! 		((Graphics2D) g).transform(java.awt.geom.AffineTransform
! 				.getScaleInstance(1, 1));
  
  		//
  		// ここに印刷処理を記述する.
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/sql/OrcaConnection.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/sql/OrcaConnection.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/sql/OrcaConnection.java	Thu May  6 10:45:08 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/sql/OrcaConnection.java	Wed Feb 24 17:44:44 2010
***************
*** 187,194 ****
  
  			} catch (SQLException e1) {
  				e1.printStackTrace();
! 				// del s.inoue 2010/04/23
! 				// JErrorMessage.show("M4390", null);
  			}
  		}
  
--- 187,193 ----
  
  			} catch (SQLException e1) {
  				e1.printStackTrace();
! 				JErrorMessage.show("M4390", null);
  			}
  		}
  
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/sql/dao/JShowResultFrameDao.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/sql/dao/JShowResultFrameDao.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/sql/dao/JShowResultFrameDao.java	Wed Nov 18 16:01:16 2009
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/sql/dao/JShowResultFrameDao.java	Wed Feb 24 17:44:44 2010
***************
*** 42,45 ****
  	List<TreeMap<String, String>>
  	selectTableRecord(Long uketukeId, Integer kenshinPatternNumber, String hknjanum)
  	throws SQLException;
! }
\ No newline at end of file
--- 42,90 ----
  	List<TreeMap<String, String>>
  	selectTableRecord(Long uketukeId, Integer kenshinPatternNumber, String hknjanum)
  	throws SQLException;
! }
! 
! //package jp.or.med.orca.jma_tokutei.common.sql.dao;
! //
! //import java.sql.SQLException;
! //import java.util.List;
! //import java.util.Map;
! //
! //import jp.or.med.orca.jma_tokutei.common.sql.model.JShowResultFrameModel;
! //
! //public interface JShowResultFrameDao extends Dao {
! //
! //	/**
! //	 * 検査項目名と健診パターン名を取得する
! //	 * @param uketukeId 受付ID
! //	 * @param kensaNengapi 検査実施年月日
! //	 * @param centerKoumokuCd 検査センター項目コード
! //	 * @return JShowResultFrameModel
! //	 */
! //	JShowResultFrameModel selectKpNameCenterName(
! //			Long uketukeId,
! //			Integer kensaNengapi,
! //			Integer centerKoumokuCd) throws SQLException;
! //
! //	// edit ver2 s.inoue 2009/08/26
! //	/**
! //	 * 検査項目名と健診パターン名を取得する
! //	 * @param uketukeId 受付ID
! //	 * @param kensaNengapi 検査実施年月日
! //	 * @param centerKoumokuCd 検査センター項目コード
! //	 * @return JShowResultFrameModel
! //	 */
! //	JShowResultFrameModel selectKpNameCenterName(
! //			Long uketukeId,
! //			Integer centerKoumokuCd) throws SQLException;
! //
! //
! //	List<Map<String, String>>
! //	selectTableRecord(Long uketukeId, Integer kensaNengapi, String hknjanum, Integer kenshinPatternNumber)
! //	throws SQLException;
! //
! //	// edit ver2 s.inoue 2009/08/26
! //	List<Map<String, String>>
! //	selectTableRecord(Long uketukeId, String hknjanum, Integer kenshinPatternNumber)
! //	throws SQLException;
! //}
\ No newline at end of file
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/sql/dao/THokenjyaDao.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/sql/dao/THokenjyaDao.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/sql/dao/THokenjyaDao.java	Wed Apr 21 09:46:08 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/sql/dao/THokenjyaDao.java	Wed Feb 24 17:44:44 2010
***************
*** 11,25 ****
  
  	/**
  	 * ユニークキー指定でレコード件数取得
- 	 * @param hknjanum
- 	 * @return kojinCnt
- 	 */
- 	int selectByCountUniqueKey(String hknjanum)
- 		throws SQLException, NoSuchMethodException,
- 		IllegalAccessException, InvocationTargetException;
- 
- 	/**
- 	 * ユニークキー指定でレコード件数取得
  	 * @param hknjanum,historyId
  	 * @return kojinCnt
  	 */
--- 11,16 ----
***************
*** 29,42 ****
  
  	/**
  	 * レコード削除
! 	 * @param
! 	 * @throws SQLException
! 	 */
! 	void delete()throws SQLException;
! 
! 	/**
! 	 * レコード削除
! 	 * @param hknjanum
  	 * @throws SQLException
  	 */
  	void delete(String hknjanum,String historyId,String itakuKubun) throws SQLException;
--- 20,26 ----
  
  	/**
  	 * レコード削除
! 	 * @param uketukeId
  	 * @throws SQLException
  	 */
  	void delete(String hknjanum,String historyId,String itakuKubun) throws SQLException;
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/sql/dao/impl/JShowResultFrameDaoImpl.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/sql/dao/impl/JShowResultFrameDaoImpl.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/sql/dao/impl/JShowResultFrameDaoImpl.java	Wed Nov 18 16:01:16 2009
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/sql/dao/impl/JShowResultFrameDaoImpl.java	Wed Feb 24 17:44:44 2010
***************
*** 364,367 ****
  		// TODO 自動生成されたメソッド・スタブ
  		return null;
  	}
! }
\ No newline at end of file
--- 364,732 ----
  		// TODO 自動生成されたメソッド・スタブ
  		return null;
  	}
! }
! //package jp.or.med.orca.jma_tokutei.common.sql.dao.impl;
! //
! //import java.sql.Connection;
! //import java.sql.PreparedStatement;
! //import java.sql.ResultSet;
! //import java.sql.ResultSetMetaData;
! //import java.sql.SQLException;
! //import java.util.ArrayList;
! //import java.util.HashMap;
! //import java.util.Hashtable;
! //import java.util.List;
! //import java.util.Map;
! //
! //import static java.sql.Types.*;
! //
! //import jp.or.med.orca.jma_tokutei.common.sql.dao.JShowResultFrameDao;
! //import jp.or.med.orca.jma_tokutei.common.sql.model.JShowResultFrameModel;
! //
! //public class JShowResultFrameDaoImpl extends DaoImpl implements
! //		JShowResultFrameDao {
! //
! //	// edit ver2 s.inoue 2009/08/27
! //	// 検査センター名称を特定するには検査センターコードと検査センター項目コードを
! //	// 指定する必要がある。
! //	// 検査結果特定テーブルには検査センター項目コード列が存在しないため、
! //	// 検査センター名称を1つに特定できない。
! //	// そのため、検査センター名称は抽出しない。
! //	private static final String SELECT_KPNAME_CENTERNAME_BY_UKETUKEID_SQL
! //	= "select b.k_p_name, b.k_p_no  " +
! //		" from " +
! //		" t_kensakeka_tokutei as a " +
! //		" left join " +
! //		" t_kenshin_p_m as b " +
! //		" on " +
! //		" a.k_p_no = b.k_p_no " +
! //		" where " +
! //		" a.uketuke_id = ? ";
! ////	private static final String SELECT_KPNAME_CENTERNAME_SQL
! ////	= "select b.k_p_name, b.k_p_no  " +
! ////		" from " +
! ////		" t_kensakeka_tokutei as a " +
! ////		" left join " +
! ////		" t_kenshin_p_m as b " +
! ////		" on " +
! ////		" a.k_p_no = b.k_p_no " +
! ////		" where " +
! ////		" a.uketuke_id = ? " +
! ////		" and " +
! ////		" a.kensa_nengapi = ? ";
! //
! //	// edit ver2 s.inoue 2009/08/26
! //	private static final String SELECT_TABLERECORD_SQL = createSelectTableRecordSql();
! //	private static final String SELECT_TABLERECORD_BY_UKETUKEID_SQL = createSelectTableRecordByUketukeIDSql();
! //
! //	private static String createSelectTableRecordSql(){
! //		StringBuffer buffer = new StringBuffer();
! //
! //		buffer.append(" SELECT master.KOUMOKU_CD,");
! //
! //		// edit ver2 s.inoue 2009/07/23
! //		//buffer.append(" master.KOUMOKU_NAME,");
! //		buffer.append("  case when master.KOUMOKU_NAME ='生活機能問診1' then '質問1-1' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診2' then '質問1-2' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診3' then '質問1-3' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診4' then '質問4' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診5' then '質問5' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診6' then '質問6' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診7' then '質問7' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診8' then '質問8' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診9' then '質問9' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診10' then '質問10' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診11' then '質問11' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診12' then '質問12' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診13' then '質問13' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診14' then '質問14' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診15' then '質問15' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診16' then '質問16' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診17' then '質問17' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診18' then '質問18' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診19' then '質問19' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診20' then '質問20' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診21' then '質問21' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診22' then '質問22' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診23' then '質問23' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診24' then '質問24' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診25' then '質問25' ");
! //		buffer.append("  else master.KOUMOKU_NAME end KOUMOKU_NAME, ");
! //
! //		buffer.append(" master.KENSA_HOUHOU,");
! //		buffer.append(" sonota.KEKA_TI AS KEKA_TI_DECIMAL,");
! //		buffer.append(" sonota.KEKA_TI AS KEKA_TI_CODE,");
! //		buffer.append(" sonota.KEKA_TI AS KEKA_TI_STRING,");
! //		// add s.inoue 20080911
! //		buffer.append(" case sonota.JISI_KBN ");
! //		buffer.append(" when 0 then TRIM('0:未実施') ");
! //		buffer.append(" when 1 then TRIM('1:実施') ");
! //		buffer.append(" when 2 then TRIM('2:測定不可能') ");
! //		buffer.append(" else TRIM('1:実施') end as JISI_KBN, ");
! //
! //		buffer.append(" master.DS_KAGEN,");
! //		buffer.append(" master.DS_JYOUGEN,");
! //		buffer.append(" master.JS_KAGEN,");
! //		buffer.append(" master.JS_JYOUGEN,");
! //		buffer.append(" master.KAGEN,");
! //		buffer.append(" master.JYOUGEN,");
! //		buffer.append(" master.DATA_TYPE,");
! //		buffer.append(" master.MAX_BYTE_LENGTH,");
! //		buffer.append(" sonota.KOMENTO,");
! //		buffer.append(" case sonota.H_L when 1 then 'L' ");
! //		buffer.append(" when 2 then 'H' ");
! //		buffer.append(" else '' end as H_L,");
! //		buffer.append(" case sonota.HANTEI ");
! //		buffer.append(" when 1 then '異常なし' ");
! //		buffer.append(" when 2 then '軽度異常' ");
! //		buffer.append(" when 3 then '要経過観察' ");
! //		buffer.append(" when 4 then '異常' ");
! //		buffer.append(" when 5 then '要精検' ");
! //		buffer.append(" else '未判定' end ");
! //		buffer.append(" as HANTEI ");
! //
! //		buffer.append(" FROM ");
! //		buffer.append(" T_KENSAKEKA_SONOTA as sonota ");
! //
! //		buffer.append(" LEFT JOIN T_KENSHINMASTER as master ");
! //		buffer.append(" ON sonota.KOUMOKU_CD = master.KOUMOKU_CD ");
! //		buffer.append(" AND ");
! //		buffer.append(" sonota.KENSA_NENGAPI = ? ");
! //		buffer.append(" AND ");
! //		buffer.append(" sonota.UKETUKE_ID = ? ");
! //		buffer.append(" LEFT JOIN T_KENSHIN_P_S ps ");
! //		buffer.append(" ON ps.KOUMOKU_CD = master.KOUMOKU_CD   ");
! //		buffer.append(" AND ps.K_P_NO = ? ");
! //		buffer.append(" WHERE master.KOUMOKU_CD NOT IN ('9N501000000000011', '9N506000000000011') ");
! //		buffer.append(" AND ");
! //		buffer.append(" master.HKNJANUM = ? ");
! //		buffer.append(" ORDER BY ps.LOW_ID ");
! //
! //		return buffer.toString();
! //	}
! //
! //
! //	// add ver2 s.inoue 2009/08/26
! //	private static String createSelectTableRecordByUketukeIDSql(){
! //		StringBuffer buffer = new StringBuffer();
! //
! //		buffer.append(" SELECT master.KOUMOKU_CD,");
! //
! //		// edit ver2 s.inoue 2009/07/23
! //		//buffer.append(" master.KOUMOKU_NAME,");
! //		buffer.append("  case when master.KOUMOKU_NAME ='生活機能問診1' then '質問1-1' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診2' then '質問1-2' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診3' then '質問1-3' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診4' then '質問4' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診5' then '質問5' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診6' then '質問6' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診7' then '質問7' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診8' then '質問8' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診9' then '質問9' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診10' then '質問10' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診11' then '質問11' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診12' then '質問12' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診13' then '質問13' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診14' then '質問14' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診15' then '質問15' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診16' then '質問16' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診17' then '質問17' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診18' then '質問18' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診19' then '質問19' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診20' then '質問20' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診21' then '質問21' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診22' then '質問22' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診23' then '質問23' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診24' then '質問24' ");
! //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診25' then '質問25' ");
! //		buffer.append("  else master.KOUMOKU_NAME end KOUMOKU_NAME, ");
! //
! //		buffer.append(" master.KENSA_HOUHOU,");
! //		buffer.append(" sonota.KEKA_TI AS KEKA_TI_DECIMAL,");
! //		buffer.append(" sonota.KEKA_TI AS KEKA_TI_CODE,");
! //		buffer.append(" sonota.KEKA_TI AS KEKA_TI_STRING,");
! //		buffer.append(" case sonota.JISI_KBN ");
! //		buffer.append(" when 0 then TRIM('0:未実施') ");
! //		buffer.append(" when 1 then TRIM('1:実施') ");
! //		buffer.append(" when 2 then TRIM('2:測定不可能') ");
! //		buffer.append(" else TRIM('1:実施') end as JISI_KBN, ");
! //		buffer.append(" master.DS_KAGEN,");
! //		buffer.append(" master.DS_JYOUGEN,");
! //		buffer.append(" master.JS_KAGEN,");
! //		buffer.append(" master.JS_JYOUGEN,");
! //		buffer.append(" master.KAGEN,");
! //		buffer.append(" master.JYOUGEN,");
! //		buffer.append(" master.DATA_TYPE,");
! //		buffer.append(" master.MAX_BYTE_LENGTH,");
! //		buffer.append(" sonota.KOMENTO,");
! //		buffer.append(" case sonota.H_L when 1 then 'L' ");
! //		buffer.append(" when 2 then 'H' ");
! //		buffer.append(" else '' end as H_L,");
! //		buffer.append(" case sonota.HANTEI ");
! //		buffer.append(" when 1 then '異常なし' ");
! //		buffer.append(" when 2 then '軽度異常' ");
! //		buffer.append(" when 3 then '要経過観察' ");
! //		buffer.append(" when 4 then '異常' ");
! //		buffer.append(" when 5 then '要精検' ");
! //		buffer.append(" else '未判定' end ");
! //		buffer.append(" as HANTEI ");
! //		buffer.append(" FROM ");
! //		buffer.append(" T_KENSAKEKA_SONOTA as sonota ");
! //		buffer.append(" LEFT JOIN T_KENSHINMASTER as master ");
! //		buffer.append(" ON sonota.KOUMOKU_CD = master.KOUMOKU_CD ");
! //		buffer.append(" AND ");
! //		buffer.append(" sonota.UKETUKE_ID = ? ");
! //		buffer.append(" LEFT JOIN T_KENSHIN_P_S ps ");
! //		buffer.append(" ON ps.KOUMOKU_CD = master.KOUMOKU_CD   ");
! //		buffer.append(" AND ps.K_P_NO = ? ");
! //		buffer.append(" WHERE master.KOUMOKU_CD NOT IN ('9N501000000000011', '9N506000000000011') ");
! //		buffer.append(" AND ");
! //		buffer.append(" master.HKNJANUM = ? ");
! //		// edit s.inoue 2009/10/28
! //		// コメント戻す ソート順が変
! //		// del ver2 s.inoue 2009/08/26
! //		buffer.append(" ORDER BY ps.LOW_ID ");
! //
! //		return buffer.toString();
! //	}
! //
! //	public JShowResultFrameDaoImpl(Connection con) {
! //		super(con);
! //	}
! //
! //	/**
! //	 * 検査項目名と健診パターン名を取得する
! //	 * @param uketukeId 受付ID
! //	 * @param kensaNengapi 検査実施年月日
! //	 * @param centerKoumokuCd 検査センター項目コード
! //	 * @return JShowResultFrameModel
! //	 */
! //	public JShowResultFrameModel selectKpNameCenterName(Long uketukeId,Integer centerKoumokuCd) throws SQLException {
! //
! //		Connection con = getConnection();
! //		if (con == null) return null;
! //
! //		PreparedStatement stmt = con.prepareStatement(SELECT_KPNAME_CENTERNAME_BY_UKETUKEID_SQL);
! //		setNumber(stmt, 1, uketukeId, BIGINT);
! //
! //		ResultSet rs = stmt.executeQuery();
! //		if (!rs.next()) return null;
! //
! //		JShowResultFrameModel recModel = null;
! //		try {
! //			recModel = setValueForRecordModel(new JShowResultFrameModel(), rs);
! //		} catch (Exception e) {
! //			throw new SQLException(e);
! //		}
! //		return recModel;
! //	}
! //	// edit ver2 s.inoue 2009/08/26
! ////	public JShowResultFrameModel selectKpNameCenterName(Long uketukeId,
! ////			Integer kensaNengapi, Integer centerKoumokuCd) throws SQLException {
! ////
! ////		Connection con = getConnection();
! ////		if (con == null) return null;
! ////
! ////		PreparedStatement stmt = con.prepareStatement(SELECT_KPNAME_CENTERNAME_SQL);
! ////		setNumber(stmt, 1, uketukeId, BIGINT);
! ////		setNumber(stmt, 2, kensaNengapi, INTEGER);
! ////
! ////		ResultSet rs = stmt.executeQuery();
! ////		if (!rs.next()) return null;
! ////
! ////		JShowResultFrameModel recModel = null;
! ////		try {
! ////			recModel = setValueForRecordModel(new JShowResultFrameModel(), rs);
! ////		} catch (Exception e) {
! ////			throw new SQLException(e);
! ////		}
! ////		return recModel;
! ////	}
! //
! //	// edit ver2 s.inoue 2009/08/26 orverload
! //	public List<Map<String, String>>selectTableRecord(Long uketukeId, String hknjanum, Integer kenshinPatternNumber)
! //	throws SQLException {
! //
! //		Connection con = getConnection();
! //		if (con == null) return null;
! //
! //		PreparedStatement stmt = con.prepareStatement(SELECT_TABLERECORD_BY_UKETUKEID_SQL);
! //
! //		int index = 1;
! //		setNumber(stmt, index++, uketukeId, BIGINT);
! //		setNumber(stmt, index++, kenshinPatternNumber, INTEGER);
! //		stmt.setString(index++, hknjanum);
! //
! //		ResultSet rs = stmt.executeQuery();
! //		ResultSetMetaData metaData = rs.getMetaData();
! //		int colCnt = metaData.getColumnCount();
! //		List<Map<String, String>> recList = new ArrayList<Map<String,String>>();
! //
! //		while (rs.next()) {
! //			Map<String, String> recMap = new HashMap<String, String>();
! //			for (int i = 1 ; i <= colCnt ; i++) {
! //				String key = metaData.getColumnName(i);
! //				String value = rs.getString(i);
! //				recMap.put(key, value);
! //			}
! //			if (!recMap.isEmpty()) recList.add(recMap);
! //		}
! //		rs.close();
! //		stmt.close();
! //		rs = null;
! //		stmt = null;
! //		return ((!recList.isEmpty()) ? recList : null);
! //	}
! //
! ////	public List<Map<String, String>>
! ////	selectTableRecord(Long uketukeId, Integer kensaNengapi, String hknjanum, Integer kenshinPatternNumber)
! ////	throws SQLException {
! ////
! ////		Connection con = getConnection();
! ////		if (con == null) return null;
! ////
! ////		PreparedStatement stmt = con.prepareStatement(SELECT_TABLERECORD_SQL);
! ////
! ////		int index = 1;
! ////		setNumber(stmt, index++, kensaNengapi, INTEGER);
! ////		setNumber(stmt, index++, uketukeId, BIGINT);
! ////		setNumber(stmt, index++, kenshinPatternNumber, INTEGER);
! ////		stmt.setString(index++, hknjanum);
! ////
! ////		ResultSet rs = stmt.executeQuery();
! ////		ResultSetMetaData metaData = rs.getMetaData();
! ////		int colCnt = metaData.getColumnCount();
! ////		List<Map<String, String>> recList = new ArrayList<Map<String,String>>();
! ////
! ////		while (rs.next()) {
! ////			Map<String, String> recMap = new HashMap<String, String>();
! ////			for (int i = 1 ; i <= colCnt ; i++) {
! ////				String key = metaData.getColumnName(i);
! ////				String value = rs.getString(i);
! ////				recMap.put(key, value);
! ////			}
! ////			if (!recMap.isEmpty()) recList.add(recMap);
! ////		}
! ////		rs.close();
! ////		stmt.close();
! ////		rs = null;
! ////		stmt = null;
! ////		return ((!recList.isEmpty()) ? recList : null);
! ////	}
! //
! //	// edit ver2 s.inoue 2009/08/26
! //	@Override
! //	public JShowResultFrameModel selectKpNameCenterName(Long uketukeId,
! //			Integer kensaNengapi, Integer centerKoumokuCd) throws SQLException {
! //		// TODO 自動生成されたメソッド・スタブ
! //		return null;
! //	}
! //
! //	@Override
! //	public List<Map<String, String>> selectTableRecord(Long uketukeId,
! //			Integer kensaNengapi, String hknjanum, Integer kenshinPatternNumber)
! //			throws SQLException {
! //		// TODO 自動生成されたメソッド・スタブ
! //		return null;
! //	}
! //}
\ No newline at end of file
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/sql/dao/impl/THokenjyaDaoImpl.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/sql/dao/impl/THokenjyaDaoImpl.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/sql/dao/impl/THokenjyaDaoImpl.java	Wed Apr 21 09:46:08 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/sql/dao/impl/THokenjyaDaoImpl.java	Wed Feb 24 17:44:44 2010
***************
*** 23,32 ****
   */
  public class THokenjyaDaoImpl extends DaoImpl implements THokenjyaDao {
  
!     private static final String DELETE_BY_HKNJYANUM_SQL = "DELETE FROM T_HOKENJYA ";
! 	private static final String DELETE_SQL = "DELETE FROM T_HOKENJYA WHERE HKNJANUM=? AND HKNJYA_HISTORY_NO=? AND ITAKU_KBN=?";
      private static final String SELECT_BY_COUNT_UNIQUEKEY_SQL = "SELECT COUNT(HKNJYA_HISTORY_NO) FROM T_HOKENJYA WHERE HKNJANUM=? AND HKNJYA_HISTORY_NO=? AND ITAKU_KBN=?";
-     private static final String SELECT_BY_COUNT_KEY_SQL = "SELECT COUNT(HKNJANUM) FROM T_HOKENJYA WHERE HKNJANUM=?";
      private static final String SELECT_NEW_HISTORY_ID_SQL = "SELECT MAX(HKNJYA_HISTORY_NO) FROM T_HOKENJYA WHERE HKNJYA_HISTORY_NO > ? AND HKNJANUM = ?";
  
      public THokenjyaDaoImpl(Connection con) {
--- 23,30 ----
   */
  public class THokenjyaDaoImpl extends DaoImpl implements THokenjyaDao {
  
!     private static final String DELETE_SQL = "DELETE FROM T_HOKENJYA WHERE HKNJANUM=? AND HKNJYA_HISTORY_NO=? AND ITAKU_KBN=?";
      private static final String SELECT_BY_COUNT_UNIQUEKEY_SQL = "SELECT COUNT(HKNJYA_HISTORY_NO) FROM T_HOKENJYA WHERE HKNJANUM=? AND HKNJYA_HISTORY_NO=? AND ITAKU_KBN=?";
      private static final String SELECT_NEW_HISTORY_ID_SQL = "SELECT MAX(HKNJYA_HISTORY_NO) FROM T_HOKENJYA WHERE HKNJYA_HISTORY_NO > ? AND HKNJANUM = ?";
  
      public THokenjyaDaoImpl(Connection con) {
***************
*** 35,56 ****
  
      /**
       * T_HOKENJYAレコード削除
-      * @param hokenjanum
-      * 保険者番号
-      */
- 	public void delete() throws SQLException {
- 		Connection con = getConnection();
- 		if (con == null)
- 		    throw new SQLException("Not connected.");
- 		PreparedStatement stmt = con.prepareStatement(DELETE_BY_HKNJYANUM_SQL);
- 		// stmt.setString(1, hknjanum);
- 		stmt.executeUpdate();
- 		stmt.close();
- 		stmt = null;
- 	}
- 
-     /**
-      * T_HOKENJYAレコード削除
       *
       * @param uketukeId,historyId
       * 保険者番号,履歴id
--- 33,38 ----
***************
*** 70,103 ****
  
  	/**
  	 * ユニークキー指定でレコード件数取得
- 	 * @param 保健者No
- 	 * @return 該当レコード
- 	 * @throws SQLException
- 	 */
- 	public int selectByCountUniqueKey(String hknjanum)
- 		throws SQLException, NoSuchMethodException,
- 				IllegalAccessException, InvocationTargetException {
- 
- 		Connection con = getConnection();
- 		if (con == null) return 0;
- 
- 		PreparedStatement stmt = con.prepareStatement(SELECT_BY_COUNT_KEY_SQL);
- 		stmt.setString(1, hknjanum);
- 		ResultSet rs = stmt.executeQuery();
- 
- 		int hokenjyaCnt = 0;
- 		if (rs.next()) {
- 			hokenjyaCnt = rs.getInt(1);
- 		}
- 		rs.close();
- 		stmt.close();
- 		rs = null;
- 		stmt = null;
- 		return hokenjyaCnt;
- 	}
- 
- 	/**
- 	 * ユニークキー指定でレコード件数取得
  	 * @param uketukeId 保健者No,履歴No
  	 * @return 該当レコード
  	 * @throws SQLException
--- 52,57 ----
***************
*** 164,168 ****
  		idValue++;
  		return idValue;
      }
- 
  }
--- 118,121 ----
Only in ./common-component/src/jp/or/med/orca/jma_tokutei/common/table: EachRowEditor.java
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/table/JComboCellEditor.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/table/JComboCellEditor.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/table/JComboCellEditor.java	Wed Apr 21 09:46:08 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/table/JComboCellEditor.java	Fri Oct 16 09:52:36 2009
***************
*** 6,32 ****
  import java .util .*;
  import javax.swing.*;
  
- import jp.or.med.orca.jma_tokutei.common.component.ExtendedComboBox;
  import jp.or.med.orca.jma_tokutei.common.component.ImeController;
  import jp.or.med.orca.jma_tokutei.common.component.ImeController.ImeMode;
  
  /**
  	class::name	JComboCellEditor
  	class::expl	テーブルカスタムエディタ
  */
  public class JComboCellEditor extends DefaultCellEditor
  {
  	private static final long serialVersionUID = 1L;
  	private DefaultComboBoxModel m_comboModel  = null;
  	private HashMap<Integer, Vector<String>> m_hashItems = null;
  	private ImeController imeController = null;
  
  	/**
  	 *  コンストラクタ
  	 *    @param  none
  	 *    @return none
  	 */
! 	public JComboCellEditor( ExtendedComboBox combo )
  	{
  		super( combo );
  
--- 6,42 ----
  import java .util .*;
  import javax.swing.*;
  
  import jp.or.med.orca.jma_tokutei.common.component.ImeController;
  import jp.or.med.orca.jma_tokutei.common.component.ImeController.ImeMode;
+ //import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame.IKekkaRegisterInputDialog;
+ //import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame.JKekkaRegisterFrameCtrl;
+ //import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame.JKekkaRegisterInputDialogFactory;
  
+ // ----------------------------------------------------------------------------
  /**
  	class::name	JComboCellEditor
+ 
  	class::expl	テーブルカスタムエディタ
  */
+ // ----------------------------------------------------------------------------
  public class JComboCellEditor extends DefaultCellEditor
  {
  	private static final long serialVersionUID = 1L;
+ 
  	private DefaultComboBoxModel m_comboModel  = null;
+ 
  	private HashMap<Integer, Vector<String>> m_hashItems = null;
+ 
  	private ImeController imeController = null;
  
  	/**
  	 *  コンストラクタ
+ 	 *
  	 *    @param  none
+ 	 *
  	 *    @return none
  	 */
! 	public JComboCellEditor( JComboBox combo )
  	{
  		super( combo );
  
***************
*** 34,40 ****
--- 44,61 ----
  		imeController = new ImeController();
  		imeController.addFocusListenerForCharcterSubsets(combo, ImeMode.IME_OFF);
  
+ //		combo.addKeyListener(new KeyAdapter(){
+ //			@Override
+ //			public void keyPressed(KeyEvent keyEvent) {
+ //
+ //				if (keyEvent.getKeyCode() == KeyEvent.VK_ENTER) {
+ //					combo.setSelectedIndex(1);
+ //				}
+ //			}
+ //		});
+ 
  		m_hashItems  = new HashMap<Integer, Vector<String>>();
+ 
  		m_comboModel = (DefaultComboBoxModel)combo.getModel();
  	}
  
***************
*** 110,117 ****
  
  		return super.getTableCellEditorComponent( table, value, isSelected, row, column );
  	}
- 
- 
  }
  
  
--- 131,136 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/table/JSimpleTable.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/table/JSimpleTable.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/table/JSimpleTable.java	Wed Apr 21 09:46:08 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/table/JSimpleTable.java	Wed Feb 24 17:44:44 2010
***************
*** 73,79 ****
  	protected Vector<JSimpleTableCellPosition>     m_vectCellEdit  = null;
  	protected Vector<JSimpleTableCellRendererData> m_vectCellColor = null;
  
! 	protected Vector<JSimpleTableCellEditorData<ExtendedCheckBox>> m_vectCheckBox = null;
  	protected Vector<JSimpleTableCellEditorData<JComboCellEditor>> m_vectComboBox = null;
  	protected Vector<JSimpleTableCellEditorData<ExtendedRadioButton>> m_vectRadioButton = null;
  
--- 73,79 ----
  	protected Vector<JSimpleTableCellPosition>     m_vectCellEdit  = null;
  	protected Vector<JSimpleTableCellRendererData> m_vectCellColor = null;
  
! 	protected Vector<JSimpleTableCellEditorData<JCheckBox>> m_vectCheckBox = null;
  	protected Vector<JSimpleTableCellEditorData<JComboCellEditor>> m_vectComboBox = null;
  	protected Vector<JSimpleTableCellEditorData<ExtendedRadioButton>> m_vectRadioButton = null;
  
***************
*** 85,96 ****
  	public Component prepareRenderer(TableCellRenderer tcr, int row, int column) {
  
  		Component c = super.prepareRenderer(tcr, row, column);
  		// edit s.inoue 2010/01/29
  	    if (c instanceof JCheckBox || c instanceof JRadioButton ||
  	    		c instanceof ExtendedCheckBox || c instanceof ExtendedRadioButton)
- 	    	return c;
- 
- 	    if (c instanceof JCheckBox || c instanceof JRadioButton)
        		return c;
  	    if(c instanceof JComponent) {
  	       JComponent l = (JComponent)c;
--- 85,97 ----
  	public Component prepareRenderer(TableCellRenderer tcr, int row, int column) {
  
  		Component c = super.prepareRenderer(tcr, row, column);
+ 		// edit s.inoue 2009/11/14
+ 		if (c == null)
+ 			return c;
+ 
  		// edit s.inoue 2010/01/29
  	    if (c instanceof JCheckBox || c instanceof JRadioButton ||
  	    		c instanceof ExtendedCheckBox || c instanceof ExtendedRadioButton)
        		return c;
  	    if(c instanceof JComponent) {
  	       JComponent l = (JComponent)c;
***************
*** 500,506 ****
  	 */
  	private void cellInitialize(){
  		// edit s.inoue 2009/12/07
! 		m_vectCheckBox  = new Vector<JSimpleTableCellEditorData<ExtendedCheckBox>>       ();
  		m_vectComboBox  = new Vector<JSimpleTableCellEditorData<JComboCellEditor>>();
  
  		// モデル設定
--- 501,507 ----
  	 */
  	private void cellInitialize(){
  		// edit s.inoue 2009/12/07
! 		m_vectCheckBox  = new Vector<JSimpleTableCellEditorData<JCheckBox>>       ();
  		m_vectComboBox  = new Vector<JSimpleTableCellEditorData<JComboCellEditor>>();
  
  		// モデル設定
***************
*** 957,963 ****
  	 *
  	 *    @return none
  	 */
! 	public void setCellCheckBoxEditor( ExtendedCheckBox checkEditor, int iColumn )
  	{
  		TableColumn column;
  
--- 958,964 ----
  	 *
  	 *    @return none
  	 */
! 	public void setCellCheckBoxEditor( JCheckBox checkEditor, int iColumn )
  	{
  		TableColumn column;
  
***************
*** 979,985 ****
  		{
  			if( iColumn == m_vectCheckBox.get(i).getColumn() )
  			{
! 				m_vectCheckBox.set( i, new JSimpleTableCellEditorData<ExtendedCheckBox>( checkEditor, iColumn ) );
  				isFound = true;
  			}
  		}
--- 980,986 ----
  		{
  			if( iColumn == m_vectCheckBox.get(i).getColumn() )
  			{
! 				m_vectCheckBox.set( i, new JSimpleTableCellEditorData<JCheckBox>( checkEditor, iColumn ) );
  				isFound = true;
  			}
  		}
***************
*** 987,993 ****
  		if( !isFound )
  		{
  			// edit s.inoue 2009/12/07
! 			m_vectCheckBox.add( new JSimpleTableCellEditorData<ExtendedCheckBox>( checkEditor, iColumn ) );
  		}
  
  		refreshTable();
--- 988,994 ----
  		if( !isFound )
  		{
  			// edit s.inoue 2009/12/07
! 			m_vectCheckBox.add( new JSimpleTableCellEditorData<JCheckBox>( checkEditor, iColumn ) );
  		}
  
  		refreshTable();
***************
*** 1023,1036 ****
  		{
  			if( iColumn == m_vectCheckBox.get(i).getColumn() )
  			{
! 				m_vectCheckBox.set( i, new JSimpleTableCellEditorData<ExtendedCheckBox>( radioEditor, iColumn ) );
  				isFound = true;
  			}
  		}
  
  		if( !isFound )
  		{
! 			m_vectCheckBox.add( new JSimpleTableCellEditorData<ExtendedCheckBox>( radioEditor, iColumn ) );
  		}
  
  		refreshTable();
--- 1024,1037 ----
  		{
  			if( iColumn == m_vectCheckBox.get(i).getColumn() )
  			{
! 				m_vectCheckBox.set( i, new JSimpleTableCellEditorData<JCheckBox>( radioEditor, iColumn ) );
  				isFound = true;
  			}
  		}
  
  		if( !isFound )
  		{
! 			m_vectCheckBox.add( new JSimpleTableCellEditorData<JCheckBox>( radioEditor, iColumn ) );
  		}
  
  		refreshTable();
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/table/JSimpleTableCellRowRenderer.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/table/JSimpleTableCellRowRenderer.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/table/JSimpleTableCellRowRenderer.java	Wed May 19 14:38:00 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/table/JSimpleTableCellRowRenderer.java	Wed Feb 24 17:44:44 2010
***************
*** 18,31 ****
  
      private static final String[] COLUMN_ARIGNMENT_CENTER = {
      "年度","生年月日","性別","入力","健診実施日","判定日","結果通知日",
!     "更新日付","必須フラグ", "H/L","更新日時","バックアップ日付","有効/無効","有効期限開始","有効期限終了","日次"};
      private static final String[] COLUMN_ARIGNMENT_RIGHT = {
      "基準値下限（男性）","基準値上限（男性）","基準値下限（女性）","基準値上限（女性）","入力下限値", "入力上限値","バックアップサイズ","履歴番号"};
      private static final String[] COLUMN_ARIGNMENT_LEFT = {
      "受診券整理番号","氏名（カナ）","氏名（漢字）","被保険者証等記号","被保険者証等番号","保険者番号","代行機関番号",
      "判定結果","保健指導レベル","総合コメント","項目番号","項目名","項目コード","検査方法","基準値範囲","単位",
      "備考","保険者名称","郵便番号","所在地","電話番号","住所","項目番号","項目名","健診パターンNo","健診パターン名称","受診者紐付けID",
!     "支払代行機関番号","支払代行機関名称","結果（コード）", "結果（文字列）" ,"実施区分", "判定", "コメント","ユーザ名","権限","所見種別","所見No","所見","委託単価区分","所見種別No"};
      private static final String[] COLUMN_ARIGNMENT_RIGHT_CUNMA = {
      "単価合計","窓口負担合計","請求金額合計","単価（円）","結果（数値）",
      "単価（基本的な健診）","単価（貧血検査）","単価（心電図検査）","単価（眼底検査）","単価（人間ドック）"};
--- 18,31 ----
  
      private static final String[] COLUMN_ARIGNMENT_CENTER = {
      "年度","生年月日","性別","入力","健診実施日","判定日","結果通知日",
!     "更新日付","必須フラグ", "H/L","更新日時","バックアップ日付","有効/無効","有効期限開始","有効期限終了"};
      private static final String[] COLUMN_ARIGNMENT_RIGHT = {
      "基準値下限（男性）","基準値上限（男性）","基準値下限（女性）","基準値上限（女性）","入力下限値", "入力上限値","バックアップサイズ","履歴番号"};
      private static final String[] COLUMN_ARIGNMENT_LEFT = {
      "受診券整理番号","氏名（カナ）","氏名（漢字）","被保険者証等記号","被保険者証等番号","保険者番号","代行機関番号",
      "判定結果","保健指導レベル","総合コメント","項目番号","項目名","項目コード","検査方法","基準値範囲","単位",
      "備考","保険者名称","郵便番号","所在地","電話番号","住所","項目番号","項目名","健診パターンNo","健診パターン名称","受診者紐付けID",
!     "支払代行機関番号","支払代行機関名称","結果（コード）", "結果（文字列）" ,"実施区分", "判定", "コメント","ユーザ名","権限","所見種別","所見No","所見","委託単価区分"};
      private static final String[] COLUMN_ARIGNMENT_RIGHT_CUNMA = {
      "単価合計","窓口負担合計","請求金額合計","単価（円）","結果（数値）",
      "単価（基本的な健診）","単価（貧血検査）","単価（心電図検査）","単価（眼底検査）","単価（人間ドック）"};
***************
*** 163,165 ****
--- 163,230 ----
          g2.translate(-x,-y);
      }
  }
+ 
+ //package jp.or.med.orca.jma_tokutei.common.table;
+ //
+ //import java.awt.*;
+ //import javax.swing.*;
+ //import javax.swing.border.*;
+ //import javax.swing.table.*;
+ //
+ //public class JSimpleTableCellRowRenderer implements TableCellRenderer {
+ //	private static final DotBorder dotBorder = new DotBorder(2,2,2,2);
+ //    private static final Border emptyBorder  = BorderFactory.createEmptyBorder(2,2,2,2);
+ //    private final DefaultTableCellRenderer delegate;
+ //    public JSimpleTableCellRowRenderer(DefaultTableCellRenderer delegate) {
+ //        this.delegate = delegate;
+ //    }
+ //    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
+ //        Component c = delegate.getTableCellRendererComponent(table,value,isSelected,hasFocus,row,column);
+ //        if(c instanceof JComponent) {
+ //            int lsi = table.getSelectionModel().getLeadSelectionIndex();
+ //            ((JComponent)c).setBorder(row==lsi?dotBorder:emptyBorder);
+ //            dotBorder.setLastCellFlag(row==lsi&&column==table.getColumnCount()-1);
+ //        }
+ //        return c;
+ //    }
+ //}
+ //
+ //class DotBorder extends EmptyBorder {
+ //    private static final BasicStroke dashed = new BasicStroke(
+ //        1.0f, BasicStroke.CAP_BUTT, BasicStroke.JOIN_MITER,
+ //        10.0f, (new float[] {1.0f}), 0.0f);
+ //    private static final Color dotColor = new Color(200,150,150);
+ //    public DotBorder(int top, int left, int bottom, int right) {
+ //        super(top, left, bottom, right);
+ //    }
+ //    private boolean isLastCell = false;
+ //    public void setLastCellFlag(boolean flag) {
+ //        isLastCell = flag;
+ //    }
+ //    @Override
+ //    public boolean isBorderOpaque() {
+ //        return true;
+ //    }
+ //    @Override
+ //    public void paintBorder(Component c, Graphics g, int x, int y, int w, int h) {
+ //        Graphics2D g2 = (Graphics2D)g;
+ //        g2.translate(x,y);
+ //        g2.setPaint(dotColor);
+ //        g2.setStroke(dashed);
+ //        int cbx = c.getBounds().x;
+ //        if(cbx==0) {
+ //            g2.drawLine(0,0,0,h);
+ //        }
+ //        if(isLastCell) {
+ //            g2.drawLine(w-1,0,w-1,h);
+ //        }
+ //        if(cbx%2==0) {
+ //            g2.drawLine(0,0,w,0);
+ //            g2.drawLine(0,h-1,w,h-1);
+ //        }else{
+ //            g2.drawLine(1,0,w,0);
+ //            g2.drawLine(1,h-1,w,h-1);
+ //        }
+ //        g2.translate(-x,-y);
+ //    }
+ //}
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/table/JSimpleTableScrollPanel.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/table/JSimpleTableScrollPanel.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/table/JSimpleTableScrollPanel.java	Wed Apr 21 09:46:08 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/table/JSimpleTableScrollPanel.java	Tue Aug 11 17:55:30 2009
***************
*** 4,11 ****
  import javax.swing.JScrollPane;
  import javax.swing.JPanel;
  
- import jp.or.med.orca.jma_tokutei.common.tree.JSimpleTree;
- 
  /**
   * スクロールするテーブルを配置したパネル
   *
--- 4,9 ----
***************
*** 37,44 ****
--- 35,45 ----
  		// 描画オブジェクト設定
  		scrollPane.setViewportView( table );
  	}
+ 
  }
  
+ 
+ 
  //Source Code Version Tag System v1.00  -- Do not remove --
  //Product-Tag: {4F85C2F4EE-5847B3BB7A9-ADC5AC59E3-EF66F79A1}
  
Only in ./common-component/src/jp/or/med/orca/jma_tokutei/common: tree
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./common-component/src/jp/or/med/orca/jma_tokutei/common/validate/JValidate.java ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/validate/JValidate.java
*** ./common-component/src/jp/or/med/orca/jma_tokutei/common/validate/JValidate.java	Wed May 19 14:38:00 2010
--- ../nittoku_src_127/common-component/src/jp/or/med/orca/jma_tokutei/common/validate/JValidate.java	Wed Feb 24 17:44:44 2010
***************
*** 1248,1266 ****
  		return ret;
  	}
  
- 	// add s.inoue 2010/03/03
- 	/*
- 	 * 委託料単価区分の検証
- 	 */
- 	public static String validateItakuKubunCode(String str)
- 	{
- 		String ret = "";
- 
- 		if( str.isEmpty() || str.equals("1") || str.equals("2") )
- 			ret = str;
- 
- 		return ret;
- 	}
  	/*
  	 * 単価判定
  	 * １(基本,詳細,追加) or ２(人間ドック) のみ
--- 1248,1253 ----
***************
*** 2253,2259 ****
  		if ( str.isEmpty() )
  			return str;
  
! 		if( str.length() > 2 )
  			return null;
  
  		if( !isNumber(str) )
--- 2240,2246 ----
  		if ( str.isEmpty() )
  			return str;
  
! 		if( str.length() > 1 )
  			return null;
  
  		if( !isNumber(str) )
***************
*** 2271,2277 ****
  		if ( str.isEmpty() )
  			return str;
  
- 		// edit s.inoue 2010/05/06
  		if( str.length() > 2 )
  			return null;
  
--- 2258,2263 ----
***************
*** 2282,2309 ****
  	}
  
  	/*
- 	 * 定型文種別内容の検証
- 	 */
- 	public static String validateTeikeibunShubetu(String str)
- 	{
- 		//空値を許可する
- 		if ( str.isEmpty() )
- 			return null;
- 		if( str.getBytes().length > 256 )
- 			return null;
- 
- 		return str;
- 	}
- 
- 	/*
  	 * 定型文内容の検証
  	 */
  	public static String validateTeikeibun(String str)
  	{
- 		// edit s.inoue 2010/03/12 null→str
  		//空値を許可する
  		if ( str.isEmpty() )
! 			return str;
  		if( str.getBytes().length > 256 )
  			return null;
  
--- 2268,2280 ----
  	}
  
  	/*
  	 * 定型文内容の検証
  	 */
  	public static String validateTeikeibun(String str)
  	{
  		//空値を許可する
  		if ( str.isEmpty() )
! 			return null;
  		if( str.getBytes().length > 256 )
  			return null;
  
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./db_adjuster/src/jp/or/med/orca/jma_tokutei/dbfix/ShcDBAdjust.java ../nittoku_src_127/db_adjuster/src/jp/or/med/orca/jma_tokutei/dbfix/ShcDBAdjust.java
*** ./db_adjuster/src/jp/or/med/orca/jma_tokutei/dbfix/ShcDBAdjust.java	Fri Jun  4 10:39:36 2010
--- ../nittoku_src_127/db_adjuster/src/jp/or/med/orca/jma_tokutei/dbfix/ShcDBAdjust.java	Fri Jan 29 14:01:49 2010
***************
*** 1,7 ****
  package jp.or.med.orca.jma_tokutei.dbfix;
  
  import java.io.*;
- import java.util.Vector;
  
  import java.awt.Container;
  import java.awt.Dimension;
--- 1,6 ----
***************
*** 24,30 ****
      public String dbUser;
      public String dbPass;
      public String dbUri;
!     String fdbFile,dataVersion,schemaVersion,zipVersion;
      int rowID;
      String[][] updateSQLs;
  
--- 23,29 ----
      public String dbUser;
      public String dbPass;
      public String dbUri;
!     String fdbFile,dataVersion,schemaVersion;
      int rowID;
      String[][] updateSQLs;
  
***************
*** 43,60 ****
        fdbFile = str+".fdb";
        dbUri = dbServer+"/"+dbPort+":"+dbPath+fdbFile;
        int stat = compareDBVersion(str);
!       if (stat>0) execUpdate(stat);
        return;
      }
  
      int compareDBVersion(String str) {
        rowID = 0;
        int rows = 0;
-       int rows1 = 0;
        int updateStatus = 0;
        dataVersion = "0.0.0";
        schemaVersion = "0.0.0";
-       zipVersion = "2010-04-01";
        DngDBAccess dbm = new DngDBAccess("firebird",dbUri,dbUser,dbPass);
        if (dbm.connect()) {
          try {
--- 42,57 ----
        fdbFile = str+".fdb";
        dbUri = dbServer+"/"+dbPort+":"+dbPath+fdbFile;
        int stat = compareDBVersion(str);
!       if (stat>0) execUpdate();
        return;
      }
  
      int compareDBVersion(String str) {
        rowID = 0;
        int rows = 0;
        int updateStatus = 0;
        dataVersion = "0.0.0";
        schemaVersion = "0.0.0";
        DngDBAccess dbm = new DngDBAccess("firebird",dbUri,dbUser,dbPass);
        if (dbm.connect()) {
          try {
***************
*** 64,70 ****
              dataVersion = dbm.getData("DB_VERSION",0).toString();
              schemaVersion = dbm.getData("SCHEMA_VERSION",0).toString();
              rowID = Integer.parseInt(dbm.getData("ROW_ID",0).toString());
!             System.out.println("version on "+str+".fdb: "+rowID+" Schema "+schemaVersion+" Data "+dataVersion);
            }
          } catch (Exception e) {
            rows = -1;
--- 61,67 ----
              dataVersion = dbm.getData("DB_VERSION",0).toString();
              schemaVersion = dbm.getData("SCHEMA_VERSION",0).toString();
              rowID = Integer.parseInt(dbm.getData("ROW_ID",0).toString());
!             System.out.println(rowID+" "+schemaVersion+" "+dataVersion);
            }
          } catch (Exception e) {
            rows = -1;
***************
*** 80,135 ****
              System.out.println("Could not create T_VERSION table..... why?. continue anyway......");
            }
          }
        }
        else {
          System.out.println("Could not connect "+dbUri);
          dataVersion = null;
          schemaVersion = null;
-         zipVersion = null;
          return 0;
        }
    
        ShcUpdateDBInfo ins = new ShcUpdateDBInfo();
!       String updateDataVersion,updateSchemaVersion,updateZipcode;
        if (str.equals("System")) {
          updateSchemaVersion = ins.getCurrentMaxVersion("schemaSystem");
          updateDataVersion = ins.getCurrentMaxVersion("dataSystem");
-         if (dataVersion.compareTo("1.2.8")>=0) {
-           dbm.execQuery("select max(LAST_TIME) from T_POST");
-           rows1 = dbm.Rows; 
-           if (rows1>0) {
-              zipVersion=(dbm.getData("MAX",0).toString()).substring(0,10);
-           }
-         }
-         updateZipcode = ins.getCurrentMaxVersion("dataZipup");
-         System.out.println("Zipcode: last modify on System = "+zipVersion + " current distribution = "+ updateZipcode);
-         if (zipVersion.compareTo(updateZipcode)<0) updateStatus = 1;
        } else {
          updateSchemaVersion = ins.getCurrentMaxVersion("schemaKikan");
          updateDataVersion = ins.getCurrentMaxVersion("dataKikan");
        }
!       dbm.Close();
!       if (dataVersion.compareTo(updateDataVersion)<0) updateStatus = 2;
!       if (schemaVersion.compareTo(updateSchemaVersion)<0) updateStatus = 2;
        if (updateStatus>0) { 
!         updateSQLs = ins.getProcessSQL(str,schemaVersion,dataVersion,zipVersion);
        }
        return updateStatus;
      }
    
!     void execUpdate(int stat) {
        boolean RESTART=false;
        JDialog fr = new JDialog();
!       fr.setTitle("ﾆｰ衄ﾃﾄｷｹｯｿﾇｺｺ･ｷ･ｹ･ﾆ･");
        Container contentPane = fr.getContentPane();
        contentPane.setLayout(new BoxLayout(contentPane, BoxLayout.PAGE_AXIS));
  
        JProgressBar pb = new JProgressBar();
!       JLabel tit;
!       if (stat==1) 
!         tit = new JLabel("･ﾇ｡ｼ･ｿ･ﾙ｡ｼ･ｹ､ｹｹｿｷ､ｷ､ﾆ､､､ﾞ､ｹ｡｣");
!       else
!         tit = new JLabel("....･ﾐ｡ｼ･ｸ･逾ﾀｰｹ遉ﾎ､ｿ､癸｢･ﾇ｡ｼ･ｿ･ﾙ｡ｼ･ｹ､ｹｹｿｷ､ｷ､ﾆ､､､ﾞ､ｹ｡｣");
        pb.setStringPainted(true);
        pb.setMinimum(0);
        pb.setMaximum(updateSQLs.length);
--- 77,117 ----
              System.out.println("Could not create T_VERSION table..... why?. continue anyway......");
            }
          }
+         dbm.Close();
        }
        else {
          System.out.println("Could not connect "+dbUri);
          dataVersion = null;
          schemaVersion = null;
          return 0;
        }
    
        ShcUpdateDBInfo ins = new ShcUpdateDBInfo();
!       String updateDataVersion,updateSchemaVersion;
        if (str.equals("System")) {
          updateSchemaVersion = ins.getCurrentMaxVersion("schemaSystem");
          updateDataVersion = ins.getCurrentMaxVersion("dataSystem");
        } else {
          updateSchemaVersion = ins.getCurrentMaxVersion("schemaKikan");
          updateDataVersion = ins.getCurrentMaxVersion("dataKikan");
        }
!       if (dataVersion.compareTo(updateDataVersion)<0) updateStatus = 1;
!       if (schemaVersion.compareTo(updateSchemaVersion)<0) updateStatus = 1;
        if (updateStatus>0) { 
!         updateSQLs = ins.getProcessSQL(str,schemaVersion,dataVersion);
        }
        return updateStatus;
      }
    
!     void execUpdate() {
        boolean RESTART=false;
        JDialog fr = new JDialog();
!       fr.setTitle("ﾆｰ衄ﾃﾄｷｹｯｸ｡ｺｺ･ｷ･ｹ･ﾆ･");
        Container contentPane = fr.getContentPane();
        contentPane.setLayout(new BoxLayout(contentPane, BoxLayout.PAGE_AXIS));
  
        JProgressBar pb = new JProgressBar();
!       JLabel tit = new JLabel("....･ﾐ｡ｼ･ｸ･逾ﾀｰｹ遉ﾎ､ｿ､癸｢･ﾇ｡ｼ･ｿ･ﾙ｡ｼ･ｹ､ｹｹｿｷ､ｷ､ﾆ､､､ﾞ､ｹ｡｣");
        pb.setStringPainted(true);
        pb.setMinimum(0);
        pb.setMaximum(updateSQLs.length);
***************
*** 137,143 ****
        pb.setValue(0);
        contentPane.add(tit);
        contentPane.add(pb);
!       fr.setSize(500,120);
        Dimension sc = Toolkit.getDefaultToolkit().getScreenSize();
        Dimension sz = fr.getSize();
        fr.setLocation((sc.width-sz.width)/2,(sc.height-sz.height)/2);
--- 119,125 ----
        pb.setValue(0);
        contentPane.add(tit);
        contentPane.add(pb);
!       fr.setSize(500,100);
        Dimension sc = Toolkit.getDefaultToolkit().getScreenSize();
        Dimension sz = fr.getSize();
        fr.setLocation((sc.width-sz.width)/2,(sc.height-sz.height)/2);
***************
*** 146,152 ****
        DngDBAccess dbm = new DngDBAccess("firebird",dbUri,dbUser,dbPass);
        String updateDataVersion = dataVersion;
        String updateSchemaVersion = schemaVersion;
-       String updateZipVersion = zipVersion;
        if (dbm.connect()) {
          for (int i=0; i<updateSQLs.length; i++) {
  
--- 128,133 ----
***************
*** 162,168 ****
            if (updateSQLs[i][0].equals("VERSION")) {
              if(updateSQLs[i][3].equals("schema")) updateSchemaVersion=updateSQLs[i][2];
              if(updateSQLs[i][3].equals("data")) updateDataVersion=updateSQLs[i][2];
-             if(updateSQLs[i][3].equals("zipcode")) updateZipVersion=updateSQLs[i][2];
              dbm.Close();
              dbm.connect();
              System.out.println("mod for "+updateSQLs[i][3]+updateSQLs[i][2]+" start");
--- 143,148 ----
***************
*** 175,249 ****
            else {
              dbm.begin();
              if (updateSQLs[i][1]!=null) dbm.execUpdate(updateSQLs[i][1]);
              try {
                BufferedReader in = new BufferedReader(new FileReader(updateSQLs[i][3])); 
                String line;
-               Vector<String> paramline = new Vector<String>();
                while ( (line = in.readLine()) != null ) {
!                 paramline.add(line);
!               }
!               in.close();
!               dbm.setPrepareStatement(updateSQLs[i][2]);
! 
!               JProgressBar pbp = new JProgressBar();
!               JLabel titp;
!               if (stat==1)
!                 titp = new JLabel("[ task "+i+" ] ﾍｹﾊﾘﾈﾖｹ貍ｭｽ､ｹｹｿｷ､ｷ､ﾆ､､､ﾞ､ｹ｡｣");
!               else if (updateSQLs[i][3].indexOf("data1282")>0) 
!                 titp = new JLabel("[ task "+i+" ] ﾍｹﾊﾘﾈﾖｹ貍ｭｽ､ｹｽﾃﾛ､ｷ､ﾆ､､､ﾞ､ｹ｡｣");
!               else
!                 titp = new JLabel("[ task "+i+" ] ･ﾇ｡ｼ･ｿ･･ｳ｡ｼ･ﾉ､ﾄﾉｲﾃ/ｺｽ/ｹｹｿｷ､ｷ､ﾆ､､､ﾞ､ｹ｡｣");
!               pbp.setStringPainted(true);
!               pbp.setMinimum(0);
!               pbp.setMaximum(paramline.size());
!               pbp.setString("0/"+String.valueOf(paramline.size()));
!               pbp.setValue(0);
!               contentPane.add(titp);
!               contentPane.add(pbp);
!               contentPane.setVisible(false);
!               contentPane.setVisible(true);
!               for (int j=0;j<paramline.size();j++) {
!                 String[] param = (paramline.get(j)).split("\",\"");
                  param[0]=param[0].replaceAll("^\"","");
                  param[param.length-1]=param[param.length-1].replaceAll("\"$","");
                  dbm.execParamUpdate(param);
-                 pbp.setValue(j+1);
-                 pbp.paintImmediately(pbp.getVisibleRect());
-                 pbp.setString(String.valueOf(j+1)+"/"+String.valueOf(paramline.size())+" (record)");
                }
                dbm.closePrepareStatement();
                dbm.commit();
-               contentPane.remove(titp);
-               contentPane.remove(pbp);
              } catch (IOException ie) {
-               System.out.println(ie);
              }
            }
            pb.setValue(i+1);
            pb.paintImmediately(pb.getVisibleRect());
!           pb.setString(String.valueOf(i+1)+"/"+String.valueOf(updateSQLs.length) + " (task)");
          }
          fr.dispose();
!         if (stat>1) {
!           if (updateDataVersion.equals("0.0.0")) updateDataVersion="1.0.0";
!           StringBuffer buf = new StringBuffer();
!           buf.append("insert into T_VERSION (ROW_ID,SCHEMA_VERSION,DB_VERSION,");
!           buf.append("UPDATE_TIMESTAMP) values (");
!           buf.append(rowID+1);
!           buf.append(",'");
!           buf.append(updateSchemaVersion);
!           buf.append("','");
!           buf.append(updateDataVersion);
!           buf.append("',CURRENT_TIME)");
!           dbm.begin();
!           dbm.execUpdate(buf.toString());
!           dbm.commit();
!           dbm.Close();
!         }
        }
        if (schemaVersion.compareTo(updateSchemaVersion)<0) System.out.println("schema version on \""+fdbFile+"\" modified "+schemaVersion+" => "+updateSchemaVersion);
        if (dataVersion.compareTo(updateDataVersion)<0) System.out.println("data version on \""+fdbFile+"\"  modified "+dataVersion+" => "+updateDataVersion);
-       if (zipVersion.compareTo(updateZipVersion)<0) System.out.println("Zipcode  on \""+fdbFile+"\"  modified "+zipVersion+" => "+updateZipVersion);
        if (RESTART) {
           JOptionPane.showMessageDialog(
             null, "ｹｹｿｷﾈｿｱﾇ､ﾎ､ｿ､皃ﾋ･｢･ﾗ･･ｱ｡ｼ･ｷ･逾､ﾎｺﾆｵｯﾆｰ､ｬﾉｬﾍﾗ､ﾊDBｹｹｿｷ､ｹﾔ､､､ﾞ､ｷ､ｿ｡｣\nｰﾃｶ｡ﾖﾆｰ衄ﾃﾄｷｹｯｿﾇｺｺ･ｷ･ｹ･ﾆ･爍ﾗ､ｽｪﾎｻ､ｷ､ﾞ､ｹ｡｣\n｡ﾖOK｡ﾗ､ｲ｡ｲｼｸ蝪｢ｺﾆﾅﾙ｡｢ｵｯﾆｰ､ｷ､ﾆ､ｯ､ﾀ､ｵ､､｡｣", "ﾆｰ蟾ｹｯｿﾇｺｺ･ｷ･ｹ･ﾆ･潺Bｹｹｿｷ",
--- 155,198 ----
            else {
              dbm.begin();
              if (updateSQLs[i][1]!=null) dbm.execUpdate(updateSQLs[i][1]);
+             dbm.setPrepareStatement(updateSQLs[i][2]);
              try {
                BufferedReader in = new BufferedReader(new FileReader(updateSQLs[i][3])); 
                String line;
                while ( (line = in.readLine()) != null ) {
!                 String[] param = line.split("\",\"");
                  param[0]=param[0].replaceAll("^\"","");
                  param[param.length-1]=param[param.length-1].replaceAll("\"$","");
                  dbm.execParamUpdate(param);
                }
+               in.close();
                dbm.closePrepareStatement();
                dbm.commit();
              } catch (IOException ie) {
              }
            }
            pb.setValue(i+1);
            pb.paintImmediately(pb.getVisibleRect());
!           pb.setString(String.valueOf(i+1)+"/"+String.valueOf(updateSQLs.length));
          }
          fr.dispose();
!         if (updateDataVersion.equals("0.0.0")) updateDataVersion="1.0.0";
!         StringBuffer buf = new StringBuffer();
!         buf.append("insert into T_VERSION (ROW_ID,SCHEMA_VERSION,DB_VERSION,");
!         buf.append("UPDATE_TIMESTAMP) values (");
!         buf.append(rowID+1);
!         buf.append(",'");
!         buf.append(updateSchemaVersion);
!         buf.append("','");
!         buf.append(updateDataVersion);
!         buf.append("',CURRENT_TIME)");
!         dbm.begin();
!         dbm.execUpdate(buf.toString());
!         dbm.commit();
!         dbm.Close();
        }
        if (schemaVersion.compareTo(updateSchemaVersion)<0) System.out.println("schema version on \""+fdbFile+"\" modified "+schemaVersion+" => "+updateSchemaVersion);
        if (dataVersion.compareTo(updateDataVersion)<0) System.out.println("data version on \""+fdbFile+"\"  modified "+dataVersion+" => "+updateDataVersion);
        if (RESTART) {
           JOptionPane.showMessageDialog(
             null, "ｹｹｿｷﾈｿｱﾇ､ﾎ､ｿ､皃ﾋ･｢･ﾗ･･ｱ｡ｼ･ｷ･逾､ﾎｺﾆｵｯﾆｰ､ｬﾉｬﾍﾗ､ﾊDBｹｹｿｷ､ｹﾔ､､､ﾞ､ｷ､ｿ｡｣\nｰﾃｶ｡ﾖﾆｰ衄ﾃﾄｷｹｯｿﾇｺｺ･ｷ･ｹ･ﾆ･爍ﾗ､ｽｪﾎｻ､ｷ､ﾞ､ｹ｡｣\n｡ﾖOK｡ﾗ､ｲ｡ｲｼｸ蝪｢ｺﾆﾅﾙ｡｢ｵｯﾆｰ､ｷ､ﾆ､ｯ､ﾀ､ｵ､､｡｣", "ﾆｰ蟾ｹｯｿﾇｺｺ･ｷ･ｹ･ﾆ･潺Bｹｹｿｷ",
Only in ./db_adjuster/src/jp/or/med/orca/jma_tokutei/dbfix: ShcDBAdjust.java.orig
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./db_adjuster/src/jp/or/med/orca/jma_tokutei/dbfix/ShcUpdateDBInfo.java ../nittoku_src_127/db_adjuster/src/jp/or/med/orca/jma_tokutei/dbfix/ShcUpdateDBInfo.java
*** ./db_adjuster/src/jp/or/med/orca/jma_tokutei/dbfix/ShcUpdateDBInfo.java	Fri Jun  4 10:39:36 2010
--- ../nittoku_src_127/db_adjuster/src/jp/or/med/orca/jma_tokutei/dbfix/ShcUpdateDBInfo.java	Fri Jan 29 10:40:45 2010
***************
*** 17,33 ****
      int maxDataSystemVersionID = -1;
      int maxSchemaKikanVersionID = -1;
      int maxDataKikanVersionID = -1;
-     int maxDataZipVersionID = -1;
      String maxSchemaSystemVersion = null;
      String maxDataSystemVersion = null;
      String maxSchemaKikanVersion = null;
      String maxDataKikanVersion = null;
-     String maxDataZipVersion = null;
      Vector<String> schemaSystemVersion = new Vector<String>();
      Vector<String> dataSystemVersion = new Vector<String>();
      Vector<String> schemaKikanVersion = new Vector<String>();
      Vector<String> dataKikanVersion = new Vector<String>();
-     Vector<String> dataZipVersion = new Vector<String>();
  
      DngAppProperty Props;
  
--- 17,30 ----
***************
*** 41,54 ****
          if (str.equals("dataSystem")) ver = maxDataSystemVersion;
          if (str.equals("schemaKikan")) ver = maxSchemaKikanVersion;
          if (str.equals("dataKikan")) ver = maxDataKikanVersion;
-         if (str.equals("dataZipup")) ver = maxDataZipVersion;
        return ver;
      }
    
!     public String[][] getProcessSQL(String str,String schemaver,String dataver,String zipver) {
        Vector<Hashtable> task1= new Vector<Hashtable>();
        Vector<Hashtable> task2= new Vector<Hashtable>();
-       Vector<Hashtable> task3= new Vector<Hashtable>();
        int total = 0;
        if (str.equals("System")) {
          for (int i=0; i<schemaSystemVersion.size(); i++) {
--- 38,49 ----
          if (str.equals("dataSystem")) ver = maxDataSystemVersion;
          if (str.equals("schemaKikan")) ver = maxSchemaKikanVersion;
          if (str.equals("dataKikan")) ver = maxDataKikanVersion;
        return ver;
      }
    
!     public String[][] getProcessSQL(String str,String schemaver,String dataver) {
        Vector<Hashtable> task1= new Vector<Hashtable>();
        Vector<Hashtable> task2= new Vector<Hashtable>();
        int total = 0;
        if (str.equals("System")) {
          for (int i=0; i<schemaSystemVersion.size(); i++) {
***************
*** 67,80 ****
              break;
            }
          }
-         for (int i=0; i<dataZipVersion.size(); i++) {
-           String procVersion = dataZipVersion.get(i); 
-           if (zipver.compareTo(procVersion)<0) {
-             task3 = getDataZipTask(i);
-             total += task3.size();
-             break;
-           }
-         }
        } else {
          for (int i=0; i<schemaKikanVersion.size(); i++) {
            String procVersion = schemaKikanVersion.get(i); 
--- 62,67 ----
***************
*** 95,105 ****
        }
        int t1count = (task1.equals(null)) ? 0: task1.size();
        int t2count = (task2.equals(null)) ? 0: task2.size();
-       int t3count = (task3.equals(null)) ? 0: task3.size();
  
        String[][] sqls = new String[total][4];
        for (int i=0; i<total; i++) {
!         Hashtable hash = (i<t1count) ? task1.get(i) : ( (i<t1count+t2count) ? task2.get(i-t1count) : task3.get(i-t2count-t1count) );
          //System.out.println(hash);
          if (hash.containsKey("pre_query")) {
            String preQuery = hash.get("pre_query").toString();
--- 82,91 ----
        }
        int t1count = (task1.equals(null)) ? 0: task1.size();
        int t2count = (task2.equals(null)) ? 0: task2.size();
  
        String[][] sqls = new String[total][4];
        for (int i=0; i<total; i++) {
!         Hashtable hash = (i<t1count) ? task1.get(i) : task2.get(i-t1count);
          //System.out.println(hash);
          if (hash.containsKey("pre_query")) {
            String preQuery = hash.get("pre_query").toString();
***************
*** 202,225 ****
        return task;
      }
  
-     Vector<Hashtable> getDataZipTask(int init) {
-       int total=0;
-       Vector<Hashtable> task = new Vector<Hashtable>();
-       for (int i=init; i<dataZipVersion.size(); i++) {
-         String ver = dataZipVersion.get(i);
-         Hashtable hash = Props.getHash("root/data/data_zipcode_version_"+ver);
-         total += hash.size();
-         Hashtable<String,String> hash1 = new Hashtable<String,String>();
-         hash1.put("VER","zipcode_"+ver);
-         task.add(hash1);
-         for (int j=0; j<hash.size(); j++) {
-           String key = "task"+ ((j>0) ? (new Integer(j)).toString() : "");
-           task.add((Hashtable)hash.get(key));
-         }
-       }
-       return task;
-     }
- 
      public void init() {
        Props = new DngAppProperty("work/version/update.xml");
        Hashtable hash = Props.getHash("root/data");
--- 188,193 ----
***************
*** 235,253 ****
          Matcher m2 = Pattern.compile("^(data_system_version)_(.+)$").matcher(ver[j]);
          Matcher m3 = Pattern.compile("^(schema_kikan_version)_(.+)$").matcher(ver[j]);
          Matcher m4 = Pattern.compile("^(data_kikan_version)_(.+)$").matcher(ver[j]);
-         Matcher m5 = Pattern.compile("^(data_zipcode_version)_(.+)$").matcher(ver[j]);
          String val = null;
          if (m1.find()) schemaSystemVersion.add(m1.group(2));
          else if (m2.find()) dataSystemVersion.add(m2.group(2));
          else if (m3.find()) schemaKikanVersion.add(m3.group(2));
          else if (m4.find()) dataKikanVersion.add(m4.group(2));
-         else if (m5.find()) dataZipVersion.add(m5.group(2));
        }
        maxSchemaSystemVersionID =  schemaSystemVersion.size()-1;
        maxDataSystemVersionID =  dataSystemVersion.size()-1;
        maxSchemaKikanVersionID =  schemaKikanVersion.size()-1;
        maxDataKikanVersionID =  dataKikanVersion.size()-1;
-       maxDataZipVersionID =  dataZipVersion.size()-1;
  
        maxSchemaSystemVersion=schemaSystemVersion.get(maxSchemaSystemVersionID);
        if (maxDataSystemVersionID>=0)
--- 203,218 ----
***************
*** 255,263 ****
        else maxDataSystemVersion = "0.0.0";
        maxSchemaKikanVersion = schemaKikanVersion.get(maxSchemaKikanVersionID);
        maxDataKikanVersion = dataKikanVersion.get(maxDataKikanVersionID);
-       if (maxDataZipVersionID>=0)
-         maxDataZipVersion = dataZipVersion.get(maxDataZipVersionID);
-       else maxDataZipVersion = "2010-04-01";
      }
  
      public static void main(String[] args) {
--- 220,225 ----
***************
*** 267,273 ****
        System.out.println("schema_kikan : "+ins.getCurrentMaxVersion("schemaKikan"));
        System.out.println("data_kikan : "+ins.getCurrentMaxVersion("dataKikan"));
    
!       String[][] sql = ins.getProcessSQL(args[0],args[1],args[2],args[3]);
        for (int i=0; i<sql.length; i++ ) {
          System.out.println("type: "+sql[i][0]);
          System.out.println("    pre: "+sql[i][1]);
--- 229,235 ----
        System.out.println("schema_kikan : "+ins.getCurrentMaxVersion("schemaKikan"));
        System.out.println("data_kikan : "+ins.getCurrentMaxVersion("dataKikan"));
    
!       String[][] sql = ins.getProcessSQL(args[0],args[1],args[2]);
        for (int i=0; i<sql.length; i++ ) {
          System.out.println("type: "+sql[i][0]);
          System.out.println("    pre: "+sql[i][1]);
Only in ./db_adjuster/src/jp/or/med/orca/jma_tokutei/dbfix: ShcUpdateDBInfo.java.orig
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/JSoftware.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/JSoftware.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/JSoftware.java	Fri Dec 18 17:07:24 2009
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/JSoftware.java	Tue Aug 11 17:55:30 2009
***************
*** 13,22 ****
  import jp.or.med.orca.jma_tokutei.common.frame.ProgressWindow;
  import jp.or.med.orca.jma_tokutei.common.scene.JScene;
  import jp.or.med.orca.jma_tokutei.common.sql.JConnection;
- import jp.or.med.orca.jma_tokutei.common.util.PropertyUtil;
  import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame.JLoginFrameCtrl;
  import jp.or.med.orca.jma_tokutei.common.app.JApplication;
- import jp.or.med.orca.jma_tokutei.common.component.SettingDialog;
  
  /**
   * 特定健診ソフトウエア
--- 13,20 ----
***************
*** 108,128 ****
  			System.exit(1);
  		}
  
- 		// add s.inoue 2009/12/18
- 		String lookAndFeel = getAppSettings();
- 		if (!lookAndFeel.equals("")){
- 			SettingDialog sd = new SettingDialog();
- 			sd.changeTheLookAndFeel(lookAndFeel);
- 		}
- 
  		JScene.ChangeScene(new JLoginFrameCtrl());
  	}
  
- 	// add s.inoue 2009/12/18
- 	private static String getAppSettings(){
- 		return PropertyUtil.getProperty( "setting.lookAndFeel");
- 	}
- 
  	public static void loadVersions(boolean flgReload){
  
  		// edit s.inoue 20090113
--- 106,114 ----
Only in ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/dataimport: JImportMasterErrorHokenjyaResultFrameData.java
Only in ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/dataimport: JImportMasterErrorKenshinPatternResultFrameData.java
Only in ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/dataimport: JImportMasterErrorKenshinResultFrameData.java
Only in ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/dataimport: JImportMasterErrorResultFrameCtrl.java
Only in ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/dataimport: JImportMasterErrorSiharaiResultFrameData.java
Only in ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/dataimport: JImportMasterErrorTeikeiResultFrameData.java
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/dataimport/JSelectKojinFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/dataimport/JSelectKojinFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/dataimport/JSelectKojinFrame.java	Thu Apr 22 14:32:08 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/dataimport/JSelectKojinFrame.java	Thu Oct 15 10:01:28 2009
***************
*** 4,9 ****
--- 4,10 ----
  import javax.swing.JDialog;
  import javax.swing.JFrame;
  import javax.swing.JPanel;
+ import javax.swing.JButton;
  import java.awt.GridLayout;
  import java.awt.FlowLayout;
  import javax.swing.SwingConstants;
***************
*** 15,32 ****
  import java.awt.Color;
  import java.awt.GridBagConstraints;
  import java.awt.event.*;
- 
  import javax.swing.BorderFactory;
  import java.awt.GridBagLayout;
- 
- import jp.or.med.orca.jma_tokutei.common.component.ExtendedButton;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  
! public class JSelectKojinFrame extends JDialog implements ActionListener,KeyListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
  	protected JPanel jPanel_ButtonArea = null;
  	protected JPanel jPanel_NaviArea = null;
  	protected JLabel jLabel_Title = null;
  	protected JLabel jLabel_MainExpl = null;
--- 16,31 ----
  import java.awt.Color;
  import java.awt.GridBagConstraints;
  import java.awt.event.*;
  import javax.swing.BorderFactory;
  import java.awt.GridBagLayout;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  
! public class JSelectKojinFrame extends JDialog implements ActionListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
  	protected JPanel jPanel_ButtonArea = null;
+ 	protected JButton jButton_End = null;
  	protected JPanel jPanel_NaviArea = null;
  	protected JLabel jLabel_Title = null;
  	protected JLabel jLabel_MainExpl = null;
***************
*** 36,43 ****
  	protected JPanel jPanel_ExplArea1 = null;
  	protected JPanel jPanel_MainArea = null;
  	protected JPanel jPanel_Table = null;
! 	protected ExtendedButton jButton_End = null;
! 	protected ExtendedButton jButton_Select = null;
  
  	/**
  	 * This is the default constructor
--- 35,41 ----
  	protected JPanel jPanel_ExplArea1 = null;
  	protected JPanel jPanel_MainArea = null;
  	protected JPanel jPanel_Table = null;
! 	protected JButton jButton_Select = null;
  
  	/**
  	 * This is the default constructor
***************
*** 123,136 ****
  	 *
  	 * @return javax.swing.JButton
  	 */
! 	private ExtendedButton getJButton_End() {
  		if (jButton_End == null) {
! 			jButton_End = new ExtendedButton();
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
- 			jButton_End.addKeyListener(this);
  		}
  		return jButton_End;
  	}
--- 121,136 ----
  	 *
  	 * @return javax.swing.JButton
  	 */
! 	private JButton getJButton_End() {
  		if (jButton_End == null) {
! 			jButton_End = new JButton();
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
+ 			//jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setPreferredSize(new Dimension(75, 25));
! 			jButton_End.setText("閉じる");
! 			//jButton_End.setPreferredSize(new Dimension(95, 25));
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
  	}
***************
*** 262,290 ****
  	 *
  	 * @return javax.swing.JButton
  	 */
! 	private ExtendedButton getJButton_Select() {
  		if (jButton_Select == null) {
! 			jButton_Select = new ExtendedButton();
! 			jButton_Select.setText("選択(F12)");
  			jButton_Select.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Select.addActionListener(this);
- 			jButton_Select.addKeyListener(this);
  		}
  		return jButton_Select;
  	}
- 	@Override
- 	public void keyPressed(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 	@Override
- 	public void keyReleased(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 	@Override
- 	public void keyTyped(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
  }
--- 262,276 ----
  	 *
  	 * @return javax.swing.JButton
  	 */
! 	private JButton getJButton_Select() {
  		if (jButton_Select == null) {
! 			jButton_Select = new JButton();
! 			jButton_Select.setText("選択");
! 			//jButton_Select.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Select.setFont(new Font("Dialog", Font.PLAIN, 12));
+ 			jButton_Select.setPreferredSize(new Dimension(75, 25));
  			jButton_Select.addActionListener(this);
  		}
  		return jButton_Select;
  	}
  }
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/dataimport/JSelectKojinFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/dataimport/JSelectKojinFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/dataimport/JSelectKojinFrameCtrl.java	Fri Apr  9 12:17:20 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/dataimport/JSelectKojinFrameCtrl.java	Mon Apr 26 11:18:16 2010
***************
*** 2,10 ****
  
  import javax.swing.JFrame;
  
- import com.sun.corba.se.impl.orbutil.closure.Constant;
- 
- import java.awt.Component;
  import java.awt.event.*;
  import java.util.Vector;
  
--- 2,7 ----
***************
*** 15,24 ****
  import javax.swing.table.DefaultTableCellRenderer;
  import javax.swing.table.TableColumnModel;
  
- import org.apache.log4j.Logger;
- 
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellRowRenderer;
- import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame.JHokenjyaMasterMaintenanceEditFrameCtrl;
  
  /**
   * 検査結果データ取り込み時に、受診者が複数見つかったときに選択させるためのフレーム。
--- 12,18 ----
***************
*** 29,35 ****
  	private Vector<JSelectKojinFrameData> KojinData;
  	private JSelectKojinFrameData SelectedData = null;  //  @jve:decl-index=0:
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
- 	private static org.apache.log4j.Logger logger =	Logger.getLogger(JSelectKojinFrameCtrl.class);
  
  	public JSelectKojinFrameCtrl(Vector<JSelectKojinFrameData> Data,JFrame ParentFrame,String flameTitle)
  	{
--- 23,28 ----
***************
*** 65,72 ****
  		this.focusTraversalPolicy.addComponent(this.model);
  		this.focusTraversalPolicy.addComponent(this.jButton_Select);
  		this.focusTraversalPolicy.addComponent(this.jButton_End);
! 		// add s.inoue 2010/01/15
! 		functionListner();
  		for(int i = 0 ; i < Data.size() ; i++)
  		{
  			JSelectKojinFrameData SelectKojinFrameData = Data.get(i);
--- 58,64 ----
  		this.focusTraversalPolicy.addComponent(this.model);
  		this.focusTraversalPolicy.addComponent(this.jButton_Select);
  		this.focusTraversalPolicy.addComponent(this.jButton_End);
! 
  		for(int i = 0 ; i < Data.size() ; i++)
  		{
  			JSelectKojinFrameData SelectKojinFrameData = Data.get(i);
***************
*** 96,107 ****
  		jButton_Select.addKeyListener(new jp.or.med.orca.jma_tokutei.common.event.JEnterEvent(this));
  		model.addKeyListener(new jp.or.med.orca.jma_tokutei.common.event.JEnterEvent(this,jButton_Select));
  
  		// ダブルクリックの処理
  		model.addMouseListener(new jp.or.med.orca.jma_tokutei.common.event.JSingleDoubleClickEvent(this,jButton_Select));
  
  		// add ver2 s.inoue 2009/05/08
  		TableColumnModel columns = model.getColumnModel();
!         for(int i=0;i<columns.getColumnCount();i++) {
  
              columns.getColumn(i).setCellRenderer(new JSimpleTableCellRowRenderer(
                  (DefaultTableCellRenderer)model.getDefaultRenderer(model.getColumnClass(i))));
--- 88,101 ----
  		jButton_Select.addKeyListener(new jp.or.med.orca.jma_tokutei.common.event.JEnterEvent(this));
  		model.addKeyListener(new jp.or.med.orca.jma_tokutei.common.event.JEnterEvent(this,jButton_Select));
  
+ 		// edit inoue
+ 		// model.addMouseListener(new jp.or.med.orca.jma_tokutei.common.event.JDoubleClickEvent(this,jButton_Select));
  		// ダブルクリックの処理
  		model.addMouseListener(new jp.or.med.orca.jma_tokutei.common.event.JSingleDoubleClickEvent(this,jButton_Select));
  
  		// add ver2 s.inoue 2009/05/08
  		TableColumnModel columns = model.getColumnModel();
!         for(int i=1;i<columns.getColumnCount();i++) {
  
              columns.getColumn(i).setCellRenderer(new JSimpleTableCellRowRenderer(
                  (DefaultTableCellRenderer)model.getDefaultRenderer(model.getColumnClass(i))));
***************
*** 117,129 ****
  		setVisible(true);
  	}
  
- 	// add s.inoue 2010/01/15
- 	private void functionListner(){
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			Component comp = focusTraversalPolicy.getComponent(i);
- 			comp.addKeyListener(this);
- 		}
- 	}
  	/**
  	 * 終了ボタン
  	 */
--- 111,116 ----
***************
*** 159,188 ****
  	{
  		if( e.getSource() == jButton_End )
  		{
- 			logger.info(jButton_End.getText());
  			pushedEndButton( e );
  		}
  
  		if( e.getSource() == jButton_Select )
  		{
- 			logger.info(jButton_Select.getText());
  			pushedSelectButton( e );
  		}
  	}
- 
- 	// edit s.inoue 2010/01/15
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 		switch(keyEvent.getKeyCode()){
- 		case KeyEvent.VK_F1:
- 			logger.info(jButton_End.getText());
- 			pushedEndButton(null);break;
- 		case KeyEvent.VK_F12:
- 			logger.info(jButton_Select.getText());
- 			pushedSelectButton(null);break;
- 		}
- 	}
- 
  }
  
  
--- 146,159 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JHokenjyaMasterMaintenanceEditFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JHokenjyaMasterMaintenanceEditFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JHokenjyaMasterMaintenanceEditFrame.java	Wed Apr 21 15:41:46 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JHokenjyaMasterMaintenanceEditFrame.java	Wed Feb 24 17:45:24 2010
***************
*** 206,212 ****
  		/* --------------------------------------------------- */
  		this.setContentPane(getJPanel_Content());
  		this.setTitle(ViewSettings.getTokuteFrameTitleWithKikanInfomation());
! 		this.setSize(ViewSettings.getFrameCommonSize());
  		this.setLocationRelativeTo( null );
  		this.setVisible(true);
  		/* --------------------------------------------------- */
--- 206,212 ----
  		/* --------------------------------------------------- */
  		this.setContentPane(getJPanel_Content());
  		this.setTitle(ViewSettings.getTokuteFrameTitleWithKikanInfomation());
! 		this.setSize(new Dimension(1155, 600));
  		this.setLocationRelativeTo( null );
  		this.setVisible(true);
  		/* --------------------------------------------------- */
***************
*** 214,219 ****
--- 214,220 ----
  		/* Added 2008/07/16 若月  */
  		/* --------------------------------------------------- */
  		this.addKeyListener(this);
+ 		/* --------------------------------------------------- */
  	}
  
  	/**
***************
*** 283,289 ****
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_End.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
  			// edit h.yoshitama 2009/11/27
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
--- 284,290 ----
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_End.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
  			// edit h.yoshitama 2009/11/27
! 			jButton_End.setText("戻る");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
***************
*** 755,761 ****
  		if (jTextField_Zipcode == null) {
  			jTextField_Zipcode = new ExtendedTextField("", 7, ImeMode.IME_OFF);
  			jTextField_Zipcode.setPreferredSize(new Dimension(100, 20));
- 			jTextField_Zipcode.addFocusListener(this);
  		}
  		return jTextField_Zipcode;
  	}
--- 756,761 ----
***************
*** 968,977 ****
  	private ExtendedButton getJButton_ORCA() {
  		if (jButton_ORCA == null) {
  			jButton_ORCA = new ExtendedButton();
! 			jButton_ORCA.setText("日レセ読込(N)");
  			jButton_ORCA.addActionListener(this);
- 			// edit s.inoue 2010/04/21
- 			jButton_ORCA.setMnemonic(KeyEvent.VK_N);
  		}
  		return jButton_ORCA;
  	}
--- 968,975 ----
  	private ExtendedButton getJButton_ORCA() {
  		if (jButton_ORCA == null) {
  			jButton_ORCA = new ExtendedButton();
! 			jButton_ORCA.setText("日レセ読込");
  			jButton_ORCA.addActionListener(this);
  		}
  		return jButton_ORCA;
  	}
***************
*** 984,990 ****
  	private ExtendedButton getJButton_Register() {
  		if (jButton_Register == null) {
  			jButton_Register = new ExtendedButton();
! 			jButton_Register.setText("登録(F11)");
  			jButton_Register.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Register.addActionListener(this);
  		}
--- 982,988 ----
  	private ExtendedButton getJButton_Register() {
  		if (jButton_Register == null) {
  			jButton_Register = new ExtendedButton();
! 			jButton_Register.setText("登録");
  			jButton_Register.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Register.addActionListener(this);
  		}
***************
*** 1000,1006 ****
  	private ExtendedButton getJButton_RegisterAdd() {
  		if (jButton_RegisterAdd == null) {
  			jButton_RegisterAdd = new ExtendedButton();
! 			jButton_RegisterAdd.setText("登録(F12)");
  			jButton_RegisterAdd.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_RegisterAdd.addActionListener(this);
  		}
--- 998,1004 ----
  	private ExtendedButton getJButton_RegisterAdd() {
  		if (jButton_RegisterAdd == null) {
  			jButton_RegisterAdd = new ExtendedButton();
! 			jButton_RegisterAdd.setText("登録");
  			jButton_RegisterAdd.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_RegisterAdd.addActionListener(this);
  		}
***************
*** 1016,1022 ****
  	private ExtendedButton getJButton_Add() {
  		if (jButton_Add == null) {
  			jButton_Add = new ExtendedButton();
! 			jButton_Add.setText("クリア(F7)");
  			jButton_Add.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Add.addActionListener(this);
  		}
--- 1014,1020 ----
  	private ExtendedButton getJButton_Add() {
  		if (jButton_Add == null) {
  			jButton_Add = new ExtendedButton();
! 			jButton_Add.setText("クリア");
  			jButton_Add.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Add.addActionListener(this);
  		}
***************
*** 1031,1040 ****
  	private ExtendedButton getJButton_RegisterYukouKigenEdit() {
  		if (jButton_RegisterYukoukigenEdit == null) {
  			jButton_RegisterYukoukigenEdit = new ExtendedButton();
! 			jButton_RegisterYukoukigenEdit.setText("登録(F12)");
  			jButton_RegisterYukoukigenEdit.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_RegisterYukoukigenEdit.addActionListener(this);
- 
  			// del s.inoue 2010/01/12
  			// jButton_RegisterYukoukigenEdit.setPreferredSize(new Dimension(130, 25));
  		}
--- 1029,1037 ----
  	private ExtendedButton getJButton_RegisterYukouKigenEdit() {
  		if (jButton_RegisterYukoukigenEdit == null) {
  			jButton_RegisterYukoukigenEdit = new ExtendedButton();
! 			jButton_RegisterYukoukigenEdit.setText("登録");
  			jButton_RegisterYukoukigenEdit.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_RegisterYukoukigenEdit.addActionListener(this);
  			// del s.inoue 2010/01/12
  			// jButton_RegisterYukoukigenEdit.setPreferredSize(new Dimension(130, 25));
  		}
***************
*** 1050,1056 ****
  	private ExtendedButton getJButton_RegisterYukouKigenDelete() {
  		if (jButton_RegisterYukoukigenDelete == null) {
  			jButton_RegisterYukoukigenDelete = new ExtendedButton();
! 			jButton_RegisterYukoukigenDelete.setText("削除(F9)");
  			jButton_RegisterYukoukigenDelete.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_RegisterYukoukigenDelete.addActionListener(this);
  		}
--- 1047,1053 ----
  	private ExtendedButton getJButton_RegisterYukouKigenDelete() {
  		if (jButton_RegisterYukoukigenDelete == null) {
  			jButton_RegisterYukoukigenDelete = new ExtendedButton();
! 			jButton_RegisterYukoukigenDelete.setText("削除");
  			jButton_RegisterYukoukigenDelete.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_RegisterYukoukigenDelete.addActionListener(this);
  		}
***************
*** 1431,1437 ****
  			gridBagConstraints1.insets = new Insets(0, 0, 5, 5);
  
  			jLabel_TankaTitle = new ExtendedLabel(Font.BOLD);
! 			jLabel_TankaTitle.setText("単価履歴情報");
  
  			jPanel13 = new JPanel();
  			jPanel13.setLayout(new GridBagLayout());
--- 1428,1434 ----
  			gridBagConstraints1.insets = new Insets(0, 0, 5, 5);
  
  			jLabel_TankaTitle = new ExtendedLabel(Font.BOLD);
! 			jLabel_TankaTitle.setText("契約情報（単価履歴）");
  
  			jPanel13 = new JPanel();
  			jPanel13.setLayout(new GridBagLayout());
***************
*** 1701,1714 ****
  			GridBagConstraints gridBagConstraints84 = new GridBagConstraints();
  			gridBagConstraints84.anchor = GridBagConstraints.WEST;
  			gridBagConstraints84.gridy = 6;
! 			// edit s.inoue 2010/02/02
  			gridBagConstraints84.gridx = 8;
  			gridBagConstraints84.insets = new Insets(0,5,0,0);
  
  			GridBagConstraints gridBagConstraints85 = new GridBagConstraints();
  			gridBagConstraints85.anchor = GridBagConstraints.WEST;
  			gridBagConstraints85.gridy = 6;
! 			// edit s.inoue 2010/02/02
  			gridBagConstraints85.gridx = 7;
  			gridBagConstraints85.insets = new Insets(0,5,0,0);
  
--- 1698,1711 ----
  			GridBagConstraints gridBagConstraints84 = new GridBagConstraints();
  			gridBagConstraints84.anchor = GridBagConstraints.WEST;
  			gridBagConstraints84.gridy = 6;
! 			// edit s.inoue 2010/02/01
  			gridBagConstraints84.gridx = 8;
  			gridBagConstraints84.insets = new Insets(0,5,0,0);
  
  			GridBagConstraints gridBagConstraints85 = new GridBagConstraints();
  			gridBagConstraints85.anchor = GridBagConstraints.WEST;
  			gridBagConstraints85.gridy = 6;
! 			// edit s.inoue 2010/02/01
  			gridBagConstraints85.gridx = 7;
  			gridBagConstraints85.insets = new Insets(0,5,0,0);
  
***************
*** 2173,2179 ****
  		if (jButton_Clear == null) {
  			jButton_Clear = new ExtendedButton();
  			jButton_Clear.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_Clear.setText("クリア(F2)");
  			jButton_Clear.addActionListener(this);
  		}
  		return jButton_Clear;
--- 2170,2176 ----
  		if (jButton_Clear == null) {
  			jButton_Clear = new ExtendedButton();
  			jButton_Clear.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_Clear.setText("クリア");
  			jButton_Clear.addActionListener(this);
  		}
  		return jButton_Clear;
***************
*** 2189,2195 ****
  		if (jButton_ClearAdd == null) {
  			jButton_ClearAdd = new ExtendedButton();
  			jButton_ClearAdd.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_ClearAdd.setText("クリア(F2)");
  			jButton_ClearAdd.addActionListener(this);
  		}
  		return jButton_ClearAdd;
--- 2186,2192 ----
  		if (jButton_ClearAdd == null) {
  			jButton_ClearAdd = new ExtendedButton();
  			jButton_ClearAdd.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_ClearAdd.setText("クリア");
  			jButton_ClearAdd.addActionListener(this);
  		}
  		return jButton_ClearAdd;
***************
*** 2209,4276 ****
  		// TODO 自動生成されたメソッド・スタブ
  
  	}
! }
! 
! //package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
! //
! //import java.awt.BorderLayout;
! //
! //import javax.swing.BoxLayout;
! //import javax.swing.ButtonGroup;
! //import javax.swing.JPanel;
! //import javax.swing.JFrame;
! //import javax.swing.JRadioButton;
! //
! //import java.awt.Dimension;
! //import java.awt.GridBagLayout;
! //import java.awt.GridLayout;
! //import java.awt.FlowLayout;
! //import javax.swing.SwingConstants;
! //import java.awt.CardLayout;
! //import java.awt.GridBagConstraints;
! //import java.awt.Font;
! //import java.awt.Color;
! //import java.awt.Rectangle;
! //import java.awt.event.ActionEvent;
! //import java.awt.event.ActionListener;
! //import java.awt.event.FocusEvent;
! //import java.awt.event.FocusListener;
! //import java.awt.event.ItemEvent;
! //import java.awt.event.ItemListener;
! //import java.awt.event.KeyEvent;
! //import java.awt.event.KeyListener;
! //import java.awt.Cursor;
! //
! //import jp.or.med.orca.jma_tokutei.common.component.ExtendedButton;
! //import jp.or.med.orca.jma_tokutei.common.component.ExtendedComboBox;
! //import jp.or.med.orca.jma_tokutei.common.component.ExtendedLabel;
! //import jp.or.med.orca.jma_tokutei.common.component.ExtendedRadioButton;
! //import jp.or.med.orca.jma_tokutei.common.component.ExtendedTextField;
! //import jp.or.med.orca.jma_tokutei.common.component.TitleLabel;
! //import jp.or.med.orca.jma_tokutei.common.component.ImeController.ImeMode;
! //import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
! //import jp.or.med.orca.jma_tokutei.common.frame.ViewSettingsKey;
! //
! //import javax.swing.BorderFactory;
! //import java.awt.Insets;
! //import javax.swing.JTextField;
! //
! ////import org.eclipse.swt.widgets.IME;
! //
! ///**
! // * 保険者マスタメンテナンス画面
! // */
! //public class JHokenjyaMasterMaintenanceEditFrame
! //extends JFrame
! //implements ActionListener,KeyListener,FocusListener,ItemListener {
! //
! //	protected static final long serialVersionUID = 1L;
! //	protected JPanel jPanel_Content = null;
! //	protected JPanel jPanel_ButtonArea = null;
! //	protected ExtendedButton jButton_End = null;
! //	protected JPanel jPanel_NaviArea = null;
! //	protected ExtendedLabel jLabel_Title = null;
! //	protected ExtendedLabel jLabel_MainExpl = null;
! //	protected JPanel jPanel_TitleArea = null;
! //	protected JPanel jPanel_ExplArea2 = null;
! //	protected ExtendedLabel jLabal_SubExpl = null;
! //	protected JPanel jPanel_ExplArea1 = null;
! //	protected JPanel jPanel_MainArea = null;
! //	protected JPanel jPanel_DrawArea = null;
! //	protected JPanel jPanel_TableArea = null;
! //	protected JPanel jPanel_HokenjyaNumber2_1 = null;
! //	protected JPanel jPanel_HokenjyaNumber2_2 = null;
! //	protected JPanel jPanel_HokenjyaNumber2_3 = null;
! //	protected ExtendedLabel jLabel1 = null;
! //	protected ExtendedTextField jTextField_HokenjyaNumber = null;
! //	protected ExtendedTextField jTextField_HokenjyaName = null;
! //	protected ExtendedTextField jTextField_Zipcode = null;
! //	protected ExtendedTextField jTextField_Address = null;
! //	protected ExtendedTextField jTextField_Chiban = null;
! //	protected ExtendedTextField jTextField_TEL = null;
! //	protected ExtendedTextField jTextField_Kigo = null;
! //	protected ExtendedTextField jTextField_HonninGairai = null;
! //	protected ExtendedTextField jTextField_KazokuGairai = null;
! //	protected ExtendedTextField jTextField_HonninNyuin = null;
! //	protected ExtendedTextField jTextField_KazokuNyuin = null;
! //	protected ExtendedTextField jTextField_KihonTanka = null;
! //	protected ExtendedTextField jTextField_HinketsuTanka = null;
! //	protected ExtendedTextField jTextField_SindenzuTanka = null;
! //	protected ExtendedTextField jTextField_GanteiTanka = null;
! //	protected ExtendedTextField jTextField_NingenDocTanka = null;
! //	protected ExtendedButton jButton_ORCA = null;
! //	protected ExtendedButton jButton_Register = null;
! //	// add s.inoue 2010/01/22
! //	protected ExtendedButton jButton_RegisterAdd = null;
! //	protected ExtendedButton jButton_Add = null;
! //	protected ExtendedButton jButton_RegisterYukoukigen = null;
! //	protected ExtendedButton jButton_RegisterYukoukigenEdit = null;
! //	protected ExtendedButton jButton_RegisterYukoukigenDelete = null;
! //	protected ExtendedComboBox jComboBox_ItakuKubun = null;
! //	protected ExtendedTextField jTextField_HinketuCode = null;
! //	protected ExtendedTextField jTextField_SindenzuCode = null;
! //	protected ExtendedTextField jTextField_GanteiCode = null;
! //	protected ExtendedTextField jTextField_NingenDocCode = null;
! //	protected ExtendedLabel jLabel = null;
! //	protected ExtendedLabel jLabel11 = null;
! //	protected ExtendedLabel jLabel13 = null;
! //	protected ExtendedLabel jLabel14 = null;
! //	protected ExtendedLabel jLabel15 = null;
! //	protected ExtendedLabel jLabel16 = null;
! //	protected ExtendedLabel jLabel17 = null;
! //	protected ExtendedLabel jLabel18 = null;
! //	protected ExtendedLabel jLabel19 = null;
! //	protected ExtendedLabel jLabel110 = null;
! //	protected ExtendedLabel jLabel111 = null;
! //	protected ExtendedLabel jLabel112 = null;
! //	protected ExtendedLabel jLabel113 = null;
! //	protected ExtendedLabel jLabel114 = null;
! //	protected ExtendedLabel jLabel115 = null;
! //	protected ExtendedLabel jLabel116 = null;
! //	protected ExtendedLabel jLabel117 = null;
! //	protected ExtendedLabel jLabel118 = null;
! //	protected ExtendedLabel jLabel119 = null;
! //	protected ExtendedLabel jLabel120 = null;
! //	protected ExtendedLabel jLabel121 = null;
! //	protected ExtendedLabel jLabel122 = null;
! //	protected ExtendedLabel jLabel123 = null;
! //	protected ExtendedLabel jLabel124 = null;
! //	protected ExtendedLabel jLabel130 = null;
! //
! //	protected ExtendedButton jButton_Cancel = null;
! //	protected ExtendedLabel jLabel1231 = null;
! //	protected ExtendedLabel jLabel1232 = null;
! //	protected JPanel jPanel1 = null;
! //	protected ExtendedLabel jLabel12 = null;
! //	protected JPanel jPanel2 = null;
! //	protected JPanel jPanel3 = null;
! //	protected JPanel jPanel4 = null;
! //	protected ExtendedLabel jLabel125 = null;
! //	protected ExtendedLabel jLabel126 = null;
! //	protected ExtendedLabel jLabel127 = null;
! //	protected ExtendedLabel jLabel128 = null;
! //	protected JPanel jPanel5 = null;
! //	protected JPanel jPanel6 = null;
! //	protected JPanel jPanel7 = null;
! //	protected JPanel jPanel8 = null;
! //	protected JPanel jPanel9 = null;
! //	protected JPanel jPanel10 = null;
! //	// edit s.inoue 2010/01/06
! //	protected JPanel jPanel11 = null;
! //	protected JPanel jPanelHidden = null;
! //	// add s.inoue 2009/10/01
! //	protected JPanel jPanelKihon = null;
! //	protected JPanel jPanelDoc = null;
! //	protected ButtonGroup groupHantei = new ButtonGroup();  //  @jve:decl-index=0:
! //	protected ExtendedRadioButton jRadioButton_Kihon = null;
! //	protected ExtendedRadioButton jRadioButton_Doc = null;
! //	protected ExtendedTextField jTextField_TankaHantei = null;
! //
! //	protected ExtendedButton jButton_Clear = null;
! //	// add s.inoue 2010/01/22
! //	protected ExtendedButton jButton_ClearAdd = null;
! //	private ExtendedLabel jLabelHokenjyaNum = null;
! //	private ExtendedLabel jLabelHokenjyaNameNum = null;
! //	private ExtendedLabel jLabelYubinNum = null;
! //	private ExtendedLabel jLabelShozaitiNum = null;
! //	private ExtendedLabel jLabelTibanNum = null;
! //	private ExtendedLabel jLabelTelNum = null;
! //	private ExtendedLabel jLabelKigouNum = null;
! //	private ExtendedLabel jLabelKihonNum = null;
! //	private ExtendedLabel jLabelHinketuNum = null;
! //	private ExtendedLabel jLabelSindenzuNum = null;
! //	private ExtendedLabel jLabelGanteiNum = null;
! //	private ExtendedLabel jLabelNingenDocNum = null;
! //	// add s.inoue 2010/01/06
! //	private ExtendedLabel jLabelYukoukigen = null;
! //	private ExtendedLabel jLabelTilda = null;
! //	protected ExtendedTextField jTextField_YukoukigenFrom = null;
! //	protected ExtendedTextField jTextField_YukoukigenTo = null;
! //
! //	/**
! //	 * This is the default constructor
! //	 */
! //	public JHokenjyaMasterMaintenanceEditFrame() {
! //		super();
! //		initialize();
! //	}
! //
! //	/**
! //	 * This method initializes this
! //	 *
! //	 * @return void
! //	 */
! //	private void initialize() {
! //		/* Modified 2008/03/13 若月  */
! //		/* --------------------------------------------------- */
! ////		this.setSize(800, 600);
! ////		this.setContentPane(getJPanel_Content());
! ////		this.setTitle("特定健診システム");
! ////		setLocationRelativeTo( null );
! ////		this.setVisible(true);
! //		/* --------------------------------------------------- */
! //		this.setContentPane(getJPanel_Content());
! //		this.setTitle(ViewSettings.getTokuteFrameTitleWithKikanInfomation());
! //		this.setSize(ViewSettings.getFrameCommonSize());
! //		this.setLocationRelativeTo( null );
! //		this.setVisible(true);
! //		/* --------------------------------------------------- */
! //
! //		/* Added 2008/07/16 若月  */
! //		/* --------------------------------------------------- */
! //		this.addKeyListener(this);
! //		/* --------------------------------------------------- */
! //	}
! //
! //	/**
! //	 * This method initializes jPanel_Content
! //	 *
! //	 * @return javax.swing.JPanel
! //	 */
! //	protected JPanel getJPanel_Content() {
! //		if (jPanel_Content == null) {
! //			BorderLayout borderLayout = new BorderLayout();
! //			borderLayout.setVgap(2);
! //			jPanel_Content = new JPanel();
! //			jPanel_Content.setLayout(borderLayout);
! //			jPanel_Content.add(getJPanel_ButtonArea(), BorderLayout.SOUTH);
! //			jPanel_Content.add(getJPanel_NaviArea(), BorderLayout.NORTH);
! //			jPanel_Content.add(getJPanel_MainArea(), BorderLayout.CENTER);
! //		}
! //		return jPanel_Content;
! //	}
! //
! //	/**
! //	 * This method initializes jPanel_ButtonArea
! //	 *
! //	 * @return javax.swing.JPanel
! //	 */
! //	private JPanel getJPanel_ButtonArea() {
! //		if (jPanel_ButtonArea == null) {
! //			GridBagConstraints gridBagConstraints57 = new GridBagConstraints();
! //			gridBagConstraints57.gridx = 1;
! //			gridBagConstraints57.insets = new Insets(0, 5, 0, 0);
! //			gridBagConstraints57.gridy = 0;
! //			GridBagConstraints gridBagConstraints56 = new GridBagConstraints();
! //			gridBagConstraints56.gridy = 0;
! //			gridBagConstraints56.gridx = 0;
! //			GridBagConstraints gridBagConstraints55 = new GridBagConstraints();
! //			gridBagConstraints55.gridy = 0;
! //			gridBagConstraints55.gridx = 2;
! //			GridBagConstraints gridBagConstraints54 = new GridBagConstraints();
! //			gridBagConstraints54.gridy = 0;
! //			gridBagConstraints54.anchor = GridBagConstraints.EAST;
! //			gridBagConstraints54.weightx = 1.0D;
! //			gridBagConstraints54.gridx = 2;
! //			jPanel_ButtonArea = new JPanel();
! //			jPanel_ButtonArea.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
! //			jPanel_ButtonArea.setLayout(new GridBagLayout());
! //			// edit s.inoue 2010/01/22
! //			jPanel_ButtonArea.add(getJButton_RegisterAdd(), gridBagConstraints54);
! //			jPanel_ButtonArea.add(getJPanel1(), gridBagConstraints54);
! //
! //			jPanel_ButtonArea.add(getJButton_End(), gridBagConstraints56);
! //			// edit s.inoue 2010/01/22
! //			jPanel_ButtonArea.add(getJButton_ClearAdd(), gridBagConstraints57);
! //		}
! //		return jPanel_ButtonArea;
! //	}
! //
! //	/**
! //	 * This method initializes jButton_End
! //	 *
! //	 * @return javax.swing.ExtendedButton
! //	 */
! //	private ExtendedButton getJButton_End() {
! //		if (jButton_End == null) {
! //			jButton_End = new ExtendedButton();
! //			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
! //			jButton_End.setActionCommand("終了");
! //			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jButton_End.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
! //			// edit h.yoshitama 2009/11/27
! //			jButton_End.setText("戻る(F1)");
! //			jButton_End.addActionListener(this);
! //		}
! //		return jButton_End;
! //	}
! //
! //	/**
! //	 * This method initializes jPanel_NaviArea
! //	 *
! //	 * @return javax.swing.JPanel
! //	 */
! //	private JPanel getJPanel_NaviArea() {
! //		if (jPanel_NaviArea == null) {
! //			CardLayout cardLayout2 = new CardLayout();
! //			cardLayout2.setHgap(10);
! //			cardLayout2.setVgap(10);
! //			jLabel_MainExpl = new ExtendedLabel();
! //			jLabel_MainExpl.setText("保険者番号を入力後、Enterキーを押して保険者情報を作成します。");
! //			jLabel_MainExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
! //			jLabel_MainExpl.setName("jLabel1");
! //			// edit ver2 s.inoue 2009/06/04
! ////			jLabel_Title = new ExtendedLabel();
! ////			jLabel_Title.setText("保険者情報編集");
! ////			jLabel_Title.setFont(new Font("Dialog", Font.PLAIN, 18));
! ////			jLabel_Title.setBackground(new Color(153, 204, 255));
! ////			jLabel_Title.setForeground(new Color(51, 51, 51));
! ////			jLabel_Title.setOpaque(true);
! ////			jLabel_Title.setName("jLabel");
! //			jLabel_Title = new TitleLabel(ViewSettingsKey.KEY_TOKUTEI_HOKENJA_MASTERMAINTENANCE_EDIT_FRAME_TITLE);
! //
! //			jPanel_NaviArea = new JPanel();
! //			jPanel_NaviArea.setLayout(cardLayout2);
! //			jPanel_NaviArea.add(getJPanel_TitleArea(), getJPanel_TitleArea().getName());
! //		}
! //		return jPanel_NaviArea;
! //	}
! //
! //	/**
! //	 * This method initializes jPanel_TitleArea
! //	 *
! //	 * @return javax.swing.JPanel
! //	 */
! //	private JPanel getJPanel_TitleArea() {
! //		if (jPanel_TitleArea == null) {
! //			GridLayout gridLayout = new GridLayout();
! //			gridLayout.setRows(2);
! //			gridLayout.setHgap(0);
! //			gridLayout.setColumns(0);
! //			gridLayout.setVgap(10);
! //			jPanel_TitleArea = new JPanel();
! //			jPanel_TitleArea.setLayout(gridLayout);
! //			jPanel_TitleArea.setName("jPanel2");
! //			jPanel_TitleArea.add(jLabel_Title, null);
! //			jPanel_TitleArea.add(getJPanel_ExplArea2(), null);
! //		}
! //		return jPanel_TitleArea;
! //	}
! //
! //	/**
! //	 * This method initializes jPanel_ExplArea2
! //	 *
! //	 * @return javax.swing.JPanel
! //	 */
! //	private JPanel getJPanel_ExplArea2() {
! //		if (jPanel_ExplArea2 == null) {
! //			GridBagConstraints gridBagConstraints60 = new GridBagConstraints();
! //			gridBagConstraints60.gridx = 0;
! //			gridBagConstraints60.weightx = 1.0D;
! //			gridBagConstraints60.fill = GridBagConstraints.HORIZONTAL;
! //			gridBagConstraints60.insets = new Insets(0, 10, 0, 0);
! //			gridBagConstraints60.gridy = 1;
! //			GridBagConstraints gridBagConstraints59 = new GridBagConstraints();
! //			gridBagConstraints59.gridx = 0;
! //			gridBagConstraints59.fill = GridBagConstraints.HORIZONTAL;
! //			gridBagConstraints59.weightx = 1.0D;
! //			gridBagConstraints59.insets = new Insets(0, 10, 0, 0);
! //			gridBagConstraints59.gridy = 0;
! //			jLabal_SubExpl = new ExtendedLabel();
! //			jLabal_SubExpl.setText("各項目を入力後、「登録」ボタンを押して入力内容を登録します。");
! //			jLabal_SubExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
! ////			gridLayout1.setRows(2);
! //			jPanel_ExplArea2 = new JPanel();
! //			jPanel_ExplArea2.setName("jPanel4");
! //			jPanel_ExplArea2.setLayout(new GridBagLayout());
! //			jPanel_ExplArea2.add(jLabel_MainExpl, gridBagConstraints59);
! //			jPanel_ExplArea2.add(jLabal_SubExpl, gridBagConstraints60);
! //		}
! //		return jPanel_ExplArea2;
! //	}
! //
! ////	/**
! ////	 * This method initializes jPanel_ExplArea1
! ////	 *
! ////	 * @return javax.swing.JPanel
! ////	 */
! ////	private JPanel getJPanel_ExplArea1() {
! ////		if (jPanel_ExplArea1 == null) {
! ////			jPanel_ExplArea1 = new JPanel();
! ////			jPanel_ExplArea1.setLayout(new GridBagLayout());
! ////		}
! ////		return jPanel_ExplArea1;
! ////	}
! //
! //	/**
! //	 * This method initializes jPanel_MainArea
! //	 *
! //	 * @return javax.swing.JPanel
! //	 */
! //	private JPanel getJPanel_MainArea() {
! //		if (jPanel_MainArea == null) {
! //			jPanel_MainArea = new JPanel();
! //			BorderLayout borderLayout = new BorderLayout();
! //			// edit s.inoue 2010/01/21 2→1
! //			borderLayout.setHgap(1);
! //
! //			jPanel_MainArea.setLayout(borderLayout);
! //			jPanel_MainArea.add(getJPanel_DrawArea(), BorderLayout.NORTH);
! //			// edit s.inoue 2010/01/21
! //			// jPanel_MainArea.add(getJPanel_TableArea(), BorderLayout.NORTH);
! //		}
! //		return jPanel_MainArea;
! //	}
! //
! //	/**
! //	 * This method initializes jPanel_TableArea
! //	 *
! //	 * @return javax.swing.JPanel
! //	 */
! //	private JPanel getJPanel_TableArea() {
! //		if (jPanel_TableArea == null) {
! //			GridBagConstraints gridBagConstraints410 = new GridBagConstraints();
! //			gridBagConstraints410.gridx = 0;
! //			gridBagConstraints410.gridy = 0;
! //			gridBagConstraints410.fill = GridBagConstraints.HORIZONTAL;
! //
! //			// edit s.inoue 2010/01/21
! ////			GridBagConstraints gridBagConstraints411 = new GridBagConstraints();
! ////			gridBagConstraints411.gridx = 3;
! ////			gridBagConstraints411.gridy =0;
! ////			gridBagConstraints411.fill = GridBagConstraints.HORIZONTAL;
! //
! //			jPanel_TableArea = new JPanel();
! //			jPanel_TableArea.setLayout(new GridBagLayout());
! //			// del s.inoue 2010/01/21
! ////			jPanel_TableArea.setName("jPanel_TableArea");
! ////			jPanel_TableArea.setBorder(BorderFactory.createCompoundBorder(BorderFactory.createLineBorder(Color.gray, 1), BorderFactory.createEmptyBorder(5, 5, 5, 5)));
! ////			jPanel_TableArea.setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 0));
! ////			jPanel_TableArea.add(getJPanel11(),gridBagConstraints410);
! //
! //			// edit s.inoue 2010/01/21
! ////			jPanel_TableArea.add(getJButton_RegisterYukouKigenDelete(),gridBagConstraints411);
! ////			jPanel_TableArea.setLayout(new GridBagLayout());
! //		}
! //		return jPanel_TableArea;
! //	}
! //
! //	/**
! //	 * This method initializes jPanel_DrawArea
! //	 *
! //	 * @return javax.swing.JPanel
! //	 */
! //	private JPanel getJPanel_DrawArea() {
! //		if (jPanel_DrawArea == null) {
! ////			GridBagConstraints gridBagConstraints510 = new GridBagConstraints();
! ////			gridBagConstraints510.gridx = 2;
! ////			gridBagConstraints510.weightx = 1.0D;
! ////			gridBagConstraints510.gridy = 0;
! //			GridBagConstraints gridBagConstraints410 = new GridBagConstraints();
! //			gridBagConstraints410.gridx = 2;
! //			gridBagConstraints410.weightx = 1.0D;
! //			gridBagConstraints410.gridy = 0;
! //
! //			GridBagConstraints gridBagConstraints110 = new GridBagConstraints();
! //			gridBagConstraints110.fill = GridBagConstraints.BOTH;
! //			gridBagConstraints110.insets = new Insets(10, 0, 0, 0);
! //			gridBagConstraints110.gridx = 0;
! //			// edit s.inoue 2010/01/21 1→2
! //			gridBagConstraints110.gridy = 2;
! //
! //			// add s.inoue 2010/01/21
! //			GridBagConstraints gridBagConstraints111 = new GridBagConstraints();
! //			gridBagConstraints111.fill = GridBagConstraints.BOTH;
! //			gridBagConstraints111.insets = new Insets(10, 0, 0, 0);
! //			gridBagConstraints111.gridx = 0;
! //			gridBagConstraints111.gridy = 1;
! //
! ////			GridBagConstraints gridBagConstraints210 = new GridBagConstraints();
! ////			gridBagConstraints210.fill = GridBagConstraints.BOTH;
! ////			gridBagConstraints210.insets = new Insets(10, 0, 0, 0);
! ////			gridBagConstraints210.gridx = 0;
! ////			gridBagConstraints210.gridy = 2;
! //
! //			GridBagConstraints gridBagConstraints310 = new GridBagConstraints();
! //			gridBagConstraints310.fill = GridBagConstraints.BOTH;
! //			gridBagConstraints310.gridx = 0;
! //			gridBagConstraints310.gridy = 0;
! //
! //			GridBagConstraints gridBagConstraints18 = new GridBagConstraints();
! //			gridBagConstraints18.gridx = 1;
! //			gridBagConstraints18.fill = GridBagConstraints.HORIZONTAL;
! //			gridBagConstraints18.anchor = GridBagConstraints.NORTHWEST;
! //			gridBagConstraints18.insets = new Insets(0, 10, 0, 0);
! //			gridBagConstraints18.gridy = 0;
! ////			GridBagConstraints gridBagConstraints82 = new GridBagConstraints();
! ////			gridBagConstraints82.gridx = 1;
! ////			gridBagConstraints82.fill = GridBagConstraints.BOTH;
! ////			gridBagConstraints82.gridy = 9;
! ////			GridBagConstraints gridBagConstraints71 = new GridBagConstraints();
! ////			gridBagConstraints71.gridx = 1;
! ////			gridBagConstraints71.fill = GridBagConstraints.BOTH;
! ////			gridBagConstraints71.gridy = 18;
! ////			GridBagConstraints gridBagConstraints51 = new GridBagConstraints();
! ////			gridBagConstraints51.gridx = 1;
! ////			gridBagConstraints51.fill = GridBagConstraints.BOTH;
! ////			gridBagConstraints51.gridy = 17;
! ////			GridBagConstraints gridBagConstraints49 = new GridBagConstraints();
! ////			gridBagConstraints49.gridx = 1;
! ////			gridBagConstraints49.fill = GridBagConstraints.BOTH;
! ////			gridBagConstraints49.gridy = 16;
! ////			GridBagConstraints gridBagConstraints3 = new GridBagConstraints();
! ////			gridBagConstraints3.gridx = 1;
! ////			gridBagConstraints3.fill = GridBagConstraints.BOTH;
! ////			gridBagConstraints3.gridy = 14;
! //			jLabel1232 = new ExtendedLabel();
! //			jLabel1232.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel1232.setText("\uff05");
! //			jLabel1231 = new ExtendedLabel();
! //			jLabel1231.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel1231.setText("\uff05");
! //			jLabel124 = new ExtendedLabel();
! //			jLabel124.setText("％");
! //			jLabel124.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel123 = new ExtendedLabel();
! //			jLabel123.setText("％");
! //			jLabel123.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel122 = new ExtendedLabel();
! //			jLabel122.setText("（1：個別健診 2：集団健診）");
! //			jLabel122.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel122.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
! //			GridBagConstraints gridBagConstraints41 = new GridBagConstraints();
! //			gridBagConstraints41.gridx = 2;
! //			gridBagConstraints41.anchor = GridBagConstraints.EAST;
! //
! //			GridBagConstraints gridBagConstraints40 = new GridBagConstraints();
! //			gridBagConstraints40.gridx = 2;
! //			gridBagConstraints40.anchor = GridBagConstraints.EAST;
! //
! ////			GridBagConstraints gridBagConstraints38 = new GridBagConstraints();
! ////			gridBagConstraints38.gridx = 2;
! ////			gridBagConstraints38.anchor = GridBagConstraints.EAST;
! //			GridBagConstraints gridBagConstraints39 = new GridBagConstraints();
! //			gridBagConstraints39.gridx = 2;
! //			gridBagConstraints39.anchor = GridBagConstraints.EAST;
! ////			jLabel119 = new ExtendedLabel();
! ////			jLabel119.setText("単価（眼底検査）");
! ////			jLabel119.setFont(new Font("Dialog", Font.PLAIN, 12));
! ////			jLabel118 = new ExtendedLabel();
! ////			jLabel118.setText("単価（心電図検査）");
! ////			jLabel118.setFont(new Font("Dialog", Font.PLAIN, 12));
! ////			jLabel117 = new ExtendedLabel();
! ////			jLabel117.setText("単価（貧血検査）");
! ////			jLabel117.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel114 = new ExtendedLabel();
! //			jLabel114.setText("眼底検査コード");
! //			jLabel114.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel114.setVisible(false);
! //			jLabel113 = new ExtendedLabel();
! //			jLabel113.setText("心電図検査コード");
! //			jLabel113.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel113.setVisible(false);
! //			jLabel112 = new ExtendedLabel();
! //			jLabel112.setText("貧血検査コード");
! //			jLabel112.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel112.setVisible(false);
! //			jLabel111 = new ExtendedLabel();
! //			jLabel111.setText("単価（基本的な健診）");
! //			jLabel111.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel110 = new ExtendedLabel();
! //			jLabel110.setText("委託料単価区分");
! //			jLabel110.setFont(new Font("Dialog", Font.PLAIN, 12));
! ////			jLabel19 = new ExtendedLabel();
! ////			jLabel19.setText("記号");
! ////			jLabel19.setFont(new Font("Dialog", Font.PLAIN, 12));
! ////			jLabel19.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
! ////			jLabel19.setVisible(true);
! ////			jLabel18 = new ExtendedLabel();
! ////			jLabel18.setText("電話番号");
! ////			jLabel18.setFont(new Font("Dialog", Font.PLAIN, 12));
! ////			jLabel17 = new ExtendedLabel();
! ////			jLabel17.setText("地番方書");
! ////			jLabel17.setFont(new Font("Dialog", Font.PLAIN, 12));
! ////			jLabel16 = new ExtendedLabel();
! ////			jLabel16.setText("所在地");
! ////			jLabel16.setFont(new Font("Dialog", Font.PLAIN, 12));
! ////			jLabel15 = new ExtendedLabel();
! ////			jLabel15.setText("郵便番号");
! ////			jLabel15.setFont(new Font("Dialog", Font.PLAIN, 12));
! ////			jLabel14 = new ExtendedLabel();
! ////			jLabel14.setText("保険者名称");
! ////			jLabel14.setFont(new Font("Dialog", Font.PLAIN, 12));
! ////			jLabel13 = new ExtendedLabel();
! ////			jLabel13.setText("保険者番号");
! ////			jLabel13.setFont(new Font("Dialog", Font.PLAIN, 12));
! ////			jLabel130 = new ExtendedLabel();
! ////			jLabel130.setText("単価（人間ドック）");
! ////			jLabel130.setFont(new Font("Dialog", Font.PLAIN, 12));
! //
! //			jLabel121 = new ExtendedLabel();
! //			jLabel121.setText("給付割合（家族・外来）");
! //			jLabel121.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel120 = new ExtendedLabel();
! //			jLabel120.setText("給付割合（本人・入院）");
! //			jLabel120.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel116 = new ExtendedLabel();
! //			jLabel116.setText("給付割合（家族・外来）");
! //			jLabel116.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel115 = new ExtendedLabel();
! //			jLabel115.setText("給付割合（本人・外来）");
! //			jLabel115.setFont(new Font("Dialog", Font.PLAIN, 12));
! //
! //			GridBagConstraints gridBagConstraints = new GridBagConstraints();
! //			gridBagConstraints.gridx = 1;
! //			jLabel = new ExtendedLabel();
! //			jLabel.setText(" ");
! //
! //			GridBagConstraints gridBagConstraints26 = new GridBagConstraints();
! //			gridBagConstraints26.fill = GridBagConstraints.HORIZONTAL;
! //			gridBagConstraints26.gridx = 3;
! //			gridBagConstraints26.weightx = 1.0;
! //
! //			GridBagConstraints gridBagConstraints25 = new GridBagConstraints();
! //			gridBagConstraints25.fill = GridBagConstraints.HORIZONTAL;
! //			gridBagConstraints25.gridx = 3;
! //			gridBagConstraints25.weightx = 1.0;
! //
! //			GridBagConstraints gridBagConstraints24 = new GridBagConstraints();
! //			gridBagConstraints24.fill = GridBagConstraints.HORIZONTAL;
! //			gridBagConstraints24.gridx = 3;
! //			gridBagConstraints24.weightx = 1.0;
! //
! //			GridBagConstraints gridBagConstraints23 = new GridBagConstraints();
! //			gridBagConstraints23.fill = GridBagConstraints.HORIZONTAL;
! //			gridBagConstraints23.gridx = 3;
! //			gridBagConstraints23.weightx = 1.0;
! //			jPanel_DrawArea = new JPanel();
! //			jPanel_DrawArea.setLayout(new GridBagLayout());
! //			jPanel_DrawArea.setName("jPanel_DrawArea");
! //			jPanel_DrawArea.setBorder(BorderFactory.createEmptyBorder(0, 10, 0, 10));
! //			// del s.inoue 2010/01/07
! ////			jPanel_DrawArea.setPreferredSize(new Dimension(420, 430));
! ////			jPanel_DrawArea.add(jLabel112, gridBagConstraints38);
! //			jPanel_DrawArea.add(getJTextField_HinketuCode(), gridBagConstraints23);
! ////			jPanel_DrawArea.add(jLabel113, gridBagConstraints39);
! //			jPanel_DrawArea.add(getJTextField_SindenzuCode(), gridBagConstraints24);
! //			jPanel_DrawArea.add(jLabel114, gridBagConstraints40);
! //			jPanel_DrawArea.add(getJTextField_GanteiCode(), gridBagConstraints25);
! //			jPanel_DrawArea.add(jLabel, gridBagConstraints);
! //			jPanel_DrawArea.add(getJTextField_NingenDocCode(), gridBagConstraints26);
! //
! ////			jPanel_DrawArea.add(getJPanel1(), gridBagConstraints3);
! ////			jPanel_DrawArea.add(getJPanel2(), gridBagConstraints49);
! ////			jPanel_DrawArea.add(getJPanel3(), gridBagConstraints51);
! ////			jPanel_DrawArea.add(getJPanel4(), gridBagConstraints71);
! ////			jPanel_DrawArea.add(getJPanel5(), gridBagConstraints82);
! //			jPanel_DrawArea.add(getJPanel6(), gridBagConstraints18);
! ////			jPanel_DrawArea.add(getJPanel10(), gridBagConstraints510);
! //			// edit s.inoue 2010/01/07
! //			// jPanel_DrawArea.add(getJPanel11(), gridBagConstraints110);
! //			jPanel_DrawArea.add(getJPanel7(), gridBagConstraints110);
! //			// jPanel_DrawArea.add(getJPanel7(), gridBagConstraints210);
! //			// jPanel_DrawArea.add(getJPanel11(), gridBagConstraints210);
! //
! //			// add s.inoue 2010/01/21
! //			jPanel_DrawArea.add(getJPanel_TableArea(), gridBagConstraints111);
! //
! //			jPanel_DrawArea.add(getJPanel8(), gridBagConstraints310);
! //			jPanel_DrawArea.add(getJPanel9(), gridBagConstraints410);
! //		}
! //		return jPanel_DrawArea;
! //	}
! //
! //	// add s.inoue 2010/01/11
! //	/**
! //	 * This method initializes jPanel3
! //	 *
! //	 * @return javax.swing.JPanel
! //	 */
! //	private JPanel getJRabelHidden() {
! //		if (jPanelHidden == null) {
! //			jPanelHidden = new JPanel();
! //			jPanelHidden.setLayout(new GridBagLayout());
! //		}
! //		return jPanelHidden;
! //	}
! //
! //	// add s.inoue 2010/01/06
! //	/**
! //	 * This method initializes jTextField_NingenDocTanka
! //	 *
! //	 * @return javax.swing.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_YukoukigenFrom() {
! //		if (jTextField_YukoukigenFrom == null) {
! //			jTextField_YukoukigenFrom = new ExtendedTextField("", 8, ImeMode.IME_OFF);
! //			jTextField_YukoukigenFrom.setHorizontalAlignment(JTextField.RIGHT);
! //			jTextField_YukoukigenFrom.setPreferredSize(new Dimension(100, 20));
! //			jTextField_YukoukigenFrom.addFocusListener(this);
! //		}
! //		return jTextField_YukoukigenFrom;
! //	}
! //
! //	/**
! //	 * This method initializes jTextField_NingenDocTanka
! //	 *
! //	 * @return javax.swing.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_YukoukigenTo() {
! //		if (jTextField_YukoukigenTo == null) {
! //			jTextField_YukoukigenTo = new ExtendedTextField("", 8, ImeMode.IME_OFF);
! //			jTextField_YukoukigenTo.setHorizontalAlignment(JTextField.RIGHT);
! //			jTextField_YukoukigenTo.setPreferredSize(new Dimension(100, 20));
! //			jTextField_YukoukigenTo.addFocusListener(this);
! //		}
! //		return jTextField_YukoukigenTo;
! //	}
! //	/**
! //	 * This method initializes jTextField_HokenjyaNumber
! //	 *
! //	 * @return javax.swing.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_HokenjyaNumber() {
! //		if (jTextField_HokenjyaNumber == null) {
! //			jTextField_HokenjyaNumber = new ExtendedTextField("", 8, ImeMode.IME_OFF, false);
! //			jTextField_HokenjyaNumber.setPreferredSize(new Dimension(100, 20));
! //			jTextField_HokenjyaNumber
! //					.addActionListener(this);
! //		}
! //		return jTextField_HokenjyaNumber;
! //	}
! //
! //	/**
! //	 * This method initializes jTextField_HokenjyaName
! //	 *
! //	 * @return javax.swing.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_HokenjyaName() {
! //		if (jTextField_HokenjyaName == null) {
! //			jTextField_HokenjyaName = new ExtendedTextField(ImeMode.IME_ZENKAKU);
! //			jTextField_HokenjyaName.setPreferredSize(new Dimension(350, 20));
! //		}
! //		return jTextField_HokenjyaName;
! //	}
! //
! //	/**
! //	 * This method initializes jTextField_Zipcode
! //	 *
! //	 * @return javax.swing.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_Zipcode() {
! //		if (jTextField_Zipcode == null) {
! //			jTextField_Zipcode = new ExtendedTextField("", 7, ImeMode.IME_OFF);
! //			jTextField_Zipcode.setPreferredSize(new Dimension(100, 20));
! //		}
! //		return jTextField_Zipcode;
! //	}
! //
! //	/**
! //	 * This method initializes jTextField_Address
! //	 *
! //	 * @return javax.swing.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_Address() {
! //		if (jTextField_Address == null) {
! //			jTextField_Address = new ExtendedTextField(ImeMode.IME_ZENKAKU);
! //			jTextField_Address.setPreferredSize(new Dimension(350, 20));
! //		}
! //		return jTextField_Address;
! //	}
! //
! //	/**
! //	 * This method initializes jTextField_Chiban
! //	 *
! //	 * @return javax.swing.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_Chiban() {
! //		if (jTextField_Chiban == null) {
! //			jTextField_Chiban = new ExtendedTextField(ImeMode.IME_ZENKAKU);
! //			jTextField_Chiban.setPreferredSize(new Dimension(350, 20));
! //		}
! //		return jTextField_Chiban;
! //	}
! //
! //	/**
! //	 * This method initializes jTextField_TEL
! //	 *
! //	 * @return javax.swing.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_TEL() {
! //		if (jTextField_TEL == null) {
! //			jTextField_TEL = new ExtendedTextField("", 11, ImeMode.IME_OFF);
! //			jTextField_TEL.setPreferredSize(new Dimension(100, 20));
! //		}
! //		return jTextField_TEL;
! //	}
! //
! //	/**
! //	 * This method initializes jTextField_Code
! //	 *
! //	 * @return javax.swing.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_Code() {
! //		if (jTextField_Kigo == null) {
! //			jTextField_Kigo = new ExtendedTextField(ImeMode.IME_ZENKAKU);
! //			jTextField_Kigo.setPreferredSize(new Dimension(350, 20));
! //		}
! //		return jTextField_Kigo;
! //	}
! //
! //	/**
! //	 * This method initializes jTextField_HonninGairai
! //	 *
! //	 * @return javax.swing.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_HonninGairai() {
! //		if (jTextField_HonninGairai == null) {
! //			jTextField_HonninGairai = new ExtendedTextField(ImeMode.IME_OFF);
! //			jTextField_HonninGairai.setHorizontalAlignment(JTextField.RIGHT);
! //			jTextField_HonninGairai.setPreferredSize(new Dimension(100, 20));
! //		}
! //		return jTextField_HonninGairai;
! //	}
! //
! //	/**
! //	 * This method initializes jTextField_KazokuGairai
! //	 *
! //	 * @return javax.swing.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_KazokuGairai() {
! //		if (jTextField_KazokuGairai == null) {
! //			jTextField_KazokuGairai = new ExtendedTextField(ImeMode.IME_OFF);
! //			jTextField_KazokuGairai.setHorizontalAlignment(JTextField.RIGHT);
! //			jTextField_KazokuGairai.setPreferredSize(new Dimension(100, 20));
! //		}
! //		return jTextField_KazokuGairai;
! //	}
! //
! //	/**
! //	 * This method initializes jTextField_HonninNyuin
! //	 *
! //	 * @return javax.swing.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_HonninNyuin() {
! //		if (jTextField_HonninNyuin == null) {
! //			jTextField_HonninNyuin = new ExtendedTextField(ImeMode.IME_OFF);
! //			jTextField_HonninNyuin.setHorizontalAlignment(JTextField.RIGHT);
! //			jTextField_HonninNyuin.setPreferredSize(new Dimension(100, 20));
! //		}
! //		return jTextField_HonninNyuin;
! //	}
! //
! ///**
! //	 * This method initializes jTextField_KazokuNyuin
! //	 *
! //	 * @return javax.swing.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_KazokuNyuin() {
! //		if (jTextField_KazokuNyuin == null) {
! //			jTextField_KazokuNyuin = new ExtendedTextField(ImeMode.IME_OFF);
! //			jTextField_KazokuNyuin.setHorizontalAlignment(JTextField.RIGHT);
! //			jTextField_KazokuNyuin.setPreferredSize(new Dimension(100, 20));
! //		}
! //		return jTextField_KazokuNyuin;
! //	}
! //
! //	/**
! //	 * This method initializes jTextField_KihonTanka
! //	 *
! //	 * @return javax.swing.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_KihonTanka() {
! //		if (jTextField_KihonTanka == null) {
! //			jTextField_KihonTanka = new ExtendedTextField("", 9, ImeMode.IME_OFF);
! //			jTextField_KihonTanka.setHorizontalAlignment(JTextField.RIGHT);
! //			jTextField_KihonTanka.setPreferredSize(new Dimension(100, 20));
! //		}
! //		return jTextField_KihonTanka;
! //	}
! //
! //	/**
! //	 * This method initializes jTextField_HinketsuTanka
! //	 *
! //	 * @return javax.swing.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_HinketsuTanka() {
! //		if (jTextField_HinketsuTanka == null) {
! //			jTextField_HinketsuTanka = new ExtendedTextField("", 9, ImeMode.IME_OFF);
! //			jTextField_HinketsuTanka.setHorizontalAlignment(JTextField.RIGHT);
! //			jTextField_HinketsuTanka.setPreferredSize(new Dimension(100, 20));
! //		}
! //		return jTextField_HinketsuTanka;
! //	}
! //
! //	/**
! //	 * This method initializes jTextField_SindenzuTanka
! //	 *
! //	 * @return javax.swing.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_SindenzuTanka() {
! //		if (jTextField_SindenzuTanka == null) {
! //			jTextField_SindenzuTanka = new ExtendedTextField("", 9, ImeMode.IME_OFF);
! //			jTextField_SindenzuTanka.setHorizontalAlignment(JTextField.RIGHT);
! //			jTextField_SindenzuTanka.setPreferredSize(new Dimension(100, 20));
! //		}
! //		return jTextField_SindenzuTanka;
! //	}
! //
! //	/**
! //	 * This method initializes jTextField_GanteiTanka
! //	 *
! //	 * @return javax.swing.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_GanteiTanka() {
! //		if (jTextField_GanteiTanka == null) {
! //			jTextField_GanteiTanka = new ExtendedTextField("", 9, ImeMode.IME_OFF);
! //			jTextField_GanteiTanka.setHorizontalAlignment(JTextField.RIGHT);
! //			jTextField_GanteiTanka.setPreferredSize(new Dimension(100, 20));
! //		}
! //		return jTextField_GanteiTanka;
! //	}
! //
! //
! //	// add ver2 s.inoue 2009/06/16
! //	/**
! //	 * This method initializes jTextField_NingenDocTanka
! //	 *
! //	 * @return javax.swing.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_NingenDocTanka() {
! //		if (jTextField_NingenDocTanka == null) {
! //			jTextField_NingenDocTanka = new ExtendedTextField("", 9, ImeMode.IME_OFF);
! //			jTextField_NingenDocTanka.setHorizontalAlignment(JTextField.RIGHT);
! //			jTextField_NingenDocTanka.setPreferredSize(new Dimension(100, 20));
! //			// add ver2 s.inoue 2009/07/10
! //			jTextField_NingenDocTanka.addFocusListener(this);
! //		}
! //		return jTextField_NingenDocTanka;
! //	}
! //
! //	// add s.inoue 2009/10/01
! //	/**
! //	 * This method initializes jTextField_KihonTanka
! //	 *
! //	 * @return javax.swing.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_TankaHantei() {
! //		if (jTextField_TankaHantei == null) {
! //			jTextField_TankaHantei = new ExtendedTextField("", 1, ImeMode.IME_OFF);
! //			jTextField_TankaHantei.setHorizontalAlignment(JTextField.RIGHT);
! //			jTextField_TankaHantei.setPreferredSize(new Dimension(20, 20));
! //			jTextField_TankaHantei.addActionListener(this);
! //			jTextField_TankaHantei.addKeyListener(this);
! //			jTextField_TankaHantei.setColumns(1);
! //		}
! //		return jTextField_TankaHantei;
! //	}
! //
! //	/**
! //	 * This method initializes jButton_ORCA
! //	 *
! //	 * @return javax.swing.ExtendedButton
! //	 */
! //	private ExtendedButton getJButton_ORCA() {
! //		if (jButton_ORCA == null) {
! //			jButton_ORCA = new ExtendedButton();
! //			jButton_ORCA.setText("日レセ読込");
! //			jButton_ORCA.addActionListener(this);
! //		}
! //		return jButton_ORCA;
! //	}
! //
! //	/**
! //	 * This method initializes jButton_Register
! //	 *
! //	 * @return javax.swing.ExtendedButton
! //	 */
! //	private ExtendedButton getJButton_Register() {
! //		if (jButton_Register == null) {
! //			jButton_Register = new ExtendedButton();
! //			jButton_Register.setText("登録(F12)");
! //			jButton_Register.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jButton_Register.addActionListener(this);
! //		}
! //		return jButton_Register;
! //	}
! //
! //	// add s.inoue 2010/01/22
! //	/**
! //	 * This method initializes jButton_RegisterAdd
! //	 *
! //	 * @return javax.swing.ExtendedButton
! //	 */
! //	private ExtendedButton getJButton_RegisterAdd() {
! //		if (jButton_RegisterAdd == null) {
! //			jButton_RegisterAdd = new ExtendedButton();
! //			jButton_RegisterAdd.setText("登録(F12)");
! //			jButton_RegisterAdd.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jButton_RegisterAdd.addActionListener(this);
! //		}
! //		return jButton_RegisterAdd;
! //	}
! //
! //	// add s.inoue 2010/01/11
! //	/**
! //	 * This method initializes jButton_Register
! //	 *
! //	 * @return javax.swing.ExtendedButton
! //	 */
! //	private ExtendedButton getJButton_Add() {
! //		if (jButton_Add == null) {
! //			jButton_Add = new ExtendedButton();
! //			jButton_Add.setText("新規追加(F7)");
! //			jButton_Add.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jButton_Add.addActionListener(this);
! //		}
! //		return jButton_Add;
! //	}
! //
! //	/**
! //	 * This method initializes jButton_RegisterYukoukigenEdit
! //	 *
! //	 * @return javax.swing.ExtendedButton
! //	 */
! //	private ExtendedButton getJButton_RegisterYukouKigenEdit() {
! //		if (jButton_RegisterYukoukigenEdit == null) {
! //			jButton_RegisterYukoukigenEdit = new ExtendedButton();
! //			jButton_RegisterYukoukigenEdit.setText("更新(F9)");
! //			jButton_RegisterYukoukigenEdit.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jButton_RegisterYukoukigenEdit.addActionListener(this);
! //			// del s.inoue 2010/01/12
! //			// jButton_RegisterYukoukigenEdit.setPreferredSize(new Dimension(130, 25));
! //		}
! //		return jButton_RegisterYukoukigenEdit;
! //	}
! //
! //	// add s.inoue 2010/01/14
! //	/**
! //	 * This method initializes jButton_RegisterYukoukigenDelete
! //	 *
! //	 * @return javax.swing.ExtendedButton
! //	 */
! //	private ExtendedButton getJButton_RegisterYukouKigenDelete() {
! //		if (jButton_RegisterYukoukigenDelete == null) {
! //			jButton_RegisterYukoukigenDelete = new ExtendedButton();
! //			jButton_RegisterYukoukigenDelete.setText("削除(F10)");
! //			jButton_RegisterYukoukigenDelete.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jButton_RegisterYukoukigenDelete.addActionListener(this);
! //		}
! //		return jButton_RegisterYukoukigenDelete;
! //	}
! //
! //	/**
! //	 * This method initializes jButton_Register
! //	 *
! //	 * @return javax.swing.ExtendedButton
! //	 */
! //	private ExtendedButton getJButton_RegisterYukouKigen() {
! //		if (jButton_RegisterYukoukigen == null) {
! //			jButton_RegisterYukoukigen = new ExtendedButton();
! //			jButton_RegisterYukoukigen.setText("新規登録(F8)");
! //			jButton_RegisterYukoukigen.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jButton_RegisterYukoukigen.addActionListener(this);
! //			// del s.inoue 2010/01/12
! //			// jButton_RegisterYukoukigen.setPreferredSize(new Dimension(130, 25));
! //			jButton_RegisterYukoukigen.setVisible(false);
! //		}
! //		return jButton_RegisterYukoukigen;
! //	}
! //
! //	public void actionPerformed(ActionEvent e)
! //	{
! //	}
! //
! //	/*
! //	 * FrameSize Control
! //	 */
! //	public void validate()
! //	{
! //		Rectangle rect = getBounds();
! //
! //		super.validate();
! //
! //		if( ViewSettings.getFrameCommonWidth() > rect.width  ||
! //				ViewSettings.getFrameCommonHeight() > rect.height )
! //		{
! //			setBounds( rect.x,
! //					   rect.y,
! //					   ViewSettings.getFrameCommonWidth(),
! //					   ViewSettings.getFrameCommonHeight() );
! //		}
! //	}
! //
! //	/**
! //	 * This method initializes jComboBox_ItakuKubun
! //	 *
! //	 * @return javax.swing.ExtendedComboBox
! //	 */
! //	private ExtendedComboBox getJComboBox_ItakuKubun() {
! //		if (jComboBox_ItakuKubun == null) {
! //			// del s.inoue 2009/10/06
! //			// jComboBox_ItakuKubun = new ExtendedComboBox(ImeMode.IME_OFF);
! //			jComboBox_ItakuKubun = new ExtendedComboBox();
! //			jComboBox_ItakuKubun.setPreferredSize(new Dimension(100, 20));
! //			jComboBox_ItakuKubun.setMinimumSize(new Dimension(31, 20));
! //			jComboBox_ItakuKubun.addItemListener(this);
! //		}
! //		return jComboBox_ItakuKubun;
! //	}
! //
! //	/**
! //	 * This method initializes jTextField_HinketuCode
! //	 *
! //	 * @return javax.swing.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_HinketuCode() {
! //		if (jTextField_HinketuCode == null) {
! //			jTextField_HinketuCode = new ExtendedTextField();
! //			jTextField_HinketuCode.setVisible(false);
! //		}
! //		return jTextField_HinketuCode;
! //	}
! //
! //	/**
! //	 * This method initializes jTextField_SindenzuCode
! //	 *
! //	 * @return javax.swing.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_SindenzuCode() {
! //		if (jTextField_SindenzuCode == null) {
! //			jTextField_SindenzuCode = new ExtendedTextField();
! //			jTextField_SindenzuCode.setVisible(false);
! //		}
! //		return jTextField_SindenzuCode;
! //	}
! //
! //	/**
! //	 * This method initializes jTextField_GanteiCode
! //	 *
! //	 * @return javax.swing.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_GanteiCode() {
! //		if (jTextField_GanteiCode == null) {
! //			jTextField_GanteiCode = new ExtendedTextField();
! //			jTextField_GanteiCode.setVisible(false);
! //		}
! //		return jTextField_GanteiCode;
! //	}
! //
! //	// add ver2 s.inoue 2009/06/16
! //	/**
! //	 * This method initializes jTextField_NingenDocCode
! //	 *
! //	 * @return javax.swing.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_NingenDocCode() {
! //		if (jTextField_NingenDocCode == null) {
! //			jTextField_NingenDocCode = new ExtendedTextField();
! //			jTextField_NingenDocCode.setVisible(false);
! //		}
! //		return jTextField_NingenDocCode;
! //	}
! //
! //
! //	/**
! //	 * This method initializes jButton_Cancel
! //	 *
! //	 * @return javax.swing.ExtendedButton
! //	 */
! //	private ExtendedButton getJButton_Cancel() {
! //		if (jButton_Cancel == null) {
! //			jButton_Cancel = new ExtendedButton();
! //			jButton_Cancel.setText("キャンセル");
! //			jButton_Cancel.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jButton_Cancel.setVisible(false);
! //			jButton_Cancel.addActionListener(this);
! //		}
! //		return jButton_Cancel;
! //	}
! //
! //	public void keyPressed(KeyEvent e) {
! ////		System.out.println("keyPressed");
! //	}
! //
! //	public void keyReleased(KeyEvent e) {
! ////		System.out.println("keyReleased");
! //	}
! //
! //	public void keyTyped(KeyEvent e) {
! ////		System.out.println("keyTyped");
! //	}
! //
! //	// edit s.inoue 2010/01/21
! //	/**
! //	 * This method initializes jPanel1
! //	 *
! //	 * @return javax.swing.JPanel
! //	 */
! //	private JPanel getJPanel1() {
! //		if (jPanel1 == null) {
! //			jPanel1 = new JPanel();
! //			jPanel1.setLayout(new GridBagLayout());
! //		}
! //		return jPanel1;
! //	}
! //
! ////	/**
! ////	 * This method initializes jPanel1
! ////	 *
! ////	 * @return javax.swing.JPanel
! ////	 */
! ////	private JPanel getJPanel1() {
! ////		if (jPanel1 == null) {
! ////			jLabel12 = new ExtendedLabel();
! ////			jLabel12.setText("円");
! ////			jPanel1 = new JPanel();
! ////			jPanel1.setLayout(new GridBagLayout());
! ////		}
! ////		return jPanel1;
! ////	}
! //
! ////	/**
! ////	 * This method initializes jPanel2
! ////	 *
! ////	 * @return javax.swing.JPanel
! ////	 */
! ////	private JPanel getJPanel2() {
! ////		if (jPanel2 == null) {
! ////			jLabel125 = new ExtendedLabel();
! ////			jLabel125.setText("円");
! ////			jPanel2 = new JPanel();
! ////			jPanel2.setLayout(new GridBagLayout());
! ////		}
! ////		return jPanel2;
! ////	}
! //
! ////	/**
! ////	 * This method initializes jPanel3
! ////	 *
! ////	 * @return javax.swing.JPanel
! ////	 */
! ////	private JPanel getJPanel3() {
! ////		if (jPanel3 == null) {
! ////			jLabel126 = new ExtendedLabel();
! ////			jLabel126.setText("円");
! ////			jPanel3 = new JPanel();
! ////			jPanel3.setLayout(new GridBagLayout());
! ////		}
! ////		return jPanel3;
! ////	}
! //
! ////	/**
! ////	 * This method initializes jPanel4
! ////	 *
! ////	 * @return javax.swing.JPanel
! ////	 */
! ////	private JPanel getJPanel4() {
! ////		if (jPanel4 == null) {
! ////			jLabel127 = new ExtendedLabel();
! ////			jLabel127.setText("円");
! ////			jPanel4 = new JPanel();
! ////			jPanel4.setLayout(new GridBagLayout());
! ////		}
! ////		return jPanel4;
! ////	}
! //
! ////	/**
! ////	 * This method initializes jPanel10
! ////	 *
! ////	 * @return javax.swing.JPanel
! ////	 */
! ////	private JPanel getJPanel10() {
! ////		if (jPanel10 == null) {
! ////			jLabel128 = new ExtendedLabel();
! ////			jLabel128.setText("円");
! ////			jPanel10= new JPanel();
! ////			jPanel10.setLayout(new GridBagLayout());
! ////		}
! ////		return jPanel10;
! ////	}
! //
! ////	/**
! ////	 * This method initializes jPanel5
! ////	 *
! ////	 * @return javax.swing.JPanel
! ////	 */
! ////	private JPanel getJPanel5() {
! ////		if (jPanel5 == null) {
! ////			jPanel5 = new JPanel();
! ////			jPanel5.setLayout(new GridBagLayout());
! ////		}
! ////		return jPanel5;
! ////	}
! //
! //	/**
! //	 * This method initializes jPanel6
! //	 *
! //	 * @return javax.swing.JPanel
! //	 */
! //	private JPanel getJPanel6() {
! //		if (jPanel6 == null) {
! //			GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
! //			gridBagConstraints2.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints2.gridy = 3;
! //			gridBagConstraints2.gridx = 2;
! //			GridBagConstraints gridBagConstraints1 = new GridBagConstraints();
! //			gridBagConstraints1.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints1.gridy = 2;
! //			gridBagConstraints1.gridx = 2;
! //			GridBagConstraints gridBagConstraints21 = new GridBagConstraints();
! //			gridBagConstraints21.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints21.gridy = 1;
! //			gridBagConstraints21.gridx = 2;
! //			GridBagConstraints gridBagConstraints22 = new GridBagConstraints();
! //			gridBagConstraints22.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints22.gridx = 1;
! //			gridBagConstraints22.gridy = 3;
! //			gridBagConstraints22.fill = GridBagConstraints.NONE;
! //			GridBagConstraints gridBagConstraints42 = new GridBagConstraints();
! //			gridBagConstraints42.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints42.gridx = 1;
! //			gridBagConstraints42.gridy = 2;
! //			gridBagConstraints42.fill = GridBagConstraints.NONE;
! //			GridBagConstraints gridBagConstraints20 = new GridBagConstraints();
! //			gridBagConstraints20.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints20.gridy = 1;
! //			gridBagConstraints20.gridx = 1;
! //			GridBagConstraints gridBagConstraints41 = new GridBagConstraints();
! //			gridBagConstraints41.anchor = GridBagConstraints.EAST;
! //			gridBagConstraints41.gridy = 3;
! //			gridBagConstraints41.gridx = 0;
! //			GridBagConstraints gridBagConstraints28 = new GridBagConstraints();
! //			gridBagConstraints28.anchor = GridBagConstraints.EAST;
! //			gridBagConstraints28.gridy = 2;
! //			gridBagConstraints28.gridx = 0;
! //			GridBagConstraints gridBagConstraints27 = new GridBagConstraints();
! //			gridBagConstraints27.anchor = GridBagConstraints.EAST;
! //			gridBagConstraints27.gridy = 1;
! //			gridBagConstraints27.gridx = 0;
! //			GridBagConstraints gridBagConstraints11 = new GridBagConstraints();
! //			gridBagConstraints11.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints11.gridy = 0;
! //			gridBagConstraints11.weightx = 1.0D;
! //			gridBagConstraints11.gridx = 2;
! //			GridBagConstraints gridBagConstraints19 = new GridBagConstraints();
! //			gridBagConstraints19.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints19.gridy = 0;
! //			gridBagConstraints19.gridx = 1;
! //			GridBagConstraints gridBagConstraints26 = new GridBagConstraints();
! //			gridBagConstraints26.anchor = GridBagConstraints.EAST;
! //			gridBagConstraints26.gridx = 0;
! //			gridBagConstraints26.gridy = 0;
! //			jPanel6 = new JPanel();
! //			jPanel6.setLayout(new GridBagLayout());
! //			jPanel6.setBorder(BorderFactory.createCompoundBorder(BorderFactory.createLineBorder(Color.gray, 1), BorderFactory.createEmptyBorder(5, 5, 5, 5)));
! //			jPanel6.setVisible(false);
! //			jPanel6.add(jLabel115, gridBagConstraints26);
! //			jPanel6.add(jLabel1231, gridBagConstraints11);
! //			jPanel6.add(jLabel116, gridBagConstraints27);
! //			jPanel6.add(jLabel120, gridBagConstraints28);
! //			jPanel6.add(jLabel121, gridBagConstraints41);
! //			jPanel6.add(getJTextField_HonninGairai(), gridBagConstraints19);
! //			jPanel6.add(getJTextField_KazokuGairai(), gridBagConstraints20);
! //			jPanel6.add(getJTextField_HonninNyuin(), gridBagConstraints42);
! //			jPanel6.add(getJTextField_KazokuNyuin(), gridBagConstraints22);
! //			jPanel6.add(jLabel1232, gridBagConstraints21);
! //			jPanel6.add(jLabel123, gridBagConstraints1);
! //			jPanel6.add(jLabel124, gridBagConstraints2);
! //		}
! //		return jPanel6;
! //	}
! //
! //	/**
! //	 * This method initializes jPanel11
! //	 *
! //	 * @return javax.swing.JPanel
! //	 */
! //	private JPanel getJPanel11() {
! //		// model用領域
! //		if (jPanel11 == null) {
! //			// edit s.inoue 2010/01/21
! ////			jPanel11 = new JPanel();
! ////			jPanel11.setLayout(new BorderLayout());
! ////			jPanel11.setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 0));
! ////			GridBagConstraints gridBagConstraints1 = new GridBagConstraints();
! ////			gridBagConstraints1.gridx = 0;
! ////			gridBagConstraints1.gridy = 0;
! ////			gridBagConstraints1.anchor = GridBagConstraints.BOTH;
! ////			gridBagConstraints1.weightx = 1.0D;
! //
! //			jPanel11 = new JPanel();
! //			jPanel11.setLayout(new GridBagLayout());
! //			// jPanel11.setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 0));
! //			// jPanel11.add(getJPanel11(),gridBagConstraints1);
! //		}
! //		return jPanel11;
! //	}
! //
! ////	/**
! ////	 * This method initializes jPanel11
! ////	 *
! ////	 * @return javax.swing.JPanel
! ////	 */
! ////	private JPanel getJPanel11() {
! ////		if (jPanel11 == null) {
! ////			jLabelYukoukigen = new ExtendedLabel();
! ////			jLabelYukoukigen.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
! ////			jLabelYukoukigen.setText("有効期限");
! ////			jLabelYukoukigen.setFont(new Font("Dialog", Font.PLAIN, 12));
! ////
! ////			GridBagConstraints gridBagConstraints71 = new GridBagConstraints();
! ////			gridBagConstraints71.gridx = 0;
! ////			gridBagConstraints71.gridy = 0;
! ////			gridBagConstraints71.gridwidth = 2;
! ////			gridBagConstraints71.anchor = GridBagConstraints.WEST;
! ////
! ////			GridBagConstraints gridBagConstraints70 = new GridBagConstraints();
! ////			gridBagConstraints70.gridx = 2;
! ////			gridBagConstraints70.gridy = 0;
! ////			gridBagConstraints70.anchor = GridBagConstraints.WEST;
! ////
! ////			jLabelTilda = new ExtendedLabel();
! ////			jLabelTilda.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
! ////			jLabelTilda.setText("〜");
! ////			jLabelTilda.setFont(new Font("Dialog", Font.PLAIN, 12));
! ////
! ////			GridBagConstraints gridBagConstraints72 = new GridBagConstraints();
! ////			gridBagConstraints72.gridx = 1;
! ////			gridBagConstraints72.gridy = 0;
! ////			gridBagConstraints72.anchor = GridBagConstraints.WEST;
! //////			gridBagConstraints72.insets = new Insets(0, 5, 0, 0);
! ////
! ////			GridBagConstraints gridBagConstraints73 = new GridBagConstraints();
! ////			gridBagConstraints73.gridx = 3;
! ////			gridBagConstraints73.gridy = 0;
! ////			gridBagConstraints73.anchor = GridBagConstraints.WEST;
! ////			gridBagConstraints73.weightx = 1.0D;
! ////
! ////			jPanel11 = new JPanel();
! ////			jPanel11.setLayout(new GridBagLayout());
! ////			jPanel11.setBorder(BorderFactory.createCompoundBorder(BorderFactory.createLineBorder(Color.gray, 1), BorderFactory.createEmptyBorder(5, 5, 5, 5)));
! ////			jPanel11.add(jLabelTilda, gridBagConstraints70);
! ////			jPanel11.add(jLabelYukoukigen, gridBagConstraints71);
! ////			jPanel11.add(getJTextField_YukoukigenFrom(), gridBagConstraints72);
! ////			jPanel11.add(getJTextField_YukoukigenTo(), gridBagConstraints73);
! ////		}
! ////		return jPanel11;
! ////	}
! //	/**
! //	 * This method initializes jPanel7
! //	 *
! //	 * @return javax.swing.JPanel
! //	 */
! //	private JPanel getJPanel7() {
! //		if (jPanel7 == null) {
! //			GridBagConstraints gridBagConstraints71 = new GridBagConstraints();
! //			gridBagConstraints71.gridx = 5;
! //			gridBagConstraints71.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints71.gridy = 6;
! //			jLabelNingenDocNum = new ExtendedLabel();
! //			jLabelNingenDocNum.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
! //			jLabelNingenDocNum.setText("（半角数字9桁以内）");
! //			jLabelNingenDocNum.setFont(new Font("Dialog", Font.PLAIN, 12));
! //
! //			GridBagConstraints gridBagConstraints70 = new GridBagConstraints();
! //			gridBagConstraints70.gridx = 5;
! //			gridBagConstraints70.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints70.gridy = 5;
! //			jLabelGanteiNum = new ExtendedLabel();
! //			jLabelGanteiNum.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
! //			jLabelGanteiNum.setText("（半角数字9桁以内）");
! //			jLabelGanteiNum.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			GridBagConstraints gridBagConstraints69 = new GridBagConstraints();
! //			gridBagConstraints69.gridx = 5;
! //			gridBagConstraints69.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints69.gridy = 4;
! //			jLabelSindenzuNum = new ExtendedLabel();
! //			jLabelSindenzuNum.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
! //			jLabelSindenzuNum.setText("（半角数字9桁以内）");
! //			jLabelSindenzuNum.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			GridBagConstraints gridBagConstraints68 = new GridBagConstraints();
! //			gridBagConstraints68.gridx = 5;
! //			gridBagConstraints68.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints68.gridy = 3;
! //			jLabelHinketuNum = new ExtendedLabel();
! //			jLabelHinketuNum.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
! //			jLabelHinketuNum.setText("（半角数字9桁以内）");
! //			jLabelHinketuNum.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			GridBagConstraints gridBagConstraints67 = new GridBagConstraints();
! //			gridBagConstraints67.gridx = 5;
! //			gridBagConstraints67.weightx = 1.0D;
! //			gridBagConstraints67.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints67.gridy = 2;
! //			jLabelKihonNum = new ExtendedLabel();
! //			jLabelKihonNum.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
! //			jLabelKihonNum.setText("（半角数字9桁以内）");
! //			jLabelKihonNum.setFont(new Font("Dialog", Font.PLAIN, 12));
! //
! //			GridBagConstraints gridBagConstraints18 = new GridBagConstraints();
! //			gridBagConstraints18.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints18.gridy = 6;
! //			gridBagConstraints18.gridx = 4;
! //			GridBagConstraints gridBagConstraints16 = new GridBagConstraints();
! //			gridBagConstraints16.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints16.gridy = 5;
! //			gridBagConstraints16.gridx = 4;
! //			GridBagConstraints gridBagConstraints9 = new GridBagConstraints();
! //			gridBagConstraints9.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints9.gridx = 3;
! //			gridBagConstraints9.gridy = 5;
! //			gridBagConstraints9.fill = GridBagConstraints.NONE;
! //			GridBagConstraints gridBagConstraints10 = new GridBagConstraints();
! //			gridBagConstraints10.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints10.gridx = 3;
! //			gridBagConstraints10.gridy = 6;
! //			gridBagConstraints10.fill = GridBagConstraints.NONE;
! //			GridBagConstraints gridBagConstraints45 = new GridBagConstraints();
! //			gridBagConstraints45.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints45.gridy = 5;
! //			gridBagConstraints45.gridx = 2;
! //			GridBagConstraints gridBagConstraints46 = new GridBagConstraints();
! //			gridBagConstraints46.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints46.gridy = 6;
! //			gridBagConstraints46.gridx = 2;
! //
! //			GridBagConstraints gridBagConstraints15 = new GridBagConstraints();
! //			gridBagConstraints15.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints15.gridy = 4;
! //			gridBagConstraints15.gridx = 4;
! //			GridBagConstraints gridBagConstraints8 = new GridBagConstraints();
! //			gridBagConstraints8.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints8.gridy = 4;
! //			gridBagConstraints8.gridx = 3;
! //			GridBagConstraints gridBagConstraints44 = new GridBagConstraints();
! //			gridBagConstraints44.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints44.gridy = 4;
! //			gridBagConstraints44.gridx = 2;
! //			GridBagConstraints gridBagConstraints13 = new GridBagConstraints();
! //			gridBagConstraints13.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints13.gridy = 3;
! //			gridBagConstraints13.gridx = 4;
! //			GridBagConstraints gridBagConstraints7 = new GridBagConstraints();
! //			gridBagConstraints7.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints7.gridy = 3;
! //			gridBagConstraints7.gridx = 3;
! //			GridBagConstraints gridBagConstraints43 = new GridBagConstraints();
! //			gridBagConstraints43.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints43.gridy = 3;
! //			gridBagConstraints43.gridx = 2;
! //			GridBagConstraints gridBagConstraints6 = new GridBagConstraints();
! //			gridBagConstraints6.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints6.gridy = 2;
! //			gridBagConstraints6.gridx = 4;
! //			GridBagConstraints gridBagConstraints5 = new GridBagConstraints();
! //			gridBagConstraints5.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints5.gridy = 2;
! //			gridBagConstraints5.gridx = 3;
! //			GridBagConstraints gridBagConstraints36 = new GridBagConstraints();
! //			gridBagConstraints36.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints36.gridy = 2;
! //			gridBagConstraints36.gridx = 2;
! //			GridBagConstraints gridBagConstraints17 = new GridBagConstraints();
! //			gridBagConstraints17.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints17.gridy = 1;
! //			// del s.inoue 2010/01/11
! //			gridBagConstraints17.gridwidth = 2;
! //			gridBagConstraints17.gridx = 5;
! //			GridBagConstraints gridBagConstraints14 = new GridBagConstraints();
! //			gridBagConstraints14.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints14.gridy = 1;
! //			gridBagConstraints14.gridwidth = 2;
! //			gridBagConstraints14.gridx = 3;
! //			GridBagConstraints gridBagConstraints37 = new GridBagConstraints();
! //			gridBagConstraints37.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints37.gridy = 1;
! //			gridBagConstraints37.gridx = 2;
! //
! //			// add s.inoue 2009/10/01
! //			GridBagConstraints gridBagConstraints62 = new GridBagConstraints();
! //			gridBagConstraints62.gridy = 1;
! //			gridBagConstraints62.gridx = 1;
! //
! //			GridBagConstraints gridBagConstraints63 = new GridBagConstraints();
! //			gridBagConstraints63.gridy = 6;
! //			gridBagConstraints63.gridx = 1;
! //
! //			// edit s.inoue 2009/10/01
! //			GridBagConstraints gridBagConstraints64 = new GridBagConstraints();
! //			gridBagConstraints64.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints64.gridx = 0;
! //			gridBagConstraints64.gridy = 1;
! //
! //			GridBagConstraints gridBagConstraints65 = new GridBagConstraints();
! //			gridBagConstraints65.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints65.gridx = 0;
! //			gridBagConstraints65.gridy = 0;
! //
! //			GridBagConstraints gridBagConstraints66 = new GridBagConstraints();
! //			gridBagConstraints66.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints66.gridx = 1;
! //			gridBagConstraints66.gridy = 0;
! //			gridBagConstraints66.insets = new Insets(0,10,0,0);
! //
! //			GridBagConstraints gridBagConstraints80 = new GridBagConstraints();
! //			gridBagConstraints80.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints80.gridx = 2;
! //			gridBagConstraints80.gridy = 0;
! //			gridBagConstraints80.gridwidth =2;
! //
! //			GridBagConstraints gridBagConstraints81 = new GridBagConstraints();
! //			gridBagConstraints81.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints81.gridx = 2;
! //			gridBagConstraints81.gridy = 0;
! //			gridBagConstraints81.gridwidth =2;
! //			gridBagConstraints81.insets = new Insets(0,20,0,0);
! //
! //			// add s.inoue 2010/01/11 btn追加
! //			GridBagConstraints gridBagConstraints82 = new GridBagConstraints();
! //			gridBagConstraints82.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints82.gridy = 6;
! //			gridBagConstraints82.gridx = 6;
! //			gridBagConstraints82.insets = new Insets(0,5,0,0);
! //
! //			GridBagConstraints gridBagConstraints83 = new GridBagConstraints();
! //			gridBagConstraints83.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints83.gridy = 6;
! //			gridBagConstraints83.gridx = 7;
! //			gridBagConstraints83.insets = new Insets(0,5,0,0);
! //
! //			GridBagConstraints gridBagConstraints84 = new GridBagConstraints();
! //			gridBagConstraints84.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints84.gridy = 6;
! //			gridBagConstraints84.gridx = 7;
! //			gridBagConstraints84.insets = new Insets(0,5,0,0);
! //
! //			GridBagConstraints gridBagConstraints85 = new GridBagConstraints();
! //			gridBagConstraints85.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints85.gridy = 6;
! //			gridBagConstraints85.gridx = 8;
! //			gridBagConstraints85.insets = new Insets(0,5,0,0);
! //
! //			// edit s.inoue 2010/01/07
! //			jLabel12 = new ExtendedLabel();
! //			jLabel12.setText("円");
! //			jLabel127 = new ExtendedLabel();
! //			jLabel127.setText("円");
! //			jLabel125 = new ExtendedLabel();
! //			jLabel125.setText("円");
! //			jLabel126 = new ExtendedLabel();
! //			jLabel126.setText("円");
! //			jLabel128 = new ExtendedLabel();
! //			jLabel128.setText("円");
! //
! //			jLabel119 = new ExtendedLabel();
! //			jLabel119.setText("単価（眼底検査）");
! //			jLabel119.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel118 = new ExtendedLabel();
! //			jLabel118.setText("単価（心電図検査）");
! //			jLabel118.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel117 = new ExtendedLabel();
! //			jLabel117.setText("単価（貧血検査）");
! //			jLabel117.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel114 = new ExtendedLabel();
! //			jLabel114.setText("眼底検査コード");
! //			jLabel114.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel114.setVisible(false);
! //			jLabel113 = new ExtendedLabel();
! //			jLabel113.setText("心電図検査コード");
! //			jLabel113.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel113.setVisible(false);
! //			jLabel112 = new ExtendedLabel();
! //			jLabel112.setText("貧血検査コード");
! //			jLabel112.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel112.setVisible(false);
! //			jLabel111 = new ExtendedLabel();
! //			jLabel111.setText("単価（基本的な健診）");
! //			jLabel111.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel110 = new ExtendedLabel();
! //			jLabel110.setText("委託料単価区分");
! //			jLabel110.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel19 = new ExtendedLabel();
! //			jLabel19.setText("記号");
! //			jLabel19.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel19.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
! //			jLabel19.setVisible(true);
! //			jLabel18 = new ExtendedLabel();
! //			jLabel18.setText("電話番号");
! //			jLabel18.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel17 = new ExtendedLabel();
! //			jLabel17.setText("地番方書");
! //			jLabel17.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel16 = new ExtendedLabel();
! //			jLabel16.setText("所在地");
! //			jLabel16.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel15 = new ExtendedLabel();
! //			jLabel15.setText("郵便番号");
! //			jLabel15.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel14 = new ExtendedLabel();
! //			jLabel14.setText("保険者名称");
! //			jLabel14.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel13 = new ExtendedLabel();
! //			jLabel13.setText("保険者番号");
! //			jLabel13.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jLabel130 = new ExtendedLabel();
! //			jLabel130.setText("単価（人間ドック）");
! //			jLabel130.setFont(new Font("Dialog", Font.PLAIN, 12));
! //
! //			// edit s.inoue 2010/01/07
! //			jLabelYukoukigen = new ExtendedLabel();
! //			jLabelYukoukigen.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
! //			jLabelYukoukigen.setText("有効期限");
! //			jLabelYukoukigen.setFont(new Font("Dialog", Font.PLAIN, 12));
! //
! //			jLabelTilda = new ExtendedLabel();
! //			jLabelTilda.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
! //			jLabelTilda.setText("〜");
! //			jLabelTilda.setFont(new Font("Dialog", Font.PLAIN, 12));
! //
! //			jPanel7 = new JPanel();
! //			jPanel7.setLayout(new GridBagLayout());
! //			jPanel7.setBorder(BorderFactory.createCompoundBorder(BorderFactory.createLineBorder(Color.gray, 1), BorderFactory.createEmptyBorder(5, 5, 5, 5)));
! //			jPanel7.add(jLabel110, gridBagConstraints37);
! //			jPanel7.add(getJComboBox_ItakuKubun(), gridBagConstraints14);
! //			jPanel7.add(jLabel122, gridBagConstraints17);
! //			jPanel7.add(jLabel111, gridBagConstraints36);
! //			jPanel7.add(getJTextField_KihonTanka(), gridBagConstraints5);
! //			jPanel7.add(jLabel12, gridBagConstraints6);
! //			jPanel7.add(jLabel117, gridBagConstraints43);
! //			jPanel7.add(getJTextField_HinketsuTanka(), gridBagConstraints7);
! //			jPanel7.add(jLabel125, gridBagConstraints13);
! //			jPanel7.add(jLabel118, gridBagConstraints44);
! //			jPanel7.add(getJTextField_SindenzuTanka(), gridBagConstraints8);
! //			jPanel7.add(jLabel126, gridBagConstraints15);
! //			jPanel7.add(jLabel119, gridBagConstraints45);
! //			jPanel7.add(jLabel130, gridBagConstraints46);
! //			jPanel7.add(getJTextField_GanteiTanka(), gridBagConstraints9);
! //			jPanel7.add(jLabel127, gridBagConstraints16);
! //			jPanel7.add(getJTextField_NingenDocTanka(), gridBagConstraints10);
! //			jPanel7.add(jLabel128, gridBagConstraints18);
! //			jPanel7.add(jLabelKihonNum, gridBagConstraints67);
! //			jPanel7.add(jLabelHinketuNum, gridBagConstraints68);
! //			jPanel7.add(jLabelSindenzuNum, gridBagConstraints69);
! //			jPanel7.add(jLabelGanteiNum, gridBagConstraints70);
! //			jPanel7.add(jLabelNingenDocNum, gridBagConstraints71);
! //			// add s.inoue 2009/10/01 単価選択
! //			jPanel7.add(getJPanelKihon(), gridBagConstraints62);
! //			jPanel7.add(getJPanelDoc(), gridBagConstraints63);
! //			jPanel7.add(getJTextField_TankaHantei(), gridBagConstraints64);
! //			// edit s.inoue 2010/01/07
! //			jPanel7.add(jLabelYukoukigen,gridBagConstraints65);
! //			jPanel7.add(getJTextField_YukoukigenFrom(),gridBagConstraints66);
! //			jPanel7.add(jLabelTilda,gridBagConstraints80);
! //			jPanel7.add(getJTextField_YukoukigenTo(),gridBagConstraints81);
! //			jPanel7.add(getJButton_Add(),gridBagConstraints82);
! //			jPanel7.add(getJButton_RegisterYukouKigen(),gridBagConstraints83);
! //			jPanel7.add(getJButton_RegisterYukouKigenEdit(),gridBagConstraints84);
! //			// add s.inoue 2010/01/14
! //			jPanel7.add(getJButton_RegisterYukouKigenDelete(),gridBagConstraints85);
! //		}
! //		return jPanel7;
! //	}
! //
! //	// add s.inoue 2009/10/01
! //	/**
! //	 * This method initializes jPanel
! //	 *
! //	 * @return javax.swing.JPanel
! //	 */
! //	private JPanel getJPanelKihon() {
! //		if (jPanelKihon == null) {
! //			jPanelKihon = new JPanel();
! //			// edit s.inoue 2010/01/07
! //			// jPanelKihon.setLayout(new BoxLayout(getJPanelKihon(), BoxLayout.X_AXIS));
! //			jPanelKihon.setLayout(new GridBagLayout());
! //			jPanelKihon.add(getJRadioButton_Kihon(), null);
! //		}
! //		return jPanelKihon;
! //	}
! //
! //	// add s.inoue 2009/10/01
! //	/**
! //	 * This method initializes jPanel1
! //	 *
! //	 * @return javax.swing.JPanel
! //	 */
! //	private JPanel getJPanelDoc() {
! //		if (jPanelDoc == null) {
! //			jPanelDoc = new JPanel();
! //			// edit s.inoue 2010/01/07
! //			// jPanelDoc.setLayout(new BoxLayout(getJPanelDoc(), BoxLayout.X_AXIS));
! //			jPanelDoc.setLayout(new GridBagLayout());
! //			jPanelDoc.add(getJRadioButton_Doc(), null);
! //		}
! //		return jPanelDoc;
! //	}
! //
! //	// add s.inoue 2009/10/01
! //	/**
! //	 * This method initializes jRadioButton_Male
! //	 *
! //	 * @return javax.swing.JRadioButton
! //	 */
! //	private ExtendedRadioButton getJRadioButton_Kihon() {
! //		if (jRadioButton_Kihon == null) {
! //			jRadioButton_Kihon = new ExtendedRadioButton();
! //			jRadioButton_Kihon.setText("1：基本健診");
! //			jRadioButton_Kihon.setPreferredSize(new Dimension(120, 20));
! //			jRadioButton_Kihon.addKeyListener(this);
! //			jRadioButton_Kihon.addItemListener(this);
! //			groupHantei.add(jRadioButton_Kihon);
! //		}
! //		return jRadioButton_Kihon;
! //	}
! //
! //	// add s.inoue 2009/10/01
! //	/**
! //	 * This method initializes jRadioButton_Female
! //	 *
! //	 * @return javax.swing.EventHandleRadioButton
! //	 */
! //	private ExtendedRadioButton getJRadioButton_Doc() {
! //		if (jRadioButton_Doc == null) {
! //			jRadioButton_Doc = new ExtendedRadioButton();
! //			jRadioButton_Doc.setText("2：人間ドック");
! //			jRadioButton_Doc.setPreferredSize(new Dimension(120, 20));
! //			jRadioButton_Doc.addItemListener(this);
! //			jRadioButton_Doc.addKeyListener(this);
! //			groupHantei.add(jRadioButton_Doc);
! //		}
! //		return jRadioButton_Doc;
! //	}
! //
! //	/**
! //	 * This method initializes jPanel8
! //	 *
! //	 * @return javax.swing.JPanel
! //	 */
! //	private JPanel getJPanel8() {
! //		if (jPanel8 == null) {
! //			GridBagConstraints gridBagConstraints66 = new GridBagConstraints();
! //			gridBagConstraints66.gridx = 4;
! //			gridBagConstraints66.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints66.gridy = 6;
! //			jLabelKigouNum = new ExtendedLabel();
! //			jLabelKigouNum.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
! //			jLabelKigouNum.setText("（全角40文字以内、半角可）");
! //			jLabelKigouNum.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			GridBagConstraints gridBagConstraints65 = new GridBagConstraints();
! //			gridBagConstraints65.gridx = 2;
! //			gridBagConstraints65.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints65.gridwidth = 2;
! //			gridBagConstraints65.gridy = 5;
! //			jLabelTelNum = new ExtendedLabel();
! //			jLabelTelNum.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
! //			jLabelTelNum.setText("（半角数字11桁以内）");
! //			jLabelTelNum.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			GridBagConstraints gridBagConstraints64 = new GridBagConstraints();
! //			gridBagConstraints64.gridx = 4;
! //			gridBagConstraints64.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints64.gridy = 4;
! //			jLabelTibanNum = new ExtendedLabel();
! //			jLabelTibanNum.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
! //			jLabelTibanNum.setText("（全角100文字以内、半角可）");
! //			jLabelTibanNum.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			GridBagConstraints gridBagConstraints63 = new GridBagConstraints();
! //			gridBagConstraints63.gridx = 4;
! //			gridBagConstraints63.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints63.gridy = 3;
! //			jLabelShozaitiNum = new ExtendedLabel();
! //			jLabelShozaitiNum.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
! //			jLabelShozaitiNum.setText("（全角100文字以内、半角可）");
! //			jLabelShozaitiNum.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			GridBagConstraints gridBagConstraints62 = new GridBagConstraints();
! //			gridBagConstraints62.gridx = 2;
! //			gridBagConstraints62.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints62.gridwidth = 2;
! //			gridBagConstraints62.gridy = 2;
! //			jLabelYubinNum = new ExtendedLabel();
! //			jLabelYubinNum.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
! //			jLabelYubinNum.setText("（半角数字7桁）");
! //			jLabelYubinNum.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			GridBagConstraints gridBagConstraints61 = new GridBagConstraints();
! //			gridBagConstraints61.gridx = 4;
! //			gridBagConstraints61.gridy = 1;
! //			jLabelHokenjyaNameNum = new ExtendedLabel();
! //			jLabelHokenjyaNameNum.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
! //			jLabelHokenjyaNameNum.setText("（全角100文字以内、半角可）");
! //			jLabelHokenjyaNameNum.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			GridBagConstraints gridBagConstraints58 = new GridBagConstraints();
! //			gridBagConstraints58.gridx = 3;
! //			gridBagConstraints58.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints58.gridy = 0;
! //			jLabelHokenjyaNum = new ExtendedLabel();
! //			jLabelHokenjyaNum.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
! //			jLabelHokenjyaNum.setText("（半角数字8桁）");
! //			jLabelHokenjyaNum.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			GridBagConstraints gridBagConstraints4 = new GridBagConstraints();
! //			gridBagConstraints4.gridx = 2;
! //			gridBagConstraints4.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints4.insets = new Insets(0, 5, 5, 0);
! //			gridBagConstraints4.gridy = 0;
! //			GridBagConstraints gridBagConstraints53 = new GridBagConstraints();
! //			gridBagConstraints53.gridx = 2;
! //			gridBagConstraints53.gridy = 0;
! //			GridBagConstraints gridBagConstraints52 = new GridBagConstraints();
! //			gridBagConstraints52.fill = GridBagConstraints.HORIZONTAL;
! //			gridBagConstraints52.gridy = 6;
! //			gridBagConstraints52.gridwidth = 3;
! //			gridBagConstraints52.gridx = 1;
! //			// edit s.inoue 2010/01/21
! //			GridBagConstraints gridBagConstraints54 = new GridBagConstraints();
! //			gridBagConstraints54.fill = GridBagConstraints.EAST;
! //			gridBagConstraints54.gridy = 6;
! //			gridBagConstraints54.gridx = 8;
! //
! //			// edit s.inoue 2010/01/21
! //			GridBagConstraints gridBagConstraints55 = new GridBagConstraints();
! //			gridBagConstraints55.fill = GridBagConstraints.EAST;
! //			gridBagConstraints55.gridy = 6;
! //			gridBagConstraints55.gridx = 7;
! //			gridBagConstraints55.insets = new Insets(0, 0, 0, 5);
! //
! //			GridBagConstraints gridBagConstraints12 = new GridBagConstraints();
! //			gridBagConstraints12.gridy = 5;
! //			gridBagConstraints12.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints12.gridx = 1;
! //			GridBagConstraints gridBagConstraints50 = new GridBagConstraints();
! //			gridBagConstraints50.fill = GridBagConstraints.HORIZONTAL;
! //			gridBagConstraints50.gridx = 1;
! //			gridBagConstraints50.gridy = 4;
! //			gridBagConstraints50.gridwidth = 3;
! //			GridBagConstraints gridBagConstraints10 = new GridBagConstraints();
! //			gridBagConstraints10.fill = GridBagConstraints.HORIZONTAL;
! //			gridBagConstraints10.gridx = 1;
! //			gridBagConstraints10.gridy = 3;
! //			gridBagConstraints10.gridwidth = 3;
! //			GridBagConstraints gridBagConstraints48 = new GridBagConstraints();
! //			gridBagConstraints48.gridy = 2;
! //			gridBagConstraints48.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints48.gridx = 1;
! //			GridBagConstraints gridBagConstraints47 = new GridBagConstraints();
! //			gridBagConstraints47.gridx = 1;
! //			gridBagConstraints47.gridy = 1;
! //			gridBagConstraints47.gridwidth = 3;
! //			GridBagConstraints gridBagConstraints46 = new GridBagConstraints();
! //			gridBagConstraints46.gridy = 0;
! //			gridBagConstraints46.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints46.gridx = 1;
! //			GridBagConstraints gridBagConstraints35 = new GridBagConstraints();
! //			gridBagConstraints35.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints35.gridy = 6;
! //			gridBagConstraints35.gridx = 0;
! //			GridBagConstraints gridBagConstraints34 = new GridBagConstraints();
! //			gridBagConstraints34.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints34.gridy = 5;
! //			gridBagConstraints34.gridx = 0;
! //			GridBagConstraints gridBagConstraints33 = new GridBagConstraints();
! //			gridBagConstraints33.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints33.gridy = 4;
! //			gridBagConstraints33.gridx = 0;
! //			GridBagConstraints gridBagConstraints32 = new GridBagConstraints();
! //			gridBagConstraints32.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints32.gridy = 3;
! //			gridBagConstraints32.gridx = 0;
! //			GridBagConstraints gridBagConstraints31 = new GridBagConstraints();
! //			gridBagConstraints31.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints31.gridy = 2;
! //			gridBagConstraints31.gridx = 0;
! //			GridBagConstraints gridBagConstraints30 = new GridBagConstraints();
! //			gridBagConstraints30.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints30.gridy = 1;
! //			gridBagConstraints30.gridx = 0;
! //			GridBagConstraints gridBagConstraints29 = new GridBagConstraints();
! //			gridBagConstraints29.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints29.gridy = 0;
! //			gridBagConstraints29.insets = new Insets(0, 0, 0, 10);
! //			gridBagConstraints29.gridx = 0;
! //
! //			// add s.inoue 2010/01/11
! //			GridBagConstraints gridBagConstraints68 = new GridBagConstraints();
! //			gridBagConstraints68.gridx = 5;
! //			gridBagConstraints68.gridy = 0;
! //			gridBagConstraints68.weightx = 1.0D;
! //
! //			jPanel8 = new JPanel();
! //			jPanel8.setLayout(new GridBagLayout());
! //			jPanel8.setBorder(BorderFactory.createCompoundBorder(BorderFactory.createLineBorder(Color.gray, 1), BorderFactory.createEmptyBorder(5, 5, 5, 5)));
! //			jPanel8.add(jLabel13, gridBagConstraints29);
! //			jPanel8.add(jLabel14, gridBagConstraints30);
! //			jPanel8.add(jLabel15, gridBagConstraints31);
! //			jPanel8.add(jLabel16, gridBagConstraints32);
! //			jPanel8.add(jLabel17, gridBagConstraints33);
! //			jPanel8.add(jLabel18, gridBagConstraints34);
! //			jPanel8.add(jLabel19, gridBagConstraints35);
! //			jPanel8.add(getJTextField_HokenjyaNumber(), gridBagConstraints46);
! //			jPanel8.add(getJTextField_HokenjyaName(), gridBagConstraints47);
! //			jPanel8.add(getJTextField_Zipcode(), gridBagConstraints48);
! //			jPanel8.add(getJTextField_Address(), gridBagConstraints10);
! //			jPanel8.add(getJTextField_Chiban(), gridBagConstraints50);
! //			jPanel8.add(getJTextField_TEL(), gridBagConstraints12);
! //			jPanel8.add(getJTextField_Code(), gridBagConstraints52);
! //			// edit s.inoue 2010/01/21
! //			jPanel8.add(getJButton_Register(), gridBagConstraints54);
! //			jPanel8.add(getJButton_Clear(), gridBagConstraints55);
! //
! //			jPanel8.add(getJButton_ORCA(), gridBagConstraints4);
! //			jPanel8.add(jLabelHokenjyaNum, gridBagConstraints58);
! //			jPanel8.add(jLabelHokenjyaNameNum, gridBagConstraints61);
! //			jPanel8.add(jLabelYubinNum, gridBagConstraints62);
! //			jPanel8.add(jLabelShozaitiNum, gridBagConstraints63);
! //			jPanel8.add(jLabelTibanNum, gridBagConstraints64);
! //			jPanel8.add(jLabelTelNum, gridBagConstraints65);
! //			jPanel8.add(jLabelKigouNum, gridBagConstraints66);
! //			jPanel8.add(getJRabelHidden(),gridBagConstraints68);
! //		}
! //		return jPanel8;
! //	}
! //
! //	/**
! //	 * This method initializes jPanel9
! //	 *
! //	 * @return javax.swing.JPanel
! //	 */
! //	private JPanel getJPanel9() {
! //		if (jPanel9 == null) {
! //			jPanel9 = new JPanel();
! //			jPanel9.setLayout(new GridBagLayout());
! //		}
! //		return jPanel9;
! //	}
! //
! //	/**
! //	 * This method initializes jButton_Clear
! //	 *
! //	 * @return jp.or.med.orca.jma_tokutei.common.component.ExtendedButton
! //	 */
! //	private ExtendedButton getJButton_Clear() {
! //		if (jButton_Clear == null) {
! //			jButton_Clear = new ExtendedButton();
! //			jButton_Clear.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jButton_Clear.setText("クリア(F2)");
! //			jButton_Clear.addActionListener(this);
! //		}
! //		return jButton_Clear;
! //	}
! //
! //	// add s.inoue 2010/01/22
! //	/**
! //	 * This method initializes jButton_Clear
! //	 *
! //	 * @return jp.or.med.orca.jma_tokutei.common.component.ExtendedButton
! //	 */
! //	private ExtendedButton getJButton_ClearAdd() {
! //		if (jButton_ClearAdd == null) {
! //			jButton_ClearAdd = new ExtendedButton();
! //			jButton_ClearAdd.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jButton_ClearAdd.setText("クリア(F2)");
! //			jButton_ClearAdd.addActionListener(this);
! //		}
! //		return jButton_ClearAdd;
! //	}
! //
! //	@Override
! //	public void focusGained(FocusEvent e) {
! //
! //	}
! //
! //	@Override
! //	public void focusLost(FocusEvent e) {
! //
! //	}
! //
! //	public void itemStateChanged(ItemEvent e) {
! //		// TODO 自動生成されたメソッド・スタブ
! //
! //	}
! //}
--- 2206,2209 ----
  		// TODO 自動生成されたメソッド・スタブ
  
  	}
! }  //  @jve:decl-index=0:visual-constraint="10,10"
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JHokenjyaMasterMaintenanceEditFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JHokenjyaMasterMaintenanceEditFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JHokenjyaMasterMaintenanceEditFrameCtrl.java	Tue Apr 27 10:55:44 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JHokenjyaMasterMaintenanceEditFrameCtrl.java	Mon Apr 26 11:18:16 2010
***************
*** 26,54 ****
  
  import org.apache.log4j.Logger;
  
- import com.sun.org.apache.xalan.internal.xsltc.compiler.util.ErrorMessages;
- 
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedCheckBox;
- import jp.or.med.orca.jma_tokutei.common.component.ExtendedRadioButton;
- import jp.or.med.orca.jma_tokutei.common.component.ExtendedTextField;
- import jp.or.med.orca.jma_tokutei.common.component.TitleLabel;
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
- import jp.or.med.orca.jma_tokutei.common.convert.JZenkakuKatakanaToHankakuKatakana;
  import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
  import jp.or.med.orca.jma_tokutei.common.errormessage.RETURN_VALUE;
- import jp.or.med.orca.jma_tokutei.common.event.JEnterEvent;
- import jp.or.med.orca.jma_tokutei.common.event.JSingleDoubleClickEvent;
  import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
- import jp.or.med.orca.jma_tokutei.common.frame.ViewSettingsKey;
  import jp.or.med.orca.jma_tokutei.common.sql.JConnection;
  import jp.or.med.orca.jma_tokutei.common.sql.dao.DaoFactory;
  import jp.or.med.orca.jma_tokutei.common.sql.dao.THokenjyaDao;
  import jp.or.med.orca.jma_tokutei.common.sql.model.THokenjya;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTable;
- import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellPosition;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellRowRenderer;
- import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableScrollPanel;
  import jp.or.med.orca.jma_tokutei.common.validate.JValidate;
  import jp.or.med.orca.jma_tokutei.common.app.JApplication;
  
--- 26,43 ----
***************
*** 80,86 ****
  	private ArrayList<Hashtable<String, String>> result;
  
  	/* フォーカス移動制御 */
! 	private JFocusTraversalPolicy focusTraversalPolicy = null;
  
  	// edit s.inoue 2010/01/29
  	private String[] header = {
--- 69,75 ----
  	private ArrayList<Hashtable<String, String>> result;
  
  	/* フォーカス移動制御 */
! 	private JFocusTraversalPolicy focusTraversalPolicy = null;  //  @jve:decl-index=0:
  
  	// edit s.inoue 2010/01/29
  	private String[] header = {
***************
*** 124,136 ****
  
  		// add s.inoue 2010/01/12
  		initilizeTableSettings(hokenjyaNumber);
- 		functionListner();
- 
  		jTextField_HokenjyaNumber.setBackground(ViewSettings.getRequiedItemBgColor());
  		this.jButton_Add.setVisible(false);
  		// del s.inoue 2010/02/02
  //		this.jButton_RegisterYukoukigen.setVisible(false);
  		this.jButton_RegisterYukoukigenEdit.setVisible(false);
  		// edit s.inoue 2010/01/21
  		this.jButton_RegisterYukoukigenDelete.setVisible(false);
  		setModeAppearSettings(true);
--- 113,124 ----
  
  		// add s.inoue 2010/01/12
  		initilizeTableSettings(hokenjyaNumber);
  		jTextField_HokenjyaNumber.setBackground(ViewSettings.getRequiedItemBgColor());
  		this.jButton_Add.setVisible(false);
  		// del s.inoue 2010/02/02
  //		this.jButton_RegisterYukoukigen.setVisible(false);
  		this.jButton_RegisterYukoukigenEdit.setVisible(false);
+ 
  		// edit s.inoue 2010/01/21
  		this.jButton_RegisterYukoukigenDelete.setVisible(false);
  		setModeAppearSettings(true);
***************
*** 144,156 ****
  		super();
  
  		mode = ADD_MODE;
! 		// move s.inoue 2010/02/16
  		this.jButton_ORCA.setVisible(false);
  		this.jButton_Add.setVisible(false);
  
  		init();
  
! 		// del s.inoue 2010/01/21
  		// jPanel11.add(new JSimpleTableScrollPanel(model));
  		// add s.inoue 2010/01/12
  		initilizeTableSettings(hokenjyaNumber);
--- 132,144 ----
  		super();
  
  		mode = ADD_MODE;
! // move s.inoue 2010/02/16
  		this.jButton_ORCA.setVisible(false);
  		this.jButton_Add.setVisible(false);
  
  		init();
  
! 		// del s.inoue 2010/01/20
  		// jPanel11.add(new JSimpleTableScrollPanel(model));
  		// add s.inoue 2010/01/12
  		initilizeTableSettings(hokenjyaNumber);
***************
*** 168,175 ****
  		// add s.inoue 2010/01/20
  		initializeTanka = true;
  		setModeAppearSettings(true);
- 		// move s.inoue 2010/04/14
- 		functionListner();
  	}
  
  	// add s.inoue 2010/01/22
--- 156,161 ----
***************
*** 199,210 ****
  		// add s.inoue 2010/01/14
  		setTankaTable(mode,hokenjyaNumber);
  
- 		functionListner();
- 
  		this.jTextField_HokenjyaNumber.addKeyListener(new KeyAdapter(){
  
  			@Override
! 			public void keyPressed(KeyEvent keyEvent) {
  				String number =
  					JHokenjyaMasterMaintenanceEditFrameCtrl.
  					this.jTextField_HokenjyaNumber.getText();
--- 185,194 ----
  		// add s.inoue 2010/01/14
  		setTankaTable(mode,hokenjyaNumber);
  
  		this.jTextField_HokenjyaNumber.addKeyListener(new KeyAdapter(){
  
  			@Override
! 			public void keyPressed(KeyEvent arg0) {
  				String number =
  					JHokenjyaMasterMaintenanceEditFrameCtrl.
  					this.jTextField_HokenjyaNumber.getText();
***************
*** 284,289 ****
--- 268,279 ----
  		}
  	}
  
+ //	// add s.inoue 2010/02/01
+ //	/* 新規追加時、ヘッダー情報（保険者情報）を取得し直す */
+ //	private void setHeaderDefaultValue(){
+ //
+ //	}
+ 
  	// add s.inoue 2010/01/14
  	/* 単価コントロール表示処理 */
  	private void setTankaTable(int pmode,String hokenjyaNumber){
***************
*** 566,572 ****
  		}else if (mode == CHANGE_MODE){
  			this.focusTraversalPolicy.setDefaultComponent(jTextField_HokenjyaName);
  		}
- 
  		// edit s.inoue 2010/02/16
  //		this.focusTraversalPolicy.addComponent(jTextField_HokenjyaNumber);
  //		this.focusTraversalPolicy.addComponent(jButton_ORCA);
--- 556,561 ----
***************
*** 694,717 ****
  //		}
  	}
  
- 	private void functionListner(){
- 		// edit s.inoue 2010/04/21
- 		boolean flg = false;
- 
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			Component comp = focusTraversalPolicy.getComponent(i);
- 
- 			if (comp.equals(jTextField_HokenjyaNumber)){
- 				if (!flg)
- 					comp.addKeyListener(this);
- 
- 				flg = true;
- 			}else{
- 				comp.addKeyListener(this);
- 			}
- 		}
- 	}
- 
  	/**
  	 * 保険者番号が入力された場合
  	 */
--- 683,688 ----
***************
*** 745,751 ****
  		// edit s.inoue 2010/01/27
  		// }else{
  			// add s.inoue 2010/01/15
- 
  			// 有効期限必須
  			if (data.getYukouKigenFrom().equals("")){
  				JErrorMessage.show(
--- 716,721 ----
***************
*** 807,825 ****
  		String inputHokenjyaNumber = validatedData.getHokenjyaNumber();
  		// edit s.inoue 2010/01/12
  		String inputHokenjyaHistoryNumber = validatedData.getHknjyaHistoryNumber();
- 
- 		String inputItakuKubun = jComboBox_ItakuKubun.getSelectedItem().toString().substring(0, 1);
  		// add s.inoue 2010/01/19
! 		boolean itakuEditFlg = false;
! 		String itakuKubunList = getmodelColumnNumber(4);
! 		if (!itakuKubunList.equals(inputItakuKubun))
! 			itakuEditFlg = true;
! 
  
  		/* 登録済みの保険者か確認する。 */
  
  		StringBuilder sbCount = new StringBuilder();
! 		sbCount.append("select count(HKNJANUM) as ROWCOUNT from T_HOKENJYA ");
  		sbCount.append(" where HKNJANUM = ? ");
  		// del s.inoue 2010/01/19
  		// sbCount.append("and HKNJYA_HISTORY_NO = ?");
--- 777,789 ----
  		String inputHokenjyaNumber = validatedData.getHokenjyaNumber();
  		// edit s.inoue 2010/01/12
  		String inputHokenjyaHistoryNumber = validatedData.getHknjyaHistoryNumber();
  		// add s.inoue 2010/01/19
! 		String inputItakuKubun = jComboBox_ItakuKubun.getSelectedItem().toString().substring(0, 1);
  
  		/* 登録済みの保険者か確認する。 */
  
  		StringBuilder sbCount = new StringBuilder();
! 		sbCount.append("select count(HKNJANUM)as ROWCOUNT from T_HOKENJYA ");
  		sbCount.append(" where HKNJANUM = ? ");
  		// del s.inoue 2010/01/19
  		// sbCount.append("and HKNJYA_HISTORY_NO = ?");
***************
*** 900,905 ****
--- 864,870 ----
  					getmodelColumnNumber(COLUMUN_HISTORY_NO),
  					String.valueOf(jComboBox_ItakuKubun.getSelectedIndex()+1)
  					);
+ 
  //			boolean updateflg =(jTextField_YukoukigenFrom.getText().equals(
  //					getmodelColumnNumber(COLUMUN_YUKOUKIGEN_FROM)) &&
  //				jTextField_YukoukigenTo.getText().equals(
***************
*** 922,942 ****
  					pmode = ADD_MODE_TANKA;
  					controlSettingData(pmode);
  
- // del s.inoue 2010/04/21
- //				// edit s.inoue 2010/04/21
- //				}else if (Ret == RETURN_VALUE.NO){
- 
  //					if (!this.validateData(pmode)) {
  //						return;
  //					}
  				}else if (Ret == RETURN_VALUE.CANCEL){
  					return;
  				}
! 			// edit s.inoue 2010/01/30
  			}else if((count > 0) &&
  				(pmode == CHANGE_MODE_TANKA) &&
! 				// edit s.inoue 2010/02/02
! 				duplicateFlg){
  					JErrorMessage.show("M3163", this);
  					return;
  			// edit s.inoue 2010/01/29
--- 887,903 ----
  					pmode = ADD_MODE_TANKA;
  					controlSettingData(pmode);
  
  //					if (!this.validateData(pmode)) {
  //						return;
  //					}
  				}else if (Ret == RETURN_VALUE.CANCEL){
  					return;
  				}
! 			// edit s.inoue 2010/02/02
  			}else if((count > 0) &&
  				(pmode == CHANGE_MODE_TANKA) &&
! 					// edit s.inoue 2010/02/02
! 					duplicateFlg){
  					JErrorMessage.show("M3163", this);
  					return;
  			// edit s.inoue 2010/01/29
***************
*** 1062,1073 ****
  					buffer.append("TANKA_HANTEI = "+ JQueryConvert.queryConvertAppendComma(validatedData.getTankaHantei()));
  					buffer.append("HKNJYA_LIMITDATE_START = "+ JQueryConvert.queryConvertAppendComma(validatedData.getYukouKigenFrom()));
  					buffer.append("HKNJYA_LIMITDATE_END = "+ JQueryConvert.queryConvertAppendComma(validatedData.getYukouKigenTo()));
- 					// add s.inoue 2010/04/21
- 					if (itakuEditFlg)
- 						buffer.append(" ITAKU_KBN = " +JQueryConvert.queryConvertAppendComma(validatedData.getItakuKubun()));
- 
  					buffer.append("YUKOU_FLG = "+ JQueryConvert.queryConvert("1"));
- 
  				}else{
  					buffer.append("HKNJANAME = "+ JQueryConvert.queryConvertAppendBlankAndComma(validatedData.getHokenjyaName()));
  					buffer.append("POST = "+ JQueryConvert.queryConvertAppendBlankAndComma(validatedData.getZipcode()));
--- 1023,1029 ----
***************
*** 1085,1094 ****
  					// edit s.inoue 2010/01/21
  				if (pmode == CHANGE_MODE_TANKA){
  //					if (modeYukouKigen == CHANGE_MODE){
! 						// edit s.inoue 2010/04/21
! 					if (!itakuEditFlg)
  						buffer.append(" AND ITAKU_KBN = " +JQueryConvert.queryConvert(validatedData.getItakuKubun()));
- 
  						buffer.append(" AND HKNJYA_HISTORY_NO = " +JQueryConvert.queryConvert(String.valueOf(inputHokenjyaHistoryNumber)));
  					}
  		}
--- 1041,1048 ----
  					// edit s.inoue 2010/01/21
  				if (pmode == CHANGE_MODE_TANKA){
  //					if (modeYukouKigen == CHANGE_MODE){
! 						// edit s.inoue 2010/01/21
  						buffer.append(" AND ITAKU_KBN = " +JQueryConvert.queryConvert(validatedData.getItakuKubun()));
  						buffer.append(" AND HKNJYA_HISTORY_NO = " +JQueryConvert.queryConvert(String.valueOf(inputHokenjyaHistoryNumber)));
  					}
  		}
***************
*** 1280,1292 ****
  		boolean rettanka = false;
  		boolean rethokenjya = false;
  
- 		// edit s.inoue 2010/04/27
- 		String address = jTextField_Address.getText();
- 		if (!JValidate.isAllZenkaku(address)){
- 			address = JZenkakuKatakanaToHankakuKatakana.eisukigoHanToZen(address);
- 		}
- 		address = JValidate.encodeUNICODEtoConvert(address);
- 
  		rettanka= validatedData.setHokenjyaName(jTextField_HokenjyaName.getText())
  			&& validatedData.setHokenjyaNumber(jTextField_HokenjyaNumber.getText())
  			&& validatedData.setHonninGairai(jTextField_HonninGairai.getText())
--- 1234,1239 ----
***************
*** 1296,1302 ****
  			&& validatedData.setTEL(jTextField_TEL.getText())
  			&& validatedData.setZipcode(jTextField_Zipcode.getText())
  			// edit s.inoue 2010/02/01
! 			&& validatedData.setAddress(address)
  			&& validatedData.setChiban(jTextField_Chiban.getText())
  			&& validatedData.setKigo(jTextField_Kigo.getText());
  
--- 1243,1249 ----
  			&& validatedData.setTEL(jTextField_TEL.getText())
  			&& validatedData.setZipcode(jTextField_Zipcode.getText())
  			// edit s.inoue 2010/02/01
! 			&& validatedData.setAddress(jTextField_Address.getText())
  			&& validatedData.setChiban(jTextField_Chiban.getText())
  			&& validatedData.setKigo(jTextField_Kigo.getText());
  
***************
*** 1340,1346 ****
  			for (int i = 0; i < model.getRowCount(); i++) {
  				String itakuTable = (String) model.getData(i,COLUMUN_ITAKU_KBN);
  				String historyNoTable = (String) model.getData(i,COLUMUN_HISTORY_NO);
! 
  				// edit s.inoue 2010/02/09
  				if((itakuTable.equals(itakuKbn) &&
  						!(historyNoTable.equals(historyNo)))){
--- 1287,1296 ----
  			for (int i = 0; i < model.getRowCount(); i++) {
  				String itakuTable = (String) model.getData(i,COLUMUN_ITAKU_KBN);
  				String historyNoTable = (String) model.getData(i,COLUMUN_HISTORY_NO);
! 				System.out.println(
! 						"選択委託:" + itakuKbn + "選択履歴:" + historyNo +
! 						"委託:" + itakuTable + "履歴:" + historyNoTable
! 						);
  				// edit s.inoue 2010/02/09
  				if((itakuTable.equals(itakuKbn) &&
  						!(historyNoTable.equals(historyNo)))){
***************
*** 1348,1385 ****
  							(String) model.getData(i,COLUMUN_YUKOUKIGEN_FROM));
  					int yukouKigenToTable = Integer.parseInt(
  							(String) model.getData(i,COLUMUN_YUKOUKIGEN_TO));
! //				if(!(itakuTable.equals(itakuKbn) &&
! //						historyNoTable.equals(historyNo))){
! //					int yukouKigenFromTable = Integer.parseInt(
! //							(String) model.getData(i,COLUMUN_YUKOUKIGEN_FROM));
! //					int yukouKigenToTable = Integer.parseInt(
! //							(String) model.getData(i,COLUMUN_YUKOUKIGEN_TO));
! 				// edit s.inoue 2010/02/10
! 				if ((yukouKigenFromTable <= Integer.valueOf(yukouKigenFrom) &&
! 						 Integer.valueOf(yukouKigenFrom) <= yukouKigenToTable ) ||
! 
! 					(yukouKigenFromTable <= Integer.valueOf(yukouKigenTo) &&
! 						 Integer.valueOf(yukouKigenTo) <= yukouKigenToTable ) ||
! 					// edit s.inoue 2010/02/09
! 					((yukouKigenFromTable >= Integer.valueOf(yukouKigenFrom)) &&
! 						(yukouKigenToTable <= Integer.valueOf(yukouKigenTo)))){
! 					retflg = true;
! 					break;
! 				}
! //					if ((yukouKigenFromTable <= Integer.valueOf(yukouKigenFrom) &&
! //							 Integer.valueOf(yukouKigenFrom) <= yukouKigenToTable ) ||
! //						(yukouKigenFromTable <= Integer.valueOf(yukouKigenTo) &&
! //							 Integer.valueOf(yukouKigenTo) <= yukouKigenToTable ) ||
! //						((yukouKigenFromTable >= Integer.valueOf(yukouKigenFrom)) &&
! //							(yukouKigenFromTable >= Integer.valueOf(yukouKigenFrom)))){
! //						retflg = true;
! //						break;
! //					}
  				}
  			}
  		return retflg;
  	}
- 
  	/**
  	 * ORCAボタン
  	 */
--- 1298,1322 ----
  							(String) model.getData(i,COLUMUN_YUKOUKIGEN_FROM));
  					int yukouKigenToTable = Integer.parseInt(
  							(String) model.getData(i,COLUMUN_YUKOUKIGEN_TO));
! 
! 					System.out.println(((yukouKigenFromTable <= Integer.valueOf(yukouKigenFrom) &&
! 							 Integer.valueOf(yukouKigenFrom) <= yukouKigenToTable)));
! 
! 					if ((yukouKigenFromTable <= Integer.valueOf(yukouKigenFrom) &&
! 							 Integer.valueOf(yukouKigenFrom) <= yukouKigenToTable ) ||
! 
! 						(yukouKigenFromTable <= Integer.valueOf(yukouKigenTo) &&
! 							 Integer.valueOf(yukouKigenTo) <= yukouKigenToTable ) ||
! 						// edit s.inoue 2010/02/09
! 						((yukouKigenFromTable >= Integer.valueOf(yukouKigenFrom)) &&
! 							(yukouKigenToTable <= Integer.valueOf(yukouKigenTo)))){
! 						retflg = true;
! 						break;
! 					}
  				}
  			}
  		return retflg;
  	}
  	/**
  	 * ORCAボタン
  	 */
***************
*** 1689,1704 ****
  	public void actionPerformed(ActionEvent e) {
  		Object source = e.getSource();
  		if(source == jButton_Add){
- 			logger.info(jButton_Add.getText());
  			pushedAddButton();
  		// del s.inoue 2010/02/02
  //		}else if (source == jButton_RegisterYukoukigen){
  //			pushedYukoukigenButton();
  		}else if (source == jButton_RegisterYukoukigenEdit){
- 			logger.info(jButton_RegisterYukoukigenEdit.getText());
  			pushedYukoukigenEditButton();
  		}else if (source == jButton_RegisterYukoukigenDelete){
- 			logger.info(jButton_RegisterYukoukigenDelete.getText());
  			pushedYukoukigenDeleteButton();
  		}else if (source == jButton_End) {
  			logger.info(jButton_End.getText());
--- 1626,1638 ----
***************
*** 1734,1787 ****
  //			}
  	}
  
- 	// edit s.inoue 2010/04/05
- 	@Override
- 	public void focusLost(FocusEvent event) {
- 		Object source = event.getSource();
- 
- 		// add s.inoue 2010/03/29
- 		if(source.equals(this.jTextField_Zipcode)){
- 			if (jTextField_Zipcode.getText().equals(""))
- 				return;
- 
- 			String zipText = setZipCodeAddress(this.jTextField_Zipcode.getText());
- 			if (zipText.equals(""))
- 				return;
- 
- 			jTextField_Address.setText(zipText);
- 		}
- 	}
- 
- 	// edit s.inoue 2010/04/05
- 	private String setZipCodeAddress(String zipCode){
- 
- 		ArrayList<Hashtable<String, String>> result = new ArrayList<Hashtable<String, String>>();
- 		Hashtable<String, String> resultItem = new Hashtable<String, String>();
- 
- 		StringBuilder sb = new StringBuilder();
- 
- 		sb.append("SELECT ADDRESS FROM T_POST,");
- 		sb.append("(SELECT SUBSTRING(POST_CD FROM 1 FOR 3) || SUBSTRING(POST_CD FROM 5 FOR 4) POSTCD,");
- 		sb.append(" POST_CD SP_POSTCD FROM T_POST) SUB_POST");
- 		sb.append(" where SUB_POST.POSTCD = ");
- 		sb.append(JQueryConvert.queryConvert(zipCode));
- 		sb.append(" and SUB_POST.SP_POSTCD = T_POST.POST_CD ");
- 
- 		try {
- 			result = JApplication.systemDatabase.sendExecuteQuery(sb.toString());
- 		} catch (SQLException e) {
- 			logger.error(e.getMessage());
- 			e.printStackTrace();
- 		}
- 
- 		if (result.size() <= 0)
- 			return "";
- 
- 		resultItem = result.get(0);
- 		return resultItem.get("ADDRESS");
- 
- 	}
- 
  	// add s.inoue 2009/10/01
  	// ラジオボタンイベント
  	public void itemStateChanged(ItemEvent e) {
--- 1668,1673 ----
***************
*** 1914,3582 ****
  		}
  	}
  
! 	@Override
! 	public void keyPressed(KeyEvent keyEvent) {
! 
! 		switch(keyEvent.getKeyCode()){
! 		case KeyEvent.VK_F1:
! 			logger.info(jButton_End.getText());
! 			pushedEndButton(null);
! 			break;
! 		case KeyEvent.VK_F2:
! 			logger.info(jButton_Clear.getText());
! 			pushedClearButton(null);
! 			break;
! 		case KeyEvent.VK_F7:
! 			if(jButton_Add.isVisible()){
! 				logger.info(jButton_Add.getText());
! 				pushedAddButton();
! 			}
! 			break;
! 		case KeyEvent.VK_F9:
! 			if(jButton_RegisterYukoukigenDelete.isVisible()){
! 				logger.info(jButton_RegisterYukoukigenDelete.getText());
! 				pushedYukoukigenDeleteButton();
! 			}
! 			break;
! 		case KeyEvent.VK_F12:
! 			if(jButton_RegisterYukoukigenEdit.isVisible()){
! 				logger.info(jButton_RegisterYukoukigenEdit.getText());
! 				pushedYukoukigenEditButton();
! 			// edit s.inoue 2010/04/14
! 			}else if (jButton_RegisterAdd.isVisible() && (mode == ADD_MODE)){
! 				logger.info(jButton_RegisterAdd.getText());
! 				register(mode);
! 			}
! 			break;
! 		case KeyEvent.VK_F11:
! 			// edit s.inoue 2010/04/14
! 			if (jButton_Register.isVisible()){
! 				logger.info(jButton_Register.getText());
! 				register(mode);
! 			}
! 			break;
! 		}
! 	}
! }
! // edit s.inoue 2010/02/02
! //package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
! //
! //import java.awt.Color;
! //import java.awt.Component;
! //import java.awt.Dimension;
! //import java.awt.event.*;
! //import java.lang.reflect.InvocationTargetException;
! //import java.sql.SQLException;
! //import java.text.NumberFormat;
! //import java.util.*;
! //
! //import javax.swing.ButtonGroup;
! //import javax.swing.JCheckBox;
! //import javax.swing.JRadioButton;
! //import javax.swing.JScrollPane;
! //import javax.swing.JTable;
! //import javax.swing.JViewport;
! //import javax.swing.ListSelectionModel;
! //import javax.swing.event.ListSelectionEvent;
! //import javax.swing.event.ListSelectionListener;
! //import javax.swing.table.DefaultTableCellRenderer;
! //import javax.swing.table.DefaultTableModel;
! //import javax.swing.table.TableColumnModel;
! //import javax.swing.table.TableModel;
! //import javax.swing.table.TableRowSorter;
! //
! //import org.apache.log4j.Logger;
! //
! //import jp.or.med.orca.jma_tokutei.common.component.ExtendedCheckBox;
! //import jp.or.med.orca.jma_tokutei.common.component.ExtendedRadioButton;
! //import jp.or.med.orca.jma_tokutei.common.component.ExtendedTextField;
! //import jp.or.med.orca.jma_tokutei.common.component.TitleLabel;
! //import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
! //import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
! //import jp.or.med.orca.jma_tokutei.common.errormessage.RETURN_VALUE;
! //import jp.or.med.orca.jma_tokutei.common.event.JEnterEvent;
! //import jp.or.med.orca.jma_tokutei.common.event.JSingleDoubleClickEvent;
! //import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
! //import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
! //import jp.or.med.orca.jma_tokutei.common.frame.ViewSettingsKey;
! //import jp.or.med.orca.jma_tokutei.common.sql.JConnection;
! //import jp.or.med.orca.jma_tokutei.common.sql.dao.DaoFactory;
! //import jp.or.med.orca.jma_tokutei.common.sql.dao.THokenjyaDao;
! //import jp.or.med.orca.jma_tokutei.common.sql.model.THokenjya;
! //import jp.or.med.orca.jma_tokutei.common.table.JSimpleTable;
! //import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellPosition;
! //import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellRowRenderer;
! //import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableScrollPanel;
! //import jp.or.med.orca.jma_tokutei.common.validate.JValidate;
! //import jp.or.med.orca.jma_tokutei.common.app.JApplication;
! //
! ///**
! // * 保険者情報の編集のコントロール
! // */
! //public class JHokenjyaMasterMaintenanceEditFrameCtrl extends
! //		JHokenjyaMasterMaintenanceEditFrame {
! //
! //	private JHokenjyaMasterMaintenanceEditFrameData validatedData = new JHokenjyaMasterMaintenanceEditFrameData();  //  @jve:decl-index=0:
! //	private static org.apache.log4j.Logger logger =	Logger.getLogger(JHokenjyaMasterMaintenanceEditFrameCtrl.class);
! //	private int mode;
! //	private static final int ADD_MODE = 1;
! //	private static final int CHANGE_MODE = 2;
! //	private static final int ADD_MODE_TANKA = 3;
! //	private static final int CHANGE_MODE_TANKA = 4;
! //
! //	// add s.inoue 2010/01/12
! //	private int modeYukouKigen = 0;
! //
! //	// add s.inoue 2010/01/20
! //	private boolean initializeTanka = false;
! //
! //	// edit s.inoue 2009/10/01
! //	private String[] itakuKubunStr = { "1:個別", "2:集団" };
! //	private JSimpleTable model = new JSimpleTable();
! //	private DefaultTableModel dmodel = null;
! //	private TableRowSorter<TableModel> sorter =null;
! //	private ArrayList<Hashtable<String, String>> result;
! //
! //	/* フォーカス移動制御 */
! //	private JFocusTraversalPolicy focusTraversalPolicy = null;
! //
! //	// edit s.inoue 2010/01/29
! //	private String[] header = {
! //		"有効/無効","有効期限開始","有効期限終了","履歴番号","委託単価区分","基本的な健診","貧血検査","心電図検査","眼底検査","人間ドック" };
! //	// 検索ボタン押下時のSQLで使用
! //	private static final String[] TABLE_COLUMNS = {
! //		"YUKOU_FLG","HKNJYA_LIMITDATE_START","HKNJYA_LIMITDATE_END","HKNJYA_HISTORY_NO","ITAKU_KBN",
! //		"TANKA_KIHON","TANKA_HINKETU","TANKA_SINDENZU","TANKA_GANTEI","TANKA_NINGENDOC" };
! //	Object[][] rowcolumn = null;
! //
! //	private ExtendedCheckBox JRadioYukou = new ExtendedCheckBox();
! //	private THokenjyaDao tHokenjyaDao = null;
! //
! //	// add s.inoue 2010/01/13
! //	private ButtonGroup radioButtonGroup = new ButtonGroup();
! //	private String hokenjyaNumber =  "";
! //	// add s.inoue 2010/01/13
! //	ArrayList<Integer> arrYukou = new ArrayList<Integer>();
! //	// del s.inoue 2010/01/14
! //	// private ExtendedCheckBox checkedTable = new ExtendedCheckBox();
! //
! //	// add s.inoue 2010/01/15
! //	private static final String TANKA_HANTEI_KIHON = "1";
! //	private static final String TANKA_HANTEI_DOC = "2";
! //
! //	private static final int COLUMUN_HISTORY_NO = 3;
! //	private static final int COLUMUN_ITAKU_KBN = 4;
! //
! //	/**
! //	 * 保険者情報追加の場合のコンストラクタ（遷移元：マスタメンテナンス）
! //	 */
! //	public JHokenjyaMasterMaintenanceEditFrameCtrl() {
! //		super();
! //
! //		mode = ADD_MODE;
! //		init();
! //
! //		// jPanel11.add(new JSimpleTableScrollPanel(model));
! //
! //		// add s.inoue 2010/01/12
! //		initilizeTableSettings(hokenjyaNumber);
! //		functionListner();
! //
! //		jTextField_HokenjyaNumber.setBackground(ViewSettings.getRequiedItemBgColor());
! //		this.jButton_Add.setVisible(false);
! //		this.jButton_RegisterYukoukigen.setVisible(false);
! //		this.jButton_RegisterYukoukigenEdit.setVisible(false);
! //		// edit s.inoue 2010/01/21
! //		this.jButton_RegisterYukoukigenDelete.setVisible(false);
! //		setModeAppearSettings(true);
! //	}
! //
! //	/**
! //	 * 保険者情報追加の場合のコンストラクタ（遷移元：個人情報登録フレーム）
! //	 */
! //	public JHokenjyaMasterMaintenanceEditFrameCtrl(
! //			JKojinRegisterFrameData ptData) {
! //		super();
! //
! //		mode = ADD_MODE;
! //		init();
! //
! //		// del s.inoue 2010/01/21
! //		// jPanel11.add(new JSimpleTableScrollPanel(model));
! //		// add s.inoue 2010/01/12
! //		initilizeTableSettings(hokenjyaNumber);
! //
! //		functionListner();
! //
! //		jTextField_HokenjyaNumber.setText(ptData.getHokenjyaNumber());
! //		jTextField_HokenjyaNumber.setBackground(ViewSettings.getRequiedItemBgColor());
! //
! //		this.jButton_ORCA.setVisible(false);
! //		this.jButton_Add.setVisible(false);
! //		this.jButton_RegisterYukoukigen.setVisible(false);
! //		this.jButton_RegisterYukoukigenEdit.setVisible(false);
! //		// edit s.inoue 2010/01/21
! //		this.jButton_RegisterYukoukigenDelete.setVisible(false);
! //		// add s.inoue 2010/01/20
! //		initializeTanka = true;
! //		setModeAppearSettings(true);
! //	}
! //
! //	// add s.inoue 2010/01/22
! //	private void setModeAppearSettings(boolean pflg){
! //		this.jButton_ClearAdd.setVisible(pflg);
! //		this.jButton_RegisterAdd.setVisible(pflg);
! //		this.jButton_Register.setVisible(!pflg);
! //		this.jButton_Clear.setVisible(!pflg);
! //	}
! //	/**
! //	 * 保険者情報変更の場合のコンストラクタ（遷移元：マスタメンテナンス）
! //	 */
! //	public JHokenjyaMasterMaintenanceEditFrameCtrl(String hokenjyaNumber) {
! //
! //		super();
! //
! //		mode = CHANGE_MODE;
! //		init();
! //
! //		// add s.inoue 2010/01/12
! //		initilizeTableSettings(hokenjyaNumber);
! //
! //		// 遷移元フレームから得た保険者番号から既存のデータを取得
! //		jTextField_HokenjyaNumber.setText(hokenjyaNumber);
! //		jTextField_HokenjyaNumber.setEditable(false);
! //
! //		// add s.inoue 2010/01/14
! //		setTankaTable(hokenjyaNumber);
! //
! //		functionListner();
! //
! //		this.jTextField_HokenjyaNumber.addKeyListener(new KeyAdapter(){
! //
! //			@Override
! //			public void keyPressed(KeyEvent arg0) {
! //				String number =
! //					JHokenjyaMasterMaintenanceEditFrameCtrl.
! //					this.jTextField_HokenjyaNumber.getText();
! //
! //				if (number == null || number.isEmpty()) {
! //					JHokenjyaMasterMaintenanceEditFrameCtrl.this.jButton_ORCA.setEnabled(false);
! //				}
! //			}
! //		});
! //
! //		this.jButton_ORCA.setVisible(false);
! //		// add s.inoue 2010/01/20
! //		initializeTanka = true;
! //
! //		// add s.inoue 2010/01/21
! //		initilizeFocus();
! //		setModeAppearSettings(false);
! //	}
! //
! //	// add s.inoue 2010/01/14
! //	private void initilizeTableSettings(String hokenjyaNumber){
! //
! //		// edit s.inoue 2010/01/21
! //		initilizeFocus();
! //
! //		// edit s.inoue 2010/01/14
! //		this.hokenjyaNumber = hokenjyaNumber;
! //
! //		/* T_HOKENJYA Dao を作成する。 */
! //		try {
! //			tHokenjyaDao = (THokenjyaDao) DaoFactory.createDao(JApplication.kikanDatabase.getMConnection(), new THokenjya());
! //		} catch (Exception ex) {
! //			logger.error(ex.getMessage());
! //		}
! //
! //		// edit s.inoue 2010/01/08
! //		if (mode == CHANGE_MODE){
! //			initializeSetting(hokenjyaNumber);
! //
! //			// add s.inoue 2010/01/11
! //			model.getSelectionModel().addListSelectionListener(new ListSelectionListener() {
! //				public void valueChanged(ListSelectionEvent e) {
! //					if(e.getValueIsAdjusting()) return;
! //
! //					int irow = model.getSelectedRow();
! //					if (irow < 0) return;
! //
! //					// edit s.inoue 2010/01/12
! //					jButton_RegisterYukoukigenEdit.setVisible(true);
! //					jButton_RegisterYukoukigen.setVisible(false);
! //
! //					// edit s.inoue 2010/01/26
! //					jButton_Clear.setEnabled(true);
! //					jButton_Register.setEnabled(true);
! //					jTextField_HokenjyaName.setEditable(true);
! //					jTextField_Zipcode.setEditable(true);
! //					jTextField_Address.setEditable(true);
! //					jTextField_Chiban.setEditable(true);
! //					jTextField_TEL.setEditable(true);
! //					jTextField_Kigo.setEditable(true);
! //
! //					// 選択行を入力フィールドへ反映
! //					jTextField_YukoukigenFrom.setText(String.valueOf(model.getValueAt(irow, 1)));
! //					jTextField_YukoukigenTo.setText(String.valueOf(model.getValueAt(irow, 2)));
! //					jComboBox_ItakuKubun.setSelectedIndex(Integer.parseInt((String) model.getValueAt(irow, 4))-1);
! //					// del s.inoue 2010/01/20
! //					// jComboBox_ItakuKubun.setEditable(false);
! //
! //					jTextField_KihonTanka.setText(String.valueOf(model.getValueAt(irow, 5)).replaceAll(",", ""));
! //					jTextField_HinketsuTanka.setText(String.valueOf(model.getValueAt(irow, 6)).replaceAll(",", ""));
! //					jTextField_SindenzuTanka.setText(String.valueOf(model.getValueAt(irow, 7)).replaceAll(",", ""));
! //					jTextField_GanteiTanka.setText(String.valueOf(model.getValueAt(irow, 8)).replaceAll(",", ""));
! //					jTextField_NingenDocTanka.setText(String.valueOf(model.getValueAt(irow, 9)).replaceAll(",", ""));
! //
! //				}
! //			});
! //		}
! //	}
! //
! //	// add s.inoue 2010/01/14
! //	/* 単価コントロール表示処理 */
! //	private void setTankaTable(String hokenjyaNumber){
! //
! //		ArrayList<Hashtable<String, String>> result
! //		= new ArrayList<Hashtable<String, String>>();
! //
! //		Hashtable<String, String> resultItem = new Hashtable<String, String>();
! //		StringBuilder sb = new StringBuilder();
! //		sb.append("SELECT * FROM T_HOKENJYA ");
! //		sb.append(" WHERE HKNJANUM = ");
! //		sb.append(JQueryConvert.queryConvert(hokenjyaNumber));
! //		sb.append(" AND HKNJYA_HISTORY_NO = ");
! //		sb.append(JQueryConvert.queryConvert(getmodelColumnNumber(COLUMUN_HISTORY_NO)));
! //		sb.append(" AND ITAKU_KBN = ");
! //		sb.append(JQueryConvert.queryConvert(getmodelColumnNumber(COLUMUN_ITAKU_KBN)));
! //
! //		try {
! //			result = JApplication.kikanDatabase.sendExecuteQuery(sb.toString());
! //		} catch (SQLException e) {
! //			e.printStackTrace();
! //		}
! //
! //		// edit s.inoue 2010/01/13
! //		if (arrYukou.size() <= 0){
! //			JErrorMessage.show("M3158", null);
! //			return;
! //		}
! //
! //		// edit s.inoue 2010/01/15
! //		// resultItem = result.get(arrYukou.get(0));
! //		resultItem = result.get(0);
! //
! //		jTextField_HokenjyaName.setText(resultItem.get("HKNJANAME"));
! //		jTextField_Zipcode.setText(resultItem.get("POST").trim());
! //		jTextField_Address.setText(resultItem.get("ADRS"));
! //		jTextField_Chiban.setText(resultItem.get("BANTI"));
! //		jTextField_TEL.setText(resultItem.get("TEL"));
! //		jTextField_Kigo.setText(resultItem.get("KIGO"));
! //		// add s.inoue 2010/01/14
! //		jTextField_YukoukigenFrom.setText(resultItem.get("HKNJYA_LIMITDATE_START"));
! //		jTextField_YukoukigenTo.setText(resultItem.get("HKNJYA_LIMITDATE_END"));
! //
! //		if (!resultItem.get("ITAKU_KBN").isEmpty()) {
! //			jComboBox_ItakuKubun.setSelectedIndex(Integer.valueOf(resultItem.get("ITAKU_KBN")) - 1);
! //		}
! //
! //		// del s.inoue 2010/01/20
! //		// 1:基本、2:ドック
! //		String hani = resultItem.get("TANKA_HANTEI");
! //		hani = (hani == null)?TANKA_HANTEI_KIHON: hani;
! //
! //		// edit s.inoue 2010/01/20
! //		if(hani.equals(TANKA_HANTEI_KIHON)){
! //			jRadioButton_Kihon.setSelected(true);
! //		}else if (hani.equals(TANKA_HANTEI_DOC)){
! //			jRadioButton_Doc.setSelected(true);
! //		}
! //
! //		// edit s.inoue 2010/01/20
! //		jTextField_NingenDocTanka.setText(resultItem.get("TANKA_NINGENDOC"));
! //		// 基本健診のみ設定
! //		jTextField_KihonTanka.setText(resultItem.get("TANKA_KIHON"));
! //		jTextField_HinketuCode.setText(resultItem.get("HINKETU_CD"));
! //		jTextField_SindenzuCode.setText(resultItem.get("SINDENZU_CD"));
! //		jTextField_GanteiCode.setText(resultItem.get("GANTEI_CD"));
! //		jTextField_HinketsuTanka.setText(resultItem.get("TANKA_HINKETU"));
! //		jTextField_SindenzuTanka.setText(resultItem.get("TANKA_SINDENZU"));
! //		jTextField_GanteiTanka.setText(resultItem.get("TANKA_GANTEI"));
! //		jTextField_HonninGairai.setText(resultItem.get("HON_GAIKYURATE"));
! //		jTextField_HonninNyuin.setText(resultItem.get("HON_NYUKYURATE"));
! //		jTextField_KazokuGairai.setText(resultItem.get("KZK_GAIKYURATE"));
! //		jTextField_KazokuNyuin.setText(resultItem.get("KZK_NYUKYURATE"));
! //	}
! //
! //	/* 単価テーブル一覧表示処理 */
! //	private void initializeSetting(String hokenjyaNumber){
! //
! //		// edit s.inoue 2010/01/14
! //		Object[][] hokenjyaData = null;
! //		hokenjyaData = this.resultRefresh(hokenjyaNumber);
! //		dmodel = new DefaultTableModel(hokenjyaData,header){
! //		public boolean isCellEditable(int row, int column) {
! //			boolean retflg = false;
! //			if ( column >9 ){
! //				retflg = true;
! //			}
! //			return retflg;
! //			}
! //		};
! //
! //		sorter = new TableRowSorter<TableModel>(dmodel);
! //		model = new JSimpleTable(dmodel);
! //		model.setPreferedColumnWidths(new int[]{70,80,80,70,80,120,100,110,110,110});
! //		model.setRowSorter(sorter);
! //		model.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
! //		model.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
! //
! //		final JScrollPane scroll = new JScrollPane(model);
! //		JViewport viewport = new JViewport();
! //		scroll.setRowHeader(viewport);
! //		// edit s.inoue 2010/01/26
! //		// scroll.setPreferredSize(new Dimension(963, 130));
! //		scroll.setPreferredSize(new Dimension(950, 115));
! //		if(mode == CHANGE_MODE)
! //		dmodel.setDataVector(hokenjyaData,header);
! //
! //		jPanel_TableArea.add(scroll);
! //
! //		TableColumnModel columns = model.getColumnModel();
! //		for(int i=0;i<columns.getColumnCount();i++) {
! //			columns.getColumn(i).setCellRenderer(new JSimpleTableCellRowRenderer(
! //					(DefaultTableCellRenderer)model.getDefaultRenderer(model.getColumnClass(i))));
! //		}
! //
! //		// edit s.inoue 2010/01/13
! //		// JRadioYukou.addItemListener(this);
! //		JRadioYukou.addKeyListener(this);
! //
! //		model.setCellRadioButtonEditor(JRadioYukou,0);
! //		radioButtonGroup.add(JRadioYukou);
! //
! //		// del s.inoue 2010/01/14
! //		// checkedTable.addKeyListener(this);
! //		// model.setCellCheckBoxEditor(checkedTable, 1);
! //
! //		model.setselectedRows(model, arrYukou);
! //		model.addHeader(this.header);
! //		model.refreshTable();
! //
! //	}
! //
! //	// add s.inoue 2010/01/14
! //	/* 一覧リフレッシュ処理 */
! //	private void searchReflesh(String hokenjyaNumber){
! //
! //		Object[][] hokenjyaData = this.resultRefresh(hokenjyaNumber);
! //		dmodel.setDataVector(hokenjyaData,header);
! //
! //		TableColumnModel columns = model.getColumnModel();
! //		for(int i=0;i<columns.getColumnCount();i++) {
! //			columns.getColumn(i).setCellRenderer(new JSimpleTableCellRowRenderer(
! //					(DefaultTableCellRenderer)model.getDefaultRenderer(model.getColumnClass(i))));
! //		}
! //
! //		JRadioYukou.addItemListener(this);
! //		model.setCellRadioButtonEditor(JRadioYukou,0);
! //		radioButtonGroup.add(JRadioYukou);
! //		model.setselectedRows(model, arrYukou);
! //		model.addHeader(this.header);
! //		model.refreshTable();
! //	}
! //
! //	// add s.inoue 2010/01/15
! //	/* 一覧用データ取得 */
! //	private Object[][] resultRefresh(String hokenjyaNumber)
! //	{
! //		// edit s.inoue 2010/01/08
! //		StringBuilder sb = new StringBuilder();
! //		sb.append(" SELECT distinct ");
! //		sb.append(" YUKOU_FLG,HKNJYA_LIMITDATE_START,HKNJYA_LIMITDATE_END,HKNJYA_HISTORY_NO,ITAKU_KBN,TANKA_KIHON,");
! //		sb.append(" TANKA_HINKETU,TANKA_SINDENZU,TANKA_GANTEI,TANKA_NINGENDOC");
! //		sb.append(" FROM T_HOKENJYA ");
! //		sb.append(" WHERE HKNJANUM = ");
! //		sb.append(JQueryConvert.queryConvert(hokenjyaNumber));
! //		sb.append(" ORDER BY HKNJYA_HISTORY_NO DESC,ITAKU_KBN ");
! //
! //		try {
! //			result = JApplication.kikanDatabase.sendExecuteQuery(sb.toString());
! //		} catch (SQLException e) {
! //			e.printStackTrace();
! //			return null;
! //		}
! //
! //		rowcolumn = new Object[result.size()][16];
! //		int counti = 0;
! //		List<String> fields = new ArrayList<String>();
! //
! //		for (Hashtable<String, String> record : result) {
! //			for (String fieldName : TABLE_COLUMNS) {
! //				fields.add(record.get(fieldName));
! //			}
! //
! //			// edit s.inoue 2010/01/13
! //			model.addData(fields.toArray(new String[0]));
! //
! //			String[] col = fields.toArray(new String[0]);
! //			for (int i = 0; i < col.length; i++) {
! //
! //				Object val = col[i]==null?"":col[i];
! //					if (i == 0){
! //						// edit s.inoue 2010/01/13
! //						val = new JRadioButton(String.valueOf(i));
! //						if (col[i].equals("1")){
! //							// add s.inoue 2010/01/21
! //							if (arrYukou.size() > 0){
! //								arrYukou.remove(0);
! //							}
! //							arrYukou.add(counti);
! //						}
! //					}else if ((i==5 || i==6 || i==7|| i==8 || i==9) && !(val.equals(""))){
! //							NumberFormat kingakuFormat = NumberFormat.getNumberInstance();
! //							val = kingakuFormat.format(Long.parseLong(String.valueOf(val)));
! //					}
! //					rowcolumn[counti][i] = val;
! //				}
! //
! //			counti ++;
! //
! //			fields.clear();
! //		}
! //
! //		return rowcolumn;
! //	}
! //
! //	/**
! //	 * 印刷時の必須項目をチェックする
! //	 */
! //	public boolean validateAsPushedORCAButton(
! //			JHokenjyaMasterMaintenanceEditFrameData data) {
! //		if (data.getHokenjyaNumber().isEmpty()) {
! //			return false;
! //		}
! //
! //		return true;
! //	}
! //
! //	/**
! //	 * 初期化
! //	 */
! //	private void init() {
! //		jComboBox_ItakuKubun.addItem(itakuKubunStr[0]);
! //		jComboBox_ItakuKubun.addItem(itakuKubunStr[1]);
! //		// del s.inoue 2010/01/19
! //		// if ((modeYukouKigen == CHANGE_MODE) ||
! //		// 		(mode == CHANGE_MODE))
! //		// jComboBox_ItakuKubun.setEnabled(false);
! //
! //		jTextField_HinketuCode.setText("1");
! //		jTextField_SindenzuCode.setText("2");
! //		jTextField_GanteiCode.setText("3");
! //
! //		// add s.inoue 2009/10/01
! //		jRadioButton_Kihon.setSelected(true);
! //
! //		this.jTextField_KihonTanka.setBackground(ViewSettings.getRequiedItemBgColor());
! //
! //		// edit s.inoue 2010/01/21
! //		initilizeFocus();
! //	}
! //
! //	/* focus初期化 */
! //	private void initilizeFocus(){
! //		// focus制御
! //		this.focusTraversalPolicy = new JFocusTraversalPolicy();
! //		this.setFocusTraversalPolicy(this.focusTraversalPolicy);
! //		// edit s.inoue 2009/12/02
! //		if(mode == ADD_MODE){
! //			this.focusTraversalPolicy.setDefaultComponent(jTextField_HokenjyaNumber);
! //			this.focusTraversalPolicy.addComponent(jTextField_HokenjyaNumber);
! //		}else if (mode == CHANGE_MODE){
! //			this.focusTraversalPolicy.setDefaultComponent(jTextField_HokenjyaName);
! //		}
! //		this.focusTraversalPolicy.addComponent(jTextField_HokenjyaNumber);
! //		this.focusTraversalPolicy.addComponent(jButton_ORCA);
! //		this.focusTraversalPolicy.addComponent(jTextField_HokenjyaName);
! //		this.focusTraversalPolicy.addComponent(jTextField_Zipcode);
! //		this.focusTraversalPolicy.addComponent(jTextField_TEL);
! //		this.focusTraversalPolicy.addComponent(jTextField_Address);
! //		this.focusTraversalPolicy.addComponent(jTextField_Chiban);
! //		this.focusTraversalPolicy.addComponent(jTextField_Kigo);
! //		// edit s.inoue 2010/01/22
! //		if(mode == CHANGE_MODE){
! //			this.focusTraversalPolicy.addComponent(jButton_Register);
! //			this.focusTraversalPolicy.addComponent(jButton_Clear);
! //		}
! //		// edit s.inoue 2010/01/21
! //		if(mode == CHANGE_MODE)
! //			this.focusTraversalPolicy.addComponent(this.model);
! //
! //		this.focusTraversalPolicy.addComponent(jTextField_YukoukigenFrom);
! //		this.focusTraversalPolicy.addComponent(jTextField_YukoukigenTo);
! //		this.focusTraversalPolicy.addComponent(jTextField_TankaHantei);
! //		this.focusTraversalPolicy.addComponent(jComboBox_ItakuKubun);
! //		// edit s.inoue 2010/01/21
! //		if (jRadioButton_Doc.isSelected()){
! //			this.focusTraversalPolicy.addComponent(jTextField_NingenDocTanka);
! //		}else{
! //			this.focusTraversalPolicy.addComponent(jTextField_KihonTanka);
! //			this.focusTraversalPolicy.addComponent(jTextField_HinketsuTanka);
! //			this.focusTraversalPolicy.addComponent(jTextField_SindenzuTanka);
! //			this.focusTraversalPolicy.addComponent(jTextField_GanteiTanka);
! //		}
! //
! //		// edit s.inoue 2010/01/21
! //		if (mode != ADD_MODE){
! //			this.focusTraversalPolicy.addComponent(jButton_Add);
! //			if (modeYukouKigen == ADD_MODE){
! //				this.focusTraversalPolicy.addComponent(jButton_RegisterYukoukigen);
! //			}else{
! //				this.focusTraversalPolicy.addComponent(jButton_RegisterYukoukigenEdit);
! //			}
! //			this.focusTraversalPolicy.addComponent(jButton_RegisterYukoukigenDelete);
! //		}else{
! //			this.focusTraversalPolicy.addComponent(jButton_ClearAdd);
! //			this.focusTraversalPolicy.addComponent(jButton_RegisterAdd);
! //		}
! //
! //		this.focusTraversalPolicy.addComponent(jButton_End);
! //
! //		// edit s.inoue 2010/01/21
! //		if(mode == ADD_MODE){
! //			this.focusTraversalPolicy.addComponent(jTextField_HokenjyaNumber);
! //		}else if (mode == CHANGE_MODE){
! //			this.focusTraversalPolicy.addComponent(jTextField_HokenjyaName);
! //		}
! //	}
! //
! //	private void functionListner(){
! //		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
! //			Component comp = focusTraversalPolicy.getComponent(i);
! //			comp.addKeyListener(this);
! //		}
! //	}
! //
! //	/**
! //	 * 保険者番号が入力された場合
! //	 */
! //	public void enterKeyPushedHokenjyaNumber() {
! //		/* 保険者番号が未入力の場合は、保険者名称欄にフォーカスを移動する。 */
! //		String hokenjaNumber = this.jTextField_HokenjyaNumber.getText();
! //
! //		if (hokenjaNumber == null || hokenjaNumber.isEmpty()) {
! //			this.jTextField_HokenjyaName.grabFocus();
! //		}
! //
! //		if (validatedData.setHokenjyaNumber(hokenjaNumber)) {
! //
! //			pushedORCAButton();
! //		}
! //	}
! //
! //	/**
! //	 * 登録ボタンを押した際の必須項目の検証
! //	 */
! //	protected boolean validateAsRegisterPushed(int pmode,
! //			JHokenjyaMasterMaintenanceEditFrameData data) {
! //		if (pmode == ADD_MODE ||
! //				pmode == CHANGE_MODE){
! //			if (data.getHokenjyaNumber().equals("")) {
! //				JErrorMessage.show(
! //						"M3120", null);
! //				return false;
! //			}
  //		}else{
! //			// add s.inoue 2010/01/15
! //			// 有効期限必須
! //			if (data.getYukouKigenFrom().equals("")){
! //				JErrorMessage.show(
! //						"M3125", null);
! //				return false;
! //			}
! //			if (data.getYukouKigenTo().equals("")){
! //				JErrorMessage.show(
! //						"M3126", null);
! //				return false;
! //			}
! //			// 有効期限の範囲チェック
! //			if(Integer.parseInt(data.getYukouKigenFrom()) > Integer.parseInt(data.getYukouKigenTo())){
! //				JErrorMessage.show("M3159", null);
! //				return false;
! //			}
! //
! //			// 人間ドック単価又は基本単価必須
! //			if (data.getKihonTanka().equals("")
! //					&& data.getNingenDocTanka().equals("")) {
! //				JErrorMessage.show("M3125", null);
! //				return false;
! //			}
  //		}
- //		validatedData.setValidationAsDataSet();
- //		return true;
- //	}
- //
- //	private static String lastAddedNumber = null;
- //
- //	public static String getLastAddedNumber() {
- //		return lastAddedNumber;
- //	}
- //
- //	private static boolean registered = false;
- //	public static boolean isRegistered() {
- //		return registered;
  //	}
! //
! //	/**
! //	 * 登録処理を行う
! //	 */
! //	public void register(int pmode) {
! //		if (!this.validateData(pmode)) {
! //			return;
! //		}
! //
! //		// 各フィールドについて検証済み
! //		if (!validateAsRegisterPushed(pmode,validatedData)) {
! //			return;
! //		}
! //
! //		// 必須項目についても抜けがない
! //		if (!validatedData.isValidationAsDataSet()) {
! //			return;
! //		}
! //
! //		String inputHokenjyaNumber = validatedData.getHokenjyaNumber();
! //		// edit s.inoue 2010/01/12
! //		String inputHokenjyaHistoryNumber = validatedData.getHknjyaHistoryNumber();
! //		// add s.inoue 2010/01/19
! //		String inputItakuKubun = jComboBox_ItakuKubun.getSelectedItem().toString().substring(0, 1);
! //
! //		/* 登録済みの保険者か確認する。 */
! //
! //		StringBuilder sbCount = new StringBuilder();
! //		sbCount.append("select count(HKNJANUM) as ROWCOUNT from T_HOKENJYA ");
! //		sbCount.append(" where HKNJANUM = ? ");
! //		// del s.inoue 2010/01/19
! //		// sbCount.append("and HKNJYA_HISTORY_NO = ?");
! //		if(pmode == CHANGE_MODE ||
! //			pmode == ADD_MODE_TANKA ||
! //				 pmode == CHANGE_MODE_TANKA){
! //			sbCount.append(" and ITAKU_KBN = ? ");
! //			sbCount.append(" and (HKNJYA_LIMITDATE_START  between ? and ? ");
! //			sbCount.append(" or HKNJYA_LIMITDATE_END between ? and ? )");
! //			sbCount.append(" or ( HKNJYA_LIMITDATE_START < ? ");
! //			sbCount.append(" and HKNJYA_LIMITDATE_END > ? )");
! //		}
! //
! //		String[] params = null;
! //
! //		// edit s.inoue 2010/01/22
! //		if(pmode == CHANGE_MODE ||
! //				pmode == ADD_MODE_TANKA ||
! //					 pmode == CHANGE_MODE_TANKA){
! //
! //			params = new String[8];
! //			params[0]=inputHokenjyaNumber;
! //			params[1]=inputItakuKubun;
! //			params[2]=jTextField_YukoukigenFrom.getText();
! //			params[3]=jTextField_YukoukigenTo.getText();
! //			params[4]=jTextField_YukoukigenFrom.getText();
! //			params[5]=jTextField_YukoukigenTo.getText();
! //			params[6]=jTextField_YukoukigenFrom.getText();
! //			params[7]=jTextField_YukoukigenTo.getText();
! //		}else{
! //			params = new String[1];
! //			params[0]=inputHokenjyaNumber;
! //		}
! //
! ////		params = { inputHokenjyaNumber , inputItakuKubun,
! ////				jTextField_YukoukigenFrom.getText(),jTextField_YukoukigenTo.getText(),
! ////				jTextField_YukoukigenFrom.getText(),jTextField_YukoukigenTo.getText(),
! ////				jTextField_YukoukigenFrom.getText(),jTextField_YukoukigenTo.getText()};
! //
! //		ArrayList<Hashtable<String, String>> result = null;
  //		try{
- //			result = JApplication.kikanDatabase.sendExecuteQuery(sbCount.toString(), params);
- //		}catch(SQLException e){
- //			logger.error(e.getMessage());
- //			e.printStackTrace();
- //		}
- //
- //		boolean existsNumber = false;
- //		int count = 0;
- //		if (result != null && result.size() > 0) {
- //			String countString = result.get(0).get("ROWCOUNT");
- //
- //			try {
- //				count = Integer.valueOf(countString);
- //			} catch (NumberFormatException e) {
- //				e.printStackTrace();
- //			}
- //
- //			if (count > 0) {
- //				existsNumber = true;
- //			}
- //		}
- //
- //		// edit s.inoue 2010/01/21
- //		if ((pmode == ADD_MODE_TANKA && existsNumber)
- ////				|| (pmode == ADD_MODE && existsNumber)
- ////		if ((modeYukouKigen == ADD_MODE && existsNumber)
- ////				|| (mode == ADD_MODE && existsNumber)
- //				|| inputHokenjyaNumber.equals("99999999")
- //				|| inputHokenjyaNumber.equals("00000000")) {
- //			JErrorMessage.show("M3163", this);
- //			return;
- //		}else if(pmode == ADD_MODE && existsNumber){
- //			JErrorMessage.show("M3164", this);
- //			return;
- //		}
- //
- //		// add s.inoue 2010/01/13
- //		/* 期限有効フラグを全て"0"にセットする */
- //// edit s.inoue 2010/01/21
- //		if (pmode == ADD_MODE_TANKA ||
- //				pmode == CHANGE_MODE_TANKA){
- //			try {
- //				JApplication.kikanDatabase.Transaction();
- //
- //				StringBuilder sb = new StringBuilder();
- //				sb.append("UPDATE T_HOKENJYA SET ");
- //				sb.append(" YUKOU_FLG = '0' ");
- //				sb.append(" WHERE HKNJANUM = ");
- //				sb.append(JQueryConvert.queryConvert(inputHokenjyaNumber));
- //				JApplication.kikanDatabase.sendNoResultQuery(sb.toString());
- //
- //				JApplication.kikanDatabase.Commit();
- //			} catch (SQLException e) {
- //				logger.error(e.getMessage());
- //				e.printStackTrace();
- //			}
- //		}
- //		StringBuffer buffer = new StringBuffer();
- //		String address = JValidate.encodeUNICODEtoConvert(validatedData.getAddress());
- //		String tiban = JValidate.encodeUNICODEtoConvert(validatedData.getChiban());
- //
- //		// edit s.inoue 2010/01/12
- //		if (pmode == ADD_MODE ||
- //				pmode == ADD_MODE_TANKA) {
- ////		if (mode == ADD_MODE ||
- ////				modeYukouKigen == ADD_MODE) {
- //			// edit s.inoue 2010/01/19
- //			long historyNum = createHistoryNo(inputHokenjyaNumber,inputHokenjyaHistoryNumber,inputItakuKubun);
- //			if (historyNum == 0)
- //				return;
- //
- //			buffer.append("INSERT INTO T_HOKENJYA (");
- //			buffer.append("HKNJANUM,HKNJANAME,POST,ADRS,BANTI,TEL,");
- //			buffer.append("KIGO,HON_GAIKYURATE,HON_NYUKYURATE,");
- //			buffer.append("KZK_GAIKYURATE,KZK_NYUKYURATE,ITAKU_KBN,");
- //			buffer.append("TANKA_KIHON,HINKETU_CD,TANKA_HINKETU,");
- //			buffer.append("SINDENZU_CD,TANKA_SINDENZU,GANTEI_CD,");
- //			buffer.append("TANKA_GANTEI,TANKA_NINGENDOC,TANKA_HANTEI,");
- //			buffer.append("HKNJYA_HISTORY_NO,");
- //			buffer.append("HKNJYA_LIMITDATE_START,HKNJYA_LIMITDATE_END,");
- //			buffer.append("YUKOU_FLG)");
- //			buffer.append("VALUES ( "
- //				+ JQueryConvert.queryConvertAppendComma(inputHokenjyaNumber)
- //				+ JQueryConvert.queryConvertAppendBlankAndComma(validatedData.getHokenjyaName())
- //				+ JQueryConvert.queryConvertAppendBlankAndComma(validatedData.getZipcode())
- //				+ JQueryConvert.queryConvertAppendBlankAndComma(address)
- //				+ JQueryConvert.queryConvertAppendBlankAndComma(tiban)
- //				+ JQueryConvert.queryConvertAppendBlankAndComma(validatedData.getTEL())
- //				+ JQueryConvert.queryConvertAppendComma(validatedData.getCode())
- //				+ JQueryConvert.queryConvertAppendComma(validatedData.getHonninGairai())
- //				+ JQueryConvert.queryConvertAppendComma(validatedData.getHonninNyuin())
- //				+ JQueryConvert.queryConvertAppendComma(validatedData.getKazokuGairai())
- //				+ JQueryConvert.queryConvertAppendComma(validatedData.getKazokuNyuin())
- //				+ JQueryConvert.queryConvertAppendComma(validatedData.getItakuKubun())
- //				+ JQueryConvert.queryConvertAppendComma(validatedData.getKihonTanka())
- //				+ JQueryConvert.queryConvertAppendComma(validatedData.getHinketsuCode())
- //				+ JQueryConvert.queryConvertAppendComma(validatedData.getHinketsuTanka())
- //				+ JQueryConvert.queryConvertAppendComma(validatedData.getShindenzuCode())
- //				+ JQueryConvert.queryConvertAppendComma(validatedData.getSindenzuTanka())
- //				+ JQueryConvert.queryConvertAppendComma(validatedData.getGanteiCode())
- //				+ JQueryConvert.queryConvertAppendComma(validatedData.getGanteiTanka())
- //				+ JQueryConvert.queryConvertAppendComma(validatedData.getNingenDocTanka())
- //				+ JQueryConvert.queryConvertAppendComma(validatedData.getTankaHantei())
- //				// edit s.inoue 2010/01/19
- //				+ JQueryConvert.queryConvertAppendComma(String.valueOf(historyNum))
- //				+ JQueryConvert.queryConvertAppendComma(validatedData.getYukouKigenFrom())
- //				+ JQueryConvert.queryConvertAppendComma(validatedData.getYukouKigenTo())
- //				// edit s.inoue 2010/01/13
- //				// 有効フラグを"1"で登録する。validatedData.getYukouFlg()
- //				+ JQueryConvert.queryConvert("1")
- //				+ ")");
- //		}
- //		// edit s.inoue 2010/01/21
- //		else if (pmode == CHANGE_MODE ||
- //				pmode == CHANGE_MODE_TANKA) {
- ////		else if (mode == CHANGE_MODE ||
- ////				modeYukouKigen == CHANGE_MODE) {
- //
- //			buffer.append("UPDATE T_HOKENJYA SET ");
- //					// edit s.inoue 2010/01/15
- //					// + "HKNJANUM = "
- //					// + JQueryConvert.queryConvertAppendComma(validatedData.getHokenjyaNumber())
- //
- //					// edit s.inoue 2010/01/15
- //					// + "ITAKU_KBN = "+ JQueryConvert.queryConvertAppendComma(validatedData.getItakuKubun())
- //// edit s.inoue 2010/01/21
- //			if (pmode == CHANGE_MODE_TANKA){
- ////				if (modeYukouKigen == CHANGE_MODE){
- //					buffer.append("TANKA_KIHON = "+ JQueryConvert.queryConvertAppendComma(validatedData.getKihonTanka()));
- //					buffer.append("HINKETU_CD = "+ JQueryConvert.queryConvertAppendComma(validatedData.getHinketsuCode()));
- //					buffer.append("TANKA_HINKETU = "+ JQueryConvert.queryConvertAppendComma(validatedData.getHinketsuTanka()));
- //					buffer.append("SINDENZU_CD = "+ JQueryConvert.queryConvertAppendComma(validatedData.getShindenzuCode()));
- //					buffer.append("TANKA_SINDENZU = "+ JQueryConvert.queryConvertAppendComma(validatedData.getSindenzuTanka()));
- //					buffer.append("GANTEI_CD = "+ JQueryConvert.queryConvertAppendComma(validatedData.getGanteiCode()));
- //					buffer.append("TANKA_GANTEI = "+ JQueryConvert.queryConvertAppendComma(validatedData.getGanteiTanka()));
- //					buffer.append("TANKA_NINGENDOC = "+ JQueryConvert.queryConvertAppendComma(validatedData.getNingenDocTanka()));
- //					buffer.append("TANKA_HANTEI = "+ JQueryConvert.queryConvertAppendComma(validatedData.getTankaHantei()));
- //					buffer.append("HKNJYA_LIMITDATE_START = "+ JQueryConvert.queryConvertAppendComma(validatedData.getYukouKigenFrom()));
- //					buffer.append("HKNJYA_LIMITDATE_END = "+ JQueryConvert.queryConvertAppendComma(validatedData.getYukouKigenTo()));
- //					buffer.append("YUKOU_FLG = "+ JQueryConvert.queryConvert("1"));
- //				}else{
- //					buffer.append("HKNJANAME = "+ JQueryConvert.queryConvertAppendBlankAndComma(validatedData.getHokenjyaName()));
- //					buffer.append("POST = "+ JQueryConvert.queryConvertAppendBlankAndComma(validatedData.getZipcode()));
- //					buffer.append("ADRS = "+ JQueryConvert.queryConvertAppendBlankAndComma(address));
- //					buffer.append("BANTI = "+ JQueryConvert.queryConvertAppendBlankAndComma(tiban));
- //					buffer.append("TEL = "+ JQueryConvert.queryConvertAppendBlankAndComma(validatedData.getTEL()));
- //					buffer.append("KIGO = "+ JQueryConvert.queryConvertAppendComma(validatedData.getCode()));
- //					buffer.append("HON_GAIKYURATE = "+ JQueryConvert.queryConvertAppendComma(validatedData.getHonninGairai()));
- //					buffer.append("HON_NYUKYURATE = "+ JQueryConvert.queryConvertAppendComma(validatedData.getHonninNyuin()));
- //					buffer.append("KZK_GAIKYURATE = "+ JQueryConvert.queryConvertAppendComma(validatedData.getKazokuGairai()));
- //					buffer.append("KZK_NYUKYURATE = "+ JQueryConvert.queryConvert(validatedData.getKazokuNyuin()));
- //				}
- //
- //				buffer.append(" WHERE HKNJANUM = "+ JQueryConvert.queryConvert(validatedData.getHokenjyaNumber()));
- //					// edit s.inoue 2010/01/21
- //				if (pmode == CHANGE_MODE_TANKA){
- ////					if (modeYukouKigen == CHANGE_MODE){
- //						// edit s.inoue 2010/01/21
- //						buffer.append(" AND ITAKU_KBN = " +JQueryConvert.queryConvert(validatedData.getItakuKubun()));
- //						buffer.append(" AND HKNJYA_HISTORY_NO = " +JQueryConvert.queryConvert(String.valueOf(inputHokenjyaHistoryNumber)));
- //					}
- //		}
- //
- //		try {
- //
  //			JApplication.kikanDatabase.Transaction();
- //			JApplication.kikanDatabase.sendNoResultQuery(buffer.toString());
  //
! //			// 新規追加の場合はさらに健診項目マスタへの追加も行う
! //			// edit s.inoue 2010/01/21
! //			if (pmode == ADD_MODE) {
! ////			if (mode == ADD_MODE) {
! //				ArrayList<Hashtable<String, String>> resultKenshin = new ArrayList<Hashtable<String, String>>();
! //				Hashtable<String, String> resultItemKenshin = new Hashtable<String, String>();
! //				buffer = new StringBuffer(
! //						"SELECT * FROM T_KENSHINMASTER WHERE HKNJANUM = "
! //								+ JQueryConvert.queryConvert("99999999"));
! //
! //				resultKenshin = JApplication.kikanDatabase.sendExecuteQuery(buffer.toString());
! //
! //				for (int i = 0; i < resultKenshin.size(); i++) {
! //					resultItemKenshin = resultKenshin.get(i);
! //
! //					buffer = new StringBuffer("INSERT INTO T_KENSHINMASTER ( "
! //							+ "HKNJANUM,"
! //							+ "KOUMOKU_CD,"
! //							+ "KOUMOKU_NAME,"
! //							+ "DATA_TYPE,"
! //							+ "MAX_BYTE_LENGTH,"
! //							+ "XML_PATTERN,"
! //							+ "XML_DATA_TYPE,"
! //							+ "XML_KENSA_CD,"
! //							+ "OBSERVATION,"
! //							+ "AUTHOR,"
! //							+ "AUTHOR_KOUMOKU_CD,"
! //							+ "KENSA_GROUP,"
! //							+ "KENSA_GROUP_CD,"
! //							+ "KEKKA_OID,"
! //							+ "KOUMOKU_OID,"
! //							+ "HISU_FLG,"
! //							+ "KAGEN,"
! //							+ "JYOUGEN,"
! //							+ "DS_JYOUGEN,"
! //							+ "JS_JYOUGEN,"
! //							+ "DS_KAGEN,"
! //							+ "JS_KAGEN,"
! //							+ "KIJYUNTI_HANI,"
! //							+ "TANI,"
! //							+ "KENSA_HOUHOU,"
! //							+ "TANKA_KENSIN,"
! //							+ "BIKOU,"
! //							+ "XMLITEM_SEQNO"
! //							+ ")"
! //							+ "VALUES( "
! //							+ JQueryConvert.queryConvertAppendComma(validatedData
! //									.getHokenjyaNumber())
! //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin
! //									.get("KOUMOKU_CD"))
! //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin
! //									.get("KOUMOKU_NAME"))
! //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin
! //									.get("DATA_TYPE"))
! //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin
! //									.get("MAX_BYTE_LENGTH"))
! //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin
! //									.get("XML_PATTERN"))
! //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin
! //									.get("XML_DATA_TYPE"))
! //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin
! //									.get("XML_KENSA_CD"))
! //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin
! //									.get("OBSERVATION"))
! //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin
! //									.get("AUTHOR"))
! //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin
! //									.get("AUTHOR_KOUMOKU_CD"))
! //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin
! //									.get("KENSA_GROUP"))
! //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin
! //									.get("KENSA_GROUP_CD"))
! //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin
! //									.get("KEKKA_OID"))
! //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin
! //									.get("KOUMOKU_OID"))
! //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin
! //									.get("HISU_FLG"))
! //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin
! //									.get("KAGEN"))
! //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin
! //									.get("JYOUGEN"))
! //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin
! //									.get("DS_JYOUGEN"))
! //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin
! //									.get("JS_JYOUGEN"))
! //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin
! //									.get("DS_KAGEN"))
! //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin
! //									.get("JS_KAGEN"))
! //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin
! //									.get("KIJYUNTI_HANI"))
! //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin
! //									.get("TANI"))
! //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin
! //									.get("KENSA_HOUHOU"))
! //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin
! //									.get("TANKA_KENSIN"))
! //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin
! //									.get("BIKOU"))
! //							+ JQueryConvert.queryConvert(resultItemKenshin
! //									.get("XMLITEM_SEQNO")) +
! //							")");
  //
! //					JApplication.kikanDatabase.sendNoResultQuery(buffer.toString());
! //				}
! //			}
! //			JApplication.kikanDatabase.Commit();
! //			// edit s.inoue 2010/01/21
! //			modeYukouKigen = CHANGE_MODE;
  //
! //			registered = true;
! //			lastAddedNumber = validatedData.getHokenjyaNumber();
! //			// edit s.inoue 2010/01/21
! //			if(pmode == ADD_MODE_TANKA ||
! //					pmode == CHANGE_MODE_TANKA){
! ////			if(modeYukouKigen == ADD_MODE ||
! ////					modeYukouKigen == CHANGE_MODE){
! //				searchReflesh(validatedData.getHokenjyaNumber());
! //				// add s.inoue 2010/01/26
! //				controlSetting(true);
! //			}
! //			if(pmode == ADD_MODE ||
! //					pmode == CHANGE_MODE){
! //				dispose();
! //			}
! //		} catch (SQLException f) {
! //			f.printStackTrace();
! //			JErrorMessage.show(
! //					"M3130", this);
! //			try {
! //				JApplication.kikanDatabase.rollback();
! //				return;
! //			} catch (SQLException g) {
! //				g.printStackTrace();
! //				JErrorMessage.show("M0000", this);
! //				System.exit(1);
! //			}
! //		}
! //	}
! //
! //	// add s.inoue 2010/01/12
! //	// 新規登録 委託区分含めレコードがあった場合、エラー
! //	//
! //	/* 履歴番号採番 */
! //	private long createHistoryNo(String inputHokenjyaNumber,String inputHistoryNo,String inputItakuKubun){
! //		int historyCnt = 0;
! //		long historyNo = -1L;
! //
! //		try{
! //			historyCnt = tHokenjyaDao.selectByCountUniqueKey(inputHokenjyaNumber,inputHistoryNo,inputItakuKubun);
  //		}catch(Exception ex){
  //			logger.error(ex.getMessage());
  //		}
- //
- //		// edit s.inoue 2010/01/15
- //		if (historyCnt > 0){
- //			try {
- //				historyNo = tHokenjyaDao.selectNewHistoryId(inputHokenjyaNumber);
- //				logger.info("保険者番号採番:" +historyNo);
- //			}catch(Exception ex){
- //				logger.error(ex.getMessage());
- //			}
- //		}else{
- //			// edit s.inoue 2010/01/20
- //			// historyNo = 0;
- //			historyNo = Long.parseLong(inputHistoryNo);
- //		}
- //		return historyNo;
  //	}
  //
! //	private boolean validateData(int pmode) {
! //		String radioHantei = jRadioButton_Kihon.isSelected() ? "1" : "2";
! //		// edit s.inoue 2009/12/02 基本単価必須の為、人間ドックの場合ゼロ登録させる
! //		String kihontanka = jTextField_KihonTanka.getText();
! //		kihontanka = (kihontanka.equals("")) ? "0" : kihontanka;
! //
! //		String historyNumber = (mode==CHANGE_MODE) ? getmodelColumnNumber(COLUMUN_HISTORY_NO): "1";
! //
! //		boolean rettanka = false;
! //		boolean rethokenjya = false;
! //
! //		rettanka= validatedData.setHokenjyaName(jTextField_HokenjyaName.getText())
! //				&& validatedData.setHokenjyaNumber(jTextField_HokenjyaNumber.getText())
! //				&& validatedData.setHonninGairai(jTextField_HonninGairai.getText())
! //				&& validatedData.setTEL(jTextField_TEL.getText())
! //				&& validatedData.setZipcode(jTextField_Zipcode.getText())
! //				&& validatedData.setHinketsuCode(jTextField_HinketuCode.getText())
! //				&& validatedData.setShindenzuCode(jTextField_SindenzuCode.getText())
! //				&& validatedData.setGanteiCode(jTextField_GanteiCode.getText());
! //
! //		rethokenjya = validatedData.setAddress(jTextField_Address.getText())
! //				&& validatedData.setChiban(jTextField_Chiban.getText())
! //				&& validatedData.setKigo(jTextField_Kigo.getText())
! //				// edit s.inoue 2009/12/02
! //				// && validatedData.setKihonTanka(jTextField_KihonTanka.getText())
! //				&& validatedData.setHonninNyuin(jTextField_HonninNyuin.getText())
! //				&& validatedData.setKazokuGairai(jTextField_KazokuNyuin.getText())
! //				&& validatedData.setKazokuNyuin(jTextField_KazokuNyuin.getText())
! //				&& validatedData.setItakuKubun((String) jComboBox_ItakuKubun.getSelectedItem())
! //				&& validatedData.setKihonTanka(kihontanka)
! //				&& validatedData.setGanteiTanka(jTextField_GanteiTanka.getText())
! //				&& validatedData.setHinketsuTanka(jTextField_HinketsuTanka.getText())
! //				&& validatedData.setNingenDocTanka(jTextField_NingenDocTanka.getText())
! //				&& validatedData.setSindenzuTanka(jTextField_SindenzuTanka.getText())
! //				&& validatedData.setTankaHantei(radioHantei)
! //				&& validatedData.setHknjyaHistoryNumber(historyNumber)
! //				&& validatedData.setYukouKigenFrom(jTextField_YukoukigenFrom.getText())
! //				&& validatedData.setYukouKigenTo(jTextField_YukoukigenTo.getText());
! //
! //		if(pmode == ADD_MODE_TANKA ||
! //				pmode == CHANGE_MODE_TANKA ||
! //					pmode == ADD_MODE){
! //			return rettanka && rethokenjya;
! //		}else{
! //			return rettanka;
! //		}
! //	}
  //
! //	// add s.inoue 2010/01/12
! //	/* 選択行指定列データ取得 */
! //	private String getmodelColumnNumber(int colNumber){
! //		return String.valueOf(model.getData(model.getSelectedRow(),colNumber));
! //	}
  //
! //	/**
! //	 * ORCAボタン
! //	 */
! //	public void pushedORCAButton() {
! //		if (JApplication.useORCA) {
! //			JConnection sql = null;
! //			try {
! //				sql = new JConnection("org.postgresql.Driver", "jdbc:postgresql://"
! //						+ JApplication.orcaSetting.getOrcaIpAddress() + ":"
! //						+ JApplication.orcaSetting.getOrcaPort() + "/"
! //						+ JApplication.orcaSetting.getOrcaDatabase(),
! //						JApplication.orcaSetting.getOrcaUser(),
! //						JApplication.orcaSetting.getOrcaPassword());
! //
! //			} catch (SQLException e1) {
! //				e1.printStackTrace();
! //				/* M1103=エラー,機関データベースへの接続が失敗しました。,0,0 */
! //				JErrorMessage.show("M1103", this);
  //
! //				return;
! //			}
  //
! //			ArrayList<Hashtable<String, String>> result = null;
! //			if (validatedData.setHokenjyaNumber(
! //					jTextField_HokenjyaNumber.getText())) {
! //
! //				if (validateAsPushedORCAButton(validatedData)) {
! //					String hokenjyaNumber = validatedData.getHokenjyaNumber();
! //
! //					/* 0 を全て削除する。 */
! //					hokenjyaNumber = hokenjyaNumber.replaceAll("^0+", "");
! //
! //					try {
! //						while (hokenjyaNumber.length() <= 8) {
! //							result = this.getHokenjaInfo(sql, hokenjyaNumber);
! //							if (result.size() != 0) {
! //								break;
! //							}
! //
! //							/* 先頭に 0 を追加する。 */
! //							hokenjyaNumber = "0" + hokenjyaNumber;
! //						}
! //
! //						if (result.size() != 0) {
! //							this.setDbDataToComponent(result);
! //							this.jComboBox_ItakuKubun.grabFocus();
! //						}
! //						else {
! //							/* エラー,入力された保険者番号に該当する保険者情報が存在しません。,0,0 */
! //							JErrorMessage.show("M3140", this);
! //
! //							/* 保険者名称入力欄にフォーカスを移動する。 */
! //							this.jTextField_HokenjyaName.grabFocus();
! //						}
! //
! //					} catch (SQLException e1) {
! //
! //						e1.printStackTrace();
! //						try {
! //							sql.Shutdown();
! //						} catch (SQLException e2) {
! //							e2.printStackTrace();
! //							return;
! //						}
! //						return;
! //					}
! //				}
! //			}
  //
! //			try {
! //				sql.Shutdown();
! //			} catch (SQLException e1) {
! //				e1.printStackTrace();
  //			}
- //		}
- //		else {
- //			/* 保険者名称入力欄にフォーカスを移動する。 */
- //			this.jTextField_HokenjyaName.grabFocus();
- //		}
- //	}
  //
! //	private void setDbDataToComponent(ArrayList<Hashtable<String, String>> result) {
! //		jTextField_HokenjyaName.setText(result.get(0).get("hknjaname"));
! //		jTextField_Zipcode.setText(result.get(0).get("post").trim());
! //		jTextField_Address.setText(result.get(0).get("adrs"));
! //		jTextField_Chiban.setText(result.get(0).get("banti"));
! //		jTextField_Kigo.setText(result.get(0).get("kigo"));
! //		jTextField_HonninGairai.setText(result.get(0).get("hon_gaikyurate"));
! //		jTextField_HonninNyuin.setText(result.get(0).get("hon_nyukyurate"));
! //		jTextField_KazokuGairai.setText(result.get(0).get("kzk_gaikyurate"));
! //		jTextField_KazokuNyuin.setText(result.get(0).get("kzk_nyukyurate"));
! //	}
! //
! //	private ArrayList<Hashtable<String, String>> getHokenjaInfo(
! //			JConnection sql,
! //			String hokenjyaNumber
! //			) throws SQLException {
! //
! //		String numberForSql =
! //			JQueryConvert.queryConvert(hokenjyaNumber);
! //
! //		ArrayList<Hashtable<String, String>> result =
! //			sql.sendExecuteQuery(
! //				"SELECT * FROM TBL_HKNJAINF WHERE HKNJANUM = "
! //						+ numberForSql);
! //
! //		return result;
! //	}
! //
! //	/**
! //	 * 登録ボタン
! //	 */
! //	public void pushedRegisterButton(ActionEvent e) {
! //		register(mode);
! //	}
! //
! //	/**
! //	 * 終了ボタン
! //	 */
! //	public void pushedEndButton(ActionEvent e) {
! //		dispose();
! //	}
  //
! //	/**
! //	 * キャンセルボタン
! //	 */
! //	public void pushedCancelButton(ActionEvent e) {
! //		RETURN_VALUE Ret = JErrorMessage.show("M3151", this);
! //		if (Ret == RETURN_VALUE.YES) {
  //			dispose();
- //		}
- //	}
- //
- //	/**
- //	 * クリアボタン
- //	 */
- //	public void pushedClearButton(ActionEvent e) {
- //		if (mode == ADD_MODE) {
- //			this.jTextField_HokenjyaNumber.setText("");
- //		}
- //		// edit s.inoue 2010/01/21
- //		// if (modeYukouKigen != ADD_MODE){
- //		if (mode == ADD_MODE ||
- //				mode == CHANGE_MODE){
- //			this.jTextField_HokenjyaName.setText("");
- //			this.jTextField_Zipcode.setText("");
- //			this.jTextField_Address.setText("");
- //			this.jTextField_Chiban.setText("");
- //			this.jTextField_TEL.setText("");
- //			this.jTextField_Kigo.setText("");
- //		}
- //		// edit s.inoue 2010/01/22
- //		if(mode == ADD_MODE){
- //			this.jTextField_YukoukigenFrom.setText("");
- //			this.jTextField_YukoukigenTo.setText("");
- //			this.jComboBox_ItakuKubun.setSelectedIndex(0);
- //			this.jTextField_KihonTanka.setText("");
- //			this.jTextField_HinketsuTanka.setText("");
- //			this.jTextField_SindenzuTanka.setText("");
- //			this.jTextField_GanteiTanka.setText("");
- //			this.jTextField_NingenDocTanka.setText("");
- //			this.jRadioButton_Kihon.setSelected(true);
- //		}
- //	}
- //
- //	// add s.inoue 2010/01/11
- //	public void addNewClearButton() {
- //		this.jTextField_YukoukigenFrom.setText("");
- //		this.jTextField_YukoukigenTo.setText("");
- //		this.jComboBox_ItakuKubun.setSelectedIndex(0);
- //		this.jTextField_KihonTanka.setText("");
- //		this.jTextField_HinketsuTanka.setText("");
- //		this.jTextField_SindenzuTanka.setText("");
- //		this.jTextField_GanteiTanka.setText("");
- //		this.jTextField_NingenDocTanka.setText("");
- //		this.jRadioButton_Kihon.setSelected(true);
- //	}
- //
- //	// add s.inoue 2010/01/14
- //	private void checkItakuKubunRecord(ItemEvent e){
- //		if(mode == ADD_MODE ||
- //				modeYukouKigen == ADD_MODE)
- //			return;
- //
- //		if (ItemEvent.SELECTED == e.getStateChange()) {
- //
- //			int selectIdx = 0;
- //			ArrayList<Integer> selectedRecord = new ArrayList<Integer>();
- //
- //			selectIdx = jComboBox_ItakuKubun.getSelectedIndex()+1;
- //			String historyNo = getmodelColumnNumber(COLUMUN_HISTORY_NO);
- //			for (int i = 0; i < model.getRowCount(); i++) {
- //				if (model.getData(i, COLUMUN_HISTORY_NO).equals(historyNo) &&
- //						model.getData(i, COLUMUN_ITAKU_KBN).equals(String.valueOf(selectIdx))){
- //					selectedRecord.add(i);
- //					 model.setselectedRows(model, selectedRecord);
- //				}
- //			}
- //			// add s.inoue 2010/01/20
- //			if (selectedRecord.size() == 0 &&
- //					initializeTanka){
- //				JErrorMessage.show("M3160", this);
- //				jComboBox_ItakuKubun.setSelectedIndex(Integer.parseInt(getmodelColumnNumber(COLUMUN_ITAKU_KBN)) - 1);
- //			}
- //		}
- //	}
- //
- //	// add s.inoue 2010/01/19
- //	private void controlSetting(boolean flg){
- //		// テキストコントロール制御
- //		this.jTextField_HokenjyaNumber.setEditable(flg);
- //		this.jTextField_HokenjyaName.setEditable(flg);
- //		this.jTextField_Zipcode.setEditable(flg);
- //		this.jTextField_Address.setEditable(flg);
- //		this.jTextField_Chiban.setEditable(flg);
- //		this.jTextField_TEL.setEditable(flg);
- //		this.jTextField_Kigo.setEditable(flg);
- //		// edit s.inoue 2010/01/26
- //		this.jButton_Clear.setEnabled(flg);
- //		this.jButton_Register.setEnabled(flg);
- //		// del s.inoue 2010/01/20
- //		// jComboBox_ItakuKubun.setEnabled(!flg);
- //	}
- //
- //	// add s.inoue 2010/01/19
- //	private void controlSettingData(){
- //		setTankaTable(jTextField_HokenjyaNumber.getText());
- //	}
- //
- //	// 削除ボタン
- //	private void pushedYukoukigenDeleteButton(){
- //		logger.info(jButton_RegisterYukoukigenDelete.getText());
- //
- //		// 確認メッセージ
- //		if (model.getSelectedRow() == arrYukou.get(0)){
- //			JErrorMessage.show("M3162", this);
- //			return;
- //		}
- //
- //		RETURN_VALUE Ret = JErrorMessage.show("M3161", this);
- //
- //		if (Ret == RETURN_VALUE.NO) {
  //			return;
  //		}
  //
! //		// 履歴No,委託区分
! //		try {
! //			JApplication.kikanDatabase.Transaction();
! //			tHokenjyaDao.delete(this.hokenjyaNumber,
! //					getmodelColumnNumber(COLUMUN_HISTORY_NO),
! //					getmodelColumnNumber(COLUMUN_ITAKU_KBN));
! //			JApplication.kikanDatabase.Commit();
! //		} catch (SQLException e) {
! //			e.printStackTrace();
! //			logger.error(e.getMessage());
  //		}
  //
! //		// edit s.inoue 2010/01/21
! //		searchReflesh(this.hokenjyaNumber);
! //	}
! //
! //	// 更新ボタン
! //	private void pushedYukoukigenEditButton(){
! //		logger.info(jButton_RegisterYukoukigenEdit.getText());
! //		modeYukouKigen = CHANGE_MODE;
! //		register(CHANGE_MODE_TANKA);
! //	}
! //	// 新規追加ボタン
! //	private void pushedYukoukigenButton(){
! //		logger.info(jButton_RegisterYukoukigen.getText());
! //		register(ADD_MODE_TANKA);
! //	}
! //
! //	// 新規追加ボタン
! //	private void pushedAddButton(){
! //		logger.info(jButton_Add.getText());
! //		modeYukouKigen = ADD_MODE;
! //		// edit s.inoue 2010/01/21
! //		initilizeFocus();
! //		// add s.inoue 2010/01/19
! //		controlSettingData();
! //
! //		// add s.inoue 2010/01/19
! //		// テキストコントロール制御
! //		controlSetting(false);
! //
! //		addNewClearButton();
! //		jButton_RegisterYukoukigen.setVisible(true);
! //		jButton_RegisterYukoukigenEdit.setVisible(false);
! //		this.jTextField_YukoukigenFrom.grabFocus();
! //	}
! //
! //
! //	public void actionPerformed(ActionEvent e) {
! //		Object source = e.getSource();
! //		if(source == jButton_Add){
! //			pushedAddButton();
! //		}else if (source == jButton_RegisterYukoukigen){
! //			pushedYukoukigenButton();
! //		}else if (source == jButton_RegisterYukoukigenEdit){
! //			pushedYukoukigenEditButton();
! //		}else if (source == jButton_RegisterYukoukigenDelete){
! //			pushedYukoukigenDeleteButton();
! //		}else if (source == jButton_End) {
! //			logger.info(jButton_End.getText());
! //			pushedEndButton(e);
! //		}
! //		else if (source == jButton_ORCA) {
! //			logger.info(jButton_ORCA.getText());
! //			pushedORCAButton();
! //		}
! //		else if (source == jButton_Register ||
! //				source == jButton_RegisterAdd) {
! //			logger.info(jButton_Register.getText());
! //			pushedRegisterButton(e);
! //		}
! //		else if (source == jTextField_HokenjyaNumber) {
! //			logger.info(jTextField_HokenjyaNumber.getText());
! //			enterKeyPushedHokenjyaNumber();
! //		}
! //		else if (source == jButton_Clear ||
! //				source == jButton_ClearAdd) {
! //			logger.info(jButton_Clear.getText());
! //			pushedClearButton(e);
! //		}
! //// del s.inoue 2010/01/14
! ////		}else if (source == jButton_RegisterYukoukigenDelete){
! ////			logger.info(jButton_RegisterYukoukigenDelete);
! ////			String[] messageParams = { model.getData(model.getSelectedRow(),1) + "-" + model.getData(model.getSelectedRow(),2) };
! ////			RETURN_VALUE Ret = JErrorMessage.show("M3157", this, messageParams);
! ////
! ////			if (Ret == RETURN_VALUE.YES) {
! ////				deleteYukouKigen();
! ////				searchReflesh(this.hokenjyaNumber);
! ////			}
! //	}
! //
! //	// add s.inoue 2009/10/01
! //	// ラジオボタンイベント
! //	public void itemStateChanged(ItemEvent e) {
! //		Object source = e.getSource();
! //
! //		if (source == jRadioButton_Kihon ||
! //				source == jRadioButton_Doc) {
! //			radioItemChangeColor();
! //			// edit s.inoue 2010/01/21
! //			initilizeFocus();
! //		}
! //		if (source == jRadioButton_Kihon) {
! //			changedKihonState(e);
! //		}
! //		else if (source == jRadioButton_Doc) {
! //			changedDocState(e);
! //		}
! //		else if (source == jComboBox_ItakuKubun) {
! //			checkItakuKubunRecord(e);
! //		}
! //	}
! //	/**
! //	 * 基本のラジオボタンが押された場合
! //	 */
! //	public void changedKihonState(ItemEvent e) {
! //		if (ItemEvent.SELECTED == e.getStateChange()) {
! //			jTextField_TankaHantei.setText("1");
! //		} else {
! //			// del s.inoue 2010/01/14
! //			// clearJTextfield_Tanka(false);
! //		}
! //	}
! //
! //	/**
! //	 * 人間ドックのラジオボタンが押された場合
! //	 */
! //	public void changedDocState(ItemEvent e) {
! //		if (ItemEvent.SELECTED == e.getStateChange()) {
! //			jTextField_TankaHantei.setText("2");
! //		} else {
! //			// del s.inoue 2010/01/14
! //			// clearJTextfield_Tanka(true);
! //		}
! //	}
! //
! //	// add s.inoue 2009/10/01
! //	private void radioItemChangeColor(){
! //		Color kihonItem = null;
! //		Color docItem = null;
! //		boolean selectedItem = false;
! //
! //		if (jRadioButton_Kihon.isSelected()) {
! //			kihonItem = ViewSettings.getRequiedItemBgColor();
! //			docItem = ViewSettings.getDisableItemBgColor();
! //			selectedItem = true;
! //		}else if(jRadioButton_Doc.isSelected()){
! //			kihonItem = ViewSettings.getDisableItemBgColor();
! //			docItem = ViewSettings.getRequiedItemBgColor();
! //			selectedItem = false;
! //		}
! //
! //		// 背景制御
! //		// add s.inoue 2010/01/20
! //		this.jTextField_YukoukigenFrom.setBackground(ViewSettings.getRequiedItemBgColor());
! //		this.jTextField_YukoukigenTo.setBackground(ViewSettings.getRequiedItemBgColor());
! //
! //		this.jTextField_KihonTanka.setBackground(kihonItem);
! //		this.jTextField_SindenzuTanka.setBackground(kihonItem);
! //		this.jTextField_GanteiTanka.setBackground(kihonItem);
! //		this.jTextField_HinketsuTanka.setBackground(kihonItem);
! //		this.jTextField_NingenDocTanka.setBackground(docItem);
! //		// 入力制御
! //		this.jTextField_KihonTanka.setEnabled(selectedItem);
! //		this.jTextField_SindenzuTanka.setEnabled(selectedItem);
! //		this.jTextField_GanteiTanka.setEnabled(selectedItem);
! //		this.jTextField_HinketsuTanka.setEnabled(selectedItem);
! //		this.jTextField_NingenDocTanka.setEnabled(!selectedItem);
! //	}
! //
! //	// add s.inoue 2009/10/01
! //	@Override
! //	public void keyTyped(KeyEvent e) {
! //		Object source = e.getSource();
! //		char keyChar = e.getKeyChar();
! //
! //		/* 基本ラジオボタン */
! //		if (source == this.jRadioButton_Kihon) {
! //			if (keyChar == KeyEvent.VK_SPACE) {
! //				this.jRadioButton_Kihon.setSelected(true);
! //			}
! //		/* Docラジオボタン */
! //		} else if (source == this.jRadioButton_Doc) {
! //			if (keyChar == KeyEvent.VK_SPACE) {
! //				this.jRadioButton_Doc.setSelected(true);
! //			}
! //		/* 性別入力欄 */
! //		} else if (source == this.jTextField_TankaHantei) {
! //
! //			if (keyChar == KeyEvent.VK_1) {
! //				this.jTextField_TankaHantei.setText(TANKA_HANTEI_KIHON);
! //				this.jRadioButton_Kihon.setSelected(true);
! //			} else if (keyChar == KeyEvent.VK_2) {
! //				// edit s.inoue 2010/01/20
! //				// this.jRadioButton_Doc.setText("2");
! //				this.jTextField_TankaHantei.setText(TANKA_HANTEI_DOC);
! //				this.jRadioButton_Doc.setSelected(true);
! //			} else {
! //				String currentValue = this.jTextField_TankaHantei.getText();
! //				if (!currentValue.equals(TANKA_HANTEI_KIHON) &&
! //						!currentValue.equals(TANKA_HANTEI_DOC)) {
! //					this.groupHantei.clearSelection();
! //				}
! //			}
! //		}
! //	}
! //
! //	@Override
! //	public void keyPressed(KeyEvent keyEvent) {
! //		switch(keyEvent.getKeyCode()){
! //		case KeyEvent.VK_F1:
! //			pushedEndButton(null);
! //			break;
! //		case KeyEvent.VK_F2:
! //			pushedClearButton(null);
! //			break;
! //		case KeyEvent.VK_F7:
! //			if(jButton_Add.isVisible()){
! //				pushedAddButton();
! //			}
! //			break;
! //		case KeyEvent.VK_F8:
! //			if(jButton_RegisterYukoukigen.isVisible()){
! //				pushedYukoukigenButton();
! //			}
! //			break;
! //		case KeyEvent.VK_F9:
! //			if(jButton_RegisterYukoukigenEdit.isVisible()){
! //				pushedYukoukigenEditButton();
! //			}
! //			break;
! //		case KeyEvent.VK_F10:
! //			if(jButton_RegisterYukoukigenDelete.isVisible()){
! //				pushedYukoukigenDeleteButton();
! //			}
! //			break;
! //		case KeyEvent.VK_F12:
! //			register(mode);
! //			break;
  //		}
  //	}
! //
! //}
\ No newline at end of file
--- 1800,1940 ----
  		}
  	}
  
! // del s.inoue 2010/01/14
! //	private void clearJTextfield_Tanka(boolean hantei){
! //		jTextField_TankaHantei.setText("");
! //		// edit s.inoue 2009/12/03
! //		// 0円に設定する。
! //		if (hantei) {
! //			this.jTextField_KihonTanka.setText("0");
! //			this.jTextField_SindenzuTanka.setText("0");
! //			this.jTextField_GanteiTanka.setText("0");
! //			this.jTextField_HinketsuTanka.setText("0");
  //		}else{
! //			this.jTextField_NingenDocTanka.setText("0");
  //		}
  //	}
! 
! // del s.inoue 2010/01/14
! //	// 有効期限レコード削除
! //	private void deleteYukouKigen(){
  //		try{
  //			JApplication.kikanDatabase.Transaction();
  //
! //			StringBuilder sb = new StringBuilder();
! //			sb.append(" DELETE FROM T_HOKENJYA ");
! //			sb.append(" WHERE HKNJANUM = ");
! //			sb.append(JQueryConvert.queryConvert(this.hokenjyaNumber));
! //			sb.append(" AND HKNJYA_HISTORY_NO = ");
! //			sb.append(JQueryConvert.queryConvert(getHistoryNumber()));
  //
! //			JApplication.kikanDatabase.sendNoResultQuery(sb.toString());
  //
! //			JApplication.kikanDatabase.Commit();
  //		}catch(Exception ex){
+ //			ex.printStackTrace();
  //			logger.error(ex.getMessage());
  //		}
  //	}
+ 
+ // del s.inoue 2010/01/15
+ //	 /* テーブルの初期化を行う */
  //
! //	private void initTable()
! //	{
  //
! //		ArrayList<Hashtable<String,String>> result = new ArrayList<Hashtable<String,String>>();
! //		Hashtable<String,String> resultItem = new Hashtable<String,String>();
! //		// edit s.inoue 2010/01/13
! //		HashMap<Integer,String> arrYukou = new HashMap<Integer,String>();
  //
! //		// String query
! //		// = new String("SELECT HKNJANUM,HKNJANAME,POST,ADRS,BANTI,TEL,KIGO,HON_GAIKYURATE," +
! //		// 		"HON_NYUKYURATE,KZK_GAIKYURATE,KZK_NYUKYURATE,ITAKU_KBN,TANKA_KIHON," +
! //		// 		"HINKETU_CD,TANKA_HINKETU,SINDENZU_CD,TANKA_SINDENZU,GANTEI_CD,TANKA_GANTEI FROM T_HOKENJYA ORDER BY HKNJANUM DESC ");
! //		String query
! //			= new String("SELECT HKNJANUM, HKNJANAME, POST, ADRS, BANTI, TEL, KIGO, HON_GAIKYURATE, HON_NYUKYURATE, KZK_GAIKYURATE, KZK_NYUKYURATE," +
! //				" ITAKU_KBN, TANKA_KIHON, HINKETU_CD, TANKA_HINKETU, SINDENZU_CD, TANKA_SINDENZU, GANTEI_CD, TANKA_GANTEI, TANKA_NINGENDOC," +
! //				" TANKA_HANTEI, HKNJYA_HISTORY_NO, HKNJYA_LIMITDATE_START, HKNJYA_LIMITDATE_END, YUKOU_FLG" +
! //				" FROM T_HOKENJYA");
! //
! //		Object[] row = new Object[10];
! //
! //		// ヘッダ
! //		// 有効/無効、有効期限開始、有効期限終了、履歴番号、委託単価区分、
! //		// 単価（基本的な健診）、単価（貧血検査）、単価（心電図検査）、単価（眼底検査）、単価（人間ドック）
! //		model.setPreferedColumnWidths(new int[]{70,90,90,60,100,120,100,110,100,100});
! //
! //		// ヘッダの設定
! //		model.clearAllColumn();
! //		model.clearAllRow();
! //
! //		model.addHeader("有効/無効");
! //		model.addHeader("有効期限開始");
! //		model.addHeader("有効期限終了");
! //		model.addHeader("履歴番号");
! //		model.addHeader("委託単価区分");
! //		model.addHeader("単価（基本的な健診）");
! //		model.addHeader("単価（貧血検査）");
! //		model.addHeader("単価（心電図検査）");
! //		model.addHeader("単価（眼底検査）");
! //		model.addHeader("単価（人間ドック）");
! //
! //		// セルの編集禁止
! //		jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellPosition iSetColumnList[] = {
! //				new JSimpleTableCellPosition(-1,-1)
! //				};
  //
! //		model.setCellEditForbid(iSetColumnList);
! //		model.setAutoCreateRowSorter(true);
! //		model.refreshTable();
  //
! //		try{
! //			result = JApplication.kikanDatabase.sendExecuteQuery(query);
  //
! //			for( int i = 0;i < result.size();i++ )
! //			{
! //				resultItem = result.get(i);
! //				//ResultItem.get("YUKOU_FLG")
! //				// edit s.inoue 2010/01/13
! //				// row[0] = new Object[]{new JRadioButton(String.valueOf(i))};
! //				row[0] = new JRadioButton();
! //				arrYukou.put(i, resultItem.get("YUKOU_FLG"));
! //
! //				row[1] = new String(resultItem.get("HKNJYA_LIMITDATE_START"));
! //				row[2] = new String(resultItem.get("HKNJYA_LIMITDATE_END"));
! //				row[3] = new String(resultItem.get("HKNJYA_HISTORY_NO"));
! //				row[4] = new String(resultItem.get("ITAKU_KBN"));
! //				row[5] = new String(resultItem.get("TANKA_KIHON"));
! //				row[6] = new String(resultItem.get("TANKA_HINKETU"));
! //				row[7] = new String(resultItem.get("TANKA_SINDENZU"));
! //				row[8] = new String(resultItem.get("TANKA_GANTEI"));
! //				row[9] = new String(resultItem.get("TANKA_NINGENDOC"));
! //				model.addData(row);
  //			}
  //
! //		}catch(SQLException f){
! //			f.printStackTrace();
  //
! //			JErrorMessage.show("M3203", this);
  //			dispose();
  //			return;
  //		}
  //
! //		for( int i = 0;i < result.size();i++ )
! //		{
! //			resultItem = result.get(i);
  //		}
  //
! //		// edit s.inoue 2010/01/07
! //		TableColumnModel columns = model.getColumnModel();
! //		for(int i=0;i<columns.getColumnCount();i++) {
! //			columns.getColumn(i).setCellRenderer(new JSimpleTableCellRowRenderer(
! //			(DefaultTableCellRenderer)model.getDefaultRenderer(model.getColumnClass(i))));
  //		}
  //	}
! }
! 
! // Source Code Version Tag System v1.00 -- Do not remove --
! // Product-Tag: {4F85C2F4EE-5847B3BB7A9-ADC5AC59E3-EF66F79A1}
! 
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JHokenjyaMasterMaintenanceEditFrameData.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JHokenjyaMasterMaintenanceEditFrameData.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JHokenjyaMasterMaintenanceEditFrameData.java	Wed Mar  3 16:39:12 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JHokenjyaMasterMaintenanceEditFrameData.java	Wed Feb 24 17:45:24 2010
***************
*** 465,485 ****
  	}
  
  	/**
- 	 * @param itakuKubun the itakuKubun to set
- 	 */
- 	public boolean setItakuKubunCode(String itakuKubunCode) {
- 		this.isValidationAsDataSet = false;
- 		this.ItakuKubun = JValidate.validateItakuKubunCode(itakuKubunCode);
- 
- 		if( this.ItakuKubun == null ) {
- 			JErrorMessage.show("M3112", null);
- 			return false;
- 		}
- 
- 		return true;
- 	}
- 
- 	/**
  	 * @param kihonTanka the kihonTanka to set
  	 */
  	public boolean setKihonTanka(String kihonTanka) {
--- 465,470 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JHokenjyaMasterMaintenanceListFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JHokenjyaMasterMaintenanceListFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JHokenjyaMasterMaintenanceListFrame.java	Thu Apr 22 14:53:30 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JHokenjyaMasterMaintenanceListFrame.java	Wed Feb 24 17:45:24 2010
***************
*** 12,18 ****
  
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedButton;
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedLabel;
- import jp.or.med.orca.jma_tokutei.common.component.IDialog;
  import jp.or.med.orca.jma_tokutei.common.component.TitleLabel;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettingsKey;
--- 12,17 ----
***************
*** 39,49 ****
  	protected ExtendedLabel jLabal_SubExpl = null;
  	protected JPanel jPanel_ExplArea1 = null;
  	protected JPanel jPanel_MainArea = null;
- 	// add s.inoue 2010/02/25
- 	protected ExtendedButton jButton_Import = null;
- 	protected ExtendedButton jButton_Export = null;
- 	private IDialog filePathDialog;
- 
  	protected ExtendedButton jButton_Add = null;
  	protected ExtendedButton jButton_Change = null;
  	protected ExtendedButton jButton_Delete = null;
--- 38,43 ----
***************
*** 110,143 ****
  			GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
  			gridBagConstraints2.gridy = 0;
  			gridBagConstraints2.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints2.gridx = 5;
  			GridBagConstraints gridBagConstraints1 = new GridBagConstraints();
  			gridBagConstraints1.gridy = 0;
  			gridBagConstraints1.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints1.gridx = 4;
  			GridBagConstraints gridBagConstraints = new GridBagConstraints();
  			gridBagConstraints.gridy = 0;
! 			gridBagConstraints.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints.gridx = 3;
! 
! 			// add s.inoue 2010/02/25
! 			GridBagConstraints gridBagConstraints4 = new GridBagConstraints();
! 			gridBagConstraints4.gridy = 0;
! 			gridBagConstraints4.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints4.gridx = 1;
! 
! 			GridBagConstraints gridBagConstraints5 = new GridBagConstraints();
! 			gridBagConstraints5.gridy = 0;
! 			gridBagConstraints5.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints5.gridx = 2;
! 
  			jPanel_ButtonArea = new JPanel();
  			jPanel_ButtonArea.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
  			jPanel_ButtonArea.setLayout(new GridBagLayout());
- 			// add s.inoue 2010/02/25
- 			jPanel_ButtonArea.add(getJButton_Import(), gridBagConstraints4);
- 			jPanel_ButtonArea.add(getJButton_Export(), gridBagConstraints5);
- 
  			jPanel_ButtonArea.add(getJButton_Add(), gridBagConstraints);
  			jPanel_ButtonArea.add(getJButton_Change(), gridBagConstraints1);
  			jPanel_ButtonArea.add(getJButton_Delete(), gridBagConstraints2);
--- 104,120 ----
  			GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
  			gridBagConstraints2.gridy = 0;
  			gridBagConstraints2.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints2.gridx = 3;
  			GridBagConstraints gridBagConstraints1 = new GridBagConstraints();
  			gridBagConstraints1.gridy = 0;
  			gridBagConstraints1.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints1.gridx = 2;
  			GridBagConstraints gridBagConstraints = new GridBagConstraints();
  			gridBagConstraints.gridy = 0;
! 			gridBagConstraints.gridx = 1;
  			jPanel_ButtonArea = new JPanel();
  			jPanel_ButtonArea.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
  			jPanel_ButtonArea.setLayout(new GridBagLayout());
  			jPanel_ButtonArea.add(getJButton_Add(), gridBagConstraints);
  			jPanel_ButtonArea.add(getJButton_Change(), gridBagConstraints1);
  			jPanel_ButtonArea.add(getJButton_Delete(), gridBagConstraints2);
***************
*** 157,163 ****
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
--- 134,140 ----
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
***************
*** 275,309 ****
  	}
  
  	/**
- 	 * This method initializes jButton_Import
- 	 *
- 	 * @return javax.swing.ExtendedButton
- 	 */
- 	private ExtendedButton getJButton_Import() {
- 		if (jButton_Import == null) {
- 			jButton_Import = new ExtendedButton();
- 			jButton_Import.setText("取込(F4)");
- 			jButton_Import.setFont(new Font("Dialog", Font.PLAIN, 12));
- 			jButton_Import.addActionListener(this);
- 		}
- 		return jButton_Import;
- 	}
- 
- 	/**
- 	 * This method initializes jButton_Export
- 	 *
- 	 * @return javax.swing.ExtendedButton
- 	 */
- 	private ExtendedButton getJButton_Export() {
- 		if (jButton_Export == null) {
- 			jButton_Export = new ExtendedButton();
- 			jButton_Export.setText("書出(F5)");
- 			jButton_Export.setFont(new Font("Dialog", Font.PLAIN, 12));
- 			jButton_Export.addActionListener(this);
- 		}
- 		return jButton_Export;
- 	}
- 	/**
  	 * This method initializes jButton_Add
  	 *
  	 * @return javax.swing.ExtendedButton
--- 252,257 ----
***************
*** 311,317 ****
  	private ExtendedButton getJButton_Add() {
  		if (jButton_Add == null) {
  			jButton_Add = new ExtendedButton();
! 			jButton_Add.setText("追加(F9)");
  			jButton_Add.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Add.addActionListener(this);
  		}
--- 259,265 ----
  	private ExtendedButton getJButton_Add() {
  		if (jButton_Add == null) {
  			jButton_Add = new ExtendedButton();
! 			jButton_Add.setText("追加");
  			jButton_Add.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Add.addActionListener(this);
  		}
***************
*** 326,332 ****
  	private ExtendedButton getJButton_Change() {
  		if (jButton_Change == null) {
  			jButton_Change = new ExtendedButton();
! 			jButton_Change.setText("変更(F11)");
  			jButton_Change.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Change.addActionListener(this);
  		}
--- 274,280 ----
  	private ExtendedButton getJButton_Change() {
  		if (jButton_Change == null) {
  			jButton_Change = new ExtendedButton();
! 			jButton_Change.setText("変更");
  			jButton_Change.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Change.addActionListener(this);
  		}
***************
*** 341,347 ****
  	private ExtendedButton getJButton_Delete() {
  		if (jButton_Delete == null) {
  			jButton_Delete = new ExtendedButton();
! 			jButton_Delete.setText("削除(F12)");
  			jButton_Delete.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Delete.addActionListener(this);
  		}
--- 289,295 ----
  	private ExtendedButton getJButton_Delete() {
  		if (jButton_Delete == null) {
  			jButton_Delete = new ExtendedButton();
! 			jButton_Delete.setText("削除");
  			jButton_Delete.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Delete.addActionListener(this);
  		}
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JHokenjyaMasterMaintenanceListFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JHokenjyaMasterMaintenanceListFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JHokenjyaMasterMaintenanceListFrameCtrl.java	Tue Apr 27 10:56:00 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JHokenjyaMasterMaintenanceListFrameCtrl.java	Wed Apr 21 09:41:12 2010
***************
*** 3,85 ****
  import java.awt.Component;
  import java.awt.event.*;
  
- import java.io.File;
- import java.io.IOException;
- import java.lang.reflect.InvocationTargetException;
- import java.sql.Connection;
  import java.sql.SQLException;
  import java.util.*;
  
- import jp.or.med.orca.jma_tokutei.common.component.DialogFactory;
- import jp.or.med.orca.jma_tokutei.common.component.FileSelectDialog;
- import jp.or.med.orca.jma_tokutei.common.component.IDialog;
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
- import jp.or.med.orca.jma_tokutei.common.convert.JZenkakuKatakanaToHankakuKatakana;
- import jp.or.med.orca.jma_tokutei.common.csv.JCSVReaderStream;
- import jp.or.med.orca.jma_tokutei.common.csv.JCSVWriterStream;
- import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
  import jp.or.med.orca.jma_tokutei.common.errormessage.RETURN_VALUE;
  import jp.or.med.orca.jma_tokutei.common.event.JSingleDoubleClickEvent;
  import jp.or.med.orca.jma_tokutei.common.event.JEnterEvent;
  import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
  import jp.or.med.orca.jma_tokutei.common.scene.JScene;
- import jp.or.med.orca.jma_tokutei.common.sql.dao.DaoFactory;
- import jp.or.med.orca.jma_tokutei.common.sql.dao.THokenjyaDao;
- import jp.or.med.orca.jma_tokutei.common.sql.dao.TKensakekaSonotaDao;
- import jp.or.med.orca.jma_tokutei.common.sql.dao.TKensakekaTokuteiDao;
- import jp.or.med.orca.jma_tokutei.common.sql.model.THokenjya;
- import jp.or.med.orca.jma_tokutei.common.sql.model.TKensakekaSonota;
- import jp.or.med.orca.jma_tokutei.common.sql.model.TKensakekaTokutei;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTable;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellPosition;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableScrollPanel;
  import jp.or.med.orca.jma_tokutei.common.app.JApplication;
- import jp.or.med.orca.jma_tokutei.common.app.JPath;
- 
- import javax.swing.JButton;
  import javax.swing.table.DefaultTableCellRenderer;
  import javax.swing.table.TableColumnModel;
  
  import org.apache.log4j.Logger;
  
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellRowRenderer;
- import jp.or.med.orca.jma_tokutei.common.validate.JValidate;
- import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.dataimport.JImportErrorResultFrameData;
- import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.dataimport.JImportMasterErrorHokenjyaResultFrameData;
  
  /**
   * 保険者マスタメンテナンスの一覧のコントロール
   */
  public class JHokenjyaMasterMaintenanceListFrameCtrl extends JHokenjyaMasterMaintenanceListFrame
  {
- 	private JHokenjyaMasterMaintenanceEditFrameData validatedData = new JHokenjyaMasterMaintenanceEditFrameData();  //  @jve:decl-index=0:
- 
  	private JSimpleTable model = new JSimpleTable();
  	/* フォーカス移動制御 */
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
  
  	private static org.apache.log4j.Logger logger =
  		Logger.getLogger(JHokenjyaMasterMaintenanceListFrameCtrl.class);
- 	private IDialog filePathDialog;
- 
- 	private static jp.or.med.orca.jma_tokutei.common.csv.JCSVReaderStream reader = null;
- 	private static jp.or.med.orca.jma_tokutei.common.csv.JCSVWriterStream writer = null;
- 
- 	private static Vector<Vector<String>> CSVItems = null;
- 
- 	private static String saveTitle= "csvファイル名を指定して保存";
- 	private static String selectTitle= "csvファイル選択";
- 	private static String savaDialogTitle= "csvファイルの保存先を選択、ファイル名を指定してください";
- 	private static String selectDialogTitle= "csvファイルを選択してください";
- 
- 	private THokenjyaDao hokenjyaDao = null;
- 	private THokenjya hokenjya = new THokenjya();
- 
- 	private static final String[] TABLE_COLUMNS = {
- 		"HKNJANUM", "HKNJANAME", "POST", "ADRS", "BANTI", "TEL", "KIGO", "HON_GAIKYURATE", "HON_NYUKYURATE", "KZK_GAIKYURATE", "KZK_NYUKYURATE",
- 		"ITAKU_KBN", "TANKA_KIHON", "HINKETU_CD", "TANKA_HINKETU", "SINDENZU_CD", "TANKA_SINDENZU", "GANTEI_CD", "TANKA_GANTEI",
- 		"TANKA_NINGENDOC", "TANKA_HANTEI", "HKNJYA_HISTORY_NO", "HKNJYA_LIMITDATE_START", "HKNJYA_LIMITDATE_END", "YUKOU_FLG"
- 		 };
  
  	/**
  	 * デフォルトコンストラクタ
--- 3,39 ----
***************
*** 104,113 ****
  		this.setFocusTraversalPolicy(this.focusTraversalPolicy);
  		this.focusTraversalPolicy.setDefaultComponent(model);
  		this.focusTraversalPolicy.addComponent(model);
- 		// add s.inoue 2010/02/25
- 		this.focusTraversalPolicy.addComponent(this.jButton_Import);
- 		this.focusTraversalPolicy.addComponent(this.jButton_Export);
- 
  		this.focusTraversalPolicy.addComponent(this.jButton_Add);
  		this.focusTraversalPolicy.addComponent(this.jButton_Change);
  		this.focusTraversalPolicy.addComponent(this.jButton_Delete);
--- 58,63 ----
***************
*** 129,610 ****
  		dispose();
  	}
  
- 	// add s.inoue 2010/02/25
- 	/**ImportStart↓↓↓↓↓**********************************************************/
- 	/**
- 	 * 取込ボタン
- 	 */
- 	public void pushedImportButton( ActionEvent e )
- 	{
- 		try {
- 			filePathDialog = DialogFactory.getInstance().createDialog(this, null);
- 
- 			filePathDialog.setMessageTitle(selectTitle);
- 			filePathDialog.setEnabled(false);
- 			filePathDialog.setDialogSelect(true);
- 			filePathDialog.setDialogTitle(selectDialogTitle);
- 			filePathDialog.setVisible(true);
- 
- 			// edit s.inoue 2010/03/25
- 			if (filePathDialog.getStatus().equals(RETURN_VALUE.CANCEL))
- 				return;
- 
- 			String filePath = filePathDialog.getFilePath();
- 			// add s.inoue 2010/03/05
- 			File fileImport = new File(filePath);
- 			if(!fileImport.exists())
- 				return;
- 			importCsvData(filePath);
- 			initTable();
- 		} catch (Exception ex) {
- 			JErrorMessage.show("M3207",this);
- 			logger.error(ex.getMessage());
- 		}
- 	}
- 
- 	// edit s.inoue 2010/03/04
- 	/* 取込処理 */
- 	private void importCsvData(String filePath){
- 
- 		RETURN_VALUE retValue = JErrorMessage.show("M3205", this);
- 
- 		// cancel時
- 		if (retValue == RETURN_VALUE.NO){
- 			return;
- 		}else if (retValue == RETURN_VALUE.YES){
- 
- 			JImportMasterErrorHokenjyaResultFrameData data = new JImportMasterErrorHokenjyaResultFrameData();
- 
- 			// CSV読込処理
- 			reader = new JCSVReaderStream();
- 
- 			try {
- 				reader.openCSV(filePath,JApplication.CSV_CHARSET);
- 			} catch (IOException e) {
- 				JErrorMessage.show("M3207",this);
- 				logger.error(e.getMessage());
- 			}
- 
- 			CSVItems = reader.readAllTable();
- 
- 			// db接続
- 			getconnectDao();
- 
- 			try {
- 				JApplication.kikanDatabase.Transaction();
- 
- 				int csvCount = CSVItems.size();
- 
- 				if(csvCount == 0){
- 					JErrorMessage.show("M3211",this);
- 					return;
- 				}
- 
- 				// 既存保険者-健診マスタ全削除
- 				hokenjyaMasterDelete();
- 
- 				HashMap hmMap =  new HashMap<String, String>();
- 
- 				// 検査結果データ取込処理
- 				for (int i = 1; i < csvCount; i++) {
- 
- 					Vector<String> insertRow = new Vector<String>();
- 
- 					insertRow =CSVItems.get(i);
- 
- 					// 属性情報取得 CSVデータをローカル変数にセット(「"」を除去したもの)
- 					setCSVItemsToDB(data,insertRow);
- 
- 					// validate処理
- 					if (!validateData(data))
- 						return;
- 
- 					hokenjyaMasterRegister(data);
- 					if (!hmMap.containsKey(data.CSV_COLUMN_HKNJANUM))
- 						kenshinMasterRegister(data);
- 					hmMap.put(data.CSV_COLUMN_HKNJANUM,data.CSV_COLUMN_HKNJANUM);
- 				}
- 
- 				JApplication.kikanDatabase.Commit();
- 
- 				String[] messageParams = {String.valueOf(csvCount-1)};
- 				JErrorMessage.show("M3209",this,messageParams);
- 			} catch (SQLException e) {
- 				try {
- 					JApplication.kikanDatabase.rollback();
- 				} catch (SQLException e1) {}
- 				JErrorMessage.show("M3207",this);
- 				logger.error(e.getMessage());
- 			}
- 		}
- 	}
- 
- 	// edit s.inoue 2010/03/04
- 	/* csvデータ取込 */
- 	private void setCSVItemsToDB(JImportMasterErrorHokenjyaResultFrameData data,
- 			Vector<String> insertRow){
- 
- 		data.CSV_COLUMN_HKNJANUM = reader.rmQuart(insertRow.get(0));
- 		data.CSV_COLUMN_HKNJANAME = reader.rmQuart(insertRow.get(1));
- 		data.CSV_COLUMN_POST = reader.rmQuart(insertRow.get(2));
- 		data.CSV_COLUMN_ADRS = reader.rmQuart(insertRow.get(3));
- 		data.CSV_COLUMN_BANTI = reader.rmQuart(insertRow.get(4));
- 		data.CSV_COLUMN_TEL = reader.rmQuart(insertRow.get(5));
- 		data.CSV_COLUMN_KIGO = reader.rmQuart(insertRow.get(6));
- 		data.CSV_COLUMN_HON_GAIKYURATE = reader.rmQuart(insertRow.get(7));
- 		data.CSV_COLUMN_HON_NYUKYURATE = reader.rmQuart(insertRow.get(8));
- 		data.CSV_COLUMN_KZK_GAIKYURATE = reader.rmQuart(insertRow.get(9));
- 		data.CSV_COLUMN_KZK_NYUKYURATE = reader.rmQuart(insertRow.get(10));
- 		data.CSV_COLUMN_ITAKU_KBN = reader.rmQuart(insertRow.get(11));
- 		data.CSV_COLUMN_TANKA_KIHON = reader.rmQuart(insertRow.get(12));
- 		data.CSV_COLUMN_HINKETU_CD = reader.rmQuart(insertRow.get(13));
- 		data.CSV_COLUMN_TANKA_HINKETU = reader.rmQuart(insertRow.get(14));
- 		data.CSV_COLUMN_SINDENZU_CD = reader.rmQuart(insertRow.get(15));
- 		data.CSV_COLUMN_TANKA_SINDENZU = reader.rmQuart(insertRow.get(16));
- 		data.CSV_COLUMN_GANTEI_CD = reader.rmQuart(insertRow.get(17));
- 		data.CSV_COLUMN_TANKA_GANTEI = reader.rmQuart(insertRow.get(18));
- 		data.CSV_COLUMN_TANKA_NINGENDOC = reader.rmQuart(insertRow.get(19));
- 		data.CSV_COLUMN_TANKA_HANTEI = reader.rmQuart(insertRow.get(20));
- 		data.CSV_COLUMN_HKNJYA_HISTORY_NO = reader.rmQuart(insertRow.get(21));
- 		data.CSV_COLUMN_HKNJYA_LIMITDATE_START = reader.rmQuart(insertRow.get(22));
- 		data.CSV_COLUMN_HKNJYA_LIMITDATE_END = reader.rmQuart(insertRow.get(23));
- 		data.CSV_COLUMN_YUKOU_FLG = reader.rmQuart(insertRow.get(24));
- 	}
- 
- 	// edit s.inoue 2010/03/04
- 	/* validate処理 */
- 	private boolean validateData(JImportMasterErrorHokenjyaResultFrameData data) {
- 
- 		boolean rettanka = false;
- 
- 		// edit s.inoue 2010/04/27
- 		String address = data.CSV_COLUMN_ADRS;
- 		if (!JValidate.isAllZenkaku(address)){
- 			address = JZenkakuKatakanaToHankakuKatakana.eisukigoHanToZen(address);
- 		}
- 		address = JValidate.encodeUNICODEtoConvert(address);
- 
- 		rettanka= validatedData.setHokenjyaName(data.CSV_COLUMN_HKNJANAME)
- 			&& validatedData.setHokenjyaNumber(data.CSV_COLUMN_HKNJANUM)
- 			&& validatedData.setHonninGairai(data.CSV_COLUMN_HON_GAIKYURATE)
- 			&& validatedData.setHinketsuCode(data.CSV_COLUMN_HON_NYUKYURATE)
- 			&& validatedData.setShindenzuCode(data.CSV_COLUMN_SINDENZU_CD)
- 			&& validatedData.setGanteiCode(data.CSV_COLUMN_GANTEI_CD)
- 			&& validatedData.setTEL(data.CSV_COLUMN_TEL)
- 			&& validatedData.setZipcode(data.CSV_COLUMN_POST)
- 			&& validatedData.setAddress(address)
- 			&& validatedData.setChiban(data.CSV_COLUMN_BANTI)
- 			&& validatedData.setKigo(data.CSV_COLUMN_KIGO)
- 			&& validatedData.setHonninNyuin(data.CSV_COLUMN_HON_NYUKYURATE)
- 			&& validatedData.setKazokuGairai(data.CSV_COLUMN_HON_GAIKYURATE)
- 			&& validatedData.setKazokuNyuin(data.CSV_COLUMN_KZK_NYUKYURATE)
- 			&& validatedData.setItakuKubunCode(data.CSV_COLUMN_ITAKU_KBN)
- 			&& validatedData.setKihonTanka(data.CSV_COLUMN_TANKA_KIHON)
- 			&& validatedData.setGanteiTanka(data.CSV_COLUMN_TANKA_GANTEI)
- 			&& validatedData.setHinketsuTanka(data.CSV_COLUMN_TANKA_HINKETU)
- 			&& validatedData.setNingenDocTanka(data.CSV_COLUMN_TANKA_NINGENDOC)
- 			&& validatedData.setSindenzuTanka(data.CSV_COLUMN_TANKA_SINDENZU)
- 			&& validatedData.setTankaHantei(data.CSV_COLUMN_TANKA_HANTEI)
- 			&& validatedData.setHknjyaHistoryNumber(data.CSV_COLUMN_HKNJYA_HISTORY_NO)
- 			&& validatedData.setYukouKigenFrom(data.CSV_COLUMN_HKNJYA_LIMITDATE_START)
- 			&& validatedData.setYukouKigenTo(data.CSV_COLUMN_HKNJYA_LIMITDATE_END)
- 			&& validatedData.setYukouFlg(data.CSV_COLUMN_YUKOU_FLG);
- 		return rettanka;
- 	}
- 	/*
- 	 * 接続処理
- 	 */
- 	private void getconnectDao(){
- 		try {
- 			Connection connection = JApplication.kikanDatabase.getMConnection();
- 
- 			hokenjyaDao = (THokenjyaDao) DaoFactory.createDao(
- 					connection,
- 					hokenjya);
- 
- 		} catch (Exception e) {
- 			logger.error("機関FDBへの接続処理に失敗しました。");
- 			JErrorMessage.show("M3326",this);
- 			return;
- 		}
- 	}
- 
- 	/**
- 	 * 既存保険者,健診マスタ削除
- 	 * @throws SQLException
- 	 */
- 	private void hokenjyaMasterDelete(){
- 		// hknjyanumによる削除※履歴を含め削除
- 		try {
- 			// T_HOKENJA削除
- 			hokenjyaDao.delete();
- 
- 			// T_KENSHINMASTER削除
- 			String query = new String("DELETE FROM T_KENSHINMASTER WHERE HKNJANUM <> '99999999'");
- 			JApplication.kikanDatabase.sendNoResultQuery(query);
- 
- 		} catch (SQLException e) {
- 			JErrorMessage.show("M3208",this);
- 			e.printStackTrace();
- 			logger.error(e.getMessage());
- 		}
- 	}
- 
- 	private void kenshinMasterRegister(JImportMasterErrorHokenjyaResultFrameData data)
- 		throws SQLException
- 	{
- 
- 		try {
- 				// 新規追加の場合はさらに健診項目マスタへの追加も行う
- 				ArrayList<Hashtable<String, String>> resultKenshin = new ArrayList<Hashtable<String, String>>();
- 				Hashtable<String, String> resultItemKenshin = new Hashtable<String, String>();
- 				StringBuffer buffer = new StringBuffer(
- 						"SELECT * FROM T_KENSHINMASTER WHERE HKNJANUM = "
- 								+ JQueryConvert.queryConvert("99999999"));
- 
- 				resultKenshin = JApplication.kikanDatabase.sendExecuteQuery(buffer.toString());
- 
- 				for (int i = 0; i < resultKenshin.size(); i++) {
- 					resultItemKenshin = resultKenshin.get(i);
- 
- 					buffer = new StringBuffer("INSERT INTO T_KENSHINMASTER ( "
- 							+ "HKNJANUM,KOUMOKU_CD,KOUMOKU_NAME,DATA_TYPE,MAX_BYTE_LENGTH,XML_PATTERN,"
- 							+ "XML_DATA_TYPE,XML_KENSA_CD,OBSERVATION,AUTHOR,AUTHOR_KOUMOKU_CD,"
- 							+ "KENSA_GROUP,KENSA_GROUP_CD,KEKKA_OID,KOUMOKU_OID,HISU_FLG,KAGEN,"
- 							+ "JYOUGEN,DS_JYOUGEN,JS_JYOUGEN,DS_KAGEN,JS_KAGEN,KIJYUNTI_HANI,"
- 							+ "TANI,KENSA_HOUHOU,TANKA_KENSIN,BIKOU,XMLITEM_SEQNO"
- 							+ " )VALUES( "
- 							+ JQueryConvert.queryConvertAppendComma(validatedData.getHokenjyaNumber())
- 							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("KOUMOKU_CD"))
- 							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("KOUMOKU_NAME"))
- 							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("DATA_TYPE"))
- 							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("MAX_BYTE_LENGTH"))
- 							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("XML_PATTERN"))
- 							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("XML_DATA_TYPE"))
- 							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("XML_KENSA_CD"))
- 							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("OBSERVATION"))
- 							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("AUTHOR"))
- 							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("AUTHOR_KOUMOKU_CD"))
- 							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("KENSA_GROUP"))
- 							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("KENSA_GROUP_CD"))
- 							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("KEKKA_OID"))
- 							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("KOUMOKU_OID"))
- 							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("HISU_FLG"))
- 							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("KAGEN"))
- 							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("JYOUGEN"))
- 							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("DS_JYOUGEN"))
- 							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("JS_JYOUGEN"))
- 							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("DS_KAGEN"))
- 							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("JS_KAGEN"))
- 							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("KIJYUNTI_HANI"))
- 							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("TANI"))
- 							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("KENSA_HOUHOU"))
- 							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("TANKA_KENSIN"))
- 							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("BIKOU"))
- 							+ JQueryConvert.queryConvert(resultItemKenshin.get("XMLITEM_SEQNO")) +
- 							")");
- 
- 					JApplication.kikanDatabase.sendNoResultQuery(buffer.toString());
- 				}
- 		} catch (SQLException f) {
- 			f.printStackTrace();
- 			JErrorMessage.show("M3212", this);
- 			try {
- 				JApplication.kikanDatabase.rollback();
- 				return;
- 			} catch (SQLException g) {
- 				g.printStackTrace();
- 				JErrorMessage.show("M0000", this);
- 				System.exit(1);
- 			}
- 		}
- 	}
- 
- 	/**
- 	 * CSVデータ登録
- 	 * @throws SQLException
- 	 */
- 	private void hokenjyaMasterRegister(JImportMasterErrorHokenjyaResultFrameData data)
- 		throws SQLException
- 	{
- 		StringBuffer buffer = new StringBuffer();
- 
- 		String address = JValidate.encodeUNICODEtoConvert(validatedData.getAddress());
- 		String tiban = JValidate.encodeUNICODEtoConvert(validatedData.getChiban());
- 
- 		buffer.append("INSERT INTO T_HOKENJYA (");
- 		buffer.append("HKNJANUM,HKNJANAME,POST,ADRS,BANTI,TEL,");
- 		buffer.append("KIGO,HON_GAIKYURATE,HON_NYUKYURATE,");
- 		buffer.append("KZK_GAIKYURATE,KZK_NYUKYURATE,ITAKU_KBN,");
- 		buffer.append("TANKA_KIHON,HINKETU_CD,TANKA_HINKETU,");
- 		buffer.append("SINDENZU_CD,TANKA_SINDENZU,GANTEI_CD,");
- 		buffer.append("TANKA_GANTEI,TANKA_NINGENDOC,TANKA_HANTEI,");
- 		buffer.append("HKNJYA_HISTORY_NO,");
- 		buffer.append("HKNJYA_LIMITDATE_START,HKNJYA_LIMITDATE_END,");
- 		buffer.append("YUKOU_FLG)");
- 		buffer.append("VALUES ( "
- 			+ JQueryConvert.queryConvertAppendComma(validatedData.getHokenjyaNumber())
- 			+ JQueryConvert.queryConvertAppendBlankAndComma(validatedData.getHokenjyaName())
- 			+ JQueryConvert.queryConvertAppendBlankAndComma(validatedData.getZipcode())
- 			+ JQueryConvert.queryConvertAppendBlankAndComma(address)
- 			+ JQueryConvert.queryConvertAppendBlankAndComma(tiban)
- 			+ JQueryConvert.queryConvertAppendBlankAndComma(validatedData.getTEL())
- 			+ JQueryConvert.queryConvertAppendComma(validatedData.getCode())
- 			+ JQueryConvert.queryConvertAppendComma(validatedData.getHonninGairai())
- 			+ JQueryConvert.queryConvertAppendComma(validatedData.getHonninNyuin())
- 			+ JQueryConvert.queryConvertAppendComma(validatedData.getKazokuGairai())
- 			+ JQueryConvert.queryConvertAppendComma(validatedData.getKazokuNyuin())
- 			+ JQueryConvert.queryConvertAppendComma(validatedData.getItakuKubun())
- 			+ JQueryConvert.queryConvertAppendComma(validatedData.getKihonTanka())
- 			+ JQueryConvert.queryConvertAppendComma(validatedData.getHinketsuCode())
- 			+ JQueryConvert.queryConvertAppendComma(validatedData.getHinketsuTanka())
- 			+ JQueryConvert.queryConvertAppendComma(validatedData.getShindenzuCode())
- 			+ JQueryConvert.queryConvertAppendComma(validatedData.getSindenzuTanka())
- 			+ JQueryConvert.queryConvertAppendComma(validatedData.getGanteiCode())
- 			+ JQueryConvert.queryConvertAppendComma(validatedData.getGanteiTanka())
- 			+ JQueryConvert.queryConvertAppendComma(validatedData.getNingenDocTanka())
- 			+ JQueryConvert.queryConvertAppendComma(validatedData.getTankaHantei())
- 			+ JQueryConvert.queryConvertAppendComma(validatedData.getHknjyaHistoryNumber())
- 			+ JQueryConvert.queryConvertAppendComma(validatedData.getYukouKigenFrom())
- 			+ JQueryConvert.queryConvertAppendComma(validatedData.getYukouKigenTo())
- 			+ JQueryConvert.queryConvert(validatedData.getYukouFlg())
- 			+ ")");
- 
- 		JApplication.kikanDatabase.sendNoResultQuery(buffer.toString());
- 
- 	}
- 	/**ImportEnd↑↑↑↑↑**********************************************************/
- 
- 	/**ExportStart↓↓↓↓↓**********************************************************/
- 	// add s.inoue 2010/02/25
- 	/**
- 	 * 書出ボタン
- 	 */
- 	public void pushedExportButton( ActionEvent e )
- 	{
- 		try {
- 			String saveFileName = JPath.createDirectoryUniqueName("HokenjyaMaster");
- 
- 			String defaltPath = JPath.getDesktopPath() +
- 			File.separator +
- 			saveFileName;
- 
- 			filePathDialog = DialogFactory.getInstance().createDialog(this, defaltPath);
- 			filePathDialog.setMessageTitle(saveTitle);
- 			filePathDialog.setEnabled(false);
- 			filePathDialog.setDialogSelect(false);
- 			filePathDialog.setDialogTitle(savaDialogTitle);
- 			filePathDialog.setVisible(true);
- 
- 			// edit s.inoue 2010/03/25
- 			if (filePathDialog.getStatus().equals(RETURN_VALUE.CANCEL))
- 				return;
- 
- 			String filePath = filePathDialog.getFilePath();
- 			if (filePath.equals(""))
- 				return;
- 			exportCsvData(filePath);
- 
- 		} catch (Exception ex) {
- 			JErrorMessage.show("M3206", this);
- 			logger.error(ex.getMessage());
- 		}
- 	}
- 
- 	/* export処理 */
- 	private void exportCsvData(String filePath){
- 		JImportMasterErrorHokenjyaResultFrameData data = new JImportMasterErrorHokenjyaResultFrameData();
- 
- 		// CSV読込処理
- 		writer = new JCSVWriterStream();
- 
- 		try {
- 			writer.writeTable(getExportData());
- 			writer.saveCSV(filePath,JApplication.CSV_CHARSET);
- 		} catch (IOException e) {
- 			JErrorMessage.show("M3206", this);
- 			logger.error(e.getMessage());
- 		}
- 	}
- 
- 	/* DBよりデータ取得*/
- 	private Vector<Vector<String>> getExportData(){
- 
- 		Vector<Vector<String>> newTable = new Vector<Vector<String>>();
- 
- 		ArrayList<Hashtable<String, String>> result
- 			= new ArrayList<Hashtable<String, String>>();
- 
- 		// add s.inoue 2010/03/04
- 		StringBuilder sb = new StringBuilder();
- 		sb.append(" SELECT HKNJANUM, HKNJANAME, POST, ADRS, BANTI, TEL, KIGO, HON_GAIKYURATE, HON_NYUKYURATE,");
- 		sb.append(" KZK_GAIKYURATE, KZK_NYUKYURATE, ITAKU_KBN, TANKA_KIHON, HINKETU_CD, TANKA_HINKETU, SINDENZU_CD,");
- 		sb.append(" TANKA_SINDENZU, GANTEI_CD, TANKA_GANTEI, TANKA_NINGENDOC, TANKA_HANTEI, HKNJYA_HISTORY_NO, HKNJYA_LIMITDATE_START, HKNJYA_LIMITDATE_END, YUKOU_FLG ");
- 		sb.append(" FROM T_HOKENJYA ");
- 		sb.append(" ORDER BY HKNJANUM,HKNJYA_HISTORY_NO DESC");
- 
- 		try {
- 			result = JApplication.kikanDatabase.sendExecuteQuery(sb.toString());
- 		} catch (SQLException e) {
- 			e.printStackTrace();
- 			return null;
- 		}
- 
- 		Hashtable<String, String> resultItem = new Hashtable<String, String>();
- 		for( int i=0; i<result.size(); ++i )
- 		{
- 			resultItem = result.get(i);
- 
- 			Vector<String> data = new Vector<String>();
- 
- 			for (int j=0; j<resultItem.size(); ++j){
- 				// 空要素
- 				String exportItem =resultItem.get(TABLE_COLUMNS[j]).trim();
- 				if (TABLE_COLUMNS[j].equals("ADRS") ||
- 						TABLE_COLUMNS[j].equals("BANTI"))
- 					exportItem = JValidate.encodeUNICODEtoConvert(exportItem).trim();
- 
- 				data.add(exportItem);
- 			}
- 
- 			// header設定
- 			if (i==0){
- 				Vector colmn = new Vector<String>();
- 				List l = java.util.Arrays.asList(TABLE_COLUMNS);
- 				for (Iterator item = l.iterator(); item.hasNext();) {
- 					colmn.add((String)item.next());
- 				}
- 				newTable.add(colmn);
- 			}
- 			newTable.add(data);
- 		}
- 		return newTable;
- 	}
- 	/**ExportEnd↑↑↑↑↑**********************************************************/
- 
- //	/**
- //	 * マスタ存在判定
- //	 */
- //	private boolean existsMasterData(JImportMasterErrorResultFrameData Data) {
- //
- //		boolean ret = false;
- //		int resultCount = 0;
- //
- //		try {
- //			resultCount = hokenjyaDao.selectByCountUniqueKey(
- //						Data.CSV_COLUMN_CSV_COLUMN_HKNJANUM);
- //		} catch (Exception e) {
- //			e.printStackTrace();
- //			logger.error(e.getMessage());
- //		}
- //
- //		if (resultCount > 0) {
- //			ret=true;
- //		}
- //
- //		return ret;
- //	}
- 
  	/**
  	 * 追加ボタン
  	 */
--- 79,84 ----
***************
*** 740,746 ****
  		}catch(SQLException f){
  			f.printStackTrace();
  
! 			JErrorMessage.show("M3203", this);
  			dispose();
  			return;
  		}
--- 214,220 ----
  		}catch(SQLException f){
  			f.printStackTrace();
  
! 			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3203", this);
  			dispose();
  			return;
  		}
***************
*** 776,791 ****
  			logger.info(jButton_End.getText());
  			pushedEndButton( e );
  		}
- 		else if (source == jButton_Import)
- 		{
- 			logger.info(jButton_Import.getText());
- 			pushedImportButton(e);
- 		}
- 		else if (source == jButton_Export)
- 		{
- 			logger.info(jButton_Export.getText());
- 			pushedExportButton(e);
- 		}
  		else if( source == jButton_Add )
  		{
  			logger.info(jButton_Add.getText());
--- 250,255 ----
***************
*** 803,830 ****
  		}
  	}
  
  	@Override
  	public void keyPressed(KeyEvent keyEvent) {
  		switch(keyEvent.getKeyCode()){
  		case KeyEvent.VK_F1:
- 			logger.info(jButton_End.getText());
  			pushedEndButton( null );break;
- 			// edit s.inoue 2010/03/24
- 		case KeyEvent.VK_F4:
- 			logger.info(jButton_Import.getText());
- 			pushedImportButton(null);break;
- 		case KeyEvent.VK_F5:
- 			logger.info(jButton_Export.getText());
- 			pushedExportButton(null);break;
- 
  		case KeyEvent.VK_F9:
- 			logger.info(jButton_Add.getText());
  			pushedAddButton( null );break;
! 		case KeyEvent.VK_F11:
! 			logger.info(jButton_Change.getText());
  			pushedChangeButton(null);break;
! 		case KeyEvent.VK_F12:
! 			logger.info(jButton_Delete.getText());
  			pushedDeleteButton(null);break;
  		}
  	}
--- 267,283 ----
  		}
  	}
  
+ 	// add s.inoue 2009/12/02
  	@Override
  	public void keyPressed(KeyEvent keyEvent) {
  		switch(keyEvent.getKeyCode()){
  		case KeyEvent.VK_F1:
  			pushedEndButton( null );break;
  		case KeyEvent.VK_F9:
  			pushedAddButton( null );break;
! 		case KeyEvent.VK_F10:
  			pushedChangeButton(null);break;
! 		case KeyEvent.VK_F11:
  			pushedDeleteButton(null);break;
  		}
  	}
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JImportDataFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JImportDataFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JImportDataFrame.java	Thu Apr 22 16:59:12 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JImportDataFrame.java	Tue Aug 11 17:55:30 2009
***************
*** 17,24 ****
  import java.awt.event.ActionListener;
  import java.awt.event.ItemEvent;
  import java.awt.event.ItemListener;
- import java.awt.event.KeyEvent;
- import java.awt.event.KeyListener;
  
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedButton;
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedComboBox;
--- 17,22 ----
***************
*** 40,46 ****
   * Modified 2008/03/18 若月
   *  UI 修正
   */
! public class JImportDataFrame extends JFrame implements ActionListener,ItemListener,KeyListener {
  
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
--- 38,44 ----
   * Modified 2008/03/18 若月
   *  UI 修正
   */
! public class JImportDataFrame extends JFrame implements ActionListener,ItemListener {
  
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
***************
*** 60,68 ****
  	protected JPanel jPanel_NumberLabel = null;
  	protected JPanel jPanel_DateLabel = null;
  	protected ExtendedLabel jLabel_FileName = null;
- 	protected ExtendedRadioButton jRadio_SelectNitii = null;
- 	protected ExtendedRadioButton jRadio_SelectDokuji = null;
- 
  	/* Del 2008/07/23 井上 */
  	// protected ExtendedLabel jLabel_KikanNumber = null;
  	//protected ExtendedLabel jLabel_Date = null;
--- 58,63 ----
***************
*** 78,86 ****
  	protected JPanel jPanel_Format = null;
  	protected ExtendedLabel jLabel = null;
  	protected JPanel jPanel_format = null;
! 	// del s.inoue 2010/01/26
! //	protected ExtendedRadioButton jRadioButton_Kousei = null;
! //	protected ExtendedRadioButton jRadioButton_Dokuji = null;
  	private JPanel jPanel = null;
  	private JPanel jPanel1 = null;
  
--- 73,80 ----
  	protected JPanel jPanel_Format = null;
  	protected ExtendedLabel jLabel = null;
  	protected JPanel jPanel_format = null;
! 	protected ExtendedRadioButton jRadioButton_Kousei = null;
! 	protected ExtendedRadioButton jRadioButton_Dokuji = null;
  	private JPanel jPanel = null;
  	private JPanel jPanel1 = null;
  
***************
*** 181,187 ****
  		if (jButton_End == null) {
  			jButton_End = new ExtendedButton();
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.setActionCommand("終了");
  //			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_End.addActionListener(this);
--- 175,181 ----
  		if (jButton_End == null) {
  			jButton_End = new ExtendedButton();
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
! 			jButton_End.setText("戻る");
  			jButton_End.setActionCommand("終了");
  //			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_End.addActionListener(this);
***************
*** 307,314 ****
  	private ExtendedButton getJButton_Import() {
  		if (jButton_Import == null) {
  			jButton_Import = new ExtendedButton();
! 			jButton_Import.setText("取り込み(F12)");
! 			jButton_Import.setPreferredSize(new Dimension(120,25));
  			jButton_Import.setActionCommand("取り込み");
  //			jButton_Import.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Import.addActionListener(this);
--- 301,307 ----
  	private ExtendedButton getJButton_Import() {
  		if (jButton_Import == null) {
  			jButton_Import = new ExtendedButton();
! 			jButton_Import.setText("取り込み");
  			jButton_Import.setActionCommand("取り込み");
  //			jButton_Import.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Import.addActionListener(this);
***************
*** 465,471 ****
  	private ExtendedTextField getJTextField_FileName() {
  		if (jTextField_FileName == null) {
  			jTextField_FileName = new ExtendedTextField();
- 			jTextField_FileName.setPreferredSize(new Dimension(100, 20));
  			jTextField_FileName.setColumns(35);
  		}
  		return jTextField_FileName;
--- 458,463 ----
***************
*** 498,532 ****
  //		return jComboBox_KensaCenterName;
  //	}
  
- 	// del s.inoue 2010/04/02
- //	/**
- //	 * This method initializes jRadio_SelectDokuji
- //	 *
- //	 * @return javax.swing.ExtendedButton
- //	 */
- //	private ExtendedRadioButton getJRadio_SelectDokuji() {
- //		if (jRadio_SelectDokuji == null) {
- //			jRadio_SelectDokuji = new ExtendedRadioButton();
- //			jRadio_SelectDokuji.setText("検査結果");
- //			jRadio_SelectDokuji.addActionListener(this);
- //		}
- //		return jRadio_SelectDokuji;
- //	}
- //
- //	/**
- //	 * This method initializes jButton_OpenFile
- //	 *
- //	 * @return javax.swing.ExtendedButton
- //	 */
- //	private ExtendedRadioButton getJRadio_SelectNitiji() {
- //		if (jRadio_SelectNitii == null) {
- //			jRadio_SelectNitii = new ExtendedRadioButton();
- //			jRadio_SelectNitii.setText("日医フォーマット");
- //			jRadio_SelectNitii.addActionListener(this);
- //		}
- //		return jRadio_SelectNitii;
- //	}
- 
  	/**
  	 * This method initializes jButton_OpenFile
  	 *
--- 490,495 ----
***************
*** 535,545 ****
  	private ExtendedButton getJButton_OpenFile() {
  		if (jButton_OpenFile == null) {
  			jButton_OpenFile = new ExtendedButton();
! 			jButton_OpenFile.setText("参照(O)");
  //			jButton_OpenFile.setPreferredSize(new Dimension(58, 20));
  //			jButton_OpenFile.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_OpenFile.addActionListener(this);
- 			jButton_OpenFile.setMnemonic(KeyEvent.VK_O);
  		}
  		return jButton_OpenFile;
  	}
--- 498,507 ----
  	private ExtendedButton getJButton_OpenFile() {
  		if (jButton_OpenFile == null) {
  			jButton_OpenFile = new ExtendedButton();
! 			jButton_OpenFile.setText("参照");
  //			jButton_OpenFile.setPreferredSize(new Dimension(58, 20));
  //			jButton_OpenFile.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_OpenFile.addActionListener(this);
  		}
  		return jButton_OpenFile;
  	}
***************
*** 787,823 ****
  			gridBagConstraints5.gridx = 1;
  			gridBagConstraints5.gridy = 0;
  			gridBagConstraints5.fill = GridBagConstraints.BOTH;
! //			GridBagConstraints gridBagConstraints4 = new GridBagConstraints();
! //			gridBagConstraints4.gridy = -1;
! //			gridBagConstraints4.gridx = -1;
! 
! 			// add s.inoue 2010/01/25
! 			GridBagConstraints gridBagConstraints7 = new GridBagConstraints();
! 			gridBagConstraints7.gridx = 0;
! 			gridBagConstraints7.gridy = 0;
! 			gridBagConstraints7.anchor = GridBagConstraints.WEST;
! 			gridBagConstraints7.insets = new Insets(5, 0, 0, 0);
! 
! 			// add s.inoue 2010/01/25
! 			GridBagConstraints gridBagConstraints8 = new GridBagConstraints();
! 			gridBagConstraints8.gridx = 1;
! 			gridBagConstraints8.gridy = 0;
! 			gridBagConstraints8.anchor = GridBagConstraints.WEST;
! 			gridBagConstraints8.insets = new Insets(5, 0, 0, 0);
  
  			jLabel_FileName = new ExtendedLabel();
  			jLabel_FileName.setText("ファイル名");
  
  			jPanel = new JPanel();
  			jPanel.setLayout(new GridBagLayout());
  			jPanel.setBorder(BorderFactory.createCompoundBorder(BorderFactory.createLineBorder(Color.gray, 1), BorderFactory.createEmptyBorder(5, 5, 5, 5)));
! //			jPanel.add(getJPanel_Format(), gridBagConstraints5);
! 			jPanel.add(getJPanel_FileInput(), gridBagConstraints9);
  			jPanel.add(jLabel_FileName, gridBagConstraints6);
! 
! // del s.inoue 2010/04/02
! //			jPanel.add(getJRadio_SelectDokuji(), gridBagConstraints7);
! //			jPanel.add(getJRadio_SelectNitiji(), gridBagConstraints8);
  		}
  		return jPanel;
  	}
--- 749,786 ----
  			gridBagConstraints5.gridx = 1;
  			gridBagConstraints5.gridy = 0;
  			gridBagConstraints5.fill = GridBagConstraints.BOTH;
! 			GridBagConstraints gridBagConstraints4 = new GridBagConstraints();
! 			gridBagConstraints4.gridy = -1;
! 			gridBagConstraints4.gridx = -1;
  
  			jLabel_FileName = new ExtendedLabel();
  			jLabel_FileName.setText("ファイル名");
+ 			/* Del 2008/07/23 井上 */
+ 			/* --------------------------------------------------- */
+ 			// jLabel_KikanNumber = new ExtendedLabel();
+ 			// jLabel_KikanNumber.setText("検査センター No.");
+ 			//jLabel_Date = new ExtendedLabel();
+ 			//jLabel_Date.setText("検査年月日");
+ 			// jLabel = new ExtendedLabel();
+ 			// jLabel.setText("取込フォーマット");
+ 			// jLabel.setPreferredSize(new Dimension(120, 16));
+ 			// jLabel.setFont(new Font("Dialog", Font.PLAIN, 12));
+ 			/* --------------------------------------------------- */
  
  			jPanel = new JPanel();
  			jPanel.setLayout(new GridBagLayout());
  			jPanel.setBorder(BorderFactory.createCompoundBorder(BorderFactory.createLineBorder(Color.gray, 1), BorderFactory.createEmptyBorder(5, 5, 5, 5)));
! 			/* Del 2008/07/23 井上 */
! 			/* --------------------------------------------------- */
! 			// jPanel.add(jLabel, gridBagConstraints4);
! 			jPanel.add(getJPanel_Format(), gridBagConstraints5);
  			jPanel.add(jLabel_FileName, gridBagConstraints6);
! 			// jPanel.add(jLabel_KikanNumber, gridBagConstraints7);
! 			// jPanel.add(jLabel_Date, gridBagConstraints8);
! 			jPanel.add(getJPanel_FileInput(), gridBagConstraints9);
! 			// jPanel.add(getJComboBox_KensaCenterName(), gridBagConstraints10);
! 			// jPanel.add(getJTextField_Date(), gridBagConstraints11);
! 			/* --------------------------------------------------- */
  		}
  		return jPanel;
  	}
***************
*** 834,1677 ****
  		}
  		return jPanel1;
  	}
- 
- 	@Override
- 	public void keyPressed(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyReleased(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyTyped(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
  }
- 
- //package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
- //
- //import java.awt.BorderLayout;
- //import javax.swing.JPanel;
- //import javax.swing.JFrame;
- //import javax.swing.JLabel;
- //
- //import java.awt.Dimension;
- //import javax.swing.JButton;
- //import java.awt.GridLayout;
- //import java.awt.FlowLayout;
- //import javax.swing.SwingConstants;
- //import java.awt.CardLayout;
- //import java.awt.Font;
- //import java.awt.Rectangle;
- //import java.awt.event.ActionEvent;
- //import java.awt.event.ActionListener;
- //import java.awt.event.ItemEvent;
- //import java.awt.event.ItemListener;
- //import java.awt.event.KeyEvent;
- //import java.awt.event.KeyListener;
- //
- //import jp.or.med.orca.jma_tokutei.common.component.ExtendedButton;
- //import jp.or.med.orca.jma_tokutei.common.component.ExtendedComboBox;
- //import jp.or.med.orca.jma_tokutei.common.component.ExtendedLabel;
- //import jp.or.med.orca.jma_tokutei.common.component.ExtendedRadioButton;
- //import jp.or.med.orca.jma_tokutei.common.component.ExtendedTextField;
- //import jp.or.med.orca.jma_tokutei.common.component.TitleLabel;
- //import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
- //import jp.or.med.orca.jma_tokutei.common.frame.ViewSettingsKey;
- //
- //import javax.swing.BorderFactory;
- //import java.awt.Color;
- //import java.awt.GridBagLayout;
- //import java.awt.GridBagConstraints;
- //import java.awt.Insets;
- //
- ///**
- // * 検査データ取り込み画面
- // * Modified 2008/03/18 若月
- // *  UI 修正
- // */
- //public class JImportDataFrame extends JFrame implements ActionListener,ItemListener,KeyListener {
- //
- //	protected static final long serialVersionUID = 1L;
- //	protected JPanel jPanel_Content = null;
- //	protected JPanel jPanel_ButtonArea = null;
- //	protected ExtendedButton jButton_End = null;
- //	protected JPanel jPanel_NaviArea = null;
- //	protected TitleLabel jLabel_Title = null;
- //	protected ExtendedLabel jLabel_MainExpl = null;
- //	protected JPanel jPanel_TitleArea = null;
- //	protected JPanel jPanel_ExplArea2 = null;
- //	protected ExtendedLabel jLabal_SubExpl = null;
- //	protected JPanel jPanel_ExplArea1 = null;
- //	protected ExtendedButton jButton_Import = null;
- //	protected JPanel jPanel_InputFiled = null;
- //	protected JPanel jPanel_LabelFiled = null;
- //	protected JPanel jPanel_FileLabel = null;
- //	protected JPanel jPanel_NumberLabel = null;
- //	protected JPanel jPanel_DateLabel = null;
- //	protected ExtendedLabel jLabel_FileName = null;
- //	/* Del 2008/07/23 井上 */
- //	// protected ExtendedLabel jLabel_KikanNumber = null;
- //	//protected ExtendedLabel jLabel_Date = null;
- //	protected JPanel jPanel_FileInput = null;
- //	protected JPanel jPanel_NumberInput = null;
- //	protected JPanel jPanel_DateInput = null;
- //	protected ExtendedTextField jTextField_FileName = null;
- //	protected ExtendedTextField jTextField_Date = null;
- //	protected ExtendedComboBox jComboBox_KensaCenterName = null;
- //	protected ExtendedButton jButton_OpenFile = null;
- //	protected JPanel jPanel_Tools2 = null;
- //	protected JPanel jPanel_Tools1 = null;
- //	protected JPanel jPanel_Format = null;
- //	protected ExtendedLabel jLabel = null;
- //	protected JPanel jPanel_format = null;
- //	protected ExtendedRadioButton jRadioButton_Kousei = null;
- //	protected ExtendedRadioButton jRadioButton_Dokuji = null;
- //	private JPanel jPanel = null;
- //	private JPanel jPanel1 = null;
- //
- //	// add s.inoue 20081001
- //	protected ExtendedLabel m_guiStatus = null;
- //
- //	/**
- //	 * This is the default constructor
- //	 */
- //	public JImportDataFrame() {
- //		super();
- //		initialize();
- //	}
- //
- //	/**
- //	 * This method initializes this
- //	 *
- //	 * @return void
- //	 */
- //	private void initialize() {
- //		/* Modified 2008/03/18 若月 共通処理に置き換え */
- //		/* --------------------------------------------------- */
- ////		this.setSize(800, 600);
- ////		this.setContentPane(getJPanel_Content());
- ////		this.setTitle("特定健診システム");
- ////		setLocationRelativeTo( null );
- ////		this.setVisible(true);
- //		/* --------------------------------------------------- */
- //		this.setContentPane(getJPanel_Content());
- //		this.setTitle(ViewSettings.getTokuteFrameTitleWithKikanInfomation());
- //		this.setSize(ViewSettings.getFrameCommonSize());
- //		this.setLocationRelativeTo( null );
- //		this.setVisible(true);
- //		/* --------------------------------------------------- */
- //	}
- //
- //	/**
- //	 * This method initializes jPanel_Content
- //	 *
- //	 * @return javax.swing.JPanel
- //	 */
- //	private JPanel getJPanel_Content() {
- //		if (jPanel_Content == null) {
- //			BorderLayout borderLayout = new BorderLayout();
- //			borderLayout.setVgap(2);
- //			jPanel_Content = new JPanel();
- //			jPanel_Content.setLayout(borderLayout);
- //			jPanel_Content.add(getJPanel_ButtonArea(), BorderLayout.SOUTH);
- //			jPanel_Content.add(getJPanel_NaviArea(), BorderLayout.NORTH);
- ////			jPanel_Content.add(getJPanel_Tools1(), BorderLayout.CENTER);
- //			jPanel_Content.add(getJPanel_Tools2(), BorderLayout.CENTER);
- //		}
- //		return jPanel_Content;
- //	}
- //
- //	/**
- //	 * This method initializes jPanel_ButtonArea
- //	 *
- //	 * @return javax.swing.JPanel
- //	 */
- //	private JPanel getJPanel_ButtonArea() {
- //		if (jPanel_ButtonArea == null) {
- //
- //			GridBagConstraints gridBagConstraints17 = new GridBagConstraints();
- //			gridBagConstraints17.gridy = 0;
- //			gridBagConstraints17.gridx = 0;
- //			gridBagConstraints17.anchor = GridBagConstraints.WEST;
- //
- //			// add 20081001 s.inoue
- //			GridBagConstraints gridBagConstraints18 = new GridBagConstraints();
- //			gridBagConstraints18.gridy = 0;
- //			gridBagConstraints18.weightx = 2.0D;
- //			gridBagConstraints18.anchor = GridBagConstraints.CENTER;
- //			gridBagConstraints18.gridx = 0;
- //
- //			GridBagConstraints gridBagConstraints16 = new GridBagConstraints();
- //			gridBagConstraints16.gridy = 0;
- //			gridBagConstraints16.weightx = 1.0D;
- //			gridBagConstraints16.anchor = GridBagConstraints.EAST;
- //			gridBagConstraints16.gridx = 0;
- //			jPanel_ButtonArea = new JPanel();
- //			jPanel_ButtonArea.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
- //			jPanel_ButtonArea.setLayout(new GridBagLayout());
- //			jPanel_ButtonArea.add(getJButton_Import(), gridBagConstraints16);
- //			// add 20081001 s.inoue
- //			jPanel_ButtonArea.add(getExtendedLabel(), gridBagConstraints18);
- //			jPanel_ButtonArea.add(getJButton_End(), gridBagConstraints17);
- //		}
- //		return jPanel_ButtonArea;
- //	}
- //
- //	/**
- //	 * This method initializes jButton_End
- //	 *
- //	 * @return javax.swing.ExtendedButton
- //	 */
- //	private ExtendedButton getJButton_End() {
- //		if (jButton_End == null) {
- //			jButton_End = new ExtendedButton();
- //			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
- //			jButton_End.setText("戻る(F1)");
- //			jButton_End.setActionCommand("終了");
- ////			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
- //			jButton_End.addActionListener(this);
- //		}
- //		return jButton_End;
- //	}
- //
- //	/**
- //	 * This method initializes jButton_End
- //	 * add 20081001 s.inoue
- //	 * @return javax.swing.ExtendedLabel
- //	 */
- //	private ExtendedLabel getExtendedLabel() {
- //		if (m_guiStatus == null) {
- //			m_guiStatus = new ExtendedLabel();
- //			m_guiStatus.setText("");
- //			m_guiStatus.setHorizontalAlignment(SwingConstants.RIGHT);
- //			// edit 20081002 s.inoue
- //			//m_guiStatus.setFont(new Font("Dialog", Font.PLAIN, 14));
- //			m_guiStatus.setFont(new Font("Dialog", Font.BOLD, 16));
- //			m_guiStatus.setOpaque(true);
- //		}
- //		return m_guiStatus;
- //	}
- //	/**
- //	 * This method initializes jPanel_NaviArea
- //	 *
- //	 * @return javax.swing.JPanel
- //	 */
- //	private JPanel getJPanel_NaviArea() {
- //		if (jPanel_NaviArea == null) {
- //			CardLayout cardLayout2 = new CardLayout();
- //			cardLayout2.setHgap(10);
- //			cardLayout2.setVgap(10);
- //
- //			jLabel_Title = new TitleLabel(ViewSettingsKey.KEY_TOKUTEI_IMPORTDATA_FRAME_TITLE);
- //
- ////			jLabel_Title = new ExtendedLabel();
- ////			jLabel_Title.setText("外部検査結果データ取込み");
- ////			jLabel_Title.setFont(new Font("Dialog", Font.PLAIN, 18));
- ////			jLabel_Title.setBackground(new Color(153, 204, 255));
- ////			jLabel_Title.setForeground(new Color(51, 51, 51));
- ////			jLabel_Title.setOpaque(true);
- ////			jLabel_Title.setName("jLabel");
- //
- //			jPanel_NaviArea = new JPanel();
- //			jPanel_NaviArea.setLayout(cardLayout2);
- //			jPanel_NaviArea.add(getJPanel_TitleArea(), getJPanel_TitleArea().getName());
- //		}
- //		return jPanel_NaviArea;
- //	}
- //
- //	/**
- //	 * This method initializes jPanel_TitleArea
- //	 *
- //	 * @return javax.swing.JPanel
- //	 */
- //	private JPanel getJPanel_TitleArea() {
- //		if (jPanel_TitleArea == null) {
- //			GridLayout gridLayout = new GridLayout();
- //			gridLayout.setRows(2);
- //			gridLayout.setHgap(0);
- //			gridLayout.setColumns(0);
- //			gridLayout.setVgap(10);
- //			jPanel_TitleArea = new JPanel();
- //			jPanel_TitleArea.setLayout(gridLayout);
- //			jPanel_TitleArea.setName("jPanel2");
- //			jPanel_TitleArea.add(jLabel_Title, null);
- //			jPanel_TitleArea.add(getJPanel_ExplArea1(), null);
- //		}
- //		return jPanel_TitleArea;
- //	}
- //
- //	/**
- //	 * This method initializes jPanel_ExplArea2
- //	 *
- //	 * @return javax.swing.JPanel
- //	 */
- //	private JPanel getJPanel_ExplArea2() {
- //		if (jPanel_ExplArea2 == null) {
- //
- //			jLabal_SubExpl = new ExtendedLabel();
- //			jLabal_SubExpl.setText("検査結果情報ファイルを指定してください。");
- //			jLabal_SubExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
- //			GridLayout gridLayout1 = new GridLayout();
- //			gridLayout1.setRows(2);
- //
- //			jLabel_MainExpl = new ExtendedLabel();
- //			jLabel_MainExpl.setText("検査センターからのデータファイルを取り込みます。");
- //			jLabel_MainExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
- //			jLabel_MainExpl.setName("jLabel1");
- //
- //			jPanel_ExplArea2 = new JPanel();
- //			jPanel_ExplArea2.setName("jPanel4");
- //			jPanel_ExplArea2.setLayout(gridLayout1);
- //			jPanel_ExplArea2.add(jLabel_MainExpl, null);
- //			jPanel_ExplArea2.add(jLabal_SubExpl, null);
- //		}
- //		return jPanel_ExplArea2;
- //	}
- //
- //	/**
- //	 * This method initializes jPanel_ExplArea1
- //	 *
- //	 * @return javax.swing.JPanel
- //	 */
- //	private JPanel getJPanel_ExplArea1() {
- //		if (jPanel_ExplArea1 == null) {
- //			CardLayout cardLayout1 = new CardLayout();
- //			cardLayout1.setHgap(20);
- //			jPanel_ExplArea1 = new JPanel();
- //			jPanel_ExplArea1.setLayout(cardLayout1);
- //			jPanel_ExplArea1.add(getJPanel_ExplArea2(), getJPanel_ExplArea2().getName());
- //		}
- //		return jPanel_ExplArea1;
- //	}
- //
- //	/**
- //	 * This method initializes jButton_Import
- //	 *
- //	 * @return javax.swing.ExtendedButton
- //	 */
- //	private ExtendedButton getJButton_Import() {
- //		if (jButton_Import == null) {
- //			jButton_Import = new ExtendedButton();
- //			jButton_Import.setText("取り込み(F12)");
- //			jButton_Import.setPreferredSize(new Dimension(120,25));
- //			jButton_Import.setActionCommand("取り込み");
- ////			jButton_Import.setFont(new Font("Dialog", Font.PLAIN, 12));
- //			jButton_Import.addActionListener(this);
- //		}
- //		return jButton_Import;
- //	}
- //
- ////	/**
- ////	 * This method initializes jPanel_InputFiled
- ////	 *
- ////	 * @return javax.swing.JPanel
- ////	 */
- ////	private JPanel getJPanel_InputFiled() {
- ////		if (jPanel_InputFiled == null) {
- ////			GridLayout gridLayout2 = new GridLayout();
- ////			gridLayout2.setRows(10);
- ////			jPanel_InputFiled = new JPanel();
- ////			jPanel_InputFiled.setLayout(gridLayout2);
- ////			jPanel_InputFiled.add(getJPanel_format(), null);
- ////		}
- ////		return jPanel_InputFiled;
- ////	}
- //
- ////	/**
- ////	 * This method initializes jPanel_LabelFiled
- ////	 *
- ////	 * @return javax.swing.JPanel
- ////	 */
- ////	private JPanel getJPanel_LabelFiled() {
- ////		if (jPanel_LabelFiled == null) {
- ////			jLabel_FileName = new ExtendedLabel();
- ////			jLabel_FileName.setText("ファイル名");
- ////			jLabel_FileName.setFont(new Font("Dialog", Font.PLAIN, 14));
- ////			GridLayout gridLayout3 = new GridLayout();
- ////			gridLayout3.setRows(10);
- ////			gridLayout3.setColumns(0);
- ////			jPanel_LabelFiled = new JPanel();
- ////			jPanel_LabelFiled.setLayout(gridLayout3);
- ////		}
- ////		return jPanel_LabelFiled;
- ////	}
- //
- ////	/**
- ////	 * This method initializes jPanel_FileLabel
- ////	 *
- ////	 * @return javax.swing.JPanel
- ////	 */
- ////	private JPanel getJPanel_FileLabel() {
- ////		if (jPanel_FileLabel == null) {
- ////
- ////			jLabel_FileName = new ExtendedLabel();
- ////			jLabel_FileName.setText("ファイル名");
- ////			jLabel_FileName.setFont(new Font("Dialog", Font.PLAIN, 14));
- ////
- ////			jPanel_FileLabel = new JPanel();
- ////			jPanel_FileLabel.setLayout(new GridBagLayout());
- ////		}
- ////		return jPanel_FileLabel;
- ////	}
- //
- ////	/**
- ////	 * This method initializes jPanel_NumberLabel
- ////	 *
- ////	 * @return javax.swing.JPanel
- ////	 */
- ////	private JPanel getJPanel_NumberLabel() {
- ////		if (jPanel_NumberLabel == null) {
- ////			jLabel_KikanNumber = new ExtendedLabel();
- ////			jLabel_KikanNumber.setText("検査センター No.");
- ////			jLabel_KikanNumber.setFont(new Font("Dialog", Font.PLAIN, 14));
- ////			jPanel_NumberLabel = new JPanel();
- ////			jPanel_NumberLabel.setLayout(new GridBagLayout());
- ////		}
- ////		return jPanel_NumberLabel;
- ////	}
- //
- ////	/**
- ////	 * This method initializes jPanel_DateLabel
- ////	 *
- ////	 * @return javax.swing.JPanel
- ////	 */
- ////	private JPanel getJPanel_DateLabel() {
- ////		if (jPanel_DateLabel == null) {
- ////			jLabel_Date = new ExtendedLabel();
- ////			jLabel_Date.setText("検査年月日");
- ////			jLabel_Date.setFont(new Font("Dialog", Font.PLAIN, 14));
- ////			jPanel_DateLabel = new JPanel();
- ////			jPanel_DateLabel.setLayout(new GridBagLayout());
- ////		}
- ////		return jPanel_DateLabel;
- ////	}
- //
- //	/**
- //	 * This method initializes jPanel_FileInput
- //	 *
- //	 * @return javax.swing.JPanel
- //	 */
- //	private JPanel getJPanel_FileInput() {
- //		if (jPanel_FileInput == null) {
- //			GridBagConstraints gridBagConstraints15 = new GridBagConstraints();
- //			gridBagConstraints15.insets = new Insets(0, 5, 0, 0);
- //			gridBagConstraints15.gridy = 0;
- //			gridBagConstraints15.weightx = 1.0D;
- //			gridBagConstraints15.anchor = GridBagConstraints.WEST;
- //			gridBagConstraints15.gridx = 1;
- //			GridBagConstraints gridBagConstraints14 = new GridBagConstraints();
- //			gridBagConstraints14.gridx = 0;
- //			gridBagConstraints14.gridy = 0;
- //			gridBagConstraints14.insets = new Insets(5, 0, 0, 0);
- //			gridBagConstraints14.anchor = GridBagConstraints.WEST;
- //			jPanel_FileInput = new JPanel();
- //			jPanel_FileInput.setLayout(new GridBagLayout());
- //			jPanel_FileInput.add(getJTextField_FileName(), gridBagConstraints14);
- //			jPanel_FileInput.add(getJButton_OpenFile(), gridBagConstraints15);
- //		}
- //		return jPanel_FileInput;
- //	}
- //
- ////	/**
- ////	 * This method initializes jPanel_NumberInput
- ////	 *
- ////	 * @return javax.swing.JPanel
- ////	 */
- ////	private JPanel getJPanel_NumberInput() {
- ////		if (jPanel_NumberInput == null) {
- ////			FlowLayout flowLayout2 = new FlowLayout();
- ////			flowLayout2.setAlignment(FlowLayout.LEFT);
- ////			jPanel_NumberInput = new JPanel();
- ////			jPanel_NumberInput.setLayout(flowLayout2);
- ////		}
- ////		return jPanel_NumberInput;
- ////	}
- //
- ////	/**
- ////	 * This method initializes jPanel_DateInput
- ////	 *
- ////	 * @return javax.swing.JPanel
- ////	 */
- ////	private JPanel getJPanel_DateInput() {
- ////		if (jPanel_DateInput == null) {
- ////			FlowLayout flowLayout3 = new FlowLayout();
- ////			flowLayout3.setAlignment(FlowLayout.LEFT);
- ////			jPanel_DateInput = new JPanel();
- ////			jPanel_DateInput.setLayout(flowLayout3);
- ////		}
- ////		return jPanel_DateInput;
- ////	}
- //
- //	/**
- //	 * This method initializes jTextField_FileName
- //	 *
- //	 * @return javax.swing.ExtendedTextField
- //	 */
- //	private ExtendedTextField getJTextField_FileName() {
- //		if (jTextField_FileName == null) {
- //			jTextField_FileName = new ExtendedTextField();
- //			jTextField_FileName.setColumns(35);
- //		}
- //		return jTextField_FileName;
- //	}
- //
- //	/**
- //	 * This method initializes jTextField_Date
- //	 *
- //	 * @return javax.swing.ExtendedTextField
- //	 */
- ////	private ExtendedTextField getJTextField_Date() {
- ////		if (jTextField_Date == null) {
- ////			jTextField_Date = new ExtendedTextField();
- ////			jTextField_Date.setColumns(35);
- ////		}
- ////		return jTextField_Date;
- ////	}
- //
- //	/**
- //	 * This method initializes jComboBox_KensaCenterName
- //	 *
- //	 * @return javax.swing.ExtendedComboBox
- //	 */
- ////	private ExtendedComboBox getJComboBox_KensaCenterName() {
- ////		if (jComboBox_KensaCenterName == null) {
- ////			jComboBox_KensaCenterName = new ExtendedComboBox();
- ////			jComboBox_KensaCenterName.setMaximumRowCount(10);
- ////			jComboBox_KensaCenterName.setPreferredSize(new Dimension(200, 20));
- ////		}
- ////		return jComboBox_KensaCenterName;
- ////	}
- //
- //	/**
- //	 * This method initializes jButton_OpenFile
- //	 *
- //	 * @return javax.swing.ExtendedButton
- //	 */
- //	private ExtendedButton getJButton_OpenFile() {
- //		if (jButton_OpenFile == null) {
- //			jButton_OpenFile = new ExtendedButton();
- //			jButton_OpenFile.setText("参照");
- ////			jButton_OpenFile.setPreferredSize(new Dimension(58, 20));
- ////			jButton_OpenFile.setFont(new Font("Dialog", Font.PLAIN, 12));
- //			jButton_OpenFile.addActionListener(this);
- //		}
- //		return jButton_OpenFile;
- //	}
- //
- //	/**
- //	 * This method initializes jPanel_Tools2
- //	 *
- //	 * @return javax.swing.JPanel
- //	 */
- //	private JPanel getJPanel_Tools2() {
- //		if (jPanel_Tools2 == null) {
- //			GridBagConstraints gridBagConstraints11 = new GridBagConstraints();
- //			gridBagConstraints11.gridx = 0;
- //			gridBagConstraints11.gridy = 1;
- //			GridBagConstraints gridBagConstraints141 = new GridBagConstraints();
- //			gridBagConstraints141.gridx = 0;
- //			gridBagConstraints141.weighty = 1.0D;
- //			gridBagConstraints141.gridy = 1;
- //			GridBagConstraints gridBagConstraints13 = new GridBagConstraints();
- //			gridBagConstraints13.gridx = 0;
- //			gridBagConstraints13.anchor = GridBagConstraints.NORTHWEST;
- //			gridBagConstraints13.weightx = 1.0D;
- //			gridBagConstraints13.fill = GridBagConstraints.BOTH;
- //			gridBagConstraints13.gridy = 0;
- //			GridBagConstraints gridBagConstraints12 = new GridBagConstraints();
- //			gridBagConstraints12.gridx = 1;
- //			gridBagConstraints12.gridy = 5;
- //			GridBagConstraints gridBagConstraints111 = new GridBagConstraints();
- //			gridBagConstraints111.fill = GridBagConstraints.BOTH;
- //			gridBagConstraints111.gridy = 4;
- //			gridBagConstraints111.weightx = 1.0D;
- //			gridBagConstraints111.gridx = 1;
- //			GridBagConstraints gridBagConstraints41 = new GridBagConstraints();
- //			gridBagConstraints41.gridx = 0;
- //			gridBagConstraints41.weightx = 1.0D;
- //			gridBagConstraints41.fill = GridBagConstraints.BOTH;
- //			gridBagConstraints41.gridy = 5;
- //			GridBagConstraints gridBagConstraints31 = new GridBagConstraints();
- //			gridBagConstraints31.gridx = 0;
- //			gridBagConstraints31.fill = GridBagConstraints.BOTH;
- //			gridBagConstraints31.gridy = 4;
- //			GridBagConstraints gridBagConstraints21 = new GridBagConstraints();
- //			gridBagConstraints21.gridx = 0;
- //			gridBagConstraints21.weightx = 1.0D;
- //			gridBagConstraints21.fill = GridBagConstraints.BOTH;
- //			gridBagConstraints21.gridy = 3;
- //			GridBagConstraints gridBagConstraints1 = new GridBagConstraints();
- //			gridBagConstraints1.gridx = 2;
- //			gridBagConstraints1.ipadx = 189;
- //			gridBagConstraints1.ipady = -61;
- //			gridBagConstraints1.gridy = 0;
- //			GridBagConstraints gridBagConstraints = new GridBagConstraints();
- //			gridBagConstraints.gridx = 1;
- //			gridBagConstraints.gridy = 0;
- //			jPanel_Tools2 = new JPanel();
- //			jPanel_Tools2.setName("jPanel8");
- //			jPanel_Tools2.setLayout(new GridBagLayout());
- //			jPanel_Tools2.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));
- //			jPanel_Tools2.add(getJPanel(), gridBagConstraints13);
- //			jPanel_Tools2.add(getJPanel1(), gridBagConstraints141);
- //
- //		}
- //		return jPanel_Tools2;
- //	}
- //
- ////	/**
- ////	 * This method initializes jPanel_Tools1
- ////	 *
- ////	 * @return javax.swing.JPanel
- ////	 */
- ////	private JPanel getJPanel_Tools1() {
- ////		if (jPanel_Tools1 == null) {
- ////			CardLayout cardLayout = new CardLayout();
- ////			cardLayout.setHgap(10);
- ////			jPanel_Tools1 = new JPanel();
- ////			jPanel_Tools1.setLayout(cardLayout);
- ////		}
- ////		return jPanel_Tools1;
- ////	}
- //
- //	/**
- //	 * This method initializes jPanel_Format
- //	 *
- //	 * @return javax.swing.JPanel
- //	 */
- //	private JPanel getJPanel_Format() {
- //		if (jPanel_Format == null) {
- //			GridBagConstraints gridBagConstraints3 = new GridBagConstraints();
- //			gridBagConstraints3.anchor = GridBagConstraints.WEST;
- //			gridBagConstraints3.gridy = 0;
- //			gridBagConstraints3.weightx = 1.0D;
- //			gridBagConstraints3.insets = new Insets(0, 10, 0, 0);
- //			gridBagConstraints3.gridx = 1;
- //			GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
- //			gridBagConstraints2.anchor = GridBagConstraints.WEST;
- //			gridBagConstraints2.gridy = 0;
- //			gridBagConstraints2.gridx = 0;
- //			jPanel_Format = new JPanel();
- //			jPanel_Format.setLayout(new GridBagLayout());
- //			/* Del 2008/07/23 井上 */
- //			/* --------------------------------------------------- */
- //			// jPanel_Format.add(getJRadioButton_Kousei(), gridBagConstraints2);
- //			// jPanel_Format.add(getJRadioButton_Dokuji(), gridBagConstraints3);
- //			/* --------------------------------------------------- */
- //		}
- //		return jPanel_Format;
- //	}
- //
- ////	/**
- ////	 * This method initializes jPanel_format
- ////	 *
- ////	 * @return javax.swing.JPanel
- ////	 */
- ////	private JPanel getJPanel_format() {
- ////		if (jPanel_format == null) {
- ////			GridLayout gridLayout4 = new GridLayout();
- ////			gridLayout4.setRows(2);
- ////			gridLayout4.setColumns(1);
- ////			jPanel_format = new JPanel();
- ////			jPanel_format.setLayout(gridLayout4);
- ////		}
- ////		return jPanel_format;
- ////	}
- //
- //	/**
- //	 * This method initializes jRadioButton_Kousei
- //	 *
- //	 * @return javax.swing.ExtendedRadioButton
- //	 */
- ////	private ExtendedRadioButton getJRadioButton_Kousei() {
- ////		if (jRadioButton_Kousei == null) {
- ////			jRadioButton_Kousei = new ExtendedRadioButton();
- ////			jRadioButton_Kousei.setText("厚労省準拠フォーマット");
- ////			jRadioButton_Kousei.setPreferredSize(new Dimension(160, 20));
- ////			jRadioButton_Kousei.setFont(new Font("Dialog", Font.PLAIN, 12));
- ////			jRadioButton_Kousei.addItemListener(this);
- ////		}
- ////		return jRadioButton_Kousei;
- ////	}
- //
- //	/**
- //	 * This method initializes jRadioButton_Dokuji
- //	 *
- //	 * @return javax.swing.ExtendedRadioButton
- //	 */
- ////	private ExtendedRadioButton getJRadioButton_Dokuji() {
- ////		if (jRadioButton_Dokuji == null) {
- ////			jRadioButton_Dokuji = new ExtendedRadioButton();
- ////			jRadioButton_Dokuji.setText("独自フォーマット");
- ////			jRadioButton_Dokuji.setPreferredSize(new Dimension(150, 20));
- ////			jRadioButton_Dokuji.setFont(new Font("Dialog", Font.PLAIN, 12));
- ////			jRadioButton_Dokuji.addItemListener(this);
- ////		}
- ////		return jRadioButton_Dokuji;
- ////	}
- //
- //	public void actionPerformed(ActionEvent e)
- //	{
- //
- //	}
- //
- //	public void itemStateChanged(ItemEvent e)
- //	{
- //
- //	}
- //
- //	/*
- //	 * FrameSize Control
- //	 */
- //	public void validate()
- //	{
- //		Rectangle rect = getBounds();
- //
- //		super.validate();
- //
- //		/* Modified 2008/03/09 若月  */
- //		/* --------------------------------------------------- */
- ////		if( ViewSettings.NORMALFRAME_MINSIZE_W > rect.width  ||
- ////		ViewSettings.NORMALFRAME_MINSIZE_H > rect.height )
- ////{
- ////	setBounds( rect.x,
- ////			   rect.y,
- ////			   ViewSettings.NORMALFRAME_MINSIZE_W,
- ////			   ViewSettings.NORMALFRAME_MINSIZE_H );
- ////}
- //		/* --------------------------------------------------- */
- //		if( ViewSettings.getFrameCommonWidth() > rect.width  ||
- //				ViewSettings.getFrameCommonHeight() > rect.height )
- //		{
- //			setBounds( rect.x,
- //					   rect.y,
- //					   ViewSettings.getFrameCommonWidth(),
- //					   ViewSettings.getFrameCommonHeight() );
- //		}
- //		/* --------------------------------------------------- */
- //
- //	}
- //
- //	/**
- //	 * This method initializes jPanel
- //	 *
- //	 * @return javax.swing.JPanel
- //	 */
- //	private JPanel getJPanel() {
- //		if (jPanel == null) {
- //			/* Del 2008/07/23 井上 */
- //			/* --------------------------------------------------- */
- ////			GridBagConstraints gridBagConstraints11 = new GridBagConstraints();
- ////			gridBagConstraints11.gridy = 3;
- ////			gridBagConstraints11.weightx = 1.0;
- ////			gridBagConstraints11.anchor = GridBagConstraints.WEST;
- ////			gridBagConstraints11.insets = new Insets(5, 0, 0, 0);
- ////			gridBagConstraints11.gridx = 1;
- ////			GridBagConstraints gridBagConstraints10 = new GridBagConstraints();
- ////			gridBagConstraints10.fill = GridBagConstraints.VERTICAL;
- ////			gridBagConstraints10.gridy = 2;
- ////			gridBagConstraints10.weightx = 1.0;
- ////			gridBagConstraints10.anchor = GridBagConstraints.WEST;
- ////			gridBagConstraints10.insets = new Insets(5, 0, 0, 0);
- ////			gridBagConstraints10.gridx = 1;
- //			GridBagConstraints gridBagConstraints9 = new GridBagConstraints();
- //			gridBagConstraints9.fill = GridBagConstraints.BOTH;
- //			gridBagConstraints9.gridy = 1;
- //			gridBagConstraints9.weightx = 1.0D;
- //			gridBagConstraints9.gridx = 1;
- ////			GridBagConstraints gridBagConstraints8 = new GridBagConstraints();
- ////			gridBagConstraints8.gridy = 3;
- ////			gridBagConstraints8.anchor = GridBagConstraints.WEST;
- ////			gridBagConstraints8.insets = new Insets(5, 0, 0, 0);
- ////			gridBagConstraints8.gridx = 0;
- ////			GridBagConstraints gridBagConstraints7 = new GridBagConstraints();
- ////			gridBagConstraints7.gridy = 2;
- ////			gridBagConstraints7.anchor = GridBagConstraints.WEST;
- ////			gridBagConstraints7.insets = new Insets(5, 0, 0, 0);
- ////			gridBagConstraints7.gridx = 0;
- //			/* --------------------------------------------------- */
- //
- //			GridBagConstraints gridBagConstraints6 = new GridBagConstraints();
- //			gridBagConstraints6.gridy = 1;
- //			gridBagConstraints6.anchor = GridBagConstraints.WEST;
- //			gridBagConstraints6.insets = new Insets(5, 0, 0, 0);
- //			gridBagConstraints6.gridx = 0;
- //			GridBagConstraints gridBagConstraints5 = new GridBagConstraints();
- //			gridBagConstraints5.anchor = GridBagConstraints.WEST;
- //			gridBagConstraints5.gridx = 1;
- //			gridBagConstraints5.gridy = 0;
- //			gridBagConstraints5.fill = GridBagConstraints.BOTH;
- //			GridBagConstraints gridBagConstraints4 = new GridBagConstraints();
- //			gridBagConstraints4.gridy = -1;
- //			gridBagConstraints4.gridx = -1;
- //
- //			jLabel_FileName = new ExtendedLabel();
- //			jLabel_FileName.setText("ファイル名");
- //			/* Del 2008/07/23 井上 */
- //			/* --------------------------------------------------- */
- //			// jLabel_KikanNumber = new ExtendedLabel();
- //			// jLabel_KikanNumber.setText("検査センター No.");
- //			//jLabel_Date = new ExtendedLabel();
- //			//jLabel_Date.setText("検査年月日");
- //			// jLabel = new ExtendedLabel();
- //			// jLabel.setText("取込フォーマット");
- //			// jLabel.setPreferredSize(new Dimension(120, 16));
- //			// jLabel.setFont(new Font("Dialog", Font.PLAIN, 12));
- //			/* --------------------------------------------------- */
- //
- //			jPanel = new JPanel();
- //			jPanel.setLayout(new GridBagLayout());
- //			jPanel.setBorder(BorderFactory.createCompoundBorder(BorderFactory.createLineBorder(Color.gray, 1), BorderFactory.createEmptyBorder(5, 5, 5, 5)));
- //			/* Del 2008/07/23 井上 */
- //			/* --------------------------------------------------- */
- //			// jPanel.add(jLabel, gridBagConstraints4);
- //			jPanel.add(getJPanel_Format(), gridBagConstraints5);
- //			jPanel.add(jLabel_FileName, gridBagConstraints6);
- //			// jPanel.add(jLabel_KikanNumber, gridBagConstraints7);
- //			// jPanel.add(jLabel_Date, gridBagConstraints8);
- //			jPanel.add(getJPanel_FileInput(), gridBagConstraints9);
- //			// jPanel.add(getJComboBox_KensaCenterName(), gridBagConstraints10);
- //			// jPanel.add(getJTextField_Date(), gridBagConstraints11);
- //			/* --------------------------------------------------- */
- //		}
- //		return jPanel;
- //	}
- //
- //	/**
- //	 * This method initializes jPanel1
- //	 *
- //	 * @return javax.swing.JPanel
- //	 */
- //	private JPanel getJPanel1() {
- //		if (jPanel1 == null) {
- //			jPanel1 = new JPanel();
- //			jPanel1.setLayout(new GridBagLayout());
- //		}
- //		return jPanel1;
- //	}
- //
- //	@Override
- //	public void keyPressed(KeyEvent e) {
- //		// TODO 自動生成されたメソッド・スタブ
- //
- //	}
- //
- //	@Override
- //	public void keyReleased(KeyEvent e) {
- //		// TODO 自動生成されたメソッド・スタブ
- //
- //	}
- //
- //	@Override
- //	public void keyTyped(KeyEvent e) {
- //		// TODO 自動生成されたメソッド・スタブ
- //
- //	}
- //}
--- 797,800 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JImportDataFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JImportDataFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JImportDataFrameCtrl.java	Wed Apr 21 10:40:36 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JImportDataFrameCtrl.java	Thu Oct 15 10:01:28 2009
***************
*** 1,28 ****
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
  
- import java.awt.Component;
  import java.awt.FileDialog;
  import java.awt.event.ActionEvent;
  import java.awt.event.ItemEvent;
- import java.awt.event.KeyEvent;
  import java.io.BufferedWriter;
  import java.io.File;
  import java.io.FileWriter;
- import java.math.BigDecimal;
  import java.sql.Connection;
  import java.sql.SQLException;
  import java.util.ArrayList;
- import java.util.Arrays;
- import java.util.HashMap;
  import java.util.Hashtable;
- import java.util.Iterator;
- import java.util.List;
- import java.util.TreeMap;
  import java.util.Vector;
  
  import javax.swing.filechooser.FileFilter;
  // add s.inoue 20081001
- import javax.swing.ButtonGroup;
  import javax.swing.JProgressBar;
  
  import jp.or.med.orca.jma_tokutei.common.app.JApplication;
--- 1,19 ----
***************
*** 49,55 ****
  import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.dataimport.JSelectKojinFrame;
  import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.dataimport.JSelectKojinFrameCtrl;
  import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.dataimport.JSelectKojinFrameData;
- import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.print.PrintDefine;
  import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.printdata.Kikan;
  
  import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.printdata.KihonKensaKoumoku;
--- 40,45 ----
***************
*** 58,92 ****
  import jp.or.med.orca.jma_tokutei.common.util.PropertyUtil;
  import org.apache.log4j.Logger;
  import org.apache.log4j.PropertyConfigurator;
- // edit s.inoue 2010/02/10
- import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame.JImportDataFrameData;
  
  /**
   * 外部健診結果データ取り込みのフレームのコントロール
   */
  public class JImportDataFrameCtrl extends JImportDataFrame
  {
  	private static jp.or.med.orca.jma_tokutei.common.csv.JCSVReaderStream Reader = null;
  	private static Vector<Vector<String>> CSVItems = null;
  	private TKensakekaTokutei kensakekaTokutei = new TKensakekaTokutei();
  	private TKensakekaSonota kensakekaSonota = new TKensakekaSonota();
  	private TKensakekaTokuteiDao kensakekaTokuteiDao = null;
  	private TKensakekaSonotaDao kensakekaSonotaDao = null;
  
  	private String ResultMessage = "";
  	private Long preuketukeId = 0L;
  	private Integer prekensaDate = 0;
  	private static final String FLAME_TITLE_MESSAGE = "同姓同名・同一生年月日の受診者が存在します。";
- 	private String BMIFormat = "##.0";
  
  	/* フォーカス移動制御 */
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
- 	private ButtonGroup radioButtonGroup = new ButtonGroup();
  
  	// loggerの objectを作る。
      private static org.apache.log4j.Logger logger = Logger
      .getLogger(JImportDataFrameCtrl.class);
  
  	JImportDataFrameData validateDate = new JImportDataFrameData();
  
  	public JImportDataFrameCtrl()
--- 48,85 ----
  import jp.or.med.orca.jma_tokutei.common.util.PropertyUtil;
  import org.apache.log4j.Logger;
  import org.apache.log4j.PropertyConfigurator;
  
  /**
   * 外部健診結果データ取り込みのフレームのコントロール
   */
  public class JImportDataFrameCtrl extends JImportDataFrame
  {
+ 	/* Add 2008/07/23 井上 */
+ 	/* --------------------------------------------------- */
  	private static jp.or.med.orca.jma_tokutei.common.csv.JCSVReaderStream Reader = null;
  	private static Vector<Vector<String>> CSVItems = null;
  	private TKensakekaTokutei kensakekaTokutei = new TKensakekaTokutei();
  	private TKensakekaSonota kensakekaSonota = new TKensakekaSonota();
+ 
  	private TKensakekaTokuteiDao kensakekaTokuteiDao = null;
  	private TKensakekaSonotaDao kensakekaSonotaDao = null;
  
+ 	//private final static int INSERT_MODE = 1;
+ 	//private final static int UPDATE_MODE = 2;
  	private String ResultMessage = "";
  	private Long preuketukeId = 0L;
  	private Integer prekensaDate = 0;
  	private static final String FLAME_TITLE_MESSAGE = "同姓同名・同一生年月日の受診者が存在します。";
  
  	/* フォーカス移動制御 */
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
  
  	// loggerの objectを作る。
      private static org.apache.log4j.Logger logger = Logger
      .getLogger(JImportDataFrameCtrl.class);
  
+     /* --------------------------------------------------- */
+ 
  	JImportDataFrameData validateDate = new JImportDataFrameData();
  
  	public JImportDataFrameCtrl()
***************
*** 94,114 ****
  		// add s.inoue 2009/10/14
  		this.focusTraversalPolicy = new JFocusTraversalPolicy();
  		this.setFocusTraversalPolicy(this.focusTraversalPolicy);
! // del s.inoue 2010/04/02
! //		this.focusTraversalPolicy.setDefaultComponent(jRadio_SelectDokuji);
! //		this.focusTraversalPolicy.addComponent(jRadio_SelectDokuji);
! //		this.focusTraversalPolicy.addComponent(jRadio_SelectNitii);
! 		this.focusTraversalPolicy.setDefaultComponent(jButton_OpenFile);
  		this.focusTraversalPolicy.addComponent(jButton_OpenFile);
  		this.focusTraversalPolicy.addComponent(jButton_Import);
  		this.focusTraversalPolicy.addComponent(jButton_End);
  
- 		// add s.inoue 2009/12/03
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			Component comp = focusTraversalPolicy.getComponent(i);
- 			comp.addKeyListener(this);
- 		}
- 
  		//健診センター名称コンボボックスの初期設定
  		ArrayList<Hashtable<String,String>> Result = null;
  		Hashtable<String,String> ResultItem;
--- 87,97 ----
  		// add s.inoue 2009/10/14
  		this.focusTraversalPolicy = new JFocusTraversalPolicy();
  		this.setFocusTraversalPolicy(this.focusTraversalPolicy);
! 		this.focusTraversalPolicy.setDefaultComponent(jTextField_FileName);
  		this.focusTraversalPolicy.addComponent(jButton_OpenFile);
  		this.focusTraversalPolicy.addComponent(jButton_Import);
  		this.focusTraversalPolicy.addComponent(jButton_End);
  
  		//健診センター名称コンボボックスの初期設定
  		ArrayList<Hashtable<String,String>> Result = null;
  		Hashtable<String,String> ResultItem;
***************
*** 127,136 ****
  			ResultItem = Result.get(i);
  			jComboBox_KensaCenterName.addItem(ResultItem.get("CENTER_NAME"));
  		}
- 		// del s.inoue 2010/04/02
- //		radioButtonGroup.add(jRadio_SelectDokuji);
- //		radioButtonGroup.add(jRadio_SelectNitii);
- //		jRadio_SelectDokuji.setSelected(true);
  	}
  
  	public boolean validateAsImportPushed(JImportDataFrameData data)
--- 110,115 ----
***************
*** 277,316 ****
  		return errFlg;
  	}
  
- 	// add s.inoue 2010/02/03
- 	public boolean validateImportNitiiFormatkanaShimei(JImportErrorResultFrameData data)
- 	{
- 		boolean errFlg = false;
- 
- 		try{
- 			// 必須チェック
- 			if (data.kanaShimei.toString().equals("")){
- 				data.errCase=JApplication.ERR_KIND_EMPTY;
- 				errFlg=true;
- 			}else
- 
- 			// 半角チェック
- 			if ( !JValidate.isAllZenkaku(data.kanaShimei)){
- 				data.errCase=JApplication.ERR_KIND_HALF;
- 				errFlg=true;
- 			}else
- 
- 			// 桁数チェック
- 			if (JValidate.checkMaxLimit(data.kanaShimei,40) == false){
- 				data.errCase=JApplication.ERR_KIND_DIGIT;
- 				errFlg=true;
- 			}
- 		}catch(Exception ex){
- 			data.errCase=JApplication.ERR_KIND_TYPE;
- 			errFlg=true;
- 		}
- 
- 		if (errFlg)
- 			data.errField=JApplication.ZOKUSEI_FIELD_SHIMEI;
- 
- 		return errFlg;
- 	}
- 
  	public boolean validateImportseiNenGapi(JImportErrorResultFrameData data)
  	{
  		boolean errFlg = false;
--- 256,261 ----
***************
*** 364,421 ****
  		return errFlg;
  	}
  
- 	// add s.inoue 2010/02/03
- 	public boolean validateImportNitiiFormatseiNenGapi(JImportErrorResultFrameData data)
- 	{
- 		boolean errFlg = false;
- 		String temp ="";
- 
- 		try{
- 			// 生年月日日付妥当性チェック
- 			// 必須チェック
- 			if (data.seiNenGapi.toString().equals("")){
- 				data.errCase=JApplication.ERR_KIND_EMPTY;
- 				errFlg=true;
- 			// edit s.inoue 2010/02/03
- 			}else{
- 				temp = JCalendarConvert.JCtoAD(data.seiNenGapi);
- 				if( temp == null ){
- 					data.errCase=JApplication.ERR_KIND_DATE;
- 					errFlg = true;
- 				}
- 
- 				// 再変換処理(和暦→西暦)
- 				if (!JValidate.checkByte(data.seiNenGapi,8) &&
- 					!JValidate.isNumber(data.seiNenGapi.toString())){
- 
- 					temp = JCalendarConvert.JCtoAD(data.seiNenGapi);
- 					if( temp == null ){
- 						data.errCase=JApplication.ERR_KIND_DATE;
- 						errFlg = true;
- 					}
- 				}
- 
- 				// 数値チェック
- 				if (JValidate.isNumber(data.jusinSeiriNo.toString()) == false){
- 					data.errCase=JApplication.ERR_KIND_NUMBER;
- 					errFlg=true;
- 				}
- 				// 半角チェック
- 				if ( !JValidate.isAllHankaku(data.seiNenGapi,JApplication.CSV_CHARSET)){
- 					data.errCase=JApplication.ERR_KIND_HALF;
- 					errFlg=true;
- 				}
- 			}
- 		}catch(Exception ex){
- 			data.errCase=JApplication.ERR_KIND_TYPE;
- 			errFlg=true;
- 		}
- 
- 		if (errFlg)
- 			data.errField=JApplication.ZOKUSEI_FIELD_SEINENGAPI;
- 		return errFlg;
- 	}
- 
  	public boolean validateImportSex(JImportErrorResultFrameData data)
  	{
  		boolean errFlg = false;
--- 309,314 ----
***************
*** 443,480 ****
  		return errFlg;
  	}
  
- 	// add s.inoue 2010/02/03
- 	public boolean validateImportNitiiFormatSex(JImportErrorResultFrameData data)
- 	{
- 		boolean errFlg = false;
- 		// 性別チェック
- 		try{
- 			// 生年月日日付妥当性チェック
- 			// 必須チェック
- 			if (data.seiBetu.toString().equals("")){
- 				data.errCase=JApplication.ERR_KIND_EMPTY;
- 				errFlg=true;
- 
- 			// 半角チェック
- 			}else if ( !JValidate.isAllHankaku(data.seiBetu,JApplication.CSV_CHARSET)){
- 				data.errCase=JApplication.ERR_KIND_HALF;
- 				errFlg=true;
- 			}else if( !JValidate.validateSexFlag(data.seiBetu) )
- 			{
- 				// 性別妥当性
- 				data.errCase=JApplication.ERR_KIND_SEX;
- 				errFlg = true;
- 			}
- 		}catch(Exception ex){
- 			data.errCase=JApplication.ERR_KIND_TYPE;
- 			errFlg=true;
- 		}
- 
- 		if (errFlg)
- 			data.errField=JApplication.ZOKUSEI_FIELD_SEIBETU;
- 		return errFlg;
- 	}
- 
  	public boolean validateImportNyuBi(JImportErrorResultFrameData data)
  	{
  		boolean errFlg = false;
--- 336,341 ----
***************
*** 721,730 ****
  
  		return errFlg;
  	}
  
  	// CSVファイルformatチェック
! 	// flg|true:結果 false:日医
! 	private boolean inputCsvFileCheck(String FilePath,boolean flg){
  		boolean retCheck = false;
  
  		// 1.txt形式かどうか
--- 582,591 ----
  
  		return errFlg;
  	}
+ 	/* --------------------------------------------------- */
  
  	// CSVファイルformatチェック
! 	private boolean inputCsvFileCheck(String FilePath){
  		boolean retCheck = false;
  
  		// 1.txt形式かどうか
***************
*** 737,1128 ****
  		Vector<String> insertRow = new Vector<String>();
  
  		// 検査結果データ取込処理
- 		if (flg){
- 			for (int i = 0; i < CSVItems.size(); i++) {
- 				insertRow =CSVItems.get(i);
- 				int csvCnt = insertRow.size() - 1;
- 
- 				// 2.属性情報 が13個以上あるか
- 				if (csvCnt <= 13)
- 					retCheck = true;
- 
- 				// 3.属性情報 - 検査項目情報が8で割り切れる
- 				csvCnt = csvCnt - JApplication.CSV_ZOKUSEI_COUNT;
- 				int csvKensa = csvCnt % 8;
- 				if (csvKensa != 0)
- 					retCheck = true;
- 			}
- 		}
- 		return retCheck;
- 	}
- 
- 	/*--------------------------------------nitii-----------------------------------------------
- 	/**
- 	 * 日医フォーマットデータの取り込み
- 	 * @param
- 	 */
- 	public void nitiImport(
- 			JImportErrorResultFrameData Data,
- 			ArrayList<Hashtable<String, String>> kojinData,
- 			ArrayList<Hashtable<String, String>> selectKojinData,
- 			Vector<JImportErrorResultFrameData> ErrorResultData)
- 	{
- 
- 		// 登録件数変数
- 		int intregistCnt = 0;
- 		boolean retblnALL = false;
- 		ResultMessage="";
- 
- 		// 検査結果データ取込処理
  		for (int i = 0; i < CSVItems.size(); i++) {
- 
- 			Vector<String> insertRow = new Vector<String>();
- 
  			insertRow =CSVItems.get(i);
  
! 			this.m_guiStatus.setText((i+1) + " / " + CSVItems.size() + "件");
! 
! 			Data.jusinSeiriNo = Reader.rmQuart(insertRow.get(JApplication.CSV_NITII_ZOKUSEI_JUSIN_SEIRI_NO));
! 			Data.jishiDate = Reader.rmQuart(insertRow.get(JApplication.CSV_NITII_ZOKUSEI_JISI_DATE));
! 			Data.kanaShimei = Reader.rmQuart(insertRow.get(JApplication.CSV_NITII_ZOKUSEI_SHIMEI));
! 			Data.seiNenGapi = Reader.rmQuart(insertRow.get(JApplication.CSV_NITII_ZOKUSEI_JISI_DATE));
! 			Data.seiBetu = Reader.rmQuart(insertRow.get(JApplication.CSV_NITII_ZOKUSEI_SEIBETU));
! 			Data.jisiKikanNo = Reader.rmQuart(insertRow.get(JApplication.CSV_NITII_ZOKUSEI_JISIKIKAN_NO));
! 
! 			// 初期化処理
! 			Data.uketukeNo =null;
! 			kojinData = null;
! 			preuketukeId = 0L;
! 			prekensaDate =0;
! 
! 			// 結果取込データ(キー情報)チェック処理
! 			if (checkKensaKekkaKeyNitiiFormatData(Data,ErrorResultData,i,false)){
! 				i++;continue;
! 			}
! 
! 			// 個人結果データ:(整理番号,健診日単位で取得)
! 			try {
! 				if (!Data.jusinSeiriNo.toString().equals(""))
! 					kojinData = getKojinData(Data);
! 
! 				} catch (Exception err) {
! 					ResultMessage += GetErrorMessage("[日医フォーマット]個人情報データを取得する時にエラーが発生しました。",Data.kanaShimei);
! 					logger.error("[日医フォーマット]個人情報データを取得する時にエラーが発生しました。");
! 					break;
! 				}
! 
! 			// 該当するデータがない場合、人(氏名,生年月日,性別)で検索
! 			if (kojinData == null ||
! 					kojinData.size() == 0){
! 				try{
! 
! 					selectKojinData = getSimeiData(Data);
! 
! 					if (selectKojinData == null ||
! 							selectKojinData.size() == 0){
! 						break;
! 					}
! 
! 					// 該当する人が複数いた場合、リストを表示する
! 					Hashtable<String, String>selectedKojinData
! 						= searchKojinData(selectKojinData,Data,false);
! 
! 					Data.uketukeNo =selectedKojinData.get(JApplication.COLUMN_NAME_UKETUKE_ID);
! 
! 					kojinData = getSelectKojinData(Data);
! 					if (kojinData == null ||
! 							kojinData.size() == 0){
! 						break;
! 					}
! 
! 				} catch (Exception err) {
! 					ResultMessage += GetErrorMessage("[日医フォーマット]個人情報データを取得する時にエラーが発生しました。",Data.kanaShimei);
! 					logger.error("[日医フォーマット]個人情報データを取得する時にエラーが発生しました。");
! 					break;
! 				}
! 			}
! 
! 			// add s.inoue 2010/02/10
! 			// 配列から構造体へ変換（ Arrays.asList）
! 			HashMap<String, String> csvKoumokuCD = this.registerKoumokuCd(validateDate);
! 
! 			// 結果取込CSVファイルとDBの値の比較を行う。
! 			// その他テーブルの項目コード単位で処理を行う。
! 			for (int j = 0; j < kojinData.size(); j++) {
! 
! 					Hashtable<String,String> DatabaseItem = kojinData.get(j);
! 
! 					// del s.inoue 2010/02/17
! 					// if (Data.uketukeNo == null){
! 					Data.uketukeNo =DatabaseItem.get(JApplication.COLUMN_NAME_UKETUKE_ID);
! 					//}
! 
! 					// 受付IDを比較する（一致：登録対象、不一致：エラー対象）
! 					String uketukeIdDB =DatabaseItem.get(JApplication.COLUMN_NAME_UKETUKE_ID);
! 					String kensaDateDB =DatabaseItem.get(JApplication.COLUMN_NAME_KENSA_NENGAPI);
! 					String koumokuCdDB =DatabaseItem.get(JApplication.COLUMN_NAME_KOUMOKUCD);
! 
! // del s.inoue 2010/02/17 1件のみの対象により削除
! 					// データベースに登録(T_KENSAKEKKA_TOKUTEI)
! 					// キー情報(:受付ID,検査実施日)が変わったら登録処理を行う
! //					if(!JEraseSpace.EraceSpace(Data.uketukeNo.toString()).equals(preuketukeId.toString()) &&
! //							!JEraseSpace.EraceSpace(Data.jishiDate.toString()).equals(prekensaDate.toString())){
! 						try{
! 
! 							// 結果取込データ(属性情報)チェック処理
! 							if (checkKensaKekkaData(Data,ErrorResultData,i)){
! 								j++;continue;
! 							}
! 
! 							// 既に健診結果データが存在した場合、警告メッセージを表示する。
! 							// 健診実施日,氏名カナ毎 結果登録するとデータが存在する為、更新処理のみ
! 							// edit s.inoue 2010/02/10
! 							String strCsvKoumokuOrder = (String) csvKoumokuCD.get(koumokuCdDB);
! 							if (strCsvKoumokuOrder == null){
! 								j++;continue;
! 							}
! 							System.out.println("csv:" + strCsvKoumokuOrder);
! 							// 項目コードはCSV順番を渡して取得
! 							// edit s.inoue 2010/02/17
! 							// Data.koumokuCd= Reader.rmQuart(insertRow.get(JApplication.CSV_KENSA_KOUMOKU_CD));
! 							Data.koumokuCd = koumokuCdDB;
! 							Data.kekkaTi = Reader.rmQuart(insertRow.get(Integer.parseInt(strCsvKoumokuOrder)));
! 
! 							// 項目コードチェック
! 							if (checkKoumokuCD(Data,ErrorResultData,i)){
! 								j++;continue;
! 							}
! 
! 							boolean existsKensaKekkaData = existsKensaKekkaData(Data);
! 
! 							if (existsKensaKekkaData) {
! 
! 								if (!retblnALL){
! 									// M3328=確認,[%s]には、すでに結果データが存在します。登録した場合、
! 									// 以前に入力した結果データは消えてしまいます。登録してよろしいですか？
! 									String[] messageParams = {"受付番号:"+ Data.uketukeNo + "/" + "健診実施日:" + Data.jishiDate + "/" + "氏名:"+ Data.kanaShimei};
! 									RETURN_VALUE retValue = JErrorMessage.show("M3328", this, messageParams);
! 									// cancel時
! 									if (retValue == RETURN_VALUE.CANCEL) {
! 										try {
! 										JApplication.kikanDatabase.rollback();
! 										}catch (SQLException err) {}
! 										return;
! 									}else if (retValue == RETURN_VALUE.NO){
! 										preuketukeId=Long.valueOf(uketukeIdDB);
! 										prekensaDate=Integer.valueOf(kensaDateDB);
! 										j++;continue;
! 									// add s.inoue 2010/02/17
! 									}else if (retValue == RETURN_VALUE.YES){
! 										updatekensakekaSonota(Data,insertRow);
! 									}else if (retValue == RETURN_VALUE.ALL){
! 										retblnALL = true;
! 									}
! 								}
! 							}else{
! 								updatekensakekaSonota(Data,insertRow);
! 							}
! 							intregistCnt++;
! 
! 							// add s.inoue 2010/03/16
! 							// BMI自動計算 roop最後に処理
! 							String height = "";
! 							String weight = "";
! 							if(Data.koumokuCd.equals("9N001000000000001")){
! 								height = Data.kekkaTi;
! 							}else if (Data.koumokuCd.equals("9N006000000000001")){
! 								weight = Data.kekkaTi;
! 							}
! 							if (j == kojinData.size()-1){
! 								String bmi = calcBMI(height, weight);
! 								if (bmi.equals(""))break;
! 
! 								String kensaKekka = JValidate.validateKensaKekkaDecimal(bmi,BMIFormat);
! 								Data.koumokuCd = "9N011000000000001"; //BMI
! 								Data.kekkaTi = kensaKekka;
! 								updatekensakekaSonota(Data,insertRow);
! 							}
! 
! 						}catch(Exception ex){
! 							try {
! 								JApplication.kikanDatabase.rollback();
! 							} catch (SQLException err) {}
! 							ResultMessage += GetErrorMessage("[検査結果取込処理]検査結果データ特定テーブルに登録時、エラーが発生しました。",Data.kanaShimei);
! 
! 							logger.error("[検査結果取込処理]検査結果データ特定テーブルに登録時、エラーが発生しました。");
! 							break;
! 						}
! 					}
! 
! // del s.inoue 2010/02/03
! //					// キー情報が一致したら検査結果登録してあり正常
! //					// 「その他:1〜22の項目(動的に変化する)」の登録
! //					Integer kensaKoumokuLoop = JApplication.CSV_KENSA_KOUMOKU_LOOP;
! //					int cntKoumoku =0;
! //
! //					while (cntKoumoku < JApplication.CSV_KENSA_LOOP * JApplication.CSV_KENSA_KOUMOKU_LOOP) {
! //
! //						if (insertRow.size() <= JApplication.CSV_KENSA_KOUMOKU_CD + cntKoumoku )
! //						{
! //							cntKoumoku += kensaKoumokuLoop;break;
! //						}
! //						Data.koumokuCd = Reader.rmQuart(insertRow.get(JApplication.CSV_KENSA_KOUMOKU_CD + cntKoumoku));
! //
! //						if (Data.koumokuCd.equals("")){
! //							checkKoumokuCD(Data,ErrorResultData,i);
! //							cntKoumoku += kensaKoumokuLoop;continue;
! //						}
! //
! //						try {
! //							Long resultCnt = kensakekaSonotaDao.selectByCountPrimaryKey(
! //									Long.valueOf(Data.uketukeNo),Integer.valueOf(Data.jishiDate),Data.koumokuCd);
! //							if (resultCnt < 0) {
! //								checkKoumokuCD(Data,ErrorResultData,i);
! //								cntKoumoku += kensaKoumokuLoop;
! //								continue;
! //							}
! //
! //						} catch (Exception e) {
! //							logger.error("[検査結果取込処理]検査結果データその他データ取得時、エラーとなりました。");
! //							break;
! //						}
! //
! //						if(JEraseSpace.EraceSpace(Data.uketukeNo.toString()).equals(JEraseSpace.EraceSpace(uketukeIdDB)) &&
! //							JEraseSpace.EraceSpace(Data.jishiDate.toString()).equals(JEraseSpace.EraceSpace(kensaDateDB)) &&
! //							 JEraseSpace.EraceSpace(Data.koumokuCd.toString()).equals(JEraseSpace.EraceSpace(koumokuCdDB)))
! //						{
! //							Data.jisiKbn =Reader.rmQuart(insertRow.get(JApplication.CSV_KENSA_JISI_KBN + cntKoumoku));
! //							Data.kekkaTi =Reader.rmQuart(insertRow.get(JApplication.CSV_KENSA_KEKATI + cntKoumoku));
! //
! //							// 結果取込データ(検査項目情報)
! //							if (checkKensaKekkaDataDetail(Data,ErrorResultData,i)){
! //								cntKoumoku += kensaKoumokuLoop;break;
! //							}
! //
! //							// 健診結果その他登録処理
! //							try{
! //								kensakekaSonotaregister(Data);
! //
! //							}catch(Exception ex){
! //								try {
! //									JApplication.kikanDatabase.rollback();
! //
! //								} catch (SQLException err) {
! //								}
! //								logger.error("[検査結果取込処理]検査項目情報登録時、エラーとなりました。");
! //								ResultMessage += GetErrorMessage("[検査結果取込処理]検査結果データ特定テーブルに登録時、エラーが発生しました。",Data.kanaShimei);
! //								break;
! //							}
! //						}
! //
! //						cntKoumoku += kensaKoumokuLoop;
! //					}
! // del s.inoue 2010/02/17
! //			}
! 		}
! 	}
! 
! 	// sonotaテーブル更新
! 	private void updatekensakekaSonota(JImportErrorResultFrameData Data,Vector<String> insertRow){
! 		// Data.jisiKbn =Reader.rmQuart(insertRow.get(JApplication.CSV_KENSA_JISI_KBN ));
! 		Data.jisiKbn ="1"; // フィールドなし固定
! 		// Data.kekkaTi =Reader.rmQuart(insertRow.get(JApplication.CSV_KENSA_KEKATI));
! 		try {
! 			kensakekaSonotaregister(Data);
! 		} catch (SQLException e) {
! 			logger.error(e.getMessage());
! 			e.printStackTrace();
! 		}
! 	}
! 
! 	// add s.inoue 2010/02/10
! 	// 項目コード登録
! 	private HashMap<String, String> registerKoumokuCd(JImportDataFrameData data){
! 
! 		HashMap<String, String> hm = new HashMap<String, String>();
! 		List arrKoumokuCD = new ArrayList<String>();
! 		List arrKoumokuOrder = new ArrayList<String>();
! 
! 		arrKoumokuCD = Arrays.asList(data.koumokuCD_Situmonhyo);
! 		arrKoumokuOrder = Arrays.asList(data.koumokuCD_Situmonhyo_Order);
! 
! 		for (int i = 0; i < arrKoumokuCD.size(); i++) {
! 			hm.put((String)arrKoumokuCD.get(i), (String)arrKoumokuOrder.get(i));
  		}
  
! 		return hm;
! 	}
! 
! 	// add s.inoue 2010/01/26
! 	/**
! 	 * 取り込み前処理
! 	 * @param FilePath 読み込むファイルのパス
! 	 */
! 	private void nitiImportCheck(String FilePath)
! 	{
! 		String logfile = PropertyUtil.getProperty("log.filename");
! 		PropertyConfigurator.configure(logfile);
! 
! 		ArrayList<Hashtable<String, String>> kojinData=null;
! 		ArrayList<Hashtable<String, String>> selectKojinData=null;
! 
! 		Vector<JImportErrorResultFrameData> ErrorResultData = new Vector<JImportErrorResultFrameData>();
! 
! 		JImportErrorResultFrameData Data = new JImportErrorResultFrameData();
! 
! 		// CSV読込処理
! 		Reader = new JCSVReaderStream();
! 
! 		try {
! 
! 			Reader.openCSV(FilePath,JApplication.CSV_CHARSET);
! 
! 			CSVItems = Reader.readAllTable();
! 
! 			if (inputCsvFileCheck(FilePath,false)){
! 				JErrorMessage.show("M3327",this);
! 				return;
! 			}
! 
! 		} catch (Exception e) {
! 			logger.error("[日医フォーマット取込処理]CSV読込処理に失敗しました。");
! 			JErrorMessage.show("M3329",this);
! 			return;
! 		}
! 
! 		// 機関(特定,その他)接続生成
! 		try {
! 			Connection connection = JApplication.kikanDatabase.getMConnection();
! 
! 			kensakekaTokuteiDao = (TKensakekaTokuteiDao) DaoFactory.createDao(
! 					connection,
! 					kensakekaTokutei);
! 
! 			kensakekaSonotaDao = (TKensakekaSonotaDao) DaoFactory.createDao(
! 					connection,
! 					kensakekaSonota);
! 
! 			JApplication.kikanDatabase.Transaction();
! 
! 		} catch (Exception e) {
! 			logger.error("[検査結果取込処理]機関FDBへの接続処理に失敗しました。");
! 			JErrorMessage.show("M3326",this);
! 			return;
! 		}
! 
! 		// 取込み
! 		nitiImport(Data,kojinData,selectKojinData,ErrorResultData);
! 
! 		// add s.inoue 2010/02/17
! 		try {
! 			JApplication.kikanDatabase.Commit();
! 		} catch (SQLException e) {
! 			logger.error(e.getMessage());
! 		}
  	}
- 	/*--------------------------------------nitii-----------------------------------------------*/
  
! 	/*-------------------------------------orgine-----------------------------------------------*/
  	/**
  	 * データの取り込み
  	 * @param FilePath 読み込むファイルのパス
--- 598,623 ----
  		Vector<String> insertRow = new Vector<String>();
  
  		// 検査結果データ取込処理
  		for (int i = 0; i < CSVItems.size(); i++) {
  			insertRow =CSVItems.get(i);
+ 			int csvCnt = insertRow.size() - 1;
  
! 			// 2.属性情報 が13個以上あるか
! 			if (csvCnt <= 13)
! 				retCheck = true;
! 
! 			// 3.属性情報 - 検査項目情報が8で割り切れる
! 			csvCnt = csvCnt - JApplication.CSV_ZOKUSEI_COUNT;
! 			int csvKensa = csvCnt % 8;
! 			if (csvKensa != 0)
! 				retCheck = true;
  		}
  
! 		return retCheck;
  	}
  
! 	/* Edit 2008/07/23 井上 */
! 	/* --------------------------------------------------- */
  	/**
  	 * データの取り込み
  	 * @param FilePath 読み込むファイルのパス
***************
*** 1154,1160 ****
  			CSVItems = Reader.readAllTable();
  
  			// add s.inoue 20081001
! 			if (inputCsvFileCheck(FilePath,true)){
  				JErrorMessage.show("M3327",this);
  				return;
  			}
--- 649,655 ----
  			CSVItems = Reader.readAllTable();
  
  			// add s.inoue 20081001
! 			if (inputCsvFileCheck(FilePath)){
  				JErrorMessage.show("M3327",this);
  				return;
  			}
***************
*** 1212,1218 ****
  			prekensaDate =0;
  
  			// 結果取込データ(キー情報)チェック処理
! 			if (checkKensaKekkaKeyData(Data,ErrorResultData,i,false)){
  				i++;continue;
  			}
  
--- 707,713 ----
  			prekensaDate =0;
  
  			// 結果取込データ(キー情報)チェック処理
! 			if (checkKensaKekkaKeyData(Data,ErrorResultData,i)){
  				i++;continue;
  			}
  
***************
*** 1240,1248 ****
  					}
  
  					// 該当する人が複数いた場合、リストを表示する
- 					// edit s.inoue 2010/02/03
  					Hashtable<String, String>selectedKojinData
! 						= searchKojinData(selectKojinData,Data,true);
  
  					// del s.inoue 20081003
  					//if (selectedKojinData == null) {
--- 735,742 ----
  					}
  
  					// 該当する人が複数いた場合、リストを表示する
  					Hashtable<String, String>selectedKojinData
! 						= searchKojinData(selectKojinData,Data);
  
  					// del s.inoue 20081003
  					//if (selectedKojinData == null) {
***************
*** 1268,1276 ****
  
  			// 結果取込CSVファイルとDBの値の比較を行う。
  			// その他テーブルの項目コード単位で処理を行う。
- 			// add s.inoue 2010/04/21
- 			String height = "";
- 			String weight = "";
  			for (int j = 0; j < kojinData.size(); j++) {
  
  					Hashtable<String,String> DatabaseItem = kojinData.get(j);
--- 762,767 ----
***************
*** 1395,1407 ****
  							try{
  								kensakekaSonotaregister(Data);
  
- 								// add s.inoue 2010/04/21
- 								// BMI自動計算 roop最後に処理
- 								if(Data.koumokuCd.equals("9N001000000000001")){
- 									height = Data.kekkaTi;
- 								}else if (Data.koumokuCd.equals("9N006000000000001")){
- 									weight = Data.kekkaTi;
- 								}
  							}catch(Exception ex){
  								try {
  									JApplication.kikanDatabase.rollback();
--- 886,891 ----
***************
*** 1418,1432 ****
  					}
  			}
  
- 			// add s.inoue 2010/04/21
- 			String bmi = calcBMI(height, weight);
- 			if (bmi.equals(""))break;
- 
- 			String kensaKekka = JValidate.validateKensaKekkaDecimal(bmi,BMIFormat);
- 			Data.koumokuCd = "9N011000000000001"; //BMI
- 			Data.kekkaTi = kensaKekka;
- 			updatekensakekaSonota(Data,insertRow);
- 
  		}
  
  		try {
--- 902,907 ----
***************
*** 1469,1484 ****
  		this.m_guiStatus.setText("");
  
  	}
! 	/*-------------------------------------orgine-----------------------------------------------*/
  
  	/**
  	 * 整理番号で検索できない場合の絞込み処理
- 	 * convertFlg:かな氏名を半角→全角 true,全角→半角 false
  	 */
  	private Hashtable<String,String> searchKojinData(
! 			ArrayList<Hashtable<String,String>> KojinDatabaseData,
! 			JImportErrorResultFrameData Data,
! 			boolean convertFlg){
  
  		// 該当する人を検索
  		Hashtable<String,String> TargetItem = null;
--- 944,958 ----
  		this.m_guiStatus.setText("");
  
  	}
! 	/* --------------------------------------------------- */
  
+ 	/* ADD 2008/07/23 井上 */
+ 	/* --------------------------------------------------- */
  	/**
  	 * 整理番号で検索できない場合の絞込み処理
  	 */
  	private Hashtable<String,String> searchKojinData(
! 			ArrayList<Hashtable<String,String>> KojinDatabaseData,JImportErrorResultFrameData Data){
  
  		// 該当する人を検索
  		Hashtable<String,String> TargetItem = null;
***************
*** 1489,1503 ****
  		{
  			Hashtable<String,String> DatabaseItem = KojinDatabaseData.get(j);
  
- 			// edit s.inoue 2010/02/03
  			//半角カタカナ、空白を除去した状態で比較
! 			String Name = "";
! 			if (convertFlg){
! 				Name = JZenkakuKatakanaToHankakuKatakana.Convert(DatabaseItem.get("KANANAME"));
! 			}else{
! 				Name = DatabaseItem.get("KANANAME");
! 			}
! 
  			if(JEraseSpace.EraceSpace(Name).equals(JEraseSpace.EraceSpace(Data.kanaShimei)))
  			{
  				JSelectKojinFrameData DataSame = new JSelectKojinFrameData();
--- 963,970 ----
  		{
  			Hashtable<String,String> DatabaseItem = KojinDatabaseData.get(j);
  
  			//半角カタカナ、空白を除去した状態で比較
! 			String Name = JZenkakuKatakanaToHankakuKatakana.Convert(DatabaseItem.get("KANANAME"));
  			if(JEraseSpace.EraceSpace(Name).equals(JEraseSpace.EraceSpace(Data.kanaShimei)))
  			{
  				JSelectKojinFrameData DataSame = new JSelectKojinFrameData();
***************
*** 1594,1601 ****
  	private boolean checkKensaKekkaKeyData(
  				JImportErrorResultFrameData Data,
  				Vector<JImportErrorResultFrameData> ErrorResultData,
! 				Integer i,
! 				boolean flg)
  	{
  		boolean checkKensaKekkaFlg=false;
  
--- 1061,1067 ----
  	private boolean checkKensaKekkaKeyData(
  				JImportErrorResultFrameData Data,
  				Vector<JImportErrorResultFrameData> ErrorResultData,
! 				Integer i)
  	{
  		boolean checkKensaKekkaFlg=false;
  
***************
*** 1638,1691 ****
  			setImportErrDigit(ErrorResultData,Data,i);
  			checkKensaKekkaFlg =true;
  		}
- 		// 健診実施年月日◎
- 		if (validateImportJisiDate(Data))
- 		{
- 			setImportErrDigit(ErrorResultData,Data,i);
- 			checkKensaKekkaFlg =true;
- 		}
- 
- 		return checkKensaKekkaFlg;
- 	}
- 
- 	/**
- 	 * 検査結果データチェック処理(検査項目情報◎必須、●日医フォーマット用必須)
- 	 */
- 	private boolean checkKensaKekkaKeyNitiiFormatData(
- 				JImportErrorResultFrameData Data,
- 				Vector<JImportErrorResultFrameData> ErrorResultData,
- 				Integer i,
- 				boolean flg)
- 	{
- 		boolean checkKensaKekkaFlg=false;
  
- 		if (!Data.jusinSeiriNo.toString().equals("")){
- 			// 受診券整理番号
- 			if (validateImportJusinSeiriNo(Data))
- 			{
- 				setImportErrDigit(ErrorResultData,Data,i);
- 				checkKensaKekkaFlg =true;
- 
- 			}
- 		}
- 		// カナ氏名●
- 		if (validateImportNitiiFormatkanaShimei(Data))
- 		{
- 			setImportErrDigit(ErrorResultData,Data,i);
- 			checkKensaKekkaFlg =true;
- 		}
- 		// 生年月日●
- 		if (validateImportNitiiFormatseiNenGapi(Data))
- 		{
- 			setImportErrDigit(ErrorResultData,Data,i);
- 			checkKensaKekkaFlg =true;
- 		}
- 		// 性別●
- 		if (validateImportNitiiFormatSex(Data))
- 		{
- 			setImportErrDigit(ErrorResultData,Data,i);
- 			checkKensaKekkaFlg =true;
- 		}
  		// 健診実施年月日◎
  		if (validateImportJisiDate(Data))
  		{
--- 1104,1110 ----
***************
*** 1696,1704 ****
  		return checkKensaKekkaFlg;
  
  	}
- 
  	/**
! 	 * 検査結果データチェック処理(属性情報)★format共通
  	 */
  	private boolean checkKensaKekkaData(
  				JImportErrorResultFrameData Data,
--- 1115,1122 ----
  		return checkKensaKekkaFlg;
  
  	}
  	/**
! 	 * 検査結果データチェック処理(属性情報)
  	 */
  	private boolean checkKensaKekkaData(
  				JImportErrorResultFrameData Data,
***************
*** 2011,2041 ****
  			}
  		return kenshinData;
  	}
- 
- 	// add s.inoue 2010/03/16
- 	/**
- 	 * BMI値を計算する
- 	 */
- 	public String calcBMI(String height, String weight) {
- 		// どちらかが空値の場合は空値を返す
- 		if (height.isEmpty() || weight.isEmpty()) {
- 			return "";
- 		}
- 
- 		// ０除算エラーを防ぐ
- 		if (Double.valueOf(height) == 0) {
- 			return "";
- 		}
- 
- 		BigDecimal bmi = new BigDecimal(
- 				String
- 						.valueOf((Double.valueOf(weight) / ((Double
- 								.valueOf(height) / 100) * (Double
- 								.valueOf(height) / 100)))));
- 		return String.valueOf(bmi.setScale(1, BigDecimal.ROUND_HALF_UP)
- 				.doubleValue());
- 	}
- 
  	/**
  	 * 検査結果その他取得(共通)
  	 */
--- 1429,1434 ----
***************
*** 2153,2167 ****
  			{
  				if( validateDate.isValidateAsDataSet )
  				{
! // edit s.inoue 2010/04/02
! //					if(jRadio_SelectDokuji.isSelected()){
! 						// 結果取り込み
! 						kekkaImport(validateDate.getFilePath());
! // edit s.inoue 2010/04/02
! //					}else{
! //						// 日医フォーマット
! //						nitiImportCheck(validateDate.getFilePath());
! //					}
  				}
  			}
  		}
--- 1546,1552 ----
  			{
  				if( validateDate.isValidateAsDataSet )
  				{
! 					kekkaImport(validateDate.getFilePath());
  				}
  			}
  		}
***************
*** 2204,2273 ****
  		}
  	}
  
! // dsel s.inoue 2010/01/25
! //	public void changedDokujiState(ItemEvent e)
! //	{
! //		if( ItemEvent.SELECTED == e.getStateChange() )
! //		{
! //			validateDate.setImportFormat(jRadioButton_Dokuji.getText());
! //		}
! //	}
! //
! //	public void changedKouseiState(ItemEvent e)
! //	{
! //		if( ItemEvent.SELECTED == e.getStateChange() )
! //		{
! //			validateDate.setImportFormat(jRadioButton_Kousei.getText());
! //		}
! //	}
  
  	public void actionPerformed(ActionEvent e)
  	{
  		if( e.getSource() == jButton_End )
  		{
- 			logger.info(jButton_End.getText());
  			pushedEndButton( e );
  		}
  
  		if( e.getSource() == jButton_Import )
  		{
- 			logger.info(jButton_Import.getText());
  			pushedImportButton( e );
  		}
  
  		if( e.getSource() == jButton_OpenFile )
  		{
- 			logger.info(jButton_OpenFile.getText());
  			pushedOpenFileButton( e );
  		}
  	}
  
! 	// add s.inoue 2009/12/03
! 	@Override
! 	public void keyPressed(KeyEvent keyEvent) {
! 		switch(keyEvent.getKeyCode()){
! 		case KeyEvent.VK_F1:
! 			logger.info(jButton_End.getText());
! 			pushedEndButton(null);break;
! 		case KeyEvent.VK_F12:
! 			logger.info(jButton_Import.getText());
! 			pushedImportButton(null);break;
  		}
- 	}
  
! // del s.inoue 2010/01/26
! //	public void itemStateChanged(ItemEvent e)
! //	{
! //		if( e.getSource() == jRadioButton_Dokuji)
! //		{
! //			changedDokujiState(e);
! //		}
! //
! //		if( e.getSource() == jRadioButton_Kousei)
! //		{
! //			changedKouseiState(e);
! //		}
! //	}
  }  //  @jve:decl-index=0:visual-constraint="11,15"
  
  
--- 1589,1640 ----
  		}
  	}
  
! 	public void changedDokujiState(ItemEvent e)
! 	{
! 		if( ItemEvent.SELECTED == e.getStateChange() )
! 		{
! 			validateDate.setImportFormat(jRadioButton_Dokuji.getText());
! 		}
! 	}
! 
! 	public void changedKouseiState(ItemEvent e)
! 	{
! 		if( ItemEvent.SELECTED == e.getStateChange() )
! 		{
! 			validateDate.setImportFormat(jRadioButton_Kousei.getText());
! 		}
! 	}
  
  	public void actionPerformed(ActionEvent e)
  	{
  		if( e.getSource() == jButton_End )
  		{
  			pushedEndButton( e );
  		}
  
  		if( e.getSource() == jButton_Import )
  		{
  			pushedImportButton( e );
  		}
  
  		if( e.getSource() == jButton_OpenFile )
  		{
  			pushedOpenFileButton( e );
  		}
  	}
  
! 	public void itemStateChanged(ItemEvent e)
! 	{
! 		if( e.getSource() == jRadioButton_Dokuji )
! 		{
! 			changedDokujiState(e);
  		}
  
! 		if( e.getSource() == jRadioButton_Kousei )
! 		{
! 			changedKouseiState(e);
! 		}
! 	}
  }  //  @jve:decl-index=0:visual-constraint="11,15"
  
  
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JImportDataFrameData.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JImportDataFrameData.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JImportDataFrameData.java	Wed Feb 17 20:00:48 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JImportDataFrameData.java	Fri Oct 30 13:39:22 2009
***************
*** 1,171 ****
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
  
- import java.util.ArrayList;
- 
  import jp.or.med.orca.jma_tokutei.common.validate.JValidate;
  
  public class JImportDataFrameData {
! 	String importFormat = new String("");	//1:厚労省準拠、2:独自
  	String kensaCenterNumber = new String("");
  	String kensaJissidate = new String("");
  	String filePath = new String("");
  	boolean isValidateAsDataSet = false;
- 
- 	// edit s.inoue 2010/02/10
- 	/* 質問票 */
- 	protected static final String CODE_FUKUYAKU_1 ="9N701000000000011";		// 服薬1(血圧)
- 	// protected static final String CODE_FUKUYAKU_1 ="9N701167000000049";	// 服薬1(血圧)(薬剤名)
- 	// protected static final String CODE_FUKUYAKU_1 ="9N701167100000049";	// 服薬1(血圧)(実施理由)
- 	protected static final String CODE_FUKUYAKU_2 ="9N706000000000011";		// 服薬2(血糖)
- 	// protected static final String CODE_FUKUYAKU_2 ="9N706167000000049";	// 服薬2(血糖)(薬剤名)
- 	// protected static final String CODE_FUKUYAKU_2 ="9N706167100000049";	// 服薬2(血糖)(実施理由)
- 	protected static final String CODE_FUKUYAKU_3 ="9N711000000000011";		// 服薬3(脂質)
- 	// protected static final String CODE_FUKUYAKU_3 ="9N711167000000049";	// 服薬3(脂質)(薬剤名)
- 	// protected static final String CODE_FUKUYAKU_3 ="9N711167100000049";	// 服薬3(脂質)(実施理由)
- 	protected static final String CODE_KIOUREKI_1 ="9N716000000000011";		// 既往歴1(脳血管)
- 	protected static final String CODE_KIOUREKI_2 ="9N721000000000011";		// 既往歴2(心血管)
- 	protected static final String CODE_KIOUREKI_3 ="9N726000000000011";		// 既往歴3(腎不全･人工透析)
- 	protected static final String CODE_HINKETU	 ="9N731000000000011";		// 貧血
- 	protected static final String CODE_KITUEN 	 ="9N736000000000011";		// 喫煙
- 	protected static final String CODE_INSHU	 ="9N786000000000011";		// 飲酒
- 	// protected static final String CODE_INSHU_RYO ="9N791000000000011";	// 飲酒量
- 	protected static final String CODE_HOKENSIDO ="9N806000000000011";		// 保健指導の希望
- 
- 	/* 身体計測 */
- 	protected static final String CODE_SINCHO ="9N001000000000001";			// 身長
- 	protected static final String CODE_TAIJYU ="9N006000000000001";			// 体重
- 	protected static final String CODE_BMI ="9N011000000000001";			// BMI※要計算
- 	// protected static final String CODE_NAIZO ="9N021000000000001";		// 内臓脂肪面積
- 	protected static final String CODE_FUKUI_JISOKU ="9N016160100000001";	// 腹囲(実測）
- 	protected static final String CODE_FUKUI_HANTEI ="9N016160200000001";	// 腹囲(自己判定）
- 	protected static final String CODE_HIGHT_SINKOKU ="9N016160300000001";	// 腹囲(自己申告）
- 	// protected static final String CODE_HIMANDO ="9N026000000000002";		// 肥満度
- 	// protected static final String CODE_GYOMUREKI ="9N051000000000049";	// 業務歴
- 
- 	/* 診察 */
- 	protected static final String CODE_KIOUREKI ="9N056000000000011";		// 既往歴
- 	protected static final String CODE_KIOUREKI_GUTAI ="9N056160400000049";	// 具体的な既往歴（３項目を結合）
- 	protected static final String CODE_JIKAKU ="9N061000000000011";			// 自覚症状
- 	protected static final String CODE_JIKAKU_SYOKEN ="9N061160800000049";	// 自覚症状所見（３項目を結合）
- 	protected static final String CODE_TAKAKU ="9N066000000000011";			// 他覚症状
- 	protected static final String CODE_TAKAKU_SYOKEN ="9N066160800000049";	// 他覚所見（３項目を結合）
- 
- 	// protected static final String CODE_HIGHT ="9N071000000000049";		// その他(家族歴等)
- 	// protected static final String CODE_HIGHT ="9N076000000000049";		// 視診(口腔内含む)
- 	// protected static final String CODE_HIGHT ="9N081000000000049";		// 打聴診
- 	// protected static final String CODE_HIGHT ="9N086000000000049";		// 触診(関節可動域含む)
- 	// protected static final String CODE_HIGHT ="9N091000000000001";		// 反復唾液嚥下テスト
- 
- 	/* 血圧 */
- 	protected static final String CODE_SYUSYUKU_SONOTA ="9A755000000000001";	// 収縮期血圧(その他)
- 	protected static final String CODE_SYUSYUKU_NIKAI ="9A752000000000001";		// 収縮期血圧(2回目)
- 	protected static final String CODE_SYUSYUKU_IKAI ="9A751000000000001";		// 収縮期血圧(1回目)
- 	protected static final String CODE_KAKUCYO_SONOTA ="9A765000000000001";		// 拡張期血圧(その他)
- 	protected static final String CODE_KAKUCYO_NIKAI ="9A762000000000001";		// 拡張期血圧(2回目)
- 	protected static final String CODE_KAKUCYO_IKAI ="9A761000000000001";		// 拡張期血圧(1回目)
- 
- 	/* 尿 */
- 	protected static final String CODE_NYOTOU ="1A020000000191111";		// 尿糖※一番先頭を使用
- 	// protected static final String CODE_HIGHT ="1A020000000190111";	// 尿糖
- 	protected static final String CODE_NYOTANPAKU ="1A010000000191111";	// 尿蛋白
- 	// protected static final String CODE_HIGHT ="1A010000000190111";	// 尿蛋白
- 
- 	/* 血糖 */
- 	protected static final String CODE_KUFUKUJIKETOU ="3D010000001926101";	// 空腹時血糖※一番先頭を使用
- 	// protected static final String CODE_HIGHT ="3D010000002227101";		// 空腹時血糖
- 	// protected static final String CODE_HIGHT ="3D010000001927201";		// 空腹時血糖
- 	// protected static final String CODE_HIGHT ="3D010000001999901";		// 空腹時血糖
- 	protected static final String CODE_SAIKETU ="9N141000000000011";		// 採血時間(食後)
- 	protected static final String CODE_HBA1C ="3D045000001906202";			// HbA1c※一番先頭を使用
- 	// protected static final String CODE_HIGHT ="3D045000001920402";	// HbA1c
- 	// protected static final String CODE_HIGHT ="3D045000001927102";	// HbA1c
- 	// protected static final String CODE_HIGHT ="3D045000001999902";	// HbA1c
- 
- 	/* 血中糖質 */
- 	protected static final String CODE_CYUSEISIBOU ="3F015000002327101";	// 中性脂肪（トリグリセリド）※一番先頭を使用
- 	// protected static final String CODE_HIGHT ="3F015000002327201";		// 中性脂肪（トリグリセリド）
- 	// protected static final String CODE_HIGHT ="3F015000002399901";		// 中性脂肪（トリグリセリド）
- 	protected static final String CODE_HDL ="3F070000002327101";			// HDLコレステロール※一番先頭を使用
- 	// protected static final String CODE_HIGHT ="3F070000002327201";		// HDLコレステロール
- 	// protected static final String CODE_HIGHT ="3F070000002399901";		// HDLコレステロール
- 	protected static final String CODE_LDL ="3F077000002327101";			// LDLコレステロール※一番先頭を使用
- 	// protected static final String CODE_HIGHT ="3F077000002327201";		// LDLコレステロール
- 	// protected static final String CODE_HIGHT ="3F077000002399901";		// LDLコレステロール
- 
- 	/* 肝機能 */
- 	protected static final String CODE_GOT ="3B035000002327201";		// GOT(AST)
- 	// protected static final String CODE_HIGHT ="3B035000002399901";	// GOT(AST)
- 	protected static final String CODE_GPT ="3B045000002327201";		// GPT(ALT)
- 	// protected static final String CODE_HIGHT ="3B045000002399901";	// GPT(ALT)
- 	protected static final String CODE_GANMA ="3B090000002327101";		// γ-GT(γ-GTP)
- 	// protected static final String CODE_HIGHT ="3B090000002399901";	// γ-GT(γ-GTP)
- 
- 	/* 医師判断 */
- 	protected static final String CODE_METABO ="9N501000000000011";			// メタボリックシンドローム判定
- 	// protected static final String CODE_HIGHT ="9N506000000000011";		// 保健指導レベル
- 	protected static final String CODE_ISINO_HANDAN ="9N511000000000049";	// 医師の診断(判定)
- 	protected static final String CODE_ISINO_SIMEI ="9N516000000000049";	// 健康診断を実施した医師の氏名
- 	// protected static final String CODE_HIGHT ="9N521000000000049";	// 医師の意見
- 	// protected static final String CODE_HIGHT ="9N526000000000049";	// 意見を述べた医師の氏名
- 	// protected static final String CODE_HIGHT ="9N531000000000049";	// 歯科医師による健康診断
- 	// protected static final String CODE_HIGHT ="9N536000000000049";	// 健康診断を実施した歯科医師の氏名
- 	// protected static final String CODE_HIGHT ="9N541000000000049";	// 歯科医師の意見
- 	// protected static final String CODE_HIGHT ="9N546000000000049";	// 意見を述べた歯科医師の氏名
- 	// protected static final String CODE_HIGHT ="9N551000000000049";	// 備考
- 
- 	/* 貧血 */
- 	protected static final String CODE_HINKETU_JISIRIYU ="2A020161001930149";	// 貧血検査実施理由
- 	protected static final String CODE_SEKESYU ="2A020000001930101";			// 赤血球数
- 	protected static final String CODE_HEMATORIC ="2A040000001930102";			// ヘマトクリット値
- 	protected static final String CODE_KESYOKUSORYOU ="2A030000001930101";		// 血色素量(ヘモグロビン値)
- 
- 	/* 心電図 */
- 	protected static final String CODE_SINDENZU_JISIRIYU ="9A110161000000049";	// 心電図実施理由
- 	protected static final String CODE_SINDENZU ="9A110160700000011";			// 心電図(所見の有無)
- 	protected static final String CODE_SINDENZU_SYOKEN ="9A110160800000049";	// 心電図所見
- 
- 	/* 眼底 */
- 	protected static final String CODE_GANTEI_KENSA ="9E100166000000011";	// 眼底検査(キースワグナー分類)
- 	protected static final String CODE_GANTEI_H ="9E100166100000011";		// 眼底検査(シェイエ分類:H)
- 	protected static final String CODE_GANTEI_S ="9E100166200000011";		// 眼底検査(シェイエ分類:S)
- 	protected static final String CODE_GANTEI_SCOTT ="9E100166300000011";	// 眼底検査(SCOTT分類)
- 	protected static final String CODE_GANTEI_SONOTA ="9E100160900000049";	// 眼底検査(その他の所見)
- 	protected static final String CODE_GANTEI_JISIRIYU ="9E100161000000049";// 眼底検査実施理由
- 	// ※Davos分類が無いため、「その他の所見に記載」
- 
- 	/* 非特定健診 */
- 	protected static final String CODE_NYOSENKETU ="1A100000000191111";	// 尿潜血
- 	// protected static final String CODE_HIGHT ="1A100000000190111";	// 尿潜血
- 	protected static final String CODE_KESEI_C ="3C015000002327101";	// 血清クレアチニン※小数点以下により判断する
- 	// protected static final String CODE_HIGHT ="3C015000002399901";	// 血清クレアチニン
- 	protected static final String CODE_KESEI_N ="3C020000002327101";	// 血清尿酸
- 	// protected static final String CODE_HIGHT ="3C020000002399901";	// 血清尿酸
- 	protected static final String CODE_KORESTEROL ="3F050000002327101";	// 総コレステロール
- 	// protected static final String CODE_HIGHT ="3F050000002327201";	// 総コレステロール
- 	// protected static final String CODE_HIGHT ="3F050000002399901";	// 総コレステロール
- 	protected static final String CODE_BIRIRUBIN ="3J010000002327101";	// 総ビリルビン
- 	// protected static final String CODE_HIGHT ="3J010000002399901";	// 総ビリルビン
- 	protected static final String CODE_ALP ="3B070000002327101";		// ALP
- 	// protected static final String CODE_HIGHT ="3B070000002399901";	// ALP
- 	protected static final String CODE_SOUTANPAKU ="3A010000002327101";	// 総蛋白
- 	// protected static final String CODE_HIGHT ="3A010000002399901";	// 総蛋白
- 	protected static final String CODE_FERITIRIN ="5C095000002302301";	// 血清フェリチン
- 	// protected static final String CODE_HIGHT ="5C095000002399901";	// 血清フェリチン
- 	protected static final String CODE_ARUBUMIN ="3A015000002327101";	// アルブミン
- 	// protected static final String CODE_HIGHT ="3A015000002399901";	// アルブミン
- 
- 	// add s.inoue 2010/02/10
- 	public static final String[] koumokuCD_Situmonhyo = {
- 		"9N701000000000011","9N706000000000011","9N711000000000011",
- 		"9N716000000000011","9N721000000000011","9N726000000000011",
- 		"9N731000000000011","9N736000000000011","9N786000000000011",
- 		"9N806000000000011"
- 	};
- 	// add s.inoue 2010/02/10
- 	public static final String[] koumokuCD_Situmonhyo_Order = {
- 		"7","8","9","10","11","12","13","14","15","16"
- 	};
- 
  	/**
  	 * @return the importFormat
  	 */
--- 1,13 ----
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
  
  import jp.or.med.orca.jma_tokutei.common.validate.JValidate;
  
  public class JImportDataFrameData {
! 	String importFormat = new String("");//1:厚労省準拠、2:独自
  	String kensaCenterNumber = new String("");
  	String kensaJissidate = new String("");
  	String filePath = new String("");
  	boolean isValidateAsDataSet = false;
  	/**
  	 * @return the importFormat
  	 */
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JInputKessaiDataFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JInputKessaiDataFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JInputKessaiDataFrame.java	Mon Apr 19 17:34:04 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JInputKessaiDataFrame.java	Wed Feb 24 17:45:24 2010
***************
*** 13,19 ****
  import java.awt.Rectangle;
  import javax.swing.BorderFactory;
  import java.awt.event.*;
- 
  import javax.swing.BoxLayout;
  
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedButton;
--- 13,18 ----
***************
*** 35,41 ****
  /**
   * 健診結果データ入力画面制御
   */
! public class JInputKessaiDataFrame extends JFrame implements ActionListener,ItemListener,KeyListener {
  
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
--- 34,40 ----
  /**
   * 健診結果データ入力画面制御
   */
! public class JInputKessaiDataFrame extends JFrame implements ActionListener,ItemListener {
  
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
***************
*** 287,293 ****
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
--- 286,292 ----
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
***************
*** 1139,1145 ****
  	private ExtendedButton getJButton_Register() {
  		if (jButton_Register == null) {
  			jButton_Register = new ExtendedButton();
! 			jButton_Register.setText("登録(F12)");
  			jButton_Register.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Register.addActionListener(this);
  		}
--- 1138,1144 ----
  	private ExtendedButton getJButton_Register() {
  		if (jButton_Register == null) {
  			jButton_Register = new ExtendedButton();
! 			jButton_Register.setText("登録");
  			jButton_Register.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Register.addActionListener(this);
  		}
***************
*** 1397,1403 ****
  	private ExtendedButton getJButton_ReCalc() {
  		if (jButton_ReCalc == null) {
  			jButton_ReCalc = new ExtendedButton();
! 			jButton_ReCalc.setText("再計算(F11)");
  			jButton_ReCalc.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_ReCalc.addActionListener(this);
  		}
--- 1396,1402 ----
  	private ExtendedButton getJButton_ReCalc() {
  		if (jButton_ReCalc == null) {
  			jButton_ReCalc = new ExtendedButton();
! 			jButton_ReCalc.setText("再計算");
  			jButton_ReCalc.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_ReCalc.addActionListener(this);
  		}
***************
*** 2265,2286 ****
  		}
  		return jTextField_hokenjyaJougenDoc;
  	}
- 
- 	@Override
- 	public void keyPressed(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyReleased(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyTyped(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
  }  //  @jve:decl-index=0:visual-constraint="16,75"
--- 2264,2267 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JInputKessaiDataFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JInputKessaiDataFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JInputKessaiDataFrameCtrl.java	Mon Apr 19 17:25:28 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JInputKessaiDataFrameCtrl.java	Wed Feb 24 17:45:24 2010
***************
*** 123,129 ****
  
  	// edit s.inoue 2010/02/16
  	boolean existsDoc = false;
- 
  	/**
  	 * コンストラクタ
  	 */
--- 123,128 ----
***************
*** 189,196 ****
  
  		/* フォーカス初期化 */
  		this.focusInitialize();
- 		// add s.inoue 2009/12/03
- 		functionListner();
  
  		/* 再計算 */
  		this.pushedReCalcButton();
--- 188,193 ----
***************
*** 354,367 ****
  		this.focusTraversalPolicy.addComponent(jButton_End);
  	}
  
- 	// add s.inoue 2009/12/03
- 	private void functionListner(){
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			Component comp = focusTraversalPolicy.getComponent(i);
- 			comp.addKeyListener(this);
- 		}
- 	}
- 
  	/**
  	 * 追加健診項目テーブルを初期化する。
  	 * @return
--- 351,356 ----
***************
*** 479,485 ****
  			}
  		// edit s.inoue 2010/02/10
  		}else if(tankaHantei.equals(TANKA_HANTEI_DOC)){
- 			// add ver2 s.inoue 2009/06/17
  			/* 単価（人間ドック） */
  			String tankaNingenDoc = resultItem.get("TANKA_NINGENDOC");
  			if (tankaNingenDoc != null && !tankaNingenDoc.isEmpty()) {
--- 468,473 ----
***************
*** 495,500 ****
--- 483,489 ----
  		if (tankaGoukei != null && !tankaGoukei.isEmpty()) {
  			jTextField_AllTanka.setText(tankaGoukei.replaceFirst("^0+", ""));
  		}
+ 
  		/*
  		 * 窓口負担種別
  		 */
***************
*** 504,510 ****
  				jComboBox_MadoguchiKihonSyubetu.addItem(JKojinRegisterFrameData.MADOGUCHI_HUTAN_SYUBETSU_ITEMS[i][1]);
  				jComboBox_MadoguchiSyousaiSyubetu.addItem(JKojinRegisterFrameData.MADOGUCHI_HUTAN_SYUBETSU_ITEMS[i][1]);
  				jComboBox_MadoguchiTsuikaSyubetu.addItem(JKojinRegisterFrameData.MADOGUCHI_HUTAN_SYUBETSU_ITEMS[i][1]);
! 				// edit s.inoue 2010/02/10
  			}else if (tankaHantei.equals(TANKA_HANTEI_DOC)){
  				jComboBox_MadoguchiDocSyubetu.addItem(JKojinRegisterFrameData.MADOGUCHI_HUTAN_SYUBETSU_ITEMS[i][1]);
  			}
--- 493,499 ----
  				jComboBox_MadoguchiKihonSyubetu.addItem(JKojinRegisterFrameData.MADOGUCHI_HUTAN_SYUBETSU_ITEMS[i][1]);
  				jComboBox_MadoguchiSyousaiSyubetu.addItem(JKojinRegisterFrameData.MADOGUCHI_HUTAN_SYUBETSU_ITEMS[i][1]);
  				jComboBox_MadoguchiTsuikaSyubetu.addItem(JKojinRegisterFrameData.MADOGUCHI_HUTAN_SYUBETSU_ITEMS[i][1]);
! 			// edit s.inoue 2010/02/10
  			}else if (tankaHantei.equals(TANKA_HANTEI_DOC)){
  				jComboBox_MadoguchiDocSyubetu.addItem(JKojinRegisterFrameData.MADOGUCHI_HUTAN_SYUBETSU_ITEMS[i][1]);
  			}
***************
*** 512,518 ****
  
  		// edit s.inoue 2010/02/10
  		if (tankaHantei.equals(TANKA_HANTEI_KIHON)){
- 
  			Integer madoguchiFutanKihonSyubetu =
  				Integer.valueOf(resultItem.get("MADO_FUTAN_K_SYUBETU"));
  			Integer madoguchiFutanSyousaiSyubetu =
--- 501,506 ----
***************
*** 538,545 ****
--- 526,535 ----
  		}else if (tankaHantei.equals(TANKA_HANTEI_DOC)){
  			Integer madoguchiFutanDocSyubetu =
  				Integer.valueOf(resultItem.get("MADO_FUTAN_D_SYUBETU"));
+ 
  			jComboBox_MadoguchiDocSyubetu.setSelectedIndex(
  					madoguchiFutanDocSyubetu);
+ 
  			validatedData.setMadoguchiDocSyubetu(
  					jComboBox_MadoguchiDocSyubetu.getSelectedIndex());
  		}
***************
*** 570,576 ****
  				jTextField_MadoguchiTsuikaKinInput.setText(madoHutanTsuikaInput
  						.replaceFirst("^0+", ""));
  			}
! 			// edit s.inoue 2010/02/10
  		}else if (tankaHantei.equals(TANKA_HANTEI_DOC)){
  			// add ver2 s.inoue 2009/06/18
  			/* 窓口負担（人間ドック） */
--- 560,566 ----
  				jTextField_MadoguchiTsuikaKinInput.setText(madoHutanTsuikaInput
  						.replaceFirst("^0+", ""));
  			}
! 		// edit s.inoue 2010/02/10
  		}else if (tankaHantei.equals(TANKA_HANTEI_DOC)){
  			// add ver2 s.inoue 2009/06/18
  			/* 窓口負担（人間ドック） */
***************
*** 1136,1171 ****
  				&& validatedData.setGanteiCode(jTextField_GanteiCode.getText());
  		}
  
- // edit s.inoue 2010/02/16
- //		if (validatedData.setJyusinken_ID(jTextField_Jyusinken_ID.getText())
- //				&& validatedData.setName(jTextField_Name.getText())
- //				&& validatedData.setBirthday(jTextField_Birthday.getText())
- //				&& validatedData.setSex(sexCode)
- //				&& validatedData.setKensaDate(jTextField_KensaDate.getText())
- //				// del s.inoue 2009/08/27
- //				// && validatedData.setToHL7Date(jTextField_ToHL7Date.getText())
- //				&& validatedData.setHinketsuCode(jTextField_HinketsuCode.getText())
- //				&& validatedData.setSindenzuCode(jTextField_SindenzuCode.getText())
- //				&& validatedData.setGanteiCode(jTextField_GanteiCode.getText())
- //				&& validatedData.setKihonTanka(jTextField_KihonTanka.getText())
- //				&& validatedData.setHinketuTanka(jTextField_HinketuTanka.getText())
- //				&& validatedData.setSindenzuTanka(jTextField_SindenzuTanka.getText())
- //				&& validatedData.setGanteiTanka(jTextField_GanteiTanka.getText())
- //				&& validatedData.setMadoguchiKihonKin(jTextField_MadoguchiKihonKinInput.getText())
- //				&& validatedData.setMadoguchiShousaiKin(jTextField_MadoguchiSyousaiKinInput.getText())
- //				&& validatedData.setMadoguchiTuikaKin(jTextField_MadoguchiTsuikaKinInput.getText())
- //				&& validatedData.setMadoguchiDocKin(jTextField_MadoguchiDocKinInput.getText())
- //				&& validatedData.setMadoguchiSonota(this.jTextField_MadoguchiSonota.getText())
- //				&& validatedData.setHokenjyaJougenKihon(this.jTextField_hokenjyaJougenKihon.getText())
- //				&& validatedData.setHokenjyaJougenSyousai(this.jTextField_hokenjyaJougenSyosai.getText())
- //				&& validatedData.setHokenjyaJougenTsuika(this.jTextField_hokenjyaJougenTsuika.getText())
- //				&& validatedData.setHokenjyaJougenDoc(this.jTextField_hokenjyaJougenDoc.getText())
- //				&& validatedData.setSeikyuKubun(this.jComboBox_SeikyuKubun.getSelectedItem().toString())
- //
- //				&& validatedData.setAllTanka(jTextField_AllTanka.getText())
- //				&& validatedData.setDocTanka(jTextField_DocTanka.getText())
- //				&& validatedData.setAllMadoguchi(jTextField_AllMadoguchi.getText())
- //				&& validatedData.setTotalFee(jTextField_TotalFee.getText())) {
  		if (tankaSelect && kihoninfo) {
  			String[] registKensa= isNotExistKensaKoumoku(
  					validatedData.getHokenjyaNum(),
--- 1126,1131 ----
***************
*** 1450,1456 ****
  				/* 追加健診の金額を合算する */
  				long tsuikaSum = 0;
  				boolean existsTsuika = false;
! 				// del s.inoue 2010/02/16
  				// boolean existsDoc = false;
  				int rowCount = table.getRowCount();
  
--- 1410,1416 ----
  				/* 追加健診の金額を合算する */
  				long tsuikaSum = 0;
  				boolean existsTsuika = false;
! 				// edit s.inoue 2010/02/16
  				// boolean existsDoc = false;
  				int rowCount = table.getRowCount();
  
***************
*** 1603,1608 ****
--- 1563,1569 ----
  	private boolean validateInputData() {
  		String sex = jTextField_Sex.getText();
  		String sexCode = "";
+ 
  		if (sex.equals("男性")) {
  			sexCode = "1";
  		} else if (sex.equals("女性")) {
***************
*** 1658,1702 ****
  
  			return kihoninfo && kihonTankaHantei;
  		}
! // edit s.inoue 2010/02/16
! //		return /* 個人情報 */
! //		validatedData.setJyusinken_ID(jTextField_Jyusinken_ID.getText())
! //				&& validatedData.setName(jTextField_Name.getText())
! //				&& validatedData.setBirthday(jTextField_Birthday.getText())
! //				&& validatedData.setSex(sexCode)
! //				&& validatedData.setKensaDate(jTextField_KensaDate.getText())
! //				// del s.inoue 2009/08/27
! //				// && validatedData.setToHL7Date(jTextField_ToHL7Date.getText())
! //				&& validatedData.setHihokenjyasyo_Kigou(jTextField_hihokenjasyotouKigou.getText())
! //				&& validatedData.setHihokenjyasyo_No(jTextField_hihokenjasyotouBangou.getText())
! //				&&
! //
! //				/* 決済情報 */
! //				validatedData.setHinketsuCode(jTextField_HinketsuCode.getText())
! //				&& validatedData.setSindenzuCode(jTextField_SindenzuCode.getText())
! //				&& validatedData.setGanteiCode(jTextField_GanteiCode.getText())
! //				&& validatedData.setKihonTanka(jTextField_KihonTanka.getText())
! //				&& validatedData.setHinketuTanka(jTextField_HinketuTanka.getText())
! //				&& validatedData.setSindenzuTanka(jTextField_SindenzuTanka.getText())
! //				&& validatedData.setGanteiTanka(jTextField_GanteiTanka.getText())
! //				&& validatedData.setDocTanka(jTextField_DocTanka.getText())
! //				&& validatedData.setMadoguchiKihonSyubetu(jComboBox_MadoguchiKihonSyubetu.getSelectedIndex())
! //				&& validatedData.setMadoguchiSyousaiSyubetu(jComboBox_MadoguchiSyousaiSyubetu.getSelectedIndex())
! //				&& validatedData.setMadoguchiTsuikaSyubetu(jComboBox_MadoguchiTsuikaSyubetu.getSelectedIndex())
! //				&& validatedData.setMadoguchiDocSyubetu(jComboBox_MadoguchiDocSyubetu.getSelectedIndex())
! //				&& validatedData.setSeikyuKubun(jComboBox_SeikyuKubun.getSelectedItem().toString())
! //				&& validatedData.setMadoguchiKihonKin(jTextField_MadoguchiKihonKinInput.getText())
! //				&& validatedData.setMadoguchiShousaiKin(jTextField_MadoguchiSyousaiKinInput.getText())
! //				&& validatedData.setMadoguchiTuikaKin(jTextField_MadoguchiTsuikaKinInput.getText())
! //				&& validatedData.setMadoguchiDocKin(jTextField_MadoguchiDocKinInput.getText())
! //				&& validatedData.setHokenjyaJougenKihon(this.jTextField_hokenjyaJougenKihon.getText())
! //				&& validatedData.setHokenjyaJougenSyousai(this.jTextField_hokenjyaJougenSyosai.getText())
! //				&& validatedData.setHokenjyaJougenTsuika(this.jTextField_hokenjyaJougenTsuika.getText())
! //				&& validatedData.setHokenjyaJougenDoc(this.jTextField_hokenjyaJougenDoc.getText())
! //				&& validatedData.setMadoguchiSonota(jTextField_MadoguchiSonota.getText())
! //				&& validatedData.setAllTanka(jTextField_AllTanka.getText())
! //				&& validatedData.setAllMadoguchi(jTextField_AllMadoguchi.getText())
! //				&& validatedData.setTotalFee(jTextField_TotalFee.getText());
  	}
  
  	/**
--- 1619,1625 ----
  
  			return kihoninfo && kihonTankaHantei;
  		}
! 
  	}
  
  	/**
***************
*** 1872,1892 ****
  		}
  	}
  
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 		switch(keyEvent.getKeyCode()){
- 		case KeyEvent.VK_F1:
- 			logger.info(jButton_End.getText());
- 			pushedEndButton(null);break;
- 		case KeyEvent.VK_F11:
- 			logger.info(jButton_ReCalc.getText());
- 			pushedReCalcButton();break;
- 		case KeyEvent.VK_F12:
- 			logger.info(jButton_Register.getText());
- 			pushedRegisterButton(null);break;
- 		}
- 	}
- 
  	public void itemStateChanged(ItemEvent e) {
  		/*
  		 * 委託料単価区分のラジオボタン
--- 1795,1800 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaListFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaListFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaListFrame.java	Mon Apr 19 19:42:44 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaListFrame.java	Fri Oct  9 10:07:46 2009
***************
*** 22,28 ****
  
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedButton;
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedCheckBox;
- import jp.or.med.orca.jma_tokutei.common.component.ExtendedComboBox;
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedLabel;
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedRadioButton;
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedTextField;
--- 22,27 ----
***************
*** 53,62 ****
  	protected JPanel jPanel_ExplArea1 = null;
  	protected JPanel jPanel_MainArea = null;
  	protected ExtendedTextField jTextField_Jyusinken_ID = null;
! // edit s.inoue 2010/02/23
! //	protected ExtendedTextField jTextField_HokenjyaNumber = null;
! 	protected ExtendedComboBox jComboBox_HokenjyaNumber = null;
! 
  	protected ExtendedTextField jTextField_KensaBeginDate = null;
  	protected ExtendedTextField jTextField_HanteiBeginDate = null;
  	protected ExtendedTextField jTextField_TsuuchiBeginDate = null;
--- 52,58 ----
  	protected JPanel jPanel_ExplArea1 = null;
  	protected JPanel jPanel_MainArea = null;
  	protected ExtendedTextField jTextField_Jyusinken_ID = null;
! 	protected ExtendedTextField jTextField_HokenjyaNumber = null;
  	protected ExtendedTextField jTextField_KensaBeginDate = null;
  	protected ExtendedTextField jTextField_HanteiBeginDate = null;
  	protected ExtendedTextField jTextField_TsuuchiBeginDate = null;
***************
*** 119,125 ****
  	protected ExtendedTextField jTextField_ageStart = null;
  	protected ExtendedLabel jLabel61 = null;
  	protected ExtendedTextField jTextField_ageEnd = null;
- 	protected ExtendedLabel jLabel_count = null;
  
  	/**
  	 * This is the default constructor
--- 115,120 ----
***************
*** 191,197 ****
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  //			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
--- 186,192 ----
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  //			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
***************
*** 206,215 ****
  		if (jPanel_NaviArea == null) {
  			CardLayout cardLayout2 = new CardLayout();
  			cardLayout2.setHgap(10);
! 			cardLayout2.setVgap(5);
  			jLabel_MainExpl = new ExtendedLabel();
  			jLabel_MainExpl.setText("検索条件を入力し、検索ボタンを押して受診者を検索します。");
! 			jLabel_MainExpl.setFont(new Font("Dialog", Font.PLAIN, 13));
  			jLabel_MainExpl.setName("jLabel1");
  			jLabel_Title = new TitleLabel("tokutei.kekkalist.frame.title");
  
--- 201,210 ----
  		if (jPanel_NaviArea == null) {
  			CardLayout cardLayout2 = new CardLayout();
  			cardLayout2.setHgap(10);
! 			cardLayout2.setVgap(10);
  			jLabel_MainExpl = new ExtendedLabel();
  			jLabel_MainExpl.setText("検索条件を入力し、検索ボタンを押して受診者を検索します。");
! 			jLabel_MainExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
  			jLabel_MainExpl.setName("jLabel1");
  			jLabel_Title = new TitleLabel("tokutei.kekkalist.frame.title");
  
***************
*** 250,256 ****
  		if (jPanel_ExplArea2 == null) {
  			jLabal_SubExpl = new ExtendedLabel();
  			jLabal_SubExpl.setText("受診者を選択し、画面下部のボタンを押して各処理を開始します。");
! 			jLabal_SubExpl.setFont(new Font("Dialog", Font.PLAIN, 13));
  			GridLayout gridLayout1 = new GridLayout();
  			gridLayout1.setRows(2);
  			jPanel_ExplArea2 = new JPanel();
--- 245,251 ----
  		if (jPanel_ExplArea2 == null) {
  			jLabal_SubExpl = new ExtendedLabel();
  			jLabal_SubExpl.setText("受診者を選択し、画面下部のボタンを押して各処理を開始します。");
! 			jLabal_SubExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
  			GridLayout gridLayout1 = new GridLayout();
  			gridLayout1.setRows(2);
  			jPanel_ExplArea2 = new JPanel();
***************
*** 270,276 ****
  	private JPanel getJPanel_ExplArea1() {
  		if (jPanel_ExplArea1 == null) {
  			CardLayout cardLayout1 = new CardLayout();
! 			cardLayout1.setHgap(10);
  			jPanel_ExplArea1 = new JPanel();
  			jPanel_ExplArea1.setLayout(cardLayout1);
  			jPanel_ExplArea1.add(getJPanel_ExplArea2(), getJPanel_ExplArea2().getName());
--- 265,271 ----
  	private JPanel getJPanel_ExplArea1() {
  		if (jPanel_ExplArea1 == null) {
  			CardLayout cardLayout1 = new CardLayout();
! 			cardLayout1.setHgap(20);
  			jPanel_ExplArea1 = new JPanel();
  			jPanel_ExplArea1.setLayout(cardLayout1);
  			jPanel_ExplArea1.add(getJPanel_ExplArea2(), getJPanel_ExplArea2().getName());
***************
*** 288,294 ****
  			if (jPanel_MainArea == null) {
  				jPanel_MainArea = new JPanel();
  				jPanel_MainArea.setLayout(new BorderLayout());
! 				jPanel_MainArea.setBorder(BorderFactory.createEmptyBorder(0, 10, 0, 10));
  				jPanel_MainArea.add(getJPanel(), BorderLayout.NORTH);
  				jPanel_MainArea.add(getJPanel_TableArea(), BorderLayout.CENTER);
  			}
--- 283,289 ----
  			if (jPanel_MainArea == null) {
  				jPanel_MainArea = new JPanel();
  				jPanel_MainArea.setLayout(new BorderLayout());
! 				jPanel_MainArea.setBorder(BorderFactory.createEmptyBorder(0, 10, 10, 10));
  				jPanel_MainArea.add(getJPanel(), BorderLayout.NORTH);
  				jPanel_MainArea.add(getJPanel_TableArea(), BorderLayout.CENTER);
  			}
***************
*** 310,342 ****
  		return jTextField_Jyusinken_ID;
  	}
  
! // edit s.inoue 2010/02/23
! //	/**
! //	 * This method initializes jTextField_HokenjyaNumber
! //	 *
! //	 * @return javax.swing.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_HokenjyaNumber() {
! //		if (jTextField_HokenjyaNumber == null) {
! //			jTextField_HokenjyaNumber = new ExtendedTextField("", 8, ImeMode.IME_OFF);
! //			jTextField_HokenjyaNumber.setPreferredSize(new Dimension(130, 20));
! //			jTextField_HokenjyaNumber.addActionListener(this);
! //		}
! //		return jTextField_HokenjyaNumber;
! //	}
!   	 /**
!      * This method initializes jComboBox_HokenjyaNumber
!      *
!      * @return javax.swing.ExtendedComboBox
!      */
! 	private ExtendedComboBox getJComboBox_HokenjyaNumber() {
! 		if (jComboBox_HokenjyaNumber == null) {
! 		    jComboBox_HokenjyaNumber = new ExtendedComboBox();
! 			jComboBox_HokenjyaNumber.setMinimumSize(new Dimension(200, 20));
! 			jComboBox_HokenjyaNumber.setPreferredSize(new Dimension(240, 20));
! 		    jComboBox_HokenjyaNumber.addItemListener(this);
  		}
! 		return jComboBox_HokenjyaNumber;
  	}
  
  	/**
--- 305,322 ----
  		return jTextField_Jyusinken_ID;
  	}
  
! 	/**
! 	 * This method initializes jTextField_HokenjyaNumber
! 	 *
! 	 * @return javax.swing.ExtendedTextField
! 	 */
! 	private ExtendedTextField getJTextField_HokenjyaNumber() {
! 		if (jTextField_HokenjyaNumber == null) {
! 			jTextField_HokenjyaNumber = new ExtendedTextField("", 8, ImeMode.IME_OFF);
! 			jTextField_HokenjyaNumber.setPreferredSize(new Dimension(130, 20));
! 			jTextField_HokenjyaNumber.addActionListener(this);
  		}
! 		return jTextField_HokenjyaNumber;
  	}
  
  	/**
***************
*** 476,486 ****
  	private ExtendedButton getJButton_Serach() {
  		if (jButton_Search == null) {
  			jButton_Search = new ExtendedButton();
! 			jButton_Search.setText("検索(S)");
  //			jButton_Search.setPreferredSize(new Dimension(58, 20));
  //			jButton_Search.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Search.addActionListener(this);
- 			jButton_Search.setMnemonic(KeyEvent.VK_S);
  		}
  		return jButton_Search;
  	}
--- 456,465 ----
  	private ExtendedButton getJButton_Serach() {
  		if (jButton_Search == null) {
  			jButton_Search = new ExtendedButton();
! 			jButton_Search.setText("検索");
  //			jButton_Search.setPreferredSize(new Dimension(58, 20));
  //			jButton_Search.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Search.addActionListener(this);
  		}
  		return jButton_Search;
  	}
***************
*** 493,503 ****
  	private ExtendedButton getJButton_AllSelect() {
  		if (jButton_AllSelect == null) {
  		    jButton_AllSelect = new ExtendedButton();
! 		    jButton_AllSelect.setText("全て選択(A)");
  		    jButton_AllSelect.setMinimumSize(new Dimension(82, 20));
  		    jButton_AllSelect.setFont(new Font("Dialog", Font.PLAIN, 12));
  		    jButton_AllSelect.addActionListener(this);
- 		    jButton_AllSelect.setMnemonic(KeyEvent.VK_A);
  		}
  		return jButton_AllSelect;
  	}
--- 472,481 ----
  	private ExtendedButton getJButton_AllSelect() {
  		if (jButton_AllSelect == null) {
  		    jButton_AllSelect = new ExtendedButton();
! 		    jButton_AllSelect.setText("全て選択");
  		    jButton_AllSelect.setMinimumSize(new Dimension(82, 20));
  		    jButton_AllSelect.setFont(new Font("Dialog", Font.PLAIN, 12));
  		    jButton_AllSelect.addActionListener(this);
  		}
  		return jButton_AllSelect;
  	}
***************
*** 511,518 ****
  		if (jButton_OK == null) {
  			jButton_OK = new ExtendedButton();
  //			jButton_OK.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_OK.setText("結果入力(F12)");
! //			jButton_OK.setPreferredSize(new Dimension(100, 25));
  			jButton_OK.addActionListener(this);
  		}
  		return jButton_OK;
--- 489,496 ----
  		if (jButton_OK == null) {
  			jButton_OK = new ExtendedButton();
  //			jButton_OK.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_OK.setText("結果データ入力");
! 			jButton_OK.setPreferredSize(new Dimension(100, 25));
  			jButton_OK.addActionListener(this);
  		}
  		return jButton_OK;
***************
*** 526,532 ****
  	private ExtendedButton getJButton_Sheet() {
  		if (jButton_Print == null) {
  			jButton_Print = new ExtendedButton();
! 			jButton_Print.setText("入力票印刷(F5)");
  //			jButton_Print.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Print.addActionListener(this);
  		}
--- 504,510 ----
  	private ExtendedButton getJButton_Sheet() {
  		if (jButton_Print == null) {
  			jButton_Print = new ExtendedButton();
! 			jButton_Print.setText("入力票印刷");
  //			jButton_Print.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Print.addActionListener(this);
  		}
***************
*** 543,549 ****
  			jButton_Kojin = new ExtendedButton();
  //			jButton_Kojin.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Kojin.setActionCommand("受診券呼出");
! 			jButton_Kojin.setText("受診券呼出(F7)");
  			jButton_Kojin.addActionListener(this);
  		}
  		return jButton_Kojin;
--- 521,527 ----
  			jButton_Kojin = new ExtendedButton();
  //			jButton_Kojin.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Kojin.setActionCommand("受診券呼出");
! 			jButton_Kojin.setText("受診券呼出");
  			jButton_Kojin.addActionListener(this);
  		}
  		return jButton_Kojin;
***************
*** 558,564 ****
  		if (jButton_Irai == null) {
  			jButton_Irai = new ExtendedButton();
  			jButton_Irai.setActionCommand("依頼書印刷");
! 			jButton_Irai.setText("依頼書印刷(F9)");
  			jButton_Irai.addActionListener(this);
  		}
  		return jButton_Irai;
--- 536,542 ----
  		if (jButton_Irai == null) {
  			jButton_Irai = new ExtendedButton();
  			jButton_Irai.setActionCommand("依頼書印刷");
! 			jButton_Irai.setText("依頼書印刷");
  			jButton_Irai.addActionListener(this);
  		}
  		return jButton_Irai;
***************
*** 578,585 ****
  		if (jCheckBox_InputDone == null) {
  			jCheckBox_InputDone = new ExtendedCheckBox();
  			jCheckBox_InputDone.setText("結果入力済");
- 		    // add h.yoshitama 2009/11/11
- 		    jCheckBox_InputDone.addItemListener(this);
  		}
  		return jCheckBox_InputDone;
  	}
--- 556,561 ----
***************
*** 648,654 ****
  			gridBagConstraints311.gridy = 1;
  			jLabel3111 = new ExtendedLabel();
  			jLabel3111.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jLabel3111.setText("生年月日");
  			GridBagConstraints gridBagConstraints211 = new GridBagConstraints();
  			gridBagConstraints211.gridy = 1;
  			gridBagConstraints211.gridx = 3;
--- 624,630 ----
  			gridBagConstraints311.gridy = 1;
  			jLabel3111 = new ExtendedLabel();
  			jLabel3111.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jLabel3111.setText("\u751f\u5e74\u6708\u65e5");
  			GridBagConstraints gridBagConstraints211 = new GridBagConstraints();
  			gridBagConstraints211.gridy = 1;
  			gridBagConstraints211.gridx = 3;
***************
*** 692,698 ****
  			GridBagConstraints gridBagConstraints29 = new GridBagConstraints();
  			gridBagConstraints29.gridx = 0;
  			gridBagConstraints29.gridheight = 3;
! 			gridBagConstraints29.gridwidth = 6;
  			gridBagConstraints29.anchor = GridBagConstraints.NORTHWEST;
  //			gridBagConstraints29.insets = new Insets(10, 0, 0, 0);
  			gridBagConstraints29.gridy = 2;
--- 668,674 ----
  			GridBagConstraints gridBagConstraints29 = new GridBagConstraints();
  			gridBagConstraints29.gridx = 0;
  			gridBagConstraints29.gridheight = 3;
! 			gridBagConstraints29.gridwidth = 5;
  			gridBagConstraints29.anchor = GridBagConstraints.NORTHWEST;
  //			gridBagConstraints29.insets = new Insets(10, 0, 0, 0);
  			gridBagConstraints29.gridy = 2;
***************
*** 741,747 ****
  			jLabel5.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jLabel4 = new ExtendedLabel();
  			jLabel4.setText("氏名（カナ）");
! 			jLabel4.setPreferredSize(new Dimension(100, 20));
  			jLabel4.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jLabel3 = new ExtendedLabel();
  			jLabel3.setText("保険者番号");
--- 717,723 ----
  			jLabel5.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jLabel4 = new ExtendedLabel();
  			jLabel4.setText("氏名（カナ）");
! 			jLabel4.setPreferredSize(new Dimension(100, 16));
  			jLabel4.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jLabel3 = new ExtendedLabel();
  			jLabel3.setText("保険者番号");
***************
*** 756,767 ****
  			jLabel1.setVisible(false);
  			jLabel = new ExtendedLabel();
  			jLabel.setText("受診券整理番号");
! 			jLabel.setPreferredSize(new Dimension(100, 20));
  			jLabel.setFont(new Font("Dialog", Font.PLAIN, 12));
- 			// edit s.inoue 2010/02/24
- 			jLabel_count = new ExtendedLabel();
- 			jLabel_count.setPreferredSize(new Dimension(100, 20));
- 			jLabel_count.setFont(new Font("Dialog", Font.PLAIN, 12));
  
  			GridBagConstraints gridBagConstraints210 = new GridBagConstraints();
  			gridBagConstraints210.gridx = 2;
--- 732,739 ----
  			jLabel1.setVisible(false);
  			jLabel = new ExtendedLabel();
  			jLabel.setText("受診券整理番号");
! 			jLabel.setPreferredSize(new Dimension(100, 16));
  			jLabel.setFont(new Font("Dialog", Font.PLAIN, 12));
  
  			GridBagConstraints gridBagConstraints210 = new GridBagConstraints();
  			gridBagConstraints210.gridx = 2;
***************
*** 771,787 ****
  			GridBagConstraints gridBagConstraints = new GridBagConstraints();
  			gridBagConstraints.gridx = 6;
  			gridBagConstraints.anchor = GridBagConstraints.SOUTHEAST;
! //		    gridBagConstraints.insets = new Insets(0, 0, 0, 0);
! //			gridBagConstraints.anchor = GridBagConstraints.EAST;
  			gridBagConstraints.gridy = 4;
  
- 			// edit s.inoue 2010/02/24
- 			GridBagConstraints gridBagConstraints50 = new GridBagConstraints();
- 			gridBagConstraints50.gridx = 6;
- 			gridBagConstraints50.gridy = 4;
- 			gridBagConstraints50.anchor = GridBagConstraints.SOUTHEAST;
- 			gridBagConstraints50.insets = new Insets(0, 0, 30, 0);
- 
  			GridBagConstraints gridBagConstraints6 = new GridBagConstraints();
  			gridBagConstraints6.gridy = 0;
  			gridBagConstraints6.gridx = 1;
--- 743,752 ----
  			GridBagConstraints gridBagConstraints = new GridBagConstraints();
  			gridBagConstraints.gridx = 6;
  			gridBagConstraints.anchor = GridBagConstraints.SOUTHEAST;
! 		    gridBagConstraints.insets = new Insets(30, 0, 0, 0);
! 			gridBagConstraints.anchor = GridBagConstraints.EAST;
  			gridBagConstraints.gridy = 4;
  
  			GridBagConstraints gridBagConstraints6 = new GridBagConstraints();
  			gridBagConstraints6.gridy = 0;
  			gridBagConstraints6.gridx = 1;
***************
*** 821,841 ****
  			gridBagConstraints16.gridx = 2;
  			gridBagConstraints16.anchor = GridBagConstraints.WEST;
  			gridBagConstraints16.insets = new Insets(0, 20, 0, 0);
- 
- 			// add s.inoue 2010/03/24
- 			GridBagConstraints gridBagConstraints35 = new GridBagConstraints();
- 			gridBagConstraints35.gridy = 4;
- 			gridBagConstraints35.gridx = 5;
- 			gridBagConstraints35.anchor = GridBagConstraints.WEST;
- 			gridBagConstraints35.insets = new Insets(20, 100, 0, 0);
- 
- 			// add s.inoue 2010/03/24
- 			GridBagConstraints gridBagConstraints36 = new GridBagConstraints();
- 			gridBagConstraints36.gridy = 4;
- 			gridBagConstraints36.gridx = 5;
- 			gridBagConstraints36.anchor = GridBagConstraints.WEST;
- 			gridBagConstraints36.insets = new Insets(20, 7, 0, 0);
- 
  			jPanel = new JPanel();
  			jPanel.setLayout(new GridBagLayout());
  			jPanel.setBorder(BorderFactory.createCompoundBorder(BorderFactory.createLineBorder(Color.gray, 1), BorderFactory.createEmptyBorder(5, 5, 5, 5)));
--- 786,791 ----
***************
*** 845,870 ****
  			jPanel.add(getJTextField_HokensyoCode(), gridBagConstraints5);
  			jPanel.add(jLabel2, gridBagConstraints18);
  			jPanel.add(getJTextField_HokensyoNumber(), gridBagConstraints9);
- 			// del s.inoue 2010/03/23
  			jPanel.add(jLabel3, gridBagConstraints19);
! 			// edit s.inoue 2010/02/23
! 			// jPanel.add(getJTextField_HokenjyaNumber(), gridBagConstraints2);
! 			// del s.inoue 2010/03/23
! 			jPanel.add(getJComboBox_HokenjyaNumber(), gridBagConstraints2);
! 
  			jPanel.add(jLabel4, gridBagConstraints20);
  			jPanel.add(getJTextField_Name(), gridBagConstraints6);
- 
- 			// edit s.inoue 2010/02/24
- 			jPanel.add(jLabel_count,gridBagConstraints50);
- 
  			jPanel.add(getJButton_Serach(), gridBagConstraints);
  
  			jPanel.add(getJPanel3(), gridBagConstraints31);
  			jPanel.add(getJPanel4(), gridBagConstraints29);
  			jPanel.add(getJPanel6(), gridBagConstraints33);
! 			// del s.inoue 2010/03/24
! //			jPanel.add(getJPanel7(), gridBagConstraints34);
  
  			jPanel.add(getJPanel_RadioPanel(), gridBagConstraints110);
  			jPanel.add(jLabel31, gridBagConstraints310);
--- 795,810 ----
  			jPanel.add(getJTextField_HokensyoCode(), gridBagConstraints5);
  			jPanel.add(jLabel2, gridBagConstraints18);
  			jPanel.add(getJTextField_HokensyoNumber(), gridBagConstraints9);
  			jPanel.add(jLabel3, gridBagConstraints19);
! 			jPanel.add(getJTextField_HokenjyaNumber(), gridBagConstraints2);
  			jPanel.add(jLabel4, gridBagConstraints20);
  			jPanel.add(getJTextField_Name(), gridBagConstraints6);
  			jPanel.add(getJButton_Serach(), gridBagConstraints);
  
  			jPanel.add(getJPanel3(), gridBagConstraints31);
  			jPanel.add(getJPanel4(), gridBagConstraints29);
  			jPanel.add(getJPanel6(), gridBagConstraints33);
! 			jPanel.add(getJPanel7(), gridBagConstraints34);
  
  			jPanel.add(getJPanel_RadioPanel(), gridBagConstraints110);
  			jPanel.add(jLabel31, gridBagConstraints310);
***************
*** 873,882 ****
  			jPanel.add(getJTextField_birthday(), gridBagConstraints211);
  			jPanel.add(jLabel3111, gridBagConstraints311);
  			jPanel.add(getJPanel23(), gridBagConstraints46);
- 
- 			// add s.inoue 2010/03/24
- 			jPanel.add(getJCheckBox_JisiYear(), gridBagConstraints35);
- 			jPanel.add(getJCheckBox_InputDone(), gridBagConstraints36);
  		}
  		return jPanel;
  	}
--- 813,818 ----
***************
*** 891,897 ****
  			jPanel_TableArea = new JPanel();
  			jPanel_TableArea.setLayout(new BorderLayout());
  			jPanel_TableArea.setName("jPanel_TableArea");
- 			jPanel_TableArea.setBorder(BorderFactory.createEmptyBorder(5, 0, 0, 0));
  		}
  		return jPanel_TableArea;
  	}
--- 827,832 ----
***************
*** 983,1001 ****
  			GridBagConstraints gridBagConstraints7 = new GridBagConstraints();
  			gridBagConstraints7.gridy = 0;
  			gridBagConstraints7.gridx = 3;
- // del s.inoue 2010/03/24
- //			// add s.inoue 2010/03/24
- //			GridBagConstraints gridBagConstraints33 = new GridBagConstraints();
- //			gridBagConstraints33.gridy = 2;
- //			gridBagConstraints33.gridx = 4;
- //			gridBagConstraints33.insets = new Insets(0, 370, 0, 0);
- //
- //			// add s.inoue 2010/03/24
- //			GridBagConstraints gridBagConstraints34 = new GridBagConstraints();
- //			gridBagConstraints34.gridy = 2;
- //			gridBagConstraints34.gridx = 4;
- //			gridBagConstraints34.insets = new Insets(0, 220, 0, 0);
- 
  			jPanel4 = new JPanel();
  			jPanel4.setLayout(new GridBagLayout());
  			jPanel4.add(getJTextField_KensaEndDate(), gridBagConstraints7);
--- 918,923 ----
***************
*** 1011,1020 ****
  			jPanel4.add(jLabel9, gridBagConstraints26);
  			jPanel4.add(jLabel7, gridBagConstraints24);
  			jPanel4.add(getJPanel5(), gridBagConstraints32);
- 
- 			// del s.inoue 2010/03/24
- //			jPanel4.add(getJCheckBox_JisiYear(), gridBagConstraints33);
- //			jPanel4.add(getJCheckBox_InputDone(), gridBagConstraints34);
  		}
  		return jPanel4;
  	}
--- 933,938 ----
***************
*** 1061,1096 ****
  		return jPanel6;
  	}
  
! // del s.inoue 2010/03/24
! //	/**
! //	 * This method initializes jPanel7
! //	 *
! //	 * @return javax.swing.JPanel
! //	 */
! //	private JPanel getJPanel7() {
! //		if (jPanel7 == null) {
! //			GridBagConstraints gridBagConstraints27 = new GridBagConstraints();
! //			gridBagConstraints27.anchor = GridBagConstraints.EAST;
! //			gridBagConstraints27.gridx = 1;
! //			gridBagConstraints27.gridy = 0;
! //			gridBagConstraints27.weightx = 1.0D;
! //			gridBagConstraints27.insets = new Insets(0, 85, 0, 0);
! //
! //			GridBagConstraints gridBagConstraints28 = new GridBagConstraints();
! //			gridBagConstraints28.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints28.gridx = 0;
! //			gridBagConstraints28.gridy = 0;
! //			gridBagConstraints28.insets = new Insets(0, 85, 0, 0);
! //
! //			jPanel7 = new JPanel();
! //			jPanel7.setLayout(new GridBagLayout());
! //			jPanel7.add(getJCheckBox_JisiYear(), gridBagConstraints27);
! //			jPanel7.add(getJCheckBox_InputDone(), gridBagConstraints28);
! //
! //			//jPanel7.add(k, gridBagConstraints28);
! //		}
! //		return jPanel7;
! //	}
  
  	/**
  	 * This method initializes jPanel1
--- 979,1014 ----
  		return jPanel6;
  	}
  
! 	/**
! 	 * This method initializes jPanel7
! 	 *
! 	 * @return javax.swing.JPanel
! 	 */
! 	private JPanel getJPanel7() {
! 		if (jPanel7 == null) {
! 			GridBagConstraints gridBagConstraints27 = new GridBagConstraints();
! 			gridBagConstraints27.anchor = GridBagConstraints.EAST;
! 			gridBagConstraints27.gridx = 0;
! 			gridBagConstraints27.gridy = 1;
! 			gridBagConstraints27.weightx = 1.0D;
! 			gridBagConstraints27.insets = new Insets(0, 85, 0, 0);
! 			gridBagConstraints27.fill = GridBagConstraints.BOTH;
! 
! 			GridBagConstraints gridBagConstraints28 = new GridBagConstraints();
! 			gridBagConstraints28.anchor = GridBagConstraints.WEST;
! 			gridBagConstraints28.gridx = 0;
! 			gridBagConstraints28.gridy = 0;
! 			gridBagConstraints28.insets = new Insets(0, 85, 0, 0);
! 
! 			jPanel7 = new JPanel();
! 			jPanel7.setLayout(new GridBagLayout());
! 			jPanel7.add(getJCheckBox_JisiYear(), gridBagConstraints27);
! 			jPanel7.add(getJCheckBox_InputDone(), gridBagConstraints28);
! 
! 			//jPanel7.add(k, gridBagConstraints28);
! 		}
! 		return jPanel7;
! 	}
  
  	/**
  	 * This method initializes jPanel1
***************
*** 1164,1170 ****
  		if (jButton_KojinAdd == null) {
  			jButton_KojinAdd = new ExtendedButton();
  			jButton_KojinAdd.setActionCommand("\u53d7\u8a3a\u5238\u547c\u51fa");
! 			jButton_KojinAdd.setText("受診券追加(F6)");
  			jButton_KojinAdd.addActionListener(this);
  		}
  		return jButton_KojinAdd;
--- 1082,1088 ----
  		if (jButton_KojinAdd == null) {
  			jButton_KojinAdd = new ExtendedButton();
  			jButton_KojinAdd.setActionCommand("\u53d7\u8a3a\u5238\u547c\u51fa");
! 			jButton_KojinAdd.setText("受診券追加");
  			jButton_KojinAdd.addActionListener(this);
  		}
  		return jButton_KojinAdd;
***************
*** 1322,1328 ****
  			gridBagConstraints40.gridy = 0;
  			jPanel22 = new JPanel();
  			jPanel22.setLayout(new GridBagLayout());
- 			jPanel22.setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 0));
  			jPanel22.add(getJCheckBox_male(), gridBagConstraints40);
  			jPanel22.add(getJCheckBox_female(), gridBagConstraints42);
  		}
--- 1240,1245 ----
***************
*** 1363,1371 ****
  	private ExtendedButton getJButton_Delete() {
  		if (jButton_DeleteKekka == null) {
  			jButton_DeleteKekka = new ExtendedButton();
! 			jButton_DeleteKekka.setText("結果削除(F3)");
  			jButton_DeleteKekka.setActionCommand("結果データ削除");
! //			jButton_DeleteKekka.setPreferredSize(new Dimension(100, 25));
  			jButton_DeleteKekka.addActionListener(this);
  		}
  		return jButton_DeleteKekka;
--- 1280,1288 ----
  	private ExtendedButton getJButton_Delete() {
  		if (jButton_DeleteKekka == null) {
  			jButton_DeleteKekka = new ExtendedButton();
! 			jButton_DeleteKekka.setText("結果データ削除");
  			jButton_DeleteKekka.setActionCommand("結果データ削除");
! 			jButton_DeleteKekka.setPreferredSize(new Dimension(100, 25));
  			jButton_DeleteKekka.addActionListener(this);
  		}
  		return jButton_DeleteKekka;
***************
*** 1380,1386 ****
  		if (jButton_DeleteKojin == null) {
  			jButton_DeleteKojin = new ExtendedButton();
  			jButton_DeleteKojin.setActionCommand("\u53d7\u8a3a\u5238\u547c\u51fa");
! 			jButton_DeleteKojin.setText("受診券削除(F4)");
  			jButton_DeleteKojin.addActionListener(this);
  		}
  		return jButton_DeleteKojin;
--- 1297,1303 ----
  		if (jButton_DeleteKojin == null) {
  			jButton_DeleteKojin = new ExtendedButton();
  			jButton_DeleteKojin.setActionCommand("\u53d7\u8a3a\u5238\u547c\u51fa");
! 			jButton_DeleteKojin.setText("受診券削除");
  			jButton_DeleteKojin.addActionListener(this);
  		}
  		return jButton_DeleteKojin;
***************
*** 1394,1401 ****
  	private ExtendedButton getJButton_Copy() {
  		if (jButton_Copy == null) {
  			jButton_Copy = new ExtendedButton();
! //			jButton_Copy.setPreferredSize(new Dimension(100, 25));
! 			jButton_Copy.setText("結果複製(F11)");
  			jButton_Copy.addActionListener(this);
  		}
  		return jButton_Copy;
--- 1311,1318 ----
  	private ExtendedButton getJButton_Copy() {
  		if (jButton_Copy == null) {
  			jButton_Copy = new ExtendedButton();
! 			jButton_Copy.setPreferredSize(new Dimension(100, 25));
! 			jButton_Copy.setText("結果データ複製");
  			jButton_Copy.addActionListener(this);
  		}
  		return jButton_Copy;
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaListFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaListFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaListFrameCtrl.java	Tue Apr 27 17:38:06 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaListFrameCtrl.java	Mon Apr 26 11:10:42 2010
***************
*** 1,24 ****
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
  
  import java.awt.Component;
  import java.awt.event.ActionEvent;
  import java.awt.event.InputEvent;
  import java.awt.event.ItemEvent;
- import java.awt.event.ItemListener;
  import java.awt.event.KeyEvent;
- import java.awt.event.MouseEvent;
  import java.awt.event.WindowAdapter;
  import java.awt.event.WindowEvent;
  import java.awt.print.PrinterException;
  import java.sql.SQLException;
  
  import java.util.ArrayList;
  import java.util.Hashtable;
  import java.util.List;
  import java.util.TreeMap;
  import java.util.Iterator;
  
- import javax.swing.AbstractButton;
  import javax.swing.JButton;
  import javax.swing.JCheckBox;
  import javax.swing.JScrollPane;
--- 1,26 ----
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
  
  import java.awt.Component;
+ import java.awt.FocusTraversalPolicy;
+ import java.awt.KeyEventDispatcher;
+ import java.awt.KeyboardFocusManager;
  import java.awt.event.ActionEvent;
  import java.awt.event.InputEvent;
  import java.awt.event.ItemEvent;
  import java.awt.event.KeyEvent;
  import java.awt.event.WindowAdapter;
  import java.awt.event.WindowEvent;
  import java.awt.print.PrinterException;
  import java.sql.SQLException;
  
  import java.util.ArrayList;
+ import java.util.HashMap;
  import java.util.Hashtable;
  import java.util.List;
  import java.util.TreeMap;
+ import java.util.TreeSet;
  import java.util.Iterator;
  
  import javax.swing.JButton;
  import javax.swing.JCheckBox;
  import javax.swing.JScrollPane;
***************
*** 27,34 ****
  import javax.swing.ListSelectionModel;
  import javax.swing.event.ChangeEvent;
  import javax.swing.event.ChangeListener;
- import javax.swing.event.ListSelectionEvent;
- import javax.swing.event.ListSelectionListener;
  import javax.swing.table.DefaultTableCellRenderer;
  import javax.swing.table.DefaultTableModel;
  import javax.swing.table.TableColumnModel;
--- 29,34 ----
***************
*** 43,54 ****
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
  import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
  import jp.or.med.orca.jma_tokutei.common.errormessage.RETURN_VALUE;
- import jp.or.med.orca.jma_tokutei.common.event.JSingleDoubleClickEvent;
  import jp.or.med.orca.jma_tokutei.common.event.JEnterEvent;
  import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
  import jp.or.med.orca.jma_tokutei.common.frame.ProgressWindow;
  import jp.or.med.orca.jma_tokutei.common.scene.JScene;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTable;
  import jp.or.med.orca.jma_tokutei.common.app.JApplication;
  import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.print.PrintIraisho;
  import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.print.PrintNyuryoku;
--- 43,56 ----
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
  import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
  import jp.or.med.orca.jma_tokutei.common.errormessage.RETURN_VALUE;
  import jp.or.med.orca.jma_tokutei.common.event.JEnterEvent;
+ import jp.or.med.orca.jma_tokutei.common.event.JSingleDoubleClickEvent;
  import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
  import jp.or.med.orca.jma_tokutei.common.frame.ProgressWindow;
  import jp.or.med.orca.jma_tokutei.common.scene.JScene;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTable;
+ import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellPosition;
+ import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableScrollPanel;
  import jp.or.med.orca.jma_tokutei.common.app.JApplication;
  import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.print.PrintIraisho;
  import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.print.PrintNyuryoku;
***************
*** 61,66 ****
--- 63,69 ----
  import jp.or.med.orca.jma_tokutei.common.sql.model.TKojin;
  import jp.or.med.orca.jma_tokutei.common.util.FiscalYearUtil;
  import jp.or.med.orca.jma_tokutei.common.validate.JValidate;
+ 
  // del s.inoue 2009/10/08
  // リスト廃止
  /* カレンダー関係 */
***************
*** 92,107 ****
  	private static final String SQL_DELETE_TOKUTEI ="delete from T_KENSAKEKA_TOKUTEI where UKETUKE_ID = ? and KENSA_NENGAPI = ? ";
  	private static final String SQL_DELETE_SONOTA ="delete from T_KENSAKEKA_SONOTA where UKETUKE_ID = ? and KENSA_NENGAPI = ? ";
  
- 	// add s.inoue 2010/02/23
- 	/** 保険者番号、支払代行機関選択欄の、番号と名称の区切り文字列 */
- 	private static final String COMBOBOX_NUMBER_NAME_SEPARATOR = " ";
- 
  	// 全選択ボタンの状態
  	boolean isAllSelect = true;
  
- 	// edit s.inoue 2010/04/27
- 	private ArrayList<Integer> selectedRows = null;
- 
  	// 検索ボタン押下時のSQLで使用
  	private static final String[] SQL_SELECT_PART = {
  			"'' as CHECKBOX_COLUMN,",
--- 95,103 ----
***************
*** 136,150 ****
  			"KENSA_NENGAPI", "HANTEI_NENGAPI", "TUTI_NENGAPI", "HKNJANUM","SIHARAI_DAIKOU_BANGO" };
  
  	private JKekkaListFrameData validatedData = new JKekkaListFrameData();
! 	private String[] header = { "", "年度","受診券整理番号", "氏名（カナ）","氏名（漢字）","生年月日", "性別", "入力","被保険者証等記号","被保険者証等番号", "健診実施日", "判定日", "結果通知日","保険者番号","代行機関番号" };
  	private ArrayList<Hashtable<String, String>> result;
  	private Hashtable<String, String> resultItem;
  	private static final int inputflgColumn = 7;
- 
- 	// edit s.inoue 2009/12/11
- 	private ExtendedCheckBox checkedTable = new ExtendedCheckBox();
- 	private ExtendedCheckBox checkedmodel = new ExtendedCheckBox();
- 
  	// add s.inoue 2009/10/26
  	// private JSimpleTable model = new JSimpleTable();
  	private DefaultTableModel dmodel = null;
--- 132,141 ----
  			"KENSA_NENGAPI", "HANTEI_NENGAPI", "TUTI_NENGAPI", "HKNJANUM","SIHARAI_DAIKOU_BANGO" };
  
  	private JKekkaListFrameData validatedData = new JKekkaListFrameData();
! 	private String[] header = { "", "年度","受診券番号", "氏名（カナ）","氏名（漢字）","生年月日", "性別", "入力","被保険者証等記号","被保険者証等番号", "健診実施日", "判定日", "結果通知日","保険者番号","代行機関番号" };
  	private ArrayList<Hashtable<String, String>> result;
  	private Hashtable<String, String> resultItem;
  	private static final int inputflgColumn = 7;
  	// add s.inoue 2009/10/26
  	// private JSimpleTable model = new JSimpleTable();
  	private DefaultTableModel dmodel = null;
***************
*** 206,215 ****
  	    modelfixed.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
  
  	    initilizeFocus();
- 	    // add s.inoue 2009/12/01
- 		functionListner();
- 	   	// add s.inoue 2010/02/23
- 		initializeHokenjaNumComboBox();
  
  		// add s.inoue 2009/10/26
          final JScrollPane scroll = new JScrollPane(table);
--- 197,202 ----
***************
*** 234,246 ****
  		jCheckBox_JisiYear.setSelected(true);
  		jCheckBox_male.setSelected(true);
  		jCheckBox_female.setSelected(true);
- 		addWindowListener(new ClosingWindowListener());
  
! 		// del s.inoue 2009/12/21
! 		// table.addKeyListener(new JEnterEvent(this, jButton_OK));
  
- 		// edit s.inoue 2009/12/12
  		// ダブルクリックの処理
  		table.addMouseListener(new JSingleDoubleClickEvent(this, jButton_OK,modelfixed));
  		modelfixed.addMouseListener(new JSingleDoubleClickEvent(this, jButton_OK,modelfixed));
  
--- 221,232 ----
  		jCheckBox_JisiYear.setSelected(true);
  		jCheckBox_male.setSelected(true);
  		jCheckBox_female.setSelected(true);
  
! 		table.addKeyListener(new JEnterEvent(this, jButton_OK));
  
  		// ダブルクリックの処理
+ 		// edit s.inoue 2009/04/26
+ 		// table.addMouseListener(new JDoubleClickEvent(this, jButton_OK));
  		table.addMouseListener(new JSingleDoubleClickEvent(this, jButton_OK,modelfixed));
  		modelfixed.addMouseListener(new JSingleDoubleClickEvent(this, jButton_OK,modelfixed));
  
***************
*** 272,343 ****
  	   			(DefaultTableCellRenderer)table.getDefaultRenderer(table.getColumnClass(i))));
  	   }
  
! 	   // editing s.inoue 2009/12/07
! 	   // modelfixed.setCellCheckBoxEditor(new JCheckBox(), 0);
! 	   // ExtendedCheckBox checkedmodel=new ExtendedCheckBox();
! 
! 	   modelfixed.setCellCheckBoxEditor(checkedmodel, 0);
! 
! 	   // add s.inoue 2009/11/12
! 	   table.addHeader(this.header);
  	   table.refreshTable();
- 
- 	   // edit s.inoue 2009/11/09
- 	   // 初期選択
- 	   int count = 0;
- 	   if (table.getRowCount() > 0) {
- 		   table.setRowSelectionInterval(0, 0);
- 		   count = table.getRowCount();
- // del s.inoue 2009/12/03
- //	   } else {
- //		   jTextField_Name.requestFocus();
- 	   }
- 	   jLabel_count.setText(count + " 件");
- 
- 	   // add s.inoue 2009/12/12
- 	   // selectedrowの初期化(simpletableとの連携)
- 	   table.getSelectionModel().addListSelectionListener(new ListSelectionListener() {
- 		   public void valueChanged(ListSelectionEvent e) {
- 		     if(e.getValueIsAdjusting()) return;
- 
- 		     int i = table.getSelectedRow();
- 		     if (i <= 0) return;
- 
- 		     if(modelfixed.getValueAt(i, 0) == null){
- 		    	 modelfixed.setValueAt(Boolean.FALSE, i, 0);
- 		     }else if (modelfixed.getValueAt(i, 0).equals(Boolean.TRUE)){
- 		    	 modelfixed.setValueAt(Boolean.TRUE, i, 0);
- 		     }else{
- 		    	 modelfixed.setValueAt(Boolean.FALSE, i, 0);
- 		     }
- 		   }
- 		 });
- 	   modelfixed.getSelectionModel().addListSelectionListener(new ListSelectionListener() {
- 		   public void valueChanged(ListSelectionEvent e) {
- 		     if(e.getValueIsAdjusting()) return;
- 
- 		     int i = table.getSelectedRow();
- 
- 		     if(i <= 0) return;
- 
- 		     if(modelfixed.getValueAt(i, 0) == null){
- 		    	 modelfixed.setValueAt(Boolean.FALSE, i, 0);
- 		     }else if (modelfixed.getValueAt(i, 0).equals(Boolean.TRUE)){
- 		    	 modelfixed.setValueAt(Boolean.TRUE, i, 0);
- 		     }else{
- 		    	 modelfixed.setValueAt(Boolean.FALSE, i, 0);
- 		     }
- 		   }
- 		 });
- 
- 	}
- 
- 	private class ClosingWindowListener extends WindowAdapter
- 	   {
- 	      public void windowClosing(WindowEvent e)
- 	      {
- 	         System.exit(0);
- 	      }
  	}
  
  	/* focus初期化 */
--- 258,265 ----
  	   			(DefaultTableCellRenderer)table.getDefaultRenderer(table.getColumnClass(i))));
  	   }
  
! 	   modelfixed.setCellCheckBoxEditor(new ExtendedCheckBox(), 0);
  	   table.refreshTable();
  	}
  
  	/* focus初期化 */
***************
*** 348,356 ****
  		this.focusTraversalPolicy.setDefaultComponent(jTextField_Name);
  		this.focusTraversalPolicy.addComponent(jTextField_Name);
  		this.focusTraversalPolicy.addComponent(jTextField_Jyusinken_ID);
! 		// edit s.inoue 2010/02/23
! 		this.focusTraversalPolicy.addComponent(jComboBox_HokenjyaNumber);
! 
  		this.focusTraversalPolicy.addComponent(this.jCheckBox_male);
  		this.focusTraversalPolicy.addComponent(this.jCheckBox_female);
  		this.focusTraversalPolicy.addComponent(this.jTextField_birthday);
--- 270,276 ----
  		this.focusTraversalPolicy.setDefaultComponent(jTextField_Name);
  		this.focusTraversalPolicy.addComponent(jTextField_Name);
  		this.focusTraversalPolicy.addComponent(jTextField_Jyusinken_ID);
! 		this.focusTraversalPolicy.addComponent(jTextField_HokenjyaNumber);
  		this.focusTraversalPolicy.addComponent(this.jCheckBox_male);
  		this.focusTraversalPolicy.addComponent(this.jCheckBox_female);
  		this.focusTraversalPolicy.addComponent(this.jTextField_birthday);
***************
*** 379,439 ****
  		this.focusTraversalPolicy.addComponent(jButton_DeleteKojin);
  		this.focusTraversalPolicy.addComponent(jButton_End);
  
- 	}
- 
- 	// add s.inoue 2009/12/01
- 	/* focus初期化 */
- 	private void functionListner(){
- 		Component comp = null;
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			comp = focusTraversalPolicy.getComponent(i);
- 			comp.addKeyListener(this);
- 		}
- 		modelfixed.addKeyListener(this);
- 	}
- 
- 	// add s.inoue 2010/02/23
- 	/**
- 	 * 保険者番号、名称の一覧を取得する。
- 	 */
- 	private ArrayList<Hashtable<String, String>> getHokenjaNumAndNames() {
- 		ArrayList<Hashtable<String, String>> result = null;
- 		// add s.inoue 2010/01/15
- 		String query = new String("SELECT HKNJANUM,HKNJANAME FROM T_HOKENJYA WHERE YUKOU_FLG = '1' ORDER BY HKNJANUM");
- 		try{
- 			result = JApplication.kikanDatabase.sendExecuteQuery(query);
- 		}catch(SQLException e){
- 			e.printStackTrace();
- 			logger.error(e.getMessage());
- 		}
- 		return result;
- 	}
- 
- 	/**
- 	 * 保険者番号コンボボックスの初期化
- 	 */
- 	private void initializeHokenjaNumComboBox() {
- 		ArrayList<Hashtable<String, String>> result = this.getHokenjaNumAndNames();
- 
- 		jComboBox_HokenjyaNumber.addItem("");
  
- 		for(int i = 0;i < result.size();i++ )
- 		{
- 			Hashtable<String,String> resultItem = result.get(i);
- 			String num = resultItem.get("HKNJANUM");
- 			String name = resultItem.get("HKNJANAME");
- 
- 			StringBuffer buffer = new StringBuffer();
- 			buffer.append(num);
- 			if (name != null && ! num.isEmpty()) {
- 				buffer.append(COMBOBOX_NUMBER_NAME_SEPARATOR);
- 				buffer.append(name);
- 			}
- 
- 			jComboBox_HokenjyaNumber.addItem(buffer.toString());
- 		}
  	}
- 
  	/**
  	 * 検索ボタンを押した際の必須項目の検証
  	 */
--- 299,306 ----
***************
*** 514,542 ****
  //		this.initializeColumnWidth();
  
  		// 固定,変動リフレッシュ
! 	   // edit s.inoue 2009/12/11
! 	   // checkedTable = new ExtendedCheckBox();
! 
! 	   // del s.inoue 2009/12/21
! 	   checkedTable.addKeyListener(this);
! 
! 	   // modelfixed.setCellCheckBoxEditor(new JCheckBox(), 0);
! 	   modelfixed.setCellCheckBoxEditor(checkedTable, 0);
! 
! 	    // add s.inoue 2009/11/12
! 	    table.addHeader(this.header);
  	    table.refreshTable();
- 
- 	    // edit s.inoue 2010/02/24
- 		// 初期選択
- 	    int count = 0;
- 		if (table.getRowCount() > 0) {
- 			table.setRowSelectionInterval(0, 0);
- 			count = table.getRowCount();
- 			} else {
- 				jTextField_Name.requestFocus();
- 		}
- 		jLabel_count.setText(count + " 件");
  	}
  
  	// edit s.inoue 2009/10/26
--- 381,388 ----
  //		this.initializeColumnWidth();
  
  		// 固定,変動リフレッシュ
! 	    modelfixed.setCellCheckBoxEditor(new ExtendedCheckBox(), 0);
  	    table.refreshTable();
  	}
  
  	// edit s.inoue 2009/10/26
***************
*** 624,647 ****
  			sex = "2";
  		}
  
- 		// edit s.inoue 2010/02/23
- 		/* コンボボックスで選択されている保険者番号、名称を取得する。 */
- 		String hokenjaNumberAndNameString = (String)jComboBox_HokenjyaNumber.getSelectedItem();
- 		String hokenjaNumber = "";
- 		String hokenjaName = "";
- 		if (hokenjaNumberAndNameString != null && ! hokenjaNumberAndNameString.isEmpty()) {
- 			String[] hokenjaNumberAndName = hokenjaNumberAndNameString.split(COMBOBOX_NUMBER_NAME_SEPARATOR);
- 			hokenjaNumber = hokenjaNumberAndName[0];
- 
- 			if (hokenjaNumberAndName.length > 1) {
- 				hokenjaName = hokenjaNumberAndName[1];
- 			}
- 		}
- 
  		return
  
  		validatedData.setJyushinkenID(jTextField_Jyusinken_ID.getText())
! 		&& validatedData.setHokenjyaNumber(hokenjaNumber)
  		&& validatedData.setName(jTextField_Name.getText())
  		&& validatedData.setSex(sex)
  		&& validatedData.setBirthDay(jTextField_birthday.getText())
--- 470,479 ----
  			sex = "2";
  		}
  
  		return
  
  		validatedData.setJyushinkenID(jTextField_Jyusinken_ID.getText())
! 		&& validatedData.setHokenjyaNumber(jTextField_HokenjyaNumber.getText())
  		&& validatedData.setName(jTextField_Name.getText())
  		&& validatedData.setSex(sex)
  		&& validatedData.setBirthDay(jTextField_birthday.getText())
***************
*** 876,895 ****
  	 * 結果データ入力ボタン
  	 */
  	public void showKekkaRegisterFrame(boolean isCopy) {
! 		// edit s.inoue 2010/04/27
! //		ArrayList<Integer> selectedRow = new ArrayList<Integer>();
! //
! //		// 現在チェックされている行のリストを抽出
! //		for (int i = 0; i < table.getRowCount(); i++) {
! //			if (table.getData(i, 0) == Boolean.TRUE) {
! //				selectedRow.add(i);
! //			}
! //		}
! 		setSelectedRows();
  
  		// 一つ選択されている場合のみ画面遷移を行う
! 		if (selectedRows.size() == 1) {
! 			resultItem = result.get(selectedRows.get(0));
  
  			// edit ver2 s.inoue 2009/06/01
  			if (isCopy){
--- 708,725 ----
  	 * 結果データ入力ボタン
  	 */
  	public void showKekkaRegisterFrame(boolean isCopy) {
! 		ArrayList<Integer> selectedRow = new ArrayList<Integer>();
! 
! 		// 現在チェックされている行のリストを抽出
! 		for (int i = 0; i < table.getRowCount(); i++) {
! 			if (table.getData(i, 0) == Boolean.TRUE) {
! 				selectedRow.add(i);
! 			}
! 		}
  
  		// 一つ選択されている場合のみ画面遷移を行う
! 		if (selectedRow.size() == 1) {
! 			resultItem = result.get(selectedRow.get(0));
  
  			// edit ver2 s.inoue 2009/06/01
  			if (isCopy){
***************
*** 1263,1269 ****
  		// 選択チェック
  		for (int i = 0; i < rowCount; i++) {
  			if ((Boolean) modelfixed.getData(i, 0) == Boolean.TRUE) {
! 				// ｋ番号「空」,結果入力「未」の場合エラー
  				if (table.getData(i, inputflgColumn).equals("未")){
  					JErrorMessage.show("M3547", this);return;
  				}
--- 1093,1099 ----
  		// 選択チェック
  		for (int i = 0; i < rowCount; i++) {
  			if ((Boolean) modelfixed.getData(i, 0) == Boolean.TRUE) {
! 				// 整理番号「空」,結果入力「未」の場合エラー
  				if (table.getData(i, inputflgColumn).equals("未")){
  					JErrorMessage.show("M3547", this);return;
  				}
***************
*** 1349,1368 ****
  	 * 受診券情報ボタン
  	 */
  	public void pushedKojinButton(ActionEvent e) {
! 		// edit s.inoue 2010/04/27
! //		selectedRows =  new ArrayList<Integer>();
! //
! //		// 現在チェックされている行のリストを抽出
! //		for (int i = 0; i < this.modelfixed.getRowCount(); i++) {
! //			if (this.modelfixed.getData(i, 0) == Boolean.TRUE) {
! //				selectedRows.add(i);
! //			}
! //		}
! 		setSelectedRows();
  
  		// 一つ選択されている場合のみ画面遷移を行う
! 		if (selectedRows.size() == 1) {
! 			resultItem = result.get(selectedRows.get(0));
  			this.validatedData.setUketuke_id(resultItem.get("UKETUKE_ID"));
  			this.validatedData.setHihokenjyaCode(resultItem.get("HIHOKENJYASYO_KIGOU"));
  			this.validatedData.setHihokenjyaNumber(resultItem.get("HIHOKENJYASYO_NO"));
--- 1179,1196 ----
  	 * 受診券情報ボタン
  	 */
  	public void pushedKojinButton(ActionEvent e) {
! 		ArrayList<Integer> selectedRow = new ArrayList<Integer>();
! 
! 		// 現在チェックされている行のリストを抽出
! 		for (int i = 0; i < this.modelfixed.getRowCount(); i++) {
! 			if (this.modelfixed.getData(i, 0) == Boolean.TRUE) {
! 				selectedRow.add(i);
! 			}
! 		}
  
  		// 一つ選択されている場合のみ画面遷移を行う
! 		if (selectedRow.size() == 1) {
! 			resultItem = result.get(selectedRow.get(0));
  			this.validatedData.setUketuke_id(resultItem.get("UKETUKE_ID"));
  			this.validatedData.setHihokenjyaCode(resultItem.get("HIHOKENJYASYO_KIGOU"));
  			this.validatedData.setHihokenjyaNumber(resultItem.get("HIHOKENJYASYO_NO"));
***************
*** 1393,1447 ****
  	public void actionPerformed(ActionEvent e) {
  		Object source = e.getSource();
  		if (source == jButton_End) {
- 			logger.info(jButton_End.getText());
  			pushedEndButton(e);
  		/* 検索ボタン */
  		} else if (source == jButton_Search) {
- 			logger.info(jButton_Search.getText());
  			pushedSearchButton(false);
  		/* 結果データ入力ボタン */
  		} else if (source == jButton_OK) {
- 			logger.info(jButton_OK.getText());
  			showKekkaRegisterFrame(false);
  
  		/* 結果データ複製ボタン */
  		} else if (source == jButton_Copy) {
- 			logger.info(jButton_Copy.getText());
  			showKekkaRegisterFrame(true);
  
  		/* 入力票印刷ボタン */
  		} else if (source == jButton_Print) {
- 			logger.info(jButton_Print.getText());
  			pushedPrintButton(e);
  		}
  
  		else if (source == jButton_Kojin) {
- 			logger.info(jButton_Kojin.getText());
  			pushedKojinButton(e);
  		}
  		else if (source == jButton_KojinAdd) {
- 			logger.info(jButton_KojinAdd.getText());
  			pushedKojinAddButton(e);
  		}
  
  		/* 依頼書ボタン */
  		else if (source == jButton_Irai) {
- 			logger.info(jButton_Irai.getText());
  			pushedPrintIraiButton(e);
  		}
  
  		/* 健診データ削除 */
  		else if (source == jButton_DeleteKekka) {
- 			logger.info(jButton_DeleteKekka.getText());
  			pushedDeleteKekkaButton();
  		}
  		/* 受診券削除 */
  		else if (source == jButton_DeleteKojin) {
- 			logger.info(jButton_DeleteKojin.getText());
  			pushedDeleteKojinButton();
  		}
  		else if (source == jButton_AllSelect) {
- 			logger.info(jButton_AllSelect.getText());
  			pushedAllSelectButton(e);
  		}
  	}
--- 1221,1266 ----
  	public void actionPerformed(ActionEvent e) {
  		Object source = e.getSource();
  		if (source == jButton_End) {
  			pushedEndButton(e);
+ 
  		/* 検索ボタン */
  		} else if (source == jButton_Search) {
  			pushedSearchButton(false);
+ 
  		/* 結果データ入力ボタン */
  		} else if (source == jButton_OK) {
  			showKekkaRegisterFrame(false);
  
  		/* 結果データ複製ボタン */
  		} else if (source == jButton_Copy) {
  			showKekkaRegisterFrame(true);
  
  		/* 入力票印刷ボタン */
  		} else if (source == jButton_Print) {
  			pushedPrintButton(e);
  		}
  
  		else if (source == jButton_Kojin) {
  			pushedKojinButton(e);
  		}
  		else if (source == jButton_KojinAdd) {
  			pushedKojinAddButton(e);
  		}
  
  		/* 依頼書ボタン */
  		else if (source == jButton_Irai) {
  			pushedPrintIraiButton(e);
  		}
  
  		/* 健診データ削除 */
  		else if (source == jButton_DeleteKekka) {
  			pushedDeleteKekkaButton();
  		}
  		/* 受診券削除 */
  		else if (source == jButton_DeleteKojin) {
  			pushedDeleteKojinButton();
  		}
  		else if (source == jButton_AllSelect) {
  			pushedAllSelectButton(e);
  		}
  	}
***************
*** 1454,1476 ****
  			//テーブルの再読み込みを行う
  //			model.clearAllRow();
  			pushedSearchButton(false);
- 			// edit s.inoue 2010/04/27
- 			if (selectedRows != null)
- 				modelfixed.setselectedRows(modelfixed,selectedRows);
  		}
  	}
  
- 	// add s.inoue 2010/04/27
- 	private void setSelectedRows(){
- 		selectedRows =  new ArrayList<Integer>();
- 
- 		// 現在チェックされている行のリストを抽出
- 		for (int i = 0; i < this.modelfixed.getRowCount(); i++) {
- 			if (this.modelfixed.getData(i, 0) == Boolean.TRUE) {
- 				selectedRows.add(i);
- 			}
- 		}
- 	}
  	/**
  	 * keyTyped イベントハンドラ
  	 */
--- 1273,1281 ----
***************
*** 1517,1567 ****
  		else if (source == jRadioButton_Female) {
  			changedSexState(e, false);
  		}
- 
- 		// add h.yoshitama 2009/11/11
- 		if ((e.getSource()) == jCheckBox_InputDone) {
- 			if( !jCheckBox_InputDone.isSelected() )
- 			{
- 				/* 健診実施日 */
- 				jTextField_KensaBeginDate.setEditable(false);
- 				jTextField_KensaBeginDate.setEnabled(false);
- 				jTextField_KensaBeginDate.setText("");
- 				jTextField_KensaEndDate.setEditable(false);
- 				jTextField_KensaEndDate.setEnabled(false);
- 				jTextField_KensaEndDate.setText("");
- 				/* 判定日 */
- 				jTextField_HanteiBeginDate.setEditable(false);
- 				jTextField_HanteiBeginDate.setEnabled(false);
- 				jTextField_HanteiBeginDate.setText("");
- 				jTextField_HanteiEndDate.setEditable(false);
- 				jTextField_HanteiEndDate.setEnabled(false);
- 				jTextField_HanteiEndDate.setText("");
- 				/* 結果通知日 */
- 				jTextField_TsuuchiBeginDate.setEditable(false);
- 				jTextField_TsuuchiBeginDate.setEnabled(false);
- 				jTextField_TsuuchiBeginDate.setText("");
- 				jTextField_TsuuchiEndDate.setEditable(false);
- 				jTextField_TsuuchiEndDate.setEnabled(false);
- 				jTextField_TsuuchiEndDate.setText("");
- 			} else {
- 				/* 健診実施日 */
- 				jTextField_KensaBeginDate.setEditable(true);
- 				jTextField_KensaBeginDate.setEnabled(true);
- 				jTextField_KensaEndDate.setEditable(true);
- 				jTextField_KensaEndDate.setEnabled(true);
- 				/* 判定日 */
- 				jTextField_HanteiBeginDate.setEditable(true);
- 				jTextField_HanteiBeginDate.setEnabled(true);
- 				jTextField_HanteiEndDate.setEditable(true);
- 				jTextField_HanteiEndDate.setEnabled(true);
- 				/* 結果通知日 */
- 				jTextField_TsuuchiBeginDate.setEditable(true);
- 				jTextField_TsuuchiBeginDate.setEnabled(true);
- 				jTextField_TsuuchiEndDate.setEditable(true);
- 				jTextField_TsuuchiEndDate.setEnabled(true);
- 
- 			}
- 		}
  	}
  
  	/**
--- 1322,1327 ----
***************
*** 1596,1646 ****
  		this.deleteKojin();
  	}
  
- 	// add s.inoue 2009/12/01
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 		int mod = keyEvent.getModifiersEx();
- 
- 		switch(keyEvent.getKeyCode()){
- 		case KeyEvent.VK_F1:
- 			logger.info(jButton_End.getText());
- 			dispose();break;
- 		case KeyEvent.VK_F3:
- 			logger.info(jButton_DeleteKekka.getText());
- 			pushedDeleteKekkaButton();break;
- 		case KeyEvent.VK_F4:
- 			logger.info(jButton_DeleteKojin.getText());
- 			pushedDeleteKojinButton();break;
- 		case KeyEvent.VK_F5:
- 			logger.info(jButton_Print.getText());
- 			pushedPrintButton(null);break;
- 		case KeyEvent.VK_F6:
- 			logger.info(jButton_KojinAdd.getText());
- 			pushedKojinAddButton(null);break;
- 		case KeyEvent.VK_F7:
- 			logger.info(jButton_Kojin.getText());
- 			pushedKojinButton(null);break;
- 		case KeyEvent.VK_F9:
- 			logger.info(jButton_Irai.getText());
- 			pushedPrintIraiButton(null);break;
- 		case KeyEvent.VK_F11:
- 			logger.info(jButton_Copy.getText());
- 			showKekkaRegisterFrame(true);break;
- 		case KeyEvent.VK_F12:
- 			logger.info(jButton_Copy.getText());
- 			showKekkaRegisterFrame(false);break;
- //		case KeyEvent.VK_S:
- //			if ((mod & InputEvent.ALT_DOWN_MASK) != 0){
- //				logger.info(jButton_Search.getText());
- //				pushedSearchButton(false);
- //			}
- //			break;
- 		// del s.inoue 2009/12/21
- 		// case KeyEvent.VK_S:
- 		//	pushedSearchButton(false);break;
- 		}
- 	}
- 
  	/**
  	 * 全て選択ボタンが押された場合 7
  	 */
--- 1356,1361 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaRegisterAbstractInputDialog.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaRegisterAbstractInputDialog.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaRegisterAbstractInputDialog.java	Tue Apr 27 12:30:16 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaRegisterAbstractInputDialog.java	Thu Oct 15 10:01:28 2009
***************
*** 3,17 ****
  import javax.swing.JPanel;
  
  import java.awt.Component;
- import java.awt.Dimension;
  import java.awt.Frame;
  import java.awt.BorderLayout;
  import javax.swing.JDialog;
  import java.awt.Font;
  import java.awt.GridBagLayout;
- 
- import javax.swing.JComponent;
- import javax.swing.JEditorPane;
  import javax.swing.JLabel;
  import javax.swing.JScrollPane;
  import java.awt.GridBagConstraints;
--- 3,13 ----
***************
*** 20,65 ****
  import java.awt.event.ActionListener;
  import java.awt.event.KeyEvent;
  import java.awt.event.KeyListener;
! import java.awt.event.MouseEvent;
! import java.awt.event.MouseListener;
  
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedButton;
- import jp.or.med.orca.jma_tokutei.common.component.ExtendedEditorPane;
- import jp.or.med.orca.jma_tokutei.common.component.ExtendedLabel;
  import jp.or.med.orca.jma_tokutei.common.component.TitleLabel;
- import jp.or.med.orca.jma_tokutei.common.component.ImeController.ImeMode;
  import jp.or.med.orca.jma_tokutei.common.errormessage.RETURN_VALUE;
- import jp.or.med.orca.jma_tokutei.common.event.JEnterEvent;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  
  import javax.swing.SwingConstants;
  import java.awt.CardLayout;
  import java.awt.GridLayout;
  import javax.swing.BorderFactory;
- import javax.swing.border.EtchedBorder;
  
  public abstract class JKekkaRegisterAbstractInputDialog extends JDialog
! 	implements ActionListener, KeyListener,MouseListener, IKekkaRegisterInputDialog {
  
  	private static final long serialVersionUID = 1L;
  	private JPanel jContentPane = null;
  	private JPanel jPanelNaviArea = null;
  	private JPanel jPanelMainArea = null;
  	private JPanel jPanelButtonArea = null;
  	protected JScrollPane jScrollPane = null;
! 	protected ExtendedButton jButtonOK = null;
! 	protected ExtendedButton jButtonSelect = null;
! 	protected ExtendedButton jButtonCancel = null;
! 	protected ExtendedButton jButtonClear = null;
  	protected RETURN_VALUE ReturnValue;  //  @jve:decl-index=0:
  	private Font guidanceFont;
  	private Font defaultFont;
  	private JPanel jPanelLabel = null;
- 	private ExtendedLabel jLabelTitle = null;
- 	private ExtendedLabel jLabelGuidance = null;
  
! 	// edit s.inoue 2009/12/15
! 	protected ExtendedEditorPane jEditorPane_Comment = null;
  
  	/**
  	 * @param owner
--- 16,64 ----
  import java.awt.event.ActionListener;
  import java.awt.event.KeyEvent;
  import java.awt.event.KeyListener;
! 
! import javax.swing.JButton;
  
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedButton;
  import jp.or.med.orca.jma_tokutei.common.component.TitleLabel;
  import jp.or.med.orca.jma_tokutei.common.errormessage.RETURN_VALUE;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  
  import javax.swing.SwingConstants;
  import java.awt.CardLayout;
  import java.awt.GridLayout;
  import javax.swing.BorderFactory;
  
  public abstract class JKekkaRegisterAbstractInputDialog extends JDialog
! 	implements ActionListener, KeyListener, IKekkaRegisterInputDialog {
  
  	private static final long serialVersionUID = 1L;
+ 
  	private JPanel jContentPane = null;
+ 
  	private JPanel jPanelNaviArea = null;
+ 
  	private JPanel jPanelMainArea = null;
+ 
  	private JPanel jPanelButtonArea = null;
+ 
  	protected JScrollPane jScrollPane = null;
! 
! 	protected JButton jButtonOK = null;
! 
! 	protected JButton jButtonCancel = null;
! 
  	protected RETURN_VALUE ReturnValue;  //  @jve:decl-index=0:
+ 
  	private Font guidanceFont;
+ 
  	private Font defaultFont;
+ 
  	private JPanel jPanelLabel = null;
  
! 	private JLabel jLabelTitle = null;
! 
! 	private JLabel jLabelGuidance = null;
  
  	/**
  	 * @param owner
***************
*** 71,91 ****
  	}
  
  	protected void initialize(String title, String guidance, Component component) {
! 		this.setSize(480, 420);
! 		this.setContentPane(getJContentPane(title,guidance));
  		this.setText(ViewSettings.getTokuteFrameTitleWithKikanInfomation());
  		this.setLocationRelativeTo( null );
  
! 		jButtonOK.addKeyListener(new JEnterEvent(this));
! 		jButtonCancel.addKeyListener(new JEnterEvent(this));
! 		// edit s.inoue 2009/12/21
! 		// jLabelTitle = new TitleLabel("tokutei.shoken.dialog.title");
! 		// jLabelTitle.setText(title);
! 		// jLabelTitle = new TitleLabel(title);
! 		// jLabelGuidance.setText(guidance);
  		jScrollPane.setViewportView(component);
! 		// del s.inoue 2009/12/21
! 		// jButtonOK.setSelected(true);
  		setModal(true);
  	}
  
--- 70,87 ----
  	}
  
  	protected void initialize(String title, String guidance, Component component) {
! 		this.setTitle(ViewSettings.getTokuteFrameTitleWithKikanInfomation());
! 		this.setSize(420, 420);
! 		this.setContentPane(getJContentPane());
  		this.setText(ViewSettings.getTokuteFrameTitleWithKikanInfomation());
  		this.setLocationRelativeTo( null );
  
! 		jButtonOK.addKeyListener(new jp.or.med.orca.jma_tokutei.common.event.JEnterEvent(this));
! 		jButtonCancel.addKeyListener(new jp.or.med.orca.jma_tokutei.common.event.JEnterEvent(this));
! 		jLabelTitle.setText(title);
! 		jLabelGuidance.setText(guidance);
  		jScrollPane.setViewportView(component);
! 		jButtonOK.setSelected(true);
  		setModal(true);
  	}
  
***************
*** 94,104 ****
  	 *
  	 * @return javax.swing.JPanel
  	 */
! 	private JPanel getJContentPane(String title,String guidance) {
  		if (jContentPane == null) {
  			jContentPane = new JPanel();
  			jContentPane.setLayout(new BorderLayout());
! 			jContentPane.add(getJPanelNaviArea(title,guidance), BorderLayout.NORTH);
  			jContentPane.add(getJPanelMainArea(), BorderLayout.CENTER);
  			jContentPane.add(getJPanelButtonArea(), BorderLayout.SOUTH);
  		}
--- 90,100 ----
  	 *
  	 * @return javax.swing.JPanel
  	 */
! 	private JPanel getJContentPane() {
  		if (jContentPane == null) {
  			jContentPane = new JPanel();
  			jContentPane.setLayout(new BorderLayout());
! 			jContentPane.add(getJPanelNaviArea(), BorderLayout.NORTH);
  			jContentPane.add(getJPanelMainArea(), BorderLayout.CENTER);
  			jContentPane.add(getJPanelButtonArea(), BorderLayout.SOUTH);
  		}
***************
*** 110,123 ****
  	 *
  	 * @return javax.swing.JPanel
  	 */
! 	private JPanel getJPanelNaviArea(String title,String guidance) {
  		if (jPanelNaviArea == null) {
  			CardLayout cardLayout = new CardLayout();
  			cardLayout.setHgap(5);
  			cardLayout.setVgap(5);
  			jPanelNaviArea = new JPanel();
  			jPanelNaviArea.setLayout(cardLayout);
! 			jPanelNaviArea.add(getJPanelLabel(title,guidance), getJPanelLabel(title,guidance).getName());
  		}
  		return jPanelNaviArea;
  	}
--- 106,119 ----
  	 *
  	 * @return javax.swing.JPanel
  	 */
! 	private JPanel getJPanelNaviArea() {
  		if (jPanelNaviArea == null) {
  			CardLayout cardLayout = new CardLayout();
  			cardLayout.setHgap(5);
  			cardLayout.setVgap(5);
  			jPanelNaviArea = new JPanel();
  			jPanelNaviArea.setLayout(cardLayout);
! 			jPanelNaviArea.add(getJPanelLabel(), getJPanelLabel().getName());
  		}
  		return jPanelNaviArea;
  	}
***************
*** 131,158 ****
  		if (jPanelMainArea == null) {
  			GridBagConstraints gridBagConstraints = new GridBagConstraints();
  			gridBagConstraints.fill = GridBagConstraints.BOTH;
- 			gridBagConstraints.weightx = 1.0;
  			gridBagConstraints.weighty = 1.0;
  			gridBagConstraints.insets = new Insets(0, 5, 0, 5);
! 			// edit s.inoue 2009/12/15
! 			gridBagConstraints.gridx = 0;
! 			gridBagConstraints.gridy = 0;
! 
! 			// edit s.inoue 2009/12/15
! 			GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
! 			gridBagConstraints2.fill = GridBagConstraints.BOTH;
! 			gridBagConstraints2.weightx = 1.0;
! 			gridBagConstraints2.weighty = 1.0;
! 			gridBagConstraints2.insets = new Insets(0, 5, 0, 5);
! 			gridBagConstraints2.gridx = 0;
! 			gridBagConstraints2.gridy = 1;
! 
! 
  			jPanelMainArea = new JPanel();
  			jPanelMainArea.setLayout(new GridBagLayout());
  			jPanelMainArea.add(getJScrollPane(), gridBagConstraints);
- 			// edit s.inoue 2009/12/15
- 			jPanelMainArea.add(getJEditorPane_Comment(),gridBagConstraints2);
  		}
  		return jPanelMainArea;
  	}
--- 127,138 ----
  		if (jPanelMainArea == null) {
  			GridBagConstraints gridBagConstraints = new GridBagConstraints();
  			gridBagConstraints.fill = GridBagConstraints.BOTH;
  			gridBagConstraints.weighty = 1.0;
  			gridBagConstraints.insets = new Insets(0, 5, 0, 5);
! 			gridBagConstraints.weightx = 1.0;
  			jPanelMainArea = new JPanel();
  			jPanelMainArea.setLayout(new GridBagLayout());
  			jPanelMainArea.add(getJScrollPane(), gridBagConstraints);
  		}
  		return jPanelMainArea;
  	}
***************
*** 167,200 ****
  			GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
  			gridBagConstraints2.gridx = 0;
  			gridBagConstraints2.gridy = 0;
- 
  			GridBagConstraints gridBagConstraints1 = new GridBagConstraints();
  			gridBagConstraints1.weightx = 1.0D;
  			gridBagConstraints1.anchor = GridBagConstraints.EAST;
- 			gridBagConstraints1.gridx = 2;
  			gridBagConstraints1.gridy = 0;
- 
- 			// edit s.inoue 2009/12/15
- 			GridBagConstraints gridBagConstraints3 = new GridBagConstraints();
- 			gridBagConstraints3.gridx = 3;
- 			gridBagConstraints3.gridy = 0;
- 			gridBagConstraints3.insets = new Insets(0,5,0,0);
- 
- 			// edit s.inoue 2010/04/27
- 			GridBagConstraints gridBagConstraints4 = new GridBagConstraints();
- 			gridBagConstraints4.gridx = 1;
- 			gridBagConstraints4.gridy = 0;
- 			gridBagConstraints4.insets = new Insets(0,5,0,0);
- 
  			jPanelButtonArea = new JPanel();
  			jPanelButtonArea.setLayout(new GridBagLayout());
  			jPanelButtonArea.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
  			jPanelButtonArea.add(getJButtonCancel(), gridBagConstraints2);
- 			// edit s.inoue 2010/04/27
- 			jPanelButtonArea.add(getJButtonClear(), gridBagConstraints4);
- 			jPanelButtonArea.add(getJButtonOK(), gridBagConstraints3);
- 			// edit s.inoue 2009/12/15
- 			jPanelButtonArea.add(getJButtonSelect(), gridBagConstraints1);
  		}
  		return jPanelButtonArea;
  	}
--- 147,162 ----
  			GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
  			gridBagConstraints2.gridx = 0;
  			gridBagConstraints2.gridy = 0;
  			GridBagConstraints gridBagConstraints1 = new GridBagConstraints();
+ 			gridBagConstraints1.gridx = 1;
  			gridBagConstraints1.weightx = 1.0D;
  			gridBagConstraints1.anchor = GridBagConstraints.EAST;
  			gridBagConstraints1.gridy = 0;
  			jPanelButtonArea = new JPanel();
  			jPanelButtonArea.setLayout(new GridBagLayout());
  			jPanelButtonArea.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
+ 			jPanelButtonArea.add(getJButtonOK(), gridBagConstraints1);
  			jPanelButtonArea.add(getJButtonCancel(), gridBagConstraints2);
  		}
  		return jPanelButtonArea;
  	}
***************
*** 207,303 ****
  	private JScrollPane getJScrollPane() {
  		if (jScrollPane == null) {
  			jScrollPane = new JScrollPane();
- 			// edit s.inoue 2009/12/11
- 			jScrollPane.addKeyListener(this);
  		}
  		return jScrollPane;
  	}
  
- 	// edit s.inoue 2009/12/15
- 	/**
- 	 * This method initializes jEditorPane_Comment
- 	 *
- 	 * @return javax.swing.JEditorPane
- 	 */
- 	private JEditorPane getJEditorPane_Comment() {
- 		if (jEditorPane_Comment == null) {
- 			jEditorPane_Comment = new ExtendedEditorPane(ImeMode.IME_ZENKAKU);
- 			jEditorPane_Comment.setBorder(BorderFactory.createEtchedBorder(EtchedBorder.LOWERED));
- 			// edit s.inoue 2009/11/11
- 			jEditorPane_Comment.addMouseListener(this); // マウスリスナを登録
- 			jEditorPane_Comment.addKeyListener(this);
- 		}
- 		return jEditorPane_Comment;
- 	}
- 
  	/**
  	 * This method initializes jButtonOK
  	 *
  	 * @return javax.swing.JButton
  	 */
! 	private ExtendedButton getJButtonOK() {
  		if (jButtonOK == null) {
  			jButtonOK = new ExtendedButton();
! 			jButtonOK.setText("確定(F12)");
! 			jButtonOK.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButtonOK.setActionCommand("終了");
  			jButtonOK.addActionListener(this);
- 			// edit s.inoue 2009/12/11
- 			jButtonOK.addKeyListener(this);
  		}
  		return jButtonOK;
  	}
  
- 	// edit s.inoue 2009/12/15
- 	/**
- 	 * This method initializes jButtonOK
- 	 *
- 	 * @return javax.swing.JButton
- 	 */
- 	private ExtendedButton getJButtonSelect() {
- 		if (jButtonSelect == null) {
- 			jButtonSelect = new ExtendedButton();
- 			jButtonSelect.setText("選択(F11)");
- 			jButtonSelect.setFont(new Font("Dialog", Font.PLAIN, 12));
- 			jButtonSelect.addActionListener(this);
- 			// edit s.inoue 2009/12/11
- 			jButtonSelect.addKeyListener(this);
- 		}
- 		return jButtonSelect;
- 	}
- 
  	/**
  	 * This method initializes jButtonCancel
  	 *
  	 * @return javax.swing.JButton
  	 */
! 	private ExtendedButton getJButtonClear() {
! 		if (jButtonClear == null) {
! 			jButtonClear = new ExtendedButton();
! 			jButtonClear.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButtonClear.setText("クリア(F2)");
! 			jButtonClear.addActionListener(this);
! 			// edit s.inoue 2009/12/11
! 			jButtonClear.addKeyListener(this);
! 		}
! 		return jButtonClear;
! 	}
! 	/**
! 	 * This method initializes jButtonCancel
! 	 *
! 	 * @return javax.swing.JButton
! 	 */
! 	private ExtendedButton getJButtonCancel() {
  		if (jButtonCancel == null) {
  			jButtonCancel = new ExtendedButton();
! 			jButtonCancel.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButtonCancel.setText("キャンセル(F1)");
  			jButtonCancel.addActionListener(this);
- 			// edit s.inoue 2009/12/11
- 			jButtonCancel.addKeyListener(this);
  		}
  		return jButtonCancel;
  	}
  	public void keyPressed(KeyEvent arg0) {
  
  	}
--- 169,209 ----
  	private JScrollPane getJScrollPane() {
  		if (jScrollPane == null) {
  			jScrollPane = new JScrollPane();
  		}
  		return jScrollPane;
  	}
  
  	/**
  	 * This method initializes jButtonOK
  	 *
  	 * @return javax.swing.JButton
  	 */
! 	private JButton getJButtonOK() {
  		if (jButtonOK == null) {
  			jButtonOK = new ExtendedButton();
! 			jButtonOK.setText("登録");
! 			jButtonOK.setFont(defaultFont);
  			jButtonOK.setActionCommand("終了");
  			jButtonOK.addActionListener(this);
  		}
  		return jButtonOK;
  	}
  
  	/**
  	 * This method initializes jButtonCancel
  	 *
  	 * @return javax.swing.JButton
  	 */
! 	private JButton getJButtonCancel() {
  		if (jButtonCancel == null) {
  			jButtonCancel = new ExtendedButton();
! 			jButtonCancel.setFont(defaultFont);
! 			jButtonCancel.setText("キャンセル");
  			jButtonCancel.addActionListener(this);
  		}
  		return jButtonCancel;
  	}
+ 
  	public void keyPressed(KeyEvent arg0) {
  
  	}
***************
*** 309,319 ****
  	public void keyTyped(KeyEvent arg0) {
  
  	}
- 	// add s.inoue 2009/11/11
- 	public void mousePressed(MouseEvent e) {
- 	}
- 	public void mouseReleased(MouseEvent e) {
- 	}
  
  	/**
  	 * 戻り値を取得する
--- 215,220 ----
***************
*** 323,346 ****
  		return ReturnValue;
  	}
  
! // move s.inoue 2009/12/15
! //	/**
! //	 * 戻り値を格納
! //	 */
! //	public void actionPerformed(ActionEvent e) {
! //		// edit s.inoue 2009/12/15
! //		if(e.getSource() == jButtonSelect){
! //		}else if(e.getSource() == jButtonOK) {
! //			// edit s.inoue 2009/12/06
! //			// ReturnValue = RETURN_VALUE.OK;
! //			ReturnValue = RETURN_VALUE.YES;
! //		}
! //		else if(e.getSource() == jButtonCancel) {
! //			ReturnValue = RETURN_VALUE.CANCEL;
! //		}
! //		// モーダルダイアログの制御解除。
! //		setVisible(false);
! //	}
  
  	/**
  	 * 選択中セルのテキストをテキストエリア/リストボックスにセットする
--- 224,242 ----
  		return ReturnValue;
  	}
  
! 	/**
! 	 * 戻り値を格納
! 	 */
! 	public void actionPerformed(ActionEvent e) {
! 		if(e.getSource() == jButtonOK) {
! 			ReturnValue = RETURN_VALUE.OK;
! 		}
! 		else if(e.getSource() == jButtonCancel) {
! 			ReturnValue = RETURN_VALUE.CANCEL;
! 		}
! 		// モーダルダイアログの制御解除。
! 		setVisible(false);
! 	}
  
  	/**
  	 * 選択中セルのテキストをテキストエリア/リストボックスにセットする
***************
*** 359,374 ****
  	 *
  	 * @return javax.swing.JPanel
  	 */
! 	private JPanel getJPanelLabel(String title,String guidance) {
  		if (jPanelLabel == null) {
! 			jLabelGuidance = new ExtendedLabel();
  			jLabelGuidance.setFont(guidanceFont);
! 			jLabelGuidance.setText(guidance);
! 			// edit s.inoue 2009/12/21
! 			// jLabelTitle.setText("tokutei.shoken.dialog.title");
! 			jLabelTitle = new TitleLabel();
! 			jLabelTitle.setText(title);
! 
  			GridLayout gridLayout = new GridLayout();
  			gridLayout.setRows(2);
  			gridLayout.setVgap(5);
--- 255,267 ----
  	 *
  	 * @return javax.swing.JPanel
  	 */
! 	private JPanel getJPanelLabel() {
  		if (jPanelLabel == null) {
! 			jLabelGuidance = new JLabel();
  			jLabelGuidance.setFont(guidanceFont);
! 			jLabelGuidance.setText("");
! 			jLabelTitle = new TitleLabel("");
! 			jLabelTitle.setText("JLabel");
  			GridLayout gridLayout = new GridLayout();
  			gridLayout.setRows(2);
  			gridLayout.setVgap(5);
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaRegisterCommentInputDialog.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaRegisterCommentInputDialog.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaRegisterCommentInputDialog.java	Tue Apr 27 12:29:30 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaRegisterCommentInputDialog.java	Tue Aug 11 17:55:30 2009
***************
*** 6,76 ****
  import java.awt.event.ComponentEvent;
  import java.awt.event.KeyEvent;
  import java.awt.event.KeyListener;
- import java.awt.event.MouseEvent;
- import java.sql.SQLException;
- import java.util.ArrayList;
- import java.util.Hashtable;
  
  import javax.swing.JDialog;
  import javax.swing.JList;
  import javax.swing.ListSelectionModel;
- 
- import org.apache.log4j.Logger;
- 
- import jp.or.med.orca.jma_tokutei.common.app.JApplication;
- import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
- import jp.or.med.orca.jma_tokutei.common.errormessage.RETURN_VALUE;
- import jp.or.med.orca.jma_tokutei.common.event.JSingleDoubleClickEvent;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
- import jp.or.med.orca.jma_tokutei.common.validate.JValidate;
- import java.awt.Dimension;
  
  /**
   * 総合コメント入力用ダイアログクラス
   */
  public class JKekkaRegisterCommentInputDialog extends JKekkaRegisterAbstractInputDialog {
  
- 	private static org.apache.log4j.Logger logger = Logger.getLogger(JKekkaRegisterCommentInputDialog.class);
- 
  	private static final long serialVersionUID = 1L;
  	/**
  	 * ダイアログタイトル文字列取得用キー
  	 */
! 	// edit s.inoue 2009/12/21
! 	// private final String TITLE_TEXT_KEY = "tokutei.kekkainput.frame.commentinput.dialog.title";
! 	private final String TITLE_TEXT_KEY = "tokutei.shoken.dialog.title";
! 
  	/**
  	 * 入力ガイダンス文字列取得用キー
  	 */
! 	// edit s.inoue 2009/12/21
! 	// private final String GUIDANCE_TEXT_KEY = "tokutei.kekkainput.frame.commentinput.dialog.guidance";
! 	private final String GUIDANCE_TEXT_KEY = "tokutei.shoken.dialog.guidance";
! 
! // del s.inoue 2009/12/11
! //	// コードマスタに定義すべき
! //	private final String[] SOUGOU_COMMENT_TEXT =
! //	{
! //		"血圧は正常です",
! //		"血圧に異常が見られます",
! //		"尿検査は正常です",
! //		"尿検査に異常が認められます",
! //		"血糖検査は正常です",
! //		"血糖検査に異常が認められます",
! //		"脂質検査は正常です",
! //		"脂質検査に異常が認められます",
! //		"肝機能検査は正常です",
! //		"肝機能検査に異常が認められます",
! //		"今回健診の医師の判断は「異常なし」です",
! //		"今回健診の医師の判断は「要観察」です",
! //		"今回健診の医師の判断は「要指導」です",
! //		"今回健診の医師の判断は「治療中」です",
! //		"今回健診の医師の判断は「要医療」です"
! //	};
! 
! 	// edit s.inoue 2009/12/11
! 	private String[] TEIKEIBUN_TEXT =null;
! 
  	private JList jListComment = null;
  	/**
  	 * コンストラクタ
--- 6,56 ----
  import java.awt.event.ComponentEvent;
  import java.awt.event.KeyEvent;
  import java.awt.event.KeyListener;
  
  import javax.swing.JDialog;
  import javax.swing.JList;
  import javax.swing.ListSelectionModel;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  
  /**
   * 総合コメント入力用ダイアログクラス
+  * 2008/3/13
+  * @author nishiyama
+  *
   */
  public class JKekkaRegisterCommentInputDialog extends JKekkaRegisterAbstractInputDialog {
  
  	private static final long serialVersionUID = 1L;
  	/**
  	 * ダイアログタイトル文字列取得用キー
  	 */
! 	private final String TITLE_TEXT_KEY = "tokutei.kekkainput.frame.commentinput.dialog.title";
  	/**
  	 * 入力ガイダンス文字列取得用キー
  	 */
! 	private final String GUIDANCE_TEXT_KEY = "tokutei.kekkainput.frame.commentinput.dialog.guidance";
! 	
! 	// 以下暫定的処置
! 	// コードマスタに定義すべき
! 	private final String[] SOUGOU_COMMENT_TEXT =
! 	{
! 		"血圧は正常です",
! 		"血圧に異常が見られます",
! 		"尿検査は正常です",
! 		"尿検査に異常が認められます",
! 		"血糖検査は正常です",
! 		"血糖検査に異常が認められます",
! 		"脂質検査は正常です",
! 		"脂質検査に異常が認められます",
! 		"肝機能検査は正常です",
! 		"肝機能検査に異常が認められます",
! 		"今回健診の医師の判断は「異常なし」です",
! 		"今回健診の医師の判断は「要観察」です",
! 		"今回健診の医師の判断は「要指導」です",
! 		"今回健診の医師の判断は「治療中」です",
! 		"今回健診の医師の判断は「要医療」です"
! 	};
! 	
  	private JList jListComment = null;
  	/**
  	 * コンストラクタ
***************
*** 80,149 ****
  		super(owner);
  		String title = ViewSettings.getUsingValueString(TITLE_TEXT_KEY);
  		String guidance = ViewSettings.getUsingValueString(GUIDANCE_TEXT_KEY);
- 
- 		TEIKEIBUN_TEXT =getTeikeiMaster();
- 
  		JList listBox = getJListComment();
- 
  		initialize(title, guidance, listBox);
  		listBox.grabFocus();
! 
! 		/* 可視状態になったときに、エディタに フォーカスを移動するように変更。 */
  		this.addComponentListener(new ComponentAdapter(){
  			@Override
  			public void componentShown(ComponentEvent arg0) {
  				JKekkaRegisterCommentInputDialog.this.jListComment.grabFocus();
  			}
  		});
! 
! 		// ダブルクリックの処理
! 		jListComment.addMouseListener(new JSingleDoubleClickEvent(this,jButtonSelect));
! 
! 	}
! 
! 	/**
! 	 * This method initializes this
! 	 *
! 	 */
! 	private void initialize() {
!         this.setSize(new Dimension(364, 191));
! 
! 	}
! 
! 	// add s.inoue 2009/12/11
! 	/**
! 	 * 定型文マスタより取得
! 	 */
! 	public String[] getTeikeiMaster() {
! 
! 		// edit s.inoue 2009/12/21 全て
! 		// String query = "SELECT SYOKEN_TYPE, SYOKEN_NO, SYOKEN, UPDATE_TIMESTAMP FROM T_SYOKENMASTER WHERE SYOKEN_TYPE = ? ";
! 		// String[] params = { teikeiType };
! 		String query = "SELECT SYOKEN_TYPE, SYOKEN_NO, SYOKEN, UPDATE_TIMESTAMP "
! 		+ " FROM T_SYOKENMASTER WHERE SYOKEN <> '' ";
! 
! 		ArrayList<Hashtable<String, String>> result = null;
! 		try {
! 			result = JApplication.kikanDatabase.sendExecuteQuery(query);
! 		} catch (SQLException e) {
! 			logger.error(e.getMessage());
! 			e.printStackTrace();
! 		}
! 
! //		if (result != null && ! result.isEmpty())
! //			return null;
! 
! 		String[] aryItems = new String[ result.size() ];
! 
! 		for (int cnt = 0;cnt<result.size();cnt++){
! 			Hashtable<String, String> item = result.get(cnt);
! 
! 			// String teikeibunNo = item.get("TEIKEIBUN_NO");
! 			// String updatetime = item.get("UPDATE_TIMESTAMP");
! 			aryItems[cnt] = item.get("SYOKEN");
! 		}
! 
! 		return aryItems;
  	}
  
  	/**
--- 60,79 ----
  		super(owner);
  		String title = ViewSettings.getUsingValueString(TITLE_TEXT_KEY);
  		String guidance = ViewSettings.getUsingValueString(GUIDANCE_TEXT_KEY);
  		JList listBox = getJListComment();
  		initialize(title, guidance, listBox);
  		listBox.grabFocus();
! 		
! 		/* Added 2008/03/14 若月 可視状態になったときに、エディタに
! 		 * フォーカスを移動するように変更。 */
! 		/* --------------------------------------------------- */
  		this.addComponentListener(new ComponentAdapter(){
  			@Override
  			public void componentShown(ComponentEvent arg0) {
  				JKekkaRegisterCommentInputDialog.this.jListComment.grabFocus();
  			}
  		});
! 		/* --------------------------------------------------- */
  	}
  
  	/**
***************
*** 151,160 ****
  	 */
  	@Override
  	public String getText() {
! 		// edit s.inoue 2009/12/15
! 		System.out.println((String)jEditorPane_Comment.getText());
! 		return (String)jEditorPane_Comment.getText();
! 		// return (String)jListComment.getSelectedValue();
  	}
  
  	/**
--- 81,87 ----
  	 */
  	@Override
  	public String getText() {
! 		return (String)jListComment.getSelectedValue();
  	}
  
  	/**
***************
*** 165,179 ****
  	@Override
  	public void setText(String text) {
  		if (text == null) return;
! // edit s.inoue 2009/12/11
! //		for (int i = 0 ; i < SOUGOU_COMMENT_TEXT.length ; i++) {
! //			if (SOUGOU_COMMENT_TEXT[i].equals(text)) {
! //				jListComment.setSelectedIndex(i);
! //				return;
! //			}
! //		}
! 		for (int i = 0 ; i < TEIKEIBUN_TEXT.length ; i++) {
! 			if (TEIKEIBUN_TEXT[i].equals(text)) {
  				jListComment.setSelectedIndex(i);
  				return;
  			}
--- 92,100 ----
  	@Override
  	public void setText(String text) {
  		if (text == null) return;
! 		
! 		for (int i = 0 ; i < SOUGOU_COMMENT_TEXT.length ; i++) {
! 			if (SOUGOU_COMMENT_TEXT[i].equals(text)) {
  				jListComment.setSelectedIndex(i);
  				return;
  			}
***************
*** 181,291 ****
  	}
  
  	/**
! 	 * This method initializes jListComment
! 	 *
! 	 * @return javax.swing.JList
  	 */
  	private JList getJListComment() {
  		if (jListComment == null) {
! 			// edit s.inoue 2009/12/11
! 			// jListComment = new JList(SOUGOU_COMMENT_TEXT);
! 			jListComment = new JList(TEIKEIBUN_TEXT);
! 
  			jListComment.setSelectionMode(ListSelectionModel.SINGLE_INTERVAL_SELECTION);
  			jListComment.setFont(ViewSettings.getCommonUserInputFont());
  			jListComment.addKeyListener(this);
  		}
  		return jListComment;
  	}
! 
  	/**
  	 * リストボックスキーリスナコールバック
  	 * Enterキー押下時にOKボタン押下と同じ処理を実行する
  	 */
  	@Override
  	public void keyPressed(KeyEvent keyEvent) {
! 		// edit s.inoue 2009/12/11
! 		switch(keyEvent.getKeyCode()){
! 			// del s.inoue 2009/12/22 削除する?
! //			case KeyEvent.VK_ENTER:
! //				ActionEvent event = new ActionEvent(jButtonOK, 0, "exit");
! //				actionPerformed(event);
! //				break;
! 			case KeyEvent.VK_F1:
! 				logger.info(jButtonCancel.getText());
! 				ReturnValue = RETURN_VALUE.CANCEL;
! 				setVisible(false);
! 				break;
! 			case KeyEvent.VK_F2:
! 				logger.info(jButtonClear.getText());
! 				// edit s.inoue 2010/04/27
! 				this.jEditorPane_Comment.setText("");
! 				break;
! 			// edit s.inoue 2009/12/15
! 			case KeyEvent.VK_F11:
! 				logger.info(jButtonSelect.getText());
! 				setCommentText();
! 				break;
! 			case KeyEvent.VK_F12:
! 				logger.info(jButtonOK.getText());
! 				ReturnValue = RETURN_VALUE.YES;
! 				setVisible(false);
! 				break;
! 		}
! 	}
! 
! 	// add s.inoue 2009/12/15
! 	private void setCommentText(){
! 		String commText = jEditorPane_Comment.getText().trim();
! 
! 		if(commText.length() > 0)
! 			commText +=  ",";
! 		commText += jListComment.getSelectedValue().toString().trim();
! 		jEditorPane_Comment.setText(commText);
! 	}
! 
! 	// move s.inoue 2009/12/15
! 	/**
! 	 * 戻り値を格納
! 	 */
! 	public void actionPerformed(ActionEvent e) {
! 		// edit s.inoue 2009/12/15
! 		if(e.getSource() == jButtonSelect){
! 			logger.info(jButtonSelect.getText());
! 			setCommentText();
! 		}else if(e.getSource() == jButtonOK) {
! 			logger.info(jButtonOK.getText());
! 			// edit s.inoue 2009/12/06
! 			// ReturnValue = RETURN_VALUE.OK;
! 			ReturnValue = RETURN_VALUE.YES;
! 			// モーダルダイアログの制御解除。
! 			setVisible(false);
! 		}
! 		else if(e.getSource() == jButtonCancel) {
! 			logger.info(jButtonCancel.getText());
! 			ReturnValue = RETURN_VALUE.CANCEL;
! 			// モーダルダイアログの制御解除。
! 			setVisible(false);
  		}
  	}
- 	@Override
- 	public void mouseClicked(MouseEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void mouseEntered(MouseEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void mouseExited(MouseEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
  
! }  //  @jve:decl-index=0:visual-constraint="10,10"
  //@jve:decl-index=0:
  //  @jve:decl-index=0:visual-constraint="10,10"
\ No newline at end of file
--- 102,134 ----
  	}
  
  	/**
! 	 * This method initializes jListComment	
! 	 * 	
! 	 * @return javax.swing.JList	
  	 */
  	private JList getJListComment() {
  		if (jListComment == null) {
! 			jListComment = new JList(SOUGOU_COMMENT_TEXT);
  			jListComment.setSelectionMode(ListSelectionModel.SINGLE_INTERVAL_SELECTION);
  			jListComment.setFont(ViewSettings.getCommonUserInputFont());
  			jListComment.addKeyListener(this);
  		}
  		return jListComment;
  	}
! 	
  	/**
  	 * リストボックスキーリスナコールバック
  	 * Enterキー押下時にOKボタン押下と同じ処理を実行する
  	 */
  	@Override
  	public void keyPressed(KeyEvent keyEvent) {
! 	
! 		if (keyEvent.getKeyCode() == KeyEvent.VK_ENTER) {
! 			ActionEvent event = new ActionEvent(jButtonOK, 0, "exit");
! 			actionPerformed(event);
  		}
  	}
  
! }
  //@jve:decl-index=0:
  //  @jve:decl-index=0:visual-constraint="10,10"
\ No newline at end of file
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaRegisterFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaRegisterFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaRegisterFrame.java	Mon Apr 19 19:05:58 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaRegisterFrame.java	Tue Oct 20 21:51:52 2009
***************
*** 20,27 ****
  import java.awt.event.ItemEvent;
  import java.awt.event.KeyEvent;
  import java.awt.event.ActionEvent;
- import java.awt.event.MouseEvent;
- import java.awt.event.MouseListener;
  
  import javax.swing.border.EtchedBorder;
  
--- 20,25 ----
***************
*** 42,48 ****
  /**
   * 健診結果データ入力画面
   */
! public class JKekkaRegisterFrame extends JFrame implements ActionListener,ItemListener, KeyListener, MouseListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
--- 40,46 ----
  /**
   * 健診結果データ入力画面
   */
! public class JKekkaRegisterFrame extends JFrame implements ActionListener,ItemListener, KeyListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
***************
*** 215,221 ****
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
--- 213,219 ----
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
***************
*** 229,235 ****
  	private ExtendedButton getJButton_Clear() {
  		if (jButton_Clear == null) {
  			jButton_Clear = new ExtendedButton();
! 			jButton_Clear.setText("クリア(F2)");
  			jButton_Clear.addActionListener(this);
  		}
  		return jButton_Clear;
--- 227,233 ----
  	private ExtendedButton getJButton_Clear() {
  		if (jButton_Clear == null) {
  			jButton_Clear = new ExtendedButton();
! 			jButton_Clear.setText("クリア");
  			jButton_Clear.addActionListener(this);
  		}
  		return jButton_Clear;
***************
*** 663,689 ****
  //		jTextFieldsexName.setFont(new Font("Dialog", Font.PLAIN, 12));
  //	}
  
! 
! // del s.inoue 2009/12/25 いらない?削除
! //	/**
! //	 * 指定サイズ・アライメント・ReadOnly属性の
! //	 * テキストフィールドを生成する
! //	 * @param dimension 幅・高さ
! //	 * @param alignment アライメント
! //	 * @param isEditable ReadOnlyフラグ
! //	 * @return テキストフィールド
! //	 */
! //	private ExtendedTextField getExtendedTextField(
! //			Dimension dimension,
! //			int alignment,
! //			boolean isEditable) {
! //
! //		ExtendedTextField text = new ExtendedTextField();
! //		text.setHorizontalAlignment(alignment);
! //		if (dimension != null) text.setPreferredSize(dimension);
! //		text.setEditable(isEditable);
! //		return text;
! //	}
  
  //	/**
  //	 * This method initializes jTextField_HokenjyaCode
--- 661,685 ----
  //		jTextFieldsexName.setFont(new Font("Dialog", Font.PLAIN, 12));
  //	}
  
! 	/**
! 	 * 指定サイズ・アライメント・ReadOnly属性の
! 	 * テキストフィールドを生成する
! 	 * @param dimension 幅・高さ
! 	 * @param alignment アライメント
! 	 * @param isEditable ReadOnlyフラグ
! 	 * @return テキストフィールド
! 	 */
! 	private ExtendedTextField getExtendedTextField(
! 			Dimension dimension,
! 			int alignment,
! 			boolean isEditable) {
! 
! 		ExtendedTextField text = new ExtendedTextField();
! 		text.setHorizontalAlignment(alignment);
! 		if (dimension != null) text.setPreferredSize(dimension);
! 		text.setEditable(isEditable);
! 		return text;
! 	}
  
  //	/**
  //	 * This method initializes jTextField_HokenjyaCode
***************
*** 721,728 ****
  			//jComboBox_Pattern.setPreferredSize(new Dimension(150, 20));
  			jComboBox_Pattern.setPreferredSize(new Dimension(240, 20));
  			jComboBox_Pattern.addItemListener(this);
! 			// del s.inoue 2009/12/21
! 			// jComboBox_Pattern.addKeyListener(this);
  		}
  		return jComboBox_Pattern;
  	}
--- 717,723 ----
  			//jComboBox_Pattern.setPreferredSize(new Dimension(150, 20));
  			jComboBox_Pattern.setPreferredSize(new Dimension(240, 20));
  			jComboBox_Pattern.addItemListener(this);
! 			jComboBox_Pattern.addKeyListener(this);
  		}
  		return jComboBox_Pattern;
  	}
***************
*** 829,835 ****
  	private ExtendedButton getJButton_Register() {
  		if (jButton_Register == null) {
  			jButton_Register = new ExtendedButton();
! 			jButton_Register.setText("登録(F12)");
  			jButton_Register.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Register.addActionListener(this);
  		}
--- 824,830 ----
  	private ExtendedButton getJButton_Register() {
  		if (jButton_Register == null) {
  			jButton_Register = new ExtendedButton();
! 			jButton_Register.setText("登録");
  			jButton_Register.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Register.addActionListener(this);
  		}
***************
*** 902,909 ****
  		if (jEditorPane_Comment == null) {
  			jEditorPane_Comment = new ExtendedEditorPane(ImeMode.IME_ZENKAKU);
  			jEditorPane_Comment.setBorder(BorderFactory.createEtchedBorder(EtchedBorder.LOWERED));
- 			// edit s.inoue 2009/11/11
- 			jEditorPane_Comment.addMouseListener(this); // マウスリスナを登録
  		}
  		return jEditorPane_Comment;
  	}
--- 897,902 ----
***************
*** 1375,1395 ****
  		}
  		return jPanel7;
  	}
- 
- 	@Override
- 	public void mouseClicked(MouseEvent e) {
- 	}
- 	@Override
- 	public void mouseEntered(MouseEvent e) {
- 	}
- 	@Override
- 	public void mouseExited(MouseEvent e) {
- 	}
- 	@Override
- 	public void mousePressed(MouseEvent e) {
- 	}
- 	@Override
- 	public void mouseReleased(MouseEvent e) {
- 	}
- 
  }  //  @jve:decl-index=0:visual-constraint="10,10"
--- 1368,1371 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaRegisterFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaRegisterFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaRegisterFrameCtrl.java	Tue Apr 27 16:27:38 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaRegisterFrameCtrl.java	Fri Oct 30 14:05:00 2009
***************
*** 1,20 ****
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
  
- import javax.swing.AbstractCellEditor;
  import javax.swing.DefaultCellEditor;
! import javax.swing.JComponent;
! import javax.swing.JScrollPane;
! import javax.swing.JTable;
! import javax.swing.JTextArea;
  import javax.swing.JTextField;
  import javax.swing.event.CellEditorListener;
  import javax.swing.event.ChangeEvent;
  import javax.swing.table.DefaultTableColumnModel;
- import javax.swing.table.TableCellEditor;
- import javax.swing.table.TableCellRenderer;
  import javax.swing.table.TableColumn;
  import java.awt.Color;
  import java.awt.Component;
  import java.awt.event.FocusAdapter;
  import java.awt.event.FocusEvent;
  import java.awt.event.ItemListener;
--- 1,20 ----
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
  
  import javax.swing.DefaultCellEditor;
! import javax.swing.JComboBox;
  import javax.swing.JTextField;
+ import javax.swing.KeyStroke;
+ import javax.swing.ListSelectionModel;
  import javax.swing.event.CellEditorListener;
  import javax.swing.event.ChangeEvent;
+ import javax.swing.event.ListSelectionEvent;
+ import javax.swing.table.DefaultTableCellRenderer;
  import javax.swing.table.DefaultTableColumnModel;
  import javax.swing.table.TableColumn;
+ 
  import java.awt.Color;
  import java.awt.Component;
+ import java.awt.event.ActionListener;
  import java.awt.event.FocusAdapter;
  import java.awt.event.FocusEvent;
  import java.awt.event.ItemListener;
***************
*** 24,39 ****
  import java.awt.event.InputEvent;
  import java.awt.event.ActionEvent;
  import java.awt.event.ItemEvent;
- import java.awt.event.MouseEvent;
- import java.awt.event.MouseListener;
  
  import java.sql.Connection;
  import java.sql.SQLException;
  import java.text.SimpleDateFormat;
  import java.util.ArrayList;
- import java.util.EventObject;
  import java.util.HashMap;
  import java.util.Hashtable;
  import java.util.Map;
  import java.util.List;
  import java.util.Calendar;
--- 24,39 ----
  import java.awt.event.InputEvent;
  import java.awt.event.ActionEvent;
  import java.awt.event.ItemEvent;
  
+ import java.io.IOException;
  import java.sql.Connection;
  import java.sql.SQLException;
+ import java.text.DecimalFormat;
  import java.text.SimpleDateFormat;
  import java.util.ArrayList;
  import java.util.HashMap;
  import java.util.Hashtable;
+ import java.util.Iterator;
  import java.util.Map;
  import java.util.List;
  import java.util.Calendar;
***************
*** 43,53 ****
  import java.awt.Dimension;
  import org.apache.log4j.Logger;
  
- import com.lowagie.text.pdf.TextField;
- 
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedComboBox;
! import jp.or.med.orca.jma_tokutei.common.component.ExtendedTextArea;
! import jp.or.med.orca.jma_tokutei.common.component.ExtendedTextField;
  import jp.or.med.orca.jma_tokutei.common.component.ImeController.ImeMode;
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
  import jp.or.med.orca.jma_tokutei.common.convert.JYearAge;
--- 43,50 ----
  import java.awt.Dimension;
  import org.apache.log4j.Logger;
  
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedComboBox;
! import jp.or.med.orca.jma_tokutei.common.component.ExtendedEditorPane;
  import jp.or.med.orca.jma_tokutei.common.component.ImeController.ImeMode;
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
  import jp.or.med.orca.jma_tokutei.common.convert.JYearAge;
***************
*** 55,60 ****
--- 52,58 ----
  import jp.or.med.orca.jma_tokutei.common.errormessage.RETURN_VALUE;
  import jp.or.med.orca.jma_tokutei.common.event.JEnterEvent;
  import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
+ import jp.or.med.orca.jma_tokutei.common.frame.JAddKikanInformationFrameCtrl;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  import jp.or.med.orca.jma_tokutei.common.sql.dao.DaoFactory;
  import jp.or.med.orca.jma_tokutei.common.sql.dao.TKensakekaSonotaDao;
***************
*** 69,74 ****
--- 67,73 ----
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTable;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellPosition;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellRendererData;
+ import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellRowRenderer;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableScrollPanel;
  import jp.or.med.orca.jma_tokutei.common.util.FiscalYearUtil;
  import jp.or.med.orca.jma_tokutei.common.validate.JValidate;
***************
*** 78,88 ****
  /**
   * 結果登録
   */
! public class JKekkaRegisterFrameCtrl extends JKekkaRegisterFrame implements ItemListener,KeyListener {
  
  	private static final int[] DEFAULT_COLUMNS_WIDTH = new int[] {
  		0, 140, 140, 80, 120, 120, 80,
  				80, 80, 80, 80, 50, 120 };
  	private static final String COLUMN_NAME_HISU_FLG = "HISU_FLG";
  	private static final String COLUMN_NAME_JYOUGEN = "JYOUGEN";
  	private static final String COLUMN_NAME_KAGEN = "KAGEN";
--- 77,96 ----
  /**
   * 結果登録
   */
! /**
!  * @author asc
!  *
!  */
! /**
!  * @author asc
!  *
!  */
! public class JKekkaRegisterFrameCtrl extends JKekkaRegisterFrame implements ItemListener {
  
  	private static final int[] DEFAULT_COLUMNS_WIDTH = new int[] {
  		0, 140, 140, 80, 120, 120, 80,
  				80, 80, 80, 80, 50, 120 };
+ 	private static final int COLUMN_INDEX_KEKA_MOJIRETSU = 5;
  	private static final String COLUMN_NAME_HISU_FLG = "HISU_FLG";
  	private static final String COLUMN_NAME_JYOUGEN = "JYOUGEN";
  	private static final String COLUMN_NAME_KAGEN = "KAGEN";
***************
*** 96,127 ****
  	private static final String COLUMN_NAME_DS_KAGEN = "DS_KAGEN";
  	private static final String COLUMN_NAME_CODE_NUM = "CODE_NUM";
  	private static final String COLUMN_NAME_CODE_NAME = "CODE_NAME";
  	private static final String COLUMN_NAME_KEKA_TI = "KEKA_TI";
  	private static final String COLUMN_NAME_MAX_BYTE_LENGTH = "MAX_BYTE_LENGTH";
  	private static final String COLUMN_NAME_DATA_TYPE = "DATA_TYPE";
  	private static final String COLUMN_NAME_KENSA_HOUHOU = "KENSA_HOUHOU";
  	private static final String COLUMN_NAME_KOUMOKUNAME = "KOUMOKUNAME";
  	private static final String COLUMN_NAME_KOUMOKUCD = "KOUMOKUCD";
! 
! 	// add s.inoue 2009/11/11
! 	private static final int COLUMN_IDX_KOUMOKUCD = 0;
! 	private static final int COLUMN_IDX_CODE_NAME = 1;
! 	private static final int COLUMN_IDX_CODE_KENSA_HOUHOU = 2;
! 	// edit s.inoue 2009/11/11
! //	private static final int COLUMN_IDX_KEKKA_VALUE = 3;
! 	private static final int COLUMN_IDX_KEKKA_NUM = 3;
! 	private static final int COLUMN_IDX_KEKKA_CODE = 4;
! 	private static final int COLUMN_IDX_KEKKA_STR = 5;
! 
! 	private static final int COLUMN_IDX_JISIKBN = 6;
! 	private static final int COLUMN_IDX_DS_KAGEN = 7;
! 	private static final int COLUMN_IDX_DS_JYOUGEN = 8;
! 	private static final int COLUMN_IDX_JS_KAGEN = 9;
! 	private static final int COLUMN_IDX_JS_JYOUGEN = 10;
! 	private static final int COLUMN_IDX_HL = 11;
! 	private static final int COLUMN_IDX_HANTEI = 12;
! 	private static final int COLUMN_IDX_KOMENTO = 13;
! 
  	private static final String CODE_SEIKATU_KAIZEN = "9N801000000000011";
  	private static final String CODE_HOKEN_SHIDOU = "9N806000000000011";
  	private static final String CODE_SAIKETSU_ZIKAN = "9N141000000000011";
--- 104,120 ----
  	private static final String COLUMN_NAME_DS_KAGEN = "DS_KAGEN";
  	private static final String COLUMN_NAME_CODE_NUM = "CODE_NUM";
  	private static final String COLUMN_NAME_CODE_NAME = "CODE_NAME";
+ 	private static final String CODE_TAIJU = "9N006000000000001";
+ 	private static final String CODE_SHINCHOU = "9N001000000000001";
+ 	private static final String CODE_BMI = "9N011000000000001";
  	private static final String COLUMN_NAME_KEKA_TI = "KEKA_TI";
  	private static final String COLUMN_NAME_MAX_BYTE_LENGTH = "MAX_BYTE_LENGTH";
  	private static final String COLUMN_NAME_DATA_TYPE = "DATA_TYPE";
  	private static final String COLUMN_NAME_KENSA_HOUHOU = "KENSA_HOUHOU";
  	private static final String COLUMN_NAME_KOUMOKUNAME = "KOUMOKUNAME";
  	private static final String COLUMN_NAME_KOUMOKUCD = "KOUMOKUCD";
! 	public final static int INSERT_MODE = 1;
! 	public final static int UPDATE_MODE = 2;
  	private static final String CODE_SEIKATU_KAIZEN = "9N801000000000011";
  	private static final String CODE_HOKEN_SHIDOU = "9N806000000000011";
  	private static final String CODE_SAIKETSU_ZIKAN = "9N141000000000011";
***************
*** 129,140 ****
  	private static final String CODE_ISHINOHANDAN_2 = "9N506000000000011";
  	private static final String CODE_ISHINOHANDAN_3 = "9N511000000000049";
  	private static final String CODE_ISHINOHANDAN_4 = "9N516000000000049";
- 	private static final String CODE_TAIJU = "9N006000000000001";
- 	private static final String CODE_SHINCHOU = "9N001000000000001";
- 	private static final String CODE_BMI = "9N011000000000001";
  
- 	public final static int INSERT_MODE = 1;
- 	public final static int UPDATE_MODE = 2;
  	private static final String strHighMessageValue = "上限値";
  	private static final String strLowMessageValue = "下限値";
  
--- 122,128 ----
***************
*** 151,236 ****
  		private ImeController imeController = null;
  		/**
  		 * コンストラクタ
! 		 * @param parent 健診結果データ入力画面
! 		 * @param textField 結果(文字列)セルのエディタ
  		 * @param 選択中セルのカラムインデックス
  		 */
! 		public PopupWindowShowCellEditor(JKekkaRegisterFrameCtrl parent,
! 				JTextField textField,int index) {
  			super(textField);
  
  			// add s.inoue 2009/10/14
  			imeController = new ImeController();
  			imeController.addFocusListenerForCharcterSubsets(textField, ImeMode.IME_ZENKAKU);
! 			cellEditorListener = new PopupWindowCellEditorListener(parent,index);
  			setClickCountToStart(1);
  		}
  	}
  
- 	// add s.inoue 2009/12/22
- 	// textfieldからtextareaへと移行
- 	public class PopupWindowShowTextAreaCellEditor extends AbstractCellEditor implements
- 	TableCellEditor, TableCellRenderer {
- 		  private PopupWindowCellEditorListener cellEditorListener;
- 		  private ImeController imeController = null;
- 
- 		  private JTextArea textArea;
- 		  private JScrollPane scroll;
- 
- 		  public PopupWindowShowTextAreaCellEditor(
- 				JKekkaRegisterFrameCtrl parent,
- 					ExtendedTextArea textAreas,
- 					int index) {
- 			// edit s.inoue 2009/12/24
- 			// textArea = new JTextArea();
- 			scroll = new JScrollPane(textAreas,
- 				JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED,
- 				JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
- 
- 			// add s.inoue 2009/10/14
- 			imeController = new ImeController();
- 			imeController.addFocusListenerForCharcterSubsets(scroll, ImeMode.IME_ZENKAKU);
- 			cellEditorListener = new PopupWindowCellEditorListener(parent,index);
- 		  }
- 
- 		  public JTextArea getTextArea(){
- 		    return textArea;
- 		  }
- 
- 		  public Object getCellEditorValue() {
- 		    return textArea.getText();
- 		  }
- 
- 		  public boolean shouldSelectCell(EventObject anEvent) {
- 		    return true;
- 		  }
- 
- 		  public boolean stopCellEditing() {
- 		    fireEditingStopped();
- 		    return true;
- 		  }
- 
- 		  public void cancelCellEditing() {
- 		    fireEditingCanceled();
- 		  }
- 
- 		  public Component getTableCellEditorComponent(JTable table, Object value,
- 		      boolean isSelected, int row, int column) {
- 			if (textArea == null)
- 				return null;
- 		    textArea.setText((value != null) ? value.toString() : "");
- 		    textArea.setCaretPosition(textArea.getText().length());
- 		    return scroll;
- 		  }
- 
- 		  public Component getTableCellRendererComponent(JTable table,
- 		   Object value, boolean isSelected, boolean hasFocus, int row, int column){
- 		    textArea.setText((value != null) ? value.toString() : "");
- 		    textArea.setCaretPosition(textArea.getText().length());
- 		    return scroll;
- 		  }
- 	}
- 
  	/**
  	 * テーブルの"結果(文字列)"欄DefaultCellEditorの 編集完了/ｷｬﾝｾﾙリスナークラス
  	 */
--- 139,170 ----
  		private ImeController imeController = null;
  		/**
  		 * コンストラクタ
! 		 *
! 		 * @param parent
! 		 *            健診結果データ入力画面
! 		 * @param textField
! 		 *            結果(文字列)セルのエディタ
  		 * @param 選択中セルのカラムインデックス
+ 		 * @param kekkaMojiretsu
+ 		 *            結果(文字列)
  		 */
! 		public PopupWindowShowCellEditor(
! 				JKekkaRegisterFrameCtrl parent,
! 				JTextField textField,
! 				int index) {
! 
  			super(textField);
  
  			// add s.inoue 2009/10/14
  			imeController = new ImeController();
  			imeController.addFocusListenerForCharcterSubsets(textField, ImeMode.IME_ZENKAKU);
! 
! 			cellEditorListener = new PopupWindowCellEditorListener(parent,
! 					index);
  			setClickCountToStart(1);
  		}
  	}
  
  	/**
  	 * テーブルの"結果(文字列)"欄DefaultCellEditorの 編集完了/ｷｬﾝｾﾙリスナークラス
  	 */
***************
*** 248,271 ****
  
  		/**
  		 * コンストラクタ
! 		 * @param parent 健診結果データ入力画面
! 		 * @param index 選択中セルのカラムインデックス
  		 */
! 		public PopupWindowCellEditorListener(JKekkaRegisterFrameCtrl parent,int index) {
  			this.parent = parent;
! 			dialog = JKekkaRegisterInputDialogFactory.createDialog(parent,index);
  		}
  
  		/**
  		 * 編集キャンセルイベントコールバック
! 		 * @param changeEvent 変更イベント
  		 */
  		public void editingCanceled(ChangeEvent changeEvent) {
  		}
  
  		/**
  		 * 編集完了イベントコールバック
! 		 * @param changeEvent 変更イベント
  		 */
  		public void editingStopped(ChangeEvent changeEvent) {
  
--- 182,214 ----
  
  		/**
  		 * コンストラクタ
! 		 *
! 		 * @param parent
! 		 *            健診結果データ入力画面
! 		 * @param index
! 		 *            選択中セルのカラムインデックス
  		 */
! 		public PopupWindowCellEditorListener(JKekkaRegisterFrameCtrl parent,
! 				int index) {
  			this.parent = parent;
! 			dialog = JKekkaRegisterInputDialogFactory.createDialog(parent,
! 					index);
  		}
  
  		/**
  		 * 編集キャンセルイベントコールバック
! 		 *
! 		 * @param changeEvent
! 		 *            変更イベント
  		 */
  		public void editingCanceled(ChangeEvent changeEvent) {
  		}
  
  		/**
  		 * 編集完了イベントコールバック
! 		 *
! 		 * @param changeEvent
! 		 *            変更イベント
  		 */
  		public void editingStopped(ChangeEvent changeEvent) {
  
***************
*** 279,293 ****
  			// "結果(文字列)"入力ダイアログ表示
  			dialog.setVisible(true);
  
! 			// edit s.inoue 2009/12/06
! 			// if (dialog.getStatus() != RETURN_VALUE.OK)
! 			if (dialog.getStatus() != RETURN_VALUE.YES)
  				return;
! 			// "結果(文字列)"入力ダイアログから入力された 文字列を選択セルにセット
  			parent.model.setData(dialog.getText(), rowIndex, columnIndex);
  		}
  	}
  
  	/**
  	 * 総合コメント欄キーリスナクラス
  	 */
--- 222,237 ----
  			// "結果(文字列)"入力ダイアログ表示
  			dialog.setVisible(true);
  
! 			if (dialog.getStatus() != RETURN_VALUE.OK)
  				return;
! 			// "結果(文字列)"入力ダイアログから入力された
! 			// 文字列を選択セルにセット
  			parent.model.setData(dialog.getText(), rowIndex, columnIndex);
  		}
  	}
  
+ 	// 総合コメント欄のキーリスナクラスを追加
+ 
  	/**
  	 * 総合コメント欄キーリスナクラス
  	 */
***************
*** 305,311 ****
  
  		/**
  		 * コンストラクタ
! 		 * @param parent 健診結果データ入力画面
  		 */
  		public SougouCommentKeyListener(JKekkaRegisterFrameCtrl parent) {
  			this.parent = parent;
--- 249,257 ----
  
  		/**
  		 * コンストラクタ
! 		 *
! 		 * @param parent
! 		 *            健診結果データ入力画面
  		 */
  		public SougouCommentKeyListener(JKekkaRegisterFrameCtrl parent) {
  			this.parent = parent;
***************
*** 314,319 ****
--- 260,266 ----
  		}
  
  		public void keyPressed(KeyEvent keyEvent) {
+ 
  			// Enterキー押下時
  			if (keyEvent.getKeyCode() == KeyEvent.VK_ENTER) {
  				// Shiftキーが一緒に押されたか?
***************
*** 325,331 ****
  				dialog.setText(comment);
  				// "結果(文字列)"入力ダイアログ表示
  				dialog.setVisible(true);
! 				if (dialog.getStatus() != RETURN_VALUE.YES)
  					return;
  				// "結果(文字列)"入力ダイアログから入力された
  				// 文字列を選択セルにセット
--- 272,278 ----
  				dialog.setText(comment);
  				// "結果(文字列)"入力ダイアログ表示
  				dialog.setVisible(true);
! 				if (dialog.getStatus() != RETURN_VALUE.OK)
  					return;
  				// "結果(文字列)"入力ダイアログから入力された
  				// 文字列を選択セルにセット
***************
*** 333,385 ****
  				/*
  				 * Modified 2008/03/13 若月 取得したテキストを、現在の入力内容に追加 するよう変更。
  				 */
! 				// edit s.inoue 2010/04/27
! 				// parent.jEditorPane_Comment.setText(comment + dialog.getText());
! 				parent.jEditorPane_Comment.setText(dialog.getText());
  			}
- 
- 			// del s.inoue 2010/04/27
- //			else if(keyEvent.getKeyCode() == KeyEvent.VK_F1){
- //				pushedEndButton(null);
- //			}
- //			else if(keyEvent.getKeyCode() == KeyEvent.VK_F2){
- //				pushedClearButton(null);
- //			}
- //			else if(keyEvent.getKeyCode() == KeyEvent.VK_F12){
- //				pushedRegisterButton(null);
- //			}
- 
- //			// Enterキー押下時
- //			// if (keyEvent.getKeyCode() == KeyEvent.VK_ENTER) {
- //			// add s.inoue 2009/12/03
- //			switch(keyEvent.getKeyCode()){
- //				case KeyEvent.VK_ENTER:
- //					// Shiftキーが一緒に押されたか?
- //					int modfiersKey = keyEvent.getModifiersEx();
- //					if ((modfiersKey & InputEvent.CTRL_DOWN_MASK) == 0)
- //						return;
- //					String comment = jEditorPane_Comment.getText();
- //					// "結果(文字列)"入力ダイアログのテキストエリアに選択セルデータをセット
- //					dialog.setText(comment);
- //					// "結果(文字列)"入力ダイアログ表示
- //					dialog.setVisible(true);
- //					// edit s.inoue 2009/12/06
- //					if (dialog.getStatus() != RETURN_VALUE.YES)
- //					// if (dialog.getStatus() != RETURN_VALUE.OK)
- //						return;
- //					/*
- //					 * 取得したテキストを、現在の入力内容に追加 するよう変更。
- //					 */
- //					parent.jEditorPane_Comment.setText(comment + dialog.getText());
- //					break;
- //// del s.inoue 2009/12/21
- ////				case KeyEvent.VK_F1:
- ////					pushedEndButton(null);break;
- ////				case KeyEvent.VK_F2:
- ////					pushedClearButton(null);break;
- ////				case KeyEvent.VK_F12:
- ////					pushedRegisterButton(null);break;
- //				}
  		}
  
  		public void keyReleased(KeyEvent keyEvent) {
--- 280,287 ----
  				/*
  				 * Modified 2008/03/13 若月 取得したテキストを、現在の入力内容に追加 するよう変更。
  				 */
! 				parent.jEditorPane_Comment.setText(comment + dialog.getText());
  			}
  		}
  
  		public void keyReleased(KeyEvent keyEvent) {
***************
*** 390,403 ****
  
  	}
  
! 	/**
! 	 * 結果(コード)欄のDefaultCellEditorクラスを追加
! 	 */
  	private class InputDigitHalfUpCellEditor extends DefaultCellEditor {
  		private ImeController imeController = null;
  		/**
  		 * コンストラクタ
! 		 * @param textField セルのDefaultEditor
  		 */
  		public InputDigitHalfUpCellEditor(final JTextField textField) {
  			super(textField);
--- 292,333 ----
  
  	}
  
! 
! //	private ImeController imeController = null;
! //	// 結果(文字IME)欄のDefaultCellEditorクラスを追加
! //	private class InputImeControlCellEditor extends DefaultTableCellRenderer  {
! //
! //		public Component getTableCellRendererComponent(JSimpleTable table, Object value,
! //                boolean isSelected, boolean hasFocus,
! //                int row, int column) {
! //			super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
! //			if (column == 3) {
! //				imeController = new ImeController();
! //				imeController.addFocusListenerForCharcterSubsets(value, mode);
! //			}
! //		}
! //	}
! 
! //	// 結果(コード)欄のDefaultCellEditorクラスを追加
! //	private class InputSelectComboCellEditor extends DefaultCellEditor {
! //		private ImeController imeController = null;
! //
! //		public InputSelectComboCellEditor(JComboBox comboBox) {
! //			super(comboBox);
! //			// add s.inoue 2009/10/14
! //			imeController = new ImeController();
! //			imeController.addFocusListenerForCharcterSubsets(comboBox, ImeMode.IME_OFF);
! //		}
! //	}
! 
! 	// 結果(コード)欄のDefaultCellEditorクラスを追加
  	private class InputDigitHalfUpCellEditor extends DefaultCellEditor {
  		private ImeController imeController = null;
  		/**
  		 * コンストラクタ
! 		 *
! 		 * @param textField
! 		 *            セルのDefaultEditor
  		 */
  		public InputDigitHalfUpCellEditor(final JTextField textField) {
  			super(textField);
***************
*** 413,426 ****
  
  				/**
  				 * 編集キャンセルイベントコールバック
! 				 * @param changeEvent 変更イベント
  				 */
  				public void editingCanceled(ChangeEvent changeEvent) {
  				}
  
  				/**
  				 * 編集完了イベントコールバック
! 				 * @param changeEvent 変更イベント
  				 */
  				public void editingStopped(ChangeEvent changeEvent) {
  
--- 343,360 ----
  
  				/**
  				 * 編集キャンセルイベントコールバック
! 				 *
! 				 * @param changeEvent
! 				 *            変更イベント
  				 */
  				public void editingCanceled(ChangeEvent changeEvent) {
  				}
  
  				/**
  				 * 編集完了イベントコールバック
! 				 *
! 				 * @param changeEvent
! 				 *            変更イベント
  				 */
  				public void editingStopped(ChangeEvent changeEvent) {
  
***************
*** 475,481 ****
--- 409,417 ----
  
  				/**
  				 * 妥当なフォーマット文字列か検証する
+ 				 *
  				 * @param rowIndex
+ 				 * @return
  				 */
  				private boolean isValidFormat(String format) {
  
***************
*** 571,576 ****
--- 507,513 ----
  
  	// Proxyとして管理する
  	private static jp.or.med.orca.jma_tokutei.common.csv.JCSVReaderStream Reader = null;
+ 	private static Vector<Vector<String>> CSVItems = null;
  	private int kenshinPatternNumber = -1;
  	private int prekenshinPatternNumber = -1;
  	private ArrayList<Hashtable<String, String>> tableResult = null;
***************
*** 587,599 ****
  	private String initialDate = null;
  	private boolean isCopy = false;
  
! 	// edit s.inoue 2009/12/10
! 	private ExtendedTextField textAreaField = null;
  
  	/**
  	 * コンストラクタ
! 	 * @param srcData このフレームのデータ
! 	 * @param kensaJissiDate 健診実施日
  	 */
  	public JKekkaRegisterFrameCtrl(
  			JKekkaListFrameData srcData,
--- 524,539 ----
  	private String initialDate = null;
  	private boolean isCopy = false;
  
! 	// add s.inoue 2009/10/23
! 	private JTextField textField = null;
  
  	/**
  	 * コンストラクタ
! 	 *
! 	 * @param srcData
! 	 *            このフレームのデータ
! 	 * @param kensaJissiDate
! 	 *            健診実施日
  	 */
  	public JKekkaRegisterFrameCtrl(
  			JKekkaListFrameData srcData,
***************
*** 621,627 ****
  
  		// 総合コメント欄にキーリスナ追加
  		jEditorPane_Comment.addKeyListener(new SougouCommentKeyListener(this));
- 
  		// add s.inoue 2009/10/01
  		this.jEditorPane_Comment.addFocusListener(new FocusAdapter(){
  			@Override
--- 561,566 ----
***************
*** 637,647 ****
  
  		/* フォーカス遷移を初期化する。 */
  		this.initializeFocusTraversal();
- 		// add s.inoue 2009/12/03
- 		functionListner();
  
  		/* Added 2008/03/12 若月 必須項目を指定の背景色に設定する */
! 		this.jTextField_Date.setBackground(ViewSettings.getRequiedItemBgColor());
  		this.jComboBox_Pattern.setBackground(ViewSettings.getRequiedItemBgColor());
  		this.jComboBox_SeikyuKubun.setBackground(ViewSettings.getRequiedItemBgColor());
  		// add h.yoshitama 2009/09/24
--- 576,586 ----
  
  		/* フォーカス遷移を初期化する。 */
  		this.initializeFocusTraversal();
  
  		/* Added 2008/03/12 若月 必須項目を指定の背景色に設定する */
! 		this.jTextField_Date
! 				.setBackground(ViewSettings.getRequiedItemBgColor());
! 
  		this.jComboBox_Pattern.setBackground(ViewSettings.getRequiedItemBgColor());
  		this.jComboBox_SeikyuKubun.setBackground(ViewSettings.getRequiedItemBgColor());
  		// add h.yoshitama 2009/09/24
***************
*** 655,686 ****
  			jTextField_SeiriNo.setVisible(true);
  			jLabelSeirino.setVisible(true);
  		}
- 	}
  
! 	// add s.inoue 2009/11/11
! 	// マウスリスナのメソッドを定義
! 	@Override
! 	public void mousePressed(MouseEvent e) {
! 		mousePopup(e);
! 	}
! 	@Override
! 	public void mouseReleased(MouseEvent e) {
! 		mousePopup(e);
! 	}
! 	// add s.inoue 2009/11/11
! 	private void mousePopup(MouseEvent e) {
! 		if (e.isPopupTrigger()) {
! 			// ポップアップメニューを表示する
! 			JComponent c = (JComponent)e.getSource();
! 			jEditorPane_Comment.showPopup(c, e.getX(), e.getY());
! 			e.consume();
! 		}
  	}
  	private boolean isNewKekkaData = false;
  
  	private void initializeComponents(JKekkaListFrameData srcData, String kensaJissiDate, boolean isCopy) {
  
  		Dimension size =ViewSettings.getFrameCommonSize();
  
  		this.setSize(size);
  		this.setPreferredSize(size);
--- 594,617 ----
  			jTextField_SeiriNo.setVisible(true);
  			jLabelSeirino.setVisible(true);
  		}
  
! //		// add ver2 s.inoue 2009/05/08
! //		TableColumnModel columns = model.getColumnModel();
! //        for(int i=0;i<columns.getColumnCount();i++) {
! //
! //            columns.getColumn(i).setCellRenderer(new JSimpleTableCellRowRenderer(
! //                (DefaultTableCellRenderer)model.getDefaultRenderer(model.getColumnClass(i))));
! //        }
  	}
+ 
  	private boolean isNewKekkaData = false;
  
  	private void initializeComponents(JKekkaListFrameData srcData, String kensaJissiDate, boolean isCopy) {
  
  		Dimension size =ViewSettings.getFrameCommonSize();
+ 		// edit s.inoue 2009/10/13
+ //		size.height += 30;
+ //		size.width +=40;
  
  		this.setSize(size);
  		this.setPreferredSize(size);
***************
*** 694,699 ****
--- 625,631 ----
  
  		/* 性別名の表示 */
  		jTextFieldsexName.setText(srcData.getSexName());
+ 
  		jTextField_HokenjyaCode.setEditable(false);
  		jTextField_HokenjyaNumber.setEditable(false);
  		jTextField_Name.setEditable(false);
***************
*** 702,717 ****
  		validatedData.setHihokenjyaNumber(jTextField_HokenjyaNumber.getText());
  
  		jTextFieldBirthDay.setText(srcData.getBirthDay());
! 
! 		// edit s.inoue 2010/03/16
! 		int age =0;
! 		if (!kensaJissiDate.equals("")){
! 			age = FiscalYearUtil.getFiscalYear(srcData.getBirthDay(),kensaJissiDate);
! 		}else{
! 			age = FiscalYearUtil.getFiscalYear(srcData.getBirthDay());
! 		}
! 		// jTextFieldNenrei.setText(JYearAge.getAge(jTextFieldBirthDay.getText()));
! 		jTextFieldNenrei.setText(String.valueOf(age));
  
  		validatedData.setUketuke_id(srcData.getUketuke_id());
  
--- 634,640 ----
  		validatedData.setHihokenjyaNumber(jTextField_HokenjyaNumber.getText());
  
  		jTextFieldBirthDay.setText(srcData.getBirthDay());
! 		jTextFieldNenrei.setText(JYearAge.getAge(jTextFieldBirthDay.getText()));
  
  		validatedData.setUketuke_id(srcData.getUketuke_id());
  
***************
*** 729,735 ****
  					connection,
  					kensakekaSonota);
  		} catch (Exception e) {
! 			logger.error(e.getMessage());
  			e.printStackTrace();
  		}
  
--- 652,658 ----
  					connection,
  					kensakekaSonota);
  		} catch (Exception e) {
! 			// 例外の扱いをどうするか？
  			e.printStackTrace();
  		}
  
***************
*** 805,818 ****
  		this.focusTraversalPolicy.addComponent(jButton_End);
  	}
  
- 	// add s.inoue 2009/12/03
- 	private void functionListner(){
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			Component comp = focusTraversalPolicy.getComponent(i);
- 			comp.addKeyListener(this);
- 		}
- 	}
- 
  	private void initializeTable() {
  
  		this.model = new JSimpleTable();
--- 728,733 ----
***************
*** 831,849 ****
  		/* 基準値下限(男性),基準値上限(男性),基準値下限(女性),基準値上限(女性)を */
  		/* テーブルに表示 */
  		this.model.addHeader("実施区分");
! 		this.model.addHeader("基準値下限（男性）");
! 		this.model.addHeader("基準値上限（男性）");
! 		this.model.addHeader("基準値下限（女性）");
! 		this.model.addHeader("基準値上限（女性）");
  		this.model.addHeader("H/L");
  		this.model.addHeader("判定");
  		this.model.addHeader("コメント");
  
  		// 入力下限/上限値を追加
! 		// del h.yoshitama 2009/11/05
! 
! //		this.model.addHeader("入力下限値");
! //		this.model.addHeader("入力上限値");
  
  		// 結果コード値のカラムをコンボボックスに
  		this.model.setCellComboBoxEditor(kekkaComboEditor, 4);
--- 746,762 ----
  		/* 基準値下限(男性),基準値上限(男性),基準値下限(女性),基準値上限(女性)を */
  		/* テーブルに表示 */
  		this.model.addHeader("実施区分");
! 		this.model.addHeader("基準値下限(男性)");
! 		this.model.addHeader("基準値上限(男性)");
! 		this.model.addHeader("基準値下限(女性)");
! 		this.model.addHeader("基準値上限(女性)");
  		this.model.addHeader("H/L");
  		this.model.addHeader("判定");
  		this.model.addHeader("コメント");
  
  		// 入力下限/上限値を追加
! 		this.model.addHeader("入力下限値");
! 		this.model.addHeader("入力上限値");
  
  		// 結果コード値のカラムをコンボボックスに
  		this.model.setCellComboBoxEditor(kekkaComboEditor, 4);
***************
*** 862,872 ****
  		kekkaCombo.addKeyListener(new KeyListener(){
  			@Override
  			public void keyPressed(KeyEvent e) {
! 				// edit s.inoue 2009/12/21
! 				switch(e.getKeyCode()){
! 				case KeyEvent.VK_ENTER:
! 					kekkaCombo.setSelectedIndex(kekkaCombo.getSelectedIndex());break;
! 				}
  			}
  			@Override
  			public void keyReleased(KeyEvent e) {}
--- 775,783 ----
  		kekkaCombo.addKeyListener(new KeyListener(){
  			@Override
  			public void keyPressed(KeyEvent e) {
! 				if(e.getKeyCode() == KeyEvent.VK_ENTER){
! 					kekkaCombo.setSelectedIndex(kekkaCombo.getSelectedIndex());
! 				 }
  			}
  			@Override
  			public void keyReleased(KeyEvent e) {}
***************
*** 878,888 ****
  		hanteiCombo.addKeyListener(new KeyListener(){
  			@Override
  			public void keyPressed(KeyEvent e) {
! 				// edit s.inoue 2009/12/21
! 				switch(e.getKeyCode()){
! 				case KeyEvent.VK_ENTER:
! 					hanteiCombo.setSelectedIndex(hanteiCombo.getSelectedIndex());break;
! 				}
  			}
  			@Override
  			public void keyReleased(KeyEvent e) {}
--- 789,797 ----
  		hanteiCombo.addKeyListener(new KeyListener(){
  			@Override
  			public void keyPressed(KeyEvent e) {
! 				if(e.getKeyCode() == KeyEvent.VK_ENTER){
! 					hanteiCombo.setSelectedIndex(hanteiCombo.getSelectedIndex());
! 				 }
  			}
  			@Override
  			public void keyReleased(KeyEvent e) {}
***************
*** 894,904 ****
  		hlCombo.addKeyListener(new KeyListener(){
  			@Override
  			public void keyPressed(KeyEvent e) {
! 				// edit s.inoue 2009/12/21
! 				switch(e.getKeyCode()){
! 				case KeyEvent.VK_ENTER:
! 					hlCombo.setSelectedIndex(hlCombo.getSelectedIndex());break;
! 				}
  			}
  			@Override
  			public void keyReleased(KeyEvent e) {}
--- 803,811 ----
  		hlCombo.addKeyListener(new KeyListener(){
  			@Override
  			public void keyPressed(KeyEvent e) {
! 				if(e.getKeyCode() == KeyEvent.VK_ENTER){
! 					hlCombo.setSelectedIndex(hlCombo.getSelectedIndex());
! 				 }
  			}
  			@Override
  			public void keyReleased(KeyEvent e) {}
***************
*** 910,920 ****
  		jisiCombo.addKeyListener(new KeyListener(){
  			@Override
  			public void keyPressed(KeyEvent e) {
! 				// edit s.inoue 2009/12/21
! 				switch(e.getKeyCode()){
! 				case KeyEvent.VK_ENTER:
! 					jisiCombo.setSelectedIndex(jisiCombo.getSelectedIndex());break;
! 				}
  			}
  			@Override
  			public void keyReleased(KeyEvent e) {}
--- 817,825 ----
  		jisiCombo.addKeyListener(new KeyListener(){
  			@Override
  			public void keyPressed(KeyEvent e) {
! 				if(e.getKeyCode() == KeyEvent.VK_ENTER){
! 					jisiCombo.setSelectedIndex(jisiCombo.getSelectedIndex());
! 				 }
  			}
  			@Override
  			public void keyReleased(KeyEvent e) {}
***************
*** 922,938 ****
  			public void keyTyped(KeyEvent e) {}
  		});
  
! 		// edit s.inoue 2009/11/11
  		/* 基準値下限(男性),基準値上限(男性),基準値下限(女性),基準値上限(女性)を */
  		/* テーブルに表示 */
  		// 実施区分
! 		this.model.setCellComboBoxEditor(jisiComboEditor, COLUMN_IDX_JISIKBN);
  
  		// 判定結果のカラムをコンボボックスに
! 		this.model.setCellComboBoxEditor(hanteiComboEditor, COLUMN_IDX_HANTEI);
  
  		// HLのカラムをコンボボックスに
! 		this.model.setCellComboBoxEditor(hlComboEditor, COLUMN_IDX_HL);
  	}
  
  	private void initializeComboBox() {
--- 827,846 ----
  			public void keyTyped(KeyEvent e) {}
  		});
  
! 
  		/* 基準値下限(男性),基準値上限(男性),基準値下限(女性),基準値上限(女性)を */
  		/* テーブルに表示 */
  		// 実施区分
! 		this.model.setCellComboBoxEditor(jisiComboEditor, 6);
  
  		// 判定結果のカラムをコンボボックスに
! 		//	edit s.inoue 20080908 番号ずれ 10⇒12
! 		this.model.setCellComboBoxEditor(hanteiComboEditor, 12);
  
  		// HLのカラムをコンボボックスに
! 		//	edit s.inoue 20080908 番号ずれ 10⇒11
! 		this.model.setCellComboBoxEditor(hlComboEditor, 11);
! 		/* --------------------------------------------------- */
  	}
  
  	private void initializeComboBox() {
***************
*** 969,980 ****
  	private void initializeColumnWidth() {
  		this.model.setAutoResizeMode(JSimpleTable.AUTO_RESIZE_OFF);
  
! 		DefaultTableColumnModel columnModel = (DefaultTableColumnModel) this.model.getColumnModel();
! 		// edit s.inoue 2009/11/11
! 		columnModel.getColumn(COLUMN_IDX_KOUMOKUCD).setMinWidth(0);
! 		columnModel.getColumn(COLUMN_IDX_KOUMOKUCD).setPreferredWidth(0);
! 		columnModel.getColumn(COLUMN_IDX_KOUMOKUCD).setMaxWidth(0);
! 		columnModel.getColumn(COLUMN_IDX_KOUMOKUCD).setWidth(0);
  	}
  
  	/** 20081224 s.inoue add CSV⇒DBへ変更
--- 877,888 ----
  	private void initializeColumnWidth() {
  		this.model.setAutoResizeMode(JSimpleTable.AUTO_RESIZE_OFF);
  
! 		DefaultTableColumnModel columnModel = (DefaultTableColumnModel) this.model
! 				.getColumnModel();
! 		columnModel.getColumn(0).setMinWidth(0);
! 		columnModel.getColumn(0).setPreferredWidth(0);
! 		columnModel.getColumn(0).setMaxWidth(0);
! 		columnModel.getColumn(0).setWidth(0);
  	}
  
  	/** 20081224 s.inoue add CSV⇒DBへ変更
***************
*** 1175,1183 ****
  		}
  		RETURN_VALUE Ret = JErrorMessage.show("M3622", this);
  		if (Ret == RETURN_VALUE.YES) {
! 			// edit s.inoue 2010/04/21
! 			if(this.register())
! 			dispose();
  		}
  	}
  
--- 1083,1089 ----
  		}
  		RETURN_VALUE Ret = JErrorMessage.show("M3622", this);
  		if (Ret == RETURN_VALUE.YES) {
! 			this.register();
  		}
  	}
  
***************
*** 1357,1421 ****
  	 * アクションの更新
  	 */
  	private void refreshCellAction(){
! 		// edit s.inoue 2009/12/24
! 		textAreaField = new ExtendedTextField("", 0, ImeMode.IME_ZENKAKU,false);
! 		TableColumn column = this.model.getColumnModel().getColumn(COLUMN_IDX_KEKKA_STR);
  
- // edit s.inoue 2009/12/24
  		column.setCellEditor(
  				new PopupWindowShowCellEditor(
  						this,
! 						textAreaField,
! 						COLUMN_IDX_KEKKA_STR));
! 
! // 改行複数モードだが、enter処理に困惑
! //		column.setCellEditor(
! //		new PopupWindowShowTextAreaCellEditor(
! //				this,
! //				textAreaField,
! //				COLUMN_IDX_KEKKA_STR));
! 
! 
! //		textField.addMouseListener(new MouseListener(){
! //			// add s.inoue 2009/11/11
! //			public void mousePressed(MouseEvent e) {
! //				mousePopup(e);
! //			}
! //			public void mouseReleased(MouseEvent e) {
! //				mousePopup(e);
! //			}
! //			// add s.inoue 2009/11/11
! //			private void mousePopup(MouseEvent e) {
! //				if (e.isPopupTrigger()) {
! //					// ポップアップメニューを表示する
! //					JComponent c = (JComponent)e.getSource();
! //					jKekkaMojiretsuTextArea.showPopup(c, e.getX(), e.getY());
! //					e.consume();
! //				}
! //			}
! //			@Override
! //			public void mouseClicked(MouseEvent e) {
! //			}
! //			@Override
! //			public void mouseEntered(MouseEvent e) {
! //			}
! //			@Override
! //			public void mouseExited(MouseEvent e) {
! //			}
! //		});
  
! 		// add s.inoue 2010/04/27
! 		final IKekkaRegisterInputDialog dialog =
! 			JKekkaRegisterInputDialogFactory.createDialog(
! 					JKekkaRegisterFrameCtrl.this,12);
! 
! 		// edit s.inoue 2009/12/22
! 		// COLUMN_IDX_KEKKA_STR→12
! 		textAreaField.addKeyListener(new KeyAdapter(){
! 		// move s.inoue 2010/04/27
! //			IKekkaRegisterInputDialog dialog =
! //				JKekkaRegisterInputDialogFactory.createDialog(
! //						JKekkaRegisterFrameCtrl.this,12);
  
  			@Override
  			public void keyPressed(KeyEvent keyEvent) {
--- 1263,1282 ----
  	 * アクションの更新
  	 */
  	private void refreshCellAction(){
! 		// edit s.inoue 2009/10/28
! 		textField = new JTextField();
! 		TableColumn column = this.model.getColumnModel().getColumn(5);
  
  		column.setCellEditor(
  				new PopupWindowShowCellEditor(
  						this,
! 						textField,
! 						COLUMN_INDEX_KEKA_MOJIRETSU));
  
! 		textField.addKeyListener(new KeyAdapter(){
! 			IKekkaRegisterInputDialog dialog =
! 				JKekkaRegisterInputDialogFactory.createDialog(
! 						JKekkaRegisterFrameCtrl.this,5);
  
  			@Override
  			public void keyPressed(KeyEvent keyEvent) {
***************
*** 1437,1451 ****
  						dialog.setText(kekkaMojiretsu);
  						// "結果(文字列)"入力ダイアログ表示
  						dialog.setVisible(true);
! 						// edit s.inoue 2009/12/06
! 						// if (dialog.getStatus() == RETURN_VALUE.OK){
! 						if (dialog.getStatus() == RETURN_VALUE.YES){
  							// "結果(文字列)"入力ダイアログから入力された
  							// 文字列を選択セルにセット
! 							// edit s.inoue 2009/12/22
! 							// String dialogtxt = dialog.getText().replaceAll("\n", "\r");
! 							// textField.setText(dialogtxt);
! 							textAreaField.setText(dialog.getText());
  						}
  					}
  				}
--- 1298,1308 ----
  						dialog.setText(kekkaMojiretsu);
  						// "結果(文字列)"入力ダイアログ表示
  						dialog.setVisible(true);
! 
! 						if (dialog.getStatus() == RETURN_VALUE.OK){
  							// "結果(文字列)"入力ダイアログから入力された
  							// 文字列を選択セルにセット
! 							textField.setText(dialog.getText());
  						}
  					}
  				}
***************
*** 1476,1484 ****
  		String query = this.createCellDataSql(preview);
  		try {
  			tableResult = JApplication.kikanDatabase.sendExecuteQuery(query);
! 		} catch (SQLException e) {
! 			e.printStackTrace();
! 			logger.error(e.getMessage());
  		}
  
  		/* セルの色を更新する。 */
--- 1333,1340 ----
  		String query = this.createCellDataSql(preview);
  		try {
  			tableResult = JApplication.kikanDatabase.sendExecuteQuery(query);
! 		} catch (SQLException f) {
! 			f.printStackTrace();
  		}
  
  		/* セルの色を更新する。 */
***************
*** 1510,1515 ****
--- 1366,1401 ----
  		column = this.model.getColumnModel().getColumn(3);
  		column.setCellEditor(new InputDigitHalfUpCellEditor(new JTextField()));
  
+ 		// del s.inoue 2009/10/15
+ 		// 結果(コード)欄の制御
+ //		final JComboBox comboBox = new JComboBox();
+ //		column = this.model.getColumnModel().getColumn(4);
+ //		column.setCellEditor(new InputSelectComboCellEditor(new JComboBox()));
+ //		comboBox.addKeyListener(new KeyAdapter(){
+ ////			IKekkaRegisterInputDialog dialog =
+ ////				JKekkaRegisterInputDialogFactory.createDialog(
+ ////						JKekkaRegisterFrameCtrl.this,4);
+ //
+ //			@Override
+ //			public void keyPressed(KeyEvent keyEvent) {
+ //
+ //				if (keyEvent.getKeyCode() == KeyEvent.VK_ENTER) {
+ //					System.out.println("成功");
+ //					// Shiftキーが一緒に押されたか?
+ //					int modfiersKey = keyEvent.getModifiersEx();
+ //
+ //					if ((modfiersKey & InputEvent.CTRL_DOWN_MASK) == 0){
+ //						return;
+ //					}else{
+ //						// 健診結果データ入力画面のテーブルから現在選択されているセルのデータを取得
+ //						int columnIndex = model.getSelectedColumn();
+ //						int rowIndex = model.getSelectedRow();
+ //
+ //					}
+ //				}
+ //			}
+ //		});
+ 
  		/* 身長、体重、BMIのセル位置をクリアする。 */
  		BMICellPosition = null;
  		heightCellPosition = null;
***************
*** 1541,1546 ****
--- 1427,1435 ----
  				// ＢＭＩ値の場合は編集できないようにする
  				if (databaseItem.get(COLUMN_NAME_KOUMOKUCD).equals(CODE_BMI)) {
  					forbitCells.add(new JSimpleTableCellPosition(i, 3));
+ 					// add s.inoue 2009/10/14
+ //					cellColors.add(new JSimpleTableCellRendererData(COLOR_DISABLE,
+ //							new JSimpleTableCellPosition(i, 3)));
  
  					BMICellPosition = new JSimpleTableCellPosition(i, 3);
  					BMIFormat = new String(databaseItem.get(COLUMN_NAME_MAX_BYTE_LENGTH));
***************
*** 1556,1561 ****
--- 1445,1451 ----
  				if (databaseItem.get(COLUMN_NAME_KOUMOKUCD).equals(CODE_TAIJU)) {
  					weightCellPosition = new JSimpleTableCellPosition(i, 3);
  				}
+ 
  				break;
  
  			case 2:
***************
*** 1571,1577 ****
  					codeResult = JApplication.kikanDatabase.sendExecuteQuery(query);
  				} catch (SQLException e) {
  					e.printStackTrace();
! 					logger.error(e.getMessage());
  				}
  
  				kekkaComboEditor.delItems(i);
--- 1461,1467 ----
  					codeResult = JApplication.kikanDatabase.sendExecuteQuery(query);
  				} catch (SQLException e) {
  					e.printStackTrace();
! 					logger.warn(e.getMessage());
  				}
  
  				kekkaComboEditor.delItems(i);
***************
*** 1871,1876 ****
--- 1761,1789 ----
  		this.setTableFocusMap();
  	}
  
+ //	private void saveRowCheckStatus() {
+ //		/* 行頭のチェック状態を保存する。 */
+ //		int rowCount = this.model.getRowCount();
+ //		this.rowChecks = new boolean[rowCount];
+ //		for (int i = 0; i < rowCount; i++) {
+ //			int COLMN_INDEX_CHECK = 0;
+ //			boolean isChecked = (Boolean)this.model.getData(i, COLMN_INDEX_CHECK);
+ //			this.rowChecks[i] = isChecked;
+ //		}
+ //	}
+ //
+ //	private void recoverRowCheckStatus() {
+ //		/* 行頭のチェック状態を保存する。 */
+ //		int rowCount = this.model.getRowCount();
+ //		this.rowChecks = new boolean[rowCount];
+ //
+ //		for (int i = 0; i < rowCount; i++) {
+ //			int COLMN_INDEX_CHECK = 0;
+ //			boolean isChecked = (Boolean)this.model.getData(i, COLMN_INDEX_CHECK);
+ //			this.rowChecks[i] = isChecked;
+ //		}
+ //	}
+ 
  	private void saveCurrentColumnsWidth() {
  		/* 列幅を保存しておく */
  		int columnCount = this.model.getColumnCount();
***************
*** 1902,2013 ****
  			{
  			case 1:
  				// 数値の場合
! 				// edit s.inoue 2009/11/11
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_KOUMOKUCD));
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_CODE_NAME));
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_CODE_KENSA_HOUHOU));
  
  				// edit h.yoshitama 2009/09/18
  				if (hisuFlg == HISU_FLG_HISU) {
! 					cellColors.add(new JSimpleTableCellRendererData(COLOR_HISU,new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_NUM)));
  				}else{
! 					cellColors.add(new JSimpleTableCellRendererData(COLOR_ABLE,new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_NUM)));
  				}
  
! 				cellColors.add(new JSimpleTableCellRendererData(COLOR_DISABLE,new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_CODE)));
! 				cellColors.add(new JSimpleTableCellRendererData(COLOR_DISABLE,new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_STR)));
  
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_CODE));
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_STR));
  
! 				cellColors.add(new JSimpleTableCellRendererData(COLOR_HISU,new JSimpleTableCellPosition(i, COLUMN_IDX_JISIKBN)));
  
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_DS_KAGEN));
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_DS_JYOUGEN));
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_JS_KAGEN));
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_JS_JYOUGEN));
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_HL));
  				// edit s.inoue 20080908 6-11⇒7-12
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_HANTEI));
! 				cellColors.add(new JSimpleTableCellRendererData(COLOR_ABLE,new JSimpleTableCellPosition(i, COLUMN_IDX_KOMENTO)));
  				break;
  
  			case 2:
  				// コードの場合
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_KOUMOKUCD));
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_CODE_NAME));
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_CODE_KENSA_HOUHOU));
  
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_NUM));
  
  				cellColors.add(new JSimpleTableCellRendererData(COLOR_DISABLE,
! 						new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_NUM)));
  
  				// edit h.yoshitama 2009/09/18
  				if (hisuFlg == HISU_FLG_HISU) {
  					cellColors.add(new JSimpleTableCellRendererData(COLOR_HISU,
! 							new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_CODE)));
  				}else{
! 					cellColors.add(new JSimpleTableCellRendererData(COLOR_ABLE,new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_CODE)));
  				}
  
! 				cellColors.add(new JSimpleTableCellRendererData(COLOR_DISABLE,new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_STR)));
  
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_STR));
  
! 				cellColors.add(new JSimpleTableCellRendererData(COLOR_HISU,new JSimpleTableCellPosition(i, COLUMN_IDX_JISIKBN)));
  
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_DS_KAGEN));
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_DS_JYOUGEN));
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_JS_KAGEN));
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_JS_JYOUGEN));
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_HL));
  				// edit s.inoue 20080908 6-11⇒7-12
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_HANTEI));
  				// add h.yoshitama 2009/09/18
! 				cellColors.add(new JSimpleTableCellRendererData(COLOR_ABLE,new JSimpleTableCellPosition(i, COLUMN_IDX_KOMENTO)));
  				break;
  
  			case 3:
  				// 文字列の場合
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_KOUMOKUCD));
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_CODE_NAME));
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_CODE_KENSA_HOUHOU));
  
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_NUM));
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_CODE));
  
  				cellColors.add(new JSimpleTableCellRendererData(COLOR_DISABLE,
! 						new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_NUM)));
  				cellColors.add(new JSimpleTableCellRendererData(COLOR_DISABLE,
! 						new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_CODE)));
  
  				// edit h.yoshitama 2009/09/18
  				if (hisuFlg == HISU_FLG_HISU) {
  					cellColors.add(new JSimpleTableCellRendererData(COLOR_HISU,
! 							new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_STR)));
  
  				}else{
! 					cellColors.add(new JSimpleTableCellRendererData(COLOR_ABLE,new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_STR)));
  				}
  
  				cellColors.add(new JSimpleTableCellRendererData(COLOR_HISU,
! 						new JSimpleTableCellPosition(i, COLUMN_IDX_JISIKBN)));
  
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_DS_KAGEN));
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_DS_JYOUGEN));
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_JS_KAGEN));
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_JS_JYOUGEN));
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_HL));
  				// edit s.inoue 20080908 6-11⇒7-12
! 				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_HANTEI));
  				// add h.yoshitama 2009/09/18
! 				cellColors.add(new JSimpleTableCellRendererData(COLOR_ABLE,new JSimpleTableCellPosition(i, COLUMN_IDX_KOMENTO)));
  				break;
  			}
! 			// del s.inoue 2009/11/11
! 			// forbitCells.add(new JSimpleTableCellPosition(i, 14));
! 			// forbitCells.add(new JSimpleTableCellPosition(i, 15));
  
  		}
  
--- 1815,1929 ----
  			{
  			case 1:
  				// 数値の場合
! 				forbitCells.add(new JSimpleTableCellPosition(i, 0));
! 				forbitCells.add(new JSimpleTableCellPosition(i, 1));
! 				forbitCells.add(new JSimpleTableCellPosition(i, 2));
  
  				// edit h.yoshitama 2009/09/18
  				if (hisuFlg == HISU_FLG_HISU) {
! 					cellColors.add(new JSimpleTableCellRendererData(COLOR_HISU,new JSimpleTableCellPosition(i, 3)));
  				}else{
! 					// edit s.inoue 2009/09/20
! 					cellColors.add(new JSimpleTableCellRendererData(COLOR_ABLE,new JSimpleTableCellPosition(i, 3)));
  				}
  
! 				cellColors.add(new JSimpleTableCellRendererData(COLOR_DISABLE,new JSimpleTableCellPosition(i, 4)));
! 				cellColors.add(new JSimpleTableCellRendererData(COLOR_DISABLE,new JSimpleTableCellPosition(i, 5)));
  
! 				forbitCells.add(new JSimpleTableCellPosition(i, 4));
! 				forbitCells.add(new JSimpleTableCellPosition(i, 5));
  
! 				cellColors.add(new JSimpleTableCellRendererData(COLOR_HISU,new JSimpleTableCellPosition(i, 6)));
  
! 				forbitCells.add(new JSimpleTableCellPosition(i, 7));
! 				forbitCells.add(new JSimpleTableCellPosition(i, 8));
! 				forbitCells.add(new JSimpleTableCellPosition(i, 9));
! 				forbitCells.add(new JSimpleTableCellPosition(i, 10));
! 				forbitCells.add(new JSimpleTableCellPosition(i, 11));
  				// edit s.inoue 20080908 6-11⇒7-12
! 				forbitCells.add(new JSimpleTableCellPosition(i, 12));
! 				cellColors.add(new JSimpleTableCellRendererData(COLOR_ABLE,new JSimpleTableCellPosition(i, 13)));
  				break;
  
  			case 2:
  				// コードの場合
! 				forbitCells.add(new JSimpleTableCellPosition(i, 0));
! 				forbitCells.add(new JSimpleTableCellPosition(i, 1));
! 				forbitCells.add(new JSimpleTableCellPosition(i, 2));
  
! 				forbitCells.add(new JSimpleTableCellPosition(i, 3));
  
  				cellColors.add(new JSimpleTableCellRendererData(COLOR_DISABLE,
! 						new JSimpleTableCellPosition(i, 3)));
  
  				// edit h.yoshitama 2009/09/18
  				if (hisuFlg == HISU_FLG_HISU) {
  					cellColors.add(new JSimpleTableCellRendererData(COLOR_HISU,
! 							new JSimpleTableCellPosition(i, 4)));
  				}else{
! 					cellColors.add(new JSimpleTableCellRendererData(COLOR_ABLE,new JSimpleTableCellPosition(i, 4)));
  				}
  
! 				cellColors.add(new JSimpleTableCellRendererData(COLOR_DISABLE,
! 						new JSimpleTableCellPosition(i, 5)));
  
! 				forbitCells.add(new JSimpleTableCellPosition(i, 5));
  
! 				cellColors.add(new JSimpleTableCellRendererData(COLOR_HISU,
! 						new JSimpleTableCellPosition(i, 6)));
  
! 				forbitCells.add(new JSimpleTableCellPosition(i, 7));
! 				forbitCells.add(new JSimpleTableCellPosition(i, 8));
! 				forbitCells.add(new JSimpleTableCellPosition(i, 9));
! 				forbitCells.add(new JSimpleTableCellPosition(i, 10));
! 				forbitCells.add(new JSimpleTableCellPosition(i, 11));
  				// edit s.inoue 20080908 6-11⇒7-12
! 				forbitCells.add(new JSimpleTableCellPosition(i, 12));
  				// add h.yoshitama 2009/09/18
! 				cellColors.add(new JSimpleTableCellRendererData(COLOR_ABLE,new JSimpleTableCellPosition(i, 13)));
  				break;
  
  			case 3:
  				// 文字列の場合
! 				forbitCells.add(new JSimpleTableCellPosition(i, 0));
! 				forbitCells.add(new JSimpleTableCellPosition(i, 1));
! 				forbitCells.add(new JSimpleTableCellPosition(i, 2));
  
! 				forbitCells.add(new JSimpleTableCellPosition(i, 3));
! 				forbitCells.add(new JSimpleTableCellPosition(i, 4));
  
  				cellColors.add(new JSimpleTableCellRendererData(COLOR_DISABLE,
! 						new JSimpleTableCellPosition(i, 3)));
  				cellColors.add(new JSimpleTableCellRendererData(COLOR_DISABLE,
! 						new JSimpleTableCellPosition(i, 4)));
  
  				// edit h.yoshitama 2009/09/18
  				if (hisuFlg == HISU_FLG_HISU) {
  					cellColors.add(new JSimpleTableCellRendererData(COLOR_HISU,
! 							new JSimpleTableCellPosition(i, 5)));
  
  				}else{
! 					cellColors.add(new JSimpleTableCellRendererData(COLOR_ABLE,new JSimpleTableCellPosition(i, 5)));
  				}
  
  				cellColors.add(new JSimpleTableCellRendererData(COLOR_HISU,
! 						new JSimpleTableCellPosition(i, 6)));
  
! 				forbitCells.add(new JSimpleTableCellPosition(i, 7));
! 				forbitCells.add(new JSimpleTableCellPosition(i, 8));
! 				forbitCells.add(new JSimpleTableCellPosition(i, 9));
! 				forbitCells.add(new JSimpleTableCellPosition(i, 10));
! 				forbitCells.add(new JSimpleTableCellPosition(i, 11));
  				// edit s.inoue 20080908 6-11⇒7-12
! 				forbitCells.add(new JSimpleTableCellPosition(i, 12));
  				// add h.yoshitama 2009/09/18
! 				cellColors.add(new JSimpleTableCellRendererData(COLOR_ABLE,new JSimpleTableCellPosition(i, 13)));
  				break;
  			}
! 			//forbitCells.add(new JSimpleTableCellPosition(i, 13));
! 			//forbitCells.add(new JSimpleTableCellPosition(i, 14));
! 			forbitCells.add(new JSimpleTableCellPosition(i, 14));
! 			forbitCells.add(new JSimpleTableCellPosition(i, 15));
  
  		}
  
***************
*** 2016,2024 ****
  		 * 順番を入れ替えると正常に動作しない可能性があるため注意
  		 */
  		this.model.setCellEditForbid(forbitCells);
! 		// edit s.inoue 2009/11/11
! 		this.model.setCellComboBoxEditor(kekkaComboEditor, COLUMN_IDX_KEKKA_CODE);
! 		this.model.setCellComboBoxEditor(jisiComboEditor, COLUMN_IDX_JISIKBN);
  	}
  
  	private void showKaisoukaResult(boolean preview) {
--- 1932,1939 ----
  		 * 順番を入れ替えると正常に動作しない可能性があるため注意
  		 */
  		this.model.setCellEditForbid(forbitCells);
! 		this.model.setCellComboBoxEditor(kekkaComboEditor, 4);
! 		this.model.setCellComboBoxEditor(jisiComboEditor, 6);
  	}
  
  	private void showKaisoukaResult(boolean preview) {
***************
*** 2806,2817 ****
  										.setHihokenjyaCode(jTextField_HokenjyaCode.getText())
  										&& validatedData.setHihokenjyaNumber(jTextField_HokenjyaNumber.getText())
  										&& validatedData.setKensaJissiDate(jissiDate)
! 										// edit s.inoue 2009/11/11
! 										&& validatedData.setKensaKoumokuCode((String) this.model.getData(i, COLUMN_IDX_KOUMOKUCD))
! 										&& validatedData.setComment((String) this.model.getData(i, COLUMN_IDX_KOMENTO))
! 										&& validatedData.setHL((String) this.model.getData(i, COLUMN_IDX_HL))
! 										&& validatedData.setHantei((String) this.model.getData(i, COLUMN_IDX_HANTEI))
! 										&& validatedData.setChkText((String) this.model.getData(i, COLUMN_IDX_JISIKBN)));
  
  								// 結果値に関する検証
  								ResultItem = tableResult.get(i);
--- 2721,2733 ----
  										.setHihokenjyaCode(jTextField_HokenjyaCode.getText())
  										&& validatedData.setHihokenjyaNumber(jTextField_HokenjyaNumber.getText())
  										&& validatedData.setKensaJissiDate(jissiDate)
! 										&& validatedData.setKensaKoumokuCode((String) this.model.getData(i, 0))
! 
! 										// edit s.inoue 20080908 番号ずれ 12⇒13,10⇒11,11⇒12
! 										&& validatedData.setComment((String) this.model.getData(i, 13))
! 										&& validatedData.setHL((String) this.model.getData(i, 11))
! 										&& validatedData.setHantei((String) this.model.getData(i, 12))
! 										&& validatedData.setChkText((String) this.model.getData(i, 6)));
  
  								// 結果値に関する検証
  								ResultItem = tableResult.get(i);
***************
*** 2822,2836 ****
  								switch (Integer.valueOf(ResultItem.get(COLUMN_NAME_DATA_TYPE))) {
  								case 1:
  									// 数値の場合
- 									// edit s.inoue 2009/11/11
  									isKekkaValidated
! 										= validatedData.setKekkaDecimal((String) this.model.getData(i, COLUMN_IDX_KEKKA_NUM),
  										ResultItem.get(COLUMN_NAME_MAX_BYTE_LENGTH));
  
  									if (isKekkaValidated) {
  										isCheckCSV = true;
  										String retMessage = getHighLawMessage(
! 											(String)this.model.getData(i,COLUMN_IDX_KOUMOKUCD),
  											koumokuName,
  											validatedData.getHokenjyaNumber(),
  											validatedData.getKekka());
--- 2738,2751 ----
  								switch (Integer.valueOf(ResultItem.get(COLUMN_NAME_DATA_TYPE))) {
  								case 1:
  									// 数値の場合
  									isKekkaValidated
! 										= validatedData.setKekkaDecimal((String) this.model.getData(i, 3),
  										ResultItem.get(COLUMN_NAME_MAX_BYTE_LENGTH));
  
  									if (isKekkaValidated) {
  										isCheckCSV = true;
  										String retMessage = getHighLawMessage(
! 											(String)this.model.getData(i,0),
  											koumokuName,
  											validatedData.getHokenjyaNumber(),
  											validatedData.getKekka());
***************
*** 2854,2861 ****
  									} catch (SQLException e) {
  										logger.warn(e.getMessage());
  									}
! 									// edit s.inoue 2009/11/11
! 									if (this.model.getData(i).get(COLUMN_IDX_KEKKA_CODE).equals("")) {
  										isKekkaValidated = validatedData.setKekkaCode("");
  										isCheckCSV = true;
  										break;
--- 2769,2776 ----
  									} catch (SQLException e) {
  										logger.warn(e.getMessage());
  									}
! 
! 									if (this.model.getData(i).get(4).equals("")) {
  										isKekkaValidated = validatedData.setKekkaCode("");
  										isCheckCSV = true;
  										break;
***************
*** 2863,2874 ****
  
  									for (int j = 0; j < codeResult.size(); j++) {
  										codeResultItem = codeResult.get(j);
! 										// edit s.inoue 2009/11/11
! 										if (this.model.getData(i, COLUMN_IDX_KEKKA_CODE)
  												.equals(codeResultItem.get(COLUMN_NAME_CODE_NAME))) {
  
  											isCheckCSV = CheckHighLawItem(
! 													(String)this.model.getData(i,COLUMN_IDX_KOUMOKUCD),
  													validatedData.getHokenjyaNumber(),
  													codeResultItem.get(COLUMN_NAME_CODE_NUM));
  
--- 2778,2789 ----
  
  									for (int j = 0; j < codeResult.size(); j++) {
  										codeResultItem = codeResult.get(j);
! 
! 										if (this.model.getData(i, 4)
  												.equals(codeResultItem.get(COLUMN_NAME_CODE_NAME))) {
  
  											isCheckCSV = CheckHighLawItem(
! 													(String)this.model.getData(i,0),
  													validatedData.getHokenjyaNumber(),
  													codeResultItem.get(COLUMN_NAME_CODE_NUM));
  
***************
*** 2881,2890 ****
  								case 3:
  									// 文字列の場合
  									isCheckCSV = true;
- 									// edit s.inoue 2009/11/11
  									isKekkaValidated
  										= validatedData.setKekkaText((String) this.model
! 										.getData(i, COLUMN_IDX_KEKKA_STR), ResultItem.get(COLUMN_NAME_MAX_BYTE_LENGTH));
  									break;
  								}
  								// add s.inoue 2009/10/17
--- 2796,2804 ----
  								case 3:
  									// 文字列の場合
  									isCheckCSV = true;
  									isKekkaValidated
  										= validatedData.setKekkaText((String) this.model
! 										.getData(i, 5), ResultItem.get(COLUMN_NAME_MAX_BYTE_LENGTH));
  									break;
  								}
  								// add s.inoue 2009/10/17
***************
*** 2892,2898 ****
  									kekkaValidated.put(i,"項目コード:" + koumokuCode + "  項目名:" + koumokuName);
  								}
  
! 								if (isKekkaValidated && isOtherValidated && isCheckCSV) {
  									// 受付ID,年度の追加対応
  									// 検査結果特定、その他テーブルへ新規レコード挿入
  									kensakekaSonota.setUKETUKE_ID(new Long(validatedData.getUketuke_id()));
--- 2806,2813 ----
  									kekkaValidated.put(i,"項目コード:" + koumokuCode + "  項目名:" + koumokuName);
  								}
  
! 								if (isKekkaValidated && isOtherValidated
! 										&& isCheckCSV) {
  									// 受付ID,年度の追加対応
  									// 検査結果特定、その他テーブルへ新規レコード挿入
  									kensakekaSonota.setUKETUKE_ID(new Long(validatedData.getUketuke_id()));
***************
*** 2900,2905 ****
--- 2815,2821 ----
  									kensakekaSonota.setHIHOKENJYASYO_NO(validatedData.getHihokenjyaNumber());
  									try {
  										kensakekaSonota.setKENSA_NENGAPI(new Integer(kensaJissiDate));
+ 										// add ver2 s.inoue 2009/07/13
  										kensakekaSonota.setNENDO(FiscalYearUtil.getThisYear(kensaJissiDate));
  									} catch (NumberFormatException e) {
  										logger.error(e.getMessage());
***************
*** 2938,2944 ****
  										kensakekaSonota.setHANTEI(new Integer(
  												validatedData.getHantei()));
  									} catch (NumberFormatException e) {
- 										/* 何もしない */
  									}
  
  									// add s.inoue 20080911 結果値(未実施,測定不可能)判定
--- 2854,2859 ----
***************
*** 3071,3079 ****
  							}
  
  							// add s.inoue 20081008
! 							if ((intBaseCnt == 0) &&(intSyosaiCnt == 0) &&(intTuikaCnt == 0) && (intAllCnt == 0)){
  								// メッセージは一回きりにする
! 								if (!notExtMessage && isCheckCSV){
  									JErrorMessage.show("M3636", this);
  									notExtMessage = true;
  								}
--- 2986,2999 ----
  							}
  
  							// add s.inoue 20081008
! 							if ((intBaseCnt == 0) &&
! 									(intSyosaiCnt == 0) &&
! 										(intTuikaCnt == 0) &&
! 										 (intAllCnt == 0)){
! 
  								// メッセージは一回きりにする
! 								if (!notExtMessage &&
! 										isCheckCSV){
  									JErrorMessage.show("M3636", this);
  									notExtMessage = true;
  								}
***************
*** 3696,3718 ****
  
  		/* 終了ボタン */
  		if (source == jButton_End) {
- 			logger.info(jButton_End.getText());
  			pushedEndButton(e);
  		}
  		/* 登録ボタン */
  		else if (source == jButton_Register) {
- 			logger.info(jButton_Register.getText());
  			pushedRegisterButton(e);
  		}
  		/* キャンセルボタン */
  		else if (source == jButton_Cancel) {
- 			logger.info(jButton_Cancel.getText());
  			pushedCancelButton(e);
  		}
  		// add ver2 s.inoue 2009/06/02
  		/* クリアボタン */
  		else if (source == jButton_Clear) {
- 			logger.info(jButton_Clear.getText());
  			pushedClearButton(e);
  		}
  		/*
--- 3616,3634 ----
***************
*** 3732,3752 ****
  		}
  	}
  
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 		switch(keyEvent.getKeyCode()){
- 		case KeyEvent.VK_F1:
- 			logger.info(jButton_End.getText());
- 			pushedEndButton(null);break;
- 		case KeyEvent.VK_F2:
- 			logger.info(jButton_Clear.getText());
- 			pushedClearButton(null);break;
- 		case KeyEvent.VK_F12:
- 			logger.info(jButton_Register.getText());
- 			pushedRegisterButton(null);break;
- 		}
- 	}
- 
  	public void itemStateChanged(ItemEvent e) {
  
  		if (isInit) {
--- 3648,3653 ----
***************
*** 3763,3768 ****
--- 3664,3687 ----
  		}
  	}
  
+ //	@Override
+ //	public void keyTyped(KeyEvent e) {
+ //		Object source = e.getSource();
+ //		char keyChar = e.getKeyChar();
+ //
+ //		if (source == jEditorPane_Comment) {
+ //			/* Ctrl + Tab を押した場合は、次のコンポーネントにフォーカスを移す。 */
+ //			boolean ctrlDown = false;
+ //			if ((e.getModifiersEx() & InputEvent.CTRL_DOWN_MASK) != 0) {
+ //				ctrlDown = true;
+ //			}
+ //
+ //			if (keyChar == KeyEvent.VK_TAB && ctrlDown) {
+ //				this.jEditorPane_Comment.transferFocus();
+ //			}
+ //		}
+ //	}
+ 
  	/**
  	 * 入力必須のセルを取得しフォーカスマップを作成 テーブルにフォーカスリスナを設定
  	 * Enterキー押下でフォーカスマップに登録されたセル座標にフォーカスを移動する
***************
*** 3817,7742 ****
  
  // Source Code Version Tag System v1.00 -- Do not remove --
  // Product-Tag: {4F85C2F4EE-5847B3BB7A9-ADC5AC59E3-EF66F79A1}
- 
- // edit s.inoue 2010/02/25
- // 一列化するように試み中のソース
- 
- //package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
- //
- //import javax.swing.AbstractCellEditor;
- //import javax.swing.DefaultCellEditor;
- //import javax.swing.JComponent;
- //import javax.swing.JScrollPane;
- //import javax.swing.JTable;
- //import javax.swing.JTextArea;
- //import javax.swing.JTextField;
- //import javax.swing.JViewport;
- //import javax.swing.ListSelectionModel;
- //import javax.swing.event.CellEditorListener;
- //import javax.swing.event.ChangeEvent;
- //import javax.swing.event.ChangeListener;
- //import javax.swing.table.DefaultTableCellRenderer;
- //import javax.swing.table.DefaultTableColumnModel;
- //import javax.swing.table.DefaultTableModel;
- //import javax.swing.table.TableCellEditor;
- //import javax.swing.table.TableCellRenderer;
- //import javax.swing.table.TableColumn;
- //import javax.swing.table.TableColumnModel;
- //import javax.swing.table.TableModel;
- //import javax.swing.table.TableRowSorter;
- //
- //import java.awt.Color;
- //import java.awt.Component;
- //import java.awt.event.FocusAdapter;
- //import java.awt.event.FocusEvent;
- //import java.awt.event.ItemListener;
- //import java.awt.event.KeyEvent;
- //import java.awt.event.KeyListener;
- //import java.awt.event.KeyAdapter;
- //import java.awt.event.InputEvent;
- //import java.awt.event.ActionEvent;
- //import java.awt.event.ItemEvent;
- //import java.awt.event.MouseEvent;
- //import java.awt.event.MouseListener;
- //
- //import java.sql.Connection;
- //import java.sql.SQLException;
- //import java.text.SimpleDateFormat;
- //import java.util.ArrayList;
- //import java.util.EventObject;
- //import java.util.HashMap;
- //import java.util.Hashtable;
- //import java.util.Map;
- //import java.util.List;
- //import java.util.Calendar;
- //import java.util.Vector;
- //import java.util.regex.Pattern;
- //import java.math.BigDecimal;
- //import java.awt.Dimension;
- //import org.apache.log4j.Logger;
- //
- //import com.lowagie.text.pdf.TextField;
- //
- //import jp.or.med.orca.jma_tokutei.common.component.ExtendedComboBox;
- //import jp.or.med.orca.jma_tokutei.common.component.ExtendedTextArea;
- //import jp.or.med.orca.jma_tokutei.common.component.ExtendedTextField;
- //import jp.or.med.orca.jma_tokutei.common.component.ImeController.ImeMode;
- //import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
- //import jp.or.med.orca.jma_tokutei.common.convert.JYearAge;
- //import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
- //import jp.or.med.orca.jma_tokutei.common.errormessage.RETURN_VALUE;
- //import jp.or.med.orca.jma_tokutei.common.event.JEnterEvent;
- //import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
- //import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
- //import jp.or.med.orca.jma_tokutei.common.sql.dao.DaoFactory;
- //import jp.or.med.orca.jma_tokutei.common.sql.dao.TKensakekaSonotaDao;
- //import jp.or.med.orca.jma_tokutei.common.sql.dao.TKensakekaTokuteiDao;
- //import jp.or.med.orca.jma_tokutei.common.sql.dao.TKojinDao;
- //import jp.or.med.orca.jma_tokutei.common.sql.dao.TNayoseDao;
- //import jp.or.med.orca.jma_tokutei.common.sql.model.TKensakekaSonota;
- //import jp.or.med.orca.jma_tokutei.common.sql.model.TKensakekaTokutei;
- //import jp.or.med.orca.jma_tokutei.common.sql.model.TKojin;
- //import jp.or.med.orca.jma_tokutei.common.sql.model.TNayose;
- //import jp.or.med.orca.jma_tokutei.common.table.EachRowEditor;
- //import jp.or.med.orca.jma_tokutei.common.table.JComboCellEditor;
- //import jp.or.med.orca.jma_tokutei.common.table.JSimpleTable;
- //import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellPosition;
- //import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellRendererData;
- //import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellRowRenderer;
- //import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableScrollPanel;
- //import jp.or.med.orca.jma_tokutei.common.util.FiscalYearUtil;
- //import jp.or.med.orca.jma_tokutei.common.validate.JValidate;
- //import jp.or.med.orca.jma_tokutei.common.app.JApplication;
- //import jp.or.med.orca.jma_tokutei.common.component.ImeController;
- //
- ///**
- // * 結果登録
- // */
- //public class JKekkaRegisterFrameCtrl extends JKekkaRegisterFrame implements ItemListener,KeyListener {
- //
- //	private static final int[] DEFAULT_COLUMNS_WIDTH = new int[] {
- //		0, 140, 140, 80, 120, 120, 80,
- //				80, 80, 80, 80, 50, 120 };
- //	private static final String COLUMN_NAME_HISU_FLG = "HISU_FLG";
- //	private static final String COLUMN_NAME_JYOUGEN = "JYOUGEN";
- //	private static final String COLUMN_NAME_KAGEN = "KAGEN";
- //	private static final String COLUMN_NAME_KOMENTO = "KOMENTO";
- //	private static final String COLUMN_NAME_HANTEI = "HANTEI";
- //	private static final String COLUMN_NAME_H_L = "H_L";
- //	private static final String COLUMN_NAME_JISI_KBN = "JISI_KBN";
- //	private static final String COLUMN_NAME_JS_JYOUGEN = "JS_JYOUGEN";
- //	private static final String COLUMN_NAME_JS_KAGEN = "JS_KAGEN";
- //	private static final String COLUMN_NAME_DS_JYOUGEN = "DS_JYOUGEN";
- //	private static final String COLUMN_NAME_DS_KAGEN = "DS_KAGEN";
- //	private static final String COLUMN_NAME_CODE_NUM = "CODE_NUM";
- //	private static final String COLUMN_NAME_CODE_NAME = "CODE_NAME";
- //	private static final String COLUMN_NAME_KEKA_TI = "KEKA_TI";
- //	private static final String COLUMN_NAME_MAX_BYTE_LENGTH = "MAX_BYTE_LENGTH";
- //	private static final String COLUMN_NAME_DATA_TYPE = "DATA_TYPE";
- //	private static final String COLUMN_NAME_KENSA_HOUHOU = "KENSA_HOUHOU";
- //	private static final String COLUMN_NAME_KOUMOKUNAME = "KOUMOKUNAME";
- //	private static final String COLUMN_NAME_KOUMOKUCD = "KOUMOKUCD";
- //
- //	// add s.inoue 2009/11/11
- //	private static final int COLUMN_IDX_KOUMOKUCD = 0;
- //	private static final int COLUMN_IDX_CODE_NAME = 1;
- //	private static final int COLUMN_IDX_CODE_KENSA_HOUHOU = 2;
- //	// edit s.inoue 2009/11/11
- ////	private static final int COLUMN_IDX_KEKKA_VALUE = 3;
- //	private static final int COLUMN_IDX_KEKKA_NUM = 3;
- //	private static final int COLUMN_IDX_KEKKA_CODE = 4;
- //	private static final int COLUMN_IDX_KEKKA_STR = 5;
- //
- //	private static final int COLUMN_IDX_JISIKBN = 6;
- //	private static final int COLUMN_IDX_DS_KAGEN = 7;
- //	private static final int COLUMN_IDX_DS_JYOUGEN = 8;
- //	private static final int COLUMN_IDX_JS_KAGEN = 9;
- //	private static final int COLUMN_IDX_JS_JYOUGEN = 10;
- //	private static final int COLUMN_IDX_HL = 11;
- //	private static final int COLUMN_IDX_HANTEI = 12;
- //	private static final int COLUMN_IDX_KOMENTO = 13;
- //	private static final int COLUMN_IDX_HISUFLG = 14;
- //
- //	private static final String CODE_SEIKATU_KAIZEN = "9N801000000000011";
- //	private static final String CODE_HOKEN_SHIDOU = "9N806000000000011";
- //	private static final String CODE_SAIKETSU_ZIKAN = "9N141000000000011";
- //	private static final String CODE_ISHINOHANDAN_1 = "9N501000000000011";
- //	private static final String CODE_ISHINOHANDAN_2 = "9N506000000000011";
- //	private static final String CODE_ISHINOHANDAN_3 = "9N511000000000049";
- //	private static final String CODE_ISHINOHANDAN_4 = "9N516000000000049";
- //	private static final String CODE_TAIJU = "9N006000000000001";
- //	private static final String CODE_SHINCHOU = "9N001000000000001";
- //	private static final String CODE_BMI = "9N011000000000001";
- //
- //	public final static int INSERT_MODE = 1;
- //	public final static int UPDATE_MODE = 2;
- //	private static final String strHighMessageValue = "上限値";
- //	private static final String strLowMessageValue = "下限値";
- //
- //	private static Logger logger = Logger.getLogger(JKekkaRegisterFrameCtrl.class);
- //
- //	/**
- //	 * テーブルの"結果(文字列)"欄にて 編集終了時に入力用ダイアログを表示するための DefaultCellEditorクラス
- //	 */
- //	private class PopupWindowShowCellEditor extends DefaultCellEditor {
- //		/**
- //		 * DefaultCellEditor セルエディタリスナ
- //		 */
- //		private PopupWindowCellEditorListener cellEditorListener;
- //		private ImeController imeController = null;
- //		/**
- //		 * コンストラクタ
- //		 * @param parent 健診結果データ入力画面
- //		 * @param textField 結果(文字列)セルのエディタ
- //		 * @param 選択中セルのカラムインデックス
- //		 */
- //		public PopupWindowShowCellEditor(JKekkaRegisterFrameCtrl parent,
- //				JTextField textField,int index) {
- //			super(textField);
- //
- //			// add s.inoue 2009/10/14
- //			imeController = new ImeController();
- //			imeController.addFocusListenerForCharcterSubsets(textField, ImeMode.IME_ZENKAKU);
- //			cellEditorListener = new PopupWindowCellEditorListener(parent,index);
- //			setClickCountToStart(1);
- //		}
- //	}
- //
- //	// add s.inoue 2009/12/22
- //	// textfieldからtextareaへと移行
- //	public class PopupWindowShowTextAreaCellEditor extends AbstractCellEditor implements
- //	TableCellEditor, TableCellRenderer {
- //		  private PopupWindowCellEditorListener cellEditorListener;
- //		  private ImeController imeController = null;
- //
- //		  private JTextArea textArea;
- //		  private JScrollPane scroll;
- //
- //		  public PopupWindowShowTextAreaCellEditor(
- //				JKekkaRegisterFrameCtrl parent,
- //					ExtendedTextArea textAreas,
- //					int index) {
- //			// edit s.inoue 2009/12/24
- //			// textArea = new JTextArea();
- //			scroll = new JScrollPane(textAreas,
- //				JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED,
- //				JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
- //
- //			// add s.inoue 2009/10/14
- //			imeController = new ImeController();
- //			imeController.addFocusListenerForCharcterSubsets(scroll, ImeMode.IME_ZENKAKU);
- //			cellEditorListener = new PopupWindowCellEditorListener(parent,index);
- //		  }
- //
- //		  public JTextArea getTextArea(){
- //		    return textArea;
- //		  }
- //
- //		  public Object getCellEditorValue() {
- //		    return textArea.getText();
- //		  }
- //
- //		  public boolean shouldSelectCell(EventObject anEvent) {
- //		    return true;
- //		  }
- //
- //		  public boolean stopCellEditing() {
- //		    fireEditingStopped();
- //		    return true;
- //		  }
- //
- //		  public void cancelCellEditing() {
- //		    fireEditingCanceled();
- //		  }
- //
- //		  public Component getTableCellEditorComponent(JTable table, Object value,
- //		      boolean isSelected, int row, int column) {
- //			if (textArea == null)
- //				return null;
- //		    textArea.setText((value != null) ? value.toString() : "");
- //		    textArea.setCaretPosition(textArea.getText().length());
- //		    return scroll;
- //		  }
- //
- //		  public Component getTableCellRendererComponent(JTable table,
- //		   Object value, boolean isSelected, boolean hasFocus, int row, int column){
- //		    textArea.setText((value != null) ? value.toString() : "");
- //		    textArea.setCaretPosition(textArea.getText().length());
- //		    return scroll;
- //		  }
- //	}
- //
- //	/**
- //	 * テーブルの"結果(文字列)"欄DefaultCellEditorの 編集完了/ｷｬﾝｾﾙリスナークラス
- //	 */
- //	private class PopupWindowCellEditorListener implements CellEditorListener {
- //
- //		/**
- //		 * 健診結果データ入力画面
- //		 */
- //		private JKekkaRegisterFrameCtrl parent;
- //
- //		/**
- //		 * 入力ダイアログ
- //		 */
- //		private IKekkaRegisterInputDialog dialog;
- //
- //		/**
- //		 * コンストラクタ
- //		 * @param parent 健診結果データ入力画面
- //		 * @param index 選択中セルのカラムインデックス
- //		 */
- //		public PopupWindowCellEditorListener(JKekkaRegisterFrameCtrl parent,int index) {
- //			this.parent = parent;
- //			dialog = JKekkaRegisterInputDialogFactory.createDialog(parent,index);
- //		}
- //
- //		/**
- //		 * 編集キャンセルイベントコールバック
- //		 * @param changeEvent 変更イベント
- //		 */
- //		public void editingCanceled(ChangeEvent changeEvent) {
- //		}
- //
- //		/**
- //		 * 編集完了イベントコールバック
- //		 * @param changeEvent 変更イベント
- //		 */
- //		public void editingStopped(ChangeEvent changeEvent) {
- //
- //			// 健診結果データ入力画面のテーブルから現在選択されているセルのデータを取得
- //			int columnIndex = parent.model.getSelectedColumn();
- //			int rowIndex = parent.model.getSelectedRow();
- //			String kekkaMojiretsu = (String) parent.model.getData(rowIndex,columnIndex);
- //
- //			// "結果(文字列)"入力ダイアログのテキストエリアに選択セルデータをセット
- //			dialog.setText(kekkaMojiretsu);
- //			// "結果(文字列)"入力ダイアログ表示
- //			dialog.setVisible(true);
- //
- //			// edit s.inoue 2009/12/06
- //			// if (dialog.getStatus() != RETURN_VALUE.OK)
- //			if (dialog.getStatus() != RETURN_VALUE.YES)
- //				return;
- //			// "結果(文字列)"入力ダイアログから入力された 文字列を選択セルにセット
- //			parent.model.setData(dialog.getText(), rowIndex, columnIndex);
- //		}
- //	}
- //
- //	/**
- //	 * 総合コメント欄キーリスナクラス
- //	 */
- //	private class SougouCommentKeyListener implements KeyListener {
- //
- //		/**
- //		 * 健診結果データ入力画面
- //		 */
- //		private JKekkaRegisterFrameCtrl parent;
- //
- //		/**
- //		 * 入力ダイアログ
- //		 */
- //		private IKekkaRegisterInputDialog dialog;
- //
- //		/**
- //		 * コンストラクタ
- //		 * @param parent 健診結果データ入力画面
- //		 */
- //		public SougouCommentKeyListener(JKekkaRegisterFrameCtrl parent) {
- //			this.parent = parent;
- //			// ダイアログを生成
- //			dialog = JKekkaRegisterInputDialogFactory.createDialog(parent, 12);
- //		}
- //
- //		public void keyPressed(KeyEvent keyEvent) {
- //			// Enterキー押下時
- //			if (keyEvent.getKeyCode() == KeyEvent.VK_ENTER) {
- //				// Shiftキーが一緒に押されたか?
- //				int modfiersKey = keyEvent.getModifiersEx();
- //				if ((modfiersKey & InputEvent.CTRL_DOWN_MASK) == 0)
- //					return;
- //				String comment = jEditorPane_Comment.getText();
- //				// "結果(文字列)"入力ダイアログのテキストエリアに選択セルデータをセット
- //				dialog.setText(comment);
- //				// "結果(文字列)"入力ダイアログ表示
- //				dialog.setVisible(true);
- //				if (dialog.getStatus() != RETURN_VALUE.OK)
- //					return;
- //				/*
- //				 * 取得したテキストを、現在の入力内容に追加 するよう変更。
- //				 */
- //				parent.jEditorPane_Comment.setText(comment + dialog.getText());
- //			}
- ////			// Enterキー押下時
- ////			// if (keyEvent.getKeyCode() == KeyEvent.VK_ENTER) {
- ////			// add s.inoue 2009/12/03
- ////			switch(keyEvent.getKeyCode()){
- ////				case KeyEvent.VK_ENTER:
- ////					// Shiftキーが一緒に押されたか?
- ////					int modfiersKey = keyEvent.getModifiersEx();
- ////					if ((modfiersKey & InputEvent.CTRL_DOWN_MASK) == 0)
- ////						return;
- ////					String comment = jEditorPane_Comment.getText();
- ////					// "結果(文字列)"入力ダイアログのテキストエリアに選択セルデータをセット
- ////					dialog.setText(comment);
- ////					// "結果(文字列)"入力ダイアログ表示
- ////					dialog.setVisible(true);
- ////					// edit s.inoue 2009/12/06
- ////					if (dialog.getStatus() != RETURN_VALUE.YES)
- ////					// if (dialog.getStatus() != RETURN_VALUE.OK)
- ////						return;
- ////					/*
- ////					 * 取得したテキストを、現在の入力内容に追加 するよう変更。
- ////					 */
- ////					parent.jEditorPane_Comment.setText(comment + dialog.getText());
- ////					break;
- ////// del s.inoue 2009/12/21
- //////				case KeyEvent.VK_F1:
- //////					pushedEndButton(null);break;
- //////				case KeyEvent.VK_F2:
- //////					pushedClearButton(null);break;
- //////				case KeyEvent.VK_F12:
- //////					pushedRegisterButton(null);break;
- ////				}
- //		}
- //
- //		public void keyReleased(KeyEvent keyEvent) {
- //		}
- //
- //		public void keyTyped(KeyEvent keyEvent) {
- //		}
- //
- //	}
- //
- //	/**
- //	 * 結果(コード)欄のDefaultCellEditorクラスを追加
- //	 */
- //	private class InputDigitHalfUpCellEditor extends DefaultCellEditor {
- //		private ImeController imeController = null;
- //		/**
- //		 * コンストラクタ
- //		 * @param textField セルのDefaultEditor
- //		 */
- //		public InputDigitHalfUpCellEditor(final JTextField textField) {
- //			super(textField);
- //
- //			// add s.inoue 2009/10/14
- //			imeController = new ImeController();
- //			imeController.addFocusListenerForCharcterSubsets(textField, ImeMode.IME_OFF);
- //
- //			// 編集リスナを追加
- //			addCellEditorListener(new CellEditorListener() {
- //
- //				private final String DIGIT_FORMAT_REGEXP = "[#\\.0]+";
- //
- //				/**
- //				 * 編集キャンセルイベントコールバック
- //				 * @param changeEvent 変更イベント
- //				 */
- //				public void editingCanceled(ChangeEvent changeEvent) {
- //				}
- //
- //				/**
- //				 * 編集完了イベントコールバック
- //				 * @param changeEvent 変更イベント
- //				 */
- //				public void editingStopped(ChangeEvent changeEvent) {
- //
- //					String textValue = textField.getText();
- //					if ((textValue == null) || (textValue.length() == 0))
- //						return;
- //
- //					// 現在選択されているセルの行・列インデックスを取得
- //					int columnIndex = model.getSelectedColumn();
- //					int rowIndex = model.getSelectedRow();
- //
- //					// フォーマット文字列を取得する
- //					Map<String, String> recordMap = tableResult.get(rowIndex);
- //					String format = recordMap.get(COLUMN_NAME_MAX_BYTE_LENGTH);
- //
- //					// フォーマット文字列の妥当性を検証
- //					if (!isValidFormat(format))
- //						return;
- //
- //					// フォーマット文字列の作成
- //					int width = getWidth(format);
- //					int scale = getScale(format);
- //					String formatStr = "%." + scale + "f";
- //
- //					String roundUpValue = "";
- //					try {
- //						double value = new Double(textField.getText())
- //								.doubleValue();
- //						// 小数点第2位以下を四捨五入し小数点第1位までを表示
- //						roundUpValue = String.format(formatStr, new BigDecimal(
- //								value).setScale(scale + 1,
- //								BigDecimal.ROUND_HALF_UP).floatValue());
- //						// 整数部・小数部が指定桁数をオーバーしている場合はクリア
- //						if ((getWidth(roundUpValue) > width)
- //								|| (getScale(roundUpValue) > scale))
- //							roundUpValue = "";
- //					} catch (NumberFormatException e) {
- //					}
- //					// 四捨五入値をセルにセット
- //					model.setData(roundUpValue, rowIndex, columnIndex);
- //
- //					// add ver2 s.inoue 2009/06/24
- //					int  selectedColumnIndex=model.getSelectedColumn();
- //					int  selectedRowIndex=model.getSelectedRow();
- //
- //					if ((selectedColumnIndex == 3) &&
- //							(selectedRowIndex== 0 || selectedRowIndex== 1)) {
- //						actionBMICalc();
- //					}
- //
- //				}
- //
- //				/**
- //				 * 妥当なフォーマット文字列か検証する
- //				 * @param rowIndex
- //				 */
- //				private boolean isValidFormat(String format) {
- //
- //					if ((format == null) || (format.length() < 1))
- //						return false;
- //
- //					Pattern pattern = Pattern.compile(DIGIT_FORMAT_REGEXP);
- //					if (!pattern.matcher(format).matches())
- //						return false;
- //					int pos = format.indexOf(".");
- //					if (pos == (format.length() - 1))
- //						return false;
- //
- //					// 小数点の指定が無い場合
- //					if (pos < 0) {
- //						pattern = Pattern.compile("#+");
- //						return pattern.matcher(format).matches();
- //					}
- //
- //					pos++;
- //					pattern = Pattern.compile("0+");
- //					return pattern.matcher(
- //							format.substring(pos, format.length())).matches();
- //				}
- //
- //				/**
- //				 * 整数部の桁数を取得する
- //				 *
- //				 * @param format
- //				 * @return
- //				 */
- //				private int getWidth(String format) {
- //					if ((format == null) || (format.length() == 0))
- //						return -1;
- //					int pos = format.indexOf(".");
- //					if (pos < 0)
- //						return format.length();
- //					if ((pos == 0) || (pos == (format.length() - 1)))
- //						return -1;
- //					return format.substring(0, pos).length();
- //				}
- //
- //				/**
- //				 * 小数部の桁数を取得する
- //				 *
- //				 * @param format
- //				 * @return
- //				 */
- //				private int getScale(String format) {
- //					int pos = format.indexOf(".");
- //					if (pos < 0)
- //						return 0;
- //					if ((pos == 0) || (pos == (format.length() - 1)))
- //						return -1;
- //					pos++;
- //					return format.substring(pos, format.length()).length();
- //				}
- //			});
- //		}
- //	}
- //
- ////	private JSimpleTableScrollPanel scroll;
- ////	private JSimpleTable table;
- //	private JSimpleTable model=null;
- //	private JSimpleTable modelfixed= null;
- //	private DefaultTableModel dmodel = null;
- //	private TableRowSorter<TableModel> sorter =null;
- //	Object[][] rowcolumn = null;
- //
- //	private String[] header = { "","項目名","検査方法","結果（数値）[入力]","結果（コード）[入力]","結果（文字列）[入力]","実施区分[入力]","基準値下限（男性）","基準値上限（男性）","基準値下限（女性）","基準値上限（女性）","H/L[入力]","判定","コメント[入力]" };
- //
- //	private int mode;
- //	private JKekkaRegisterFrameData validatedData = new JKekkaRegisterFrameData();  //  @jve:decl-index=0:
- //	// edit s.inoue 2010/02/19
- //	private ExtendedComboBox kekkaCombo = null;
- //	private ExtendedComboBox hanteiCombo = new ExtendedComboBox();
- //	private ExtendedComboBox hlCombo = new ExtendedComboBox();
- //	private ExtendedComboBox jisiCombo = new ExtendedComboBox();
- //	private EachRowEditor rowEditor = null;
- //	private Vector<Hashtable<String, String>> comboData = null;
- //	private JComboCellEditor kekkaComboEditor = null;
- //	// del s.inoue 2009/11/23
- ////	private JComboCellEditor hanteiComboEditor = new JComboCellEditor(hanteiCombo);
- ////	private JComboCellEditor hlComboEditor = new JComboCellEditor(hlCombo);
- ////	private JComboCellEditor jisiComboEditor = new JComboCellEditor(jisiCombo);
- //
- //	private Vector<JSimpleTableCellRendererData> cellColors = new Vector<JSimpleTableCellRendererData>();
- //	private String BMIFormat = null;
- //	private JSimpleTableCellPosition BMICellPosition = null;
- //	private JSimpleTableCellPosition heightCellPosition = null;
- //	private JSimpleTableCellPosition weightCellPosition = null;
- //	private Vector<JSimpleTableCellPosition> forbitCells = new Vector<JSimpleTableCellPosition>();
- //	private final Color COLOR_HISU = ViewSettings.getRequiedItemBgColor();
- //	private final Color COLOR_DISABLE = ViewSettings.getDisableItemBgColor();
- //	// add h.yoshitama 2009/09/18
- //	private final Color COLOR_ABLE = ViewSettings.getAbleItemBgColor();
- //
- //	/* フォーカス移動制御 */
- //	private JFocusTraversalPolicy focusTraversalPolicy = null;
- //
- //	/* Enter キー押下でフォーカスを移動するコンポーネント */
- //	private List<Component> enterkeyFocusComponents = null;
- //
- //	// Proxyとして管理する
- //	private static jp.or.med.orca.jma_tokutei.common.csv.JCSVReaderStream Reader = null;
- //	private int kenshinPatternNumber = -1;
- //	private int prekenshinPatternNumber = -1;
- //	private ArrayList<Hashtable<String, String>> tableResult = null;
- //	private String[] hanteiCodeTable = { "未判定", "異常なし", "軽度異常", "要経過観察", "異常","要精検" };
- //	private String[] hlCodeTable = { "", "L", "H" };
- //	private boolean isInit = false;
- //	private static final int HISU_FLG_HISU = 1;
- //
- //	// T_KOJIN,T_KENSAKEKA_TOKUTEIにUKETUKE_ID,NENDO追加対応
- //	private TKensakekaTokutei kensakekaTokutei = new TKensakekaTokutei();
- //	private TKensakekaSonota kensakekaSonota = new TKensakekaSonota();
- //	private TKensakekaTokuteiDao kensakekaTokuteiDao = null;
- //	private TKensakekaSonotaDao kensakekaSonotaDao = null;
- //	private String initialDate = null;
- //	private boolean isCopy = false;
- //	// edit s.inoue 2009/11/24
- //	private Hashtable<String, String> kekkaCmbdataSet = null;
- //
- //	// edit s.inoue 2009/12/10
- //	private ExtendedTextField textAreaField = null;
- //
- //	/**
- //	 * コンストラクタ
- //	 * @param srcData このフレームのデータ
- //	 * @param kensaJissiDate 健診実施日
- //	 */
- //	public JKekkaRegisterFrameCtrl(
- //			JKekkaListFrameData srcData,
- //			String kensaJissiDate,
- //			boolean isCopy
- //			) {
- //		// edit s.inoue 2009/11/20
- //		initializeSetting(
- //				srcData,
- //				kensaJissiDate,
- //				isCopy);
- //	}
- //
- //	// edit s.inoue 2009/11/20
- //	private void initializeSetting(
- //			JKekkaListFrameData srcData,
- //			String kensaJissiDate,
- //			boolean isCopy){
- //
- //		this.initialDate = kensaJissiDate;
- //		this.isCopy = isCopy;
- //
- //		/* コンボボックスを初期化する。 */
- //		this.initializeComboBox();
- //
- //		/* 入力コントロールを初期化する。 */
- //		this.initializeInputComponents(srcData, kensaJissiDate, isCopy);
- //
- //		dmodel = new DefaultTableModel(refreshTable(kensaJissiDate, true,false,true),header){
- //	      public boolean isCellEditable(int row, int column) {
- //	    	boolean retflg = false;
- //	    	if (column == 3 || column == 4 || column == 5 || column == 6|| column == 11 || column > 14){
- //	    		retflg = true;
- //	      	}else{
- //	      		retflg = false;
- //	      	}
- //	        return retflg;
- //	      }
- //	    };
- //
- //		sorter = new TableRowSorter<TableModel>(dmodel);
- //		model = new JSimpleTable(dmodel);
- //
- //		// add s.inoue 2010/02/19
- //		this.setTableFocusMap();
- //
- //		modelfixed = new JSimpleTable(dmodel);
- //
- //		// edit s.inoue 2009/11/20
- //		modelfixed.setPreferedColumnWidths(new int[]{0,150, 150});
- //		model.setPreferedColumnWidths(new int[] {  80, 120, 120, 80,80, 80, 80, 80, 50, 120  ,120});
- //
- //		modelfixed.setSelectionModel(model.getSelectionModel());
- //
- //		for(int i=dmodel.getColumnCount()-1;i>=0;i--) {
- //            if(i<4) {
- //            }else{
- //                modelfixed.removeColumn(modelfixed.getColumnModel().getColumn(i));
- //            }
- //        }
- //
- //	    model.setRowSorter(sorter);
- //	    model.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
- //	    model.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
- //
- //	    modelfixed.setRowSorter(sorter);
- //	    modelfixed.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
- //	    modelfixed.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
- //
- //	    initilizeFocus();
- //
- //        final JScrollPane scroll = new JScrollPane(model);
- //        JViewport viewport = new JViewport();
- //        viewport.setView(modelfixed);
- //        viewport.setPreferredSize(modelfixed.getPreferredSize());
- //        scroll.setRowHeader(viewport);
- //
- //        modelfixed.setPreferredScrollableViewportSize(modelfixed.getPreferredSize());
- //        scroll.setRowHeaderView(modelfixed);
- //        scroll.setCorner(JScrollPane.UPPER_LEFT_CORNER, modelfixed.getTableHeader());
- //
- //        scroll.getRowHeader().addChangeListener(new ChangeListener() {
- //            public void stateChanged(ChangeEvent e) {
- //                JViewport viewport = (JViewport) e.getSource();
- //                scroll.getVerticalScrollBar().setValue(viewport.getViewPosition().y);
- //            }
- //        });
- //
- //        jPanel_Table.add(scroll);
- //
- //		dmodel.setDataVector(refreshTable(kensaJissiDate, true,false,true),header);
- //
- //		// 4列以下は固定、以降は変動
- //		for(int i=dmodel.getColumnCount()-1;i>=0;i--) {
- //            if(i<3) {
- //                model.removeColumn(model.getColumnModel().getColumn(i));
- //                modelfixed.getColumnModel().getColumn(i).setResizable(false);
- //            }
- //        }
- //
- //	   TableColumnModel columnsfix = modelfixed.getColumnModel();
- //	   for(int i=0;i<columnsfix.getColumnCount();i++) {
- //
- //		   columnsfix.getColumn(i).setCellRenderer(new JSimpleTableCellRowRenderer(
- //	   			(DefaultTableCellRenderer)modelfixed.getDefaultRenderer(modelfixed.getColumnClass(i))));
- //	   }
- //
- //	   TableColumnModel columns = model.getColumnModel();
- //	   for(int i=0;i<columns.getColumnCount();i++) {
- //
- //		   columns.getColumn(i).setCellRenderer(new JSimpleTableCellRowRenderer(
- //	   			(DefaultTableCellRenderer)model.getDefaultRenderer(model.getColumnClass(i))));
- //	   }
- //
- //		/**** 入力系コントロール初期化 ****/
- //		this.model.addKeyListener(new JEnterEvent(this));
- //
- //		// move s.inoue 2010/02/19
- //		/* テーブル項目を初期化する */
- //		// this.initializeTableColumn();
- //
- //		/* テーブルをイベントを初期化する。 */
- //		this.initializeTableListner();
- //		/* セルの色を更新する。 */
- //		this.refreshTableCellColor();
- //		/* 列の幅を初期化する。 */
- //		this.initializeColumnWidth();
- //
- ////		this.table.setPreferedColumnWidths(DEFAULT_COLUMNS_WIDTH);
- //		// add s.inoue 2009/11/12
- //		model.addHeader(this.header);
- //		model.refreshTable(); modelfixed.refreshTable();
- //
- //		// move s.inoue 2010/02/19
- //		/* テーブル項目を初期化する */
- //		this.initializeTableColumn();
- //		this.refreshTableCellColor();
- //		this.initializeColumnWidth();
- //		this.setTableFocusMap();
- //		// 初期選択
- //		if (model.getRowCount() > 0) {
- //			model.setRowSelectionInterval(0, 0);
- //		}
- //	}
- //
- //	private void initilizeFocus(){
- //		/* フォーカス遷移を初期化する。 */
- //		this.initializeFocusTraversal();
- //		// add s.inoue 2009/12/03
- //		functionListner();
- //
- //		/* Added 2008/03/12 若月 必須項目を指定の背景色に設定する */
- //		this.jTextField_Date.setBackground(ViewSettings.getRequiedItemBgColor());
- //		this.jComboBox_Pattern.setBackground(ViewSettings.getRequiedItemBgColor());
- //		this.jComboBox_SeikyuKubun.setBackground(ViewSettings.getRequiedItemBgColor());
- //		// add h.yoshitama 2009/09/24
- //		jLabel_requiredExample.setBackground(ViewSettings.getRequiedItemBgColor());
- //		jLabel_ableExample.setBackground(ViewSettings.getAbleItemBgColor());
- //		jLabel_disableExample.setBackground(ViewSettings.getDisableItemBgColor());
- //
- //		if (isCopy) {
- //			this.jTextField_Date.grabFocus();
- //			// add ver2 s.inoue 2009/06/29
- //			jTextField_SeiriNo.setVisible(true);
- //			jLabelSeirino.setVisible(true);
- //		}
- //	}
- //
- //	private boolean isNewKekkaData = false;
- //
- //	private void initializeInputComponents(JKekkaListFrameData srcData, String kensaJissiDate, boolean isCopy) {
- //
- //		Dimension size =ViewSettings.getFrameCommonSize();
- //
- //		this.setSize(size);
- //		this.setPreferredSize(size);
- //		this.setMinimumSize(size);
- //		this.setLocationRelativeTo( null );
- //
- //		// 前フレームから受け継いだデータをセット
- //		jTextField_HokenjyaCode.setText(srcData.getHihokenjyaCode());
- //		jTextField_HokenjyaNumber.setText(srcData.getHihokenjyaNumber());
- //		jTextField_Name.setText(srcData.getName());
- //
- //		/* 性別名の表示 */
- //		validatedData.setHokenjyaNumber(srcData.getHokenjyaNumber());
- //		validatedData.setHihokenjyaCode(jTextField_HokenjyaCode.getText());
- //		validatedData.setHihokenjyaNumber(jTextField_HokenjyaNumber.getText());
- //		validatedData.setUketuke_id(srcData.getUketuke_id());
- //		validatedData.setUketukePre_id(srcData.getUketukePre_id());
- //
- //		jTextFieldsexName.setText(srcData.getSexName());
- //		jTextField_HokenjyaCode.setEditable(false);
- //		jTextField_HokenjyaNumber.setEditable(false);
- //		jTextField_Name.setEditable(false);
- //		jTextFieldBirthDay.setText(srcData.getBirthDay());
- //		jTextFieldNenrei.setText(JYearAge.getAge(jTextFieldBirthDay.getText()));
- //
- //		try {
- //			Connection connection = JApplication.kikanDatabase.getMConnection();
- //
- //			kensakekaTokuteiDao = (TKensakekaTokuteiDao) DaoFactory.createDao(
- //					connection,
- //					kensakekaTokutei);
- //
- //			kensakekaSonotaDao = (TKensakekaSonotaDao) DaoFactory.createDao(
- //					connection,
- //					kensakekaSonota);
- //		} catch (Exception e) {
- //			logger.error(e.getMessage());
- //			e.printStackTrace();
- //		}
- //
- //		this.isNewKekkaData = false;
- //
- //		/* 結果データ複製以外の場合 */
- //		if (! isCopy) {
- //			/* 健診実施日が空の場合 */
- //			if (kensaJissiDate.equals("")) {
- //				this.isNewKekkaData = true;
- //
- //				/* システム日時を入力する。 */
- //				Calendar cal = Calendar.getInstance();
- //
- //				String year = JValidate.fillZero(String.valueOf(cal.get(Calendar.YEAR)), 4);
- //				String month = JValidate.fillZero(String.valueOf(cal.get(Calendar.MONTH) + 1), 2);
- //				String date = JValidate.fillZero(String.valueOf(cal.get(Calendar.DAY_OF_MONTH)), 2);
- //
- //				String jissiDateString = year + month + date;
- //
- //				jTextField_Date.setText(jissiDateString);
- //				this.validatedData.setKensaJissiDate(jissiDateString);
- //
- //			/* 健診実施日が指定されている場合 */
- //			} else {
- //				validatedData.setKensaJissiDate(kensaJissiDate);
- //				jTextField_Date.setText(validatedData.getKensaJissiDate());
- //			}
- //		} else {
- //			/* 結果データ複製の場合 */
- //			validatedData.setKensaJissiDate(kensaJissiDate);
- //			this.isNewKekkaData = true;
- //		}
- //
- //		// 総合コメント欄にキーリスナ追加
- //		jEditorPane_Comment.addKeyListener(new SougouCommentKeyListener(this));
- //
- //		this.jEditorPane_Comment.addFocusListener(new FocusAdapter(){
- //			@Override
- //			public void focusLost(FocusEvent arg0) {
- //				jEditorPane_Comment.getInputContext().setCompositionEnabled(false);
- //				jEditorPane_Comment.getInputContext().setCharacterSubsets(null);
- //			}
- //		});
- //		jEditorPane_Comment.getInputContext().setCharacterSubsets(null);
- //		/* 実施日設定 */
- //		this.changeInputDate(this.validatedData.getKensaJissiDate(), false);
- //
- //	}
- //
- //	private void initializeEnterkeyFocusComponents() {
- //		/* Enter キー押下でフォーカスを移動するコンポーネントを登録する。 */
- //		this.enterkeyFocusComponents = new ArrayList<Component>();
- //
- //		this.enterkeyFocusComponents.add(jComboBox_Pattern);
- //		this.enterkeyFocusComponents.add(jTextField_Date);
- //		this.enterkeyFocusComponents.add(jComboBox_MetaboHantei);
- //		this.enterkeyFocusComponents.add(jComboBox_HokenSidouLevel);
- //		this.enterkeyFocusComponents.add(jComboBox_SeikyuKubun);
- //		// add ver2 s.inoue 2009/06/29
- //		if (isCopy){
- //			this.enterkeyFocusComponents.add(jTextField_SeiriNo);
- //		}
- //		this.enterkeyFocusComponents.add(jEditorPane_Comment);
- //	}
- //
- //	/* フォーカス初期化 */
- //	private void initializeFocusTraversal() {
- //		this.focusTraversalPolicy = new JFocusTraversalPolicy();
- //		this.setFocusTraversalPolicy(this.focusTraversalPolicy);
- //
- //		this.focusTraversalPolicy.setDefaultComponent(jComboBox_Pattern);
- //
- //		this.focusTraversalPolicy.addComponent(jComboBox_Pattern);
- //		this.focusTraversalPolicy.addComponent(jTextField_Date);
- //		this.focusTraversalPolicy.addComponent(jComboBox_SeikyuKubun);
- //		if (isCopy){
- //			this.focusTraversalPolicy.addComponent(jTextField_SeiriNo);
- //		}
- //		this.focusTraversalPolicy.addComponent(jComboBox_MetaboHantei);
- //		this.focusTraversalPolicy.addComponent(jComboBox_HokenSidouLevel);
- //		this.focusTraversalPolicy.addComponent(jEditorPane_Comment);
- //		this.focusTraversalPolicy.addComponent(model);
- //
- //		this.focusTraversalPolicy.addComponent(jButton_Register);
- //		this.focusTraversalPolicy.addComponent(jButton_Clear);
- //		this.focusTraversalPolicy.addComponent(jButton_End);
- //	}
- //
- //	// add s.inoue 2009/12/03
- //	private void functionListner(){
- //		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- //			Component comp = focusTraversalPolicy.getComponent(i);
- //			comp.addKeyListener(this);
- //		}
- //	}
- //
- //	/* テーブル項目登録 */
- //	private void initializeTableColumn(){
- //// del s.inoue 2009/11/23
- ////		   EachRowEditor rowEditor = new EachRowEditor(table);
- ////		    rowEditor.setEditorAt(1, new JComboCellEditor(kekkaCombo));
- ////		    table.getColumn("結果（数値）[入力]").setCellEditor(rowEditor);
- //
- //
- ////		for (int i = 0; i < comboData.size(); i++) {
- ////			this.model.setData(comboData.get(i).get("DATA"), Integer
- ////					.valueOf(comboData.get(i).get("ROW")), Integer
- ////					.valueOf(comboData.get(i).get("COLUMN")));
- ////			}
- //
- //		EachRowEditor rowEditor = new EachRowEditor(model);
- //
- //		// 結果(コード)
- //		for (int i = 0; i < comboData.size(); i++) {
- ////				if (comboData.get(i).get("COLUMN").equals(String.valueOf(COLUMN_IDX_KEKKA_CODE))){
- //					System.out.println(comboData.get(i).get("ROW")+ "行");
- //					kekkaCombo.addItem(comboData.get(i).get("ROW") + i);
- //
- //					// JComboCellEditor → DefaultCellEditor
- //					rowEditor.setEditorAt(
- //							Integer.valueOf(comboData.get(i).get("ROW")), new DefaultCellEditor(kekkaCombo));
- ////				}
- //		}
- //		model.getColumn("結果（コード）[入力]").setCellEditor(rowEditor);
- //
- ////		for (int i = 0; i < comboData.size(); i++) {
- ////			int rownon = Integer.valueOf(comboData.get(i).get("COLUMN"));
- ////			if (rownon != temprow){
- ////				System.out.println(rownon + "行");
- ////				rowEditor.setEditorAt(
- ////						Integer.valueOf(comboData.get(i).get("COLUMN")), new JComboCellEditor(kekkaCombo));
- ////			}
- ////			temprow = rownon;
- ////		}
- ////		table.getColumn("結果（数値）[入力]").setCellEditor(rowEditor);
- //
- //
- //		// rowcolumn[Integer.valueOf(comboData.get(i).get("ROW"))]
- //			//           [Integer.valueOf(comboData.get(i).get("COLUMN"))] = comboData.get(i).get("DATA");
- ////		kekkaComboEditor = new JComboCellEditor(kekkaCombo);
- ////		table.setCellComboBoxEditor(kekkaComboEditor, COLUMN_IDX_KEKKA_CODE);
- ////		table.getColumn("結果（数値）[入力]").setCellEditor(kekkaComboEditor);
- //
- ////		/* 基準値下限(男性),基準値上限(男性),基準値下限(女性),基準値上限(女性)を */
- ////		// 結果コード値のカラムをコンボボックスに
- ////		this.table.setCellComboBoxEditor(kekkaComboEditor, COLUMN_IDX_KEKKA_CODE);
- ////		// 実施区分
- ////		this.table.setCellComboBoxEditor(jisiComboEditor, COLUMN_IDX_JISIKBN);
- ////		// 判定結果のカラムをコンボボックスに
- ////		this.table.setCellComboBoxEditor(hanteiComboEditor, COLUMN_IDX_HANTEI);
- ////		// HLのカラムをコンボボックスに
- ////		this.table.setCellComboBoxEditor(hlComboEditor, COLUMN_IDX_HL);
- //	}
- //
- //	/* テーブルListner登録 */
- //	private void initializeTableListner() {
- //
- //		kekkaCombo.addKeyListener(new KeyListener(){
- //			@Override
- //			public void keyPressed(KeyEvent e) {
- //				if(e.getKeyCode() == KeyEvent.VK_ENTER){
- //					kekkaCombo.setSelectedIndex(kekkaCombo.getSelectedIndex());
- //				 }
- //			}
- //			@Override
- //			public void keyReleased(KeyEvent e) {}
- //			@Override
- //			public void keyTyped(KeyEvent e) {}
- //		});
- //
- //
- //		hanteiCombo.addKeyListener(new KeyListener(){
- //			@Override
- //			public void keyPressed(KeyEvent e) {
- //				if(e.getKeyCode() == KeyEvent.VK_ENTER){
- //					hanteiCombo.setSelectedIndex(hanteiCombo.getSelectedIndex());
- //				 }
- //			}
- //			@Override
- //			public void keyReleased(KeyEvent e) {}
- //			@Override
- //			public void keyTyped(KeyEvent e) {}
- //		});
- //
- //		hlCombo.addKeyListener(new KeyListener(){
- //			@Override
- //			public void keyPressed(KeyEvent e) {
- //				if(e.getKeyCode() == KeyEvent.VK_ENTER){
- //					hlCombo.setSelectedIndex(hlCombo.getSelectedIndex());
- //				 }
- //			}
- //			@Override
- //			public void keyReleased(KeyEvent e) {}
- //			@Override
- //			public void keyTyped(KeyEvent e) {}
- //		});
- //
- //		jisiCombo.addKeyListener(new KeyListener(){
- //			@Override
- //			public void keyPressed(KeyEvent e) {
- //				if(e.getKeyCode() == KeyEvent.VK_ENTER){
- //					jisiCombo.setSelectedIndex(jisiCombo.getSelectedIndex());
- //				 }
- //			}
- //			@Override
- //			public void keyReleased(KeyEvent e) {}
- //			@Override
- //			public void keyTyped(KeyEvent e) {}
- //		});
- //
- //	}
- //
- //	private void initializeComboBox() {
- //		// 保健指導レベルコンボボックスの初期設定
- //		jComboBox_HokenSidouLevel.addItem("未判定");
- //		jComboBox_HokenSidouLevel.addItem("積極的支援");
- //
- //		jComboBox_HokenSidouLevel.addItem("動機づけ支援");
- //		jComboBox_HokenSidouLevel.addItem("なし（情報提供）");
- //		jComboBox_HokenSidouLevel.addItem("判定不能");
- //
- //		// メタボリックシンドローム判定コンボボックスの初期設定
- //		jComboBox_MetaboHantei.addItem("未判定");
- //		jComboBox_MetaboHantei.addItem("基準該当");
- //
- //		jComboBox_MetaboHantei.addItem("予備群該当");
- //
- //		jComboBox_MetaboHantei.addItem("非該当");
- //		jComboBox_MetaboHantei.addItem("判定不能");
- //
- //		// 請求区分コンボボックスの初期設定
- //		jComboBox_SeikyuKubun.addItem("基本的な健診");
- //		jComboBox_SeikyuKubun.addItem("基本的な健診＋詳細な健診");
- //
- //		jComboBox_SeikyuKubun.addItem("基本的な健診＋追加健診項目");
- //		jComboBox_SeikyuKubun.addItem("基本的な健診＋詳細な健診＋追加健診項目");
- //
- //		jComboBox_SeikyuKubun.addItem("人間ドック");
- //	}
- //
- //	/**
- //	 * 列サイズを初期化する。
- //	 */
- //	private void initializeColumnWidth() {
- //		this.model.setAutoResizeMode(JSimpleTable.AUTO_RESIZE_OFF);
- //
- //		DefaultTableColumnModel columnModel = (DefaultTableColumnModel) this.modelfixed.getColumnModel();
- //		columnModel.getColumn(COLUMN_IDX_KOUMOKUCD).setMinWidth(0);
- //		columnModel.getColumn(COLUMN_IDX_KOUMOKUCD).setPreferredWidth(0);
- //		columnModel.getColumn(COLUMN_IDX_KOUMOKUCD).setMaxWidth(0);
- //		columnModel.getColumn(COLUMN_IDX_KOUMOKUCD).setWidth(0);
- //	}
- //
- //	/**
- //	 * 上限値下限値の項目をチェックを行う(CSV⇒DBへ変更)
- //	 */
- //	public static boolean CheckHighLawItem(String koumokuCode,String hknjaNm,String value){
- //		ArrayList<Hashtable<String, String>> result = null;
- //
- //		try{
- //			String[] params = { hknjaNm,koumokuCode };
- //
- //			String sql = "SELECT KOUMOKU_CD,KAGEN,JYOUGEN " +
- //			"FROM T_KENSHINMASTER WHERE HKNJANUM = ? AND KOUMOKU_CD = ? ";
- //
- //			// 空値の場合はチェックを行わない
- //			if (!value.isEmpty() ||
- //					!hknjaNm.isEmpty()) {
- //				String strKagen = "";
- //				String strJyogen = "";
- //
- //				result = JApplication.kikanDatabase.sendExecuteQuery(sql, params);
- //
- //				for (int i = 0; i < result.size(); i++) {
- //
- //					strKagen = result.get(i).get("KAGEN");
- //					strJyogen = result.get(i).get("JYOUGEN");
- //
- //					// 項目コードの結果判定の部分を除いて比較を行う
- //					// 範囲内の場合 true
- //					if (result.get(i).get("KOUMOKU_CD").equals(koumokuCode)) {
- //						if (value.isEmpty())
- //							break;
- //						if (strKagen.isEmpty() && strJyogen.isEmpty()){
- //							break;
- //						}else if (strKagen.isEmpty()){
- //							return Double.valueOf(strJyogen) >= Double.valueOf(value);
- //						}else if(strJyogen.isEmpty()){
- //							return Double.valueOf(strKagen) <= Double.valueOf(value);
- //						}else if (!strKagen.isEmpty() && !strJyogen.isEmpty()){
- //							return (Double.valueOf(strKagen) <= Double.valueOf(value)
- //									&& Double.valueOf(value) <= Double.valueOf(strJyogen));
- //						}
- //					}
- //				}
- //			}
- //		}catch(Exception ex){
- //			ex.printStackTrace();
- //			logger.warn(ex.getMessage());
- //		}
- //		// 見つからなかった場合
- //		return true;
- //	}
- //
- //	/**
- //	 * 上限値下限値チェックによるメッセージ取得を行う
- //	 */
- //	public String getHighLawMessage(String koumokuCode,String koumokuName,String hknjaNm,String value){
- //
- //		ArrayList<Hashtable<String, String>> result = null;
- //		String retMessage = "";
- //		String kekkaMessage ="";
- //
- //		try{
- //			String[] params = { hknjaNm,koumokuCode };
- //
- //			String sql = "SELECT KOUMOKU_CD,KAGEN,JYOUGEN " +
- //			"FROM T_KENSHINMASTER WHERE HKNJANUM = ? AND KOUMOKU_CD = ? ";
- //
- //			// 空値の場合はチェックを行わない
- //			if (!value.isEmpty() ||
- //					!hknjaNm.isEmpty()) {
- //				String strKagen = "";
- //				String strJyogen = "";
- //
- //				result = JApplication.kikanDatabase.sendExecuteQuery(sql, params);
- //
- //				for (int i = 0; i < result.size(); i++) {
- //
- //					strKagen = result.get(i).get("KAGEN");
- //					strJyogen = result.get(i).get("JYOUGEN");
- //
- //					// 項目コードの結果判定の部分を除いて比較を行う
- //					// 範囲内の場合 true
- //					if (result.get(i).get("KOUMOKU_CD").equals(koumokuCode)) {
- //						if (value.isEmpty())
- //							break;
- //						if (strKagen.isEmpty() && strJyogen.isEmpty()){
- //							break;
- //						}else if (strKagen.isEmpty()){
- //							if (Double.valueOf(strJyogen) < Double.valueOf(value)){
- //								kekkaMessage= strHighMessageValue + "["+ Double.valueOf(strJyogen) + "]" +"を超えています。";
- //							}
- //						}else if(strJyogen.isEmpty()){
- //							if (Double.valueOf(strKagen) > Double.valueOf(value)){
- //								kekkaMessage= strLowMessageValue + "["+ Double.valueOf(strKagen) + "]" +"を下回っています。";
- //							}
- //						}else if (!strKagen.isEmpty() && !strJyogen.isEmpty()){
- //							if (Double.valueOf(strKagen) > Double.valueOf(value)){
- //								kekkaMessage= strLowMessageValue + "["+ Double.valueOf(strKagen) + "]" +"を下回っています。";
- //							}else if(Double.valueOf(strJyogen) < Double.valueOf(value)){
- //								kekkaMessage= strHighMessageValue + "["+ Double.valueOf(strJyogen) + "]" +"を超えています。";
- //							}
- //						}
- //					}
- //				}
- //			}
- //		}catch(Exception ex){
- //			ex.printStackTrace();
- //			logger.error(ex.getMessage());
- //		}
- //
- //		if (!kekkaMessage.isEmpty()){
- //			retMessage = "[改行]項目コード[" + koumokuCode
- //			 + "] 項目名[" + koumokuName
- //			 + "][改行]の結果値[" + validatedData.getKekka()
- //			 + "]が" + kekkaMessage;
- //		}
- //
- //		return retMessage;
- //	}
- //
- //	/**
- //	 * 登録ボタンを押した際の必須項目等を検証する
- //	 */
- //	public boolean validateAsRegisterPushed(JKekkaRegisterFrameData data) {
- //		if (kenshinPatternNumber == -1 || data.getKensaJissiDate().equals("")
- //				|| data.getSeikyuKubun().equals("")) {
- //			JErrorMessage.show("M3610", this);
- //			return false;
- //		}
- //
- //		data.setValidateAsDataSet();
- //		return true;
- //	}
- //
- //
- //	/**
- //	 * 検査センター名称のコンボボックスが変更された場合に呼ばれる
- //	 */
- //	public void stateChangedKensaKikanName() {
- //
- //		String Query = new String(
- //				"SELECT DISTINCT KENSA_CENTER_CD,CENTER_NAME FROM T_KENSACENTER_MASTER");
- //		ArrayList<Hashtable<String, String>> Result = null;
- //		Hashtable<String, String> ResultItem;
- //
- //		try {
- //			Result = JApplication.kikanDatabase.sendExecuteQuery(Query);
- //		} catch (SQLException f) {
- //			f.printStackTrace();
- //		}
- //
- //		// コンボボックスに表示されている健診機関名称から検査センターコードを引く
- //		// 検査センターが未選択の場合でも検査センターコンボボックスで最初の項目が選択されてしまう障害の修正
- //		String selectedItem = (String) jComboBox_KensaKikanName
- //				.getSelectedItem();
- //		if ((jComboBox_KensaKikanName.getItemCount() != 0)
- //				&& (selectedItem != null)) {
- //			for (int i = 0; i < Result.size(); i++) {
- //				ResultItem = Result.get(i);
- //				if (ResultItem.get("CENTER_NAME").equals(selectedItem)) {
- //					// 以前と同じものが選択されていた場合はリフレッシュしない（編集していたものが消えてしまうため）
- //					if (validatedData.getKensaCenterCode().equals(
- //							ResultItem.get("KENSA_CENTER_CD"))) {
- //						break;
- //					} else {
- //						validatedData.setKensaCenterCode(ResultItem
- //								.get("KENSA_CENTER_CD"));
- //						refreshTable(jTextField_Date.getText(), true,false,false);
- //						refreshInputControl(jTextField_Date.getText(),false,false);
- //						break;
- //					}
- //				}
- //			}
- //		}
- //	}
- //
- //	/**
- //	 * 健診パターンデータ初期化
- //	 */
- //	public void stateInitKenshinPatternNumber(String jissiDate) {
- //		String kenshinPatternName = null;
- //		String query = "SELECT K_P_NO,K_P_NAME FROM T_KENSHIN_P_M WHERE K_P_NO >= 0 ";
- //		ArrayList<Hashtable<String, String>> result = null;
- //		Hashtable<String, String> ResultItem;
- //
- //		try {
- //			result = JApplication.kikanDatabase.sendExecuteQuery(query);
- //		} catch (SQLException f) {
- //			f.printStackTrace();
- //		}
- //		Object selectedItem = jComboBox_Pattern.getSelectedItem();
- //		if (selectedItem != null)
- //			kenshinPatternName = selectedItem.toString();
- //
- //		for (int i = 0; i < result.size(); i++) {
- //			ResultItem = result.get(i);
- //			if (ResultItem.get("K_P_NAME").equals(kenshinPatternName)) {
- //				if (kenshinPatternNumber == Integer.valueOf(ResultItem.get("K_P_NO"))) {
- //					break;
- //				} else {
- //					kenshinPatternNumber = Integer.valueOf(ResultItem.get("K_P_NO"));
- //					refreshTable(jissiDate, true,false,false);
- //					refreshInputControl(jTextField_Date.getText(),false,false);
- //					break;
- //				}
- //			}
- //		}
- //	}
- //
- //	/**
- //	 * 健診パターンのコンボボックスが変更された場合に呼ばれる blnKekkaは登録時のみ
- //	 */
- //	public boolean stateChangedKenshinPatternNumber(String uketukeId,String jissiDate,boolean blnKensaRegist,boolean blnKekka) {
- //		String kenshinPatternName = null;
- //		boolean retPattan = false;
- //		boolean blnNoEditPattarn = false;
- //
- //		String query = "SELECT K_P_NO,K_P_NAME FROM T_KENSHIN_P_M WHERE K_P_NO >= 0 ";
- //
- //		ArrayList<Hashtable<String, String>> result = null;
- //		Hashtable<String, String> ResultItem;
- //
- //		try {
- //			result = JApplication.kikanDatabase.sendExecuteQuery(query);
- //		} catch (SQLException f) {
- //			f.printStackTrace();
- //		}
- //
- //		Object selectedItem = jComboBox_Pattern.getSelectedItem();
- //		if (selectedItem != null)
- //			kenshinPatternName = selectedItem.toString();
- //
- //		// 登録時、変更前の健診パターンを使用し、
- //		// コンボボックスのパターン変更時健診パターンのバックアップする
- //		if (blnKensaRegist){
- //			// edit ver2 s.inoue 2009/08/25
- //			if (prekenshinPatternNumber == -1 || blnKekka){
- //				blnNoEditPattarn = true;
- //			}
- //			kenshinPatternNumber = prekenshinPatternNumber;
- //		}else{
- //			prekenshinPatternNumber = kenshinPatternNumber;
- //		}
- //
- //		for (int i = 0; i < result.size(); i++) {
- //			ResultItem = result.get(i);
- //			if (ResultItem.get("K_P_NAME").equals(kenshinPatternName)) {
- //
- //				// edit 20081201 s.inoue デフォルト値の場合処理をパターン削除行わない
- //				if (kenshinPatternNumber == Integer.valueOf(ResultItem.get("K_P_NO"))) {
- //					refreshTable(jissiDate, true,false,false);
- //					refreshInputControl(jTextField_Date.getText(),false,false);
- //					break;
- //				} else {
- //
- //					// add s.inoue 20081125 新規作成のときはチェック処理は行わない
- //					Long resultCnt = 0L;
- //					try {
- //						resultCnt = kensakekaTokuteiDao.selectByCountPrimaryKey(Long.valueOf(
- //								uketukeId),Integer.valueOf(jissiDate));
- //					} catch (Exception e) {
- //						e.printStackTrace();
- //					}
- //
- //					if (resultCnt <= 0) {
- //						kenshinPatternNumber = Integer.valueOf(ResultItem.get("K_P_NO"));
- //						refreshTable(jissiDate, true,false,false);
- //						refreshInputControl(jTextField_Date.getText(),false,false);
- //						break;
- //					}
- //
- //					// edit s.inoue 20081128 コンボ選択時、登録時でメッセージを変更する
- //					RETURN_VALUE retValue = null;
- //
- //					if (blnKensaRegist){ //登録実行時
- //						kenshinPatternNumber = Integer.valueOf(ResultItem.get("K_P_NO"));
- //						// edit ver2 s.inoue 2009/08/25
- //						// 削除実行
- //						if (!blnNoEditPattarn){
- //							if(pattarnKensaKoumoku()){
- //								refreshTable(jissiDate, true,false,true);
- //								refreshInputControl(jTextField_Date.getText(),false,false);
- //								retPattan= true;
- //							}else{
- //								refreshTable(jissiDate, true,false,false);
- //								refreshInputControl(jTextField_Date.getText(),false,false);
- //								retPattan= false;
- //							}
- //						}
- //					}else{ //コンボ選択時
- //						retValue = JErrorMessage.show("M3638", this);
- //
- //						if (retValue == RETURN_VALUE.YES) {
- //							kenshinPatternNumber = Integer.valueOf(ResultItem.get("K_P_NO"));
- //							refreshTable(jissiDate, true,false,true);
- //							refreshInputControl(jTextField_Date.getText(),false,false);
- //							retPattan= true;
- //						}else if(retValue == RETURN_VALUE.NO) {
- //							jComboBox_Pattern.setSelectedIndex(kenshinPatternNumber - 1);
- //						}
- //					}
- //
- //					break;
- //				}
- //			}
- //		}
- //		return retPattan;
- //	}
- //
- //	/**
- //	 * アクションの更新
- //	 */
- //	private void refreshCellAction(){
- //		// edit s.inoue 2009/12/24
- //		textAreaField = new ExtendedTextField("", 0, ImeMode.IME_ZENKAKU,false);
- //		TableColumn column = this.model.getColumnModel().getColumn(COLUMN_IDX_KEKKA_STR);
- //
- //// edit s.inoue 2009/12/24
- //		column.setCellEditor(
- //				new PopupWindowShowCellEditor(
- //						this,
- //						textAreaField,
- //						COLUMN_IDX_KEKKA_STR));
- //
- //// 改行複数モードだが、enter処理に困惑
- ////		column.setCellEditor(
- ////		new PopupWindowShowTextAreaCellEditor(
- ////				this,
- ////				textAreaField,
- ////				COLUMN_IDX_KEKKA_STR));
- //
- //
- ////		textField.addMouseListener(new MouseListener(){
- ////			// add s.inoue 2009/11/11
- ////			public void mousePressed(MouseEvent e) {
- ////				mousePopup(e);
- ////			}
- ////			public void mouseReleased(MouseEvent e) {
- ////				mousePopup(e);
- ////			}
- ////			// add s.inoue 2009/11/11
- ////			private void mousePopup(MouseEvent e) {
- ////				if (e.isPopupTrigger()) {
- ////					// ポップアップメニューを表示する
- ////					JComponent c = (JComponent)e.getSource();
- ////					jKekkaMojiretsuTextArea.showPopup(c, e.getX(), e.getY());
- ////					e.consume();
- ////				}
- ////			}
- ////			@Override
- ////			public void mouseClicked(MouseEvent e) {
- ////			}
- ////			@Override
- ////			public void mouseEntered(MouseEvent e) {
- ////			}
- ////			@Override
- ////			public void mouseExited(MouseEvent e) {
- ////			}
- ////		});
- //
- //		// edit s.inoue 2009/12/22
- //		// COLUMN_IDX_KEKKA_STR→12
- //		textAreaField.addKeyListener(new KeyAdapter(){
- //			IKekkaRegisterInputDialog dialog =
- //				JKekkaRegisterInputDialogFactory.createDialog(
- //						JKekkaRegisterFrameCtrl.this,COLUMN_IDX_KEKKA_STR);
- //
- //			@Override
- //			public void keyPressed(KeyEvent keyEvent) {
- //
- //				if (keyEvent.getKeyCode() == KeyEvent.VK_ENTER) {
- //
- //					// Shiftキーが一緒に押されたか?
- //					int modfiersKey = keyEvent.getModifiersEx();
- //
- //					if ((modfiersKey & InputEvent.CTRL_DOWN_MASK) == 0){
- //						return;
- //					}else{
- //						// 健診結果データ入力画面のテーブルから現在選択されているセルのデータを取得
- //						int columnIndex = model.getSelectedColumn();
- //						int rowIndex = model.getSelectedRow();
- //						String kekkaMojiretsu = (String) model.getData(rowIndex,columnIndex);
- //
- //						// "結果(文字列)"入力ダイアログのテキストエリアに選択セルデータをセット
- //						dialog.setText(kekkaMojiretsu);
- //						// "結果(文字列)"入力ダイアログ表示
- //						dialog.setVisible(true);
- //						// edit s.inoue 2009/12/06
- //						// if (dialog.getStatus() == RETURN_VALUE.OK){
- //						if (dialog.getStatus() == RETURN_VALUE.YES){
- //							// "結果(文字列)"入力ダイアログから入力された
- //							// 文字列を選択セルにセット
- //							textAreaField.setText(dialog.getText());
- //						}
- //					}
- //				}
- //			}
- //		});
- //
- //	}
- //
- //	/* フレーム上部のコンボボックスに関して既存データの読み込みを行う	*/
- //	public void refreshInputControl(String jissiDate,boolean blnClearData, boolean preview) {
- //
- //		// 受付ID,年度の追加対応
- //		// 検査結果データ特定テーブルから指定受付ID,検査実施年月日のレコードを1件取得する
- //		TKensakekaTokutei kensaTokutei = null;
- //		try {
- //
- //			String uketuke_id = "";
- //			if (isCopy && !preview){
- //				uketuke_id = validatedData.getUketukePre_id();
- //			}else{
- //				uketuke_id = validatedData.getUketuke_id();
- //			}
- //
- //			kensaTokutei = kensakekaTokuteiDao.selectByPrimaryKey(
- //					new Long(uketuke_id),
- //					new Integer(jissiDate));
- //
- //		} catch (Exception e) {
- //			e.printStackTrace();
- //			logger.error(e.getMessage());
- //		}
- //
- //		if (kensaTokutei != null) {
- //			// 総合コメントに関して表示を行う
- //			jEditorPane_Comment.setText(kensaTokutei.getKOMENTO());
- //
- //			// 請求区分に関して表示を行う
- //			Integer seikyuKbn = kensaTokutei.getSEIKYU_KBN();
- //			if (seikyuKbn == null) {
- //				// 必須項目のため未入力の場合は一番上のものを表示させておく
- //				jComboBox_SeikyuKubun.setSelectedIndex(0);
- //			} else {
- //				// 請求区分値に合致する項目を選択状態にする
- //				// 1: 基本的な健診
- //				// 2: 基本的な健診＋詳細な健診の場合
- //				// 3: 基本的な健診＋追加健診項目健診
- //				// 4: 基本的な健診＋詳細な健診+追加健診項目
- //				// 5: 人間ドック
- //				jComboBox_SeikyuKubun.setSelectedIndex(seikyuKbn.intValue() - 1);
- //			}
- //		}
- //
- //		if (blnClearData){
- //			jEditorPane_Comment.setText("");
- //		}
- //
- //		/* メタボリックシンドローム判定の結果を表示する。 */
- //		if (blnClearData){
- //			jComboBox_MetaboHantei.setSelectedIndex(0);
- //		}else{
- //			this.showMetablicResult(preview);
- //		}
- //
- //		/* 階層化の結果を表示する。 */
- //		if (blnClearData){
- //			jComboBox_HokenSidouLevel.setSelectedIndex(0);
- //		}else{
- //			this.showKaisoukaResult(preview);
- //		}
- //	}
- //
- //	/**
- //	 * テーブルの更新
- //	 */
- //	public Object[][] refreshTable(String jissiDate, boolean saveColumnWidth, boolean blnClearData, boolean preview) {
- //// del s.inoue 2009/11/20
- ////		if (saveColumnWidth) {
- ////			/* 列幅を保存しておく */
- ////			this.saveCurrentColumnsWidth();
- ////		}
- ////		this.table.clearAllRow();
- //
- //		comboData = new Vector<Hashtable<String, String>>();
- //
- //		// 最低限必要なデータを格納
- //		validatedData.setKensaJissiDate(jissiDate);
- //		validatedData.setHihokenjyaCode(jTextField_HokenjyaCode.getText());
- //		validatedData.setHihokenjyaNumber(jTextField_HokenjyaNumber.getText());
- //
- //		String query = this.createCellDataSql(preview);
- //		try {
- //			tableResult = JApplication.kikanDatabase.sendExecuteQuery(query);
- //		} catch (SQLException e) {
- //			e.printStackTrace();
- //			logger.error(e.getMessage());
- //		}
- //
- //		/* セルの色を更新する。 */
- //		// del s.inoue 2009/11/20
- ////		this.refreshTableCellColor();
- //
- //		// del s.inoue 2009/11/20
- ////		/* HL7、判定 */
- ////		this.table.setCellComboBoxEditor(hlComboEditor, COLUMN_IDX_HL);
- ////		this.table.setCellComboBoxEditor(hanteiComboEditor, COLUMN_IDX_HANTEI);
- ////
- ////		// 結果(文字列)・コメント欄にてEnterキー押下時に入力用ダイアログ表示用
- ////		TableColumn column = this.table.getColumnModel().getColumn(COLUMN_IDX_KEKKA_STR);
- ////
- ////		// 毎回newで呼び出し
- ////		refreshCellAction();
- ////
- ////		// 実施区分
- ////		this.table.setCellComboBoxEditor(jisiComboEditor, COLUMN_IDX_JISIKBN);
- ////
- ////		// 表中コメント欄
- ////		column = this.table.getColumnModel().getColumn(COLUMN_IDX_KOMENTO);
- ////		column.setCellEditor(new PopupWindowShowCellEditor(
- ////				this,new JTextField(), COLUMN_IDX_KOMENTO));
- ////
- ////		// 結果(数値)欄の入力値を小数点第2位以下四捨五入して表示
- ////		column = this.table.getColumnModel().getColumn(COLUMN_IDX_KEKKA_NUM);
- ////		column.setCellEditor(new InputDigitHalfUpCellEditor(new JTextField()));
- //
- //		/* 身長、体重、BMIのセル位置をクリアする。 */
- //		BMICellPosition = null;
- //		heightCellPosition = null;
- //		weightCellPosition = null;
- //
- //		rowcolumn = new Object[tableResult.size()][15];
- //
- //		for (int i = 0; i < tableResult.size(); i++) {
- //			Vector<String> insertItem = new Vector<String>();
- //			Hashtable<String, String> databaseItem = tableResult.get(i);
- //
- //			insertItem.add(databaseItem.get(COLUMN_NAME_KOUMOKUCD));
- //			insertItem.add(databaseItem.get(COLUMN_NAME_KOUMOKUNAME));
- //			insertItem.add(databaseItem.get(COLUMN_NAME_KENSA_HOUHOU));
- //
- //			rowcolumn[i][COLUMN_IDX_KOUMOKUCD] = databaseItem.get(COLUMN_NAME_KOUMOKUCD);
- //			rowcolumn[i][COLUMN_IDX_CODE_NAME] = databaseItem.get(COLUMN_NAME_KOUMOKUNAME);
- //			rowcolumn[i][COLUMN_IDX_CODE_KENSA_HOUHOU] = databaseItem.get(COLUMN_NAME_KENSA_HOUHOU);
- //
- //			// 既存のデータの読み込みを行う
- //			switch (Integer.valueOf(databaseItem.get(COLUMN_NAME_DATA_TYPE))) {
- //			case 1:
- //
- //				// 数値の場合
- //				// add ver2 s.inoue 2009/06/02
- //				if (blnClearData){
- //					insertItem.add("");
- //					rowcolumn[i][COLUMN_IDX_KEKKA_NUM] = "";
- //				}else{
- //					insertItem.add(JValidate.validateKensaKekkaDecimal(databaseItem.get(COLUMN_NAME_KEKA_TI),
- //							databaseItem.get(COLUMN_NAME_MAX_BYTE_LENGTH)));
- //					rowcolumn[i][COLUMN_IDX_KEKKA_NUM] = JValidate.validateKensaKekkaDecimal(databaseItem.get(COLUMN_NAME_KEKA_TI),
- //							databaseItem.get(COLUMN_NAME_MAX_BYTE_LENGTH));
- //				}
- //				insertItem.add(null);
- //				insertItem.add("");
- //				rowcolumn[i][COLUMN_IDX_KEKKA_CODE] = null;
- //				rowcolumn[i][COLUMN_IDX_KEKKA_STR] = "";
- //
- //				// ＢＭＩ値の場合は編集できないようにする
- //				if (databaseItem.get(COLUMN_NAME_KOUMOKUCD).equals(CODE_BMI)) {
- //					forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_NUM));
- //
- //					BMICellPosition = new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_NUM);
- //					BMIFormat = new String(databaseItem.get(COLUMN_NAME_MAX_BYTE_LENGTH));
- //				}
- //
- //				// 身長及び体重のデータはＢＭＩ計算に必要なためセルの位置を記憶しておく
- //				// 身長
- //				if (databaseItem.get(COLUMN_NAME_KOUMOKUCD).equals(CODE_SHINCHOU)) {
- //					heightCellPosition = new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_NUM);
- //				}
- //
- //				// 体重
- //				if (databaseItem.get(COLUMN_NAME_KOUMOKUCD).equals(CODE_TAIJU)) {
- //					weightCellPosition = new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_NUM);
- //				}
- //				break;
- //
- //			case 2:
- //				/* コードの場合 */
- //				insertItem.add("");
- //				rowcolumn[i][COLUMN_IDX_KEKKA_NUM] = "";
- //
- //				ArrayList<Hashtable<String, String>> codeResult = null;
- //				Hashtable<String, String> codeResultItem;
- //				query = new String("SELECT KOUMOKU_CD, CODE_NUM, CODE_NAME FROM T_DATA_TYPE_CODE WHERE KOUMOKU_CD = "
- //						+ JQueryConvert.queryConvert(databaseItem.get(COLUMN_NAME_KOUMOKUCD)));
- //				try {
- //					codeResult = JApplication.kikanDatabase.sendExecuteQuery(query);
- //				} catch (SQLException e) {
- //					e.printStackTrace();
- //					logger.error(e.getMessage());
- //				}
- //				// add s.inoue 2010/02/19
- //				kekkaCombo = new ExtendedComboBox();
- //
- //				kekkaComboEditor = new JComboCellEditor(kekkaCombo);
- //				kekkaComboEditor.delItems(i);
- //
- //				// 未入力も選べるようにする
- //				kekkaComboEditor.addItem(i, "");
- //				for (int j = 0; j < codeResult.size(); j++) {
- //					codeResultItem = codeResult.get(j);
- //					kekkaComboEditor.addItem(i, codeResultItem.get(COLUMN_NAME_CODE_NAME));
- //
- //					// 既存のDBの項目をコンボボックスに表示させる
- //					System.out.println(databaseItem.get(COLUMN_NAME_KEKA_TI) +
- //							codeResultItem.get(COLUMN_NAME_CODE_NUM));
- //// del s.inoue 2010/02/19
- //					if (databaseItem.get(COLUMN_NAME_KEKA_TI).equals(
- //							codeResultItem.get(COLUMN_NAME_CODE_NUM))) {
- //						kekkaCmbdataSet = new Hashtable<String, String>();
- //						if (blnClearData){
- //							kekkaCmbdataSet.put("DATA", "");
- //						}else{
- //							// kekkaCmbdataSet.put("DATA", codeResultItem.get(COLUMN_NAME_CODE_NAME));
- //							kekkaCmbdataSet.put("DATA", codeResultItem.get(COLUMN_NAME_CODE_NAME) + "あ" + i);
- //							kekkaCmbdataSet.put("DATA", codeResultItem.get(COLUMN_NAME_CODE_NAME) + "い" + i);
- //						}
- //
- //						kekkaCmbdataSet.put("ROW", String.valueOf(i));
- //						kekkaCmbdataSet.put("COLUMN", String.valueOf(COLUMN_IDX_KEKKA_CODE));
- //
- //						comboData.add(kekkaCmbdataSet);
- //					}
- //				}
- //
- //				insertItem.add(null);
- //				insertItem.add("");
- //
- //				rowcolumn[i][COLUMN_IDX_KEKKA_CODE] = null;
- //				rowcolumn[i][COLUMN_IDX_KEKKA_STR] = "";
- //				break;
- //
- //			case 3:
- //				/* 文字列の場合 */
- //				insertItem.add("");
- //				insertItem.add(null);
- //				rowcolumn[i][COLUMN_IDX_KEKKA_NUM] = "";
- //				rowcolumn[i][COLUMN_IDX_KEKKA_CODE] = null;
- //
- //				if (blnClearData){
- //					insertItem.add("");
- //					rowcolumn[i][COLUMN_IDX_KEKKA_STR] = "";
- //				}else{
- //					insertItem.add(JValidate.validateKensaKekkaText(databaseItem
- //							.get(COLUMN_NAME_KEKA_TI), databaseItem.get(COLUMN_NAME_MAX_BYTE_LENGTH)));
- //					rowcolumn[i][COLUMN_IDX_KEKKA_STR] = JValidate.validateKensaKekkaText(databaseItem
- //							.get(COLUMN_NAME_KEKA_TI), databaseItem.get(COLUMN_NAME_MAX_BYTE_LENGTH));
- //				}
- //
- //				break;
- //			}
- //
- //			/*
- //			 * 既存の実施区分をコンボボックスにコード名として表示する
- //			 */
- //			insertItem.add(null);
- //			rowcolumn[i][COLUMN_IDX_KEKKA_STR] = null;
- //// del s.inoue 2009/11/23
- ////			jisiComboEditor.delItems(i);
- ////			for (int k = 0; k < JApplication.jishiKBNTable.length; k++) {
- ////				jisiComboEditor.addItem(i, JApplication.jishiKBNTable[k]);
- ////			}
- //			if (databaseItem.get(COLUMN_NAME_JISI_KBN).isEmpty()) {
- //				Hashtable<String, String> dataSet = new Hashtable<String, String>();
- //				dataSet.put("DATA", JApplication.jishiKBNTable[1]);
- //				dataSet.put("ROW", String.valueOf(i));
- //				dataSet.put("COLUMN", String.valueOf(COLUMN_IDX_JISIKBN));
- //				comboData.add(dataSet);
- //			} else {
- //				Hashtable<String, String> dataSet = new Hashtable<String, String>();
- //				if (blnClearData){
- //					dataSet.put("DATA", JApplication.jishiKBNTable[1]);
- //				}else{
- //					dataSet.put("DATA", JApplication.jishiKBNTable[Integer.valueOf(databaseItem.get(COLUMN_NAME_JISI_KBN))]);
- //				}
- //				dataSet.put("ROW", String.valueOf(i));
- //				dataSet.put("COLUMN", String.valueOf(COLUMN_IDX_JISIKBN));
- //				comboData.add(dataSet);
- //			}
- //
- //			/* 基準値下限(男性),基準値上限(男性),基準値下限(女性),基準値上限(女性)を */
- //			/* テーブルに表示 */
- //			// 既存のデータの読み込みを行う
- //			String LimitFormat = databaseItem.get(COLUMN_NAME_MAX_BYTE_LENGTH);
- //			String limitValeDsKagen = databaseItem.get(COLUMN_NAME_DS_KAGEN);
- //			String limitValeDsJyougen = databaseItem.get(COLUMN_NAME_DS_JYOUGEN);
- //			String limitValeJsKagen = databaseItem.get(COLUMN_NAME_JS_KAGEN);
- //			String limitValeJsJyougen = databaseItem.get(COLUMN_NAME_JS_JYOUGEN);
- //
- //			// 数値項目のみ基準値を設定する
- //			switch (Integer.valueOf(databaseItem.get(COLUMN_NAME_DATA_TYPE))) {
- //			case 1:
- //				if (!limitValeDsKagen.equals("")){
- //					insertItem.add(JValidate.DecimalFormatValue(limitValeDsKagen,LimitFormat));
- //					rowcolumn[i][COLUMN_IDX_DS_KAGEN] = JValidate.DecimalFormatValue(limitValeDsKagen,LimitFormat);
- //				}else{
- //					insertItem.add("");
- //					rowcolumn[i][COLUMN_IDX_DS_KAGEN] = "";
- //				}
- //				if (!limitValeDsJyougen.equals("")){
- //					insertItem.add(JValidate.DecimalFormatValue(limitValeDsJyougen,LimitFormat));
- //					rowcolumn[i][COLUMN_IDX_DS_JYOUGEN] = JValidate.DecimalFormatValue(limitValeDsJyougen,LimitFormat);
- //				}else{
- //					insertItem.add("");
- //					rowcolumn[i][COLUMN_IDX_DS_JYOUGEN] = "";
- //				}
- //				if (!limitValeJsKagen.equals("")){
- //					insertItem.add(JValidate.DecimalFormatValue(limitValeJsKagen,LimitFormat));
- //					rowcolumn[i][COLUMN_IDX_JS_KAGEN] = JValidate.DecimalFormatValue(limitValeJsKagen,LimitFormat);
- //				}else{
- //					insertItem.add("");
- //					rowcolumn[i][COLUMN_IDX_JS_KAGEN] = "";
- //				}
- //				if (!limitValeJsJyougen.equals("")){
- //					insertItem.add(JValidate.DecimalFormatValue(limitValeJsJyougen,LimitFormat));
- //					rowcolumn[i][COLUMN_IDX_JS_JYOUGEN] = JValidate.DecimalFormatValue(limitValeJsJyougen,LimitFormat);
- //				}else{
- //					insertItem.add("");
- //					rowcolumn[i][COLUMN_IDX_JS_JYOUGEN] = "";
- //				}
- //				break;
- //			case 2:
- //			case 3:
- //				// edit s.inoue 2009/09/29 1項目多い
- //				insertItem.add("");
- //				insertItem.add("");
- //				insertItem.add("");
- //				insertItem.add("");
- //				rowcolumn[i][COLUMN_IDX_DS_KAGEN] = "";
- //				rowcolumn[i][COLUMN_IDX_DS_JYOUGEN] = "";
- //				rowcolumn[i][COLUMN_IDX_JS_KAGEN] = "";
- //				rowcolumn[i][COLUMN_IDX_JS_JYOUGEN] = "";
- //				break;
- //			}
- //
- //			/*
- //			 * 既存のHLコード値をコンボボックスにコード名として表示する
- //			 */
- //			insertItem.add(null);
- //			rowcolumn[i][COLUMN_IDX_HL] = null;
- //			// del s.inoue 2009/11/23
- ////			hlComboEditor.delItems(i);
- ////			for (int k = 0; k < hlCodeTable.length; k++) {
- ////				hlComboEditor.addItem(i, hlCodeTable[k]);
- ////			}
- //			if (databaseItem.get(COLUMN_NAME_H_L).isEmpty()) {
- //				Hashtable<String, String> dataSet = new Hashtable<String, String>();
- //				dataSet.put("DATA", hlCodeTable[0]);
- //				dataSet.put("ROW", String.valueOf(i));
- //				/* 基準値下限(男性),基準値上限(男性),基準値下限(女性),基準値上限(女性)を */
- //				/* テーブルに表示 */
- //				dataSet.put("COLUMN", String.valueOf(COLUMN_IDX_HL));
- //				comboData.add(dataSet);
- //			} else {
- //				Hashtable<String, String> dataSet = new Hashtable<String, String>();
- //				// add ver2 s.inoue 2009/06/02
- //				if (blnClearData){
- //					dataSet.put("DATA", "");
- //				}else{
- //					dataSet.put("DATA", hlCodeTable[Integer.valueOf(databaseItem.get(COLUMN_NAME_H_L))]);
- //				}
- //				dataSet.put("ROW", String.valueOf(i));
- //				/* 基準値下限(男性),基準値上限(男性),基準値下限(女性),基準値上限(女性)を */
- //				/* テーブルに表示 */
- //				dataSet.put("COLUMN", String.valueOf(COLUMN_IDX_HL));
- //				comboData.add(dataSet);
- //			}
- //
- //			/*
- //			 * 既存の判定区分のコード値をコンボボックスにコード名として表示する
- //			 */
- //			insertItem.add(null);
- //			rowcolumn[i][COLUMN_IDX_HANTEI] = null;
- //			// del s.inoue 2009/11/23
- ////			hanteiComboEditor.delItems(i);
- ////			for (int k = 0; k < hanteiCodeTable.length; k++) {
- ////				hanteiComboEditor.addItem(i, hanteiCodeTable[k]);
- ////			}
- //			if (databaseItem.get(COLUMN_NAME_HANTEI).isEmpty()) {
- //				Hashtable<String, String> dataSet = new Hashtable<String, String>();
- //				dataSet.put("DATA", hanteiCodeTable[0]);
- //				dataSet.put("ROW", String.valueOf(i));
- //				dataSet.put("COLUMN", String.valueOf(COLUMN_IDX_HANTEI));
- //				comboData.add(dataSet);
- //			} else {
- //				Hashtable<String, String> dataSet = new Hashtable<String, String>();
- //
- //				if (blnClearData){
- //					dataSet.put("DATA", "");
- //				}else{
- //					dataSet.put("DATA", hanteiCodeTable[Integer.valueOf(databaseItem.get(COLUMN_NAME_HANTEI))]);
- //				}
- //				dataSet.put("ROW", String.valueOf(i));
- //				dataSet.put("COLUMN", String.valueOf(COLUMN_IDX_HANTEI));
- //				comboData.add(dataSet);
- //			}
- //
- //			/* コメント */
- //			if (blnClearData){
- //				insertItem.add("");
- //				rowcolumn[i][COLUMN_IDX_KOMENTO] = "";
- //			}else{
- //				insertItem.add(databaseItem.get(COLUMN_NAME_KOMENTO));
- //				rowcolumn[i][COLUMN_IDX_KOMENTO] = databaseItem.get(COLUMN_NAME_KOMENTO);
- //			}
- //
- //
- //			// edit s.inoue 2009/11/22
- //			rowcolumn[i][COLUMN_IDX_HISUFLG] = databaseItem.get(COLUMN_NAME_HISU_FLG);
- //// del s.inoue 2009/11/20
- ////			/* 入力上限、下限値 */
- ////			String maxValeKagen = databaseItem.get(COLUMN_NAME_KAGEN);
- ////			String maxValeJyougen = databaseItem.get(COLUMN_NAME_JYOUGEN);
- ////
- ////			if (!maxValeKagen.equals("")){
- ////				insertItem.add(JValidate.DecimalFormatValue(maxValeKagen,LimitFormat));
- ////			}else{
- ////				insertItem.add("");
- ////			}
- ////
- ////			if (!maxValeJyougen.equals("")){
- ////				if (databaseItem.get(COLUMN_NAME_KOUMOKUCD).equals("2A040000001930102")){
- ////					insertItem.add("99.9");
- ////				}else{
- ////					insertItem.add(JValidate.DecimalFormatValue(maxValeJyougen,LimitFormat));
- ////				}
- ////			}else{
- ////				insertItem.add("");
- ////			}
- //
- //			// del s.inoue 2010/02/18
- //			// 一行ごとにデータを挿入していく
- //			// this.model.addData(insertItem);
- //		}
- //
- //// del s.inoue 2010/02/19
- ////		for (int i = 0; i < comboData.size(); i++) {
- ////			this.model.setData(comboData.get(i).get("DATA"), Integer
- ////					.valueOf(comboData.get(i).get("ROW")), Integer
- ////					.valueOf(comboData.get(i).get("COLUMN")));
- ////		}
- //
- //		for (int i = 0; i < comboData.size(); i++) {
- //			rowcolumn[Integer.valueOf(comboData.get(i).get("ROW"))]
- //			          [Integer.valueOf(comboData.get(i).get("COLUMN"))] = comboData.get(i).get("DATA");
- //		}
- //
- //		return rowcolumn;
- //		// move s.inoue 2009/11/20
- //		/* 列の幅を初期化または復元する。 */
- ////		this.initializeColumnWidth();
- ////		this.table.refreshTable();
- ////		this.setTableFocusMap();
- //	}
- //
- //	/* 列幅保存処理 */
- //	private void saveCurrentColumnsWidth() {
- //		/* 列幅を保存しておく */
- //		int columnCount = this.model.getColumnCount();
- //
- //		int[] columnWidths = new int[columnCount];
- //		for (int i = 0; i < columnCount; i++) {
- //			int width = this.model.getColumnModel().getColumn(i).getWidth();
- //			columnWidths[i] = width;
- //		}
- //
- //		this.model.setPreferedColumnWidths(columnWidths);
- //	}
- //
- //	/**
- //	 * セルの色に最新の状態を反映する。
- //	 */
- //	private void refreshTableCellColor() {
- //		cellColors.clear();
- //		// del s.inoue 2009/11/20
- //		// forbitCells.clear();
- //
- //		// テーブルの仕様上、セルの禁止設定のみを先に行う
- //		for (int i = 0; i < tableResult.size(); i++) {
- //			Hashtable<String, String> databaseItem = tableResult.get(i);
- //
- //			int dataType = Integer.valueOf(databaseItem.get(COLUMN_NAME_DATA_TYPE));
- //			int hisuFlg = Integer.valueOf(databaseItem.get(COLUMN_NAME_HISU_FLG));
- //
- //			switch (dataType)
- //			{
- //			case 1:
- //				/* 数値の場合 */
- //// del s.inoue
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_KOUMOKUCD));
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_CODE_NAME));
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_CODE_KENSA_HOUHOU));
- //
- //				if (hisuFlg == HISU_FLG_HISU) {
- //					cellColors.add(new JSimpleTableCellRendererData(COLOR_HISU,new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_NUM)));
- //				}else{
- //					cellColors.add(new JSimpleTableCellRendererData(COLOR_ABLE,new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_NUM)));
- //				}
- //
- //				cellColors.add(new JSimpleTableCellRendererData(COLOR_DISABLE,new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_CODE)));
- //				cellColors.add(new JSimpleTableCellRendererData(COLOR_DISABLE,new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_STR)));
- //// del s.inoue
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_CODE));
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_STR));
- //
- //				cellColors.add(new JSimpleTableCellRendererData(COLOR_HISU,new JSimpleTableCellPosition(i, COLUMN_IDX_JISIKBN)));
- //// del s.inoue
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_DS_KAGEN));
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_DS_JYOUGEN));
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_JS_KAGEN));
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_JS_JYOUGEN));
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_HL));
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_HANTEI));
- //
- //				cellColors.add(new JSimpleTableCellRendererData(COLOR_ABLE,new JSimpleTableCellPosition(i, COLUMN_IDX_KOMENTO)));
- //				break;
- //
- //			case 2:
- //				/* コードの場合 */
- //// del s.inoue
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_KOUMOKUCD));
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_CODE_NAME));
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_CODE_KENSA_HOUHOU));
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_NUM));
- //
- //				cellColors.add(new JSimpleTableCellRendererData(COLOR_DISABLE,
- //						new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_NUM)));
- //
- //				if (hisuFlg == HISU_FLG_HISU) {
- //					cellColors.add(new JSimpleTableCellRendererData(COLOR_HISU,
- //							new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_CODE)));
- //				}else{
- //					cellColors.add(new JSimpleTableCellRendererData(COLOR_ABLE,new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_CODE)));
- //				}
- //
- //				cellColors.add(new JSimpleTableCellRendererData(COLOR_DISABLE,new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_STR)));
- //
- //				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_STR));
- //
- //				cellColors.add(new JSimpleTableCellRendererData(COLOR_HISU,new JSimpleTableCellPosition(i, COLUMN_IDX_JISIKBN)));
- //
- //// del s.inoue
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_DS_KAGEN));
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_DS_JYOUGEN));
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_JS_KAGEN));
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_JS_JYOUGEN));
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_HL));
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_HANTEI));
- //
- //				cellColors.add(new JSimpleTableCellRendererData(COLOR_ABLE,new JSimpleTableCellPosition(i, COLUMN_IDX_KOMENTO)));
- //				break;
- //
- //			case 3:
- //				/* 文字列の場合 */
- //// del s.inoue
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_KOUMOKUCD));
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_CODE_NAME));
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_CODE_KENSA_HOUHOU));
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_NUM));
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_CODE));
- //
- //				cellColors.add(new JSimpleTableCellRendererData(COLOR_DISABLE,
- //						new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_NUM)));
- //				cellColors.add(new JSimpleTableCellRendererData(COLOR_DISABLE,
- //						new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_CODE)));
- //
- //				if (hisuFlg == HISU_FLG_HISU) {
- //					cellColors.add(new JSimpleTableCellRendererData(COLOR_HISU,
- //							new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_STR)));
- //				}else{
- //					cellColors.add(new JSimpleTableCellRendererData(COLOR_ABLE,new JSimpleTableCellPosition(i, COLUMN_IDX_KEKKA_STR)));
- //				}
- //
- //				cellColors.add(new JSimpleTableCellRendererData(COLOR_HISU,
- //						new JSimpleTableCellPosition(i, COLUMN_IDX_JISIKBN)));
- //// del s.inoue
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_DS_KAGEN));
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_DS_JYOUGEN));
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_JS_KAGEN));
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_JS_JYOUGEN));
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_HL));
- ////				forbitCells.add(new JSimpleTableCellPosition(i, COLUMN_IDX_HANTEI));
- //
- //				cellColors.add(new JSimpleTableCellRendererData(COLOR_ABLE,new JSimpleTableCellPosition(i, COLUMN_IDX_KOMENTO)));
- //				break;
- //			}
- //		}
- //
- //		/*
- //		 * セルの編集禁止を設定した後はコンボボックスの設定がクリアされるため再度設定を行いその後データをセットする
- //		 * 順番を入れ替えると正常に動作しない可能性があるため注意
- //		 */
- ////		this.table.setCellEditForbid(forbitCells);
- //		// del s.inoue 2010/02/19
- ////		this.model.setCellComboBoxEditor(kekkaComboEditor, COLUMN_IDX_KEKKA_CODE);
- //
- ////		this.table.setCellComboBoxEditor(jisiComboEditor, COLUMN_IDX_JISIKBN);
- //
- ////		rowEditor = new EachRowEditor(table);
- ////		rowEditor.setEditorAt(3, new DefaultCellEditor(kekkaCombo));
- ////		table.getColumn("結果（数値）[入力]").setCellEditor(kekkaComboEditor);
- //
- //	}
- //
- //	/* 階層化データ表示 */
- //	private void showKaisoukaResult(boolean preview) {
- //		String query;
- //		/* 階層化の結果を表示する。 */
- //		List<Hashtable<String, String>> textFieldResult = new ArrayList<Hashtable<String, String>>();
- //		query = this.createKaisoukaSql(preview);
- //		try {
- //			textFieldResult = JApplication.kikanDatabase.sendExecuteQuery(query);
- //		} catch (SQLException f) {
- //			f.printStackTrace();
- //		}
- //
- //		if (textFieldResult.size() != 0) {
- //			if (textFieldResult.get(0).get(COLUMN_NAME_KEKA_TI).equals("")) {
- //				jComboBox_HokenSidouLevel.setSelectedIndex(0);
- //			} else {
- //				switch (Integer.valueOf(textFieldResult.get(0).get(COLUMN_NAME_KEKA_TI))) {
- //				// 積極的支援が選択されている場合
- //				case 1:
- //					jComboBox_HokenSidouLevel.setSelectedIndex(1);
- //					break;
- //
- //				// 動機づけ支援が選択されている場合
- //				case 2:
- //					jComboBox_HokenSidouLevel.setSelectedIndex(2);
- //					break;
- //
- //				// なし
- //				case 3:
- //					jComboBox_HokenSidouLevel.setSelectedIndex(3);
- //					break;
- //
- //				// 判定不能
- //				case 4:
- //					jComboBox_HokenSidouLevel.setSelectedIndex(4);
- //					break;
- //				}
- //			}
- //		}
- //	}
- //
- //	/* メタボリックシンドローム判定表示 */
- //	private void showMetablicResult(boolean preview) {
- //		String query;
- //		/* メタボリックシンドローム判定の結果を表示する。 */
- //		query = this.createMetabolicSql(preview);
- //
- //		List<Hashtable<String, String>> textFieldResult = new ArrayList<Hashtable<String, String>>();
- //
- //		try {
- //			textFieldResult = JApplication.kikanDatabase.sendExecuteQuery(query);
- //		} catch (SQLException e) {
- //			logger.error(e.getMessage());
- //			e.printStackTrace();
- //		}
- //
- //		if (textFieldResult.size() != 0) {
- //			if (textFieldResult.get(0).get(COLUMN_NAME_KEKA_TI).equals("")) {
- //				// 未判定
- //				jComboBox_MetaboHantei.setSelectedIndex(0);
- //			} else {
- //				switch (Integer.valueOf(textFieldResult.get(0).get(COLUMN_NAME_KEKA_TI))) {
- //				// 基準該当の場合
- //				case 1:
- //					jComboBox_MetaboHantei.setSelectedIndex(1);
- //					break;
- //
- //				// 予備軍該当の場合
- //				case 2:
- //					jComboBox_MetaboHantei.setSelectedIndex(2);
- //					break;
- //
- //				// 非該当の場合
- //				case 3:
- //					jComboBox_MetaboHantei.setSelectedIndex(3);
- //					break;
- //
- //				// 判定不能の場合
- //				case 4:
- //					jComboBox_MetaboHantei.setSelectedIndex(4);
- //					break;
- //				}
- //			}
- //		}
- //	}
- //
- //	/* 階層化データ取得 */
- //	private String createKaisoukaSql(boolean preview) {
- //		String query;
- //		StringBuffer buffer = new StringBuffer();
- //		buffer.append("SELECT master.KOUMOKU_CD AS KOUMOKUCD,");
- //		buffer.append("master.KOUMOKU_NAME AS KOUMOKUNAME,");
- //		buffer.append("master.KENSA_HOUHOU AS KENSA_HOUHOU,");
- //		buffer.append("sonota.KEKA_TI,");
- //		buffer.append("master.DS_KAGEN,");
- //		buffer.append("master.DS_JYOUGEN,");
- //		buffer.append("master.JS_KAGEN,");
- //		buffer.append("master.JS_JYOUGEN,");
- //		buffer.append("master.DATA_TYPE,");
- //		buffer.append("master.MAX_BYTE_LENGTH,");
- //		buffer.append("sonota.KOMENTO,");
- //		buffer.append("sonota.H_L,");
- //		buffer.append("sonota.HANTEI ");
- //		buffer.append("FROM ");
- //		buffer.append(" (T_KENSHINMASTER master ");
- //		buffer.append("LEFT JOIN T_KENSACENTER_MASTER kensa ");
- //		buffer.append("ON kensa.KOUMOKU_CD = master.KOUMOKU_CD ");
- //		buffer.append(" AND kensa.KENSA_CENTER_CD = ");
- //		buffer.append(JQueryConvert.queryConvert(validatedData.getKensaCenterCode()));
- //		buffer.append(" )LEFT JOIN T_KENSAKEKA_SONOTA sonota ");
- //		buffer.append("ON sonota.KOUMOKU_CD = master.KOUMOKU_CD ");
- //		buffer.append(" AND sonota.KENSA_NENGAPI = ");
- //		buffer.append(JQueryConvert.queryConvert(validatedData.getKensaJissiDate()));
- //		buffer.append(" AND sonota.UKETUKE_ID = ");
- //		// add ver2 s.inoue 2009/06/25
- //		if (isCopy && !preview){
- //			buffer.append(JQueryConvert.queryConvert(validatedData.getUketukePre_id()));
- //		}else{
- //			buffer.append(JQueryConvert.queryConvert(validatedData.getUketuke_id()));
- //		}
- //
- //		buffer.append(" WHERE master.KOUMOKU_CD IN ");
- //		buffer.append("( ");
- //		buffer.append("SELECT KOUMOKU_CD ");
- //		buffer.append("FROM T_KENSHIN_P_S ");
- //		buffer.append("WHERE K_P_NO = ");
- //		buffer.append(JQueryConvert.queryConvert(String.valueOf(kenshinPatternNumber)) + " AND ");
- //		buffer.append("KOUMOKU_CD IN ");
- //		buffer.append("( ");
- //
- //		// 保健指導レベルのみを対象とする
- //		buffer.append(JQueryConvert.queryConvert("9N506000000000011") + ") " + ") ");
- //		buffer.append("AND " + "master.HKNJANUM = ");
- //		buffer.append(JQueryConvert.queryConvert(validatedData.getHokenjyaNumber()));
- //		query = buffer.toString();
- //		return query;
- //	}
- //
- //	/* メタボリックシンドローム判定表示 */
- //	private String createMetabolicSql(boolean preview) {
- //		String query;
- //		// メタボリックシンドローム判定に関する表示を行う
- //		StringBuffer buffer = new StringBuffer();
- //		buffer.append("SELECT master.KOUMOKU_CD AS KOUMOKUCD,");
- //		buffer.append("master.KOUMOKU_NAME AS KOUMOKUNAME,");
- //		buffer.append("master.KENSA_HOUHOU AS KENSA_HOUHOU,");
- //		buffer.append("sonota.KEKA_TI,");
- //		buffer.append("master.DS_KAGEN,");
- //		buffer.append("master.DS_JYOUGEN,");
- //		buffer.append("master.JS_KAGEN,");
- //		buffer.append("master.JS_JYOUGEN,");
- //		buffer.append("master.DATA_TYPE,");
- //		buffer.append("master.MAX_BYTE_LENGTH,");
- //		buffer.append("sonota.KOMENTO,");
- //		buffer.append("sonota.H_L,");
- //		buffer.append("sonota.HANTEI ");
- //		buffer.append("FROM ");
- //		buffer.append("( ");
- //		buffer.append("T_KENSHINMASTER master ");
- //		buffer.append("LEFT JOIN T_KENSACENTER_MASTER kensa ");
- //		buffer.append("ON kensa.KOUMOKU_CD = master.KOUMOKU_CD ");
- //		buffer.append(" AND ");
- //		buffer.append("kensa.KENSA_CENTER_CD = ");
- //		buffer.append(JQueryConvert
- //								.queryConvert(validatedData.getKensaCenterCode()));
- //		buffer.append(") ");
- //		buffer.append("LEFT JOIN T_KENSAKEKA_SONOTA sonota ");
- //		buffer.append("ON sonota.KOUMOKU_CD = master.KOUMOKU_CD ");
- //		buffer.append(" AND ");
- //		buffer.append("sonota.KENSA_NENGAPI = ");
- //		buffer.append(JQueryConvert.queryConvert(validatedData.getKensaJissiDate()));
- //		buffer.append(" AND ");
- //		buffer.append("sonota.UKETUKE_ID = ");
- //		// add ver2 s.inoue 2009/06/25
- //		if (isCopy && !preview){
- //			buffer.append(JQueryConvert.queryConvert(validatedData.getUketukePre_id()));
- //		}else{
- //			buffer.append(JQueryConvert.queryConvert(validatedData.getUketuke_id()));
- //		}
- //
- //		buffer.append(" ");
- //		buffer.append("WHERE master.KOUMOKU_CD IN ");
- //		buffer.append("( ");
- //		buffer.append("SELECT KOUMOKU_CD ");
- //		buffer.append("FROM T_KENSHIN_P_S ");
- //		buffer.append("WHERE K_P_NO = ");
- //		buffer.append(JQueryConvert.queryConvert(
- //				String.valueOf(kenshinPatternNumber)));
- //		buffer.append(" AND ");
- //		buffer.append("KOUMOKU_CD IN ");
- //		buffer.append("( ");
- //		//		 メタボリック診断のみを対象とする
- //		buffer.append(JQueryConvert.queryConvert("9N501000000000011"));
- //		buffer.append(") ");
- //		buffer.append(") ");
- //		buffer.append("AND ");
- //		buffer.append("master.HKNJANUM = ");
- //		buffer.append(JQueryConvert.queryConvert(
- //				validatedData.getHokenjyaNumber()));
- //		query = buffer.toString();
- //		return query;
- //	}
- //
- //	/* テーブルデータ表示データ */
- //	private String createCellDataSql(boolean preview) {
- //		StringBuffer buffer = new StringBuffer();
- //
- //		buffer.append("SELECT master.KOUMOKU_CD AS KOUMOKUCD,");
- //		// edit ver2 s.inoue 2009/07/23
- //		//buffer.append("master.KOUMOKU_NAME AS KOUMOKUNAME,");
- //		buffer.append("  case when master.KOUMOKU_NAME ='生活機能問診1' then '質問1-1' ");
- //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診2' then '質問1-2' ");
- //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診3' then '質問1-3' ");
- //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診4' then '質問4' ");
- //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診5' then '質問5' ");
- //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診6' then '質問6' ");
- //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診7' then '質問7' ");
- //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診8' then '質問8' ");
- //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診9' then '質問9' ");
- //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診10' then '質問10' ");
- //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診11' then '質問11' ");
- //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診12' then '質問12' ");
- //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診13' then '質問13' ");
- //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診14' then '質問14' ");
- //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診15' then '質問15' ");
- //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診16' then '質問16' ");
- //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診17' then '質問17' ");
- //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診18' then '質問18' ");
- //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診19' then '質問19' ");
- //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診20' then '質問20' ");
- //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診21' then '質問21' ");
- //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診22' then '質問22' ");
- //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診23' then '質問23' ");
- //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診24' then '質問24' ");
- //		buffer.append("  when master.KOUMOKU_NAME ='生活機能問診25' then '質問25' ");
- //		buffer.append("  else master.KOUMOKU_NAME end KOUMOKUNAME, ");
- //
- //		buffer.append("master.KENSA_HOUHOU AS KENSA_HOUHOU,");
- //		buffer.append("sonota.JISI_KBN,");
- //		buffer.append("sonota.KEKA_TI,");
- //		buffer.append("master.KAGEN,");
- //		buffer.append("master.DS_KAGEN,");
- //		buffer.append("master.DS_JYOUGEN,");
- //		buffer.append("master.JS_KAGEN,");
- //		buffer.append("master.JS_JYOUGEN,");
- //		buffer.append("master.KAGEN,");
- //		buffer.append("master.JYOUGEN,");
- //		buffer.append("master.DATA_TYPE,");
- //		buffer.append("master.MAX_BYTE_LENGTH,");
- //		buffer.append("sonota.KOMENTO,");
- //		buffer.append("sonota.H_L,");
- //		buffer.append("sonota.HANTEI, ");
- //		buffer.append("master.HISU_FLG as HISU_FLG ");
- //		buffer.append("FROM ");
- //		buffer.append("( ");
- //		buffer.append("T_KENSHINMASTER master ");
- //		buffer.append("LEFT JOIN T_KENSACENTER_MASTER kensa ");
- //		buffer.append("ON kensa.KOUMOKU_CD = master.KOUMOKU_CD ");
- //		buffer.append(" AND ");
- //		buffer.append("kensa.KENSA_CENTER_CD = ");
- //		buffer.append(JQueryConvert
- //								.queryConvert(validatedData.getKensaCenterCode()));
- //		buffer.append(") ");
- //		buffer.append("LEFT JOIN T_KENSAKEKA_SONOTA sonota ");
- //		buffer.append("ON sonota.KOUMOKU_CD = master.KOUMOKU_CD ");
- //		buffer.append(" AND ");
- //		buffer.append("sonota.KENSA_NENGAPI = ");
- //		buffer.append(JQueryConvert.queryConvert(validatedData.getKensaJissiDate()));
- //		buffer.append(" AND ");
- //		buffer.append("sonota.UKETUKE_ID = ");
- //		// add ver2 s.inoue 2009/06/25
- //		if (isCopy && !preview){
- //			buffer.append(JQueryConvert.queryConvert(validatedData.getUketukePre_id()));
- //		}else{
- //			buffer.append(JQueryConvert.queryConvert(validatedData.getUketuke_id()));
- //		}
- //		buffer.append(" ");
- //
- //		String patternNumber = "";
- //		patternNumber = JQueryConvert.queryConvert(String.valueOf(kenshinPatternNumber));
- //
- //		buffer.append(" LEFT JOIN T_KENSHIN_P_S ps ");
- //		buffer.append(" ON ps.KOUMOKU_CD = master.KOUMOKU_CD   ");
- //		buffer.append(" AND ps.K_P_NO =    ");
- //		buffer.append(patternNumber);
- //
- //		buffer.append("WHERE master.KOUMOKU_CD IN ");
- //		buffer.append("( ");
- //		buffer.append("SELECT KOUMOKU_CD ");
- //		buffer.append("FROM T_KENSHIN_P_S ");
- //		buffer.append("WHERE K_P_NO = ");
- //		buffer.append(patternNumber);
- //		buffer.append(" AND ");
- //		buffer.append("KOUMOKU_CD NOT IN ");
- //		buffer.append("( ");
- //		//メタボリック診断、保健指導レベルを除く
- //		buffer.append(JQueryConvert.queryConvertAppendComma("9N501000000000011"));
- //		buffer.append(JQueryConvert.queryConvert("9N506000000000011") + ") ");
- //
- //		buffer.append(") ");
- //		buffer.append("AND " + "master.HKNJANUM = ");
- //		buffer.append(JQueryConvert.queryConvert(validatedData.getHokenjyaNumber()));
- //		buffer.append(" order by ps.LOW_ID ");
- //
- //		String query = buffer.toString();
- //		return query;
- //	}
- //
- //	/**
- //	 * 健診パターンに健診項目が存在するかどうか
- //	 */
- //	public static boolean existPattarnKensaKoumoku(
- //			int patternNumber,
- //			String koumokuCd){
- //			boolean retChk = false;
- //
- //			ArrayList<Hashtable<String, String>> result
- //				= new ArrayList<Hashtable<String, String>>();
- //
- //			try{
- //
- //				// 変更後のパターンに健診項目が含まれるかどうか
- //				StringBuffer buffer = new StringBuffer();
- //				buffer.append(" SELECT KOUMOKU_CD FROM T_KENSHIN_P_S ");
- //				buffer.append(" where K_P_NO = ?");
- //				buffer.append(" and KOUMOKU_CD = ?");
- //				String query = buffer.toString();
- //
- //				String[] params = {String.valueOf(patternNumber),koumokuCd };
- //
- //				result = JApplication.kikanDatabase.sendExecuteQuery(query, params);
- //
- //			}catch(SQLException ex){
- //				ex.printStackTrace();
- //			}
- //
- //			if (result.size()==0)
- //				retChk=true;
- //
- //		return retChk;
- //	}
- //
- //	/**
- //	 * 請求区分による検査項目チェック
- //	 */
- //	public static boolean isNotExistKensaKoumoku(
- //			String hokenjyaNumber,
- //			String uketukeId,
- //			String kensaDate,
- //			String seikyuKbn,
- //			String koumokuCd,
- //			String kekkati,
- //			String jisiKbn
- //			)
- //	{
- //			boolean retChk = false;
- //			boolean hanteiHisu = false;
- //
- //			// 例外の項目(質問票に関わる項目)
- //			String KoumokuHd = koumokuCd.substring(0, 3);
- //			if(KoumokuHd.equals("9N7") ||
- //					koumokuCd.equals(CODE_HOKEN_SHIDOU) ||
- //					koumokuCd.equals(CODE_SEIKATU_KAIZEN) ||
- //					koumokuCd.equals(CODE_SAIKETSU_ZIKAN) ||
- //					koumokuCd.equals(CODE_ISHINOHANDAN_1) ||
- //					koumokuCd.equals(CODE_ISHINOHANDAN_2) ||
- //					koumokuCd.equals(CODE_ISHINOHANDAN_3) ||
- //					koumokuCd.equals(CODE_ISHINOHANDAN_4)){
- //				return false;
- //			}
- //
- //			// 基本的な健診,詳細な健診,追加健診項目,人間ドック
- //			StringBuffer buffer = new StringBuffer();
- //			String[] params =null;
- //
- //			// edit s.inoue 20081126 新規登録時のチェックが効かない為
- //
- //			buffer.append(" select master.HISU_FLG ");
- //			buffer.append(" from T_KENSHINMASTER master ");
- //			buffer.append(" where master.HKNJANUM = ?");
- //			buffer.append(" and KOUMOKU_CD = ?");
- //
- //			params = new String []{ hokenjyaNumber,koumokuCd  };
- //
- //			String query = buffer.toString();
- //
- //			ArrayList<Hashtable<String, String>> result = null;
- //			try{
- //				result = JApplication.kikanDatabase.sendExecuteQuery(query, params);
- //			}catch(SQLException ex){
- //				ex.printStackTrace();
- //			}
- //
- //			for (Hashtable<String, String> item : result) {
- //				String hisuFlg = item.get("HISU_FLG");
- //				//String tanka = item.get("TANKA_KENSIN");
- //				// 登録対象のフラグチェック
- //				if (jisiKbn.equals("1")){
- //					if (!kekkati.equals("")){
- //						hanteiHisu = true;
- //					}
- //				}else if (jisiKbn.equals("2") ||
- //						jisiKbn.equals("0")){
- //					if (kekkati.equals("")){
- //						hanteiHisu = true;
- //					}
- //				}
- //
- //				if (hanteiHisu){
- //					// 整合性確認用
- //					if (seikyuKbn.equals(JApplication.SEIKYU_KBN_BASE)){
- //						if (!hisuFlg.equals(JApplication.HISU_FLG_BASE)){
- //							retChk = true;break;
- //						}
- //					}else if (seikyuKbn.equals(JApplication.SEIKYU_KBN_SYOSAI)){
- //						if (!(hisuFlg.equals(JApplication.HISU_FLG_BASE) ||
- //								hisuFlg.equals(JApplication.HISU_FLG_SYOSAI))){
- //							retChk = true;break;
- //						}
- //					}else if (seikyuKbn.equals(JApplication.SEIKYU_KBN_TUIKA)){
- //						if (!(hisuFlg.equals(JApplication.HISU_FLG_BASE) ||
- //								hisuFlg.equals(JApplication.HISU_FLG_TUIKA))){
- //							retChk = true;break;
- //						}
- //					}
- //				}
- //
- //			}
- //		return retChk;
- //	}
- //
- //	/**
- //	 * 登録
- //	 * @return boolean 健診パターン変更による請求区分の該当検査項目の削除
- //	 */
- //	public boolean pattarnKensaKoumoku() {
- //
- //		boolean patarnHanbetu = false;
- //		cellColors.clear();
- //
- //		if (tableResult != null) {
- //
- //			try{
- //
- //				if (validatedData.setHihokenjyaNumber(jTextField_HokenjyaNumber.getText())
- //						&& validatedData.setSeikyuKubun((String) jComboBox_SeikyuKubun.getSelectedItem())){
- //
- //					// del s.inoue 2009/08/13
- //					// JApplication.kikanDatabase.Transaction();
- //
- //					ArrayList<Hashtable<String, String>> sonotaResults = null;
- //
- //					int tmpKenshinPatternNumber=kenshinPatternNumber;
- //
- //					// edit ver2 s.inoue 2009/04/24
- //					if (prekenshinPatternNumber != -1){
- //						kenshinPatternNumber=prekenshinPatternNumber;
- //					}
- //					// edit ver2 s.inoue 2009/06/25
- //					String crequery = this.createCellDataSql(false);
- //					try {
- //						sonotaResults = JApplication.kikanDatabase.sendExecuteQuery(crequery);
- //					} catch (SQLException f) {
- //						f.printStackTrace();
- //					}
- //					kenshinPatternNumber=tmpKenshinPatternNumber;
- //
- //					// 検査結果その他テーブルに対してパターン外の結果を削除する
- //					for (int i = 0; i < sonotaResults.size(); i++) {
- //
- //						Hashtable<String, String> databaseItem = sonotaResults.get(i);
- //
- ////						// add ver2 s.inoue 2009/04/24
- ////						String kensakekka = validatedData.getKekka();
- //
- //						boolean isOtherValidated = (
- //								 validatedData.setKensaKoumokuCode(databaseItem.get(COLUMN_NAME_KOUMOKUCD)));
- //
- //						if (isOtherValidated){
- //
- //							// 検査項目整合性チェック
- //							boolean validatePattarn = existPattarnKensaKoumoku(
- //									kenshinPatternNumber,validatedData.getKensaKoumokuCode());
- //
- //							if (validatePattarn){
- //								// edit s.inoue 20081202 1回目のみ表示
- //								if (!patarnHanbetu){
- //									RETURN_VALUE retValue = null;
- //									retValue = JErrorMessage.show("M3637", this);
- //									if(retValue == RETURN_VALUE.NO) {
- //										break;
- //									}
- //									patarnHanbetu = true;
- //								}
- //
- //								// deleteByUketukeIdKensaNengapi⇒delete
- //								if (! this.isCopy && ! this.isNewKekkaData) {
- //									kensakekaSonotaDao.delete(
- //											new Long(validatedData.getUketuke_id()),
- //											new Integer(this.initialDate),
- //											new String(validatedData.getKensaKoumokuCode()));
- //								}
- //							}
- //						}
- //					}
- //
- //					// del s.inoue 2009/08/13
- //					// JApplication.kikanDatabase.Commit();
- //
- //				}
- //			} catch (SQLException ex1) {
- //				ex1.printStackTrace();
- //				try{
- //					JApplication.kikanDatabase.rollback();
- //				}catch (SQLException ex2) {}
- //				return false;
- //			}
- //		}
- //
- //		return patarnHanbetu;
- //	}
- //
- //	/**
- //	 * 複製処理の個人情報登録
- //	 *
- //	 * @return boolean 登録の有無
- //	 */
- //	private String registerKojinCopy(){
- //
- //		StringBuilder query = new StringBuilder();
- //		query.append("INSERT INTO T_KOJIN ( PTNUM, JYUSHIN_SEIRI_NO, YUKOU_KIGEN, HKNJANUM, HIHOKENJYASYO_KIGOU,");
- //		query.append(" HIHOKENJYASYO_NO, NAME, KANANAME, NICKNAME, BIRTHDAY, SEX,HOME_POST, HOME_ADRS, HOME_BANTI, HOME_TEL1, KEITAI_TEL, ");
- //		query.append(" FAX, EMAIL, KEITAI_EMAIL, KEIYAKU_TORIMATOME, KOUHUBI, SIHARAI_DAIKOU_BANGO, MADO_FUTAN_K_SYUBETU, MADO_FUTAN_KIHON, ");
- //		query.append(" MADO_FUTAN_S_SYUBETU, MADO_FUTAN_SYOUSAI, MADO_FUTAN_T_SYUBETU, MADO_FUTAN_TSUIKA, MADO_FUTAN_D_SYUBETU, MADO_FUTAN_DOC, ");
- //		query.append(" NENDO, UKETUKE_ID, MADO_FUTAN_SONOTA, HOKENJYA_FUTAN_KIHON, HOKENJYA_FUTAN_SYOUSAI, HOKENJYA_FUTAN_TSUIKA, HOKENJYA_FUTAN_DOC ) ");
- //		query.append(" SELECT ");
- //		query.append(" PTNUM, ");
- //		//JYUSHIN_SEIRI_NOを指定
- //		query.append(JQueryConvert.queryConvert(validatedData.getcopyJyushinkenID()));
- //		query.append(" ,YUKOU_KIGEN, HKNJANUM, HIHOKENJYASYO_KIGOU, HIHOKENJYASYO_NO, NAME, KANANAME, ");
- //
- //		query.append(" NICKNAME, BIRTHDAY, SEX, HOME_POST, HOME_ADRS, HOME_BANTI, HOME_TEL1, KEITAI_TEL, FAX, EMAIL, KEITAI_EMAIL, KEIYAKU_TORIMATOME, ");
- //		query.append(" KOUHUBI, SIHARAI_DAIKOU_BANGO, MADO_FUTAN_K_SYUBETU, MADO_FUTAN_KIHON, MADO_FUTAN_S_SYUBETU, MADO_FUTAN_SYOUSAI, MADO_FUTAN_T_SYUBETU, ");
- //		query.append(" MADO_FUTAN_TSUIKA, MADO_FUTAN_D_SYUBETU, MADO_FUTAN_DOC, NENDO, ");
- //
- //		query.append(JQueryConvert.queryConvert(validatedData.getUketuke_id()));
- //		query.append(" ,MADO_FUTAN_SONOTA, HOKENJYA_FUTAN_KIHON, HOKENJYA_FUTAN_SYOUSAI, HOKENJYA_FUTAN_TSUIKA, HOKENJYA_FUTAN_DOC ");
- //		query.append(" FROM T_KOJIN WHERE UKETUKE_ID = ");
- //		query.append(JQueryConvert.queryConvert(validatedData.getUketukePre_id()));
- //
- //		return query.toString();
- //
- //	}
- //	/**
- //	 * 履歴,名寄せテーブルへ登録処理を実施する。
- //	 */
- //	private void registerHistory(){
- //
- //		TNayoseDao tNayoseDao;
- //
- //		StringBuilder nayoseQuery = null;
- //		StringBuilder newNayoseQuery = null;
- //
- //			// 名寄せNO採番
- //			long nayoseNo = -1L;
- //			long retTNayoseNo = 0L;
- //
- //			// 現時刻を取得
- //			SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
- //			String stringTimeStamp = dateFormat.format(Calendar.getInstance().getTime());
- //
- //			try {
- //				/* T_NAYOSE Dao を作成する。 */
- //				tNayoseDao = (TNayoseDao) DaoFactory.createDao(
- //						JApplication.kikanDatabase.getMConnection(), new TNayose());
- //
- //				retTNayoseNo = tNayoseDao.selectOldNayoseNo(Long.parseLong(validatedData.getUketukePre_id()));
- //				// 既に履歴がある場合、その名寄せNoを使用する
- //				if (retTNayoseNo > 0) {
- //					nayoseNo = retTNayoseNo;
- //				}else{
- //					nayoseNo = tNayoseDao.selectNewNayoseNo();
- //
- //					// 名寄せテーブル登録処理
- //					// 受付IDの紐付け処理:1、2をセット
- //					// 1.受診券情報で氏名かなで紐付けた受付IDを登録
- //					// 2.受診券登録後に新しい受付番号を登録
- //
- //					// 1.処理:履歴がない場合
- //					nayoseQuery = new StringBuilder();
- //					nayoseQuery.append("INSERT INTO T_NAYOSE (NAYOSE_NO,UKETUKE_ID,UPDATE_TIMESTAMP)");
- //					nayoseQuery.append("VALUES (");
- //					nayoseQuery.append(JQueryConvert.queryConvertAppendComma(String.valueOf(nayoseNo)));
- //					nayoseQuery.append(JQueryConvert.queryConvertAppendComma(validatedData.getUketukePre_id()));
- //					nayoseQuery.append(JQueryConvert.queryConvert(stringTimeStamp));
- //					nayoseQuery.append(") ");
- //
- //					try {
- //						JApplication.kikanDatabase.sendNoResultQuery(nayoseQuery.toString());
- //					} catch (SQLException e) {
- //						logger.error(e.getMessage());
- //
- //						try {
- //							JApplication.kikanDatabase.rollback();
- //						} catch (SQLException g) {
- //							logger.error(g.getMessage());
- //						}
- //					}
- //
- //				}
- //
- //				// 2.処理:採番した追加用レコード共通処理
- //				newNayoseQuery = new StringBuilder();
- //				newNayoseQuery.append("INSERT INTO T_NAYOSE (NAYOSE_NO,UKETUKE_ID,UPDATE_TIMESTAMP)");
- //				newNayoseQuery.append("VALUES (");
- //				newNayoseQuery.append(JQueryConvert.queryConvertAppendComma(String.valueOf(nayoseNo)));
- //				newNayoseQuery.append(JQueryConvert.queryConvertAppendComma(validatedData.getUketuke_id()));
- //				newNayoseQuery.append(JQueryConvert.queryConvert(stringTimeStamp));
- //				newNayoseQuery.append(") ");
- //
- //				try {
- //					JApplication.kikanDatabase.sendNoResultQuery(newNayoseQuery.toString());
- //				} catch (SQLException e) {
- //					logger.error(e.getMessage());
- //					try {
- //						JApplication.kikanDatabase.rollback();
- //					} catch (SQLException g) {
- //						logger.error(g.getMessage());
- //					}
- //				}
- //			} catch (Exception e) {
- //				logger.error(e.getMessage());
- //			}
- //	}
- //
- //	/**
- //	 * 結果登録処理
- //	 * @return boolean 登録の有無
- //	 */
- //	public boolean register() {
- //		String query = null;
- //		Hashtable<String, String> ResultItem = null;
- //		cellColors.clear();
- //
- //		String kensaJissiDate = validatedData.getKensaJissiDate();
- //
- //		if (tableResult != null) {
- //			/* 健診実施日 */
- //			String jissiDate = jTextField_Date.getText();
- //
- //			/*
- //			 *  初期表示の日付から変更があった場合は、警告を表示する。
- //			 */
- //			boolean hasJissiDateChanged = false;
- //			if (! jissiDate.equals(this.initialDate)) {
- //				hasJissiDateChanged = true;
- //			}
- //
- //			if (hasJissiDateChanged && ! this.isNewKekkaData) {
- //
- //				/* M3543=確認,健診実施日を[%s]から[%s]に変更して登録してよろしいですか？,1,0 */
- //				String[] messageParams = {this.initialDate, jissiDate};
- //				RETURN_VALUE retValue = JErrorMessage.show("M3543", this, messageParams);
- //				if (retValue != RETURN_VALUE.YES) {
- //					return false;
- //				}
- //			}
- //
- //			/*
- //			 * 既に健診結果データが存在し、かつ初期表示の日付から変更があった場合は、
- //			 * 警告メッセージを表示する。
- //			 */
- //			boolean existsKensaKekkaData = existsKensaKekkaData(jissiDate);
- //			if (existsKensaKekkaData) {
- //				if (hasJissiDateChanged) {
- //					/* M3544=確認,[%s]には、すでに結果データが存在します。登録した場合、
- //					 * 以前に入力した結果データは消えてしまいます。登録してよろしいですか？,1,0 */
- //					String[] messageParams = {jissiDate};
- //					RETURN_VALUE retValue = JErrorMessage.show("M3544", this, messageParams);
- //					if (retValue != RETURN_VALUE.YES) {
- //						return false;
- //					}
- //				}
- //
- //				mode = UPDATE_MODE;
- //			}
- //			else {
- //				mode = INSERT_MODE;
- //			}
- //
- //			// フレームのテキストフィールドなどに関して検証を行う
- //			if (validatedData.setHihokenjyaCode(jTextField_HokenjyaCode.getText())
- //					&& validatedData.setHihokenjyaNumber(jTextField_HokenjyaNumber.getText())
- //					&& validatedData.setNameKana(jTextField_Name.getText())
- //					&& validatedData.setKensaJissiDate(jissiDate)
- //					&& validatedData.setSougouComment(jEditorPane_Comment.getText())
- //					&& validatedData.setMetaboHantei((String) jComboBox_MetaboHantei.getSelectedItem())
- //					&& validatedData.setHokenSidouLevel((String) jComboBox_HokenSidouLevel.getSelectedItem())
- //					&& validatedData.setSeikyuKubun((String) jComboBox_SeikyuKubun.getSelectedItem())) {
- //
- //				boolean validateKensa = false;
- //				boolean hanteiBase = false;
- //				boolean hanteiSyosai = false;
- //				boolean hanteiTuika = false;
- //				boolean notExtMessage = false;
- //				boolean validateInput = false;
- //
- //				int intBaseCnt = 0;
- //				int intSyosaiCnt = 0;
- //				int intTuikaCnt = 0;
- //				int intAllCnt = 0;
- //				// add ver2 s.inoue 2009/06/29
- //				TKojinDao tKojinDao;
- //
- //				if (validateAsRegisterPushed(validatedData)) {
- //					if (validatedData.isValidateAsDataSet()) {
- //						try {
- //
- //							JApplication.kikanDatabase.Transaction();
- //
- //							// add ver2 s.inoue 2009/06/02
- //							if (isCopy){
- //
- //								// add ver2 s.inoue 2009/06/29
- //								try {
- //									/* T_KOJIN Dao を作成する。 */
- //									tKojinDao = (TKojinDao) DaoFactory.createDao(
- //											JApplication.kikanDatabase.getMConnection(), new TKojin());
- //
- //									// add ver2 s.inoue 2009/06/29
- //									// 整理番号重複チェック処理
- //									Long resultCnt = tKojinDao.selectByCountUniqueKey(validatedData.getcopyJyushinkenID());
- //									if (resultCnt > 0) {
- //										JErrorMessage.show("M3607", this);
- //										// edit s.inoue 2009/10/20
- //										// 受診券重複を許可して、警告レベルへ変更する。
- //										// JApplication.kikanDatabase.rollback();
- //										// this.refreshTableCellColor();
- //										// this.initializeColumnWidth();
- //										// return false;
- //									}
- //								}catch (Exception ex) {
- //									logger.error(ex.getMessage());
- //								}
- //
- //								String queryKojin = registerKojinCopy();
- //								registerHistory();
- //								try {
- //									JApplication.kikanDatabase.sendNoResultQuery(queryKojin);
- //								} catch (SQLException e) {
- //									logger.error(e.getMessage());
- //									JApplication.kikanDatabase.rollback();
- //									// add ver2 s.inoue 2009/06/29
- //									this.refreshTableCellColor();
- //									this.initializeColumnWidth();
- //									return false;
- //								}
- //							}
- //
- //							boolean isOtherValidated = false;
- //							boolean isKekkaValidated = false;
- //							// add s.inoue 2009/10/17
- //							HashMap<Integer, String> kekkaValidated = new HashMap<Integer, String>();
- //
- //							boolean isCheckCSV = false;
- //							String errMessage = "";
- //
- //							int i = 0;
- //
- //							// 検査結果その他テーブルに関して登録処理を行う
- //							for (; i < this.model.getRowCount(); i++) {
- //
- //								// 結果値以外に関しての検証
- //								isOtherValidated = (validatedData
- //										.setHihokenjyaCode(jTextField_HokenjyaCode.getText())
- //										&& validatedData.setHihokenjyaNumber(jTextField_HokenjyaNumber.getText())
- //										&& validatedData.setKensaJissiDate(jissiDate)
- //										// edit s.inoue 2009/11/11
- //										&& validatedData.setKensaKoumokuCode((String) this.model.getData(i, COLUMN_IDX_KOUMOKUCD))
- //										&& validatedData.setComment((String) this.model.getData(i, COLUMN_IDX_KOMENTO))
- //										&& validatedData.setHL((String) this.model.getData(i, COLUMN_IDX_HL))
- //										&& validatedData.setHantei((String) this.model.getData(i, COLUMN_IDX_HANTEI))
- //										&& validatedData.setChkText((String) this.model.getData(i, COLUMN_IDX_JISIKBN)));
- //
- //								// 結果値に関する検証
- //								ResultItem = tableResult.get(i);
- //
- //								String koumokuCode = ResultItem.get(COLUMN_NAME_KOUMOKUCD);
- //								String koumokuName = ResultItem.get(COLUMN_NAME_KOUMOKUNAME);
- //
- //								switch (Integer.valueOf(ResultItem.get(COLUMN_NAME_DATA_TYPE))) {
- //								case 1:
- //									// 数値の場合
- //									// edit s.inoue 2009/11/11
- //									isKekkaValidated
- //										= validatedData.setKekkaDecimal((String) this.model.getData(i, COLUMN_IDX_KEKKA_NUM),
- //										ResultItem.get(COLUMN_NAME_MAX_BYTE_LENGTH));
- //
- //									if (isKekkaValidated) {
- //										isCheckCSV = true;
- //										String retMessage = getHighLawMessage(
- //											(String)this.model.getData(i,COLUMN_IDX_KOUMOKUCD),
- //											koumokuName,
- //											validatedData.getHokenjyaNumber(),
- //											validatedData.getKekka());
- //
- //										if (!retMessage.isEmpty()){
- //											validateInput = true;
- //											errMessage +=retMessage;
- //										}
- //									}
- //									break;
- //
- //								case 2:
- //									// コードの場合
- //									ArrayList<Hashtable<String, String>> codeResult = null;
- //									Hashtable<String, String> codeResultItem;
- //									// edit s.inoue 2009/09/29
- //									query = new String("SELECT KOUMOKU_CD, CODE_NUM, CODE_NAME FROM T_DATA_TYPE_CODE WHERE KOUMOKU_CD = "
- //											+ JQueryConvert.queryConvert(koumokuCode));
- //									try {
- //										codeResult = JApplication.kikanDatabase.sendExecuteQuery(query);
- //									} catch (SQLException e) {
- //										logger.warn(e.getMessage());
- //									}
- //									// edit s.inoue 2009/11/11
- //									if (this.model.getData(i).get(COLUMN_IDX_KEKKA_CODE).equals("")) {
- //										isKekkaValidated = validatedData.setKekkaCode("");
- //										isCheckCSV = true;
- //										break;
- //									}
- //
- //									for (int j = 0; j < codeResult.size(); j++) {
- //										codeResultItem = codeResult.get(j);
- //										// edit s.inoue 2009/11/11
- //										if (this.model.getData(i, COLUMN_IDX_KEKKA_CODE)
- //												.equals(codeResultItem.get(COLUMN_NAME_CODE_NAME))) {
- //
- //											isCheckCSV = CheckHighLawItem(
- //													(String)this.model.getData(i,COLUMN_IDX_KOUMOKUCD),
- //													validatedData.getHokenjyaNumber(),
- //													codeResultItem.get(COLUMN_NAME_CODE_NUM));
- //
- //											isKekkaValidated = validatedData.setKekkaCode(codeResultItem.get(COLUMN_NAME_CODE_NUM));
- //											break;
- //										}
- //									}
- //									break;
- //
- //								case 3:
- //									// 文字列の場合
- //									isCheckCSV = true;
- //									// edit s.inoue 2009/11/11
- //									isKekkaValidated
- //										= validatedData.setKekkaText((String) this.model
- //										.getData(i, COLUMN_IDX_KEKKA_STR), ResultItem.get(COLUMN_NAME_MAX_BYTE_LENGTH));
- //									break;
- //								}
- //								// add s.inoue 2009/10/17
- //								if (!isKekkaValidated) {
- //									kekkaValidated.put(i,"項目コード:" + koumokuCode + "  項目名:" + koumokuName);
- //								}
- //
- //								if (isKekkaValidated && isOtherValidated && isCheckCSV) {
- //									// 受付ID,年度の追加対応
- //									// 検査結果特定、その他テーブルへ新規レコード挿入
- //									kensakekaSonota.setUKETUKE_ID(new Long(validatedData.getUketuke_id()));
- //									kensakekaSonota.setHIHOKENJYASYO_KIGOU(validatedData.getHihokenjyaCode());
- //									kensakekaSonota.setHIHOKENJYASYO_NO(validatedData.getHihokenjyaNumber());
- //									try {
- //										kensakekaSonota.setKENSA_NENGAPI(new Integer(kensaJissiDate));
- //										kensakekaSonota.setNENDO(FiscalYearUtil.getThisYear(kensaJissiDate));
- //									} catch (NumberFormatException e) {
- //										logger.error(e.getMessage());
- //									}
- //									kensakekaSonota.setKOUMOKU_CD(validatedData.getKensaKoumokuCode());
- //									kensakekaSonota.setKEKA_TI(validatedData.getKekka());
- //									kensakekaSonota.setKOMENTO(validatedData.getComment());
- //
- //									try {
- //										Integer jisiInteger = null;
- //										String strJisi = validatedData.getJisi_KBN();
- //										if (strJisi != null
- //												&& !strJisi.isEmpty()) {
- //											jisiInteger = new Integer(strJisi);
- //										}
- //										kensakekaSonota.setJISI_KBN(jisiInteger);
- //
- //									} catch (NumberFormatException e) {
- //										/* 何もしない */
- //									}
- //
- //									try {
- //										Integer hlInteger = null;
- //										String hlString = validatedData.getHL();
- //										if (hlString != null
- //												&& !hlString.isEmpty()) {
- //											hlInteger = new Integer(hlString);
- //										}
- //										kensakekaSonota.setH_L(hlInteger);
- //
- //									} catch (NumberFormatException e) {
- //										/* 何もしない */
- //									}
- //
- //									try {
- //										kensakekaSonota.setHANTEI(new Integer(
- //												validatedData.getHantei()));
- //									} catch (NumberFormatException e) {
- //										/* 何もしない */
- //									}
- //
- //									// add s.inoue 20080911 結果値(未実施,測定不可能)判定
- //									if ((validatedData.getJisi_KBN().equals("0") ||
- //											validatedData.getJisi_KBN().equals("2")) &&
- //											!validatedData.getKekka().equals("")){
- //										String[] params = { koumokuCode, koumokuName };
- //										JErrorMessage.show("M3634", this, params);
- //										JApplication.kikanDatabase.rollback();
- //										this.refreshTableCellColor();
- //										this.initializeColumnWidth();
- //										return false;
- //									}
- //
- //									// 登録対象のフラグチェック
- //
- //									// 例外の項目(質問票に関わる項目)
- //									String KoumokuHd = koumokuCode.substring(0, 3);
- //									if(!KoumokuHd.equals("9N7")&&
- //											!koumokuCode.equals(CODE_HOKEN_SHIDOU) &&
- //											!koumokuCode.equals(CODE_SEIKATU_KAIZEN) &&
- //											!koumokuCode.equals(CODE_SAIKETSU_ZIKAN) &&
- //											!koumokuCode.equals(CODE_ISHINOHANDAN_1) &&
- //											!koumokuCode.equals(CODE_ISHINOHANDAN_2) &&
- //											!koumokuCode.equals(CODE_ISHINOHANDAN_3) &&
- //											!koumokuCode.equals(CODE_ISHINOHANDAN_4)){
- //
- //										String hisuFlg = ResultItem.get(COLUMN_NAME_HISU_FLG);
- //
- //										if ((validatedData.getJisi_KBN().equals("1") && !validatedData.getKekka().equals("")) ||
- //											((validatedData.getJisi_KBN().equals("2") || validatedData.getJisi_KBN().equals("0"))
- //													&& validatedData.getKekka().equals(""))){
- //
- //											if (validatedData.getSeikyuKubun().equals(JApplication.SEIKYU_KBN_BASE)){
- //												if (hisuFlg.equals(JApplication.HISU_FLG_BASE)){
- //													hanteiBase = true;intBaseCnt +=1;
- //												}
- //											}else if (validatedData.getSeikyuKubun().equals(JApplication.SEIKYU_KBN_SYOSAI)){
- //												if (hisuFlg.equals(JApplication.HISU_FLG_BASE)){
- //													hanteiBase = true;
- //												}else
- //												if (hisuFlg.equals(JApplication.HISU_FLG_SYOSAI)){
- //													hanteiSyosai = true;
- //												}
- //												if (hanteiBase && hanteiSyosai){
- //													intSyosaiCnt +=1;
- //												}
- //											}else if (validatedData.getSeikyuKubun().equals(JApplication.SEIKYU_KBN_TUIKA)){
- //												if (hisuFlg.equals(JApplication.HISU_FLG_BASE)){
- //													hanteiBase = true;
- //												}else
- //												if (hisuFlg.equals(JApplication.HISU_FLG_TUIKA)){
- //													hanteiTuika = true;
- //												}
- //												if (hanteiBase && hanteiTuika){
- //													intTuikaCnt +=1;
- //												}
- //											}else if (validatedData.getSeikyuKubun().equals(JApplication.SEIKYU_KBN_SYOSAI_TUIKA) ||
- //													validatedData.getSeikyuKubun().equals(JApplication.SEIKYU_KBN_DOC)){
- //												if (hisuFlg.equals(JApplication.HISU_FLG_BASE)){
- //													hanteiBase = true;
- //												}else
- //												if (hisuFlg.equals(JApplication.HISU_FLG_SYOSAI)){
- //													hanteiSyosai = true;
- //												}else
- //												if (hisuFlg.equals(JApplication.HISU_FLG_TUIKA)){
- //													hanteiTuika = true;
- //												}
- //												if (hanteiBase && hanteiSyosai && hanteiTuika){
- //													intAllCnt +=1;
- //												}
- //											}
- //										}
- //									}
- //
- //									// add s.inoue 20080911 結果値判定(未実施,測定不可能)判定
- //									// 検査項目整合性チェック
- //									validateKensa= isNotExistKensaKoumoku(
- //											    validatedData.getHokenjyaNumber(),
- //												validatedData.getUketuke_id(),
- //												validatedData.getKensaJissiDate(),
- //												validatedData.getSeikyuKubun(),
- //												validatedData.getKensaKoumokuCode(),
- //												validatedData.getKekka(),
- //												validatedData.getJisi_KBN());
- //
- //									if (validateKensa){
- //
- //										if (!notExtMessage){
- //											JErrorMessage.show("M3635", this);
- //											notExtMessage = true;
- //										}
- //									}
- //
- //									if (! this.isCopy && ! this.isNewKekkaData) {
- //										kensakekaSonotaDao.delete(
- //												new Long(validatedData.getUketuke_id()),
- //												new Integer(this.initialDate),
- //												new String(validatedData.getKensaKoumokuCode()));
- //									}
- //
- //									kensakekaSonotaDao.insert(kensakekaSonota);
- //
- //								} else {
- //									if (!isKekkaValidated) {
- //										// edit s.inoue 2009/10/17
- //										// JErrorMessage.show("M3601", this);
- //										String[] params = { kekkaValidated.get(i) };
- //										JErrorMessage.show("M3601", this, params);
- //									} else if (!isCheckCSV) {
- //										String[] params = { koumokuCode, koumokuName };
- //										JErrorMessage.show("M3602", this, params);
- //									}
- //									// 登録を終了にする
- //									System.out.println("RollBack");
- //									JApplication.kikanDatabase.rollback();
- //
- //									this.refreshTableCellColor();
- //									this.initializeColumnWidth();
- //									// edit s.inoue 2009/10/21
- //									refreshCellAction();
- //									return false;
- //								}
- //							}
- //
- //							// add ver2 s.inoue 2009/04/14
- //							if (validateInput){
- //								String[] params = { errMessage };
- //								JErrorMessage.show("M3602", this, params);
- //							}
- //
- //							// add s.inoue 20081008
- //							if ((intBaseCnt == 0) &&(intSyosaiCnt == 0) &&(intTuikaCnt == 0) && (intAllCnt == 0)){
- //								// メッセージは一回きりにする
- //								if (!notExtMessage && isCheckCSV){
- //									JErrorMessage.show("M3636", this);
- //									notExtMessage = true;
- //								}
- //							}
- //
- //							// テーブルの最後の行をinsertする前にbreakされた場合
- //							if (i != this.model.getRowCount()) {
- //								System.out.println("RollBack");
- //								JApplication.kikanDatabase.rollback();
- //
- //								this.refreshTableCellColor();
- //								this.initializeColumnWidth();
- //
- //								return false;
- //
- //							} else {
- //								// 次にメタボリックシンドローム判定と保健指導レベルに関しての処理を行う
- //								try {
- //									// 受付ID,年度の追加対応
- //									// 検査結果データその他レコード削除・挿入
- //
- //									kensakekaSonota = new TKensakekaSonota();
- //									kensakekaSonota.setUKETUKE_ID(new Long(validatedData.getUketuke_id()));
- //									kensakekaSonota.setHIHOKENJYASYO_KIGOU(validatedData.getHihokenjyaCode());
- //									kensakekaSonota.setHIHOKENJYASYO_NO(validatedData.getHihokenjyaNumber());
- //									try {
- //										// edit ver2 s.inoue 2009/07/13
- //										kensakekaTokutei.setNENDO(FiscalYearUtil.getThisYear(kensaJissiDate));
- //
- //										kensakekaSonota.setKENSA_NENGAPI(new Integer(kensaJissiDate));
- //									} catch (NumberFormatException e) {
- //									}
- //
- //									// まずメタボリックシンドロームに関する処理を行う
- //									// edit s.inoue 2009/10/26 更新前のものを消す！！
- //									// kensakekaSonotaDao.delete(new Long(validatedData.getUketuke_id()),new Integer(kensaJissiDate),"9N501000000000011");
- //									kensakekaSonotaDao.delete(new Long(validatedData.getUketuke_id()),
- //											this.initialDate.equals("")?new Integer(kensaJissiDate):new Integer(this.initialDate),"9N501000000000011");
- //
- //									kensakekaSonota.setKOUMOKU_CD("9N501000000000011");
- //									kensakekaSonota.setKEKA_TI(validatedData.getMetaboHantei());
- //									kensakekaSonotaDao.insert(kensakekaSonota);
- //
- //									// 保健指導レベルに関する処理を行う
- //									// edit s.inoue 2009/10/26 更新前のものを消す！！
- //									// kensakekaSonotaDao.delete(new Long(validatedData.getUketuke_id()),new Integer(kensaJissiDate),"9N506000000000011");
- //									kensakekaSonotaDao.delete(new Long(validatedData.getUketuke_id()),
- //											this.initialDate.equals("")?new Integer(kensaJissiDate):new Integer(this.initialDate),"9N506000000000011");
- //									kensakekaSonota.setKOUMOKU_CD("9N506000000000011");
- //									kensakekaSonota.setKEKA_TI(validatedData.getHokenSidouLevel());
- //									kensakekaSonotaDao.insert(kensakekaSonota);
- //
- //								} catch (SQLException f) {
- //									f.printStackTrace();
- //									JApplication.kikanDatabase.rollback();
- //									return false;
- //								}
- //
- //								// 検査結果特定テーブルに対して登録処理を行う
- //								try {
- //									if (mode == UPDATE_MODE) {
- //										// 受付ID,年度の追加対応
- //										// 受付IDを指定して検査結果データ特定を更新
- //
- //										query = "UPDATE T_KENSAKEKA_TOKUTEI SET "
- //												+ "KENSA_CENTER_CD = "
- //												+ JQueryConvert.queryConvertAppendComma(validatedData.getKensaCenterCode())
- //												+ "K_P_NO = "
- //												+ JQueryConvert.queryConvertAppendComma(String.valueOf(kenshinPatternNumber))
- //												+ "KOMENTO = "
- //												+ JQueryConvert.queryConvertAppendComma(validatedData.getSougouComment())
- //												// add ver2 s.inoue 2009/07/13
- //												+ "NENDO = "
- //												+ JQueryConvert.queryConvertAppendComma(String.valueOf(kensakekaTokutei.getNENDO()))
- //
- //												+ "SEIKYU_KBN = "
- //												+ JQueryConvert.queryConvert(validatedData.getSeikyuKubun())
- //												+ " WHERE "
- //												+ "UKETUKE_ID = "
- //												+ JQueryConvert.queryConvert(validatedData.getUketuke_id())
- //												+ " AND "
- //												+ "	KENSA_NENGAPI = "
- //												+ JQueryConvert.queryConvert(kensaJissiDate);
- //
- //										JApplication.kikanDatabase.sendNoResultQuery(query);
- //
- //									} else if (mode == INSERT_MODE) {
- //
- //										// 受付ID,年度の追加対応
- //										// 検査結果データ特定レコード挿入
- //										kensakekaTokutei = new TKensakekaTokutei();
- //										kensakekaTokutei.setUKETUKE_ID(new Long(validatedData.getUketuke_id()));
- //										kensakekaTokutei.setHIHOKENJYASYO_KIGOU(validatedData.getHihokenjyaCode());
- //										kensakekaTokutei.setHIHOKENJYASYO_NO(validatedData.getHihokenjyaNumber());
- //										kensakekaTokutei.setKENSA_CENTER_CD(validatedData.getKensaCenterCode());
- //
- //										try {
- //											kensakekaTokutei.setK_P_NO(new Integer(kenshinPatternNumber));
- //										} catch (NumberFormatException e) {
- //										}
- //										kensakekaTokutei.setKOMENTO(validatedData.getSougouComment());
- //										try {
- //
- //											kensakekaTokutei.setKENSA_NENGAPI(new Integer(kensaJissiDate));
- //										} catch (NumberFormatException e) {
- //										}
- //
- //										// add ver2 s.inoue 2009/07/13
- //										try {
- //											kensakekaTokutei.setNENDO(FiscalYearUtil.getThisYear(kensaJissiDate));
- //										} catch (NumberFormatException e) {
- //										}
- //
- //										// このあとUPDATEを行うため一時的にデータを入れる
- //										kensakekaTokutei.setKEKA_INPUT_FLG(new Integer(1));
- //										try {
- //											kensakekaTokutei.setSEIKYU_KBN(new Integer(validatedData.getSeikyuKubun()));
- //										} catch (NumberFormatException e) {
- //										}
- //										kensakekaTokuteiDao.insert(kensakekaTokutei);
- //									}
- //
- //									/* 複製ではなく、かつ日付変更である場合は、元のデータを削除する。 */
- //									if (! this.isCopy && hasJissiDateChanged && ! this.isNewKekkaData) {
- //										kensakekaTokuteiDao.delete(validatedData.getUketuke_id(),this.initialDate);
- //									}
- //								} catch (SQLException f) {
- //									f.printStackTrace();
- //									try {
- //										JApplication.kikanDatabase.rollback();
- //										return false;
- //									} catch (SQLException g) {
- //										g.printStackTrace();
- //										JErrorMessage
- //												.show("M0000", this);
- //										System.exit(1);
- //									}
- //								}
- //
- //								// 検査結果の未、済を判定し、UPDATEをかける
- //								int nullCount =0;
- //								int existCount = 0;
- //
- //								try {
- //
- //									ArrayList<Hashtable<String, String>> rs;
- //									// T_KOJIN,T_KENSAKEKA_TOKUTEIにUKETUKE_ID,NENDO追加対応
- //									query = " SELECT"
- //											+ "	 KEKA_TI"
- //											+ " FROM"
- //											+ "	 T_KENSAKEKA_SONOTA "
- //											+ " WHERE "
- //											+ "	UKETUKE_ID = "
- //											+ JQueryConvert
- //													.queryConvert(validatedData
- //															.getUketuke_id())
- //											+ " AND "
- //											+ "	KENSA_NENGAPI = "
- //											+ JQueryConvert
- //													.queryConvert(kensaJissiDate)
- //											+ " AND "
- //											+ "	KOUMOKU_CD NOT IN ( "
- //											+ JQueryConvert
- //													.queryConvertAppendComma("2A020000001930101")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("2A030000001930101")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("2A040000001930102")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("9A110160700000011")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("9A110160800000049")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("9A110161000000049")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("9E100166000000011")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("9E100166100000011")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("9E100166200000011")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("9E100166300000011")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("9E100160900000049")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("9E100161000000049")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("9N501000000000011")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("9N506000000000011")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("9N511000000000049")
- //											+ JQueryConvert
- //													.queryConvert("9N516000000000049")
- //											+ " )";
- //
- //
- //									rs = JApplication.kikanDatabase
- //											.sendExecuteQuery(query);
- //
- //									/* 全項目数 */
- //									existCount = rs.size();
- //
- //									// 検査結果が未入力のレコードを除いた場合
- //									query = " SELECT "
- //											+ "	KEKA_TI "
- //											+ " FROM "
- //											+ "	T_KENSAKEKA_SONOTA sonota, "
- //											+ "	T_KENSHINMASTER master "
- //											+ " WHERE "
- //											+ " sonota.KOUMOKU_CD = master.KOUMOKU_CD "
- //											+ " 	AND "
- //											+ " sonota.UKETUKE_ID = "
- //											+ JQueryConvert
- //													.queryConvert(validatedData
- //															.getUketuke_id())
- //											+ " 	AND "
- //											+ " sonota.KENSA_NENGAPI = "
- //											+ JQueryConvert
- //													.queryConvert(kensaJissiDate)
- //											+ " 	AND "
- //											+ " sonota.KEKA_TI is null "
- //											+ " 	AND "
- //											+ " sonota.KOUMOKU_CD NOT IN ( "
- //											+ JQueryConvert
- //													.queryConvertAppendComma("2A020000001930101")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("2A030000001930101")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("2A040000001930102")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("9A110160700000011")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("9A110160800000049")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("9A110161000000049")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("9E100166000000011")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("9E100166100000011")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("9E100166200000011")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("9E100166300000011")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("9E100160900000049")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("9E100161000000049")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("9N501000000000011")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("9N506000000000011")
- //											+ JQueryConvert
- //													.queryConvertAppendComma("9N511000000000049")
- //											+ JQueryConvert
- //													.queryConvert("9N516000000000049")
- //											+ " ) " + " 	AND "
- //											+ " master.HISU_FLG = 1";
- //									rs = JApplication.kikanDatabase
- //											.sendExecuteQuery(query);
- //
- //									/* 入力数 */
- //									nullCount = rs.size();
- //
- //									// T_KOJIN,T_KENSAKEKA_TOKUTEIにUKETUKE_ID,NENDO追加対応
- //									// 全ての項目について入力がなされていた場合
- //									String kensakekaInputFlg = (nullCount == 0) ? "2"
- //											: "1";
- //									query = String.format("UPDATE "
- //											+ "T_KENSAKEKA_TOKUTEI " + "SET "
- //											+ "KEKA_INPUT_FLG = '%s' "
- //											+ "WHERE " + "UKETUKE_ID = %s "
- //											+ "AND " + "KENSA_NENGAPI = %s",
- //											kensakekaInputFlg, validatedData
- //													.getUketuke_id(),
- //											kensaJissiDate);
- //									JApplication.kikanDatabase
- //											.sendNoResultQuery(query);
- //
- //									// edit ver2 s.inoue 2009/08/25
- //									// パターン登録でエラーメッセージを回避する必要
- //									// 結果があるかどうか登録処理時に、コミット前の状態のフラグを渡す
- //									JApplication.kikanDatabase.Commit();
- //									stateChangedKenshinPatternNumber(validatedData.getUketuke_id(),jissiDate,true,isNewKekkaData);
- //
- //									this.initialDate = this.validatedData.getKensaJissiDate();
- //									this.isNewKekkaData = false;
- //
- //								} catch (SQLException f) {
- //									f.printStackTrace();
- //
- //									try {
- //										JApplication.kikanDatabase.rollback();
- //										return false;
- //									} catch (SQLException g) {
- //										g.printStackTrace();
- //										JErrorMessage
- //												.show("M0000", this);
- //										System.exit(1);
- //									}
- //								}
- //							}
- //						} catch (SQLException f) {
- //							f.printStackTrace();
- //
- //							try {
- //								System.out.println("Rollback!");
- //								JApplication.kikanDatabase.rollback();
- //								return false;
- //							} catch (SQLException g) {
- //								g.printStackTrace();
- //								JErrorMessage.show("M0000", this);
- //								System.exit(1);
- //							}
- //						}
- //					}
- //				}
- //			}
- //		}
- //		if (mode == INSERT_MODE) {
- //			mode = UPDATE_MODE;
- //			jTextField_SeiriNo.setVisible(false);
- //			jLabelSeirino.setVisible(false);
- //			isCopy = false;
- //		}
- //		refreshTable(kensaJissiDate, true,false,true);
- //		// edit s.inoue
- //		refreshInputControl(jTextField_Date.getText(),false,false);
- //		return true;
- //	}
- //
- //	/**
- //	 * 実施日確定ボタン
- //	 */
- //	public void changeInputDate(String kensaJissiDate, boolean saveColumnWidth) {
- //
- //			if (!kensaJissiDate.isEmpty()) {
- //				// 健診パターンコンボボックスに表示するパターン名を取得しセットする
- //				// //すでに登録されている年月日かどうかをチェックする
- //				boolean existsKensaKekkaData = existsKensaKekkaData(kensaJissiDate);
- //
- //				boolean isChangeMode = false;
- //				if (existsKensaKekkaData) {
- //					isChangeMode = true;
- //					mode = UPDATE_MODE;
- //				}
- //				else {
- //					mode = INSERT_MODE;
- //				}
- //
- //				/* 健診パターン選択欄を初期化する。 */
- //				this.initializeKenshinPatternComboBox(kensaJissiDate, isChangeMode,false);
- //
- //				/* 検査センター名称選択欄を初期化する。 */
- //				this.initializeKensaCenterComboBox(kensaJissiDate, isChangeMode);
- //				refreshTable(kensaJissiDate, true,false,false);
- //				// edit s.inoue
- //				refreshInputControl(jTextField_Date.getText(),false,false);
- //			}
- //	}
- //
- //	/**
- //	 * 結果データが存在するかどうか確認
- //	 */
- //	private boolean existsKensaKekkaData(String kensaJissiDate) {
- //		Integer kensanengapi = null;
- //		try {
- //			kensanengapi = new Integer(kensaJissiDate);
- //		} catch (NumberFormatException e) {
- //		}
- //
- //		List<TKensakekaSonota> resultList = null;
- //		try {
- //			String uketuke_id = validatedData.getUketuke_id();
- //			resultList = kensakekaSonotaDao.selectByUketukeIdKensaNengapi(
- //					new Long(uketuke_id),
- //					kensanengapi);
- //		} catch (Exception e) {
- //			e.printStackTrace();
- //		}
- //
- //		boolean exsistsKensaKekkaData = false;
- //		if (resultList != null &&  resultList.size() > 0) {
- //			exsistsKensaKekkaData = true;
- //		}
- //
- //		return exsistsKensaKekkaData;
- //	}
- //
- //	/**
- //	 * 実施を日変更する。
- //	 */
- //	public void changeJissibi() {
- //		if (validatedData.setKensaJissiDate(jTextField_Date.getText())) {
- //			if (!validatedData.getKensaJissiDate().isEmpty()) {
- //				// 健診パターンコンボボックスに表示するパターン名を取得しセットする
- //				// //すでに登録されている年月日かどうかをチェックする
- //				Integer kensanengapi = null;
- //				try {
- //					kensanengapi = new Integer(validatedData
- //							.getKensaJissiDate());
- //				} catch (NumberFormatException e) {
- //				}
- //
- //				List<TKensakekaSonota> resultList = null;
- //				try {
- //					String uketuke_id = validatedData.getUketuke_id();
- //					resultList = kensakekaSonotaDao.selectByUketukeIdKensaNengapi(
- //							new Long(uketuke_id),kensanengapi);
- //				} catch (Exception e) {
- //					e.printStackTrace();
- //				}
- //
- //				/*
- //				 * 変更しようとしている日に、検査結果が既に存在する場合は、処理を中断する。
- //				 */
- //				if (resultList == null) {
- //					/* 指定した日[%s]には、すでに健診結果データが存在するため、変更できません。
- //					 * 変更する場合は、先に[%s]の健診結果データを削除する必要があります。 */
- //
- //					String kensaNengapiString = String.valueOf(kensanengapi);
- //					String[] messageParams = { kensaNengapiString, kensaNengapiString };
- //
- //					JErrorMessage.show("M3631", this, messageParams);
- //
- //					return;
- //				}
- //			}
- //		}
- //	}
- //
- //	/**
- //	 * 検査センター名称選択欄を初期化する。
- //	 */
- //	private void initializeKensaCenterComboBox(String jissiDate, boolean isChangeMode) {
- //		/* 健診センター項目コンボボックスに表示するセンター名を取得しセットする
- //		 * 項目を追加する前に、全て削除しておく必要がある。
- //		 */
- //		jComboBox_KensaKikanName.removeAllItems();
- //
- //		// 健診センター項目コンボボックスに表示するセンター名を取得しセットする
- //		ArrayList<Hashtable<String, String>> items = null;
- //		try {
- //			items = JApplication.kikanDatabase
- //					.sendExecuteQuery("SELECT DISTINCT KENSA_CENTER_CD,CENTER_NAME FROM T_KENSACENTER_MASTER");
- //		} catch (SQLException e) {
- //			e.printStackTrace();
- //		}
- //
- //		jComboBox_KensaKikanName.addItem(null);
- //		for (int i = 0; i < items.size(); i++) {
- //			Hashtable<String, String> Item;
- //			Item = items.get(i);
- //			jComboBox_KensaKikanName.addItem(Item.get("CENTER_NAME"));
- //		}
- //		// 変更の場合は以前選択されていたものを初期値として表示する
- //		if (isChangeMode) {
- //			// T_KOJIN,T_KENSAKEKA_TOKUTEIにUKETUKE_ID,NENDO追加対応
- //			String query = "SELECT CENTER.CENTER_NAME "
- //					+ "FROM T_KENSAKEKA_TOKUTEI AS TOKUTEI "
- //					+ "LEFT JOIN T_KENSACENTER_MASTER AS CENTER "
- //					+ "ON "
- //					+ "TOKUTEI.KENSA_CENTER_CD = CENTER.KENSA_CENTER_CD "
- //					+ "WHERE "
- //					+ "UKETUKE_ID = "
- //					+ JQueryConvert.queryConvert(validatedData
- //							.getUketuke_id())
- //					+ " "
- //					+ "AND "
- //					+ "TOKUTEI.KENSA_NENGAPI = "
- //					+ JQueryConvert.queryConvert(jissiDate);
- //
- //			ArrayList<Hashtable<String, String>> items2 = null;
- //			try {
- //				items2 = JApplication.kikanDatabase.sendExecuteQuery(query);
- //			} catch (SQLException e) {
- //				e.printStackTrace();
- //			}
- //
- //			for (int i = 0; i < jComboBox_KensaKikanName.getItemCount(); i++) {
- //				// 検査センターが未選択の場合でも検査センターコンボボックスで最初の項目が選択されてしまう障害の修正
- //				String selectedItem = (String) jComboBox_KensaKikanName
- //						.getItemAt(i);
- //				if ((selectedItem != null)
- //						&& (selectedItem.equals(items2.get(0).get(
- //								"CENTER_NAME")))) {
- //					jComboBox_KensaKikanName.setSelectedIndex(i);
- //					break;
- //				}
- //			}
- //		}
- //
- //		isInit = true;
- //		stateChangedKensaKikanName();
- //		stateInitKenshinPatternNumber(jissiDate);
- //	}
- //
- //	/**
- //	 * 健診パターン選択欄を初期化する。
- //	 */
- //	private void initializeKenshinPatternComboBox(String jissiDate, boolean isChangeMode, boolean preview) {
- //		jComboBox_Pattern.removeAllItems();
- //
- //		ArrayList<Hashtable<String, String>> items = null;
- //		try {
- //			items = JApplication.kikanDatabase
- //			.sendExecuteQuery("SELECT * FROM T_KENSHIN_P_M WHERE K_P_NO >= 0 ORDER BY K_P_NO");
- //		} catch (SQLException e) {
- //			e.printStackTrace();
- //		}
- //
- //		for (int i = 0; i < items.size(); i++) {
- //			Hashtable<String, String> Item;
- //			Item = items.get(i);
- //			jComboBox_Pattern.addItem(Item.get("K_P_NAME"));
- //		}
- //
- //		// add ver2 s.inoue 2009/06/25
- //		String uketukeID = "";
- //
- //		if (isCopy && !preview ){
- //			uketukeID = validatedData.getUketukePre_id();
- //		}else{
- //			uketukeID = validatedData.getUketuke_id();
- //		}
- //
- //		// 変更の場合は以前選択されていたものを初期値として表示する
- //		if (isChangeMode || (isCopy && !preview )) {
- //			String Query = "SELECT PM.K_P_NAME "
- //					+ "FROM T_KENSAKEKA_TOKUTEI AS TOKUTEI "
- //					+ "LEFT JOIN T_KENSHIN_P_M AS PM "
- //					+ "ON TOKUTEI.K_P_NO = PM.K_P_NO "
- //					+ " WHERE "
- //					+ "UKETUKE_ID = "
- //					+ uketukeID
- //					+ " "
- //					+ "AND "
- //					+ "TOKUTEI.KENSA_NENGAPI = "
- //					+ JQueryConvert.queryConvert(jissiDate);
- //			try {
- //				items = JApplication.kikanDatabase.sendExecuteQuery(Query);
- //			} catch (SQLException e) {
- //				e.printStackTrace();
- //			}
- //			if (!items.isEmpty()) {
- //				for (int i = 0; i < jComboBox_Pattern.getItemCount(); i++) {
- //					if (((String) (jComboBox_Pattern.getItemAt(i)))
- //							.equals(items.get(0).get("K_P_NAME"))) {
- //						jComboBox_Pattern.setSelectedIndex(i);
- //						break;
- //					}
- //				}
- //			}
- //		}
- //	}
- //
- //	/**
- //	 * BMI計算ActionEvent
- //	 */
- //	public void actionBMICalc(){
- //		if (
- //				heightCellPosition != null
- //				&& weightCellPosition != null
- //				&& BMICellPosition != null
- //			) {
- //
- //			String height = (String)this.model.getData(
- //					heightCellPosition.getRow(),
- //					heightCellPosition.getColumn()
- //				);
- //
- //			String weight = (String) this.model.getData(
- //					weightCellPosition.getRow(),
- //					weightCellPosition.getColumn()
- //				);
- //
- //			String bmi = calcBMI(height, weight);
- //
- //			String kensaKekka = JValidate.validateKensaKekkaDecimal(
- //											bmi,BMIFormat);
- //			this.model.setData(
- //					kensaKekka,
- //					BMICellPosition.getRow(),
- //					BMICellPosition.getColumn()
- //				);
- //		}
- //	}
- //
- //	/**
- //	 * BMI値を計算する
- //	 */
- //	public String calcBMI(String height, String weight) {
- //		// どちらかが空値の場合は空値を返す
- //		if (height.isEmpty() || weight.isEmpty()) {
- //			return "";
- //		}
- //
- //		// ０除算エラーを防ぐ
- //		if (Double.valueOf(height) == 0) {
- //			return "";
- //		}
- //
- //		BigDecimal bmi = new BigDecimal(
- //				String
- //						.valueOf((Double.valueOf(weight) / ((Double
- //								.valueOf(height) / 100) * (Double
- //								.valueOf(height) / 100)))));
- //		return String.valueOf(bmi.setScale(1, BigDecimal.ROUND_HALF_UP)
- //				.doubleValue());
- //	}
- //
- //	/**
- //	 * 終了ボタン
- //	 */
- //	public void pushedEndButton(ActionEvent e) {
- //		dispose();
- //	}
- //
- //	/**
- //	 * キャンセルボタン
- //	 */
- //	public void pushedCancelButton(ActionEvent e) {
- //		RETURN_VALUE Ret = JErrorMessage.show("M3621", this);
- //		if (Ret == RETURN_VALUE.YES) {
- //			dispose();
- //		}
- //	}
- //
- //	/**
- //	 * クリアボタン
- //	 */
- //	public void pushedClearButton(ActionEvent e) {
- //		RETURN_VALUE Ret = JErrorMessage.show("M3640", this);
- //		if (Ret == RETURN_VALUE.YES) {
- //			refreshTable(jTextField_Date.getText(),false,true,false);
- //			refreshInputControl(jTextField_Date.getText(),true,false);
- //		}
- //	}
- //
- //	/**
- //	 * 登録ボタン
- //	 */
- //	public void pushedRegisterButton(ActionEvent e) {
- //
- //		String jissiDate = jTextField_Date.getText();
- //		if (jissiDate == null || jissiDate.isEmpty()) {
- //			JErrorMessage.show("M3633", this);
- //			this.jTextField_Date.grabFocus();
- //			return;
- //		}
- //		/* 健診実施日のフォーマットチェック */
- //		if (! validatedData.setKensaJissiDate(jissiDate)) {
- //			JErrorMessage.show("M3605", this);
- //			this.jTextField_Date.grabFocus();
- //			return;
- //		}
- //		if (isCopy){
- //			String copySeiriNo = jTextField_SeiriNo.getText();
- //			/* 受診券整理番号のフォーマットチェック */
- //			if (! validatedData.setcopyJyushinkenID(copySeiriNo)) {
- //				JErrorMessage.show("M3606", this);
- //				this.jTextField_SeiriNo.grabFocus();
- //				return;
- //			}
- //		}
- //		RETURN_VALUE Ret = JErrorMessage.show("M3622", this);
- //		if (Ret == RETURN_VALUE.YES) {
- //			this.register();
- //		}
- //	}
- //
- //	/* アクションイベント */
- //	public void actionPerformed(ActionEvent e) {
- //		Object source = e.getSource();
- //
- //		/* 終了ボタン */
- //		if (source == jButton_End) {
- //			logger.info(jButton_End.getText());
- //			pushedEndButton(e);
- //		}
- //		/* 登録ボタン */
- //		else if (source == jButton_Register) {
- //			logger.info(jButton_Register.getText());
- //			pushedRegisterButton(e);
- //		}
- //		/* キャンセルボタン */
- //		else if (source == jButton_Cancel) {
- //			logger.info(jButton_Cancel.getText());
- //			pushedCancelButton(e);
- //		}
- //		// add ver2 s.inoue 2009/06/02
- //		/* クリアボタン */
- //		else if (source == jButton_Clear) {
- //			logger.info(jButton_Clear.getText());
- //			pushedClearButton(e);
- //		}
- //		/* BMI計算のためのキーリスナー */
- //		else if (source == this.model) {
- //			actionBMICalc();
- //		}
- //
- //		/* Enterキーによるフォーカス移動機能追加 */
- //		if (this.enterkeyFocusComponents != null
- //				&& this.enterkeyFocusComponents.contains(source)) {
- //			if (source instanceof Component) {
- //				((Component) source).transferFocus();
- //			}
- //		}
- //	}
- //
- //// del s.inoue 2009/12/22
- ////	@Override
- ////	public void keyPressed(KeyEvent keyEvent) {
- ////		switch(keyEvent.getKeyCode()){
- ////		case KeyEvent.VK_F1:
- ////			pushedEndButton(null);break;
- ////		case KeyEvent.VK_F2:
- ////			pushedClearButton(null);break;
- ////		case KeyEvent.VK_F12:
- ////			pushedRegisterButton(null);break;
- ////		}
- ////	}
- //	/* mouse選択イベント */
- //	@Override
- //	public void mousePressed(MouseEvent e) {
- //		mousePopup(e);
- //	}
- //	@Override
- //	public void mouseReleased(MouseEvent e) {
- //		mousePopup(e);
- //	}
- //
- //	private void mousePopup(MouseEvent e) {
- //		if (e.isPopupTrigger()) {
- //			// ポップアップメニューを表示する
- //			JComponent c = (JComponent)e.getSource();
- //			jEditorPane_Comment.showPopup(c, e.getX(), e.getY());
- //			e.consume();
- //		}
- //	}
- //
- //	/* combo選択イベント */
- //	public void itemStateChanged(ItemEvent e) {
- //
- //		if (isInit) {
- //			if (e.getSource() == jComboBox_KensaKikanName) {
- //				stateChangedKensaKikanName();
- //			}
- //
- //			if (e.getSource() == jComboBox_Pattern) {
- //				if (e.getStateChange() == ItemEvent.SELECTED){
- //					stateChangedKenshinPatternNumber(validatedData.getUketuke_id(),validatedData.getKensaJissiDate(),false,isNewKekkaData);
- //				}
- //			}
- //		}
- //	}
- //
- //	/**
- //	 * 入力必須のセルを取得しフォーカスマップを作成 テーブルにフォーカスリスナを設定
- //	 * Enterキー押下でフォーカスマップに登録されたセル座標にフォーカスを移動する
- //	 */
- //	private void setTableFocusMap() {
- //		// ref s.inoue 20080912 実施区分フォーカス 3⇒4
- //		final int KEKA_TI_COLUMN_COUNT = 3;
- //		List<int[]> focusMap = new ArrayList<int[]>();
- //		boolean[][] onOff = new boolean[model.getRowCount()][KEKA_TI_COLUMN_COUNT];
- //
- //		for (int i = 0; i < onOff.length; i++) {
- //			for (int j = 0; j < KEKA_TI_COLUMN_COUNT; j++) {
- //				onOff[i][j] = true;
- //			}
- //		}
- //
- //		for (JSimpleTableCellRendererData rendererData : cellColors) {
- //			JSimpleTableCellPosition cellPosition = rendererData
- //					.getCellPosition();
- //			if (rendererData.getColor().equals(COLOR_DISABLE)) {
- //				onOff[cellPosition.getRow()][cellPosition.getColumn()  - KEKA_TI_COLUMN_COUNT] = false;
- //			}
- //		}
- //
- //		for (int i = 0; i < onOff.length; i++) {
- //			for (int j = 0; j < onOff[i].length; j++) {
- //				if (onOff[i][j]) {
- //					int[] position = new int[2];
- //					position[0] = j + KEKA_TI_COLUMN_COUNT;
- //					position[1] = i;
- //					focusMap.add(position);
- //				}
- //			}
- //		}
- //
- //		JKekkaRegisterTableEnterAction enterAction =
- //				new JKekkaRegisterTableEnterAction(
- //				focusMap,
- //				model
- //			);
- //
- //		model.getActionMap().put(
- //				enterAction.getInputMapObject(),
- //				enterAction.getEnterAction()
- //		);
- //	}
- //}
\ No newline at end of file
--- 3736,3738 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaRegisterKekkaMojiretsuInputDialog.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaRegisterKekkaMojiretsuInputDialog.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaRegisterKekkaMojiretsuInputDialog.java	Tue Apr 27 11:51:52 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaRegisterKekkaMojiretsuInputDialog.java	Fri Oct 30 14:05:00 2009
***************
*** 1,14 ****
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
  
  import java.awt.Frame;
- import java.awt.event.ActionEvent;
  import java.awt.event.ComponentAdapter;
  import java.awt.event.ComponentEvent;
- import java.awt.event.MouseEvent;
- import java.awt.event.MouseListener;
  
  import javax.swing.BorderFactory;
- import javax.swing.JComponent;
  import javax.swing.JTextArea;
  import javax.swing.border.EtchedBorder;
  
--- 1,10 ----
***************
*** 17,23 ****
  import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  
! public class JKekkaRegisterKekkaMojiretsuInputDialog extends JKekkaRegisterAbstractInputDialog implements MouseListener{
  
  	private static final long serialVersionUID = 1L;
  	/**
--- 13,19 ----
  import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  
! public class JKekkaRegisterKekkaMojiretsuInputDialog extends JKekkaRegisterAbstractInputDialog {
  
  	private static final long serialVersionUID = 1L;
  	/**
***************
*** 50,56 ****
  		this.setFocusTraversalPolicy(this.focusTraversalPolicy);
  
  		this.focusTraversalPolicy.setDefaultComponent(this.jKekkaMojiretsuTextArea);
- 		this.focusTraversalPolicy.addComponent(this.jKekkaMojiretsuTextArea);
  		this.focusTraversalPolicy.addComponent(this.jButtonOK);
  		this.focusTraversalPolicy.addComponent(this.jButtonCancel);
  
--- 46,51 ----
***************
*** 82,90 ****
  		if (jKekkaMojiretsuTextArea == null) {
  			jKekkaMojiretsuTextArea = new ExtendedEditorPane(ImeMode.IME_ZENKAKU);
  			jKekkaMojiretsuTextArea.setBorder(BorderFactory.createEtchedBorder(EtchedBorder.LOWERED));
- 			// edit s.inoue 2009/11/11
- 			jKekkaMojiretsuTextArea.addMouseListener(this); // マウスリスナを登録
- 
  		}
  		return jKekkaMojiretsuTextArea;
  	}
--- 77,82 ----
***************
*** 104,152 ****
  	public String getText() {
  		return jKekkaMojiretsuTextArea.getText();
  	}
- 
- 	// add s.inoue 2009/11/11
- 	@Override
- 	public void mousePressed(MouseEvent e) {
- 		mousePopup(e);
- 	}
- 	@Override
- 	public void mouseReleased(MouseEvent e) {
- 		mousePopup(e);
- 	}
- 	// add s.inoue 2009/11/11
- 	private void mousePopup(MouseEvent e) {
- 		if (e.isPopupTrigger()) {
- 			// ポップアップメニューを表示する
- 			JComponent c = (JComponent)e.getSource();
- 			jKekkaMojiretsuTextArea.showPopup(c, e.getX(), e.getY());
- 			e.consume();
- 		}
- 	}
- 
- 	@Override
- 	public void mouseClicked(MouseEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void mouseEntered(MouseEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void mouseExited(MouseEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void actionPerformed(ActionEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
  }
  //@jve:decl-index=0:
  //  @jve:decl-index=0:visual-constraint="10,10"
\ No newline at end of file
--- 96,101 ----
Only in ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame: JKekkaTeikeiMaintenanceEditFrame.java
Only in ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame: JKekkaTeikeiMaintenanceEditFrameCtrl.java
Only in ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame: JKekkaTeikeiMaintenanceEditFrameData.java
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaTeikeiMaintenanceListFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaTeikeiMaintenanceListFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaTeikeiMaintenanceListFrame.java	Thu Apr 22 15:06:28 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaTeikeiMaintenanceListFrame.java	Tue Aug 11 17:55:30 2009
***************
*** 3,31 ****
  import java.awt.BorderLayout;
  import javax.swing.JPanel;
  import javax.swing.JFrame;
  import java.awt.GridBagLayout;
  import java.awt.GridLayout;
  import javax.swing.SwingConstants;
  import javax.swing.JLabel;
  import java.awt.CardLayout;
  import java.awt.Font;
  import java.awt.Color;
  import java.awt.Rectangle;
  import java.awt.event.*;
  import java.awt.GridBagConstraints;
  import java.awt.Insets;
  
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedButton;
- import jp.or.med.orca.jma_tokutei.common.component.TitleLabel;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
- import jp.or.med.orca.jma_tokutei.common.frame.ViewSettingsKey;
- 
  import javax.swing.BorderFactory;
  
! public class JKekkaTeikeiMaintenanceListFrame extends JFrame implements ActionListener,KeyListener
  {
  	protected static final long serialVersionUID = 1L;
- 	protected JPanel jPanel_MainArea = null;
  	protected JPanel jPanel_Content = null;
  	protected JPanel jPanel_ButtonArea = null;
  	protected ExtendedButton jButton_End = null;
--- 3,35 ----
  import java.awt.BorderLayout;
  import javax.swing.JPanel;
  import javax.swing.JFrame;
+ import javax.swing.JTextArea;
+ 
  import java.awt.GridBagLayout;
  import java.awt.GridLayout;
+ import java.awt.FlowLayout;
  import javax.swing.SwingConstants;
  import javax.swing.JLabel;
  import java.awt.CardLayout;
  import java.awt.Font;
  import java.awt.Color;
  import java.awt.Rectangle;
+ import javax.swing.JTextField;
  import java.awt.event.*;
+ 
+ import javax.swing.BoxLayout;
  import java.awt.GridBagConstraints;
  import java.awt.Insets;
+ import java.awt.Dimension;
  
+ import jp.or.med.orca.jma_tokutei.common.app.JApplication;
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedButton;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  import javax.swing.BorderFactory;
  
! public class JKekkaTeikeiMaintenanceListFrame extends JFrame implements ActionListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
  	protected JPanel jPanel_ButtonArea = null;
  	protected ExtendedButton jButton_End = null;
***************
*** 36,45 ****
  	protected JPanel jPanel_ExplArea2 = null;
  	protected JLabel jLabal_SubExpl = null;
  	protected JPanel jPanel_ExplArea1 = null;
! 	protected ExtendedButton jButton_Edit = null;
! 	protected ExtendedButton jButton_Add = null;
! 	protected ExtendedButton jButton_Delete = null;
! 
  	protected JPanel jPanel = null;
  	protected JPanel jPanel1 = null;
  	protected JPanel jPanel2 = null;
--- 40,48 ----
  	protected JPanel jPanel_ExplArea2 = null;
  	protected JLabel jLabal_SubExpl = null;
  	protected JPanel jPanel_ExplArea1 = null;
! 	//protected ExtendedButton jButton_Add = null;
! 	protected ExtendedButton jButton_Register = null;
! 	//protected ExtendedButton jButton_Del = null;
  	protected JPanel jPanel = null;
  	protected JPanel jPanel1 = null;
  	protected JPanel jPanel2 = null;
***************
*** 50,59 ****
  	protected JPanel jPanel12 = null;
  	protected JPanel jPanel_Left = null;
  	protected JPanel jPanel_Right = null;
! 
! 	protected ExtendedButton jButton_Import = null;
! 	protected ExtendedButton jButton_Export = null;
! 
  	/**
  	 * This is the default constructor
  	 */
--- 53,62 ----
  	protected JPanel jPanel12 = null;
  	protected JPanel jPanel_Left = null;
  	protected JPanel jPanel_Right = null;
! 	//private JLabel jLabel1 = null;
! 	private JLabel jLabel11 = null;
! 	private JLabel jLabel12 = null;
! 	private JTextArea jTeikeiArea= null;
  	/**
  	 * This is the default constructor
  	 */
***************
*** 61,66 ****
--- 64,70 ----
  		super();
  		initialize();
  	}
+ 	private ExtendedButton jButton_ToRight1 = null;
  
  	/**
  	 * This method initializes this
***************
*** 86,110 ****
  			borderLayout.setVgap(2);
  			jPanel_Content = new JPanel();
  			jPanel_Content.setLayout(borderLayout);
- 			jPanel_Content.add(getJPanel_NaviArea(), BorderLayout.NORTH);
- 			jPanel_Content.add(getJPanel_MainArea(), BorderLayout.CENTER);
  			jPanel_Content.add(getJPanel_ButtonArea(), BorderLayout.SOUTH);
! 		}
! 		return jPanel_Content;
! 	}
  
- 	/**
- 	 * This method initializes jPanel_MainArea
- 	 *
- 	 * @return javax.swing.JPanel
- 	 */
- 	private JPanel getJPanel_MainArea() {
- 		if (jPanel_MainArea == null) {
- 			jPanel_MainArea = new JPanel();
- 			jPanel_MainArea.setLayout(new BorderLayout());
- 			jPanel_MainArea.setBorder(BorderFactory.createEmptyBorder(0, 10, 10, 10));
  		}
! 		return jPanel_MainArea;
  	}
  
  	/**
--- 90,101 ----
  			borderLayout.setVgap(2);
  			jPanel_Content = new JPanel();
  			jPanel_Content.setLayout(borderLayout);
  			jPanel_Content.add(getJPanel_ButtonArea(), BorderLayout.SOUTH);
! 			jPanel_Content.add(getJPanel_NaviArea(), BorderLayout.NORTH);
! 			jPanel_Content.add(getJPanel(), BorderLayout.CENTER);
  
  		}
! 		return jPanel_Content;
  	}
  
  	/**
***************
*** 114,165 ****
  	 */
  	private JPanel getJPanel_ButtonArea() {
  		if (jPanel_ButtonArea == null) {
- 			// add s.inoue 2010/02/25
- 			GridBagConstraints gridBagConstraints4 = new GridBagConstraints();
- 			gridBagConstraints4.gridy = 0;
- 			gridBagConstraints4.insets = new Insets(0, 5, 0, 0);
- 			gridBagConstraints4.gridx = 1;
- 			gridBagConstraints4.weightx = 1.0D;
- 			gridBagConstraints4.anchor = GridBagConstraints.EAST;
  
! 			GridBagConstraints gridBagConstraints5 = new GridBagConstraints();
! 			gridBagConstraints5.gridy = 0;
! 			gridBagConstraints5.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints5.gridx = 2;
  
! 			GridBagConstraints gridBagConstraints3 = new GridBagConstraints();
! 			gridBagConstraints3.gridy = 0;
! 			gridBagConstraints3.gridx = 0;
! 			GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
! 			gridBagConstraints2.gridy = 0;
! 			gridBagConstraints2.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints2.gridx = 5;
! 			GridBagConstraints gridBagConstraints1 = new GridBagConstraints();
! 			gridBagConstraints1.gridy = 0;
! 			gridBagConstraints1.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints1.gridx = 4;
! 			GridBagConstraints gridBagConstraints = new GridBagConstraints();
! 			gridBagConstraints.gridy = 0;
! 			// del s.inoue 2010/03/12
! 			// gridBagConstraints.weightx = 1.0D;
! 			// gridBagConstraints.anchor = GridBagConstraints.EAST;
! 			gridBagConstraints.gridx = 3;
! 			gridBagConstraints.insets = new Insets(0, 5, 0, 0);
  
  			jPanel_ButtonArea = new JPanel();
  			jPanel_ButtonArea.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
  			jPanel_ButtonArea.setLayout(new GridBagLayout());
! 			// add s.inoue 2010/02/25
! 			jPanel_ButtonArea.add(getJButton_Import(), gridBagConstraints4);
! 			jPanel_ButtonArea.add(getJButton_Export(), gridBagConstraints5);
! 
! 			jPanel_ButtonArea.add(getJButton_End(), gridBagConstraints3);
! 			jPanel_ButtonArea.add(getJButton_Add(), gridBagConstraints);
! 			jPanel_ButtonArea.add(getJButton_Edit(), gridBagConstraints1);
! 			jPanel_ButtonArea.add(getJButton_Delete(), gridBagConstraints2);
  		}
  		return jPanel_ButtonArea;
  	}
  	/**
  	 * This method initializes jButton_End
  	 *
--- 105,143 ----
  	 */
  	private JPanel getJPanel_ButtonArea() {
  		if (jPanel_ButtonArea == null) {
  
! 			GridBagConstraints gridBagConstraints8 = new GridBagConstraints();
! 			gridBagConstraints8.gridy = 1;
! 			gridBagConstraints8.gridx = 0;
  
! 			GridBagConstraints gridBagConstraints5 = new GridBagConstraints();
! 			gridBagConstraints5.gridy = 1;
! 			gridBagConstraints5.gridx = 1;
! 			gridBagConstraints5.weightx = 1.0D;
! 			gridBagConstraints5.anchor = GridBagConstraints.EAST;
! 
! //			GridBagConstraints gridBagConstraints9 = new GridBagConstraints();
! //			gridBagConstraints9.gridy = 1;
! //			gridBagConstraints9.gridx = 2;
! //			gridBagConstraints9.anchor = GridBagConstraints.EAST;
! 
! 			GridBagConstraints gridBagConstraints10 = new GridBagConstraints();
! 			gridBagConstraints10.gridy = 1;
! 			gridBagConstraints10.gridx = 3;
  
  			jPanel_ButtonArea = new JPanel();
  			jPanel_ButtonArea.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
  			jPanel_ButtonArea.setLayout(new GridBagLayout());
! 
! 			jPanel_ButtonArea.add(getJButton_End(), gridBagConstraints8);
! 			//jPanel_ButtonArea.add(getJButton_Add(), gridBagConstraints9);
! 			jPanel_ButtonArea.add(getJButton_Register(), gridBagConstraints5);
! 			//jPanel_ButtonArea.add(getJButton_Del(), gridBagConstraints10);
! 
  		}
  		return jPanel_ButtonArea;
  	}
+ 
  	/**
  	 * This method initializes jButton_End
  	 *
***************
*** 171,177 ****
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
--- 149,155 ----
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
***************
*** 191,197 ****
  			jLabel_MainExpl.setText("健診・問診結果データ入力画面の「総合コメント」、「結果（文字列）」欄でCTLキー+ENTERキーで表示される画面です。");
  			jLabel_MainExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
  			jLabel_MainExpl.setName("jLabel1");
! 			jLabel_Title = new TitleLabel(ViewSettingsKey.KEY_TOKUTEI_TEIKEI_MASTERMAINTENANCE_FRAME_TITLE);
  			jLabel_Title.setFont(new Font("Dialog", Font.PLAIN, 18));
  			jLabel_Title.setBackground(new Color(153, 204, 255));
  			jLabel_Title.setForeground(new Color(51, 51, 51));
--- 169,176 ----
  			jLabel_MainExpl.setText("健診・問診結果データ入力画面の「総合コメント」、「結果（文字列）」欄でCTLキー+ENTERキーで表示される画面です。");
  			jLabel_MainExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
  			jLabel_MainExpl.setName("jLabel1");
! 			jLabel_Title = new JLabel();
! 			jLabel_Title.setText("定型文一覧");
  			jLabel_Title.setFont(new Font("Dialog", Font.PLAIN, 18));
  			jLabel_Title.setBackground(new Color(153, 204, 255));
  			jLabel_Title.setForeground(new Color(51, 51, 51));
***************
*** 264,341 ****
  	}
  
  	/**
! 	 * This method initializes jButton_Import
  	 *
  	 * @return javax.swing.ExtendedButton
  	 */
! 	private ExtendedButton getJButton_Import() {
! 		if (jButton_Import == null) {
! 			jButton_Import = new ExtendedButton();
! 			jButton_Import.setText("取込(F4)");
! 			jButton_Import.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_Import.addActionListener(this);
  		}
! 		return jButton_Import;
  	}
- 
  	/**
! 	 * This method initializes jButton_Export
  	 *
  	 * @return javax.swing.ExtendedButton
  	 */
! 	private ExtendedButton getJButton_Export() {
! 		if (jButton_Export == null) {
! 			jButton_Export = new ExtendedButton();
! 			jButton_Export.setText("書出(F5)");
! 			jButton_Export.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_Export.addActionListener(this);
  		}
! 		return jButton_Export;
  	}
  
  	/**
! 	 * This method initializes jButton_Delete
  	 *
! 	 * @return javax.swing.ExtendedButton
  	 */
! 	private ExtendedButton getJButton_Delete() {
! 		if (jButton_Delete == null) {
! 			jButton_Delete = new ExtendedButton();
! 			jButton_Delete.setText("削除(F12)");
! 			jButton_Delete.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_Delete.addActionListener(this);
  		}
! 		return jButton_Delete;
  	}
  
  	/**
! 	 * This method initializes jButton_Add
  	 *
  	 * @return javax.swing.ExtendedButton
  	 */
! 	private ExtendedButton getJButton_Add() {
! 		if (jButton_Add == null) {
! 			jButton_Add = new ExtendedButton();
! 			jButton_Add.setText("新規追加(F9)");
! 			jButton_Add.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_Add.addActionListener(this);
  		}
! 		return jButton_Add;
  	}
  
  	/**
! 	 * This method initializes jButton_Edit
  	 *
  	 * @return javax.swing.ExtendedButton
  	 */
! 	private ExtendedButton getJButton_Edit() {
! 		if (jButton_Edit == null) {
! 			jButton_Edit = new ExtendedButton();
! 			jButton_Edit.setText("編集(F11)");
! 			jButton_Edit.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_Edit.addActionListener(this);
  		}
! 		return jButton_Edit;
  	}
  
  	public void actionPerformed( ActionEvent e )
--- 243,440 ----
  	}
  
  	/**
! 	 * This method initializes jButton_Register
  	 *
  	 * @return javax.swing.ExtendedButton
  	 */
! 	private ExtendedButton getJButton_Register() {
! 		if (jButton_Register == null) {
! 			jButton_Register = new ExtendedButton();
! 			jButton_Register.setText("登録");
! 			jButton_Register.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_Register.addActionListener(this);
  		}
! 		return jButton_Register;
  	}
  	/**
! 	 * This method initializes jButton_Register
! 	 *
! 	 * @return javax.swing.ExtendedButton
! 	 */
! //	private ExtendedButton getJButton_Add() {
! //		if (jButton_Add == null) {
! //			jButton_Add = new ExtendedButton();
! //			jButton_Add.setText("登録");
! //			jButton_Add.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jButton_Add.addActionListener(this);
! //		}
! //		return jButton_Add;
! //	}
! 	/**
! 	 * This method initializes jButton_Register
  	 *
  	 * @return javax.swing.ExtendedButton
  	 */
! //	private ExtendedButton getJButton_Del() {
! //		if (jButton_Del == null) {
! //			jButton_Del = new ExtendedButton();
! //			jButton_Del.setText("削除");
! //			jButton_Del.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jButton_Del.addActionListener(this);
! //		}
! //		return jButton_Del;
! //	}
! 	/**
! 	 * This method initializes jPanel
! 	 *
! 	 * @return javax.swing.JPanel
! 	 */
! 	private JPanel getJPanel() {
! 		if (jPanel == null) {
! 			CardLayout cardLayout4 = new CardLayout();
! 			cardLayout4.setHgap(10);
! 			cardLayout4.setVgap(10);
! 			jPanel = new JPanel();
! 			jPanel.setLayout(cardLayout4);
! 			jPanel.add(getJPanel12(), getJPanel12().getName());
  		}
! 		return jPanel;
  	}
  
  	/**
! 	 * This method initializes jPanel1
  	 *
! 	 * @return javax.swing.JPanel
  	 */
! 	private JPanel getJPanel1() {
! 		if (jPanel1 == null) {
! 			jPanel1 = new JPanel();
! 			jPanel1.setName("jPanel1");
! 			jPanel1.setLayout(new BoxLayout(getJPanel1(), BoxLayout.X_AXIS));
  		}
! 		return jPanel1;
  	}
  
  	/**
! 	 * This method initializes jPanel2
! 	 *
! 	 * @return javax.swing.JPanel
! 	 */
! 	private JPanel getJPanel2() {
! 		if (jPanel2 == null) {
! 
! 			GridBagConstraints gridBagConstraints1 = new GridBagConstraints();
! 			gridBagConstraints1.gridx = 1;
! 			gridBagConstraints1.gridwidth = 1;
! 			gridBagConstraints1.gridy = 0;
! 
! 			GridBagConstraints gridBagConstraints = new GridBagConstraints();
! 			gridBagConstraints.gridx = 0;
! 			gridBagConstraints.weightx = 1.0D;
! 			gridBagConstraints.weighty = 1.0D;
! 			gridBagConstraints.fill = GridBagConstraints.BOTH;
! 			gridBagConstraints.gridy = 0;
! 
! 			jPanel2 = new JPanel();
! 			jPanel2.setName("jPanel2");
! 			jPanel2.setLayout(new GridBagLayout());
! 			jPanel2.add(getJPanel11(), gridBagConstraints);
! 			jPanel2.add(getJPanel3(), gridBagConstraints1);
! 		}
! 		return jPanel2;
! 	}
! 
! 	/**
! 	 * This method initializes jPanel3
! 	 *
! 	 * @return javax.swing.JPanel
! 	 */
! 	private JPanel getJPanel3() {
! 		if (jPanel3 == null) {
! 			GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
! 			gridBagConstraints2.insets = new Insets(50, 20, 0, 20);
! 			gridBagConstraints2.gridx = 0;
! 			gridBagConstraints2.gridy = 3;
! 
! 			GridBagConstraints gridBagConstraints4 = new GridBagConstraints();
! 			gridBagConstraints4.insets = new Insets(50, 20, 0, 20);
! 			gridBagConstraints4.gridy = 1;
! 			gridBagConstraints4.gridx = 0;
! 			GridBagConstraints gridBagConstraints3 = new GridBagConstraints();
! 			gridBagConstraints3.gridx = 0;
! 			gridBagConstraints3.insets = new Insets(0, 20, 0, 20);
! 			gridBagConstraints3.gridy = 0;
! 			jPanel3 = new JPanel();
! 			jPanel3.setPreferredSize(new Dimension(80, 294));
! 			jPanel3.setLayout(new GridBagLayout());
! 			jPanel3.add(getJButton_ToLeft(), gridBagConstraints3);
! 			jPanel3.add(getJButton_ToRight(), gridBagConstraints4);
! 			jPanel3.add(getJButton_ToRight1(), gridBagConstraints2);
! 		}
! 		return jPanel3;
! 	}
! 
! 	/**
! 	 * This method initializes jButton_ToLeft
  	 *
  	 * @return javax.swing.ExtendedButton
  	 */
! 	private ExtendedButton getJButton_ToLeft() {
! 		if (jButton_ToLeft == null) {
! 			jButton_ToLeft = new ExtendedButton();
! 			jButton_ToLeft.setName("jButton2");
! 			jButton_ToLeft.setFont(new Font("Dialog", Font.PLAIN, 24));
! 			jButton_ToLeft.setText("↑");
! 			jButton_ToLeft.addActionListener(this);
  		}
! 		return jButton_ToLeft;
  	}
  
  	/**
! 	 * This method initializes jButton_ToRight
  	 *
  	 * @return javax.swing.ExtendedButton
  	 */
! 	private ExtendedButton getJButton_ToRight() {
! 		if (jButton_ToRight == null) {
! 			jButton_ToRight = new ExtendedButton();
! 			jButton_ToRight.setName("jButton3");
! 			jButton_ToRight.setFont(new Font("Dialog", Font.PLAIN, 24));
! 			jButton_ToRight.setText("↓");
! 			jButton_ToRight.addActionListener(this);
! 		}
! 		return jButton_ToRight;
! 	}
! 
! 	/**
! 	 * This method initializes jPanel11
! 	 *
! 	 * @return javax.swing.JPanel
! 	 */
! 	private JPanel getJPanel11() {
! 		if (jPanel11 == null) {
! 			jPanel11 = new JPanel();
! 			jPanel11.setLayout(new BoxLayout(getJPanel11(), BoxLayout.Y_AXIS));
! 			jPanel11.add(getJPanel_Left(), null);
! 		}
! 		return jPanel11;
! 	}
! 
! 	/**
! 	 * This method initializes jPanel12
! 	 *
! 	 * @return javax.swing.JPanel
! 	 */
! 	private JPanel getJPanel12() {
! 		if (jPanel12 == null) {
! 			jPanel12 = new JPanel();
! 			jPanel12.setLayout(new BorderLayout());
! 			jPanel12.setName("jPanel12");
! 			jPanel12.add(getJPanel1(), BorderLayout.NORTH);
! 			jPanel12.add(getJPanel2(), BorderLayout.CENTER);
! 			jPanel12.add(jTeikeiArea, BorderLayout.SOUTH);
  		}
! 		return jPanel12;
  	}
  
  	public void actionPerformed( ActionEvent e )
***************
*** 361,381 ****
  		}
  	}
  
! 	@Override
! 	public void keyPressed(KeyEvent e) {
! 		// TODO 自動生成されたメソッド・スタブ
! 
! 	}
! 
! 	@Override
! 	public void keyReleased(KeyEvent e) {
! 		// TODO 自動生成されたメソッド・スタブ
! 
  	}
  
! 	@Override
! 	public void keyTyped(KeyEvent e) {
! 		// TODO 自動生成されたメソッド・スタブ
! 
  	}
  }
\ No newline at end of file
--- 460,514 ----
  		}
  	}
  
! 	/**
! 	 * This method initializes jPanel_Left
! 	 *
! 	 * @return javax.swing.JPanel
! 	 */
! 	private JPanel getJPanel_Left() {
! 		if (jPanel_Left == null) {
! 			jLabel11 = new JLabel();
! 			jLabel11.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jLabel11.setText("<<定型文マスタメンテナンスの内容>>");
! 
! 			jLabel12 = new JLabel();
! 			jLabel12.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jLabel12.setText("<<[総合コメント]、[結果（文字列）]の内容>>");
! 
! 			jTeikeiArea = new JTextArea();
! 			jTeikeiArea.setRows(3);
! 			jTeikeiArea.setLineWrap(true);
! 			jTeikeiArea.setName("jTeikeiArea");
! 			jTeikeiArea.setText("");
! 			jTeikeiArea.setDisabledTextColor(Color.black);
! 
! 			jTeikeiArea.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jTeikeiArea.setText("<<\u5b9a\u578b\u5206\u4e00\u89a7\u306e\u5185\u5bb9>>");
! 			jTeikeiArea.setSize(500,500);
! 
! 			jPanel_Left = new JPanel();
! 			jPanel_Left.setLayout(new BorderLayout(2,1));
! 			jPanel_Left.add(jLabel12, BorderLayout.SOUTH);
! 			jPanel_Left.add(jLabel11, BorderLayout.NORTH);
! 		}
! 		return jPanel_Left;
  	}
  
! 	/**
! 	 * This method initializes jButton_ToRight1
! 	 *
! 	 * @return jp.or.med.orca.jma_tokutei.common.component.ExtendedButton
! 	 */
! 	private ExtendedButton getJButton_ToRight1() {
! 		if (jButton_ToRight1 == null) {
! 			jButton_ToRight1 = new ExtendedButton();
! 			jButton_ToRight1.setFont(new Font("Dialog", Font.PLAIN, 16));
! 			jButton_ToRight1.setSize(50, 100);
! 			String strRight ="";
! 			strRight = "追加";
! 			jButton_ToRight1.setText(strRight);
! 			jButton_ToRight1.setName("jButton3");
! 		}
! 		return jButton_ToRight1;
  	}
  }
\ No newline at end of file
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaTeikeiMaintenanceListFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaTeikeiMaintenanceListFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaTeikeiMaintenanceListFrameCtrl.java	Fri Apr 23 15:30:02 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKekkaTeikeiMaintenanceListFrameCtrl.java	Tue Aug 11 17:55:30 2009
***************
*** 1,643 ****
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
  
- import java.awt.Component;
  import java.awt.event.ActionEvent;
- import java.awt.event.KeyEvent;
- import java.awt.event.MouseAdapter;
- import java.awt.event.MouseEvent;
- import java.awt.event.WindowAdapter;
- import java.awt.event.WindowEvent;
- import java.io.File;
- import java.io.IOException;
- import java.sql.Connection;
  import java.sql.SQLException;
- import java.text.SimpleDateFormat;
  import java.util.ArrayList;
- import java.util.Arrays;
- import java.util.Calendar;
- import java.util.HashMap;
  import java.util.Hashtable;
- import java.util.Iterator;
- import java.util.List;
- import java.util.Vector;
- 
- import javax.swing.JButton;
- import javax.swing.JComponent;
- import javax.swing.RowSorter;
- import javax.swing.table.DefaultTableCellRenderer;
- import javax.swing.table.DefaultTableColumnModel;
- import javax.swing.table.TableColumnModel;
- import javax.swing.table.TableModel;
- import javax.swing.table.TableRowSorter;
  
- import org.apache.log4j.Logger;
- 
- import jp.or.med.orca.jma_tokutei.common.component.DialogFactory;
- import jp.or.med.orca.jma_tokutei.common.component.IDialog;
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
- import jp.or.med.orca.jma_tokutei.common.csv.JCSVReaderStream;
- import jp.or.med.orca.jma_tokutei.common.csv.JCSVWriterStream;
- import jp.or.med.orca.jma_tokutei.common.errormessage.RETURN_VALUE;
- import jp.or.med.orca.jma_tokutei.common.event.JSingleDoubleClickEvent;
- import jp.or.med.orca.jma_tokutei.common.event.JEnterEvent;
- import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
- import jp.or.med.orca.jma_tokutei.common.scene.JScene;
- import jp.or.med.orca.jma_tokutei.common.sql.dao.DaoFactory;
- import jp.or.med.orca.jma_tokutei.common.sql.dao.THokenjyaDao;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTable;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellPosition;
- import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellRowRenderer;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableScrollPanel;
- import jp.or.med.orca.jma_tokutei.common.validate.JValidate;
  import jp.or.med.orca.jma_tokutei.common.app.JApplication;
- import jp.or.med.orca.jma_tokutei.common.app.JPath;
- import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
- import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.dataimport.JImportMasterErrorHokenjyaResultFrameData;
- import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.dataimport.JImportMasterErrorTeikeiResultFrameData;
  
  /**
   * 定型文マスタメンテナンス
   */
  public class JKekkaTeikeiMaintenanceListFrameCtrl extends JKekkaTeikeiMaintenanceListFrame
  {
! 	private JSimpleTable model = new JSimpleTable();
! 	private int COLUMN_IDX_SYOKEN_NO = 0;
! 	private static Logger logger = Logger.getLogger(JKekkaTeikeiMaintenanceListFrameCtrl.class);
! 
! 	/* フォーカス移動制御 */
! 	private JFocusTraversalPolicy focusTraversalPolicy = null;
! 	// edit s.inoue 2009/12/14
! 	private final String[] SYOKENCODE= {"その他の既往歴","自覚症状所見","他覚症状所見","心電図所見"};
! 
! 	private JKekkaTeikeiMaintenanceEditFrameData validatedData = new JKekkaTeikeiMaintenanceEditFrameData();
! 
! 	private IDialog filePathDialog;
! 
! 	private static jp.or.med.orca.jma_tokutei.common.csv.JCSVReaderStream reader = null;
! 	private static jp.or.med.orca.jma_tokutei.common.csv.JCSVWriterStream writer = null;
! 
! 	private static Vector<Vector<String>> CSVItems = null;
! 
! 	private static String saveTitle= "csvファイル保存先選択";
! 	private static String selectTitle= "csvファイル選択";
! 	private static String savaDialogTitle= "csvファイルの保存先を選択、ファイル名を指定してください";
! 	private static String selectDialogTitle= "csvファイルを選択してください";
! 
! 	// 検索ボタン押下時のSQLで使用
! 	private static final String[] TABLE_COLUMNS = {
! 		"SYOKEN_TYPE","SYOKEN_NO","SYOKEN","UPDATE_TIMESTAMP" };
  
  	/**
  	 * @param PatternNum 編集する健診パターンの番号
  	 */
  	public JKekkaTeikeiMaintenanceListFrameCtrl()
  	{
- 		//テーブルの登録
- 		JSimpleTableScrollPanel table = new JSimpleTableScrollPanel(model);
- 		jPanel_MainArea.add(table);
- 
- 		// keyイベント登録
- 		model.addKeyListener(new JEnterEvent(this,jButton_Edit));
- 		// ダブルクリックの処理
- 		model.addMouseListener(new JSingleDoubleClickEvent(this,jButton_Edit));
- 
- 		initTable();
- 	}
- 
- 	// edit s.inoue 2010/03/12
- 	private void initTable(){
- 		this.refreshTable();
- 
- 		// edit s.inoue 2009/12/01
- 		RowSorter<TableModel> sorter = new TableRowSorter<TableModel>(model.getModel());
- 		model.setRowSorter(sorter);
- 
- 		// focus制御
- 		this.focusTraversalPolicy = new JFocusTraversalPolicy();
- 		this.setFocusTraversalPolicy(this.focusTraversalPolicy);
- 		this.focusTraversalPolicy.setDefaultComponent(model);
- 		this.focusTraversalPolicy.addComponent(model);
- 		// edit s.inoue 2010/04/23
- 		this.focusTraversalPolicy.addComponent(this.jButton_Import);
- 		this.focusTraversalPolicy.addComponent(this.jButton_Export);
- 		this.focusTraversalPolicy.addComponent(this.jButton_Add);
- 		this.focusTraversalPolicy.addComponent(this.jButton_Edit);
- 		this.focusTraversalPolicy.addComponent(this.jButton_Delete);
- 		this.focusTraversalPolicy.addComponent(jButton_End);
- 
- 		// add s.inoue 2009/12/03
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			Component comp = focusTraversalPolicy.getComponent(i);
- 			comp.addKeyListener(this);
- 		}
- 
- 		// move s.inoue 2009/12/15
- 		initializeColumnWidth();
- 		model.setAutoCreateRowSorter(true);
- 		model.refreshTable();
- 	    // 初期選択
- 	    if (model.getRowCount() > 0) {
- 		   model.setRowSelectionInterval(0, 0);
- 	    }
- 	}
- 
- 	// edit s.inoue 2009/12/14
- 	/**
- 	 * 列サイズを初期化する。
- 	 */
- 	private void initializeColumnWidth() {
- 		this.model.setAutoResizeMode(JSimpleTable.AUTO_RESIZE_OFF);
- 
- 		DefaultTableColumnModel columnModel = (DefaultTableColumnModel) this.model.getColumnModel();
- 		// edit s.inoue 2009/11/11
- 		columnModel.getColumn(COLUMN_IDX_SYOKEN_NO).setMinWidth(0);
- 		columnModel.getColumn(COLUMN_IDX_SYOKEN_NO).setPreferredWidth(0);
- 		columnModel.getColumn(COLUMN_IDX_SYOKEN_NO).setMaxWidth(0);
- 		columnModel.getColumn(COLUMN_IDX_SYOKEN_NO).setWidth(0);
- 	}
- 
- 	/**
- 	 * テーブルのリフレッシュを行う
- 	 */
- 	public void refreshTable()
- 	{
- 		model.setPreferedColumnWidths(new int[] { 0,100, 60, 585, 200 });
- 
- 		String[] row = new String[5];
- 
- 		// テーブルヘッダの初期化
- 		model.clearAllColumn();
- 		model.clearAllRow();
- 		model.addHeader("所見種別No");
- 		model.addHeader("所見種別");
- 		model.addHeader("所見No");
- 		model.addHeader("所見");
- 		model.addHeader("更新日時");
- 
- 		model.getTableHeader().addMouseListener(new MouseAdapter() {
- 			  public void mouseClicked(MouseEvent e) {
- 					  int viewColumn = model.getTableHeader().columnAtPoint(e.getPoint());
- 					  int modelColumn = model.convertColumnIndexToModel(viewColumn);
- 
- 					  int[] rows = model.getSelectedRows();
- 					  if (rows.length == 0) return;
- 					  for (int i = 0, n = rows.length; i < n; i++) {
- 						  // edit s.inoue 2009/12/15
- 					      // rows[i] = model.convertRowIndexToModel(rows[i]);
- 						  int modelRow = model.convertRowIndexToModel(rows[i]);
- 					      System.out.println("View Row: " + rows[i] + " Model Row: " + modelRow);
- 					  }
- 
- 					  // del s.inoue 2009/12/15
- 					  // Arrays.sort(rows);
- 			  }
- 			});
- 
- 		// セルの編集禁止
- 		jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellPosition iSetColumnList[] = {
- 				new JSimpleTableCellPosition(-1,-1)
- 				};
- 		model.setCellEditForbid(iSetColumnList);
- 
  		ArrayList<Hashtable<String,String>> result = new ArrayList<Hashtable<String,String>>();
  		Hashtable<String,String> ResultItem = new Hashtable<String,String>();
  
  		try{
! 			StringBuilder buffer = new StringBuilder();
! 			buffer.append("SELECT SYOKEN_TYPE,");
! 			buffer.append(" case SYOKEN_TYPE ");
! 			buffer.append(" when 1 then 'その他の既往歴' ");
! 			buffer.append(" when 2 then '自覚症状所見' ");
! 			buffer.append(" when 3 then '他覚症状所見' ");
! 			buffer.append(" when 4 then '心電図所見' ");
! 			buffer.append(" end SYOKEN_TYPE_STR, ");
! 			buffer.append(" SYOKEN_NO, SYOKEN, UPDATE_TIMESTAMP");
! 			buffer.append(" FROM T_SYOKENMASTER ");
! 			buffer.append(" ORDER BY SYOKEN_TYPE,SYOKEN_NO ");
  
! 			result = JApplication.kikanDatabase.sendExecuteQuery(buffer.toString());
  
- 			for( int i = 0;i < result.size();i++ )
- 			{
- 				ResultItem = result.get(i);
- 				row[0] = new String(ResultItem.get("SYOKEN_TYPE"));
- 				row[1] = new String(ResultItem.get("SYOKEN_TYPE_STR"));
- 				row[2] = new String(ResultItem.get("SYOKEN_NO"));
- 				row[3] = new String(ResultItem.get("SYOKEN"));
- 				row[4] = new String(ResultItem.get("UPDATE_TIMESTAMP").replaceAll("-", ""));
  
! 				model.addData(row);
  			}
  
  		}catch(SQLException e){
  			e.printStackTrace();
! 			JErrorMessage.show("M9906",this);
  			dispose();
  			return;
  		}
  
! 		try{
  
! 			// add ver2 s.inoue 2009/05/08
! 			TableColumnModel columns = model.getColumnModel();
! 	        for(int i=0;i<columns.getColumnCount();i++) {
! 
! 	            columns.getColumn(i).setCellRenderer(new JSimpleTableCellRowRenderer(
! 	                (DefaultTableCellRenderer)model.getDefaultRenderer(model.getColumnClass(i))));
! 	        }
! 
! // del s.inoue 2009/12/15
! //	        initializeColumnWidth();
! //			model.setAutoCreateRowSorter(true);
! //			model.refreshTable();
! //
! //			// 初期選択
! //		    if (model.getRowCount() > 0) {
! //			   model.setRowSelectionInterval(0, 0);
! //		    }
  
! 		}catch(Exception e){
! 			JErrorMessage.show("M9906",this);
! 			e.printStackTrace();
! 			dispose();
! 			return;
! 		}
! 	}
  
- 	/**
- 	 * 編集画面を呼び出す
- 	 */
- 	public void register()
- 	{
- 		if( model.getSelectedRowCount() > 0 )
- 		{
- 			int[] rows = model.getSelectedRows();
- 			if (rows.length == 0) return;
- //			for (int i = 0, n = rows.length; i < n; i++) {
- //			    rows[i] = model.convertRowIndexToModel(rows[i]);
- //			}
- 
- 			// edit s.inoue 2009/12/15
- 			// model.getSelectedRow()→ rows
- 			JScene.CreateDialog(this, new JKekkaTeikeiMaintenanceEditFrameCtrl(
- 					(String)model.getData(rows[0], 0),
- 					(String)model.getData(rows[0], 2)),
- 					new WindowRefreshEvent());
- 		}
  	}
  
- 	// add s.inoue 2010/03/12
- 	/**ImportStart↓↓↓↓↓**********************************************************/
  	/**
! 	 * 取込ボタン
  	 */
! 	public void pushedImportButton( ActionEvent e )
  	{
! 		try {
! 			filePathDialog = DialogFactory.getInstance().createDialog(this,null);
! 
! 			filePathDialog.setMessageTitle(selectTitle);
! 			filePathDialog.setDialogTitle(selectDialogTitle);
! 			filePathDialog.setEnabled(false);
! 			filePathDialog.setDialogSelect(true);
! 			filePathDialog.setVisible(true);
! 
! 			// edit s.inoue 2010/03/25
! 			if (filePathDialog.getStatus().equals(RETURN_VALUE.CANCEL))
! 				return;
! 
! 			String filePath = filePathDialog.getFilePath();
! 			// add s.inoue 2010/03/05
! 			File fileImport = new File(filePath);
! 			if(!fileImport.exists())
! 				return;
! 			importCsvData(filePath);
! 			initTable();
! 		} catch (Exception ex) {
! 			JErrorMessage.show("M9912",this);
! 			logger.error(ex.getMessage());
! 		}
! 	}
! 
! 	// edit s.inoue 2010/03/04
! 	/* 取込処理 */
! 	private void importCsvData(String filePath){
  
! 		RETURN_VALUE retValue = JErrorMessage.show("M9916", this);
  
! 		// cancel時
! 		if (retValue == RETURN_VALUE.NO){
! 			return;
! 		}else if (retValue == RETURN_VALUE.YES){
  
- 			JImportMasterErrorTeikeiResultFrameData data = new JImportMasterErrorTeikeiResultFrameData();
  
! 			// CSV読込処理
! 			reader = new JCSVReaderStream();
  
! 			try {
! 				reader.openCSV(filePath,JApplication.CSV_CHARSET);
! 			} catch (IOException e) {
! 				JErrorMessage.show("M9913",this);
! 				logger.error(e.getMessage());
  			}
  
! 			CSVItems = reader.readAllTable();
! 
! 			try {
! 				JApplication.kikanDatabase.Transaction();
! 
! 				int csvCount = CSVItems.size();
  
! 				if(csvCount == 0){
! 					JErrorMessage.show("M9914",this);
! 					return;
! 				}
  
! 				// 定型文マスタ全削除
! 				teikeiMasterDelete();
! 
! 				// データ取込処理
! 				for (int i = 1; i < csvCount; i++) {
! 
! 					Vector<String> insertRow = new Vector<String>();
! 
! 					insertRow =CSVItems.get(i);
! 
! 					// 属性情報取得 CSVデータをローカル変数にセット(「"」を除去したもの)
! 					setCSVItemsToDB(data,insertRow);
! 
! 					// validate処理
! 					if (!validateData(data))
! 						return;
! 
! 					// 定型文登録
! 					teikeiMasterRegister(data);
! 				}
! 
! 				JApplication.kikanDatabase.Commit();
  
- 				String[] messageParams = {String.valueOf(csvCount-1)};
- 				JErrorMessage.show("M9915",this,messageParams);
- 			} catch (SQLException e) {
- 				try {
- 					JApplication.kikanDatabase.rollback();
- 				} catch (SQLException e1) {}
- 				JErrorMessage.show("M9913",this);
- 				logger.error(e.getMessage());
  			}
! 		}
! 	}
! 
! 	// edit s.inoue 2010/03/04
! 	/* csvデータ取込 */
! 	private void setCSVItemsToDB(JImportMasterErrorTeikeiResultFrameData data,
! 			Vector<String> insertRow){
! 
! 		data.CSV_COLUMN_SYOKEN_TYPE = reader.rmQuart(insertRow.get(0));
! 		data.CSV_COLUMN_SYOKEN_NO = reader.rmQuart(insertRow.get(1));
! 		data.CSV_COLUMN_SYOKEN = reader.rmQuart(insertRow.get(2));
! 	}
! 
! 	// edit s.inoue 2010/03/04
! 	/* validate処理 */
! 	private boolean validateData(JImportMasterErrorTeikeiResultFrameData data) {
! 
! 		boolean rettanka = false;
! 
! 		rettanka= validatedData.setTeikeiType(data.CSV_COLUMN_SYOKEN_TYPE)
! 			&& validatedData.setTeikeiNumber(data.CSV_COLUMN_SYOKEN_NO)
! 			&& validatedData.setTeikeibun(data.CSV_COLUMN_SYOKEN);
! 		return rettanka;
! 	}
! 
! 	/**
! 	 * 既存定型文マスタ削除
! 	 * @throws SQLException
! 	 */
! 	private void teikeiMasterDelete(){
! 		try {
! 
! 			String query = new String("DELETE FROM T_SYOKENMASTER ");
! 			JApplication.kikanDatabase.sendNoResultQuery(query);
! 		} catch (SQLException e) {
! 			JErrorMessage.show("M3952",this);
  			e.printStackTrace();
! 			logger.error(e.getMessage());
  		}
  	}
  
- 	/**
- 	 * CSVデータ登録
- 	 * @throws SQLException
- 	 */
- 	private void teikeiMasterRegister(JImportMasterErrorTeikeiResultFrameData data)
- 		throws SQLException
- 	{
- 		StringBuffer buffer = new StringBuffer();
- 
- 		// timestamp取得
- 		SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
- 		String stringTimeStamp = dateFormat.format(Calendar.getInstance().getTime());
- 
- 		buffer.append("INSERT INTO T_SYOKENMASTER (SYOKEN_TYPE, SYOKEN_NO, SYOKEN, UPDATE_TIMESTAMP)");
- 		buffer.append("VALUES (");
- 		buffer.append(JQueryConvert.queryConvertAppendComma(validatedData.getTeikeiType()));
- 		buffer.append(JQueryConvert.queryConvertAppendComma(validatedData.getTeikeiNumber()));
- 		buffer.append(JQueryConvert.queryConvertAppendComma(validatedData.getTeikeibun()));
- 		buffer.append(JQueryConvert.queryConvert(stringTimeStamp));
- 		buffer.append(")");
  
- 		JApplication.kikanDatabase.sendNoResultQuery(buffer.toString());
- 
- 	}
- 	/**ImportEnd↑↑↑↑↑**********************************************************/
- 
- 	/**ExportStart↓↓↓↓↓**********************************************************/
- 	// add s.inoue 2010/02/25
  	/**
! 	 * 書出ボタン
  	 */
! 	public void pushedExportButton( ActionEvent e )
  	{
! 		try {
! 			String saveFileName = JPath.createDirectoryUniqueName("TeikeiMaster");
! 
! 			String defaltPath = JPath.getDesktopPath() +
! 			File.separator +
! 			saveFileName;
! 
! 			filePathDialog = DialogFactory.getInstance().createDialog(this, defaltPath);
! 			filePathDialog.setMessageTitle(saveTitle);
! 			filePathDialog.setDialogTitle(savaDialogTitle);
! 			filePathDialog.setEnabled(false);
! 			filePathDialog.setDialogSelect(true);
! 			filePathDialog.setVisible(true);
! 
! 			// edit s.inoue 2010/03/25
! 			if (filePathDialog.getStatus().equals(RETURN_VALUE.CANCEL))
! 				return;
! 
! 			String filePath = filePathDialog.getFilePath();
! 			if (filePath.equals(""))
! 				return;
! 			exportCsvData(filePath);
! 
! 		} catch (Exception ex) {
! 			JErrorMessage.show("M3953", this);
! 			logger.error(ex.getMessage());
! 		}
! 	}
! 
! 	/* export処理 */
! 	private void exportCsvData(String filePath){
! 		JImportMasterErrorTeikeiResultFrameData data = new JImportMasterErrorTeikeiResultFrameData();
! 
! 		// CSV読込処理
! 		writer = new JCSVWriterStream();
! 
! 		try {
! 			writer.writeTable(getExportData());
! 			writer.saveCSV(filePath,JApplication.CSV_CHARSET);
! 		} catch (IOException e) {
! 			JErrorMessage.show("M3953", this);
! 			logger.error(e.getMessage());
! 		}
! 	}
! 
! 	/* DBよりデータ取得*/
! 	private Vector<Vector<String>> getExportData(){
! 
! 		Vector<Vector<String>> newTable = new Vector<Vector<String>>();
! 
! 		ArrayList<Hashtable<String, String>> result
! 			= new ArrayList<Hashtable<String, String>>();
  
! 		// add s.inoue 2010/03/04
! 		StringBuilder sb = new StringBuilder();
  
! 		sb.append(" SELECT SYOKEN_TYPE, SYOKEN_NO, SYOKEN, UPDATE_TIMESTAMP ");
! 		sb.append(" FROM T_SYOKENMASTER ");
! 		sb.append(" ORDER BY SYOKEN_TYPE,SYOKEN_NO ");
  
! 		try {
! 			result = JApplication.kikanDatabase.sendExecuteQuery(sb.toString());
! 		} catch (SQLException e) {
! 			e.printStackTrace();
! 			return null;
! 		}
  
! 		Hashtable<String, String> resultItem = new Hashtable<String, String>();
! 		for( int i=0; i<result.size(); ++i )
  		{
! 			resultItem = result.get(i);
! 
! 			Vector<String> data = new Vector<String>();
! 
! 			for (int j=0; j<resultItem.size(); ++j){
! 				data.add(resultItem.get(TABLE_COLUMNS[j]).trim());
  			}
  
! 			// header設定
! 			if (i==0){
! 				Vector colmn = new Vector<String>();
! 				List l = java.util.Arrays.asList(TABLE_COLUMNS);
! 				for (Iterator item = l.iterator(); item.hasNext();) {
! 					colmn.add((String)item.next());
! 				}
! 				newTable.add(colmn);
! 			}
! 			newTable.add(data);
  		}
- 		return newTable;
  	}
! 	/**ExportEnd↑↑↑↑↑**********************************************************/
  	/**
! 	 * 追加ボタン
  	 */
! 	public void pushedAddButton( ActionEvent e )
  	{
! 		JScene.CreateDialog(this, new JKekkaTeikeiMaintenanceEditFrameCtrl(),new WindowRefreshEvent());
! 	}
  
! 	/**
! 	 * 遷移先の画面から戻ってきた場合
! 	 */
! 	public class WindowRefreshEvent extends WindowAdapter {
! 		public void windowClosed(WindowEvent e) {
! 			//テーブルの再読み込みを行う
! 			refreshTable();
! 			// edit s.inoue 2009/12/14
! 			initializeColumnWidth();
! 			model.setAutoCreateRowSorter(true);
! 			model.refreshTable();
! 
! 			// 初期選択
! 			if (model.getRowCount() > 0) {
! 				model.setRowSelectionInterval(0, 0);
! 		    }
  		}
  	}
  
  	/**
! 	 * 削除ボタン
  	 */
! 	public void pushedDeleteButton( ActionEvent e )
  	{
! 		if ( model.getSelectedRowCount() <= 0 )
! 			return;
! 
! 		RETURN_VALUE Ret = JErrorMessage.show("M9907", this);
! 
! 		if(Ret == RETURN_VALUE.YES)
  		{
! 			int[] selectedRow = model.getSelectedRows();
! 
! 			for( int i = 0;i < model.getSelectedRowCount();i++)
  			{
! 				try{
! 					JApplication.kikanDatabase.Transaction();
! 
! 					//T_TEIKEIBUNテーブルから削除
! 					String syokenType = (String)model.getData(selectedRow[i], 0);
! 					String syokenNo = (String)model.getData(selectedRow[i], 2);
! 
! 					StringBuilder sb = new StringBuilder();
! 					sb.append("DELETE FROM T_SYOKENMASTER ");
! 					sb.append(" WHERE SYOKEN_TYPE = ");
! 					sb.append(JQueryConvert.queryConvert(syokenType));
! 					sb.append(" AND SYOKEN_NO = ");
! 					sb.append(JQueryConvert.queryConvert(syokenNo));
! 
! 					JApplication.kikanDatabase.sendNoResultQuery(sb.toString());
! 
! 					JApplication.kikanDatabase.Commit();
! 				}catch(SQLException f){
! 					f.printStackTrace();
! 					JErrorMessage.show("M9908", this);
! 					try{
! 						JApplication.kikanDatabase.rollback();
! 					}catch(SQLException g){
! 						JErrorMessage.show("M0000", this);
! 						g.printStackTrace();
! 						System.exit(1);
! 					}
! 					return;
! 				}
  			}
  
! 			refreshTable();
! 
! 			// move s.inoue 2009/12/15
! 			initializeColumnWidth();
! 			model.setAutoCreateRowSorter(true);
! 			model.refreshTable();
! 		    // 初期選択
! 			// del s.inoue 2010/04/01
! //		    if (model.getRowCount() > 0) {
! //			   model.setRowSelectionInterval(0, 0);
! //		    }
  		}
  	}
  
  	/**
--- 1,245 ----
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
  
  import java.awt.event.ActionEvent;
  import java.sql.SQLException;
  import java.util.ArrayList;
  import java.util.Hashtable;
  
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTable;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellPosition;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableScrollPanel;
  import jp.or.med.orca.jma_tokutei.common.app.JApplication;
  
  /**
   * 定型文マスタメンテナンス
   */
  public class JKekkaTeikeiMaintenanceListFrameCtrl extends JKekkaTeikeiMaintenanceListFrame
  {
! 	private String patternNumber = null;
! 	private JSimpleTable leftTable = new JSimpleTable();
! 	private JSimpleTable rightTable = new JSimpleTable();
  
  	/**
  	 * @param PatternNum 編集する健診パターンの番号
  	 */
  	public JKekkaTeikeiMaintenanceListFrameCtrl()
  	{
  		ArrayList<Hashtable<String,String>> result = new ArrayList<Hashtable<String,String>>();
  		Hashtable<String,String> ResultItem = new Hashtable<String,String>();
+ 		String Query = null;
+ 		String resultStr = "";
  
+ 		//受け渡された健診パターン番号を表示する
+ 		//this.patternNumber = PatternNum;
  		try{
! 			Query = new String("SELECT TEIKEIBUN FROM T_TEIKEIBUN ");
  
! 			result = JApplication.kikanDatabase.sendExecuteQuery(Query);
  
  
! 			if (result != null && result.size() > 0) {
! 				resultStr = result.get(0).get("TEIKEIBUN");
  			}
  
+ 
  		}catch(SQLException e){
  			e.printStackTrace();
! 			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3920",this);
  			dispose();
  			return;
  		}
  
! 		//jTextField_PatternName.setText(ResultItem.get("K_P_NAME"));
! 		//jTextField_PatternName.setEditable(false);
  
! 		//テーブルの初期化
! 		JSimpleTableScrollPanel leftPanel = new JSimpleTableScrollPanel(leftTable);
! 		//JSimpleTableScrollPanel rightPanel = new JSimpleTableScrollPanel(rightTable);
! 
! 		jPanel_Left.add(leftPanel);
! //		jPanel_Right.add(rightPanel);
! 
! 		leftTable.addHeader("定型文No");
! 		leftTable.addHeader("定型文");
! //		rightTable.addHeader("定型文No");
! //		rightTable.addHeader("定型文");
  
! 		jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellPosition iSetColumnList[] = {
! 				new JSimpleTableCellPosition(-1,-1)
! 				};
! 
! 		leftTable.setCellEditForbid(iSetColumnList);
! //		rightTable.setCellEditForbid(iSetColumnList);
! 
! 		refreshTable();
  
  	}
  
  	/**
! 	 * テーブルのリフレッシュを行う
  	 */
! 	public void refreshTable()
  	{
! 		ArrayList<Hashtable<String,String>> Result = new ArrayList<Hashtable<String,String>>();
! 		Hashtable<String,String> ResultItem = new Hashtable<String,String>();
! 		String Query = null;
! 		String[] row = new String[3];
  
! 		leftTable.clearAllRow();
! 		rightTable.clearAllRow();
! 		leftTable.setAutoResizeMode(JSimpleTable.AUTO_RESIZE_ALL_COLUMNS);
! 		rightTable.setAutoResizeMode(JSimpleTable.AUTO_RESIZE_ALL_COLUMNS);
  
! 		try{
! 			//左のテーブルの初期設定
! 			Query =
! 				"SELECT master.KOUMOKU_CD,master.KOUMOKU_NAME,master.KENSA_HOUHOU " +
! 									"FROM T_KENSHINMASTER master " +
! 									"INNER JOIN " +
! 									"T_KENSHIN_P_S syousai " +
! 									"ON master.KOUMOKU_CD = syousai.KOUMOKU_CD " +
! 									"WHERE syousai.K_P_NO = " + JQueryConvert.queryConvert(this.patternNumber) +
! 									"AND " +
! 									"master.HKNJANUM = " + JQueryConvert.queryConvert("99999999") + " " +
! 									"ORDER BY K_P_NO, LOW_ID";
  
  
! 			Result = JApplication.kikanDatabase.sendExecuteQuery(Query);
  
! 			for( int i = 0;i < Result.size();i++ )
! 			{
! 				ResultItem = Result.get(i);
! 				row[0] = ResultItem.get("KOUMOKU_CD");
! 				row[1] = ResultItem.get("KOUMOKU_NAME");
! 				row[2] = ResultItem.get("KENSA_HOUHOU");
! 				leftTable.addData(row);
  			}
  
! 			//右のテーブルの初期設定
  
! 			Query = new String("SELECT * FROM T_TEIKEIBUN ");
! 			Result = JApplication.kikanDatabase.sendExecuteQuery(Query);
  
! 			for( int i = 0;i < Result.size();i++ )
! 			{
! 				ResultItem = Result.get(i);
! 				Integer intTno = Integer.parseInt(ResultItem.get("TEIKEIBUN_NO"));
! 				String strIno = intTno.toString();
! 
! 				row[0] = strIno;
! 				row[1] = ResultItem.get("TEIKEIBUN");
! 				leftTable.addData(row);
  
  			}
! 		}catch(SQLException e)
! 		{
! 			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3920",this);
  			e.printStackTrace();
! 			dispose();
! 			return;
! 
  		}
  	}
  
  
  	/**
! 	 * 登録処理を行う
  	 */
! 	public void register()
  	{
! 		String Query = null;
! 		try{
! 			//項目並び順の抜けをなくすためまずすべて削除する
! 			JApplication.kikanDatabase.Transaction();
  
! 			Query = new String("DELETE FROM T_KENSHIN_P_S WHERE K_P_NO = " + JQueryConvert.queryConvert(this.patternNumber));
! 			JApplication.kikanDatabase.sendNoResultQuery(Query);
  
! 			for(int i = 0;i < leftTable.getRowCount();i++)
! 			{
! 				Query = new String("INSERT INTO T_KENSHIN_P_S (K_P_NO,KOUMOKU_CD,LOW_ID) VALUES (" +
! 						JQueryConvert.queryConvertAppendComma(this.patternNumber) +
! 						JQueryConvert.queryConvertAppendComma((String)leftTable.getData(i, 0)) +
! 						JQueryConvert.queryConvert(String.valueOf(i)) +
! 						")");
  
! 				JApplication.kikanDatabase.sendNoResultQuery(Query);
! 			}
! 			JApplication.kikanDatabase.Commit();
  
! 			dispose();
! 		}catch(SQLException f)
  		{
! 			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3923",this);
! 			f.printStackTrace();
! 			try{
! 				JApplication.kikanDatabase.rollback();
! 			}catch(SQLException g)
! 			{
! 				jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M0000",this);
! 				g.printStackTrace();
! 				System.exit(1);
  			}
  
! 			dispose();
! 			return;
  		}
  	}
! 
  	/**
! 	 * 右のテーブルから左のテーブルに移動
  	 */
! 	public void pushedToLeftButton( ActionEvent e )
  	{
! 		if(rightTable.getSelectedRowCount() >= 1 )
! 		{
! 			String[] row = new String[3];
! 			int[] selectedRows = rightTable.getSelectedRows();
! 			int rowCount = rightTable.getSelectedRowCount();
! 			for(int i = 0;i < rowCount;i++ )
! 			{
! 				row[0] = new String((String)rightTable.getData(selectedRows[i], 0));
! 				row[1] = new String((String)rightTable.getData(selectedRows[i], 1));
! 				row[2] = new String((String)rightTable.getData(selectedRows[i], 2));
! 				leftTable.addData(row);
! 			}
  
! 			//前から削除するとindexが変わってしまうため後ろから削除
! 			for(int i = rowCount ;i > 0;)
! 			{
! 				i--;
! 				rightTable.clearRow(selectedRows[i]);
! 			}
  		}
  	}
  
  	/**
! 	 * 左のテーブルから右のテーブルへ移動
  	 */
! 	public void pushedToRightButton( ActionEvent e )
  	{
! 		if(leftTable.getSelectedRowCount() >= 1 )
  		{
! 			String[] row = new String[3];
! 			int[] selectedRows = leftTable.getSelectedRows();
! 			int rowCount = leftTable.getSelectedRowCount();
! 			for(int i = 0;i < rowCount;i++ )
  			{
! 				row[0] = new String((String)leftTable.getData(selectedRows[i], 0));
! 				row[1] = new String((String)leftTable.getData(selectedRows[i], 1));
! 				row[2] = new String((String)leftTable.getData(selectedRows[i], 2));
! 				rightTable.addData(row);
  			}
  
! 			//前から削除するとindexが変わってしまうため後ろから削除
! 			for(int i = rowCount ;i > 0;)
! 			{
! 				i--;
! 				leftTable.clearRow(selectedRows[i]);
! 			}
  		}
+ 
  	}
  
  	/**
***************
*** 670,683 ****
  	public void pushedClearButton( ActionEvent e )
  	{
  		refreshTable();
- 		// edit s.inoue 2009/12/14
- 		initializeColumnWidth();
- 		model.setAutoCreateRowSorter(true);
- 		model.refreshTable();
- 	    // 初期選択
- 	    if (model.getRowCount() > 0) {
- 		   model.setRowSelectionInterval(0, 0);
- 	    }
  	}
  
  	public void actionPerformed( ActionEvent e )
--- 272,277 ----
***************
*** 685,743 ****
  		Object source = e.getSource();
  		if( source == jButton_End )
  		{
- 			logger.info(jButton_End.getText());
  			pushedEndButton( e );
  		}
! 		else if (source == jButton_Import)
! 		{
! 			logger.info(jButton_Import.getText());
! 			pushedImportButton(e);
! 		}
! 		else if (source == jButton_Export)
! 		{
! 			logger.info(jButton_Export.getText());
! 			pushedExportButton(e);
! 		}
! 		else if( source == jButton_Add )
! 		{
! 			logger.info(jButton_Add.getText());
! 			pushedAddButton( e );
! 		}
! 		else if( source == jButton_Edit )
  		{
- 			logger.info(jButton_Edit.getText());
  			pushedRegisterButton( e );
  		}
! 		else if( source == jButton_Delete )
  		{
! 			logger.info(jButton_Delete.getText());
! 			pushedDeleteButton(e);
  		}
  
! 	}
! 
! 	@Override
! 	public void keyPressed(KeyEvent keyEvent) {
! 		switch(keyEvent.getKeyCode()){
! 		case KeyEvent.VK_F1:
! 			logger.info(jButton_End.getText());
! 			pushedEndButton(null);break;
! 		case KeyEvent.VK_F4:
! 			logger.info(jButton_Import.getText());
! 			pushedImportButton(null);break;
! 		case KeyEvent.VK_F5:
! 			logger.info(jButton_Export.getText());
! 			pushedExportButton(null);break;
! 
! 		case KeyEvent.VK_F9:
! 			logger.info(jButton_Add.getText());
! 			pushedAddButton(null);break;
! 		case KeyEvent.VK_F11:
! 			logger.info(jButton_Edit.getText());
! 			pushedRegisterButton(null);break;
! 		case KeyEvent.VK_F12:
! 			logger.info(jButton_Delete.getText());
! 			pushedDeleteButton(null);break;
  		}
  	}
  }
--- 279,310 ----
  		Object source = e.getSource();
  		if( source == jButton_End )
  		{
  			pushedEndButton( e );
  		}
! 
! //		else if( source == jButton_Cancel )
! //		{
! //			pushedCancelButton( e );
! //		}
! 
! 		else if( source == jButton_Register )
  		{
  			pushedRegisterButton( e );
  		}
! 
! //		else if( source == jButton_Clear )
! //		{
! //			pushedClearButton( e );
! //		}
! 
! 		else if( source == jButton_ToLeft )
  		{
! 			pushedToLeftButton( e );
  		}
  
! 		else if( source == jButton_ToRight )
! 		{
! 			pushedToRightButton( e );
  		}
  	}
  }
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKensaKikanCodeMasterMaintenanceEditFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKensaKikanCodeMasterMaintenanceEditFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKensaKikanCodeMasterMaintenanceEditFrameCtrl.java	Thu Dec 17 11:23:42 2009
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKensaKikanCodeMasterMaintenanceEditFrameCtrl.java	Tue Oct 13 09:53:08 2009
***************
*** 4,11 ****
  import java.sql.SQLException;
  import java.util.*;
  
- import org.apache.log4j.Logger;
- 
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
  import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTable;
--- 4,9 ----
***************
*** 21,28 ****
  	/* フォーカス移動制御 */
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
  
- 	private static Logger logger = Logger.getLogger(JKensaKikanCodeMasterMaintenanceEditFrameCtrl.class);
- 
  	JSimpleTable model = new JSimpleTable();
  
  	JKensaKikanCodeMasterMaintenanceEditFrameData validatedData = new JKensaKikanCodeMasterMaintenanceEditFrameData();
--- 19,24 ----
***************
*** 226,235 ****
  	}
  
  	/*
! 	 * 戻る
  	 */
  	public void pushedEndButton(ActionEvent e) {
  		dispose();
  	}
  
  	/**
--- 222,239 ----
  	}
  
  	/*
! 	 *
  	 */
  	public void pushedEndButton(ActionEvent e) {
+ 		/* Modified 2008/05/15 若月  */
+ 		/* --------------------------------------------------- */
+ //		// ErrorMessage.JErrorMessage.Show("M3720", this);
+ //		if (register()) {
+ //			dispose();
+ //		}
+ 		/* --------------------------------------------------- */
  		dispose();
+ 		/* --------------------------------------------------- */
  	}
  
  	/**
***************
*** 270,288 ****
  	public void actionPerformed(ActionEvent e) {
  		Object source = (e.getSource());
  		if (source == jButton_End) {
- 			logger.info(jButton_End.getText());
  			pushedEndButton(e);
  		}
  		else if (source == jButton_Delete) {
- 			logger.info(jButton_Delete.getText());
  			pushedDeleteButton(e);
  		}
  		else if (source == jButton_Register) {
- 			logger.info(jButton_Register.getText());
  			pushedRegisterButton();
  		}
  		else if (source == jButton_Cancel) {
- 			logger.info(jButton_Cancel.getText());
  			pushedCancelButton();
  		}
  	}
--- 274,288 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKensaKikanCodeMasterMaintenanceListFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKensaKikanCodeMasterMaintenanceListFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKensaKikanCodeMasterMaintenanceListFrameCtrl.java	Sat Dec 12 13:21:22 2009
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKensaKikanCodeMasterMaintenanceListFrameCtrl.java	Mon Apr 26 11:10:42 2010
***************
*** 46,54 ****
  						this, jButton_Edit));
  
  		// ダブルクリックの処理
! 		model
! 				.addMouseListener(new jp.or.med.orca.jma_tokutei.common.event.JSingleDoubleClickEvent(
! 						this, jButton_Edit));
  
  		// 初期選択
  		if (model.getRowCount() > 0) {
--- 46,55 ----
  						this, jButton_Edit));
  
  		// ダブルクリックの処理
! 		// del inoue 2010/04/23
! //		model
! //				.addMouseListener(new jp.or.med.orca.jma_tokutei.common.event.JDoubleClickEvent(
! //						this, jButton_Edit));
  
  		// 初期選択
  		if (model.getRowCount() > 0) {
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinMasterMaintenanceFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinMasterMaintenanceFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinMasterMaintenanceFrame.java	Thu Apr 22 14:55:06 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinMasterMaintenanceFrame.java	Fri Oct 23 13:04:26 2009
***************
*** 26,41 ****
  import java.awt.Insets;
  import java.awt.Dimension;
  import javax.swing.BorderFactory;
- // add h.yoshitama 2009/11/27
- import java.awt.event.KeyEvent;
  
  
  /**
   * 健診項目マスタメンテナンス
   *
   */
! // edit h.yoshitama 2009/11/27
! public class JKenshinMasterMaintenanceFrame extends JFrame implements ActionListener,ItemListener,KeyListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
--- 26,38 ----
  import java.awt.Insets;
  import java.awt.Dimension;
  import javax.swing.BorderFactory;
  
  
  /**
   * 健診項目マスタメンテナンス
   *
   */
! public class JKenshinMasterMaintenanceFrame extends JFrame implements ActionListener,ItemListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
***************
*** 69,77 ****
  	protected ExtendedLabel jLabelkanou = null;
  	protected ExtendedLabel jLabel_ableExample = null;
  
- 	// add s.inoue 2010/02/25
- 	protected ExtendedButton jButton_Import = null;
- 	protected ExtendedButton jButton_Export = null;
  
  	/**
  	 * This is the default constructor
--- 66,71 ----
***************
*** 124,155 ****
  			gridBagConstraints3.gridx = 0;
  			GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
  			gridBagConstraints2.gridy = 0;
! 			// del s.inoue 2010/03/15
! //			gridBagConstraints2.weightx = 1.0D;
! //			gridBagConstraints2.anchor = GridBagConstraints.EAST;
! 			gridBagConstraints2.gridx = 3;
! 			gridBagConstraints2.insets = new Insets(0, 5, 0, 0);
! 
! 			// add s.inoue 2010/02/25
! 			GridBagConstraints gridBagConstraints4 = new GridBagConstraints();
! 			gridBagConstraints4.gridy = 0;
! 			gridBagConstraints4.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints4.gridx = 1;
! 			gridBagConstraints4.weightx = 1.0D;
! 			gridBagConstraints4.anchor = GridBagConstraints.EAST;
! 
! 			GridBagConstraints gridBagConstraints5 = new GridBagConstraints();
! 			gridBagConstraints5.gridy = 0;
! 			gridBagConstraints5.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints5.gridx = 2;
! 
  			jPanel_ButtonArea = new JPanel();
  			jPanel_ButtonArea.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
  			jPanel_ButtonArea.setLayout(new GridBagLayout());
- 			// add s.inoue 2010/02/25
- 			jPanel_ButtonArea.add(getJButton_Import(), gridBagConstraints4);
- 			jPanel_ButtonArea.add(getJButton_Export(), gridBagConstraints5);
- 
  			jPanel_ButtonArea.add(getJButton_Register(), gridBagConstraints2);
  			jPanel_ButtonArea.add(getJButton_End(), gridBagConstraints3);
  		}
--- 118,129 ----
  			gridBagConstraints3.gridx = 0;
  			GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
  			gridBagConstraints2.gridy = 0;
! 			gridBagConstraints2.weightx = 1.0D;
! 			gridBagConstraints2.anchor = GridBagConstraints.EAST;
! 			gridBagConstraints2.gridx = 1;
  			jPanel_ButtonArea = new JPanel();
  			jPanel_ButtonArea.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
  			jPanel_ButtonArea.setLayout(new GridBagLayout());
  			jPanel_ButtonArea.add(getJButton_Register(), gridBagConstraints2);
  			jPanel_ButtonArea.add(getJButton_End(), gridBagConstraints3);
  		}
***************
*** 167,174 ****
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  //			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			// edit h.yoshitama 2009/11/27
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
--- 141,147 ----
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  //			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
***************
*** 346,381 ****
  //	}
  
  	/**
- 	 * This method initializes jButton_Import
- 	 *
- 	 * @return javax.swing.ExtendedButton
- 	 */
- 	private ExtendedButton getJButton_Import() {
- 		if (jButton_Import == null) {
- 			jButton_Import = new ExtendedButton();
- 			jButton_Import.setText("取込(F4)");
- 			jButton_Import.setFont(new Font("Dialog", Font.PLAIN, 12));
- 			jButton_Import.addActionListener(this);
- 		}
- 		return jButton_Import;
- 	}
- 
- 	/**
- 	 * This method initializes jButton_Export
- 	 *
- 	 * @return javax.swing.ExtendedButton
- 	 */
- 	private ExtendedButton getJButton_Export() {
- 		if (jButton_Export == null) {
- 			jButton_Export = new ExtendedButton();
- 			jButton_Export.setText("書出(F5)");
- 			jButton_Export.setFont(new Font("Dialog", Font.PLAIN, 12));
- 			jButton_Export.addActionListener(this);
- 		}
- 		return jButton_Export;
- 	}
- 
- 	/**
  	 * This method initializes jButton_Register
  	 *
  	 * @return javax.swing.ExtendedButton
--- 319,324 ----
***************
*** 383,389 ****
  	private ExtendedButton getJButton_Register() {
  		if (jButton_Register == null) {
  			jButton_Register = new ExtendedButton();
! 			jButton_Register.setText("登録(F12)");
  			jButton_Register.addActionListener(this);
  		}
  		return jButton_Register;
--- 326,332 ----
  	private ExtendedButton getJButton_Register() {
  		if (jButton_Register == null) {
  			jButton_Register = new ExtendedButton();
! 			jButton_Register.setText("登録");
  			jButton_Register.addActionListener(this);
  		}
  		return jButton_Register;
***************
*** 521,533 ****
  	{
  
  	}
- 	// add h.yoshitama 2009/11/27
- 	public void keyPressed(KeyEvent arg0) {
- 	}
- 	public void keyReleased(KeyEvent arg0) {
- 	}
- 	public void keyTyped(KeyEvent arg0) {
- 	}
  
  	/*
  	 * FrameSize Control
--- 464,469 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinMasterMaintenanceFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinMasterMaintenanceFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinMasterMaintenanceFrameCtrl.java	Mon Apr 26 18:28:58 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinMasterMaintenanceFrameCtrl.java	Wed Feb 24 17:45:24 2010
***************
*** 3,27 ****
  import java.awt.Color;
  import java.awt.Component;
  import java.awt.event.*;
- import java.io.File;
- import java.io.IOException;
  import java.sql.SQLException;
- import java.text.SimpleDateFormat;
  import java.util.*;
  
- import jp.or.med.orca.jma_tokutei.common.component.DialogFactory;
- import jp.or.med.orca.jma_tokutei.common.component.IDialog;
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
- import jp.or.med.orca.jma_tokutei.common.csv.JCSVReaderStream;
- import jp.or.med.orca.jma_tokutei.common.csv.JCSVWriterStream;
  import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
- import jp.or.med.orca.jma_tokutei.common.errormessage.RETURN_VALUE;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTable;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellPosition;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellRendererData;
  import jp.or.med.orca.jma_tokutei.common.app.JApplication;
- import jp.or.med.orca.jma_tokutei.common.app.JPath;
  
  import javax.swing.JScrollPane;
  import javax.swing.JTable;
--- 3,18 ----
***************
*** 40,48 ****
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellRowRenderer;
  import jp.or.med.orca.jma_tokutei.common.validate.JValidate;
  import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
- import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.dataimport.JImportMasterErrorHokenjyaResultFrameData;
- import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.dataimport.JImportMasterErrorKenshinResultFrameData;
- import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.dataimport.JImportMasterErrorTeikeiResultFrameData;
  
  /**
   * 健診項目マスタメンテナンス制御
--- 31,36 ----
***************
*** 87,116 ****
  	private String[] header = { "項目コード", "項目名","検査方法","必須フラグ[入力]","基準値下限（男性）[入力]", "基準値上限（男性）[入力]",
  			"基準値下限（女性）[入力]","基準値上限（女性）[入力]" , "単位", "入力下限値", "入力上限値", "基準値範囲", "単価（円）[入力]", "備考[入力]" };
  
- 	private IDialog filePathDialog;
- 
- 	private static jp.or.med.orca.jma_tokutei.common.csv.JCSVReaderStream reader = null;
- 	private static jp.or.med.orca.jma_tokutei.common.csv.JCSVWriterStream writer = null;
- 
- 	private static Vector<Vector<String>> CSVItems = null;
- 
- 	private static String saveTitle= "csvファイル保存先選択";
- 	private static String selectTitle= "csvファイル選択";
- 	private static String savaDialogTitle= "csvファイルの保存先を選択、ファイル名を指定してください";
- 	private static String selectDialogTitle= "csvファイルを選択してください";
- 
- 	// 検索ボタン押下時のSQLで使用
- 	private static final String[] TABLE_COLUMNS = {
- 		"HKNJANUM","KOUMOKU_CD","HISU_FLG",
- 		"DS_JYOUGEN","DS_KAGEN","JS_JYOUGEN","JS_KAGEN","TANI","BIKOU"
- 		};
- 
  	public JKenshinMasterMaintenanceFrameCtrl() {
  		initializeSetting();
  		initializeCombobox();
- 		// add h.yoshitama 2009/11/27
- 		/* Fキー用イベント設定 */
- //		functionListner();
  	}
  
  	// add s.inoue 2009/11/17
--- 75,83 ----
***************
*** 145,151 ****
  		dmodel = new DefaultTableModel(resultRefresh(),header){
  	      public boolean isCellEditable(int row, int column) {
  	    	boolean retflg = false;
! 	    	if ( column >13 ||
  	    			column == 3 || column == 4 || column == 5 || column == 6 || column == 7 || column == 12 || column == 13){
  	    		retflg = true;
  	      	}
--- 112,118 ----
  		dmodel = new DefaultTableModel(resultRefresh(),header){
  	      public boolean isCellEditable(int row, int column) {
  	    	boolean retflg = false;
! 	    	if (column == 0 || column >13 ||
  	    			column == 3 || column == 4 || column == 5 || column == 6 || column == 7 || column == 12 || column == 13){
  	    		retflg = true;
  	      	}
***************
*** 180,188 ****
  	    modelfixed.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
  
  	    initilizeFocus();
! 	    // add s.inoue 2009/12/03
! 	    functionListner();
!         final JScrollPane scroll = new JScrollPane(table);
          JViewport viewport = new JViewport();
          viewport.setView(modelfixed);
          viewport.setPreferredSize(modelfixed.getPreferredSize());
--- 147,154 ----
  	    modelfixed.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
  
  	    initilizeFocus();
! 
! 	    final JScrollPane scroll = new JScrollPane(table);
          JViewport viewport = new JViewport();
          viewport.setView(modelfixed);
          viewport.setPreferredSize(modelfixed.getPreferredSize());
***************
*** 307,339 ****
  		this.focusTraversalPolicy.setDefaultComponent(jComboBox_HokenjyaNumber);
  		this.focusTraversalPolicy.addComponent(jComboBox_HokenjyaNumber);
  		this.focusTraversalPolicy.addComponent(table);
- 		this.focusTraversalPolicy.addComponent(jButton_Import);
- 		this.focusTraversalPolicy.addComponent(jButton_Export);
  		this.focusTraversalPolicy.addComponent(jButton_Register);
  		this.focusTraversalPolicy.addComponent(jButton_End);
  	}
  
- 	// add h.yoshitama 2009/11/27
- 	private void functionListner(){
- 
- 		// add s.inoue 2009/12/02
- 		Component comp =null;
- 		HashMap<String, Component> compHm = new HashMap<String, Component>();
- 
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			comp = focusTraversalPolicy.getComponent(i);
- 			System.out.println(comp.getName());
- 
- 			if (!compHm.containsKey(comp.getName())){
- 				comp.addKeyListener(this);
- 				compHm.put(comp.getName(), comp);
- 			}
- 		}
- 		// edit s.inoue 2010/04/26
- 		table.addKeyListener(this);
- 		modelfixed.addKeyListener(this);
- 	}
- 
  	// 一覧用データ取得
  	private Object[][] resultRefresh()
  	{
--- 273,282 ----
***************
*** 453,733 ****
  		dispose();
  	}
  
- 	// add s.inoue 2010/03/12
- 	/**ImportStart↓↓↓↓↓**********************************************************/
- 	/**
- 	 * 取込ボタン
- 	 */
- 	public void pushedImportButton( ActionEvent e )
- 	{
- 		try {
- 			filePathDialog = DialogFactory.getInstance().createDialog(this,null);
- 
- 			filePathDialog.setMessageTitle(selectTitle);
- 			filePathDialog.setDialogTitle(selectDialogTitle);
- 			filePathDialog.setEnabled(false);
- 			filePathDialog.setDialogSelect(true);
- 			filePathDialog.setVisible(true);
- 
- 			// edit s.inoue 2010/03/25
- 			if (filePathDialog.getStatus().equals(RETURN_VALUE.CANCEL))
- 				return;
- 
- 			String filePath = filePathDialog.getFilePath();
- 			// add s.inoue 2010/03/05
- 			File fileImport = new File(filePath);
- 			if(!fileImport.exists())
- 				return;
- 			importCsvData(filePath);
- 			// add s.inoue 2010/03/15
- 			initializeSetting();
- 			initializeCombobox();
- 
- 		} catch (Exception ex) {
- 			JErrorMessage.show("M3824",this);
- 			logger.error(ex.getMessage());
- 		}
- 	}
- 
- 	/* 取込処理 */
- 	private void importCsvData(String filePath){
- 
- 		RETURN_VALUE retValue = JErrorMessage.show("M3825", this);
- 
- 		// cancel時
- 		if (retValue == RETURN_VALUE.NO){
- 			return;
- 		}else if (retValue == RETURN_VALUE.YES){
- 
- 			JImportMasterErrorKenshinResultFrameData data = new JImportMasterErrorKenshinResultFrameData();
- 
- 			// CSV読込処理
- 			reader = new JCSVReaderStream();
- 
- 			try {
- 				reader.openCSV(filePath,JApplication.CSV_CHARSET);
- 			} catch (IOException e) {
- 				JErrorMessage.show("M3824",this);
- 				logger.error(e.getMessage());
- 			}
- 
- 			CSVItems = reader.readAllTable();
- 
- 			try {
- 				JApplication.kikanDatabase.Transaction();
- 
- 				int csvCount = CSVItems.size();
- 
- 				if(csvCount == 0){
- 					JErrorMessage.show("M3827",this);
- 					return;
- 				}
- 
- 				// データ取込処理
- 				for (int i = 1; i < csvCount; i++) {
- 
- 					Vector<String> insertRow = new Vector<String>();
- 
- 					insertRow =CSVItems.get(i);
- 
- 					// 属性情報取得 CSVデータをローカル変数にセット(「"」を除去したもの)
- 					setCSVItemsToDB(data,insertRow);
- 
- 					if(!validateData(data))
- 						return;
- 
- 					// 健診マスタ登録
- 					kenshinMasterRegister(data);
- 				}
- 
- 				JApplication.kikanDatabase.Commit();
- 
- 				String[] messageParams = {String.valueOf(csvCount-1)};
- 				JErrorMessage.show("M3828",this,messageParams);
- 			} catch (SQLException e) {
- 				try {
- 					JApplication.kikanDatabase.rollback();
- 				} catch (SQLException e1) {}
- 				JErrorMessage.show("M3826",this);
- 				logger.error(e.getMessage());
- 			}
- 		}
- 	}
- 
- 	// edit s.inoue 2010/03/04
- 	/* csvデータ取込 */
- 	private void setCSVItemsToDB(JImportMasterErrorKenshinResultFrameData data,
- 			Vector<String> insertRow){
- 
- 			data.CSV_COLUMN_HKNJANUM = (reader.rmQuart(insertRow.get(0)));
- 			data.CSV_COLUMN_KOUMOKU_CD = (reader.rmQuart(insertRow.get(1)));
- 			data.CSV_COLUMN_HISU_FLG = (reader.rmQuart(insertRow.get(2)));
- 			data.CSV_COLUMN_DS_KAGEN = (reader.rmQuart(insertRow.get(3)));
- 			data.CSV_COLUMN_DS_JYOUGEN = (reader.rmQuart(insertRow.get(4)));
- 			data.CSV_COLUMN_JS_KAGEN = (reader.rmQuart(insertRow.get(5)));
- 			data.CSV_COLUMN_JS_JYOUGEN = (reader.rmQuart(insertRow.get(6)));
- 			data.CSV_COLUMN_TANI = (reader.rmQuart(insertRow.get(7)));
- 			data.CSV_COLUMN_BIKOU = (reader.rmQuart(insertRow.get(8)));
- 	}
- 
- 	// edit s.inoue 2010/03/04
- 	/* validate処理 */
- 	private boolean validateData(JImportMasterErrorKenshinResultFrameData data) {
- 
- 		boolean rettanka = false;
- 
- 		rettanka= validatedData.setHokenjyaNumber(data.CSV_COLUMN_HKNJANUM)
- 			&& validatedData.setKensaKoumokuCode(data.CSV_COLUMN_KOUMOKU_CD)
- 			&& validatedData.setHisuFlag(data.CSV_COLUMN_HISU_FLG)
- 			&& validatedData.setJsKagen(data.CSV_COLUMN_JS_KAGEN)
- 			&& validatedData.setJsJyougen(data.CSV_COLUMN_JS_JYOUGEN)
- 			&& validatedData.setDsKagen(data.CSV_COLUMN_DS_KAGEN)
- 			&& validatedData.setDsJyougen(data.CSV_COLUMN_DS_JYOUGEN)
- 			&& validatedData.setTanni(data.CSV_COLUMN_TANI)
- 			&& validatedData.setNote(data.CSV_COLUMN_BIKOU);
- 		return rettanka;
- 	}
- 
- 	/**
- 	 * CSVデータ登録
- 	 * @throws SQLException
- 	 */
- 	private void kenshinMasterRegister(JImportMasterErrorKenshinResultFrameData data)
- 		throws SQLException
- 	{
- 		StringBuffer buffer = new StringBuffer();
- 
- 		buffer = new StringBuffer("");
- 		buffer.append("UPDATE T_KENSHINMASTER SET ");
- 		buffer.append(" HISU_FLG = "
- 				+ JQueryConvert.queryConvertAppendComma(validatedData.getHisuFlag()));
- 		buffer.append(" DS_KAGEN = "
- 				+ JQueryConvert.queryConvertAppendComma(validatedData.getDsKagen()));
- 		buffer.append(" DS_JYOUGEN = "
- 				+ JQueryConvert.queryConvertAppendComma(validatedData.getDsJyougen()));
- 		buffer.append(" JS_KAGEN = "
- 				+ JQueryConvert.queryConvertAppendComma(validatedData.getJsKagen()));
- 		buffer.append(" JS_JYOUGEN = "
- 				+ JQueryConvert.queryConvertAppendComma(validatedData.getJsJyougen()));
- 		buffer.append(" TANI = "
- 				+ JQueryConvert.queryConvertAppendComma(validatedData.getTanni()));
- 		buffer.append(" BIKOU = "
- 				+ JQueryConvert.queryConvert(validatedData.getNote()));
- 		buffer.append(" WHERE HKNJANUM ="
- 				+ JQueryConvert.queryConvert(validatedData.getHokenjyaNumber()));
- 		buffer.append(" AND KOUMOKU_CD ="
- 				+ JQueryConvert.queryConvert(validatedData.getKensaKoumokuCode()));
- 
- 		JApplication.kikanDatabase.sendNoResultQuery(buffer.toString());
- 
- 	}
- 	/**ImportEnd↑↑↑↑↑**********************************************************/
- 
- 	/**ExportStart↓↓↓↓↓**********************************************************/
- 	// add s.inoue 2010/02/25
- 	/**
- 	 * 書出ボタン
- 	 */
- 	public void pushedExportButton( ActionEvent e )
- 	{
- 		try {
- 			String saveFileName = JPath.createDirectoryUniqueName("KenshinMaster");
- 
- 			String defaltPath = JPath.getDesktopPath() +
- 			File.separator +
- 			saveFileName;
- 
- 			filePathDialog = DialogFactory.getInstance().createDialog(this, defaltPath);
- 			filePathDialog.setMessageTitle(saveTitle);
- 			filePathDialog.setEnabled(false);
- 			filePathDialog.setDialogSelect(false);
- 			filePathDialog.setDialogTitle(savaDialogTitle);
- 			filePathDialog.setVisible(true);
- 
- 			// edit s.inoue 2010/03/25
- 			if (filePathDialog.getStatus().equals(RETURN_VALUE.CANCEL))
- 				return;
- 
- 			String filePath = filePathDialog.getFilePath();
- 			if (filePath.equals(""))
- 				return;
- 			exportCsvData(filePath);
- 
- 		} catch (Exception ex) {
- 			JErrorMessage.show("M3829", this);
- 			logger.error(ex.getMessage());
- 		}
- 	}
- 
- 	/* export処理 */
- 	private void exportCsvData(String filePath){
- 		// JImportMasterErrorKenshinResultFrameData data = new JImportMasterErrorKenshinResultFrameData();
- 
- 		// CSV読込処理
- 		writer = new JCSVWriterStream();
- 
- 		try {
- 			writer.writeTable(getExportData());
- 			writer.saveCSV(filePath,JApplication.CSV_CHARSET);
- 		} catch (IOException e) {
- 			JErrorMessage.show("M3829", this);
- 			logger.error(e.getMessage());
- 		}
- 	}
- 
- 	/* DBよりデータ取得*/
- 	private Vector<Vector<String>> getExportData(){
- 
- 		Vector<Vector<String>> newTable = new Vector<Vector<String>>();
- 
- 		ArrayList<Hashtable<String, String>> result
- 			= new ArrayList<Hashtable<String, String>>();
- 
- 		if (jComboBox_HokenjyaNumber.getItemCount() <= 0)
- 			return null;
- 
- 		String curHokenjyaNumber = new String(
- 					((String) jComboBox_HokenjyaNumber.getSelectedItem()).substring(0, 8));
- 
- 		StringBuilder sb = new StringBuilder();
- 		sb.append(" SELECT HKNJANUM,KOUMOKU_CD,HISU_FLG,DS_JYOUGEN,DS_KAGEN,JS_JYOUGEN,JS_KAGEN,TANI,BIKOU");
- 		sb.append(" FROM T_KENSHINMASTER WHERE HKNJANUM = ");
- 		sb.append(JQueryConvert.queryConvert(curHokenjyaNumber));
- 		sb.append(" ORDER BY XMLITEM_SEQNO ");
- 
- 		try {
- 			result = JApplication.kikanDatabase.sendExecuteQuery(sb.toString());
- 		} catch (SQLException e) {
- 			e.printStackTrace();
- 			return null;
- 		}
- 
- 		Hashtable<String, String> resultItem = new Hashtable<String, String>();
- 		for( int i=0; i<result.size(); ++i )
- 		{
- 			resultItem = result.get(i);
- 
- 			Vector<String> data = new Vector<String>();
- 
- 			for (int j=0; j<resultItem.size(); ++j){
- 				data.add(resultItem.get(TABLE_COLUMNS[j]).trim());
- 			}
- 
- 			// header設定
- 			if (i==0){
- 				Vector colmn = new Vector<String>();
- 				List l = java.util.Arrays.asList(TABLE_COLUMNS);
- 				for (Iterator item = l.iterator(); item.hasNext();) {
- 					colmn.add((String)item.next());
- 				}
- 				newTable.add(colmn);
- 			}
- 			newTable.add(data);
- 		}
- 		return newTable;
- 	}
- 	/**ExportEnd↑↑↑↑↑**********************************************************/
- 
  	/**
  	 * 登録ボタン
  	 */
--- 396,401 ----
***************
*** 850,862 ****
  		if (source == jButton_End) {
  			logger.info(jButton_End.getText());
  			pushedEndButton(e);
! 		}else if (source == jButton_Import) {
! 			logger.info(jButton_Import.getText());
! 			pushedImportButton(e);
! 		}else if (source == jButton_Export){
! 			logger.info(jButton_Export.getText());
! 			pushedExportButton(e);
! 		}else if (source == jButton_Register) {
  			logger.info(jButton_Register.getText());
  			pushedRegisterButton(e);
  		}
--- 518,525 ----
  		if (source == jButton_End) {
  			logger.info(jButton_End.getText());
  			pushedEndButton(e);
! 		}
! 		if (source == jButton_Register) {
  			logger.info(jButton_Register.getText());
  			pushedRegisterButton(e);
  		}
***************
*** 879,904 ****
  			cellColors.add(new JSimpleTableCellRendererData(COLOR_ABLE,new JSimpleTableCellPosition(i, 10)));
  		}
  	}
- 
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 		switch(keyEvent.getKeyCode()){
- 			case KeyEvent.VK_F1:
- 				logger.info(jButton_End.getText());
- 				dispose();break;
- 			case KeyEvent.VK_F4:
- 				logger.info(jButton_Import.getText());
- 				pushedImportButton(null);break;
- 			case KeyEvent.VK_F5:
- 				logger.info(jButton_Export.getText());
- 				pushedExportButton(null);break;
- 			case KeyEvent.VK_F12:
- 				logger.info(jButton_Register.getText());
- 				pushedRegisterButton(null);break;
- 		}
- 	}
  }
  
  //Source Code Version Tag System v1.00  -- Do not remove --
  //Product-Tag: {4F85C2F4EE-5847B3BB7A9-ADC5AC59E3-EF66F79A1}
  
--- 542,1098 ----
  			cellColors.add(new JSimpleTableCellRendererData(COLOR_ABLE,new JSimpleTableCellPosition(i, 10)));
  		}
  	}
  }
  
  //Source Code Version Tag System v1.00  -- Do not remove --
  //Product-Tag: {4F85C2F4EE-5847B3BB7A9-ADC5AC59E3-EF66F79A1}
  
+ 
+ 
+ //package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
+ //
+ //import java.awt.Color;
+ //import java.awt.Component;
+ //import java.awt.event.*;
+ //import java.sql.SQLException;
+ //import java.util.*;
+ //
+ //import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
+ //import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
+ //import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
+ //import jp.or.med.orca.jma_tokutei.common.table.JSimpleTable;
+ //import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellPosition;
+ //import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellRendererData;
+ //import jp.or.med.orca.jma_tokutei.common.app.JApplication;
+ //
+ //import javax.swing.JScrollPane;
+ //import javax.swing.JTable;
+ //import javax.swing.JViewport;
+ //import javax.swing.ListSelectionModel;
+ //import javax.swing.event.ChangeEvent;
+ //import javax.swing.event.ChangeListener;
+ //import javax.swing.table.DefaultTableCellRenderer;
+ //import javax.swing.table.DefaultTableModel;
+ //import javax.swing.table.TableColumnModel;
+ //import javax.swing.table.TableModel;
+ //import javax.swing.table.TableRowSorter;
+ //
+ //import org.apache.log4j.Logger;
+ //
+ //import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellRowRenderer;
+ //import jp.or.med.orca.jma_tokutei.common.validate.JValidate;
+ //import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
+ //
+ ///**
+ // * 健診項目マスタメンテナンス制御
+ // */
+ //public class JKenshinMasterMaintenanceFrameCtrl extends
+ //		JKenshinMasterMaintenanceFrame {
+ //
+ //	private static final int COLUMN_INDEX_KOUMOKU_CD = 0;
+ //	private static final int COLUMN_INDEX_KOUMOKU_NAME = 1;
+ //	private static final int COLUMN_INDEX_KENSA_HOUHOU = 2;
+ //	private static final int COLUMN_INDEX_HISU_FLG = 3;
+ //	private static final int COLUMN_INDEX_DS_KAGEN = 4;
+ //	private static final int COLUMN_INDEX_DS_JYOUGEN = 5;
+ //	private static final int COLUMN_INDEX_JS_KAGEN = 6;
+ //	private static final int COLUMN_INDEX_JS_JYOUGEN = 7;
+ //	private static final int COLUMN_INDEX_TANI = 8;
+ //	private static final int COLUMN_INDEX_KAGEN = 9;
+ //	private static final int COLUMN_INDEX_JYOUGEN = 10;
+ //	private static final int COLUMN_INDEX_KIJYUNTI_HANI = 11;
+ //	private static final int COLUMN_INDEX_TANKA_KENSIN = 12;
+ //	private static final int COLUMN_INDEX_BIKOU = 13;
+ //
+ //	// edit s.inoue 2009/11/14
+ //	// private JSimpleTable model = new JSimpleTable();
+ //	private DefaultTableModel dmodel = null;
+ //	private TableRowSorter<TableModel> sorter =null;
+ //
+ //	private JSimpleTable table=null;
+ //	private JSimpleTable modelfixed= null;
+ //	Object[][] rowcolumn = null;
+ //
+ //	private static Logger logger = Logger.getLogger(JKenshinMasterMaintenanceFrameCtrl.class);
+ //
+ //	// add h.yoshitama 2009/09/18
+ //	private Vector<JSimpleTableCellRendererData> cellColors = new Vector<JSimpleTableCellRendererData>();
+ //	private final Color COLOR_ABLE = ViewSettings.getAbleItemBgColor();
+ //
+ //	private JKenshinMasterMaintenanceFrameData validatedData = new JKenshinMasterMaintenanceFrameData();
+ //
+ //	private JFocusTraversalPolicy focusTraversalPolicy = null;
+ //	private ArrayList<Hashtable<String, String>> result;
+ //	private String[] header = { "項目コード", "項目名","検査方法","必須フラグ[入力]","基準値下限（男性）[入力]", "基準値上限（男性）[入力]",
+ //			"基準値下限（女性）[入力]","基準値上限（女性）[入力]" , "単位", "入力下限値", "入力上限値", "基準値範囲", "単価（円）[入力]", "備考[入力]" };
+ //
+ //	public JKenshinMasterMaintenanceFrameCtrl() {
+ //		initializeSetting();
+ //		initializeCombobox();
+ //	}
+ //
+ //	// add s.inoue 2009/11/17
+ //	// combobox初期化処理
+ //	private void initializeCombobox(){
+ //		ArrayList<Hashtable<String, String>> Result = new ArrayList<Hashtable<String, String>>();
+ //		Hashtable<String, String> ResultItem = new Hashtable<String, String>();
+ //		// add s.inoue 2010/01/15
+ //		String Query = new String("SELECT HKNJANUM,HKNJANAME FROM T_HOKENJYA WHERE YUKOU_FLG = '1'");
+ //
+ //		try {
+ //			Result = JApplication.kikanDatabase.sendExecuteQuery(Query);
+ //		} catch (SQLException e) {
+ //			e.printStackTrace();
+ //			JErrorMessage.show("M3820", this);
+ //			dispose();
+ //			return;
+ //		}
+ //
+ //		for (int i = 0; i < Result.size(); i++) {
+ //			ResultItem = Result.get(i);
+ //			jComboBox_HokenjyaNumber.addItem(ResultItem.get("HKNJANUM") + ":"
+ //					+ ResultItem.get("HKNJANAME"));
+ //		}
+ //		jComboBox_HokenjyaNumber.addItem("99999999:マスタデータ編集");
+ //		jLabel_ableExample.setBackground(ViewSettings.getAbleItemBgColor());
+ //	}
+ //
+ //	// add s.inoue 2009/11/14
+ //	private void initializeSetting(){
+ //
+ //		dmodel = new DefaultTableModel(resultRefresh(),header){
+ //	      public boolean isCellEditable(int row, int column) {
+ //	    	boolean retflg = false;
+ //	    	if (column == 0 || column >13 ||
+ //	    			column == 3 || column == 4 || column == 5 || column == 6 || column == 7 || column == 12 || column == 13){
+ //	    		retflg = true;
+ //	      	}
+ //	        return retflg;
+ //	      }
+ //	    };
+ //
+ //		sorter = new TableRowSorter<TableModel>(dmodel);
+ //		table = new JSimpleTable(dmodel);
+ //		modelfixed = new JSimpleTable(dmodel);
+ //
+ //		modelfixed.setPreferedColumnWidths(new int[]{150, 150});
+ //		table.setPreferedColumnWidths(new int[] { 80, 80, 80, 80, 80, 80, 50,80, 80,  120, 120 });
+ //
+ //		modelfixed.setSelectionModel(table.getSelectionModel());
+ //
+ //		for(int i=dmodel.getColumnCount()-1;i>=0;i--) {
+ //            if(i<4) {
+ //                table.removeColumn(table.getColumnModel().getColumn(i));
+ //                modelfixed.getColumnModel().getColumn(i).setResizable(false);
+ //            }else{
+ //                modelfixed.removeColumn(modelfixed.getColumnModel().getColumn(i));
+ //            }
+ //        }
+ //
+ //	    table.setRowSorter(sorter);
+ //	    table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
+ //	    table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
+ //
+ //	    modelfixed.setRowSorter(sorter);
+ //	    modelfixed.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
+ //	    modelfixed.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
+ //
+ //	    initilizeFocus();
+ //        final JScrollPane scroll = new JScrollPane(table);
+ //        JViewport viewport = new JViewport();
+ //        viewport.setView(modelfixed);
+ //        viewport.setPreferredSize(modelfixed.getPreferredSize());
+ //        scroll.setRowHeader(viewport);
+ //
+ //        modelfixed.setPreferredScrollableViewportSize(modelfixed.getPreferredSize());
+ //        scroll.setRowHeaderView(modelfixed);
+ //        scroll.setCorner(JScrollPane.UPPER_LEFT_CORNER, modelfixed.getTableHeader());
+ //
+ //        scroll.getRowHeader().addChangeListener(new ChangeListener() {
+ //            public void stateChanged(ChangeEvent e) {
+ //                JViewport viewport = (JViewport) e.getSource();
+ //                scroll.getVerticalScrollBar().setValue(viewport.getViewPosition().y);
+ //            }
+ //        });
+ //
+ //        jPanel_Main.add(scroll);
+ //
+ //		dmodel.setDataVector(resultRefresh(),header);
+ //
+ //		// 4列以下は固定、以降は変動
+ //		for(int i=dmodel.getColumnCount()-1;i>=0;i--) {
+ //            if(i<2) {
+ //                table.removeColumn(table.getColumnModel().getColumn(i));
+ //                modelfixed.getColumnModel().getColumn(i).setResizable(false);
+ //            }else{
+ //                modelfixed.removeColumn(modelfixed.getColumnModel().getColumn(i));
+ //            }
+ //        }
+ //
+ //	   TableColumnModel columnsfix = modelfixed.getColumnModel();
+ //	   for(int i=0;i<columnsfix.getColumnCount();i++) {
+ //
+ //		   columnsfix.getColumn(i).setCellRenderer(new JSimpleTableCellRowRenderer(
+ //	   			(DefaultTableCellRenderer)modelfixed.getDefaultRenderer(modelfixed.getColumnClass(i))));
+ //	   }
+ //
+ //	   TableColumnModel columns = table.getColumnModel();
+ //	   for(int i=0;i<columns.getColumnCount();i++) {
+ //
+ //		   columns.getColumn(i).setCellRenderer(new JSimpleTableCellRowRenderer(
+ //	   			(DefaultTableCellRenderer)table.getDefaultRenderer(table.getColumnClass(i))));
+ //	   }
+ //
+ //		// 初期選択
+ //		if (table.getRowCount() > 0) {
+ //			table.setRowSelectionInterval(0, 0);
+ //		}
+ //
+ //		// add s.inoue 2009/11/12
+ //		table.addHeader(this.header);
+ //		table.refreshTable(); modelfixed.refreshTable();
+ //
+ //		/* セルの色を更新する。 */
+ //		this.refreshTableCellColor();
+ //	}
+ //
+ //	/*
+ //	 * 検索リフレッシュ処理
+ //	 */
+ //	private void searchRefresh(){
+ //
+ //		modelfixed.setPreferedColumnWidths(new int[]{150, 150});
+ //		table.setPreferedColumnWidths(new int[] { 80, 80, 80, 80, 80, 80, 50,80, 80,  120, 120 });
+ //
+ //		// add s.inoue 2009/10/23
+ //	    modelfixed.setSelectionModel(table.getSelectionModel());
+ //
+ //	    // validationCheck
+ //	    Object [][] resultref=resultRefresh();
+ //	    if (resultref == null)
+ //	    	return;
+ //
+ //	    // add s.inoue 2009/10/26
+ //	    for(int i=dmodel.getColumnCount()-1;i>=0;i--) {
+ //            if(i<2) {
+ //                table.removeColumn(table.getColumnModel().getColumn(i));
+ //            }
+ //        }
+ //
+ //	    dmodel.setDataVector(resultref,header);
+ //
+ //		// add s.inoue 2009/10/26
+ //		// 4列以下は固定、以降は変動
+ //		for(int i=dmodel.getColumnCount()-1;i>=0;i--) {
+ //            if(i<2) {
+ //                table.removeColumn(table.getColumnModel().getColumn(i));
+ //                modelfixed.getColumnModel().getColumn(i).setResizable(false);
+ //            }else{
+ //                modelfixed.removeColumn(modelfixed.getColumnModel().getColumn(i));
+ //            }
+ //        }
+ //
+ //	   // add s.inoue 2009/10/26
+ //	   TableColumnModel columnsfix = modelfixed.getColumnModel();
+ //	   for(int i=1;i<columnsfix.getColumnCount();i++) {
+ //
+ //		   columnsfix.getColumn(i).setCellRenderer(new JSimpleTableCellRowRenderer(
+ //	   			(DefaultTableCellRenderer)modelfixed.getDefaultRenderer(modelfixed.getColumnClass(i))));
+ //	   }
+ //
+ //	   TableColumnModel columns = table.getColumnModel();
+ //	   for(int i=0;i<columns.getColumnCount();i++) {
+ //
+ //		   columns.getColumn(i).setCellRenderer(new JSimpleTableCellRowRenderer(
+ //	   			(DefaultTableCellRenderer)table.getDefaultRenderer(table.getColumnClass(i))));
+ //	   }
+ //
+ //	    // add s.inoue 2009/11/12
+ //	    table.addHeader(this.header);
+ //	    modelfixed.refreshTable();table.refreshTable();
+ //
+ //		// 初期選択
+ //		if (table.getRowCount() > 0) {
+ //			table.setRowSelectionInterval(0, 0);
+ //		}
+ //	}
+ //	/* focus初期化 */
+ //	private void initilizeFocus(){
+ //		this.focusTraversalPolicy = new JFocusTraversalPolicy();
+ //		this.setFocusTraversalPolicy(this.focusTraversalPolicy);
+ //		this.focusTraversalPolicy.setDefaultComponent(jComboBox_HokenjyaNumber);
+ //		this.focusTraversalPolicy.addComponent(jComboBox_HokenjyaNumber);
+ //		this.focusTraversalPolicy.addComponent(table);
+ //		this.focusTraversalPolicy.addComponent(jButton_Register);
+ //		this.focusTraversalPolicy.addComponent(jButton_End);
+ //	}
+ //
+ //	// 一覧用データ取得
+ //	private Object[][] resultRefresh()
+ //	{
+ //		if (jComboBox_HokenjyaNumber.getItemCount() <= 0)
+ //			return null;
+ //
+ //		try {
+ //			String curHokenjyaNumber = new String(
+ //					((String) jComboBox_HokenjyaNumber.getSelectedItem()).substring(0, 8));
+ //
+ //			String query = new String("SELECT HKNJANUM, KOUMOKU_CD, KOUMOKU_NAME, DATA_TYPE, MAX_BYTE_LENGTH, XML_PATTERN, XML_DATA_TYPE,"
+ //				 +	" XML_KENSA_CD, OBSERVATION, AUTHOR, AUTHOR_KOUMOKU_CD, KENSA_GROUP, KENSA_GROUP_CD, KEKKA_OID,"
+ //				 +	" KOUMOKU_OID, HISU_FLG, KAGEN, JYOUGEN, DS_JYOUGEN, DS_KAGEN, JS_JYOUGEN, JS_KAGEN, KIJYUNTI_HANI,"
+ //				 +	" TANI, KENSA_HOUHOU, TANKA_KENSIN, BIKOU, XMLITEM_SEQNO"
+ //				 +	" FROM T_KENSHINMASTER WHERE HKNJANUM = "
+ //				 + JQueryConvert.queryConvert(curHokenjyaNumber));
+ //
+ //			result = JApplication.kikanDatabase.sendExecuteQuery(query);
+ //		} catch (SQLException e) {
+ //			e.printStackTrace();
+ //			JErrorMessage.show("M3821", this);
+ //			dispose();
+ //		}
+ //
+ //		rowcolumn = new Object[result.size()][14];
+ //		Hashtable<String, String> resultItem;
+ //
+ //		for (int i = 0; i < result.size(); i++) {
+ //			resultItem = result.get(i);
+ //
+ //			rowcolumn[i][COLUMN_INDEX_KOUMOKU_CD] = resultItem.get("KOUMOKU_CD");
+ //			rowcolumn[i][COLUMN_INDEX_KOUMOKU_NAME] = resultItem.get("KOUMOKU_NAME");
+ //			rowcolumn[i][COLUMN_INDEX_KENSA_HOUHOU] = resultItem.get("KENSA_HOUHOU");
+ //			rowcolumn[i][COLUMN_INDEX_HISU_FLG] = resultItem.get("HISU_FLG");
+ //			rowcolumn[i][COLUMN_INDEX_TANI] = resultItem.get("TANI");
+ //			rowcolumn[i][COLUMN_INDEX_KIJYUNTI_HANI] = resultItem.get("KIJYUNTI_HANI");
+ //			rowcolumn[i][COLUMN_INDEX_TANKA_KENSIN] = resultItem.get("TANKA_KENSIN");
+ //			rowcolumn[i][COLUMN_INDEX_BIKOU] = resultItem.get("BIKOU");
+ //
+ //			String LimitFormat = resultItem.get("MAX_BYTE_LENGTH");
+ //			String limitValeDsKagen = resultItem.get("DS_KAGEN");
+ //			String limitValeDsJyougen = resultItem.get("DS_JYOUGEN");
+ //			String limitValeJsKagen = resultItem.get("JS_KAGEN");
+ //			String limitValeJsJyougen = resultItem.get("JS_JYOUGEN");
+ //			String maxValeKagen = resultItem.get("KAGEN");
+ //			String maxValeJyougen = resultItem.get("JYOUGEN");
+ //
+ //			// データタイプ 入力上限下限 数字:1の時
+ //			if (resultItem.get("DATA_TYPE").equals("1")){
+ //				if (!maxValeKagen.equals("")){
+ //					rowcolumn[i][COLUMN_INDEX_KAGEN] = JValidate.DecimalFormatValue(maxValeKagen,LimitFormat);
+ //				}else{
+ //					rowcolumn[i][COLUMN_INDEX_KAGEN] = "";
+ //				}
+ //
+ //				if (rowcolumn[i][COLUMN_INDEX_KOUMOKU_CD].equals("2A040000001930102")){
+ //					rowcolumn[i][COLUMN_INDEX_JYOUGEN] = "99.9";
+ //				}else{
+ //					if (!maxValeJyougen.equals("")){
+ //						rowcolumn[i][COLUMN_INDEX_JYOUGEN] = JValidate.DecimalFormatValue(maxValeJyougen,LimitFormat);
+ //					}else{
+ //						rowcolumn[i][COLUMN_INDEX_JYOUGEN] = "";
+ //					}
+ //				}
+ //
+ //				if (!limitValeDsJyougen.equals("")){
+ //					rowcolumn[i][COLUMN_INDEX_DS_JYOUGEN] = JValidate.DecimalFormatValue(limitValeDsJyougen,LimitFormat);
+ //				}else{
+ //					rowcolumn[i][COLUMN_INDEX_DS_JYOUGEN] = "";
+ //				}
+ //
+ //				if (!limitValeDsKagen.equals("")){
+ //					rowcolumn[i][COLUMN_INDEX_DS_KAGEN] = JValidate.DecimalFormatValue(limitValeDsKagen,LimitFormat);
+ //				}else{
+ //					rowcolumn[i][COLUMN_INDEX_DS_KAGEN] = "";
+ //				}
+ //
+ //				if (!limitValeJsJyougen.equals("")){
+ //					rowcolumn[i][COLUMN_INDEX_JS_JYOUGEN] = JValidate.DecimalFormatValue(limitValeJsJyougen,LimitFormat);
+ //				}else{
+ //					rowcolumn[i][COLUMN_INDEX_JS_JYOUGEN] = "";
+ //				}
+ //
+ //				if (!limitValeJsKagen.equals("")){
+ //					rowcolumn[i][COLUMN_INDEX_JS_KAGEN] = JValidate.DecimalFormatValue(limitValeJsKagen,LimitFormat);
+ //				}else{
+ //					rowcolumn[i][COLUMN_INDEX_JS_KAGEN] = "";
+ //				}
+ //			}else{
+ //				rowcolumn[i][COLUMN_INDEX_KAGEN] = "";
+ //				rowcolumn[i][COLUMN_INDEX_JYOUGEN] = "";
+ //				rowcolumn[i][COLUMN_INDEX_DS_KAGEN] = "";
+ //				rowcolumn[i][COLUMN_INDEX_DS_JYOUGEN] = "";
+ //				rowcolumn[i][COLUMN_INDEX_JS_JYOUGEN] = "";
+ //				rowcolumn[i][COLUMN_INDEX_JS_KAGEN] = "";
+ //			}
+ //		}
+ //
+ //		return rowcolumn;
+ //	}
+ //
+ //	/**
+ //	 * 各行に関して必須項目のチェックを行う
+ //	 */
+ //	public boolean validateAsRegisterPushed(
+ //			JKenshinMasterMaintenanceFrameData data) {
+ //		data.setValidateAsDataSet();
+ //		return true;
+ //	}
+ //
+ //	/**
+ //	 * 終了ボタン
+ //	 */
+ //	public void pushedEndButton(ActionEvent e) {
+ //		dispose();
+ //	}
+ //
+ //	/**
+ //	 * 登録ボタン
+ //	 */
+ //	public void pushedRegisterButton(ActionEvent e) {
+ //		String Query = null;
+ //
+ //		try {
+ //			JApplication.kikanDatabase.Transaction();
+ //
+ //			for (int i = 0; i < table.getRowCount(); i++) {
+ //
+ //				if (
+ //				// edit ver2 s.inoue 2009/07/22
+ //				validatedData.setKensaKoumokuCode((String) modelfixed.getData(i,COLUMN_INDEX_KOUMOKU_CD))
+ //						&& validatedData.setKensaKoumokuName((String) modelfixed.getData(i, COLUMN_INDEX_KOUMOKU_NAME))
+ //						&& validatedData.setKensaHouhou((String) modelfixed.getData(i,COLUMN_INDEX_KENSA_HOUHOU))
+ //						&& validatedData.setHisuFlag((String) table.getData(i,COLUMN_INDEX_HISU_FLG))
+ //						&& validatedData.setKagen((String) table.getData(i,COLUMN_INDEX_KAGEN))
+ //						&& validatedData.setJyougen((String) table.getData(i,COLUMN_INDEX_JYOUGEN))
+ //						&& validatedData.setDsJyougen((String) table.getData(i,COLUMN_INDEX_DS_JYOUGEN))
+ //						&& validatedData.setDsKagen((String) table.getData(i,COLUMN_INDEX_DS_KAGEN))
+ //						&& validatedData.setJsJyougen((String) table.getData(i,COLUMN_INDEX_JS_JYOUGEN))
+ //						&& validatedData.setJsKagen((String) table.getData(i,COLUMN_INDEX_JS_KAGEN))
+ //						&& validatedData.setTanni((String) table.getData(i,COLUMN_INDEX_TANI))
+ //						&& validatedData.setKijyunchiHanni((String) table.getData(i, COLUMN_INDEX_KIJYUNTI_HANI))
+ //						&& validatedData.setKensaTanka((String) table.getData(i, COLUMN_INDEX_TANKA_KENSIN))
+ //						&& validatedData.setNote((String) table.getData(i,COLUMN_INDEX_BIKOU))
+ //				) {
+ //					if (validateAsRegisterPushed(validatedData)) {
+ //						if (validatedData.isValidateAsDataSet()) {
+ //							String curHokenjyaNumber = new String(
+ //									((String) jComboBox_HokenjyaNumber.getSelectedItem()).substring(0, 8));
+ //
+ //							Query = new String(
+ //									"UPDATE T_KENSHINMASTER SET "
+ //											+ "KOUMOKU_NAME = "
+ //											+ JQueryConvert.queryConvertAppendComma(validatedData.getKensaKoumokuName())
+ //											+ "HISU_FLG = "
+ //											+ JQueryConvert.queryConvertAppendComma(validatedData.getHisuFlag())
+ //											+ "KAGEN = "
+ //											+ JQueryConvert.queryConvertAppendComma(validatedData.getKagen())
+ //											+ "JYOUGEN = "
+ //											+ JQueryConvert.queryConvertAppendComma(validatedData.getJyougen())
+ //											+ "DS_JYOUGEN = "
+ //											+ JQueryConvert.queryConvertAppendComma(validatedData.getDsJyougen())
+ //											+ "DS_KAGEN = "
+ //											+ JQueryConvert.queryConvertAppendComma(validatedData.getDsKagen())
+ //											+ "JS_JYOUGEN = "
+ //											+ JQueryConvert.queryConvertAppendComma(validatedData.getJsJyougen())
+ //											+ "JS_KAGEN = "
+ //											+ JQueryConvert.queryConvertAppendComma(validatedData.getJsKagen())
+ //											+ "TANI = "
+ //											+ JQueryConvert.queryConvertAppendComma(validatedData.getTanni())
+ //											+ "KIJYUNTI_HANI = "
+ //											+ JQueryConvert.queryConvertAppendComma(validatedData.getKijyunchiHanni())
+ //											+ "TANKA_KENSIN = "
+ //											+ JQueryConvert.queryConvertAppendComma(validatedData.getKensaTanka())
+ //											+ "KENSA_HOUHOU = "
+ //											+ JQueryConvert.queryConvertAppendComma(validatedData.getKensaHouhou())
+ //											+ "BIKOU = "
+ //											+ JQueryConvert.queryConvert(validatedData.getNote())
+ //											+ "WHERE "
+ //											+ "HKNJANUM = "
+ //											+ JQueryConvert.queryConvert(curHokenjyaNumber)
+ //											+ " AND "
+ //											+ "KOUMOKU_CD = "
+ //											+ JQueryConvert.queryConvert(validatedData.getKensaKoumokuCode()));
+ //
+ //							JApplication.kikanDatabase.sendNoResultQuery(Query);
+ //						}
+ //					}
+ //				} else {
+ //					// 値のチェックでエラーが発生した段階でロールバックする。
+ //					try {
+ //						JApplication.kikanDatabase.rollback();
+ //					} catch (Exception e1) {
+ //						JErrorMessage.show("M0000", this);
+ //						System.exit(1);
+ //					}
+ //					return;
+ //				}
+ //			}
+ //
+ //			JApplication.kikanDatabase.Commit();
+ //			dispose();
+ //
+ //		} catch (SQLException f) {
+ //			f.printStackTrace();
+ //			JErrorMessage.show("M3822", this);
+ //			try {
+ //				System.out.println("RollBack!@202");
+ //				JApplication.kikanDatabase.rollback();
+ //			} catch (SQLException g) {
+ //				g.printStackTrace();
+ //				JErrorMessage.show("M0000", this);
+ //				System.exit(1);
+ //			}
+ //
+ //			return;
+ //		}
+ //	}
+ //
+ //	/**
+ //	 * コンボボックスのイベント処理
+ //	 */
+ //	public void changedHokenjyaNumber(ItemEvent e) {
+ //		// edit s.inoue 2009/11/15
+ //		// initTable();
+ //		searchRefresh();
+ //	}
+ //
+ //	public void itemStateChanged(ItemEvent e) {
+ //		if (e.getSource() == jComboBox_HokenjyaNumber) {
+ //			changedHokenjyaNumber(e);
+ //		}
+ //	}
+ //
+ //	public void actionPerformed(ActionEvent e) {
+ //		Object source = e.getSource();
+ //		if (source == jButton_End) {
+ //			logger.info(jButton_End.getText());
+ //			pushedEndButton(e);
+ //		}
+ //		if (source == jButton_Register) {
+ //			logger.info(jButton_Register.getText());
+ //			pushedRegisterButton(e);
+ //		}
+ //	}
+ //
+ //
+ //	// add h.yoshitama 2009/09/18
+ //	/**
+ //	 * セルの色に最新の状態を反映する。
+ //	 */
+ //	private void refreshTableCellColor() {
+ //
+ //		cellColors.clear();
+ //		for (int i = 0; i < table.getRowCount(); i++) {
+ //			cellColors.add(new JSimpleTableCellRendererData(COLOR_ABLE,new JSimpleTableCellPosition(i, 3)));
+ //			cellColors.add(new JSimpleTableCellRendererData(COLOR_ABLE,new JSimpleTableCellPosition(i, 4)));
+ //			cellColors.add(new JSimpleTableCellRendererData(COLOR_ABLE,new JSimpleTableCellPosition(i, 5)));
+ //			cellColors.add(new JSimpleTableCellRendererData(COLOR_ABLE,new JSimpleTableCellPosition(i, 6)));
+ //			cellColors.add(new JSimpleTableCellRendererData(COLOR_ABLE,new JSimpleTableCellPosition(i, 9)));
+ //			cellColors.add(new JSimpleTableCellRendererData(COLOR_ABLE,new JSimpleTableCellPosition(i, 10)));
+ //		}
+ //	}
+ //
+ //}
+ //
+ ////Source Code Version Tag System v1.00  -- Do not remove --
+ ////Product-Tag: {4F85C2F4EE-5847B3BB7A9-ADC5AC59E3-EF66F79A1}
+ //
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinMasterMaintenanceFrameData.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinMasterMaintenanceFrameData.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinMasterMaintenanceFrameData.java	Mon Mar 15 12:03:24 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinMasterMaintenanceFrameData.java	Tue Aug 11 17:55:30 2009
***************
*** 1,10 ****
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
  
- import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
  import jp.or.med.orca.jma_tokutei.common.validate.JValidate;
  
  /**
!  * 健診項目マスタメンテナンス画面データ
   */
  public class JKenshinMasterMaintenanceFrameData {
  	private String KensaKoumokuCode = new String("");
--- 1,9 ----
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
  
  import jp.or.med.orca.jma_tokutei.common.validate.JValidate;
  
  /**
!  * 健診項目マスタメンテナンス画面データ 
   */
  public class JKenshinMasterMaintenanceFrameData {
  	private String KensaKoumokuCode = new String("");
***************
*** 21,35 ****
  	private String kensaTanka = new String("");
  	private String kensaHouhou = new String("");
  	private String note = new String("");
- 	private String HokenjyaNumber = new String("");
- 
  	private boolean isValidateAsDataSet = false;
! 
  	/* Added 2008/03/11 若月  */
  	/* --------------------------------------------------- */
  	private String kensaCode = "";
  	/* --------------------------------------------------- */
! 
  	/**
  	 * @return the kensaKoumokuCode
  	 */
--- 20,32 ----
  	private String kensaTanka = new String("");
  	private String kensaHouhou = new String("");
  	private String note = new String("");
  	private boolean isValidateAsDataSet = false;
! 	
  	/* Added 2008/03/11 若月  */
  	/* --------------------------------------------------- */
  	private String kensaCode = "";
  	/* --------------------------------------------------- */
! 	
  	/**
  	 * @return the kensaKoumokuCode
  	 */
***************
*** 96,257 ****
  	public boolean isValidateAsDataSet() {
  		return isValidateAsDataSet;
  	}
! 
! 	/**
! 	 * @return the hokenjyaNumber
! 	 */
! 	public String getHokenjyaNumber() {
! 		return HokenjyaNumber;
! 	}
! 
! 	/**
! 	 * @param hokenjyaNumber the hokenjyaNumber to set
! 	 */
! 	public boolean setHokenjyaNumber(String hokenjyaNumber) {
! 		this.isValidateAsDataSet = false;
! 		this.HokenjyaNumber = JValidate.validateHokenjyaNumber(hokenjyaNumber);
! 
! 		if( this.HokenjyaNumber == null ) {
! 			JErrorMessage.show("M3101", null);
! 			return false;
! 		}
! 
! 		return true;
! 	}
  	/**
  	 * @param kensaKoumokuCode the kensaKoumokuCode to set
  	 */
  	public boolean setKensaKoumokuCode(String kensaKoumokuCode) {
  		this.isValidateAsDataSet = false;
  		this.KensaKoumokuCode = JValidate.validateKensaKoumokuCode(kensaKoumokuCode);
! 
  		if( this.KensaKoumokuCode == null ) {
  			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3801", null);
  			return false;
  		}
! 
  		return true;
  	}
! 
  	/**
  	 * @param kensaKoumokuName the kensaKoumokuName to set
  	 */
  	public boolean setKensaKoumokuName(String kensaKoumokuName) {
  		this.isValidateAsDataSet = false;
  		this.KensaKoumokuName = JValidate.validateKensaKoumokuName(kensaKoumokuName);
! 
  		if( this.KensaKoumokuName == null ) {
  			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3802", null);
  			return false;
  		}
! 
  		return true;
  	}
! 
  	/**
  	 * @param hisuFlag the hisuFlag to set
  	 */
  	public boolean setHisuFlag(String hisuFlag) {
  		this.isValidateAsDataSet = false;
  		this.HisuFlag =  JValidate.validateKenshinHisuFlag(hisuFlag);
! 
  		if( this.HisuFlag == null ) {
  			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3803", null);
  			return false;
  		}
! 
  		return true;
  	}
! 
  	/**
  	 * @param kagen the kagen to set
  	 */
  	public boolean setKagen(String kagen) {
  		this.isValidateAsDataSet = false;
  		this.kagen = JValidate.validateKensaResultLimit(kagen);
! 
  		if( this.kagen == null ) {
  			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3804", null);
  			return false;
  		}
! 
  		return true;
  	}
! 
  	/**
  	 * @param jyougen the jyougen to set
  	 */
  	public boolean setJyougen(String jyougen) {
  		this.isValidateAsDataSet = false;
  		this.jyougen = JValidate.validateKensaResultLimit(jyougen);
! 
  		if( this.jyougen == null ) {
  			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3805", null);
  			return false;
  		}
! 
  		return true;
  	}
! 
  	/**
  	 * @param tanni the tanni to set
  	 */
  	public boolean setTanni(String tanni) {
  		this.isValidateAsDataSet = false;
  		this.tanni = JValidate.validateKensaUnit(tanni);
! 
  		if( this.tanni == null ) {
  			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3809", null);
  			return false;
  		}
! 
  		return true;
  	}
! 
  	/**
  	 * @param kijyunchiHanni the kijyunchiHanni to set
  	 */
  	public boolean setKijyunchiHanni(String kijyunchiHanni) {
  		this.isValidateAsDataSet = false;
  		this.kijyunchiHanni = JValidate.validateKensaKijyunHanni(kijyunchiHanni);
! 
  		if( this.kijyunchiHanni == null ) {
  			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3810", null);
  			return false;
  		}
! 
  		return true;
  	}
! 
  	/**
  	 * @param kensaTanka the kensaTanka to set
  	 */
  	public boolean setKensaTanka(String kensaTanka) {
  		this.isValidateAsDataSet = false;
  		this.kensaTanka = JValidate.validateKensaTanka(kensaTanka);
! 
  		if( this.kensaTanka == null ) {
  			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3811", null);
  			return false;
  		}
! 
  		return true;
  	}
  
  	/* Added 2008/03/11 若月  */
! 	/* --------------------------------------------------- */
  	/**
  	 * @param cd the cd to set
  	 */
  	public boolean setKensaCd(String cd) {
  		this.isValidateAsDataSet = false;
  		//this.kensaCode = JValidate.validateKensaCd(cd);
! 
  		if( this.kensaCode == null ) {
  			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3812", null);
  			return false;
  		}
! 
  		return true;
  	}
  	/* --------------------------------------------------- */
--- 93,233 ----
  	public boolean isValidateAsDataSet() {
  		return isValidateAsDataSet;
  	}
! 	
  	/**
  	 * @param kensaKoumokuCode the kensaKoumokuCode to set
  	 */
  	public boolean setKensaKoumokuCode(String kensaKoumokuCode) {
  		this.isValidateAsDataSet = false;
  		this.KensaKoumokuCode = JValidate.validateKensaKoumokuCode(kensaKoumokuCode);
! 		
  		if( this.KensaKoumokuCode == null ) {
  			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3801", null);
  			return false;
  		}
! 		
  		return true;
  	}
! 	
  	/**
  	 * @param kensaKoumokuName the kensaKoumokuName to set
  	 */
  	public boolean setKensaKoumokuName(String kensaKoumokuName) {
  		this.isValidateAsDataSet = false;
  		this.KensaKoumokuName = JValidate.validateKensaKoumokuName(kensaKoumokuName);
! 		
  		if( this.KensaKoumokuName == null ) {
  			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3802", null);
  			return false;
  		}
! 		
  		return true;
  	}
! 	
  	/**
  	 * @param hisuFlag the hisuFlag to set
  	 */
  	public boolean setHisuFlag(String hisuFlag) {
  		this.isValidateAsDataSet = false;
  		this.HisuFlag =  JValidate.validateKenshinHisuFlag(hisuFlag);
! 		
  		if( this.HisuFlag == null ) {
  			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3803", null);
  			return false;
  		}
! 		
  		return true;
  	}
! 	
  	/**
  	 * @param kagen the kagen to set
  	 */
  	public boolean setKagen(String kagen) {
  		this.isValidateAsDataSet = false;
  		this.kagen = JValidate.validateKensaResultLimit(kagen);
! 		
  		if( this.kagen == null ) {
  			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3804", null);
  			return false;
  		}
! 		
  		return true;
  	}
! 	
  	/**
  	 * @param jyougen the jyougen to set
  	 */
  	public boolean setJyougen(String jyougen) {
  		this.isValidateAsDataSet = false;
  		this.jyougen = JValidate.validateKensaResultLimit(jyougen);
! 		
  		if( this.jyougen == null ) {
  			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3805", null);
  			return false;
  		}
! 		
  		return true;
  	}
! 	
  	/**
  	 * @param tanni the tanni to set
  	 */
  	public boolean setTanni(String tanni) {
  		this.isValidateAsDataSet = false;
  		this.tanni = JValidate.validateKensaUnit(tanni);
! 		
  		if( this.tanni == null ) {
  			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3809", null);
  			return false;
  		}
! 		
  		return true;
  	}
! 	
  	/**
  	 * @param kijyunchiHanni the kijyunchiHanni to set
  	 */
  	public boolean setKijyunchiHanni(String kijyunchiHanni) {
  		this.isValidateAsDataSet = false;
  		this.kijyunchiHanni = JValidate.validateKensaKijyunHanni(kijyunchiHanni);
! 		
  		if( this.kijyunchiHanni == null ) {
  			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3810", null);
  			return false;
  		}
! 		
  		return true;
  	}
! 	
  	/**
  	 * @param kensaTanka the kensaTanka to set
  	 */
  	public boolean setKensaTanka(String kensaTanka) {
  		this.isValidateAsDataSet = false;
  		this.kensaTanka = JValidate.validateKensaTanka(kensaTanka);
! 		
  		if( this.kensaTanka == null ) {
  			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3811", null);
  			return false;
  		}
! 		
  		return true;
  	}
  
  	/* Added 2008/03/11 若月  */
! 	/* --------------------------------------------------- */	
  	/**
  	 * @param cd the cd to set
  	 */
  	public boolean setKensaCd(String cd) {
  		this.isValidateAsDataSet = false;
  		//this.kensaCode = JValidate.validateKensaCd(cd);
! 		
  		if( this.kensaCode == null ) {
  			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3812", null);
  			return false;
  		}
! 		
  		return true;
  	}
  	/* --------------------------------------------------- */
***************
*** 262,293 ****
  	public boolean setKensaHouhou(String kensaHouhou) {
  		this.isValidateAsDataSet = false;
  		this.kensaHouhou = JValidate.validateKensaHouhou(kensaHouhou);
! 
  		if( this.kensaHouhou == null ) {
  			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3812", null);
  			return false;
  		}
! 
  		return true;
  	}
! 
  	/**
  	 * @param note the note to set
  	 */
  	public boolean setNote(String note) {
  		this.isValidateAsDataSet = false;
  		this.note = JValidate.validateNote(note);
! 
  		if( this.note == null ) {
  			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3813", null);
  			return false;
  		}
! 
  		return true;
  	}
! 
! 
! 
  	/**
  	 * @return the dsJyougen
  	 */
--- 238,269 ----
  	public boolean setKensaHouhou(String kensaHouhou) {
  		this.isValidateAsDataSet = false;
  		this.kensaHouhou = JValidate.validateKensaHouhou(kensaHouhou);
! 		
  		if( this.kensaHouhou == null ) {
  			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3812", null);
  			return false;
  		}
! 		
  		return true;
  	}
! 	
  	/**
  	 * @param note the note to set
  	 */
  	public boolean setNote(String note) {
  		this.isValidateAsDataSet = false;
  		this.note = JValidate.validateNote(note);
! 		
  		if( this.note == null ) {
  			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3813", null);
  			return false;
  		}
! 		
  		return true;
  	}
! 	
! 	
! 	
  	/**
  	 * @return the dsJyougen
  	 */
***************
*** 312,318 ****
  	public String getJsKagen() {
  		return jsKagen;
  	}
! 
  	/**
  	 * @param dsJyougen the dsJyougen to set
  	 */
--- 288,294 ----
  	public String getJsKagen() {
  		return jsKagen;
  	}
! 	
  	/**
  	 * @param dsJyougen the dsJyougen to set
  	 */
***************
*** 347,353 ****
  	public void setValidateAsDataSet() {
  		this.isValidateAsDataSet = true;
  	}
! 
  	/* Added 2008/03/11 若月  */
  	/* --------------------------------------------------- */
  	public String getKensaCode() {
--- 323,329 ----
  	public void setValidateAsDataSet() {
  		this.isValidateAsDataSet = true;
  	}
! 	
  	/* Added 2008/03/11 若月  */
  	/* --------------------------------------------------- */
  	public String getKensaCode() {
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceAddFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceAddFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceAddFrame.java	Mon Apr 19 19:09:28 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceAddFrame.java	Fri Oct 16 09:57:20 2009
***************
*** 11,17 ****
  import java.awt.Font;
  import java.awt.Color;
  import java.awt.event.*;
- 
  import javax.swing.JTextField;
  import java.awt.GridBagLayout;
  import java.awt.GridBagConstraints;
--- 11,16 ----
***************
*** 28,34 ****
  /**
   * 健診項目マスタメンテナンス
   */
! public class JKenshinPatternMaintenanceAddFrame extends JFrame implements ActionListener,KeyListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
--- 27,33 ----
  /**
   * 健診項目マスタメンテナンス
   */
! public class JKenshinPatternMaintenanceAddFrame extends JFrame implements ActionListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
***************
*** 133,141 ****
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
- 			jButton_End.setMnemonic(KeyEvent.VK_R);
  		}
  		return jButton_End;
  	}
--- 132,139 ----
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
  	}
***************
*** 360,366 ****
  	private ExtendedButton getJButton_Register() {
  		if (jButton_Register == null) {
  			jButton_Register = new ExtendedButton();
! 			jButton_Register.setText("登録(F12)");
  			jButton_Register.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Register.addActionListener(this);
  		}
--- 358,364 ----
  	private ExtendedButton getJButton_Register() {
  		if (jButton_Register == null) {
  			jButton_Register = new ExtendedButton();
! 			jButton_Register.setText("登録");
  			jButton_Register.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Register.addActionListener(this);
  		}
***************
*** 379,400 ****
  		}
  		return jPanel;
  	}
- 
- 	@Override
- 	public void keyPressed(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyReleased(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyTyped(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
  }
--- 377,380 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceAddFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceAddFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceAddFrameCtrl.java	Wed Apr 21 11:02:08 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceAddFrameCtrl.java	Mon Nov  9 16:18:10 2009
***************
*** 1,12 ****
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
  
- import java.awt.Component;
  import java.awt.event.*;
  import java.sql.SQLException;
  import java.util.ArrayList;
  
- import org.apache.log4j.Logger;
- 
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
  import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
  import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
--- 1,9 ----
***************
*** 32,39 ****
  	/* フォーカス移動制御 */
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
  
- 	private static Logger logger = Logger.getLogger(JKenshinPatternMaintenanceAddFrameCtrl.class);
- 
  	/**
  	 * 登録ボタンを押した際の必須項目等を検証
  	 */
--- 29,34 ----
***************
*** 81,92 ****
  		this.focusTraversalPolicy.addComponent(jButton_End);
  
  		this.jTextField_PetternName.grabFocus();
- 
- 		// add s.inoue 2009/12/03
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			Component comp = focusTraversalPolicy.getComponent(i);
- 			comp.addKeyListener(this);
- 		}
  	}
  
  	/**
--- 76,81 ----
***************
*** 120,129 ****
  								JQueryConvert.queryConvert(validatedData.getPatternName()));
  
  						if (kikanItem.size() > 0){
! 							// edit s.inoue 2010/04/21
! 							mode = EDIT_MODE;
! 							// JErrorMessage.show("M9637", this);
! 							// return;
  						}
  
  					}catch(Exception err){
--- 109,116 ----
  								JQueryConvert.queryConvert(validatedData.getPatternName()));
  
  						if (kikanItem.size() > 0){
! 							JErrorMessage.show("M9637", this);
! 							return;
  						}
  
  					}catch(Exception err){
***************
*** 173,199 ****
  		Object source = e.getSource();
  		if( source == jButton_End )
  		{
- 			logger.info(jButton_End.getText());
  			pushedEndButton( e );
  		}
  		else if( source == jButton_Register)
  		{
- 			logger.info(jButton_Register.getText());
  			pushedRegisterButton( e );
  		}
  	}
- 
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 		switch(keyEvent.getKeyCode()){
- 		case KeyEvent.VK_F1:
- 			logger.info(jButton_End.getText());
- 			pushedEndButton(null);break;
- 		case KeyEvent.VK_F12:
- 			logger.info(jButton_Register.getText());
- 			pushedRegisterButton(null);break;
- 		}
- 	}
  }
  
  
--- 160,173 ----
  		Object source = e.getSource();
  		if( source == jButton_End )
  		{
  			pushedEndButton( e );
  		}
+ 
  		else if( source == jButton_Register)
  		{
  			pushedRegisterButton( e );
  		}
  	}
  }
  
  
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceCopyFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceCopyFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceCopyFrame.java	Mon Apr 19 19:10:14 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceCopyFrame.java	Tue Aug 11 17:55:30 2009
***************
*** 5,52 ****
  import javax.swing.JFrame;
  import java.awt.GridBagLayout;
  import java.awt.GridLayout;
  import javax.swing.SwingConstants;
  import java.awt.CardLayout;
  import java.awt.GridBagConstraints;
  import java.awt.Font;
  import java.awt.event.*;
  import javax.swing.JTextField;
  import java.awt.Dimension;
  
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedButton;
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedComboBox;
- import jp.or.med.orca.jma_tokutei.common.component.ExtendedLabel;
- import jp.or.med.orca.jma_tokutei.common.component.ExtendedTextField;
  import jp.or.med.orca.jma_tokutei.common.component.TitleLabel;
- import jp.or.med.orca.jma_tokutei.common.component.ImeController.ImeMode;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettingsKey;
  
  import javax.swing.BorderFactory;
  
! public class JKenshinPatternMaintenanceCopyFrame extends JFrame implements ActionListener,KeyListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
  	protected JPanel jPanel_ButtonArea = null;
  	protected JPanel jPanel_NaviArea = null;
  	protected JPanel jPanel_TitleArea = null;
  	protected JPanel jPanel_ExplArea2 = null;
  	protected JPanel jPanel_ExplArea1 = null;
  	protected JPanel jPanel_MainArea = null;
  	protected JPanel jPanel_DrawArea = null;
- 	protected ExtendedButton jButton_End = null;
- 	protected ExtendedButton jButton_OK = null;
  	protected ExtendedComboBox jComboBox_Target = null;
! 	protected ExtendedTextField jTextField_Name = null;
! 	protected ExtendedTextField jTextField_Note = null;
! 	protected ExtendedLabel jLabel_Title = null;
! 	protected ExtendedLabel jLabel_MainExpl = null;
! 	protected ExtendedLabel jLabal_SubExpl = null;
! 	private ExtendedLabel jLabel5 = null;
! 	private ExtendedLabel jLabel6 = null;
! 	private ExtendedLabel jLabel7 = null;
! 	private ExtendedLabel jLabel8 = null;
  	private JPanel jPanel = null;
  	/**
  	 * This is the default constructor
--- 5,54 ----
  import javax.swing.JFrame;
  import java.awt.GridBagLayout;
  import java.awt.GridLayout;
+ import java.awt.FlowLayout;
  import javax.swing.SwingConstants;
+ import javax.swing.JLabel;
  import java.awt.CardLayout;
  import java.awt.GridBagConstraints;
  import java.awt.Font;
+ import java.awt.Color;
  import java.awt.event.*;
+ import javax.swing.JComboBox;
  import javax.swing.JTextField;
  import java.awt.Dimension;
  
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedButton;
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedComboBox;
  import jp.or.med.orca.jma_tokutei.common.component.TitleLabel;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettingsKey;
  
+ import java.awt.Insets;
  import javax.swing.BorderFactory;
  
! public class JKenshinPatternMaintenanceCopyFrame extends JFrame implements ActionListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
  	protected JPanel jPanel_ButtonArea = null;
+ 	protected ExtendedButton jButton_End = null;
  	protected JPanel jPanel_NaviArea = null;
+ 	protected JLabel jLabel_Title = null;
+ 	protected JLabel jLabel_MainExpl = null;
  	protected JPanel jPanel_TitleArea = null;
  	protected JPanel jPanel_ExplArea2 = null;
+ 	protected JLabel jLabal_SubExpl = null;
  	protected JPanel jPanel_ExplArea1 = null;
  	protected JPanel jPanel_MainArea = null;
  	protected JPanel jPanel_DrawArea = null;
  	protected ExtendedComboBox jComboBox_Target = null;
! 	protected JTextField jTextField_Name = null;
! 	protected ExtendedButton jButton_OK = null;
! 	protected JTextField jTextField_Note = null;
! 	private JLabel jLabel5 = null;
! 	private JLabel jLabel6 = null;
! 	private JLabel jLabel7 = null;
! 	private JLabel jLabel8 = null;
  	private JPanel jPanel = null;
  	/**
  	 * This is the default constructor
***************
*** 122,128 ****
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
--- 124,130 ----
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("キャンセル");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
***************
*** 138,144 ****
  			CardLayout cardLayout2 = new CardLayout();
  			cardLayout2.setHgap(10);
  			cardLayout2.setVgap(10);
! 			jLabel_MainExpl = new ExtendedLabel();
  			jLabel_MainExpl.setText("複製するパターンを選択して、名称を入力します。");
  			jLabel_MainExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
  			jLabel_MainExpl.setName("jLabel1");
--- 140,146 ----
  			CardLayout cardLayout2 = new CardLayout();
  			cardLayout2.setHgap(10);
  			cardLayout2.setVgap(10);
! 			jLabel_MainExpl = new JLabel();
  			jLabel_MainExpl.setText("複製するパターンを選択して、名称を入力します。");
  			jLabel_MainExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
  			jLabel_MainExpl.setName("jLabel1");
***************
*** 186,192 ****
  	 */
  	private JPanel getJPanel_ExplArea2() {
  		if (jPanel_ExplArea2 == null) {
! 			jLabal_SubExpl = new ExtendedLabel();
  			jLabal_SubExpl.setText("決定ボタンを押すと、健診パターンを複製します。");
  			jLabal_SubExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
  			GridLayout gridLayout1 = new GridLayout();
--- 188,194 ----
  	 */
  	private JPanel getJPanel_ExplArea2() {
  		if (jPanel_ExplArea2 == null) {
! 			jLabal_SubExpl = new JLabel();
  			jLabal_SubExpl.setText("決定ボタンを押すと、健診パターンを複製します。");
  			jLabal_SubExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
  			GridLayout gridLayout1 = new GridLayout();
***************
*** 274,289 ****
  			gridBagConstraints.anchor = GridBagConstraints.WEST;
  			gridBagConstraints.weightx = 1.0D;
  			gridBagConstraints.gridy = 0;
! 			jLabel8 = new ExtendedLabel();
  			jLabel8.setText("備考");
  			jLabel8.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jLabel7 = new ExtendedLabel();
  			jLabel7.setText("複製先につける名称");
  			jLabel7.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jLabel6 = new ExtendedLabel();
  			jLabel6.setText("↓");
  			jLabel6.setFont(new Font("Dialog", Font.BOLD, 24));
! 			jLabel5 = new ExtendedLabel();
  			jLabel5.setText("パターン名");
  			jLabel5.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jPanel_DrawArea = new JPanel();
--- 276,291 ----
  			gridBagConstraints.anchor = GridBagConstraints.WEST;
  			gridBagConstraints.weightx = 1.0D;
  			gridBagConstraints.gridy = 0;
! 			jLabel8 = new JLabel();
  			jLabel8.setText("備考");
  			jLabel8.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jLabel7 = new JLabel();
  			jLabel7.setText("複製先につける名称");
  			jLabel7.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jLabel6 = new JLabel();
  			jLabel6.setText("↓");
  			jLabel6.setFont(new Font("Dialog", Font.BOLD, 24));
! 			jLabel5 = new JLabel();
  			jLabel5.setText("パターン名");
  			jLabel5.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jPanel_DrawArea = new JPanel();
***************
*** 324,332 ****
  	 *
  	 * @return javax.swing.JTextField
  	 */
! 	private ExtendedTextField getJTextField_Name() {
  		if (jTextField_Name == null) {
! 			jTextField_Name = new ExtendedTextField("", 200, ImeMode.IME_ZENKAKU);
  		}
  		return jTextField_Name;
  	}
--- 326,334 ----
  	 *
  	 * @return javax.swing.JTextField
  	 */
! 	private JTextField getJTextField_Name() {
  		if (jTextField_Name == null) {
! 			jTextField_Name = new JTextField();
  		}
  		return jTextField_Name;
  	}
***************
*** 339,345 ****
  	private ExtendedButton getJButton_OK() {
  		if (jButton_OK == null) {
  			jButton_OK = new ExtendedButton();
! 			jButton_OK.setText("登録(F12)");
  			jButton_OK.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_OK.addActionListener(this);
  		}
--- 341,347 ----
  	private ExtendedButton getJButton_OK() {
  		if (jButton_OK == null) {
  			jButton_OK = new ExtendedButton();
! 			jButton_OK.setText("登録");
  			jButton_OK.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_OK.addActionListener(this);
  		}
***************
*** 351,359 ****
  	 *
  	 * @return javax.swing.JTextField
  	 */
! 	private ExtendedTextField getJTextField_Note() {
  		if (jTextField_Note == null) {
! 			jTextField_Note = new ExtendedTextField("", 200, ImeMode.IME_ZENKAKU);
  		}
  		return jTextField_Note;
  	}
--- 353,361 ----
  	 *
  	 * @return javax.swing.JTextField
  	 */
! 	private JTextField getJTextField_Note() {
  		if (jTextField_Note == null) {
! 			jTextField_Note = new JTextField();
  		}
  		return jTextField_Note;
  	}
***************
*** 370,391 ****
  		}
  		return jPanel;
  	}
- 
- 	@Override
- 	public void keyPressed(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyReleased(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyTyped(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
  }
--- 372,375 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceCopyFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceCopyFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceCopyFrameCtrl.java	Mon Apr 19 18:09:38 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceCopyFrameCtrl.java	Mon Nov  9 16:18:10 2009
***************
*** 1,12 ****
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
  
- import java.awt.Component;
  import java.awt.event.*;
  import java.sql.SQLException;
  import java.util.*;
  
- import org.apache.log4j.Logger;
- 
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
  import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
  import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
--- 1,9 ----
***************
*** 26,33 ****
  	private JKenshinPatternMaintenanceCopyFrameData validatedData =
  		new JKenshinPatternMaintenanceCopyFrameData();
  
- 	private static Logger logger = Logger.getLogger(JKenshinPatternMaintenanceCopyFrameCtrl.class);
- 
  	// OKボタンを押した際の必須項目を検証する
  	protected boolean validateAsOKPushed(
  			JKenshinPatternMaintenanceCopyFrameData data) {
--- 23,28 ----
***************
*** 68,80 ****
  		this.focusTraversalPolicy.addComponent(this.jTextField_Note);
  		this.focusTraversalPolicy.addComponent(this.jButton_OK);
  		this.focusTraversalPolicy.addComponent(jButton_End);
- 		this.focusTraversalPolicy.addComponent(this.jComboBox_Target);
- 
- 		// add s.inoue 2009/12/03
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			Component comp = focusTraversalPolicy.getComponent(i);
- 			comp.addKeyListener(this);
- 		}
  
  		/* パターン選択欄を初期化する。 */
  		this.initializePatternComboBox(nextNumber, currentNo);
--- 63,68 ----
***************
*** 134,141 ****
  			this.jComboBox_Target.setSelectedIndex(selectedIndex);
  		}
  
! 		// del s.inoue 2009/12/03
! 		// this.jComboBox_Target.transferFocus();
  
  		return success;
  	}
--- 122,128 ----
  			this.jComboBox_Target.setSelectedIndex(selectedIndex);
  		}
  
! 		this.jComboBox_Target.transferFocus();
  
  		return success;
  	}
***************
*** 279,304 ****
  
  	public void actionPerformed(ActionEvent e) {
  		if (e.getSource() == jButton_End) {
- 			logger.info(jButton_End.getText());
  			pushedEndButton(e);
  		} else if (e.getSource() == jButton_OK) {
- 			logger.info(jButton_OK);
  			pushedOKButton(e);
  		}
  	}
- 
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 		switch(keyEvent.getKeyCode()){
- 		case KeyEvent.VK_F1:
- 			logger.info(jButton_End.getText());
- 			pushedEndButton(null);break;
- 		case KeyEvent.VK_F12:
- 			logger.info(jButton_OK.getText());
- 			pushedOKButton(null);break;
- 		}
- 	}
- 
  }
  
  //Source Code Version Tag System v1.00  -- Do not remove --
--- 266,276 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceEditFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceEditFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceEditFrame.java	Wed Apr 21 17:51:52 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceEditFrame.java	Mon Oct 19 14:52:58 2009
***************
*** 14,34 ****
  import java.awt.Rectangle;
  import javax.swing.JTextField;
  import java.awt.event.*;
- 
  import javax.swing.BoxLayout;
  import java.awt.GridBagConstraints;
  import java.awt.Insets;
  import java.awt.Dimension;
  
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedButton;
- import jp.or.med.orca.jma_tokutei.common.component.ExtendedLabel;
  import jp.or.med.orca.jma_tokutei.common.component.TitleLabel;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettingsKey;
  
  import javax.swing.BorderFactory;
  
! public class JKenshinPatternMaintenanceEditFrame extends JFrame implements ActionListener,KeyListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
--- 14,32 ----
  import java.awt.Rectangle;
  import javax.swing.JTextField;
  import java.awt.event.*;
  import javax.swing.BoxLayout;
  import java.awt.GridBagConstraints;
  import java.awt.Insets;
  import java.awt.Dimension;
  
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedButton;
  import jp.or.med.orca.jma_tokutei.common.component.TitleLabel;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettingsKey;
  
  import javax.swing.BorderFactory;
  
! public class JKenshinPatternMaintenanceEditFrame extends JFrame implements ActionListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
***************
*** 59,72 ****
  	protected JPanel jPanel_Left = null;
  	protected JPanel jPanel_Right = null;
  	protected ExtendedButton jButton_Clear = null;
- 
  	// 20090707
  	protected ExtendedButton jButton_ToTop = null;
  	protected ExtendedButton jButton_ToDown = null;
- 	protected JLabel jLabel_Info1 = null;
- 	protected JLabel jLabel_Info2 = null;
- 	protected JLabel jLabel_Info3 = null;
- 	protected JLabel jLabel_Info4 = null;
  
  	/**
  	 * This is the default constructor
--- 57,65 ----
***************
*** 119,143 ****
  			gridBagConstraints8.gridx = 0;
  			GridBagConstraints gridBagConstraints7 = new GridBagConstraints();
  			gridBagConstraints7.gridy = 0;
! 			gridBagConstraints7.gridx = 4;
  			GridBagConstraints gridBagConstraints6 = new GridBagConstraints();
  			gridBagConstraints6.gridy = 0;
- 			gridBagConstraints6.weightx = 1.0D;
- 			gridBagConstraints6.anchor = GridBagConstraints.EAST;
- 			gridBagConstraints6.gridx = 2;
  			gridBagConstraints6.insets = new Insets(0, 5, 0, 0);
! 
  			GridBagConstraints gridBagConstraints5 = new GridBagConstraints();
- 			gridBagConstraints5.insets = new Insets(0, 5, 0, 0);
  			gridBagConstraints5.gridy = 0;
! 			gridBagConstraints5.gridx = 3;
! 
  			jPanel_ButtonArea = new JPanel();
  			jPanel_ButtonArea.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
  			jPanel_ButtonArea.setLayout(new GridBagLayout());
- 			jPanel_ButtonArea.add(getJButton_Cancel(), gridBagConstraints7);
  			jPanel_ButtonArea.add(getJButton_Register(), gridBagConstraints5);
  			jPanel_ButtonArea.add(getJButton_Clear(), gridBagConstraints6);
  			jPanel_ButtonArea.add(getJButton_End(), gridBagConstraints8);
  		}
  		return jPanel_ButtonArea;
--- 112,133 ----
  			gridBagConstraints8.gridx = 0;
  			GridBagConstraints gridBagConstraints7 = new GridBagConstraints();
  			gridBagConstraints7.gridy = 0;
! 			gridBagConstraints7.gridx = 3;
  			GridBagConstraints gridBagConstraints6 = new GridBagConstraints();
  			gridBagConstraints6.gridy = 0;
  			gridBagConstraints6.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints6.gridx = 2;
  			GridBagConstraints gridBagConstraints5 = new GridBagConstraints();
  			gridBagConstraints5.gridy = 0;
! 			gridBagConstraints5.weightx = 1.0D;
! 			gridBagConstraints5.anchor = GridBagConstraints.EAST;
! 			gridBagConstraints5.gridx = 1;
  			jPanel_ButtonArea = new JPanel();
  			jPanel_ButtonArea.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
  			jPanel_ButtonArea.setLayout(new GridBagLayout());
  			jPanel_ButtonArea.add(getJButton_Register(), gridBagConstraints5);
  			jPanel_ButtonArea.add(getJButton_Clear(), gridBagConstraints6);
+ 			jPanel_ButtonArea.add(getJButton_Cancel(), gridBagConstraints7);
  			jPanel_ButtonArea.add(getJButton_End(), gridBagConstraints8);
  		}
  		return jPanel_ButtonArea;
***************
*** 154,162 ****
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
- 			jButton_End.setMnemonic(KeyEvent.VK_R);
  		}
  		return jButton_End;
  	}
--- 144,151 ----
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
  	}
***************
*** 275,281 ****
  	private ExtendedButton getJButton_Register() {
  		if (jButton_Register == null) {
  			jButton_Register = new ExtendedButton();
! 			jButton_Register.setText("登録(F12)");
  			jButton_Register.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Register.addActionListener(this);
  		}
--- 264,270 ----
  	private ExtendedButton getJButton_Register() {
  		if (jButton_Register == null) {
  			jButton_Register = new ExtendedButton();
! 			jButton_Register.setText("登録");
  			jButton_Register.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Register.addActionListener(this);
  		}
***************
*** 359,421 ****
  	 */
  	private JPanel getJPanel3() {
  		if (jPanel3 == null) {
! 			GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
! 			gridBagConstraints2.insets = new Insets(20, 20, 0, 20);
! 			gridBagConstraints2.gridx = 0;
! 			gridBagConstraints2.gridy = 0;
! 
  			GridBagConstraints gridBagConstraints3 = new GridBagConstraints();
  			gridBagConstraints3.insets = new Insets(0, 20, 0, 20);
  			gridBagConstraints3.gridx = 0;
! 			gridBagConstraints3.gridy = 2;
! 
! 			GridBagConstraints gridBagConstraints4 = new GridBagConstraints();
! 			gridBagConstraints4.insets = new Insets(0, 20, 0, 20);
! 			gridBagConstraints4.gridx = 0;
! 			gridBagConstraints4.gridy = 4;
! 
  			GridBagConstraints gridBagConstraints5 = new GridBagConstraints();
! 			gridBagConstraints5.insets = new Insets(0, 20, 0, 20);
  			gridBagConstraints5.gridx = 0;
! 			gridBagConstraints5.gridy = 6;
! 
! 			// add s.inoue 2009/12/02
! 			GridBagConstraints gridBagConstraints6 = new GridBagConstraints();
! 			gridBagConstraints6.insets = new Insets(0, 0, 20, 0);
! 			gridBagConstraints6.gridx = 0;
! 			gridBagConstraints6.gridy = 1;
! 			// add s.inoue 2009/12/02
! 			GridBagConstraints gridBagConstraints7 = new GridBagConstraints();
! 			gridBagConstraints7.insets = new Insets(0, 0, 20, 0);
! 			gridBagConstraints7.gridx = 0;
! 			gridBagConstraints7.gridy = 3;
! 
! 			// add s.inoue 2009/12/02
! 			GridBagConstraints gridBagConstraints8 = new GridBagConstraints();
! 			gridBagConstraints8.insets = new Insets(0, 0, 20, 0);
! 			gridBagConstraints8.gridx = 0;
! 			gridBagConstraints8.gridy = 5;
! 
! 			// add s.inoue 2009/12/02
! 			GridBagConstraints gridBagConstraints9= new GridBagConstraints();
! 			gridBagConstraints9.insets = new Insets(0, 0, 20, 0);
! 			gridBagConstraints9.gridx = 0;
! 			gridBagConstraints9.gridy = 7;
  
  			jPanel3 = new JPanel();
! 			jPanel3.setPreferredSize(new Dimension(80, 300));
  			jPanel3.setLayout(new GridBagLayout());
  			jPanel3.add(getJButton_ToLeft(), gridBagConstraints3);
  			jPanel3.add(getJButton_ToRight(), gridBagConstraints4);
  			// 20090707
  			jPanel3.add(getJButton_ToTop(), gridBagConstraints2);
  			jPanel3.add(getJButton_ToDown(), gridBagConstraints5);
- 
- 			// add s.inoue 2009/12/02
- 			jPanel3.add(getJLabel_Info1(),gridBagConstraints6);
- 			jPanel3.add(getJLabel_Info2(),gridBagConstraints7);
- 			jPanel3.add(getJLabel_Info3(),gridBagConstraints8);
- 			jPanel3.add(getJLabel_Info4(),gridBagConstraints9);
  		}
  		return jPanel3;
  	}
--- 348,379 ----
  	 */
  	private JPanel getJPanel3() {
  		if (jPanel3 == null) {
! 			GridBagConstraints gridBagConstraints4 = new GridBagConstraints();
! 			gridBagConstraints4.insets = new Insets(50, 20, 0, 20);
! 			gridBagConstraints4.gridy = 2;
! 			gridBagConstraints4.gridx = 0;
  			GridBagConstraints gridBagConstraints3 = new GridBagConstraints();
  			gridBagConstraints3.insets = new Insets(0, 20, 0, 20);
+ 			gridBagConstraints3.gridy = 1;
  			gridBagConstraints3.gridx = 0;
! 			// 20090707
! 			GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
! 			gridBagConstraints2.insets = new Insets(50, 20, 20, 20);
! 			gridBagConstraints2.gridx = 0;
! 			gridBagConstraints2.gridy = 0;
  			GridBagConstraints gridBagConstraints5 = new GridBagConstraints();
! 			gridBagConstraints5.insets = new Insets(20, 20, 20, 20);
  			gridBagConstraints5.gridx = 0;
! 			gridBagConstraints5.gridy = 3;
  
  			jPanel3 = new JPanel();
! 			jPanel3.setPreferredSize(new Dimension(80, 294));
  			jPanel3.setLayout(new GridBagLayout());
  			jPanel3.add(getJButton_ToLeft(), gridBagConstraints3);
  			jPanel3.add(getJButton_ToRight(), gridBagConstraints4);
  			// 20090707
  			jPanel3.add(getJButton_ToTop(), gridBagConstraints2);
  			jPanel3.add(getJButton_ToDown(), gridBagConstraints5);
  		}
  		return jPanel3;
  	}
***************
*** 432,442 ****
  			jButton_ToTop.setFont(new Font("Dialog", Font.PLAIN, 24));
  			jButton_ToTop.setText("↑");
  			jButton_ToTop.addActionListener(this);
- 			jButton_ToTop.setMnemonic(KeyEvent.VK_W);
  		}
  		return jButton_ToTop;
  	}
  
  	/**
  	 * This method initializes jButton_ToTop
  	 *
--- 390,400 ----
  			jButton_ToTop.setFont(new Font("Dialog", Font.PLAIN, 24));
  			jButton_ToTop.setText("↑");
  			jButton_ToTop.addActionListener(this);
  		}
  		return jButton_ToTop;
  	}
  
+ 	// 20090707
  	/**
  	 * This method initializes jButton_ToTop
  	 *
***************
*** 449,455 ****
  			jButton_ToDown.setFont(new Font("Dialog", Font.PLAIN, 24));
  			jButton_ToDown.setText("↓");
  			jButton_ToDown.addActionListener(this);
- 			jButton_ToDown.setMnemonic(KeyEvent.VK_Z);
  		}
  		return jButton_ToDown;
  	}
--- 407,412 ----
***************
*** 465,471 ****
  			jButton_ToLeft.setFont(new Font("Dialog", Font.PLAIN, 24));
  			jButton_ToLeft.setText("←");
  			jButton_ToLeft.addActionListener(this);
- 			jButton_ToLeft.setMnemonic(KeyEvent.VK_A);
  		}
  		return jButton_ToLeft;
  	}
--- 422,427 ----
***************
*** 482,548 ****
  			jButton_ToRight.setFont(new Font("Dialog", Font.PLAIN, 24));
  			jButton_ToRight.setText("→");
  			jButton_ToRight.addActionListener(this);
- 			jButton_ToRight.setMnemonic(KeyEvent.VK_S);
  		}
  		return jButton_ToRight;
  	}
  
  	/**
- 	 * This method initializes jButton_ToTop
- 	 *
- 	 * @return javax.swing.ExtendedButton
- 	 */
- 	private JLabel getJLabel_Info1() {
- 		if (jLabel_Info1 == null) {
- 			jLabel_Info1 = new JLabel();
- 			jLabel_Info1.setFont(new Font("Dialog", Font.PLAIN, 10));
- 			jLabel_Info1.setText("(Alt+W)");
- 		}
- 		return jLabel_Info1;
- 	}
- 
- 	/**
- 	 * This method initializes jButton_ToTop
- 	 *
- 	 * @return javax.swing.ExtendedButton
- 	 */
- 	private JLabel getJLabel_Info2() {
- 		if (jLabel_Info2 == null) {
- 			jLabel_Info2 = new JLabel();
- 			jLabel_Info2.setFont(new Font("Dialog", Font.PLAIN, 10));
- 			jLabel_Info2.setText("(Alt+A)");
- 		}
- 		return jLabel_Info2;
- 	}
- 
- 	/**
- 	 * This method initializes jButton_ToTop
- 	 *
- 	 * @return javax.swing.ExtendedButton
- 	 */
- 	private JLabel getJLabel_Info3() {
- 		if (jLabel_Info3 == null) {
- 			jLabel_Info3 = new JLabel();
- 			jLabel_Info3.setFont(new Font("Dialog", Font.PLAIN, 10));
- 			jLabel_Info3.setText("(Alt+S)");
- 		}
- 		return jLabel_Info3;
- 	}
- 
- 	/**
- 	 * This method initializes jButton_ToTop
- 	 *
- 	 * @return javax.swing.ExtendedButton
- 	 */
- 	private JLabel getJLabel_Info4() {
- 		if (jLabel_Info4 == null) {
- 			jLabel_Info4 = new JLabel();
- 			jLabel_Info4.setFont(new Font("Dialog", Font.PLAIN, 10));
- 			jLabel_Info4.setText("(Alt+Z)");
- 		}
- 		return jLabel_Info4;
- 	}
- 	/**
  	 * This method initializes jPanel10
  	 *
  	 * @return javax.swing.JPanel
--- 438,448 ----
***************
*** 663,691 ****
  	private ExtendedButton getJButton_Clear() {
  		if (jButton_Clear == null) {
  			jButton_Clear = new ExtendedButton();
! 			jButton_Clear.setText("操作取消(F11)");
! 			jButton_Clear.setPreferredSize(new Dimension(120, 25));
  			jButton_Clear.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Clear.addActionListener(this);
  		}
  		return jButton_Clear;
  	}
- 
- 	@Override
- 	public void keyPressed(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyReleased(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyTyped(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
  }
\ No newline at end of file
--- 563,573 ----
  	private ExtendedButton getJButton_Clear() {
  		if (jButton_Clear == null) {
  			jButton_Clear = new ExtendedButton();
! 			jButton_Clear.setText("操作取り消し");
! 			jButton_Clear.setPreferredSize(new Dimension(100, 25));
  			jButton_Clear.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Clear.addActionListener(this);
  		}
  		return jButton_Clear;
  	}
  }
\ No newline at end of file
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceEditFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceEditFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceEditFrameCtrl.java	Wed Apr 21 15:51:54 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceEditFrameCtrl.java	Tue Nov 17 09:30:16 2009
***************
*** 1,16 ****
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
  
- import java.awt.Component;
  import java.awt.event.ActionEvent;
- import java.awt.event.KeyEvent;
  import java.sql.SQLException;
  import java.util.ArrayList;
- import java.util.HashSet;
  import java.util.Hashtable;
  import java.util.Iterator;
  
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
- import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
  import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTable;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellPosition;
--- 1,12 ----
***************
*** 22,29 ****
  import javax.swing.table.DefaultTableCellRenderer;
  import javax.swing.table.TableColumnModel;
  
- import org.apache.log4j.Logger;
- 
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellRowRenderer;
  
  /**
--- 18,23 ----
***************
*** 31,50 ****
   */
  public class JKenshinPatternMaintenanceEditFrameCtrl extends JKenshinPatternMaintenanceEditFrame
  {
- 
- 	// add h.yoshitama 2009/11/19
- 	private static final String CODE_METABO_HANTEI = "9N501000000000011";
- 	private static final String CODE_HOKEN_SHIDOU = "9N506000000000011";
- 
  	private String patternNumber = null;
  	private JSimpleTable leftTable = new JSimpleTable();
  	private JSimpleTable rightTable = new JSimpleTable();
- 
  	/* フォーカス移動制御 */
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
  
- 	private static Logger logger = Logger.getLogger(JKenshinPatternMaintenanceEditFrameCtrl.class);
- 
  	/**
  	 * @param PatternNum 編集する健診パターンの番号
  	 */
--- 25,36 ----
***************
*** 95,133 ****
  		rightTable.setSelectionMode(ListSelectionModel.SINGLE_INTERVAL_SELECTION);
  
  		refreshTable();
- 		// add h.yoshitama 2009/11/20
- 		updateButtonsState();
  
  		// focus制御
  		// edit s.inoue 2009/10/07
! 		// edit h.yoshitama 2009/11/20
! 		if((patternNumber.equals("1"))||(patternNumber.equals("2"))){
! 			this.focusTraversalPolicy = new JFocusTraversalPolicy();
! 			this.setFocusTraversalPolicy(this.focusTraversalPolicy);
! 			this.focusTraversalPolicy.setDefaultComponent(jButton_End);
! 			this.focusTraversalPolicy.addComponent(jButton_End);
! 		}else{
! 			this.focusTraversalPolicy = new JFocusTraversalPolicy();
! 			this.setFocusTraversalPolicy(this.focusTraversalPolicy);
! 			this.focusTraversalPolicy.setDefaultComponent(jButton_ToTop);
! 			this.focusTraversalPolicy.addComponent(jButton_ToTop);
! 			this.focusTraversalPolicy.addComponent(jButton_ToLeft);
! 			this.focusTraversalPolicy.addComponent(jButton_ToRight);
! 			this.focusTraversalPolicy.addComponent(jButton_ToDown);
! 			this.focusTraversalPolicy.addComponent(jButton_Register);
! 			this.focusTraversalPolicy.addComponent(jButton_Clear);
! 			this.focusTraversalPolicy.addComponent(jButton_End);
! 
! 		}
! 
! 		// add s.inoue 2009/12/02
! 		Component comp =null;
! 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
! 			comp = focusTraversalPolicy.getComponent(i);
! 			comp.addKeyListener(this);
! 		}
! 		leftTable.addKeyListener(this);
! 		rightTable.addKeyListener(this);
  	}
  
  	/**
--- 81,99 ----
  		rightTable.setSelectionMode(ListSelectionModel.SINGLE_INTERVAL_SELECTION);
  
  		refreshTable();
  
  		// focus制御
  		// edit s.inoue 2009/10/07
! 		this.focusTraversalPolicy = new JFocusTraversalPolicy();
! 		this.setFocusTraversalPolicy(this.focusTraversalPolicy);
! 		this.focusTraversalPolicy.setDefaultComponent(jButton_ToTop);
! 		this.focusTraversalPolicy.addComponent(jButton_ToTop);
! 		this.focusTraversalPolicy.addComponent(jButton_ToLeft);
! 		this.focusTraversalPolicy.addComponent(jButton_ToRight);
! 		this.focusTraversalPolicy.addComponent(jButton_ToDown);
! 		this.focusTraversalPolicy.addComponent(jButton_Register);
! 		this.focusTraversalPolicy.addComponent(jButton_Clear);
! 		this.focusTraversalPolicy.addComponent(jButton_End);
  	}
  
  	/**
***************
*** 135,143 ****
  	 */
  	public void refreshTable()
  	{
! 		ArrayList<Hashtable<String,String>> result = new ArrayList<Hashtable<String,String>>();
! 		Hashtable<String,String> resultItem = new Hashtable<String,String>();
! 		String query = null;
  		String[] row = new String[3];
  
  		leftTable.clearAllRow();
--- 101,109 ----
  	 */
  	public void refreshTable()
  	{
! 		ArrayList<Hashtable<String,String>> Result = new ArrayList<Hashtable<String,String>>();
! 		Hashtable<String,String> ResultItem = new Hashtable<String,String>();
! 		String Query = null;
  		String[] row = new String[3];
  
  		leftTable.clearAllRow();
***************
*** 147,153 ****
  
  		try{
  			//左のテーブルの初期設定
! 			query =
  				"SELECT master.KOUMOKU_CD,master.KOUMOKU_NAME,master.KENSA_HOUHOU " +
  									"FROM T_KENSHINMASTER master " +
  									"INNER JOIN " +
--- 113,119 ----
  
  		try{
  			//左のテーブルの初期設定
! 			Query =
  				"SELECT master.KOUMOKU_CD,master.KOUMOKU_NAME,master.KENSA_HOUHOU " +
  									"FROM T_KENSHINMASTER master " +
  									"INNER JOIN " +
***************
*** 158,216 ****
  									"master.HKNJANUM = " + JQueryConvert.queryConvert("99999999") + " " +
  									"ORDER BY K_P_NO, LOW_ID";
  
! 			result = JApplication.kikanDatabase.sendExecuteQuery(query);
! 
! 			// add s.inoue 2010/03/18
! 			JKenshinPatternMaintenanceEditFrameData tuikaCode =
! 				new JKenshinPatternMaintenanceEditFrameData();
! 
! 			// add s.inoue 2010/03/19
! 			boolean dokujiFlg= getFunctionSetting("04");
! 			// edit s.inoue 2010/04/15
! 			HashSet<String> dokujiKoumokuCD = tuikaCode.getDokujiTuikaCD();
! 
! 			for( int i = 0;i < result.size();i++ )
! 			{
! 				resultItem = result.get(i);
! 
! 				// edit s.inoue 2010/03/18
! 				String koumokuCD = resultItem.get("KOUMOKU_CD");
! // edit s.inoue 2010/04/21
! //				if (dokujiFlg){
! //					row[0] = koumokuCD;
! //					row[1] = resultItem.get("KOUMOKU_NAME");
! //					row[2] = resultItem.get("KENSA_HOUHOU");
! //					leftTable.addData(row);
! //				}else{
! 				if(!dokujiKoumokuCD.contains(koumokuCD)){
! 					System.out.println(koumokuCD + resultItem.get("KOUMOKU_NAME"));
! 					row[0] = koumokuCD;
! 					row[1] = resultItem.get("KOUMOKU_NAME");
! 					row[2] = resultItem.get("KENSA_HOUHOU");
! 					leftTable.addData(row);
! 				}
! //				}
! 			}
  
! 			// 独自追加健診
! 			if (dokujiFlg){
! 				for( int i = 0;i < result.size();i++ )
! 				{
! 					resultItem = result.get(i);
! 					String koumokuCD = resultItem.get("KOUMOKU_CD");
! 					if(dokujiKoumokuCD.contains(koumokuCD)){
! 						row[0] = koumokuCD;
! 						row[1] = resultItem.get("KOUMOKU_NAME");
! 						row[2] = resultItem.get("KENSA_HOUHOU");
! 						leftTable.addData(row);
! 					}
! 				}
  			}
- 			// add s.inoue 2010/04/21
- 			// 独自追加健診項目
  
! 
! 			query = new String("SELECT KOUMOKU_CD,KOUMOKU_NAME,KENSA_HOUHOU " +
  							"FROM T_KENSHINMASTER " +
  					"WHERE KOUMOKU_CD " +
  					"NOT IN " +
--- 124,141 ----
  									"master.HKNJANUM = " + JQueryConvert.queryConvert("99999999") + " " +
  									"ORDER BY K_P_NO, LOW_ID";
  
! 			Result = JApplication.kikanDatabase.sendExecuteQuery(Query);
  
! 			for( int i = 0;i < Result.size();i++ )
! 			{
! 				ResultItem = Result.get(i);
! 				row[0] = ResultItem.get("KOUMOKU_CD");
! 				row[1] = ResultItem.get("KOUMOKU_NAME");
! 				row[2] = ResultItem.get("KENSA_HOUHOU");
! 				leftTable.addData(row);
  			}
  
! 			Query = new String("SELECT KOUMOKU_CD,KOUMOKU_NAME,KENSA_HOUHOU " +
  							"FROM T_KENSHINMASTER " +
  					"WHERE KOUMOKU_CD " +
  					"NOT IN " +
***************
*** 223,283 ****
  					"HKNJANUM = " + JQueryConvert.queryConvert("99999999")
  					);
  
! 			result = JApplication.kikanDatabase.sendExecuteQuery(query);
  
! 			for( int i = 0;i < result.size();i++ )
  			{
! 				resultItem = result.get(i);
! 				// edit s.inoue 2010/03/18
! 				String koumokuCD = resultItem.get("KOUMOKU_CD");
! 				// del s.inoue 2010/04/15
! 				// HashSet<String> dokujiKoumokuCD = tuikaCode.getDokujiTuikaCD();
! 
! 				// edit s.inoue 2010/04/15
! //				if (dokujiFlg){
! //					row[0] = koumokuCD;
! //					row[1] = resultItem.get("KOUMOKU_NAME");
! //					row[2] = resultItem.get("KENSA_HOUHOU");
! //
! //					if((row[0].equals(CODE_METABO_HANTEI))||(row[0].equals(CODE_HOKEN_SHIDOU))){
! //						leftTable.addData(row);
! //					}else{
! //						rightTable.addData(row);
! //					}
! //				}else{
! 					if(!dokujiKoumokuCD.contains(koumokuCD)){
! 						row[0] = koumokuCD;
! 						row[1] = resultItem.get("KOUMOKU_NAME");
! 						row[2] = resultItem.get("KENSA_HOUHOU");
! 
! 						System.out.println(koumokuCD + resultItem.get("KOUMOKU_NAME"));
! 
! 						if((row[0].equals(CODE_METABO_HANTEI))||(row[0].equals(CODE_HOKEN_SHIDOU))){
! 							leftTable.addData(row);
! 						}else{
! 							rightTable.addData(row);
! 						}
! 					}
! //				}
! 			}
! 
! 			// add s.inoue 2010/04/21
! 			// 独自追加健診項目
! 			if (dokujiFlg){
! 				for( int i = 0;i < result.size();i++ )
! 				{
! 					resultItem = result.get(i);
! 					// edit s.inoue 2010/03/18
! 					String koumokuCD = resultItem.get("KOUMOKU_CD");
! 					if(dokujiKoumokuCD.contains(koumokuCD)){
! 						row[0] = koumokuCD;
! 						row[1] = resultItem.get("KOUMOKU_NAME");
! 						row[2] = resultItem.get("KENSA_HOUHOU");
! 						rightTable.addData(row);
! 					}
! 				}
! 			}
  
  		}catch(SQLException e)
  		{
  			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3920",this);
--- 148,164 ----
  					"HKNJANUM = " + JQueryConvert.queryConvert("99999999")
  					);
  
! 			Result = JApplication.kikanDatabase.sendExecuteQuery(Query);
  
! 			for( int i = 0;i < Result.size();i++ )
  			{
! 				ResultItem = Result.get(i);
! 				row[0] = ResultItem.get("KOUMOKU_CD");
! 				row[1] = ResultItem.get("KOUMOKU_NAME");
! 				row[2] = ResultItem.get("KENSA_HOUHOU");
! 				rightTable.addData(row);
  
+ 			}
  		}catch(SQLException e)
  		{
  			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3920",this);
***************
*** 523,552 ****
  			int[] rightselectedRows = rightTable.getSelectedRows();
  			int[] leftselectedRows = leftTable.getSelectedRows();
  			int rowCount = leftTable.getSelectedRowCount();
- 			String retMessage = "";
- 			String kekkaMessage="";
- 			// add h.yoshitama 2009/11/19
- 			for(int aa : leftselectedRows){
- 				String koumokuCode = (String)leftTable.getData(aa).get(0);
- 				String koumokuName =  (String)leftTable.getData(aa).get(1);
- 				if((koumokuCode.equals(CODE_METABO_HANTEI))||(koumokuCode.equals(CODE_HOKEN_SHIDOU))){
- 					kekkaMessage ="項目コード：" + koumokuCode
- 						 			+ "、項目名：" + koumokuName;
- 
- 					if(!retMessage.isEmpty()){
- 						retMessage = retMessage + "[改行]"+ kekkaMessage;
- 					}else{
- 						retMessage = kekkaMessage;
- 					}
- 				}
- 			}
- 			// add h.yoshitama 2009/11/19
- 			if(!retMessage.isEmpty()){
- 				String[] params = {retMessage};
- 				JErrorMessage.show("M5521", this, params);
- 				return;
- 			}
- 
  
  			// edit s.inoue 2009/09/14 ソート順を修正
  			for(int i = rowCount-1;i >= 0;i-- )
--- 404,409 ----
***************
*** 577,583 ****
  				}else if (rightselectedRows[0] > 0){
  					rightTable.setRowSelectionInterval(rightselectedRows[0]-1, rightselectedRows[0]-1);
  				}else{
! 					rightTable.setRowSelectionInterval(rightselectedRows[0], rightselectedRows[0]+ rowCount);
  				}
  			}
  
--- 434,440 ----
  				}else if (rightselectedRows[0] > 0){
  					rightTable.setRowSelectionInterval(rightselectedRows[0]-1, rightselectedRows[0]-1);
  				}else{
! 					rightTable.setRowSelectionInterval(rightselectedRows[0], rightselectedRows[0]);
  				}
  			}
  
***************
*** 597,628 ****
  
  	}
  
- 	// add s.inoue 2010/03/18
- 	private boolean getFunctionSetting(String functionCode){
- 
- 		ArrayList<Hashtable<String, String>> result = null;
- 		boolean retflg = false;
- 
- 		try{
- 			StringBuilder sb = new StringBuilder();
- 			sb.append("SELECT FUNCTION_CD,FUNCTION_FLG");
- 			sb.append(" FROM T_SCREENFUNCTION ");
- 			sb.append(" WHERE SCREEN_CD = ");
- 			sb.append(JQueryConvert.queryConvert(JApplication.SCREEN_MASTER_PATTERN_CODE));
- 			sb.append(" AND FUNCTION_CD = ");
- 			sb.append(JQueryConvert.queryConvert(functionCode));
- 
- 			result = JApplication.kikanDatabase.sendExecuteQuery(sb.toString());
- 		}catch(Exception ex){
- 			logger.error(ex.getMessage());
- 		}
- 
- 		Hashtable<String, String> item = result.get(0);
- 		retflg = item.get("FUNCTION_FLG").equals("1")?true:false;
- 
- 		return retflg;
- 	}
- 
  	/**
  	 * 終了ボタン
  	 */
--- 454,459 ----
***************
*** 661,770 ****
  		Object source = e.getSource();
  		if( source == jButton_End )
  		{
- 			logger.info(jButton_End.getText());
  			pushedEndButton( e );
  		}
  		else if( source == jButton_Cancel )
  		{
- 			logger.info(jButton_End.getText());
  			pushedCancelButton( e );
  		}
  		else if( source == jButton_Register )
  		{
- 			logger.info(jButton_Register.getText());
  			pushedRegisterButton( e );
  		}
  		else if( source == jButton_Clear )
  		{
- 			logger.info(jButton_Clear.getText());
  			pushedClearButton( e );
  		}
  		else if( source == jButton_ToTop )
  		{
- 			logger.info(jButton_ToTop.getText());
  			pushedToTopButton( e );
  		}
  		else if( source == jButton_ToDown )
  		{
- 			logger.info(jButton_ToDown.getText());
  			pushedToDownButton( e );
  		}
  		else if( source == jButton_ToLeft )
  		{
- 			logger.info(jButton_ToLeft.getText());
  			pushedToLeftButton( e );
  		}
  		else if( source == jButton_ToRight )
  		{
- 			logger.info(jButton_ToRight.getText());
  			pushedToRightButton( e );
  		}
  	}
- 
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 		switch(keyEvent.getKeyCode()){
- 		case KeyEvent.VK_F1:
- 			logger.info(jButton_End.getText());
- 			pushedEndButton(null);break;
- 
- //		case KeyEvent.VK_F5:
- //			if(!(patternNumber.equals("1")) && !(patternNumber.equals("2"))){
- //				logger.info(jButton_ToTop.getText());
- //				pushedToTopButton(null);break;
- //			}
- //		case KeyEvent.VK_F6:
- //			if(!(patternNumber.equals("1")) && !(patternNumber.equals("2"))){
- //				logger.info(jButton_ToLeft.getText());
- //				pushedToLeftButton(null);break;
- //			}
- //		case KeyEvent.VK_F7:
- //			if(!(patternNumber.equals("1")) && !(patternNumber.equals("2"))){
- //				logger.info(jButton_ToRight.getText());
- //				pushedToRightButton(null);break;
- //			}
- //		case KeyEvent.VK_F8:
- //			if(!(patternNumber.equals("1")) && !(patternNumber.equals("2"))){
- //				logger.info(jButton_ToDown.getText());
- //				pushedToDownButton(null);break;
- //			}
- 		case KeyEvent.VK_F11:
- 			logger.info(jButton_Clear.getText());
- 			pushedClearButton(null);break;
- 		case KeyEvent.VK_F12:
- 			logger.info(jButton_Register.getText());
- 			pushedRegisterButton(null);break;
- 		}
- 	}
- 
- 	// add h.yoshitama 2009/11/20
- 	/**
- 	 * ボタンの状態を更新する。
- 	 */
- 	private void updateButtonsState() {
- 		boolean toTopEnable = false;
- 		boolean toLeftEnable = false;
- 		boolean toRightEnable = false;
- 		boolean toDownEnable = false;
- 		boolean registerEnable = false;
- 		boolean clearEnable = false;
- 
- 		/* パターン番号が 1でないかつ2でない場合 */
- 		if(!(patternNumber.equals("1")) && !(patternNumber.equals("2"))){
- 			toTopEnable = true;
- 			toLeftEnable = true;
- 			toRightEnable = true;
- 			toDownEnable = true;
- 			registerEnable = true;
- 			clearEnable = true;
- 		}
- 		jButton_ToTop.setEnabled(toTopEnable);
- 		jButton_ToLeft.setEnabled(toLeftEnable);
- 		jButton_ToRight.setEnabled(toRightEnable);
- 		jButton_ToDown.setEnabled(toDownEnable);
- 		jButton_Register.setEnabled(registerEnable);
- 		jButton_Clear.setEnabled(clearEnable);
- 	}
  }
  
  //Source Code Version Tag System v1.00  -- Do not remove --
--- 492,535 ----
  		Object source = e.getSource();
  		if( source == jButton_End )
  		{
  			pushedEndButton( e );
  		}
+ 
  		else if( source == jButton_Cancel )
  		{
  			pushedCancelButton( e );
  		}
+ 
  		else if( source == jButton_Register )
  		{
  			pushedRegisterButton( e );
  		}
+ 
  		else if( source == jButton_Clear )
  		{
  			pushedClearButton( e );
  		}
+ 
+ 		// add ver2 s.inoue 2009/07/07
  		else if( source == jButton_ToTop )
  		{
  			pushedToTopButton( e );
  		}
  		else if( source == jButton_ToDown )
  		{
  			pushedToDownButton( e );
  		}
+ 
  		else if( source == jButton_ToLeft )
  		{
  			pushedToLeftButton( e );
  		}
+ 
  		else if( source == jButton_ToRight )
  		{
  			pushedToRightButton( e );
  		}
  	}
  }
  
  //Source Code Version Tag System v1.00  -- Do not remove --
Only in ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame: JKenshinPatternMaintenanceEditFrameData.java
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceListFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceListFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceListFrame.java	Mon Apr 19 19:12:26 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceListFrame.java	Tue Oct 13 09:53:08 2009
***************
*** 26,32 ****
  import java.awt.Insets;
  
  
! public class JKenshinPatternMaintenanceListFrame extends JFrame implements ActionListener,KeyListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
--- 26,32 ----
  import java.awt.Insets;
  
  
! public class JKenshinPatternMaintenanceListFrame extends JFrame implements ActionListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
***************
*** 46,54 ****
  	protected ExtendedButton jButton_Edit = null;
  	protected ExtendedButton jButton_NoteEdit = null;
  
- 	protected ExtendedButton jButton_Import = null;
- 	protected ExtendedButton jButton_Export = null;
- 
  	/**
  	 * This is the default constructor
  	 */
--- 46,51 ----
***************
*** 110,156 ****
  			GridBagConstraints gridBagConstraints4 = new GridBagConstraints();
  			gridBagConstraints4.gridy = 0;
  			gridBagConstraints4.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints4.gridx = 7;
  			GridBagConstraints gridBagConstraints3 = new GridBagConstraints();
  			gridBagConstraints3.gridy = 0;
  			gridBagConstraints3.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints3.gridx = 6;
  			GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
  			gridBagConstraints2.gridy = 0;
  			gridBagConstraints2.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints2.gridx = 5;
  			GridBagConstraints gridBagConstraints1 = new GridBagConstraints();
  			gridBagConstraints1.gridy = 0;
  			gridBagConstraints1.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints1.gridx = 4;
  			GridBagConstraints gridBagConstraints = new GridBagConstraints();
  			gridBagConstraints.gridy = 0;
! 			// del s.inoue 2010/03/09
! //			gridBagConstraints.weightx = 1.0D;
! //			gridBagConstraints.anchor = GridBagConstraints.EAST;
! 			gridBagConstraints.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints.gridx = 3;
! 
! 			// add s.inoue 2010/02/25
! 			GridBagConstraints gridBagConstraints6 = new GridBagConstraints();
! 			gridBagConstraints6.gridy = 0;
! 			gridBagConstraints6.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints6.gridx = 1;
! 			gridBagConstraints6.anchor = GridBagConstraints.EAST;
! 			gridBagConstraints6.weightx = 1.0D;
! 
! 			GridBagConstraints gridBagConstraints7 = new GridBagConstraints();
! 			gridBagConstraints7.gridy = 0;
! 			gridBagConstraints7.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints7.gridx = 2;
! 
  			jPanel_ButtonArea = new JPanel();
  			jPanel_ButtonArea.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
  			jPanel_ButtonArea.setLayout(new GridBagLayout());
- 			// add s.inoue 2010/02/25
- 			jPanel_ButtonArea.add(getJButton_Import(), gridBagConstraints6);
- 			jPanel_ButtonArea.add(getJButton_Export(), gridBagConstraints7);
- 
  			jPanel_ButtonArea.add(getJButton_Add(), gridBagConstraints);
  			jPanel_ButtonArea.add(getJButton_NoteEdit(), gridBagConstraints1);
  			jPanel_ButtonArea.add(getJButton_Edit(), gridBagConstraints2);
--- 107,133 ----
  			GridBagConstraints gridBagConstraints4 = new GridBagConstraints();
  			gridBagConstraints4.gridy = 0;
  			gridBagConstraints4.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints4.gridx = 5;
  			GridBagConstraints gridBagConstraints3 = new GridBagConstraints();
  			gridBagConstraints3.gridy = 0;
  			gridBagConstraints3.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints3.gridx = 4;
  			GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
  			gridBagConstraints2.gridy = 0;
  			gridBagConstraints2.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints2.gridx = 3;
  			GridBagConstraints gridBagConstraints1 = new GridBagConstraints();
  			gridBagConstraints1.gridy = 0;
  			gridBagConstraints1.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints1.gridx = 2;
  			GridBagConstraints gridBagConstraints = new GridBagConstraints();
  			gridBagConstraints.gridy = 0;
! 			gridBagConstraints.weightx = 1.0D;
! 			gridBagConstraints.anchor = GridBagConstraints.EAST;
! 			gridBagConstraints.gridx = 1;
  			jPanel_ButtonArea = new JPanel();
  			jPanel_ButtonArea.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
  			jPanel_ButtonArea.setLayout(new GridBagLayout());
  			jPanel_ButtonArea.add(getJButton_Add(), gridBagConstraints);
  			jPanel_ButtonArea.add(getJButton_NoteEdit(), gridBagConstraints1);
  			jPanel_ButtonArea.add(getJButton_Edit(), gridBagConstraints2);
***************
*** 172,178 ****
  //			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  //			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
--- 149,155 ----
  //			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  //			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
***************
*** 237,244 ****
  	private JPanel getJPanel_ExplArea2() {
  		if (jPanel_ExplArea2 == null) {
  			jLabal_SubExpl = new JLabel();
! 			// edit h.yoshitama 2009/11/20
! 			jLabal_SubExpl.setText("健診パターンNo1（特定健診）,No2（特定健診＋詳細健診）は基本パターンの為、削除・編集は出来ません。");
  			jLabal_SubExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
  			GridLayout gridLayout1 = new GridLayout();
  			gridLayout1.setRows(2);
--- 214,220 ----
  	private JPanel getJPanel_ExplArea2() {
  		if (jPanel_ExplArea2 == null) {
  			jLabal_SubExpl = new JLabel();
! 			jLabal_SubExpl.setText(" ");
  			jLabal_SubExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
  			GridLayout gridLayout1 = new GridLayout();
  			gridLayout1.setRows(2);
***************
*** 282,318 ****
  	}
  
  	/**
- 	 * This method initializes jButton_Import
- 	 *
- 	 * @return javax.swing.ExtendedButton
- 	 */
- 	private ExtendedButton getJButton_Import() {
- 		if (jButton_Import == null) {
- 			jButton_Import = new ExtendedButton();
- 			jButton_Import.setText("取込(F4)");
- 			jButton_Import.setFont(new Font("Dialog", Font.PLAIN, 12));
- 			jButton_Import.addActionListener(this);
- 		}
- 		return jButton_Import;
- 	}
- 
- 	/**
- 	 * This method initializes jButton_Export
- 	 *
- 	 * @return javax.swing.ExtendedButton
- 	 */
- 	private ExtendedButton getJButton_Export() {
- 		if (jButton_Export == null) {
- 			jButton_Export = new ExtendedButton();
- 			jButton_Export.setText("書出(F5)");
- 			jButton_Export.setFont(new Font("Dialog", Font.PLAIN, 12));
- 			jButton_Export.addActionListener(this);
- 		}
- 		return jButton_Export;
- 	}
- 
- 
- 	/**
  	 * This method initializes jButton_Add
  	 *
  	 * @return javax.swing.ExtendedButton
--- 258,263 ----
***************
*** 320,326 ****
  	private ExtendedButton getJButton_Add() {
  		if (jButton_Add == null) {
  			jButton_Add = new ExtendedButton();
! 			jButton_Add.setText("新規追加(F6)");
  //			jButton_Add.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Add.addActionListener(this);
  		}
--- 265,271 ----
  	private ExtendedButton getJButton_Add() {
  		if (jButton_Add == null) {
  			jButton_Add = new ExtendedButton();
! 			jButton_Add.setText("新規追加");
  //			jButton_Add.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Add.addActionListener(this);
  		}
***************
*** 339,345 ****
  	private ExtendedButton getJButton_Copy() {
  		if (jButton_Copy == null) {
  			jButton_Copy = new ExtendedButton();
! 			jButton_Copy.setText("複製(F11)");
  //			jButton_Copy.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Copy.addActionListener(this);
  		}
--- 284,290 ----
  	private ExtendedButton getJButton_Copy() {
  		if (jButton_Copy == null) {
  			jButton_Copy = new ExtendedButton();
! 			jButton_Copy.setText("複製");
  //			jButton_Copy.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Copy.addActionListener(this);
  		}
***************
*** 354,360 ****
  	private ExtendedButton getJButton_Delete() {
  		if (jButton_Delete == null) {
  			jButton_Delete = new ExtendedButton();
! 			jButton_Delete.setText("削除(F12)");
  //			jButton_Delete.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Delete.addActionListener(this);
  		}
--- 299,305 ----
  	private ExtendedButton getJButton_Delete() {
  		if (jButton_Delete == null) {
  			jButton_Delete = new ExtendedButton();
! 			jButton_Delete.setText("削除");
  //			jButton_Delete.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Delete.addActionListener(this);
  		}
***************
*** 400,410 ****
  	private ExtendedButton getJButton_Edit() {
  		if (jButton_Edit == null) {
  			jButton_Edit = new ExtendedButton();
! 			jButton_Edit.setText("パターン編集(F9)");
! 			jButton_Edit.setPreferredSize(new Dimension(110, 25));
  //			jButton_Edit.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Edit.addActionListener(this);
- 			jButton_Edit.setMnemonic(KeyEvent.VK_E);
  		}
  		return jButton_Edit;
  	}
--- 345,354 ----
  	private ExtendedButton getJButton_Edit() {
  		if (jButton_Edit == null) {
  			jButton_Edit = new ExtendedButton();
! 			jButton_Edit.setText("パターン編集");
! 			jButton_Edit.setPreferredSize(new Dimension(100, 25));
  //			jButton_Edit.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Edit.addActionListener(this);
  		}
  		return jButton_Edit;
  	}
***************
*** 417,447 ****
  	private ExtendedButton getJButton_NoteEdit() {
  		if (jButton_NoteEdit == null) {
  			jButton_NoteEdit = new ExtendedButton();
! 			jButton_NoteEdit.setText("パターン名編集(F7)");
! 			jButton_NoteEdit.setPreferredSize(new Dimension(120, 25));
  //			jButton_NoteEdit.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_NoteEdit.addActionListener(this);
  		}
  		return jButton_NoteEdit;
  	}
- 
- 	@Override
- 	public void keyPressed(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyReleased(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyTyped(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
  }
  
  
--- 361,373 ----
  	private ExtendedButton getJButton_NoteEdit() {
  		if (jButton_NoteEdit == null) {
  			jButton_NoteEdit = new ExtendedButton();
! 			jButton_NoteEdit.setText("パターン名称編集");
! 			jButton_NoteEdit.setPreferredSize(new Dimension(125, 25));
  //			jButton_NoteEdit.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_NoteEdit.addActionListener(this);
  		}
  		return jButton_NoteEdit;
  	}
  }
  
  
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceListFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceListFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceListFrameCtrl.java	Fri Apr 23 15:27:50 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinPatternMaintenanceListFrameCtrl.java	Mon Apr 26 11:10:42 2010
***************
*** 1,43 ****
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
  
- import java.awt.Component;
  import java.awt.event.*;
- import java.io.File;
- import java.io.IOException;
  import java.sql.SQLException;
  import java.util.*;
  
- import javax.swing.JButton;
  import javax.swing.event.ListSelectionEvent;
  import javax.swing.event.ListSelectionListener;
  import javax.swing.event.TableModelListener;
  
- import jp.or.med.orca.jma_tokutei.common.component.DialogFactory;
- import jp.or.med.orca.jma_tokutei.common.component.IDialog;
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
- import jp.or.med.orca.jma_tokutei.common.csv.JCSVReaderStream;
- import jp.or.med.orca.jma_tokutei.common.csv.JCSVWriterStream;
- import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
  import jp.or.med.orca.jma_tokutei.common.errormessage.RETURN_VALUE;
- import jp.or.med.orca.jma_tokutei.common.event.JSingleDoubleClickEvent;
  import jp.or.med.orca.jma_tokutei.common.event.JEnterEvent;
  import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
  import jp.or.med.orca.jma_tokutei.common.scene.JScene;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTable;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellPosition;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableScrollPanel;
  import jp.or.med.orca.jma_tokutei.common.app.JApplication;
- import jp.or.med.orca.jma_tokutei.common.app.JPath;
- 
  import javax.swing.table.DefaultTableCellRenderer;
  import javax.swing.table.TableColumnModel;
- import jp.or.med.orca.jma_tokutei.common.validate.JValidate;
- 
- import org.apache.log4j.Logger;
  
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellRowRenderer;
- import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.dataimport.JImportMasterErrorHokenjyaResultFrameData;
- import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.dataimport.JImportMasterErrorKenshinPatternResultFrameData;
  
  /**
   * 健診パターンメンテナンス（一覧）
--- 1,27 ----
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
  
  import java.awt.event.*;
  import java.sql.SQLException;
  import java.util.*;
  
  import javax.swing.event.ListSelectionEvent;
  import javax.swing.event.ListSelectionListener;
  import javax.swing.event.TableModelListener;
  
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
  import jp.or.med.orca.jma_tokutei.common.errormessage.RETURN_VALUE;
  import jp.or.med.orca.jma_tokutei.common.event.JEnterEvent;
+ import jp.or.med.orca.jma_tokutei.common.event.JSingleDoubleClickEvent;
  import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
  import jp.or.med.orca.jma_tokutei.common.scene.JScene;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTable;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellPosition;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableScrollPanel;
  import jp.or.med.orca.jma_tokutei.common.app.JApplication;
  import javax.swing.table.DefaultTableCellRenderer;
  import javax.swing.table.TableColumnModel;
  
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellRowRenderer;
  
  /**
   * 健診パターンメンテナンス（一覧）
***************
*** 50,79 ****
  	/* フォーカス移動制御 */
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
  
- 	// add s.inoue 2010/03/05
- 	private static org.apache.log4j.Logger logger =
- 		Logger.getLogger(JKenshinPatternMaintenanceListFrameCtrl.class);
- 
- 	private static jp.or.med.orca.jma_tokutei.common.csv.JCSVReaderStream reader = null;
- 	private static jp.or.med.orca.jma_tokutei.common.csv.JCSVWriterStream writer = null;
- 	private static Vector<Vector<String>> CSVItems = null;
- 	private IDialog filePathDialog;
- 	private JKenshinPatternMaintenanceAddFrameData validatedData = new JKenshinPatternMaintenanceAddFrameData();
- 
- 	private static String saveTitle= "csvファイル保存先選択";
- 	private static String selectTitle= "csvファイル選択";
- 	private static String savaDialogTitle= "csvファイルの保存先を選択、ファイル名を指定してください";
- 	private static String selectDialogTitle= "csvファイルを選択してください";
- 
- 	private static final String[] TABLE_COLUMNS = {
- 		"K_P_NO", "K_P_NAME", "BIKOU"
- 		 };
- 	private static final String[] TABLE_DETAIL_COLUMNS = {
- 		"LOW_ID", "KOUMOKU_CD"
- 	};
- 
- 
- 
  	public JKenshinPatternMaintenanceListFrameCtrl() {
  		//テーブルの登録
  		JSimpleTableScrollPanel table = new JSimpleTableScrollPanel(model);
--- 34,39 ----
***************
*** 84,89 ****
--- 44,51 ----
  		model.addKeyListener(new JEnterEvent(this, jButton_Edit));
  
  		// ダブルクリックの処理
+ 		// edit s.inoue 2010/04/23
+ 		// model.addMouseListener(new JDoubleClickEvent(this, jButton_Edit));
  		model.addMouseListener(new JSingleDoubleClickEvent(this, jButton_Edit));
  
  		// focus制御
***************
*** 93,101 ****
  		// edit s.inoue 2009/11/09
  		this.focusTraversalPolicy.setDefaultComponent(model);
  		this.focusTraversalPolicy.addComponent(model);
- 		// edit s.inoue 2010/04/23
- 		this.focusTraversalPolicy.addComponent(this.jButton_Import);
- 		this.focusTraversalPolicy.addComponent(this.jButton_Export);
  		this.focusTraversalPolicy.addComponent(this.jButton_Add);
  		this.focusTraversalPolicy.addComponent(this.jButton_NoteEdit);
  		this.focusTraversalPolicy.addComponent(this.jButton_Edit);
--- 55,60 ----
***************
*** 103,120 ****
  		this.focusTraversalPolicy.addComponent(this.jButton_Delete);
  		this.focusTraversalPolicy.addComponent(jButton_End);
  
- 		// add s.inoue 2009/12/02
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			Component comp = focusTraversalPolicy.getComponent(i);
- 			comp.addKeyListener(this);
- 		}
  	}
  
  	/**
  	 * テーブルの初期化
  	 */
  	private void init() {
! 		String query =
  			"SELECT * FROM T_KENSHIN_P_M WHERE K_P_NO >= 0 ORDER BY K_P_NO ASC";
  
  		this.result = new ArrayList<Hashtable<String, String>>();
--- 62,74 ----
  		this.focusTraversalPolicy.addComponent(this.jButton_Delete);
  		this.focusTraversalPolicy.addComponent(jButton_End);
  
  	}
  
  	/**
  	 * テーブルの初期化
  	 */
  	private void init() {
! 		String Query =
  			"SELECT * FROM T_KENSHIN_P_M WHERE K_P_NO >= 0 ORDER BY K_P_NO ASC";
  
  		this.result = new ArrayList<Hashtable<String, String>>();
***************
*** 134,140 ****
  		model.setCellEditForbid(forbitCells);
  
  		try {
! 			result = JApplication.kikanDatabase.sendExecuteQuery(query);
  		} catch (SQLException e) {
  			e.printStackTrace();
  			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show(
--- 88,94 ----
  		model.setCellEditForbid(forbitCells);
  
  		try {
! 			result = JApplication.kikanDatabase.sendExecuteQuery(Query);
  		} catch (SQLException e) {
  			e.printStackTrace();
  			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show(
***************
*** 181,612 ****
  		dispose();
  	}
  
- 	// add s.inoue 2010/03/09
- 	/**ImportStart↓↓↓↓↓**********************************************************/
- 	/**
- 	 * 取込ボタン
- 	 */
- 	public void pushedImportButton( ActionEvent e )
- 	{
- 		try {
- 			filePathDialog = DialogFactory.getInstance().createDialog(this,null);
- 
- 			filePathDialog.setMessageTitle(selectTitle);
- 			filePathDialog.setDialogTitle(selectDialogTitle);
- 			filePathDialog.setEnabled(false);
- 			filePathDialog.setDialogSelect(true);
- 			filePathDialog.setVisible(true);
- 
- 			// edit s.inoue 2010/03/25
- 			if (filePathDialog.getStatus().equals(RETURN_VALUE.CANCEL))
- 				return;
- 
- 			String filePath = filePathDialog.getFilePath();
- 			// add s.inoue 2010/03/05
- 			File fileImport = new File(filePath);
- 			if(!fileImport.exists())
- 				return;
- 			importCsvData(filePath);
- 			init();
- 		} catch (Exception ex) {
- 			JErrorMessage.show("M3937",this);
- 			logger.error(ex.getMessage());
- 		}
- 	}
- 
- 	// edit s.inoue 2010/03/04
- 	/* 取込処理 */
- 	private void importCsvData(String filePath){
- 
- 		RETURN_VALUE retValue = JErrorMessage.show("M3938", this);
- 
- 		// cancel時
- 		if (retValue == RETURN_VALUE.NO){
- 			return;
- 		}else if (retValue == RETURN_VALUE.YES){
- 
- 			JImportMasterErrorKenshinPatternResultFrameData data = new JImportMasterErrorKenshinPatternResultFrameData();
- 
- 			// CSV読込処理
- 			reader = new JCSVReaderStream();
- 
- 			try {
- 				reader.openCSV(filePath,JApplication.CSV_CHARSET);
- 			} catch (IOException e) {
- 				JErrorMessage.show("M3939",this);
- 				logger.error(e.getMessage());
- 			}
- 
- 			CSVItems = reader.readAllTable();
- 
- 			try {
- 				JApplication.kikanDatabase.Transaction();
- 
- 				int csvCount = CSVItems.size();
- 
- 				if(csvCount == 0){
- 					JErrorMessage.show("M3940",this);
- 					return;
- 				}
- 
- 				// 既存保険者-健診マスタ全削除
- 				kenshinMasterDelete();
- 
- 				// 検査結果データ取込処理
- 				for (int i = 1; i < csvCount; i++) {
- 
- 					Vector<String> insertRow = new Vector<String>();
- 
- 					insertRow =CSVItems.get(i);
- 
- 					// 属性情報取得 CSVデータをローカル変数にセット(「"」を除去したもの)
- 					setCSVItemsToDB(data,insertRow);
- 
- 					// validate処理
- 					if (!validateData(data))
- 						return;
- 
- 					kenshinPatternMasterRegister(data);
- 					kenshinPatternMasterDetailRegister(data);
- 					// del s.inoue 2010/03/09
- 					// kenshinMasterRegister(data);
- 				}
- 
- 				JApplication.kikanDatabase.Commit();
- 
- 				String[] messageParams = {String.valueOf(csvCount-1)};
- 				JErrorMessage.show("M3941",this,messageParams);
- 			} catch (SQLException e) {
- 				try {
- 					JApplication.kikanDatabase.rollback();
- 				} catch (SQLException e1) {}
- 				JErrorMessage.show("M3942",this);
- 				logger.error(e.getMessage());
- 			}
- 		}
- 	}
- 
- 	// edit s.inoue 2010/03/04
- 	/* csvデータ取込 */
- 	private void setCSVItemsToDB(JImportMasterErrorKenshinPatternResultFrameData data,
- 			Vector<String> insertRow){
- 
- 		data.CSV_COLUMN_KENSHIN_PM_K_P_NO = reader.rmQuart(insertRow.get(0));
- 		data.CSV_COLUMN_KENSHIN_K_P_NAME = reader.rmQuart(insertRow.get(1));
- 		data.CSV_COLUMN_KENSHIN_BIKOU = reader.rmQuart(insertRow.get(2));
- 
- 		data.CSV_COLUMN_KENSHIN_LOW_ID = new String[ insertRow.size() ];
- 		data.CSV_COLUMN_KENSHIN_KOUMOKU_CD = new String[ insertRow.size() ];
- 
- 		for (int i = 0; i < insertRow.size()-3; i++) {
- 			data.CSV_COLUMN_KENSHIN_LOW_ID[i] = String.valueOf(i);
- 			data.CSV_COLUMN_KENSHIN_KOUMOKU_CD[i] = insertRow.get(3 + i);
- 		}
- 	}
- 
- 	// edit s.inoue 2010/03/04
- 	/* validate処理 */
- 	private boolean validateData(JImportMasterErrorKenshinPatternResultFrameData data) {
- 
- 		boolean rettanka = false;
- 
- 		rettanka= validatedData.setPatternNumber(data.CSV_COLUMN_KENSHIN_PM_K_P_NO)
- 			&& validatedData.setPatternName(data.CSV_COLUMN_KENSHIN_K_P_NAME)
- 			&& validatedData.setNote(data.CSV_COLUMN_KENSHIN_BIKOU);
- 		// パターン詳細は別途処理
- //			&& validatedData.set(data.CSV_COLUMN_KENSHIN_LOW_ID)
- //			&& validatedData.setShindenzuCode(data.CSV_COLUMN_KENSHIN_KOUMOKU_CD);
- 		return rettanka;
- 	}
- 
- 	/**
- 	 * 既存保険者,健診マスタ削除
- 	 * @throws SQLException
- 	 */
- 	private void kenshinMasterDelete(){
- 		// hknjyanumによる削除※履歴を含め削除
- 		deleteKenshinPattern();
- 	}
- 
- //	private void kenshinMasterRegister(JImportMasterErrorKenshinPatternResultFrameData data)
- //		throws SQLException
- //	{
- //
- //		try {
- //				// 新規追加の場合はさらに健診項目マスタへの追加も行う
- //				ArrayList<Hashtable<String, String>> resultKenshin = new ArrayList<Hashtable<String, String>>();
- //				Hashtable<String, String> resultItemKenshin = new Hashtable<String, String>();
- //				StringBuffer buffer = new StringBuffer(
- //						"SELECT * FROM T_KENSHINMASTER WHERE HKNJANUM = "
- //								+ JQueryConvert.queryConvert("99999999"));
- //
- //				resultKenshin = JApplication.kikanDatabase.sendExecuteQuery(buffer.toString());
- //
- //				for (int i = 0; i < resultKenshin.size(); i++) {
- //					resultItemKenshin = resultKenshin.get(i);
- //
- //					buffer = new StringBuffer("INSERT INTO T_KENSHINMASTER ( "
- //							+ "HKNJANUM,KOUMOKU_CD,KOUMOKU_NAME,DATA_TYPE,MAX_BYTE_LENGTH,XML_PATTERN,"
- //							+ "XML_DATA_TYPE,XML_KENSA_CD,OBSERVATION,AUTHOR,AUTHOR_KOUMOKU_CD,"
- //							+ "KENSA_GROUP,KENSA_GROUP_CD,KEKKA_OID,KOUMOKU_OID,HISU_FLG,KAGEN,"
- //							+ "JYOUGEN,DS_JYOUGEN,JS_JYOUGEN,DS_KAGEN,JS_KAGEN,KIJYUNTI_HANI,"
- //							+ "TANI,KENSA_HOUHOU,TANKA_KENSIN,BIKOU,XMLITEM_SEQNO"
- //							+ " )VALUES( "
- //							+ JQueryConvert.queryConvertAppendComma(validatedData.getHokenjyaNumber())
- //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("KOUMOKU_CD"))
- //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("KOUMOKU_NAME"))
- //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("DATA_TYPE"))
- //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("MAX_BYTE_LENGTH"))
- //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("XML_PATTERN"))
- //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("XML_DATA_TYPE"))
- //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("XML_KENSA_CD"))
- //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("OBSERVATION"))
- //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("AUTHOR"))
- //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("AUTHOR_KOUMOKU_CD"))
- //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("KENSA_GROUP"))
- //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("KENSA_GROUP_CD"))
- //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("KEKKA_OID"))
- //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("KOUMOKU_OID"))
- //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("HISU_FLG"))
- //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("KAGEN"))
- //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("JYOUGEN"))
- //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("DS_JYOUGEN"))
- //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("JS_JYOUGEN"))
- //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("DS_KAGEN"))
- //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("JS_KAGEN"))
- //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("KIJYUNTI_HANI"))
- //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("TANI"))
- //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("KENSA_HOUHOU"))
- //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("TANKA_KENSIN"))
- //							+ JQueryConvert.queryConvertAppendComma(resultItemKenshin.get("BIKOU"))
- //							+ JQueryConvert.queryConvert(resultItemKenshin.get("XMLITEM_SEQNO")) +
- //							")");
- //
- //					JApplication.kikanDatabase.sendNoResultQuery(buffer.toString());
- //				}
- //		} catch (SQLException f) {
- //			f.printStackTrace();
- //			JErrorMessage.show("M3212", this);
- //			try {
- //				JApplication.kikanDatabase.rollback();
- //				return;
- //			} catch (SQLException g) {
- //				g.printStackTrace();
- //				JErrorMessage.show("M0000", this);
- //				System.exit(1);
- //			}
- //		}
- //	}
- 
- 	/**
- 	 * CSVデータ登録
- 	 * @throws SQLException
- 	 */
- 	private void kenshinPatternMasterRegister(JImportMasterErrorKenshinPatternResultFrameData data)
- 		throws SQLException
- 	{
- 		StringBuffer buffer = new StringBuffer();
- 
- 		if( validateAsRegisterPushed( validatedData ) )
- 		{
- 			if( validatedData.isValidateAsDataSet() )
- 			{
- 
- 			buffer = new StringBuffer("INSERT INTO T_KENSHIN_P_M (K_P_NO,K_P_NAME,BIKOU) VALUES (" +
- 					JQueryConvert.queryConvertAppendComma(validatedData.getPatternNumber()) +
- 					JQueryConvert.queryConvertAppendComma(validatedData.getPatternName()) +
- 					JQueryConvert.queryConvert(validatedData.getNote()) +
- 					")");
- 			}
- 		}
- 		JApplication.kikanDatabase.sendNoResultQuery(buffer.toString());
- 
- 	}
- 
- 	/**
- 	 * CSVデータ登録
- 	 * @throws SQLException
- 	 */
- 	private void kenshinPatternMasterDetailRegister(JImportMasterErrorKenshinPatternResultFrameData data)
- 		throws SQLException
- 	{
- 
- 		StringBuilder sb = new StringBuilder();
- 
- 		// 複製元の健診パターン詳細の行の健診パターンNoを新規パターンNoに書き換え挿入を行う
- 		String strPM_KPNO = data.CSV_COLUMN_KENSHIN_PM_K_P_NO;
- 
- 		for (int i = 0; i < data.CSV_COLUMN_KENSHIN_LOW_ID.length; i++) {
- 
- 			String koumokuCd = data.CSV_COLUMN_KENSHIN_KOUMOKU_CD[i];
- 			String lowId = data.CSV_COLUMN_KENSHIN_LOW_ID[i];
- 			if (lowId == null)
- 				break;
- 
- 			if (sb.length() > 0)
- 				sb.delete(0, sb.length() );
- 
- 			sb.append("INSERT INTO T_KENSHIN_P_S (K_P_NO,KOUMOKU_CD,LOW_ID) VALUES ("
- 							+ JQueryConvert.queryConvertAppendComma(strPM_KPNO)
- 							+ JQueryConvert.queryConvertAppendComma(koumokuCd)
- 							+ JQueryConvert.queryConvert(lowId)
- 							+ ")");
- 			JApplication.kikanDatabase.sendNoResultQuery(sb.toString());
- 		}
- 	}
- 
- 	/**
- 	 * 登録ボタンを押した際の必須項目等を検証
- 	 */
- 	protected boolean validateAsRegisterPushed(JKenshinPatternMaintenanceAddFrameData data)
- 	{
- 		if( validatedData.getPatternNumber().equals("") )
- 		{
- 			JErrorMessage.show("M5501",this);
- 			return false;
- 		}
- 
- 		if( validatedData.getPatternName().equals("") )
- 		{
- 			JErrorMessage.show("M5502",this);
- 			return false;
- 		}
- 
- 		data.setValidateAsDataSet();
- 		return true;
- 	}
- 	/**ImportEnd↑↑↑↑↑**********************************************************/
- 
- 
- 	/**ExportStart↓↓↓↓↓**********************************************************/
- 	// add s.inoue 2010/02/25
- 	/**
- 	 * 書出ボタン
- 	 */
- 	public void pushedExportButton( ActionEvent e )
- 	{
- 		try {
- 			String saveFileName = JPath.createDirectoryUniqueName("KenshinPatternMaster");
- 
- 			String defaltPath = JPath.getDesktopPath() +
- 				File.separator +
- 				saveFileName;
- 
- 			filePathDialog = DialogFactory.getInstance().createDialog(this, defaltPath);
- 			filePathDialog.setMessageTitle(saveTitle);
- 			filePathDialog.setDialogTitle(savaDialogTitle);
- 			filePathDialog.setEnabled(false);
- 			filePathDialog.setDialogSelect(false);
- 			filePathDialog.setVisible(true);
- 
- 			// edit s.inoue 2010/03/25
- 			if (filePathDialog.getStatus().equals(RETURN_VALUE.CANCEL))
- 				return;
- 
- 			String filePath = filePathDialog.getFilePath();
- 			if (filePath.equals(""))
- 				return;
- 			exportCsvData(filePath);
- 
- 		} catch (Exception ex) {
- 			JErrorMessage.show("M3943", this);
- 			logger.error(ex.getMessage());
- 		}
- 	}
- 
- 	/* export処理 */
- 	private void exportCsvData(String filePath){
- 		JImportMasterErrorHokenjyaResultFrameData data = new JImportMasterErrorHokenjyaResultFrameData();
- 
- 		// CSV読込処理
- 		writer = new JCSVWriterStream();
- 
- 		try {
- 			writer.writeTable(getExportData());
- 			writer.saveCSV(filePath,JApplication.CSV_CHARSET);
- 		} catch (IOException e) {
- 			JErrorMessage.show("M3944", this);
- 			logger.error(e.getMessage());
- 		}
- 	}
- 
- 	/* DBよりデータ取得*/
- 	private Vector<Vector<String>> getExportData(){
- 
- 		Vector<Vector<String>> newTable = new Vector<Vector<String>>();
- 
- 		ArrayList<Hashtable<String, String>> result
- 			= new ArrayList<Hashtable<String, String>>();
- 
- 		StringBuilder sb = new StringBuilder();
- 
- 		sb.append(" SELECT PM.K_P_NO, PM.K_P_NAME, PM.BIKOU, PS.LOW_ID, PS.KOUMOKU_CD ");
- 		sb.append(" from T_KENSHIN_P_M PM,T_KENSHIN_P_S PS ");
- 		sb.append(" where PM.K_P_NO = PS.K_P_NO ");
- 		sb.append(" and PM.K_P_NO <> '-1' ");
- 		sb.append(" and PM.K_P_NO <> '1' ");
- 		sb.append(" and PM.K_P_NO <> '2' ");
- 		sb.append(" order by PM.k_p_no,PS.LOW_ID");
- 
- 		try {
- 			result = JApplication.kikanDatabase.sendExecuteQuery(sb.toString());
- 		} catch (SQLException e) {
- 			e.printStackTrace();
- 			return null;
- 		}
- 
- 		// ↓header設定
- 		String[] allArray = new String[TABLE_COLUMNS.length + TABLE_DETAIL_COLUMNS.length];
- 		System.arraycopy(TABLE_COLUMNS, 0, allArray, 0, TABLE_COLUMNS.length);
- 		System.arraycopy(TABLE_DETAIL_COLUMNS, 0, allArray, TABLE_COLUMNS.length, TABLE_DETAIL_COLUMNS.length);
- 
- 		Vector colmn = new Vector<String>();
- 		List l = java.util.Arrays.asList(allArray);
- 		for (Iterator item = l.iterator(); item.hasNext();) {
- 			colmn.add((String)item.next());
- 		}
- 		newTable.add(colmn);
- 		// ↑
- 
- 		Hashtable<String, String> resultItem = new Hashtable<String, String>();
- 		Hashtable<String, String> resultItemDetail = new Hashtable<String, String>();
- 
- 		String preKPNo= "";
- 
- 		for( int i=0; i<result.size(); ++i )
- 		{
- 			resultItem = result.get(i);
- 
- 			Vector<String> data = new Vector<String>();
- 
- 			String keyKPNo =resultItem.get(TABLE_COLUMNS[0]).trim();
- 
- 			if (keyKPNo.equals(preKPNo))
- 				continue;
- 
- 			data.add(keyKPNo);
- 			data.add(resultItem.get(TABLE_COLUMNS[1]).trim());
- 			data.add(resultItem.get(TABLE_COLUMNS[2]).trim());
- 
- 			if (resultItem.get(TABLE_DETAIL_COLUMNS[0]) == null)
- 				break;
- 
- 			// 詳細
- 			for (int j = 0; j < result.size(); j++) {
- 				resultItemDetail = result.get(j);
- //				System.out.println("項目コード：" + resultItemDetail.get(TABLE_DETAIL_COLUMNS[1]).trim());
- 				data.add(resultItemDetail.get(TABLE_DETAIL_COLUMNS[0]).trim());
- 				data.add(resultItemDetail.get(TABLE_DETAIL_COLUMNS[1]).trim());
- 			}
- 
- 			newTable.add(data);
- 			preKPNo = resultItem.get(TABLE_COLUMNS[0]).trim();
- 
- 		}
- 		return newTable;
- 	}
- 	/**ExportEnd↑↑↑↑↑**********************************************************/
- 
  	/**
  	 * 追加ボタン
  	 */
--- 135,140 ----
***************
*** 656,662 ****
  				for (int i = 0; i < model.getSelectedRowCount(); i++) {
  					String KenshinPatternNumber = (String) model.getData(
  							selectedRows[i], 0);
! 					deleteKenshinPattern(KenshinPatternNumber);
  				}
  
  				init();
--- 184,207 ----
  				for (int i = 0; i < model.getSelectedRowCount(); i++) {
  					String KenshinPatternNumber = (String) model.getData(
  							selectedRows[i], 0);
! 					try {
! 						String Query = new String(
! 						"DELETE FROM T_KENSHIN_P_M WHERE K_P_NO = "
! 						+ JQueryConvert.queryConvert(KenshinPatternNumber));
! 
! 						JApplication.kikanDatabase.sendNoResultQuery(Query);
! 
! 						// add 20081217 s.inoue
! 						String sQuery = new String(
! 						"DELETE FROM T_KENSHIN_P_S WHERE K_P_NO = "
! 						+ JQueryConvert.queryConvert(KenshinPatternNumber));
! 
! 						JApplication.kikanDatabase.sendNoResultQuery(sQuery);
! 					} catch (SQLException f) {
! 						f.printStackTrace();
! 						jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show("M3922", this);
! 						break;
! 					}
  				}
  
  				init();
***************
*** 664,716 ****
  		}
  	}
  
- 	/* 健診パターン指定番号削除 */
- 	private void deleteKenshinPattern(String KenshinPatternNumber){
- 
- 		try {
- 
- 			StringBuilder sb = new StringBuilder();
- 
- 			sb.append("DELETE FROM T_KENSHIN_P_M WHERE K_P_NO = ");
- 			sb.append(JQueryConvert.queryConvert(KenshinPatternNumber));
- 
- 			JApplication.kikanDatabase.sendNoResultQuery(sb.toString());
- 
- 			StringBuilder sbKP = new StringBuilder();
- 			sbKP.append("DELETE FROM T_KENSHIN_P_S WHERE K_P_NO = ");
- 			sbKP.append(JQueryConvert.queryConvert(KenshinPatternNumber));
- 
- 			JApplication.kikanDatabase.sendNoResultQuery(sbKP.toString());
- 		} catch (SQLException f) {
- 			f.printStackTrace();
- 			JErrorMessage.show("M3922", this);
- 		}
- 	}
- 
- 	/* all削除 */
- 	private void deleteKenshinPattern(){
- 
- 		try {
- 
- 			StringBuilder sb = new StringBuilder();
- 			StringBuilder sbWhere = new StringBuilder();
- 
- 			sb.append("DELETE FROM T_KENSHIN_P_M ");
- 			sbWhere.append(" WHERE K_P_NO <> '-1' ");
- 			sbWhere.append(" AND K_P_NO <> '1' ");
- 			sbWhere.append(" AND K_P_NO <> '2' ");
- 
- 			JApplication.kikanDatabase.sendNoResultQuery(sb.toString() + sbWhere.toString());
- 
- 			StringBuilder sbKP = new StringBuilder();
- 			sbKP.append("DELETE FROM T_KENSHIN_P_S ");
- 
- 			JApplication.kikanDatabase.sendNoResultQuery(sbKP.toString() + sbWhere.toString());
- 		} catch (SQLException f) {
- 			f.printStackTrace();
- 			JErrorMessage.show("M3922", this);
- 		}
- 	}
  	/**
  	 * 備考編集ボタン
  	 */
--- 209,214 ----
***************
*** 782,797 ****
  		if (source == jButton_End) {
  			pushedEndButton(e);
  		}
! 		else if (source == jButton_Import)
! 		{
! 			logger.info(jButton_Import.getText());
! 			pushedImportButton(e);
! 		}
! 		else if (source == jButton_Export)
! 		{
! 			logger.info(jButton_Export.getText());
! 			pushedExportButton(e);
! 		}
  		else if (source == jButton_Add) {
  			pushedAddButton(e);
  		}
--- 280,286 ----
  		if (source == jButton_End) {
  			pushedEndButton(e);
  		}
! 
  		else if (source == jButton_Add) {
  			pushedAddButton(e);
  		}
***************
*** 813,855 ****
  		}
  	}
  
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 		switch(keyEvent.getKeyCode()){
- 		case KeyEvent.VK_F1:
- 			logger.info(jButton_End.getText());
- 			pushedEndButton(null);break;
- 		// edit s.inoue 2010/03/24
- 		case KeyEvent.VK_F4:
- 			logger.info(jButton_Import.getText());
- 			pushedImportButton(null);break;
- 		case KeyEvent.VK_F5:
- 			logger.info(jButton_Export.getText());
- 			pushedExportButton(null);break;
- 		case KeyEvent.VK_F6:
- 			logger.info(jButton_Add.getText());
- 			pushedAddButton(null);break;
- 		case KeyEvent.VK_F7:
- 			if (jButton_NoteEdit.isEnabled()){
- 				logger.info(jButton_NoteEdit.getText());
- 				pushedNoteEditButton(null);
- 			}
- 			break;
- 		case KeyEvent.VK_F9:
- 			logger.info(jButton_Edit.getText());
- 			pushedEditButton(null);break;
- 		case KeyEvent.VK_F11:
- 			logger.info(jButton_Copy.getText());
- 			pushedCopyButton(null);break;
- 		case KeyEvent.VK_F12:
- 			if (jButton_Delete.isEnabled()){
- 				logger.info(jButton_Delete.getText());
- 				pushedDeleteButton(null);
- 			}
- 			break;
- 		}
- 	}
- 
  	/**
  	 * 遷移先の画面から戻ってきた場合
  	 */
--- 302,307 ----
***************
*** 868,875 ****
  		int[] selectedRowIndeces = model.getSelectedRows();
  		boolean singleRowButtonEnable = false;
  		boolean deleteButtonEnable = false;
- 		// add h.yoshitama 2009/11/20
- 		boolean noteEditButtonEnable = false;
  
  		/* 選択中の行数が 1 の場合 */
  		if (selectedRowIndeces.length == 1) {
--- 320,325 ----
***************
*** 879,886 ****
  
  			if (!kpNo.equals("1") && !kpNo.equals("2")) {
  				deleteButtonEnable = true;
- 				// add h.yoshitama 2009/11/20
- 				noteEditButtonEnable = true;
  			}
  		}
  
--- 329,334 ----
***************
*** 889,896 ****
  		jButton_Copy.setEnabled(singleRowButtonEnable);
  
  		jButton_Delete.setEnabled(deleteButtonEnable);
- 		// add h.yoshitama 2009/11/20
- 		jButton_NoteEdit.setEnabled(noteEditButtonEnable);
  	}
  }
  
--- 337,342 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinTeikeiMaintenanceFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinTeikeiMaintenanceFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinTeikeiMaintenanceFrame.java	Mon Dec 14 14:54:22 2009
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinTeikeiMaintenanceFrame.java	Tue Aug 11 17:55:30 2009
***************
*** 167,173 ****
  			jLabel_MainExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
  			jLabel_MainExpl.setName("jLabel1");
  			jLabel_Title = new JLabel();
! 			jLabel_Title.setText("所見マスタメンテナンス");
  			jLabel_Title.setFont(new Font("Dialog", Font.PLAIN, 18));
  			jLabel_Title.setBackground(new Color(153, 204, 255));
  			jLabel_Title.setForeground(new Color(51, 51, 51));
--- 167,173 ----
  			jLabel_MainExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
  			jLabel_MainExpl.setName("jLabel1");
  			jLabel_Title = new JLabel();
! 			jLabel_Title.setText("定型文マスタメンテナンス");
  			jLabel_Title.setFont(new Font("Dialog", Font.PLAIN, 18));
  			jLabel_Title.setBackground(new Color(153, 204, 255));
  			jLabel_Title.setForeground(new Color(51, 51, 51));
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinTeikeiMaintenanceFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinTeikeiMaintenanceFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinTeikeiMaintenanceFrameCtrl.java	Thu Dec 17 11:34:22 2009
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKenshinTeikeiMaintenanceFrameCtrl.java	Tue Aug 11 17:55:30 2009
***************
*** 5,12 ****
  import java.util.ArrayList;
  import java.util.Hashtable;
  
- import org.apache.log4j.Logger;
- 
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTable;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellPosition;
--- 5,10 ----
***************
*** 21,27 ****
  	private String patternNumber = null;
  	private JSimpleTable leftTable = new JSimpleTable();
  	private JSimpleTable rightTable = new JSimpleTable();
! 	private static Logger logger = Logger.getLogger(JKenshinTeikeiMaintenanceFrameCtrl.class);
  	/**
  	 * @param PatternNum 編集する健診パターンの番号
  	 */
--- 19,25 ----
  	private String patternNumber = null;
  	private JSimpleTable leftTable = new JSimpleTable();
  	private JSimpleTable rightTable = new JSimpleTable();
! 
  	/**
  	 * @param PatternNum 編集する健診パターンの番号
  	 */
***************
*** 278,299 ****
  		Object source = e.getSource();
  		if( source == jButton_End )
  		{
- 			logger.info(jButton_End.getText());
  			pushedEndButton( e );
  		}
  		else if( source == jButton_Register )
  		{
- 			logger.info(jButton_Register.getText());
  			pushedRegisterButton( e );
  		}
  		else if( source == jButton_ToLeft )
  		{
- 			logger.info(jButton_ToLeft.getText());
  			pushedToLeftButton( e );
  		}
  		else if( source == jButton_ToRight )
  		{
- 			logger.info(jButton_ToRight.getText());
  			pushedToRightButton( e );
  		}
  	}
--- 276,306 ----
  		Object source = e.getSource();
  		if( source == jButton_End )
  		{
  			pushedEndButton( e );
  		}
+ 
+ //		else if( source == jButton_Cancel )
+ //		{
+ //			pushedCancelButton( e );
+ //		}
+ 
  		else if( source == jButton_Register )
  		{
  			pushedRegisterButton( e );
  		}
+ 
+ //		else if( source == jButton_Clear )
+ //		{
+ //			pushedClearButton( e );
+ //		}
+ 
  		else if( source == jButton_ToLeft )
  		{
  			pushedToLeftButton( e );
  		}
+ 
  		else if( source == jButton_ToRight )
  		{
  			pushedToRightButton( e );
  		}
  	}
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKikanDBBackupFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKikanDBBackupFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKikanDBBackupFrame.java	Mon Apr 19 19:13:04 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKikanDBBackupFrame.java	Tue Aug 11 17:55:30 2009
***************
*** 23,29 ****
  import java.awt.Insets;
  
  
! public class JKikanDBBackupFrame extends JFrame implements ActionListener,KeyListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
--- 23,29 ----
  import java.awt.Insets;
  
  
! public class JKikanDBBackupFrame extends JFrame implements ActionListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
***************
*** 52,58 ****
  
  	/**
  	 * This method initializes this
! 	 *
  	 * @return void
  	 */
  	private void initialize() {
--- 52,58 ----
  
  	/**
  	 * This method initializes this
! 	 * 
  	 * @return void
  	 */
  	private void initialize() {
***************
*** 68,80 ****
  		this.setTitle(ViewSettings.getTokuteFrameTitleWithKikanInfomation());
  		this.setSize(ViewSettings.getFrameCommonSize());
  		this.setLocationRelativeTo( null );
! 		this.setVisible(true);
  		/* --------------------------------------------------- */
  	}
  
  	/**
  	 * This method initializes jPanel_Content
! 	 *
  	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_Content() {
--- 68,80 ----
  		this.setTitle(ViewSettings.getTokuteFrameTitleWithKikanInfomation());
  		this.setSize(ViewSettings.getFrameCommonSize());
  		this.setLocationRelativeTo( null );
! 		this.setVisible(true);		
  		/* --------------------------------------------------- */
  	}
  
  	/**
  	 * This method initializes jPanel_Content
! 	 * 
  	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_Content() {
***************
*** 91,99 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_ButtonArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_ButtonArea() {
  		if (jPanel_ButtonArea == null) {
--- 91,99 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_ButtonArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_ButtonArea() {
  		if (jPanel_ButtonArea == null) {
***************
*** 130,138 ****
  	}
  
  	/**
! 	 * This method initializes jButton_End
! 	 *
! 	 * @return javax.swing.ExtendedButton
  	 */
  	private ExtendedButton getJButton_End() {
  		if (jButton_End == null) {
--- 130,138 ----
  	}
  
  	/**
! 	 * This method initializes jButton_End	
! 	 * 	
! 	 * @return javax.swing.ExtendedButton	
  	 */
  	private ExtendedButton getJButton_End() {
  		if (jButton_End == null) {
***************
*** 140,156 ****
  //			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  //			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
- 			jButton_End.setMnemonic(KeyEvent.VK_R);
  		}
  		return jButton_End;
  	}
  
  	/**
! 	 * This method initializes jPanel_NaviArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_NaviArea() {
  		if (jPanel_NaviArea == null) {
--- 140,155 ----
  //			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  //			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
  	}
  
  	/**
! 	 * This method initializes jPanel_NaviArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_NaviArea() {
  		if (jPanel_NaviArea == null) {
***************
*** 176,184 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_TitleArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_TitleArea() {
  		if (jPanel_TitleArea == null) {
--- 175,183 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_TitleArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_TitleArea() {
  		if (jPanel_TitleArea == null) {
***************
*** 197,205 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea2
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_ExplArea2() {
  		if (jPanel_ExplArea2 == null) {
--- 196,204 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea2	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_ExplArea2() {
  		if (jPanel_ExplArea2 == null) {
***************
*** 218,226 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea1
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_ExplArea1() {
  		if (jPanel_ExplArea1 == null) {
--- 217,225 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea1	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_ExplArea1() {
  		if (jPanel_ExplArea1 == null) {
***************
*** 234,247 ****
  	}
  
  	/**
! 	 * This method initializes jButton_Delete
! 	 *
! 	 * @return javax.swing.ExtendedButton
  	 */
  	private ExtendedButton getJButton_Delete() {
  		if (jButton_Delete == null) {
  			jButton_Delete = new ExtendedButton();
! 			jButton_Delete.setText("削除(F12)");
  //			jButton_Delete.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Delete.addActionListener(this);
  		}
--- 233,246 ----
  	}
  
  	/**
! 	 * This method initializes jButton_Delete	
! 	 * 	
! 	 * @return javax.swing.ExtendedButton	
  	 */
  	private ExtendedButton getJButton_Delete() {
  		if (jButton_Delete == null) {
  			jButton_Delete = new ExtendedButton();
! 			jButton_Delete.setText("削除");
  //			jButton_Delete.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Delete.addActionListener(this);
  		}
***************
*** 249,262 ****
  	}
  
  	/**
! 	 * This method initializes jButton_Restore
! 	 *
! 	 * @return javax.swing.ExtendedButton
  	 */
  	private ExtendedButton getJButton_Restore() {
  		if (jButton_Restore == null) {
  			jButton_Restore = new ExtendedButton();
! 			jButton_Restore.setText("復元(F11)");
  //			jButton_Restore.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Restore.addActionListener(this);
  		}
--- 248,261 ----
  	}
  
  	/**
! 	 * This method initializes jButton_Restore	
! 	 * 	
! 	 * @return javax.swing.ExtendedButton	
  	 */
  	private ExtendedButton getJButton_Restore() {
  		if (jButton_Restore == null) {
  			jButton_Restore = new ExtendedButton();
! 			jButton_Restore.setText("復元");
  //			jButton_Restore.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Restore.addActionListener(this);
  		}
***************
*** 264,278 ****
  	}
  
  	/**
! 	 * This method initializes jButton_Backup
! 	 *
! 	 * @return javax.swing.ExtendedButton
  	 */
  	private ExtendedButton getJButton_Backup() {
  		if (jButton_Backup == null) {
  			jButton_Backup = new ExtendedButton();
! 			jButton_Backup.setText("バックアップ(F9)");
! 			jButton_Backup.setPreferredSize(new Dimension(130, 25));
  //			jButton_Backup.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Backup.addActionListener(this);
  		}
--- 263,277 ----
  	}
  
  	/**
! 	 * This method initializes jButton_Backup	
! 	 * 	
! 	 * @return javax.swing.ExtendedButton	
  	 */
  	private ExtendedButton getJButton_Backup() {
  		if (jButton_Backup == null) {
  			jButton_Backup = new ExtendedButton();
! 			jButton_Backup.setText("バックアップ");
! 			jButton_Backup.setPreferredSize(new Dimension(100, 25));
  //			jButton_Backup.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Backup.addActionListener(this);
  		}
***************
*** 280,293 ****
  	}
  
  	/**
! 	 * This method initializes jButton_Reload
! 	 *
! 	 * @return javax.swing.ExtendedButton
  	 */
  	private ExtendedButton getJButton_Reload() {
  		if (jButton_Reload == null) {
  			jButton_Reload = new ExtendedButton();
! 			jButton_Reload.setText("再表示(F7)");
  //			jButton_Reload.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Reload.addActionListener(this);
  		}
--- 279,292 ----
  	}
  
  	/**
! 	 * This method initializes jButton_Reload	
! 	 * 	
! 	 * @return javax.swing.ExtendedButton	
  	 */
  	private ExtendedButton getJButton_Reload() {
  		if (jButton_Reload == null) {
  			jButton_Reload = new ExtendedButton();
! 			jButton_Reload.setText("再表示");
  //			jButton_Reload.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Reload.addActionListener(this);
  		}
***************
*** 295,303 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_Table
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_Table() {
  		if (jPanel_Table == null) {
--- 294,302 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_Table	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_Table() {
  		if (jPanel_Table == null) {
***************
*** 311,324 ****
  	public void actionPerformed( ActionEvent e )
  	{
  	}
! 
  	/*
  	 * FrameSize Control
  	 */
  	public void validate()
  	{
  		Rectangle rect = getBounds();
! 
  		super.validate();
  
  		/* Modified 2008/03/09 若月  */
--- 310,323 ----
  	public void actionPerformed( ActionEvent e )
  	{
  	}
! 	
  	/*
  	 * FrameSize Control
  	 */
  	public void validate()
  	{
  		Rectangle rect = getBounds();
! 		
  		super.validate();
  
  		/* Modified 2008/03/09 若月  */
***************
*** 342,363 ****
  		}
  		/* --------------------------------------------------- */
  	}
- 
- 	@Override
- 	public void keyPressed(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyReleased(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyTyped(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
  }
\ No newline at end of file
--- 341,344 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKikanDBBackupFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKikanDBBackupFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKikanDBBackupFrameCtrl.java	Mon Apr 19 18:18:38 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKikanDBBackupFrameCtrl.java	Tue Nov 17 10:31:50 2009
***************
*** 23,30 ****
  import javax.swing.table.DefaultTableCellRenderer;
  import javax.swing.table.TableColumnModel;
  
- import org.apache.log4j.Logger;
- 
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellRowRenderer;
  
  /**
--- 23,28 ----
***************
*** 38,44 ****
  
  	/* フォーカス移動制御 */
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
! 	private static Logger logger = Logger.getLogger(JKikanDBBackupFrameCtrl.class);
  	/**
  	 *  コンストラクタ
  	 *
--- 36,42 ----
  
  	/* フォーカス移動制御 */
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
! 
  	/**
  	 *  コンストラクタ
  	 *
***************
*** 90,100 ****
  		this.focusTraversalPolicy.addComponent(this.jButton_Delete);
  		this.focusTraversalPolicy.addComponent(jButton_End);
  
- 		// add s.inoue 2009/12/02
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			Component comp = focusTraversalPolicy.getComponent(i);
- 			comp.addKeyListener(this);
- 		}
  	}
  
  	/**
--- 88,93 ----
***************
*** 205,212 ****
  
  			m_model.addData(aryData);
  		}
! 
! 		// edit s.inoue 2009/11/17
  		m_model.setAutoCreateRowSorter(false);
  		m_model.refreshTable();
  		// 最初に選択する項目の設定
--- 198,204 ----
  
  			m_model.addData(aryData);
  		}
! 		// edit s.inoue 2009/10/31
  		m_model.setAutoCreateRowSorter(false);
  		m_model.refreshTable();
  		// 最初に選択する項目の設定
***************
*** 528,575 ****
  	public void actionPerformed(ActionEvent e) {
  		Object source = e.getSource();
  		if (source == jButton_End) {
- 			logger.info(jButton_End.getText());
  			pushedEndButton(e);
  		}
  		else if (source == jButton_Delete) {
- 			logger.info(jButton_Delete.getText());
  			pushedDeleteButton(e);
  		}
  		else if (source == jButton_Restore) {
- 			logger.info(jButton_Restore.getText());
  			pushedRestoreButton(e);
  		}
  		else if (source == jButton_Backup) {
- 			logger.info(jButton_Backup.getText());
  			pushedBackupButton(e);
  		}
  		else if (source == jButton_Reload) {
- 			logger.info(jButton_Reload.getText());
  			pushedReloadButton(e);
  		}
  	}
- 
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 		switch(keyEvent.getKeyCode()){
- 		case KeyEvent.VK_F1:
- 			logger.info(jButton_End.getText());
- 			pushedEndButton(null);break;
- 		case KeyEvent.VK_F7:
- 			logger.info(jButton_Reload.getText());
- 			pushedReloadButton(null);break;
- 		case KeyEvent.VK_F9:
- 			logger.info(jButton_Backup.getText());
- 			pushedBackupButton(null);break;
- 		case KeyEvent.VK_F11:
- 			logger.info(jButton_Restore.getText());
- 			pushedRestoreButton(null);break;
- 		case KeyEvent.VK_F12:
- 			logger.info(jButton_Delete.getText());
- 			pushedDeleteButton(null);break;
- 		}
- 	}
- 
  }
  
  //Source Code Version Tag System v1.00  -- Do not remove --
--- 520,544 ----
  	public void actionPerformed(ActionEvent e) {
  		Object source = e.getSource();
  		if (source == jButton_End) {
  			pushedEndButton(e);
  		}
+ 
  		else if (source == jButton_Delete) {
  			pushedDeleteButton(e);
  		}
+ 
  		else if (source == jButton_Restore) {
  			pushedRestoreButton(e);
  		}
+ 
  		else if (source == jButton_Backup) {
  			pushedBackupButton(e);
  		}
+ 
  		else if (source == jButton_Reload) {
  			pushedReloadButton(e);
  		}
  	}
  }
  
  //Source Code Version Tag System v1.00  -- Do not remove --
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKojinRegisterFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKojinRegisterFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKojinRegisterFrame.java	Wed Apr 21 17:18:08 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKojinRegisterFrame.java	Wed Feb 24 17:45:24 2010
***************
*** 23,29 ****
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedTextField;
  import jp.or.med.orca.jma_tokutei.common.component.TitleLabel;
  import jp.or.med.orca.jma_tokutei.common.component.ImeController.ImeMode;
- import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  import javax.swing.JTextField;
  import java.awt.Color;
--- 23,28 ----
***************
*** 137,143 ****
  	protected JPanel jPanel11 = null;
  	protected JPanel jPanel12 = null;
  	protected JPanel jPanel20 = null;
- 	protected JPanel jPanelsep = null;
  
  	protected ExtendedLabel jLabel_requiredExample = null;
  	protected ExtendedLabel jLabel_importantExample = null;
--- 136,141 ----
***************
*** 208,214 ****
  	protected ExtendedLabel jLabel_futangaku_format = null;
  	protected ExtendedLabel jLabel272 = null;
  	protected ExtendedLabel jLabel_spacer = null;
- 
  	protected ExtendedLabel jLabel_address_format1 = null;
  	protected ExtendedLabel jLabel51 = null;
  	protected ExtendedLabel jLabel_hometel_format = null;
--- 206,211 ----
***************
*** 272,279 ****
  	private void initialize() {
  		this.setContentPane(getJPanel_Content());
  		this.setTitle(ViewSettings.getTokuteFrameTitleWithKikanInfomation());
! 		// edit s.inoue 2010/04/14
! //		this.setSize(new Dimension(1182, 857));
  		// this.setSize(new Dimension(920, 660));
  		this.setPreferredSize(ViewSettings.getFrameCommonSize());
  		this.setMinimumSize(ViewSettings.getFrameCommonSize());
--- 269,275 ----
  	private void initialize() {
  		this.setContentPane(getJPanel_Content());
  		this.setTitle(ViewSettings.getTokuteFrameTitleWithKikanInfomation());
! 		// edit s.inoue 2009/10/13
  		// this.setSize(new Dimension(920, 660));
  		this.setPreferredSize(ViewSettings.getFrameCommonSize());
  		this.setMinimumSize(ViewSettings.getFrameCommonSize());
***************
*** 330,336 ****
  			jButton_End = new ExtendedButton();
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
--- 326,332 ----
  			jButton_End = new ExtendedButton();
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
! 			jButton_End.setText("戻る");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
***************
*** 541,555 ****
--- 537,560 ----
  
  	public void actionPerformed( ActionEvent e )
  	{
+ 
  	}
+ 
  	public void itemStateChanged(ItemEvent e)
  	{
+ 
  	}
+ 
  	public void keyPressed(KeyEvent arg0) {
+ 
  	}
+ 
  	public void keyReleased(KeyEvent arg0) {
+ 
  	}
+ 
  	public void keyTyped(KeyEvent arg0) {
+ 
  	}
  
  	private ExtendedTextField getJTextField_ORCAID() {
***************
*** 564,571 ****
  	private ExtendedTextField getJTextField_JyushinkenID() {
  		if (jTextField_JyushinkenID == null) {
  			jTextField_JyushinkenID = new ExtendedTextField("",	11,	ImeMode.IME_OFF);
- 			// edit s.inoue 2010/01/15
- 			jTextField_JyushinkenID.setPreferredSize(new Dimension(150, 20));
  			jTextField_JyushinkenID.addActionListener(this);
  		}
  		return jTextField_JyushinkenID;
--- 569,574 ----
***************
*** 574,581 ****
  	private ExtendedTextField getJTextField_IssueDate() {
  		if (jTextField_IssueDate == null) {
  			jTextField_IssueDate = new ExtendedTextField("", 8, ImeMode.IME_OFF);
- 			// edit s.inoue 2010/01/15
- 			jTextField_IssueDate.setPreferredSize(new Dimension(150, 20));
  			jTextField_IssueDate.addActionListener(this);
  		}
  		return jTextField_IssueDate;
--- 577,582 ----
***************
*** 584,591 ****
  	private ExtendedTextField getJTextField_LimitDate() {
  		if (jTextField_LimitDate == null) {
  			jTextField_LimitDate = new ExtendedTextField("", 8, ImeMode.IME_OFF);
- 			// edit s.inoue 2010/01/15
- 			jTextField_LimitDate.setPreferredSize(new Dimension(150, 20));
  			jTextField_LimitDate.addActionListener(this);
  		}
  		return jTextField_LimitDate;
--- 585,590 ----
***************
*** 622,629 ****
  	private ExtendedTextField getJTextField_NameKana() {
  		if (jTextField_NameKana == null) {
  			jTextField_NameKana = new ExtendedTextField(ImeMode.IME_ZENKAKU_KANA);
! 			// edit s.inoue 2010/01/15
! 			jTextField_NameKana.setPreferredSize(new Dimension(150, 20));
  			// add ver2 s.inoue 2009/05/07
  			jTextField_NameKana.addFocusListener(this);
  			jTextField_NameKana.addActionListener(this);
--- 621,627 ----
  	private ExtendedTextField getJTextField_NameKana() {
  		if (jTextField_NameKana == null) {
  			jTextField_NameKana = new ExtendedTextField(ImeMode.IME_ZENKAKU_KANA);
! 			//jTextField_NameKana.setPreferredSize(new Dimension(185, 20));
  			// add ver2 s.inoue 2009/05/07
  			jTextField_NameKana.addFocusListener(this);
  			jTextField_NameKana.addActionListener(this);
***************
*** 676,682 ****
  			jTextField_ZipCode = new ExtendedTextField("",7, ImeMode.IME_OFF);
  			jTextField_ZipCode.setPreferredSize(new Dimension(80, 20));
  			jTextField_ZipCode.addActionListener(this);
- 			jTextField_ZipCode.addFocusListener(this);
  		}
  		return jTextField_ZipCode;
  	}
--- 674,679 ----
***************
*** 844,850 ****
  	private ExtendedButton getJButton_Register() {
  		if (jButton_Register == null) {
  			jButton_Register = new ExtendedButton();
! 			jButton_Register.setText("登録(F12)");
  			jButton_Register.addActionListener(this);
  		}
  		return jButton_Register;
--- 841,847 ----
  	private ExtendedButton getJButton_Register() {
  		if (jButton_Register == null) {
  			jButton_Register = new ExtendedButton();
! 			jButton_Register.setText("登録");
  			jButton_Register.addActionListener(this);
  		}
  		return jButton_Register;
***************
*** 858,864 ****
  	private ExtendedButton getJButton_Call() {
  		if (jButton_Call == null) {
  			jButton_Call = new ExtendedButton();
! 			jButton_Call.setText("データ呼出(F6)");
  			jButton_Call.addActionListener(this);
  		}
  		return jButton_Call;
--- 855,861 ----
  	private ExtendedButton getJButton_Call() {
  		if (jButton_Call == null) {
  			jButton_Call = new ExtendedButton();
! 			jButton_Call.setText("データ呼出");
  			jButton_Call.addActionListener(this);
  		}
  		return jButton_Call;
***************
*** 872,878 ****
  	private ExtendedButton getJButton_Clear() {
  		if (jButton_Clear == null) {
  			jButton_Clear = new ExtendedButton();
! 			jButton_Clear.setText("クリア(F2)");
  			jButton_Clear.addActionListener(this);
  		}
  		return jButton_Clear;
--- 869,875 ----
  	private ExtendedButton getJButton_Clear() {
  		if (jButton_Clear == null) {
  			jButton_Clear = new ExtendedButton();
! 			jButton_Clear.setText("クリア");
  			jButton_Clear.addActionListener(this);
  		}
  		return jButton_Clear;
***************
*** 886,894 ****
  	private ExtendedButton getJButton_ORCA() {
  		if (jButton_ORCA == null) {
  			jButton_ORCA = new ExtendedButton();
! 			jButton_ORCA.setText("日レセ読込(N)");
  			jButton_ORCA.addActionListener(this);
- 			jButton_ORCA.setMnemonic(KeyEvent.VK_N);
  		}
  		return jButton_ORCA;
  	}
--- 883,890 ----
  	private ExtendedButton getJButton_ORCA() {
  		if (jButton_ORCA == null) {
  			jButton_ORCA = new ExtendedButton();
! 			jButton_ORCA.setText("日レセ読込");
  			jButton_ORCA.addActionListener(this);
  		}
  		return jButton_ORCA;
  	}
***************
*** 915,921 ****
  	private ExtendedButton getJButton_Print() {
  		if (jButton_Print == null) {
  			jButton_Print = new ExtendedButton();
! 			jButton_Print.setText("入力票印刷(F5)");
  			jButton_Print.addActionListener(this);
  		}
  		return jButton_Print;
--- 911,917 ----
  	private ExtendedButton getJButton_Print() {
  		if (jButton_Print == null) {
  			jButton_Print = new ExtendedButton();
! 			jButton_Print.setText("入力票印刷");
  			jButton_Print.addActionListener(this);
  		}
  		return jButton_Print;
***************
*** 1582,1587 ****
--- 1578,1584 ----
  			// edit s.inoue 2010/02/08 不具合対応
  			jPanel5.add(getJTextField_FAXNumber(), gridBagConstraints39);
  			jPanel5.add(getJTextField_CellPhone(), gridBagConstraints40);
+ 
  		}
  		return jPanel5;
  	}
***************
*** 1783,1796 ****
  			gridBagConstraints63.anchor = GridBagConstraints.WEST;
  			gridBagConstraints63.fill = GridBagConstraints.WEST;
  
- 			// edit s.inoue 2010/04/14
- //			GridBagConstraints gridBagConstraints64 = new GridBagConstraints();
- //			gridBagConstraints64.fill = GridBagConstraints.EAST;
- //			gridBagConstraints64.anchor = GridBagConstraints.EAST;
- //			gridBagConstraints64.insets = new Insets(0, 183, 0, 0);
- //			gridBagConstraints64.gridwidth = 5;
- //			gridBagConstraints64.gridy = 0;
- //			gridBagConstraints64.gridx = 6;
  
  			// edit s.inoue 2009/10/01
  //			GridBagConstraints gridBagConstraints64 = new GridBagConstraints();
--- 1780,1785 ----
***************
*** 1823,1831 ****
  			jPanel20.add(jLabel127, gridBagConstraints16);
  			jPanel20.add(getJTextField_NingenDocTanka(), gridBagConstraints10);
  			jPanel20.add(jLabel128, gridBagConstraints18);
- 			// edit s.inoue 2010/04/14
- //			jPanel20.add(getJPanelsep(), gridBagConstraints64);
- 
  			// del s.inoue 2009/10/15
  //			jPanel20.add(getJPanelKihon(), gridBagConstraints62);
  //			jPanel20.add(getJPanelDoc(), gridBagConstraints63);
--- 1812,1817 ----
***************
*** 1834,1853 ****
  	}
  
  	/**
- 	 * This method initializes jPanel3
- 	 *
- 	 * @return javax.swing.JPanel
- 	 */
- //	private JPanel getJPanelsep() {
- //		if (jPanelsep == null) {
- //			jPanelsep = new JPanel();
- //			jPanelsep.setLayout(new GridBagLayout());
- ////			jPanelsep.setBorder(BorderFactory.createCompoundBorder(BorderFactory.createLineBorder(Color.gray, 1), BorderFactory.createEmptyBorder(5, 5, 5, 5)));
- //		}
- //		return jPanelsep;
- //	}
- 
- 	/**
  	 * This method initializes jComboBox_ItakuKubun
  	 *
  	 * @return javax.swing.ExtendedComboBox
--- 1820,1825 ----
***************
*** 3298,3304 ****
  			GridBagConstraints gridBagConstraints126 = new GridBagConstraints();
  			gridBagConstraints126.insets = new Insets(0, 5, 0, 0);
  			gridBagConstraints126.gridy = 0;
- 			gridBagConstraints126.gridwidth = 1;
  			gridBagConstraints126.gridx = 5;
  			GridBagConstraints gridBagConstraints124 = new GridBagConstraints();
  			gridBagConstraints124.insets = new Insets(0, 5, 0, 0);
--- 3270,3275 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKojinRegisterFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKojinRegisterFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKojinRegisterFrameCtrl.java	Wed Apr 28 12:51:54 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JKojinRegisterFrameCtrl.java	Wed Feb 24 17:45:24 2010
***************
*** 6,12 ****
  import java.awt.event.*;
  import java.awt.print.PrinterException;
  import java.util.ArrayList;
- import java.util.HashMap;
  import java.util.Hashtable;
  import java.util.Iterator;
  import java.util.Vector;
--- 6,11 ----
***************
*** 16,22 ****
  
  import javax.swing.JButton;
  import javax.swing.JFrame;
- import javax.swing.JTextArea;
  import javax.swing.event.PopupMenuEvent;
  import javax.swing.text.JTextComponent;
  
--- 15,20 ----
***************
*** 63,69 ****
   */
  public class JKojinRegisterFrameCtrl extends JKojinRegisterFrame {
  	private static final String STRING_UNIT_PERCENT = "％";
! 	private static final String STRING_UNIT_YEN = "円";
  	private static final int COMBOBOX_NUMBER_START_INDEX = 1;
  	private static final String TEXT_NO_NAME = "（名称が設定されていません）";
  	final static int ADD_MODE = 1;
--- 61,67 ----
   */
  public class JKojinRegisterFrameCtrl extends JKojinRegisterFrame {
  	private static final String STRING_UNIT_PERCENT = "％";
! 	private static final String STRING_UNIT_YEN = "円";  //  @jve:decl-index=0:
  	private static final int COMBOBOX_NUMBER_START_INDEX = 1;
  	private static final String TEXT_NO_NAME = "（名称が設定されていません）";
  	final static int ADD_MODE = 1;
***************
*** 92,100 ****
  	private static String func_keiyakuCode = "01";
  	private static String func_futanCode = "02";
  	private static String func_nyuryokuCode = "03";
! 	private boolean keiyakuCode_flg = false;
! 	private boolean futanCode_flg = false;
! 	private boolean nyuryokuCode_flg = false;
  
  	// edit s.inoue 2009/10/04
  	private IDialog dateSelectDialog;
--- 90,98 ----
  	private static String func_keiyakuCode = "01";
  	private static String func_futanCode = "02";
  	private static String func_nyuryokuCode = "03";
! //	private boolean keiyakuCode_flg = false;
! //	private boolean futanCode_flg = false;
! //	private boolean nyuryokuCode_flg = false;
  
  	// edit s.inoue 2009/10/04
  	private IDialog dateSelectDialog;
***************
*** 209,221 ****
  		this.initializeComponentBgColor();
  
  		// edit s.inoue 2009/12/20
! 		initilazeFunctionSetting();
  
  		/* フォーカスの遷移順を指定する。 */
  		this.initializeFocusTraversal();
- 		// add s.inoue 2009/11/09
- 		/* Fキー用イベント設定 */
- 		functionListner();
  
  		/* 性別の選択をクリア */
  		this.groupSex.clearSelection();
--- 207,216 ----
  		this.initializeComponentBgColor();
  
  		// edit s.inoue 2009/12/20
! //		initilazeFunctionSetting();
  
  		/* フォーカスの遷移順を指定する。 */
  		this.initializeFocusTraversal();
  
  		/* 性別の選択をクリア */
  		this.groupSex.clearSelection();
***************
*** 252,288 ****
  
  	}
  
! 	/* 個別設定用 */
! 	private void initilazeFunctionSetting(){
! 		ArrayList<Hashtable<String, String>> result = null;
! 
! 		try{
! 			StringBuilder sb = new StringBuilder();
! 			sb.append("SELECT FUNCTION_CD,FUNCTION_FLG");
! 			sb.append(" FROM T_SCREENFUNCTION ");
! 			sb.append(" WHERE SCREEN_CD = ");
! 			sb.append(JQueryConvert.queryConvert("001"));
! 
! 			result = JApplication.kikanDatabase.sendExecuteQuery(sb.toString());
! 		}catch(Exception ex){
! 			logger.error(ex.getMessage());
! 		}
! 
! 		for (int i = 0; i < result.size(); i++) {
! 			Hashtable<String, String> item = result.get(i);
! 
! 			String functionCd = item.get("FUNCTION_CD");
! 
! 			if (func_keiyakuCode.equals(functionCd)){
! 				keiyakuCode_flg = item.get("FUNCTION_FLG").equals("1")?true:false;
! 			}else if (func_futanCode.equals(functionCd)){
! 				futanCode_flg =  item.get("FUNCTION_FLG").equals("1")?true:false;
! 			}else if (func_nyuryokuCode.equals(functionCd)){
! 				nyuryokuCode_flg =  item.get("FUNCTION_FLG").equals("1")?true:false;
! 			}
! 		}
! 
! 	}
  
  	/**
  	 * コンポーネントの非活性化を行う
--- 247,283 ----
  
  	}
  
! //	/* 個別設定用 */
! //	private void initilazeFunctionSetting(){
! //		ArrayList<Hashtable<String, String>> result = null;
! //
! //		try{
! //			StringBuilder sb = new StringBuilder();
! //			sb.append("SELECT FUNCTION_CD,FUNCTION_FLG");
! //			sb.append(" FROM T_SCREENFUNCTION ");
! //			sb.append(" WHERE SCREEN_CD = ");
! //			sb.append(JQueryConvert.queryConvert("001"));
! //
! //			result = JApplication.kikanDatabase.sendExecuteQuery(sb.toString());
! //		}catch(Exception ex){
! //			logger.error(ex.getMessage());
! //		}
! //
! //		for (int i = 0; i < result.size(); i++) {
! //			Hashtable<String, String> item = result.get(i);
! //
! //			String functionCd = item.get("FUNCTION_CD");
! //
! //			if (func_keiyakuCode.equals(functionCd)){
! //				keiyakuCode_flg = item.get("FUNCTION_FLG").equals("1")?true:false;
! //			}else if (func_futanCode.equals(functionCd)){
! //				futanCode_flg =  item.get("FUNCTION_FLG").equals("1")?true:false;
! //			}else if (func_nyuryokuCode.equals(functionCd)){
! //				nyuryokuCode_flg =  item.get("FUNCTION_FLG").equals("1")?true:false;
! //			}
! //		}
! //
! //	}
  
  	/**
  	 * コンポーネントの非活性化を行う
***************
*** 382,389 ****
  		this.focusTraversalPolicy.addComponent(jTextField_ZipCode);
  		this.focusTraversalPolicy.addComponent(jTextField_Address);
  		this.focusTraversalPolicy.addComponent(jTextField_HomePhone);
- 		this.focusTraversalPolicy.addComponent(jTextField_FAXNumber);
  		this.focusTraversalPolicy.addComponent(jTextField_CellPhone);
  		this.focusTraversalPolicy.addComponent(jTextField_EMail);
  		this.focusTraversalPolicy.addComponent(jTextField_MobileMail);
  
--- 377,384 ----
  		this.focusTraversalPolicy.addComponent(jTextField_ZipCode);
  		this.focusTraversalPolicy.addComponent(jTextField_Address);
  		this.focusTraversalPolicy.addComponent(jTextField_HomePhone);
  		this.focusTraversalPolicy.addComponent(jTextField_CellPhone);
+ 		this.focusTraversalPolicy.addComponent(jTextField_FAXNumber);
  		this.focusTraversalPolicy.addComponent(jTextField_EMail);
  		this.focusTraversalPolicy.addComponent(jTextField_MobileMail);
  
***************
*** 402,429 ****
  		this.focusTraversalPolicy.addComponent(jButton_End);
  	}
  
- 	// add s.inoue 2009/11/09
- 	private void functionListner(){
- 
- 		// add s.inoue 2009/12/02
- 		Component comp =null;
- 		HashMap<Integer, Component> compHm = new HashMap<Integer, Component>();
- 
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			comp = focusTraversalPolicy.getComponent(i);
- 			System.out.println(comp.getName());
- 
- 			if (!compHm.containsValue(comp)){
- 				comp.addKeyListener(this);
- 				compHm.put(i, comp);
- 			}
- 		}
- 
- //		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- //			Component comp = focusTraversalPolicy.getComponent(i);
- //			comp.addKeyListener(this);
- //		}
- 	}
  	/**
  	 * 保険者番号、名称の一覧を取得する。
  	 */
--- 397,402 ----
***************
*** 591,599 ****
  			beforeRegister();
  
  			// add s.inoue 2009/12/20
! 			if(nyuryokuCode_flg){
! 				pushedPrintButton(null);
! 			}
  
  			String query = this.createRegisterSql();
  			if (query != null) {
--- 564,572 ----
  			beforeRegister();
  
  			// add s.inoue 2009/12/20
! //			if(nyuryokuCode_flg){
! //				pushedPrintButton(null);
! //			}
  
  			String query = this.createRegisterSql();
  			if (query != null) {
***************
*** 1067,1079 ****
  
  		// add ver2 s.inoue 2009/07/30
  		String selectedItem
! 			= JValidate.validateSendSeinengapi(this.jTextField_Birthday.getText());
  
  		if ( selectedItem == null) {
  			jTextField_YearOld.setText("");
  		}
  		jTextField_YearOld.setText(String.valueOf(FiscalYearUtil.getFiscalYear(selectedItem)));
  
  		this.initMadoFutan(
  				jComboBox_MadoguchiKihonSyubetu,
  				jTextField_MadoguchiKihon,
--- 1040,1053 ----
  
  		// add ver2 s.inoue 2009/07/30
  		String selectedItem
! 		= JValidate.validateSendSeinengapi(this.jTextField_Birthday.getText());
  
  		if ( selectedItem == null) {
  			jTextField_YearOld.setText("");
  		}
  		jTextField_YearOld.setText(String.valueOf(FiscalYearUtil.getFiscalYear(selectedItem)));
  
+ 
  		this.initMadoFutan(
  				jComboBox_MadoguchiKihonSyubetu,
  				jTextField_MadoguchiKihon,
***************
*** 1409,1425 ****
  
  		// add s.inoue 2009/12/20
  		// 契約情報
! 		if (!keiyakuCode_flg){
  			jTextField_hokenjaNumber.setText("");
  			jComboBox_HokenjyaNumber.setSelectedIndex(0);
  			jTextField_daikouNumber.setText("");
  			jComboBox_DaikouNumber.setSelectedItem("");
  			jComboBox_DaikouNumber.setSelectedIndex(0);
  			jTextField_TorimatomeName.setText("");
! 		}
  
  		// 負担情報
! 		if (!futanCode_flg){
  			jTextField_MadoguchiDock.setText("");
  			jTextField_MadoguchiKihon.setText("");
  			jTextField_MadoguchiShousai.setText("");
--- 1383,1399 ----
  
  		// add s.inoue 2009/12/20
  		// 契約情報
! //		if (!keiyakuCode_flg){
  			jTextField_hokenjaNumber.setText("");
  			jComboBox_HokenjyaNumber.setSelectedIndex(0);
  			jTextField_daikouNumber.setText("");
  			jComboBox_DaikouNumber.setSelectedItem("");
  			jComboBox_DaikouNumber.setSelectedIndex(0);
  			jTextField_TorimatomeName.setText("");
! //		}
  
  		// 負担情報
! //		if (!futanCode_flg){
  			jTextField_MadoguchiDock.setText("");
  			jTextField_MadoguchiKihon.setText("");
  			jTextField_MadoguchiShousai.setText("");
***************
*** 1437,1443 ****
  			this.jTextField_TsuikaJyougen.setText("");
  			this.jTextField_DockJougen.setText("");
  			this.jTextField_sonotaHutangaku.setText("");
! 		}
  
  		jTextField_HomePhone.setText("");
  		jTextField_IssueDate.setText("");
--- 1411,1417 ----
  			this.jTextField_TsuikaJyougen.setText("");
  			this.jTextField_DockJougen.setText("");
  			this.jTextField_sonotaHutangaku.setText("");
! //		}
  
  		jTextField_HomePhone.setText("");
  		jTextField_IssueDate.setText("");
***************
*** 1695,1711 ****
  		try {
  			Hashtable<String, String> tmpKojin = new Hashtable<String, String>();
  
! 			// edit s.inoue 2010/04/15
  			// 健診実施日
- 			String selectKenshinDate = dateSelectDialog.getKenshinDate();
  			String kenshinDate = dateSelectDialog.getKenshinDate();
! 			String printKenshinDate = "";
! 			if (!selectKenshinDate.equals("")){
! 				printKenshinDate = selectKenshinDate;
! 			}else{
! 				printKenshinDate = kenshinDate;
! 			}
! 			tmpKojin.put("KENSA_NENGAPI", printKenshinDate);
  
  			// 受診券整理番号
  			String jyushinkenID = jTextField_JyushinkenID.getText();
--- 1669,1678 ----
  		try {
  			Hashtable<String, String> tmpKojin = new Hashtable<String, String>();
  
! 			// add s.inoue 2009/10/19
  			// 健診実施日
  			String kenshinDate = dateSelectDialog.getKenshinDate();
! 			tmpKojin.put("KENSA_NENGAPI", kenshinDate);
  
  			// 受診券整理番号
  			String jyushinkenID = jTextField_JyushinkenID.getText();
***************
*** 1781,1794 ****
  				KojinData.setPrintKojinDataSQL(tmpKojin);
  			// edit s.inoue 2009/10/31
  			} else {
! 				if (!KojinData.setPrintKojinData(tmpKojin,this.mode)) {
  					// データ移送失敗
  					System.out.println("印刷に失敗しました。（データ移送失敗　個人）");
  				}
  			}
  
  			/*
! 			 * 印刷データ生成 個人データを格y納する
  			 */
  			Hashtable<String, Object> PrintData = new Hashtable<String, Object>();
  			PrintData.put("Kojin", KojinData);
--- 1748,1761 ----
  				KojinData.setPrintKojinDataSQL(tmpKojin);
  			// edit s.inoue 2009/10/31
  			} else {
! 				if (!KojinData.setPrintKojinData(tmpKojin)) {
  					// データ移送失敗
  					System.out.println("印刷に失敗しました。（データ移送失敗　個人）");
  				}
  			}
  
  			/*
! 			 * 印刷データ生成 個人データを格納する
  			 */
  			Hashtable<String, Object> PrintData = new Hashtable<String, Object>();
  			PrintData.put("Kojin", KojinData);
***************
*** 2198,2207 ****
  
  		} else if (selectedIndex == 2){
  			jTextField_SyubetsuNum.setText("2");
! 			// edit s.inoue 2010/01/30 true→false
  			jTextField_Jougen.setEditable(false);
  		} else if (selectedIndex == 3){
! 			// edit s.inoue 2010/01/30 true→false
  			jTextField_SyubetsuNum.setText("3");
  			jTextField_Jougen.setEditable(false);
  
--- 2165,2174 ----
  
  		} else if (selectedIndex == 2){
  			jTextField_SyubetsuNum.setText("2");
! 			// edit s.inoue 2010/01/29 true→false
  			jTextField_Jougen.setEditable(false);
  		} else if (selectedIndex == 3){
! 			// edit s.inoue 2010/01/29 true→false
  			jTextField_SyubetsuNum.setText("3");
  			jTextField_Jougen.setEditable(false);
  
***************
*** 2510,2577 ****
  			}
  			jTextField_YearOld.setText(String.valueOf(FiscalYearUtil.getFiscalYear(selectedItem)));
  		}
- 		// add s.inoue 2010/03/29
- 		else if(source.equals(this.jTextField_ZipCode)){
- 			if (jTextField_ZipCode.getText().equals(""))
- 				return;
- 
- 			String zipText = setZipCodeAddress(this.jTextField_ZipCode.getText());
- 			if (zipText.equals(""))
- 				return;
- 
- 			jTextField_Address.setText(zipText);
- 		}
- 	}
- 
- 	// add s.inoue 2010/04/02
- 	private String setZipCodeAddress(String zipCode){
- 
- 			ArrayList<Hashtable<String, String>> result = new ArrayList<Hashtable<String, String>>();
- 			Hashtable<String, String> resultItem = new Hashtable<String, String>();
- 
- 			StringBuilder sb = new StringBuilder();
- 
- 			sb.append("SELECT ADDRESS FROM T_POST,");
- 			sb.append("(SELECT SUBSTRING(POST_CD FROM 1 FOR 3) || SUBSTRING(POST_CD FROM 5 FOR 4) POSTCD,");
- 			sb.append(" POST_CD SP_POSTCD FROM T_POST) SUB_POST");
- 			sb.append(" where SUB_POST.POSTCD = ");
- 			sb.append(JQueryConvert.queryConvert(zipCode));
- 			sb.append(" and SUB_POST.SP_POSTCD = T_POST.POST_CD ");
- 
- 			try {
- 				result = JApplication.systemDatabase.sendExecuteQuery(sb.toString());
- 			} catch (SQLException e) {
- 				logger.error(e.getMessage());
- 				e.printStackTrace();
- 			}
- 
- 			if (result.size() <= 0)
- 				return "";
- 
- 			resultItem = result.get(0);
- 			return resultItem.get("ADDRESS");
- 
- 	}
- 
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 		switch(keyEvent.getKeyCode()){
- 			case KeyEvent.VK_F1:
- 				logger.info(jButton_End.getText());
- 				dispose();break;
- 			case KeyEvent.VK_F2:
- 				logger.info(jButton_Clear.getText());
- 				pushedClearButton();break;
- 			case KeyEvent.VK_F5:
- 				logger.info(jButton_Print.getText());
- 				pushedPrintButton(null);break;
- 			case KeyEvent.VK_F6:
- 				logger.info(jButton_Call.getText());
- 				pushedCallButton(null);break;
- 			case KeyEvent.VK_F12:
- 				logger.info(jButton_Register.getText());
- 				pushedRegisterButton(null);break;
- 		}
  	}
  
  }
--- 2477,2482 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JLoginFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JLoginFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JLoginFrame.java	Thu Apr 22 16:57:48 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JLoginFrame.java	Tue Aug 11 17:55:30 2009
***************
*** 34,41 ****
  
  /**
   * ログイン画面
!  *
!  * Modified 2008/03/07 若月 画面コンポーネントを UI 改良版に置き換えた。
   */
  public class JLoginFrame extends JFrame implements ActionListener, KeyListener
  {
--- 34,41 ----
  
  /**
   * ログイン画面
!  * 
!  * Modified 2008/03/07 若月 画面コンポーネントを UI 改良版に置き換えた。 
   */
  public class JLoginFrame extends JFrame implements ActionListener, KeyListener
  {
***************
*** 54,61 ****
  	protected JPanel jPanel1 = null;
  //	protected ExtendedTextField jTextField_KikanNumber = null;
  	protected ExtendedTextField jTextField_UserName = null;
- 	// add s.inoue 2009/12/18
- 	protected ExtendedButton jButton_Setting = null;
  	protected ExtendedButton jButton_Login = null;
  	protected ExtendedPasswordField jPasswordField_Password = null;
  	protected ExtendedLabel jLabel = null;
--- 54,59 ----
***************
*** 74,80 ****
  
  	/**
  	 * This method initializes this
! 	 *
  	 * @return void
  	 */
  	private void initialize() {
--- 72,78 ----
  
  	/**
  	 * This method initializes this
! 	 * 
  	 * @return void
  	 */
  	private void initialize() {
***************
*** 96,102 ****
  
  	/**
  	 * This method initializes jPanel_Content
! 	 *
  	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_Content() {
--- 94,100 ----
  
  	/**
  	 * This method initializes jPanel_Content
! 	 * 
  	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_Content() {
***************
*** 113,121 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_ButtonArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_ButtonArea() {
  		if (jPanel_ButtonArea == null) {
--- 111,119 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_ButtonArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_ButtonArea() {
  		if (jPanel_ButtonArea == null) {
***************
*** 128,149 ****
  			gridBagConstraints7.gridx = 0;
  			GridBagConstraints gridBagConstraints6 = new GridBagConstraints();
  			gridBagConstraints6.gridy = 0;
! 			gridBagConstraints6.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints6.gridx = 2;
! 
! 			// add s.inoue 2009/12/18
! 			GridBagConstraints gridBagConstraints5 = new GridBagConstraints();
! 			gridBagConstraints5.gridy = 0;
! 			gridBagConstraints5.weightx = 1.0D;
! 			gridBagConstraints5.anchor = GridBagConstraints.EAST;
! 			gridBagConstraints5.gridx = 1;
! 
  			jPanel_ButtonArea = new JPanel();
  			jPanel_ButtonArea.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
  			jPanel_ButtonArea.setLayout(new GridBagLayout());
! 			// add s.inoue 2009/12/18
! 			jPanel_ButtonArea.add(getJButton_Setting(), gridBagConstraints6);
! 			jPanel_ButtonArea.add(getJButton_Login(), gridBagConstraints5);
  			jPanel_ButtonArea.add(getJButton_End(), gridBagConstraints7);
  			jPanel_ButtonArea.add(getJButton_Version(), gridBagConstraints8);
  		}
--- 126,138 ----
  			gridBagConstraints7.gridx = 0;
  			GridBagConstraints gridBagConstraints6 = new GridBagConstraints();
  			gridBagConstraints6.gridy = 0;
! 			gridBagConstraints6.weightx = 1.0D;
! 			gridBagConstraints6.anchor = GridBagConstraints.EAST;
! 			gridBagConstraints6.gridx = 1;
  			jPanel_ButtonArea = new JPanel();
  			jPanel_ButtonArea.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
  			jPanel_ButtonArea.setLayout(new GridBagLayout());
! 			jPanel_ButtonArea.add(getJButton_Login(), gridBagConstraints6);
  			jPanel_ButtonArea.add(getJButton_End(), gridBagConstraints7);
  			jPanel_ButtonArea.add(getJButton_Version(), gridBagConstraints8);
  		}
***************
*** 151,159 ****
  	}
  
  	/**
! 	 * This method initializes jButton_End
! 	 *
! 	 * @return javax.swing.EventHandleButton
  	 */
  	private ExtendedButton getJButton_End() {
  		if (jButton_End == null) {
--- 140,148 ----
  	}
  
  	/**
! 	 * This method initializes jButton_End	
! 	 * 	
! 	 * @return javax.swing.EventHandleButton	
  	 */
  	private ExtendedButton getJButton_End() {
  		if (jButton_End == null) {
***************
*** 162,193 ****
  //			jButton_End.setActionCommand("終了");
  //			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
  //			jButton_End.setPreferredSize(new Dimension(75, 25));
! 			jButton_End.setText("終了(F1)");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
  	}
  
  	/**
! 	 * This method initializes jPanel_NaviArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_NaviArea() {
  		if (jPanel_NaviArea == null) {
  			CardLayout cardLayout2 = new CardLayout();
  			cardLayout2.setHgap(10);
  			cardLayout2.setVgap(10);
! 
  			/* Modified 2008/03/11 若月  */
  			/* --------------------------------------------------- */
  //			jLabel_MainExpl = new ExtendedLabel();
! ////			　2008/03/04 yabu
  //			/*
  //						jLabel_MainExpl.setText("健診機関番号、ユーザー名、パスワードを入力後、確認ボタンを押してください。");
  //			*/
  //						jLabel_MainExpl.setText("健診機関番号、ユーザー名、パスワードを入力後、ログインを押してください。");
! ////			　2008/03/04 yabu
  //						jLabel_MainExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
  //						jLabel_MainExpl.setName("jLabel1");
  			/* --------------------------------------------------- */
--- 151,182 ----
  //			jButton_End.setActionCommand("終了");
  //			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
  //			jButton_End.setPreferredSize(new Dimension(75, 25));
! 			jButton_End.setText("終了");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
  	}
  
  	/**
! 	 * This method initializes jPanel_NaviArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_NaviArea() {
  		if (jPanel_NaviArea == null) {
  			CardLayout cardLayout2 = new CardLayout();
  			cardLayout2.setHgap(10);
  			cardLayout2.setVgap(10);
! 			
  			/* Modified 2008/03/11 若月  */
  			/* --------------------------------------------------- */
  //			jLabel_MainExpl = new ExtendedLabel();
! ////			　2008/03/04 yabu 
  //			/*
  //						jLabel_MainExpl.setText("健診機関番号、ユーザー名、パスワードを入力後、確認ボタンを押してください。");
  //			*/
  //						jLabel_MainExpl.setText("健診機関番号、ユーザー名、パスワードを入力後、ログインを押してください。");
! ////			　2008/03/04 yabu 
  //						jLabel_MainExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
  //						jLabel_MainExpl.setName("jLabel1");
  			/* --------------------------------------------------- */
***************
*** 206,212 ****
  			/* --------------------------------------------------- */
  			jLabel_Title = new TitleLabel("tokutei.login.frame.title");
  			/* --------------------------------------------------- */
! 
  			jPanel_NaviArea = new JPanel();
  			jPanel_NaviArea.setLayout(cardLayout2);
  			jPanel_NaviArea.add(getJPanel_TitleArea(), getJPanel_TitleArea().getName());
--- 195,201 ----
  			/* --------------------------------------------------- */
  			jLabel_Title = new TitleLabel("tokutei.login.frame.title");
  			/* --------------------------------------------------- */
! 			
  			jPanel_NaviArea = new JPanel();
  			jPanel_NaviArea.setLayout(cardLayout2);
  			jPanel_NaviArea.add(getJPanel_TitleArea(), getJPanel_TitleArea().getName());
***************
*** 215,223 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_TitleArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_TitleArea() {
  		if (jPanel_TitleArea == null) {
--- 204,212 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_TitleArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_TitleArea() {
  		if (jPanel_TitleArea == null) {
***************
*** 236,244 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea2
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_ExplArea2() {
  		if (jPanel_ExplArea2 == null) {
--- 225,233 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea2	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_ExplArea2() {
  		if (jPanel_ExplArea2 == null) {
***************
*** 257,265 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea1
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_ExplArea1() {
  		if (jPanel_ExplArea1 == null) {
--- 246,254 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea1	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_ExplArea1() {
  		if (jPanel_ExplArea1 == null) {
***************
*** 273,281 ****
  	}
  
  	/**
! 	 * This method initializes jPanel
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel() {
  		if (jPanel == null) {
--- 262,270 ----
  	}
  
  	/**
! 	 * This method initializes jPanel	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel() {
  		if (jPanel == null) {
***************
*** 290,298 ****
  	}
  
  	/**
! 	 * This method initializes jPanel1
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel1() {
  		if (jPanel1 == null) {
--- 279,287 ----
  	}
  
  	/**
! 	 * This method initializes jPanel1	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel1() {
  		if (jPanel1 == null) {
***************
*** 347,353 ****
  			jPanel1.add(getJTextField_Password(), gridBagConstraints4);
  			jPanel1.add(jLabel2, gridBagConstraints5);
  			jPanel1.add(getJComboBox_kikanNumber(), gridBagConstraints1);
! 
  			/* Deleted 2008/03/09 若月 機関番号をコンボボックスから取得するように変更 */
  			/* --------------------------------------------------- */
  //			jPanel1.add(getJTextField_KikanNumber(), gridBagConstraints2);
--- 336,342 ----
  			jPanel1.add(getJTextField_Password(), gridBagConstraints4);
  			jPanel1.add(jLabel2, gridBagConstraints5);
  			jPanel1.add(getJComboBox_kikanNumber(), gridBagConstraints1);
! 			
  			/* Deleted 2008/03/09 若月 機関番号をコンボボックスから取得するように変更 */
  			/* --------------------------------------------------- */
  //			jPanel1.add(getJTextField_KikanNumber(), gridBagConstraints2);
***************
*** 359,367 ****
  	/* Deleted 2008/03/09 若月 機関番号をコンボボックスから取得するように変更 */
  	/* --------------------------------------------------- */
  //	/**
! //	 * This method initializes jTextField_KikanNumber
! //	 *
! //	 * @return javax.swing.EventHandleTextField
  //	 */
  //	private ExtendedTextField getJTextField_KikanNumber() {
  //		if (jTextField_KikanNumber == null) {
--- 348,356 ----
  	/* Deleted 2008/03/09 若月 機関番号をコンボボックスから取得するように変更 */
  	/* --------------------------------------------------- */
  //	/**
! //	 * This method initializes jTextField_KikanNumber	
! //	 * 	
! //	 * @return javax.swing.EventHandleTextField	
  //	 */
  //	private ExtendedTextField getJTextField_KikanNumber() {
  //		if (jTextField_KikanNumber == null) {
***************
*** 373,466 ****
  	/* --------------------------------------------------- */
  
  	/**
! 	 * This method initializes jTextField_UserName
! 	 *
! 	 * @return javax.swing.EventHandleTextField
  	 */
  	private ExtendedTextField getJTextField_UserName() {
  		if (jTextField_UserName == null) {
  			jTextField_UserName = new ExtendedTextField(ImeMode.IME_OFF);
- 			jTextField_UserName.setPreferredSize(new Dimension(100, 20));
  			jTextField_UserName.addActionListener(this);
  		}
  		return jTextField_UserName;
  	}
  
  	/**
! 	 * This method initializes jTextField_Password
! 	 *
! 	 * @return javax.swing.JPasswordField
  	 */
  	private ExtendedPasswordField getJTextField_Password() {
  		if (jPasswordField_Password == null) {
  			jPasswordField_Password = new ExtendedPasswordField();
- 			jPasswordField_Password.setPreferredSize(new Dimension(100, 20));
  			jPasswordField_Password.addActionListener(this);
  		}
  		return jPasswordField_Password;
  	}
! 
  	/**
! 	 * This method initializes jButton_Setting
! 	 *
! 	 * @return javax.swing.EventHandleButton
! 	 */
! 	private ExtendedButton getJButton_Setting() {
! 		if (jButton_Setting == null) {
! 			jButton_Setting = new ExtendedButton();
! 			jButton_Setting.setText("環境設定(F7)");
! 			jButton_Setting.setPreferredSize(new Dimension(120, 25));
! 			jButton_Setting.setVisible(true);
! 			jButton_Setting.addActionListener(this);
! 		}
! 		return jButton_Setting;
! 	}
! 
! 	/**
! 	 * This method initializes jButton_Login
! 	 *
! 	 * @return javax.swing.EventHandleButton
  	 */
  	private ExtendedButton getJButton_Login() {
  		if (jButton_Login == null) {
  			jButton_Login = new ExtendedButton();
! 			jButton_Login.setText("ログイン(F12)");
  //			jButton_Login.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_Login.setPreferredSize(new Dimension(120, 25));
  			jButton_Login.setVisible(true);
  			jButton_Login.addActionListener(this);
  		}
  		return jButton_Login;
  	}
! 
  	/**
! 	 * This method initializes jButton_Version
! 	 *
! 	 * @return jp.or.med.orca.jma_tokutei.common.component.ExtendedButton
  	 */
  	private ExtendedToggleButton getJButton_Version() {
  		if (jButton_Version == null) {
  			jButton_Version = new ExtendedToggleButton();
  //			jButton_Version.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_Version.setPreferredSize(new Dimension(120, 25));
! 			jButton_Version.setText("バージョン(F9)");
  			jButton_Version.setVisible(true);
  			jButton_Version.addActionListener(this);
  		}
  		return jButton_Version;
! 	}
  
  	public void actionPerformed(ActionEvent e)
  	{
  	}
! 
  	/*
  	 * FrameSize Control
  	 */
  	public void validate()
  	{
  		Rectangle rect = getBounds();
! 
  		super.validate();
  
  		/* Modified 2008/03/09 若月  */
--- 362,437 ----
  	/* --------------------------------------------------- */
  
  	/**
! 	 * This method initializes jTextField_UserName	
! 	 * 	
! 	 * @return javax.swing.EventHandleTextField	
  	 */
  	private ExtendedTextField getJTextField_UserName() {
  		if (jTextField_UserName == null) {
  			jTextField_UserName = new ExtendedTextField(ImeMode.IME_OFF);
  			jTextField_UserName.addActionListener(this);
  		}
  		return jTextField_UserName;
  	}
  
  	/**
! 	 * This method initializes jTextField_Password	
! 	 * 	
! 	 * @return javax.swing.JPasswordField	
  	 */
  	private ExtendedPasswordField getJTextField_Password() {
  		if (jPasswordField_Password == null) {
  			jPasswordField_Password = new ExtendedPasswordField();
  			jPasswordField_Password.addActionListener(this);
  		}
  		return jPasswordField_Password;
  	}
! 	
  	/**
! 	 * This method initializes jButton_Login	
! 	 * 	
! 	 * @return javax.swing.EventHandleButton	
  	 */
  	private ExtendedButton getJButton_Login() {
  		if (jButton_Login == null) {
  			jButton_Login = new ExtendedButton();
! 			jButton_Login.setText("ログイン");
  //			jButton_Login.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jButton_Login.setPreferredSize(new Dimension(75, 25));
  			jButton_Login.setVisible(true);
  			jButton_Login.addActionListener(this);
  		}
  		return jButton_Login;
  	}
! 	
  	/**
! 	 * This method initializes jButton_Version	
! 	 * 	
! 	 * @return jp.or.med.orca.jma_tokutei.common.component.ExtendedButton	
  	 */
  	private ExtendedToggleButton getJButton_Version() {
  		if (jButton_Version == null) {
  			jButton_Version = new ExtendedToggleButton();
  //			jButton_Version.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jButton_Version.setPreferredSize(new Dimension(75, 25));
! 			jButton_Version.setText("バージョン");
  			jButton_Version.setVisible(true);
  			jButton_Version.addActionListener(this);
  		}
  		return jButton_Version;
! 	}	
  
  	public void actionPerformed(ActionEvent e)
  	{
  	}
! 	
  	/*
  	 * FrameSize Control
  	 */
  	public void validate()
  	{
  		Rectangle rect = getBounds();
! 		
  		super.validate();
  
  		/* Modified 2008/03/09 若月  */
***************
*** 481,494 ****
  						   rect.y,
  						   ViewSettings.getTokuteiLoginFrameWidth(),
  						   ViewSettings.getTokuteiLoginFrameHeight() );
! 			}
  		/* --------------------------------------------------- */
  	}
  
  	/**
! 	 * This method initializes jComboBox_kikanNumber
! 	 *
! 	 * @return javax.swing.JComboBox
  	 */
  	private JComboBox getJComboBox_kikanNumber() {
  		if (jComboBox_kikanNumber == null) {
--- 452,465 ----
  						   rect.y,
  						   ViewSettings.getTokuteiLoginFrameWidth(),
  						   ViewSettings.getTokuteiLoginFrameHeight() );
! 			}		
  		/* --------------------------------------------------- */
  	}
  
  	/**
! 	 * This method initializes jComboBox_kikanNumber	
! 	 * 	
! 	 * @return javax.swing.JComboBox	
  	 */
  	private JComboBox getJComboBox_kikanNumber() {
  		if (jComboBox_kikanNumber == null) {
***************
*** 498,513 ****
  		}
  		return jComboBox_kikanNumber;
  	}
! 
  	public void keyPressed(KeyEvent arg0) {
! 
  	}
  
  	public void keyReleased(KeyEvent arg0) {
! 
  	}
  
  	public void keyTyped(KeyEvent arg0) {
! 
  	}
  }
--- 469,484 ----
  		}
  		return jComboBox_kikanNumber;
  	}
! 	
  	public void keyPressed(KeyEvent arg0) {
! 		
  	}
  
  	public void keyReleased(KeyEvent arg0) {
! 		
  	}
  
  	public void keyTyped(KeyEvent arg0) {
! 		
  	}
  }
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JLoginFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JLoginFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JLoginFrameCtrl.java	Thu Apr 22 14:41:34 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JLoginFrameCtrl.java	Wed Oct 14 19:08:42 2009
***************
*** 1,6 ****
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
  
- import java.awt.Component;
  import java.awt.event.ActionEvent;
  import java.awt.event.ComponentAdapter;
  import java.awt.event.ComponentEvent;
--- 1,5 ----
***************
*** 16,25 ****
  import javax.swing.event.DocumentEvent;
  import javax.swing.event.DocumentListener;
  
- import org.apache.log4j.Logger;
- 
- import jp.or.med.orca.jma_tokutei.common.component.DialogFactory;
- import jp.or.med.orca.jma_tokutei.common.component.IDialog;
  import jp.or.med.orca.jma_tokutei.common.convert.JInteger;
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
  import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
--- 15,20 ----
***************
*** 52,61 ****
  	private static Pattern kikanInfomationPattern = Pattern.compile("^.* - (\\d{10})$");
  	/* フォーカス移動制御 */
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
- 	// edit s.inoue 2009/12/12
- 	private static org.apache.log4j.Logger logger = Logger.getLogger(JLoginFrameCtrl.class);
- 	// edit s.inoue 2009/12/18
- 	private IDialog settingDialog;
  
  	/**
  	 * コンストラクタ
--- 47,52 ----
***************
*** 122,133 ****
  		this.focusTraversalPolicy.addComponent(jButton_End);
  		jTextField_UserName.requestFocus();
  		this.jComboBox_kikanNumber.transferFocus();
- 
- 		// add s.inoue 2009/12/02
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			Component comp = focusTraversalPolicy.getComponent(i);
- 			comp.addKeyListener(this);
- 		}
  	}
  
  	/**
--- 113,118 ----
***************
*** 155,160 ****
--- 140,154 ----
  				String kikanName = item.get("KIKAN_NAME");
  
  				StringBuffer buffer = new StringBuffer();
+ 				// buffer.append(kikanNumber);
+ 				//
+ 				// if (kikanName != null && ! kikanName.isEmpty()) {
+ 				// buffer.append(" - ");
+ 				// buffer.append(kikanName);
+ 				// }
+ 				// else {
+ 				// buffer.append("（機関名称が設定されていません）");
+ 				// }
  				if (kikanName != null && !kikanName.isEmpty()) {
  					buffer.append(kikanName);
  				} else {
***************
*** 167,173 ****
--- 161,170 ----
  			}
  		}
  
+ 		/* Added 2008/05/14 若月  */
+ 		/* --------------------------------------------------- */
  		this.jComboBox_kikanNumber.setSelectedIndex(lastSelectedKikanInfomationIndex);
+ 		/* --------------------------------------------------- */
  
  		return retValue;
  	}
***************
*** 175,181 ****
--- 172,184 ----
  	private void initializeFrameTitle() {
  		StringBuffer buffer = new StringBuffer();
  
+ 		/* Modified 2008/05/16 若月  */
+ 		/* --------------------------------------------------- */
+ //		buffer.append(ViewSettings.getTokuteFrameTitleWithKikanInfomation());
+ 		/* --------------------------------------------------- */
  		buffer.append(ViewSettings.getTokuteFrameTitle());
+ 		/* --------------------------------------------------- */
+ 
  		buffer.append(" (Version ");
  		buffer.append(JApplication.versionNumber);
  		buffer.append(")");
***************
*** 202,245 ****
  		}
  	}
  
- 	// add s.inoue 2009/12/18
- 	/**
- 	 * 環境設定ボタン
- 	 */
- 	public void pushedSettingButton(ActionEvent e) {
- 		try {
- 			settingDialog
- 				= DialogFactory.getInstance().createDialog(this, null, null);
- 
- 			settingDialog.setMessageTitle("環境設定画面");
- 
- 			settingDialog.setVisible(true);
- 			// del s.inoue 2010/04/07
- 			// if (settingDialog.getStatus().equals(RETURN_VALUE.CANCEL))
- 			// 	return;
- 
- 			// add s.inoue 2009/12/18
- 			reloginSystem();
- 		} catch (Exception ex) {
- 			logger.error(ex.getMessage());
- 		}
- 	}
- 
- 	/* 再ログイン */
- 	private void reloginSystem(){
- 		try{
- 			// windowを全て閉じるLookAndFeel
- 			java.awt.Window[] win =this.getWindows();
- 			for (int i = 0; i < win.length; i++) {
- 				win[i].dispose();
- 			}
- 
- 			JScene.ChangeScene(new JLoginFrameCtrl());
- 
- 		} catch (Exception ex) {
- 			logger.error(ex.getMessage());
- 		}
- 	}
  	/**
  	 * ログインボタン
  	 */
--- 205,210 ----
***************
*** 262,267 ****
--- 227,237 ----
  		/* 機関番号 */
  		String kikan = (String) jComboBox_kikanNumber.getSelectedItem();
  
+ 		/* Deleted 2008/05/14 若月 クラス変数に変更。 */
+ 		/* --------------------------------------------------- */
+ //		Pattern p = Pattern.compile("^.* - (\\d{10})$");
+ 		/* --------------------------------------------------- */
+ 
  		Matcher m = kikanInfomationPattern.matcher(kikan);
  		String kikanNumber = null;
  		if (m.matches() && m.groupCount() > 0) {
***************
*** 302,309 ****
  		String dbPassword = resultItem.get("PASS");
  
  		if (!dbPassword.equals(password)) {
! 			// edit h.yoshitama 2009/11/10
! 			JErrorMessage.show("M1104", this);
  			return;
  		}
  
--- 272,278 ----
  		String dbPassword = resultItem.get("PASS");
  
  		if (!dbPassword.equals(password)) {
! 			JErrorMessage.show("M1105", this);
  			return;
  		}
  
***************
*** 370,406 ****
  			JExecLocker.getLockWithName(lockfileName);
  		} catch (Exception e) {
  			JErrorMessage.show("M1002", null);
  			return;
  		}
  
  		lastSelectedKikanInfomationIndex = this.jComboBox_kikanNumber.getSelectedIndex();
! 
! 		logger.info("機関番号:" + kikanNumber + "へログイン");
  
  		JScene.ChangeScene(new JMenuFrameCtrl());
  	}
  
  	public void actionPerformed(ActionEvent e) {
  		Object source = e.getSource();
  		if (source == jButton_Login) {
- 			logger.info(jButton_Login.getText());
  			pushedLoginButton();
  		}
  		else if (source == jButton_End) {
- 			logger.info(jButton_End.getText());
  			pushedEndButton(e);
  		}
  		else if (source == jButton_Version) {
- 			logger.info(jButton_Version.getText());
  			pushedVersionButton(e);
  		}
- 		// add s.inoue 2009/12/18
- 		else if (source == jButton_Setting) {
- 			logger.info(jButton_Setting.getText());
- 			pushedSettingButton(e);
- 		}
  		else if (source == jTextField_UserName) {
- 			logger.info(jTextField_UserName.getText());
  			jTextField_UserName.transferFocus();
  		}
  		else if (source == jPasswordField_Password) {
--- 339,396 ----
  			JExecLocker.getLockWithName(lockfileName);
  		} catch (Exception e) {
  			JErrorMessage.show("M1002", null);
+ 
+ //			System.exit(-1);
  			return;
  		}
  
+ 		/* Added 2008/05/14 若月 */
+ 		/* --------------------------------------------------- */
  		lastSelectedKikanInfomationIndex = this.jComboBox_kikanNumber.getSelectedIndex();
! 		/* --------------------------------------------------- */
  
  		JScene.ChangeScene(new JMenuFrameCtrl());
  	}
  
  	public void actionPerformed(ActionEvent e) {
+ 		/* Modified 2008/05/14 若月 */
+ 		/* --------------------------------------------------- */
+ 		// if (e.getSource() == jButton_Login) {
+ 		// pushedLoginButton();
+ 		// }
+ 		//
+ 		// if (e.getSource() == jButton_End) {
+ 		// pushedEndButton(e);
+ 		// }
+ 		//
+ 		// if (e.getSource() == jButton_Version) {
+ 		// pushedVersionButton(e);
+ 		// }
+ 		//
+ 		// if (e.getSource() == jTextField_UserName) {
+ 		// jTextField_UserName.transferFocus();
+ 		// }
+ 		//
+ 		// if (e.getSource() == jPasswordField_Password) {
+ 		// // ログインボタンが有効なときだけ処理を行う
+ 		// if (jButton_Login.isEnabled()) {
+ 		// pushedLoginButton();
+ 		// } else {
+ 		// jPasswordField_Password.transferFocus();
+ 		// }
+ 		// }
+ 		/* --------------------------------------------------- */
  		Object source = e.getSource();
  		if (source == jButton_Login) {
  			pushedLoginButton();
  		}
  		else if (source == jButton_End) {
  			pushedEndButton(e);
  		}
  		else if (source == jButton_Version) {
  			pushedVersionButton(e);
  		}
  		else if (source == jTextField_UserName) {
  			jTextField_UserName.transferFocus();
  		}
  		else if (source == jPasswordField_Password) {
***************
*** 411,416 ****
--- 401,407 ----
  				jPasswordField_Password.transferFocus();
  			}
  		}
+ 		/* --------------------------------------------------- */
  	}
  
  	public void keyTyped(KeyEvent e) {
***************
*** 424,466 ****
  		}
  	}
  
- 	// edit s.inoue 2010/04/16
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 		switch(keyEvent.getKeyCode()){
- 		case KeyEvent.VK_F1:
- 			logger.info(jButton_End.getText());
- 			pushedEndButton(null);break;
- 		case KeyEvent.VK_F7:
- 			logger.info(jButton_Setting.getText());
- 			pushedSettingButton(null);break;
- 		case KeyEvent.VK_F12:
- 			if(jButton_Login.isEnabled()){
- 				logger.info(jButton_Login.getText());
- 				pushedLoginButton();
- 			}
- 			break;
- 		case KeyEvent.VK_F9:
- 			logger.info(jButton_Version.getText());
- 			if(jButton_Version.isSelected()){
- 				jButton_Version.setSelected(false);
- 			}else{
- 				jButton_Version.setSelected(true);
- 			}
- 			pushedVersionButton(null);break;
- 		case KeyEvent.VK_ENTER:
- 			if (keyEvent.getComponent()== jPasswordField_Password){
- 				logger.info(jButton_Login.getText());
- 				// ログインボタンが有効なときだけ処理を行う
- 				if (jButton_Login.isEnabled()) {
- 					pushedLoginButton();
- 				} else {
- 					jPasswordField_Password.transferFocus();
- 				}
- 			}
- 		}
- 	}
- 
  	/**
  	 * ログインボタンのステータスをテキストフィールドの内容によって 変更するためのイベントリスナ
  	 */
--- 415,420 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JMasterMaintenanceFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JMasterMaintenanceFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JMasterMaintenanceFrame.java	Mon Apr 19 19:44:24 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JMasterMaintenanceFrame.java	Tue Nov 17 09:46:44 2009
***************
*** 23,29 ****
  /**
   * マスタメンテナンス画面
   */
! public class JMasterMaintenanceFrame extends JFrame implements ActionListener,KeyListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
--- 23,29 ----
  /**
   * マスタメンテナンス画面
   */
! public class JMasterMaintenanceFrame extends JFrame implements ActionListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
***************
*** 118,128 ****
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
- 			// add s.inoue 2009/12/02
- 			jButton_End.addKeyListener(this);
- 			jButton_End.setMnemonic(KeyEvent.VK_F1);
  		}
  		return jButton_End;
  	}
--- 118,125 ----
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
  	}
***************
*** 229,292 ****
  	 */
  	private JPanel getJPanel_center() {
  		if (jPanel_center == null) {
- 			/* 右側のボタン配置 */
  			GridBagConstraints gridBagConstraints7 = new GridBagConstraints();
- 			gridBagConstraints7.weighty = 1.0d;
- 			gridBagConstraints7.anchor = GridBagConstraints.NORTH;
- 			gridBagConstraints7.insets = new Insets(0, 0, 0, 0);
  			gridBagConstraints7.gridy = 6;
  			gridBagConstraints7.gridx = 0;
! 
! 			/* 左側のボタン配置 */
! 			GridBagConstraints gridBagConstraints8 = new GridBagConstraints();
! 			gridBagConstraints8.anchor = GridBagConstraints.NORTH;
! 			gridBagConstraints8.weighty = 1.0d;
! 			gridBagConstraints8.insets = new Insets(0, 20, 0, 0);
! 			gridBagConstraints8.gridy = 0;
! 			gridBagConstraints8.gridx = 1;
  
  			GridBagConstraints gridBagConstraints6 = new GridBagConstraints();
- 			gridBagConstraints6.weighty = 1.0d;
- 			gridBagConstraints6.anchor = GridBagConstraints.NORTH;
- 			gridBagConstraints6.insets = new Insets(0, 0, 0, 0);
  			gridBagConstraints6.gridy = 5;
  			gridBagConstraints6.gridx = 0;
  
  			GridBagConstraints gridBagConstraints5 = new GridBagConstraints();
- 			gridBagConstraints5.weighty = 1.0d;
- 			gridBagConstraints5.anchor = GridBagConstraints.NORTH;
- 			gridBagConstraints5.insets = new Insets(0, 0, 0, 0);
  			gridBagConstraints5.gridy = 4;
  			gridBagConstraints5.gridx = 0;
- 
  			GridBagConstraints gridBagConstraints4 = new GridBagConstraints();
- 			gridBagConstraints4.weighty = 1.0d;
- 			gridBagConstraints4.anchor = GridBagConstraints.NORTH;
- 			gridBagConstraints4.insets = new Insets(0, 0, 0, 0);
  			gridBagConstraints4.gridy = 3;
  			gridBagConstraints4.gridx = 0;
- 
  			GridBagConstraints gridBagConstraints3 = new GridBagConstraints();
- 			gridBagConstraints3.weighty = 1.0d;
- 			gridBagConstraints3.anchor = GridBagConstraints.NORTH;
- 			gridBagConstraints3.insets = new Insets(0, 0, 0, 0);
  			gridBagConstraints3.gridy = 2;
  			gridBagConstraints3.gridx = 0;
- 
  			GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
- 			gridBagConstraints2.weighty = 1.0d;
- 			gridBagConstraints2.anchor = GridBagConstraints.NORTH;
- 			gridBagConstraints2.insets = new Insets(0, 0, 0, 0);
  			gridBagConstraints2.gridy = 1;
  			gridBagConstraints2.gridx = 0;
- 
  			GridBagConstraints gridBagConstraints1 = new GridBagConstraints();
- 			gridBagConstraints1.weighty = 1.0d;
- 			gridBagConstraints1.anchor = GridBagConstraints.NORTH;
- 			gridBagConstraints1.insets = new Insets(0, 0, 0, 0);
  			gridBagConstraints1.gridy = 0;
  			gridBagConstraints1.gridx = 0;
- 
  			jPanel_center = new JPanel();
  			jPanel_center.setLayout(new GridBagLayout());
  			jPanel_center.add(getJButton_KenshinKoumokuMaintenance(), gridBagConstraints1);
--- 226,273 ----
  	 */
  	private JPanel getJPanel_center() {
  		if (jPanel_center == null) {
  			GridBagConstraints gridBagConstraints7 = new GridBagConstraints();
  			gridBagConstraints7.gridy = 6;
+ 			gridBagConstraints7.weighty = 1.0D;
+ 			gridBagConstraints7.anchor = GridBagConstraints.NORTH;
+ 			// edit ver2 s.inoue 2009/06/23
+ 			gridBagConstraints7.insets = new Insets(20, 0, 0, 0);
  			gridBagConstraints7.gridx = 0;
! 			// del ver2 s.inoue 2009/04/16
! //			GridBagConstraints gridBagConstraints8 = new GridBagConstraints();
! //			gridBagConstraints8.gridy = 6;
! //			gridBagConstraints8.weighty = 1.0D;
! //			gridBagConstraints8.anchor = GridBagConstraints.NORTH;
! //			gridBagConstraints8.insets = new Insets(0, 0, 0, 0);
! //			gridBagConstraints8.gridx = 0;
  
  			GridBagConstraints gridBagConstraints6 = new GridBagConstraints();
  			gridBagConstraints6.gridy = 5;
+ 			// delete ver2 s.inoue 2009/06/23
+ 			//gridBagConstraints6.weighty = 1.0D;
+ 			gridBagConstraints6.anchor = GridBagConstraints.NORTH;
+ 			gridBagConstraints6.insets = new Insets(20, 0, 0, 0);
  			gridBagConstraints6.gridx = 0;
  
  			GridBagConstraints gridBagConstraints5 = new GridBagConstraints();
  			gridBagConstraints5.gridy = 4;
+ 			gridBagConstraints5.insets = new Insets(20, 0, 0, 0);
  			gridBagConstraints5.gridx = 0;
  			GridBagConstraints gridBagConstraints4 = new GridBagConstraints();
  			gridBagConstraints4.gridy = 3;
+ 			gridBagConstraints4.insets = new Insets(20, 0, 0, 0);
  			gridBagConstraints4.gridx = 0;
  			GridBagConstraints gridBagConstraints3 = new GridBagConstraints();
  			gridBagConstraints3.gridy = 2;
+ 			gridBagConstraints3.insets = new Insets(20, 0, 0, 0);
  			gridBagConstraints3.gridx = 0;
  			GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
  			gridBagConstraints2.gridy = 1;
+ 			gridBagConstraints2.insets = new Insets(20, 0, 0, 0);
  			gridBagConstraints2.gridx = 0;
  			GridBagConstraints gridBagConstraints1 = new GridBagConstraints();
  			gridBagConstraints1.gridy = 0;
  			gridBagConstraints1.gridx = 0;
  			jPanel_center = new JPanel();
  			jPanel_center.setLayout(new GridBagLayout());
  			jPanel_center.add(getJButton_KenshinKoumokuMaintenance(), gridBagConstraints1);
***************
*** 296,303 ****
  			jPanel_center.add(getJButton_ShiharaiMaintenance(), gridBagConstraints5);
  			jPanel_center.add(getJButton_KikanMaintenance(), gridBagConstraints6);
  			jPanel_center.add(getJButton_NayoseMaintenance(), gridBagConstraints7);
! 			// add s.inoue 2009/11/25
! 			jPanel_center.add(getJButton_TeikeiMaintenance(), gridBagConstraints8);
  		}
  		return jPanel_center;
  	}
--- 277,285 ----
  			jPanel_center.add(getJButton_ShiharaiMaintenance(), gridBagConstraints5);
  			jPanel_center.add(getJButton_KikanMaintenance(), gridBagConstraints6);
  			jPanel_center.add(getJButton_NayoseMaintenance(), gridBagConstraints7);
! 
! 			// del ver2 s.inoue 2009/04/16
! 			//jPanel_center.add(getJButton_TeikeiMaintenance(), gridBagConstraints8);
  		}
  		return jPanel_center;
  	}
***************
*** 310,321 ****
  	private ExtendedButton getJButton_KikanMaintenance() {
  		if (jButton_KikanMaintenance == null) {
  			jButton_KikanMaintenance = new ExtendedButton();
! 			jButton_KikanMaintenance.setText("６-５．機関情報メンテナンス(5)");
! 			jButton_KikanMaintenance.setPreferredSize(new Dimension(250, 50));
  			jButton_KikanMaintenance.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_KikanMaintenance.addActionListener(this);
- 			jButton_KikanMaintenance.addKeyListener(this);
- 			jButton_KikanMaintenance.setMnemonic(KeyEvent.VK_5);
  		}
  		return jButton_KikanMaintenance;
  	}
--- 292,301 ----
  	private ExtendedButton getJButton_KikanMaintenance() {
  		if (jButton_KikanMaintenance == null) {
  			jButton_KikanMaintenance = new ExtendedButton();
! 			jButton_KikanMaintenance.setText("６-５．機関情報メンテナンス");
! 			jButton_KikanMaintenance.setPreferredSize(new Dimension(500, 50));
  			jButton_KikanMaintenance.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_KikanMaintenance.addActionListener(this);
  		}
  		return jButton_KikanMaintenance;
  	}
***************
*** 328,361 ****
  	private ExtendedButton getJButton_NayoseMaintenance() {
  		if (jButton_NayoseMaintenance == null) {
  			jButton_NayoseMaintenance = new ExtendedButton();
! 			jButton_NayoseMaintenance.setText("６-６．経年管理メンテナンス(6)");
! 			jButton_NayoseMaintenance.setPreferredSize(new Dimension(250, 50));
  			jButton_NayoseMaintenance.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_NayoseMaintenance.addActionListener(this);
- 			jButton_NayoseMaintenance.addKeyListener(this);
- 			jButton_NayoseMaintenance.setMnemonic(KeyEvent.VK_6);
  		}
  		return jButton_NayoseMaintenance;
  	}
  
! 	// add s.inoue 2009/11/25
! 	/**
! 	 * This method initializes jButton_KikanMaintenance
! 	 *
! 	 * @return javax.swing.ExtendedButton
! 	 */
! 	private ExtendedButton getJButton_TeikeiMaintenance() {
! 		if (jButton_TeikeiMaintenance == null) {
! 			jButton_TeikeiMaintenance = new ExtendedButton();
! 			jButton_TeikeiMaintenance.setText("６-７．所見マスタメンテナンス(7)");
! 			jButton_TeikeiMaintenance.setPreferredSize(new Dimension(250, 50));
! 			jButton_TeikeiMaintenance.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_TeikeiMaintenance.addActionListener(this);
! 			jButton_TeikeiMaintenance.addKeyListener(this);
! 			jButton_TeikeiMaintenance.setMnemonic(KeyEvent.VK_7);
! 		}
! 		return jButton_TeikeiMaintenance;
! 	}
  
  	/**
  	 * This method initializes jButton_KenshinPatternMaintenance
--- 308,337 ----
  	private ExtendedButton getJButton_NayoseMaintenance() {
  		if (jButton_NayoseMaintenance == null) {
  			jButton_NayoseMaintenance = new ExtendedButton();
! 			jButton_NayoseMaintenance.setText("６-６．経年管理メンテナンス");
! 			jButton_NayoseMaintenance.setPreferredSize(new Dimension(500, 50));
  			jButton_NayoseMaintenance.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_NayoseMaintenance.addActionListener(this);
  		}
  		return jButton_NayoseMaintenance;
  	}
  
! // delete ver2 s.inoue 2009/05/27
! //	/**
! //	 * This method initializes jButton_KikanMaintenance
! //	 *
! //	 * @return javax.swing.ExtendedButton
! //	 */
! //	private ExtendedButton getJButton_TeikeiMaintenance() {
! //		if (jButton_TeikeiMaintenance == null) {
! //			jButton_TeikeiMaintenance = new ExtendedButton();
! //			jButton_TeikeiMaintenance.setText("５-６．定型文マスタメンテナンス");
! //			jButton_TeikeiMaintenance.setPreferredSize(new Dimension(500, 50));
! //			jButton_TeikeiMaintenance.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jButton_TeikeiMaintenance.addActionListener(this);
! //		}
! //		return jButton_TeikeiMaintenance;
! //	}
  
  	/**
  	 * This method initializes jButton_KenshinPatternMaintenance
***************
*** 365,376 ****
  	private ExtendedButton getJButton_KenshinPatternMaintenance() {
  		if (jButton_KenshinPatternMaintenance == null) {
  			jButton_KenshinPatternMaintenance = new ExtendedButton();
! 			jButton_KenshinPatternMaintenance.setText("６-３．健診パターンメンテナンス(3)");
! 			jButton_KenshinPatternMaintenance.setPreferredSize(new Dimension(250, 50));
  			jButton_KenshinPatternMaintenance.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_KenshinPatternMaintenance.addActionListener(this);
- 			jButton_KenshinPatternMaintenance.addKeyListener(this);
- 			jButton_KenshinPatternMaintenance.setMnemonic(KeyEvent.VK_3);
  		}
  		return jButton_KenshinPatternMaintenance;
  	}
--- 341,350 ----
  	private ExtendedButton getJButton_KenshinPatternMaintenance() {
  		if (jButton_KenshinPatternMaintenance == null) {
  			jButton_KenshinPatternMaintenance = new ExtendedButton();
! 			jButton_KenshinPatternMaintenance.setText("６-３．健診パターンメンテナンス");
! 			jButton_KenshinPatternMaintenance.setPreferredSize(new Dimension(500, 50));
  			jButton_KenshinPatternMaintenance.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_KenshinPatternMaintenance.addActionListener(this);
  		}
  		return jButton_KenshinPatternMaintenance;
  	}
***************
*** 383,394 ****
  	private ExtendedButton getJButton_KenshinKoumokuMaintenance() {
  		if (jButton_KenshinKoumokuMaintenance == null) {
  			jButton_KenshinKoumokuMaintenance = new ExtendedButton();
! 			jButton_KenshinKoumokuMaintenance.setText("６-１．健診項目情報メンテナンス(1)");
! 			jButton_KenshinKoumokuMaintenance.setPreferredSize(new Dimension(250, 50));
  			jButton_KenshinKoumokuMaintenance.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_KenshinKoumokuMaintenance.addActionListener(this);
- 			jButton_KenshinKoumokuMaintenance.addKeyListener(this);
- 			jButton_KenshinKoumokuMaintenance.setMnemonic(KeyEvent.VK_1);
  		}
  		return jButton_KenshinKoumokuMaintenance;
  	}
--- 357,366 ----
  	private ExtendedButton getJButton_KenshinKoumokuMaintenance() {
  		if (jButton_KenshinKoumokuMaintenance == null) {
  			jButton_KenshinKoumokuMaintenance = new ExtendedButton();
! 			jButton_KenshinKoumokuMaintenance.setText("６-１．健診項目情報メンテナンス");
! 			jButton_KenshinKoumokuMaintenance.setPreferredSize(new Dimension(500, 50));
  			jButton_KenshinKoumokuMaintenance.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_KenshinKoumokuMaintenance.addActionListener(this);
  		}
  		return jButton_KenshinKoumokuMaintenance;
  	}
***************
*** 401,412 ****
  	private ExtendedButton getJButton_HokenjyaMaintenance() {
  		if (jButton_HokenjyaMaintenance == null) {
  			jButton_HokenjyaMaintenance = new ExtendedButton();
! 			jButton_HokenjyaMaintenance.setText("６-２．保険者情報メンテナンス(2)");
! 			jButton_HokenjyaMaintenance.setPreferredSize(new Dimension(250, 50));
  			jButton_HokenjyaMaintenance.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_HokenjyaMaintenance.addActionListener(this);
- 			jButton_HokenjyaMaintenance.addKeyListener(this);
- 			jButton_HokenjyaMaintenance.setMnemonic(KeyEvent.VK_2);
  		}
  		return jButton_HokenjyaMaintenance;
  	}
--- 373,382 ----
  	private ExtendedButton getJButton_HokenjyaMaintenance() {
  		if (jButton_HokenjyaMaintenance == null) {
  			jButton_HokenjyaMaintenance = new ExtendedButton();
! 			jButton_HokenjyaMaintenance.setText("６-２．保険者情報メンテナンス");
! 			jButton_HokenjyaMaintenance.setPreferredSize(new Dimension(500, 50));
  			jButton_HokenjyaMaintenance.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_HokenjyaMaintenance.addActionListener(this);
  		}
  		return jButton_HokenjyaMaintenance;
  	}
***************
*** 420,426 ****
  		if (jButton_KensaCenterCodeMaintenance == null) {
  			jButton_KensaCenterCodeMaintenance = new ExtendedButton();
  			jButton_KensaCenterCodeMaintenance.setText("６-４．検査センター項目コードメンテナンス");
! 			jButton_KensaCenterCodeMaintenance.setPreferredSize(new Dimension(250, 50));
  			jButton_KensaCenterCodeMaintenance.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_KensaCenterCodeMaintenance.setVisible(false);
  			jButton_KensaCenterCodeMaintenance.addActionListener(this);
--- 390,396 ----
  		if (jButton_KensaCenterCodeMaintenance == null) {
  			jButton_KensaCenterCodeMaintenance = new ExtendedButton();
  			jButton_KensaCenterCodeMaintenance.setText("６-４．検査センター項目コードメンテナンス");
! 			jButton_KensaCenterCodeMaintenance.setPreferredSize(new Dimension(500, 50));
  			jButton_KensaCenterCodeMaintenance.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_KensaCenterCodeMaintenance.setVisible(false);
  			jButton_KensaCenterCodeMaintenance.addActionListener(this);
***************
*** 436,447 ****
  	private ExtendedButton getJButton_ShiharaiMaintenance() {
  		if (jButton_ShiharaiMaintenance == null) {
  			jButton_ShiharaiMaintenance = new ExtendedButton();
! 			jButton_ShiharaiMaintenance.setText("６-４．支払代行情報メンテナンス(4)");
! 			jButton_ShiharaiMaintenance.setPreferredSize(new Dimension(250, 50));
  			jButton_ShiharaiMaintenance.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_ShiharaiMaintenance.addActionListener(this);
- 			jButton_ShiharaiMaintenance.addKeyListener(this);
- 			jButton_ShiharaiMaintenance.setMnemonic(KeyEvent.VK_4);
  		}
  		return jButton_ShiharaiMaintenance;
  	}
--- 406,415 ----
  	private ExtendedButton getJButton_ShiharaiMaintenance() {
  		if (jButton_ShiharaiMaintenance == null) {
  			jButton_ShiharaiMaintenance = new ExtendedButton();
! 			jButton_ShiharaiMaintenance.setText("６-４．支払代行情報メンテナンス");
! 			jButton_ShiharaiMaintenance.setPreferredSize(new Dimension(500, 50));
  			jButton_ShiharaiMaintenance.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_ShiharaiMaintenance.addActionListener(this);
  		}
  		return jButton_ShiharaiMaintenance;
  	}
***************
*** 468,489 ****
  					   ViewSettings.getFrameCommonHeight() );
  		}
  	}
- 
- 	@Override
- 	public void keyPressed(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyReleased(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyTyped(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
  }
--- 436,439 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JMasterMaintenanceFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JMasterMaintenanceFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JMasterMaintenanceFrameCtrl.java	Mon Apr 19 19:44:52 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JMasterMaintenanceFrameCtrl.java	Tue Aug 11 17:55:30 2009
***************
*** 1,12 ****
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
  
- import java.awt.Component;
  import java.awt.event.*;
  
- import org.apache.log4j.Logger;
  
- 
- import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
  import jp.or.med.orca.jma_tokutei.common.frame.JChangeKikanInformationFrameCtrl;
  import jp.or.med.orca.jma_tokutei.common.app.JApplication;
  
--- 1,8 ----
***************
*** 16,37 ****
   */
  public class JMasterMaintenanceFrameCtrl extends JMasterMaintenanceFrame
  {
- 	private static Logger logger = Logger.getLogger(JMasterMaintenanceFrameCtrl.class);
- 	private JFocusTraversalPolicy focusTraversalPolicy = null;
- 
  	public JMasterMaintenanceFrameCtrl()
  	{
- 		functionListner();
- 	}
- 
- 	private void functionListner(){
- 		Component comp = null;
- 		this.focusTraversalPolicy = new JFocusTraversalPolicy();
- 
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			comp = focusTraversalPolicy.getComponent(i);
- 			comp.addKeyListener(this);
- 		}
  	}
  
  	/**
--- 12,19 ----
***************
*** 113,219 ****
  	{
  		if( e.getSource() == jButton_End )
  		{
- 			logger.info(jButton_End.getText());
  			pushedEndButton( e );
  		}
  		if( e.getSource() == jButton_KikanMaintenance )
  		{
- 			logger.info(jButton_KikanMaintenance.getText());
  			pushedKikanButton( e );
  		}
  		if( e.getSource() == jButton_KenshinPatternMaintenance )
  		{
- 			logger.info(jButton_KenshinPatternMaintenance.getText());
  			pushedPatternButton( e );
  		}
  		if( e.getSource() == jButton_KenshinKoumokuMaintenance )
  		{
- 			logger.info(jButton_KenshinKoumokuMaintenance.getText());
  			pushedKoumokuButton( e );
  		}
  		if( e.getSource() == jButton_HokenjyaMaintenance )
  		{
- 			logger.info(jButton_HokenjyaMaintenance.getText());
  			pushedHokenjyaButton( e );
  		}
  		if( e.getSource() == jButton_KensaCenterCodeMaintenance )
  		{
- 			logger.info(jButton_KensaCenterCodeMaintenance.getText());
  			pushedCenterButton( e );
  		}
  		if( e.getSource() == jButton_ShiharaiMaintenance )
  		{
- 			logger.info(jButton_ShiharaiMaintenance.getText());
  			pushedShiharaiButton( e );
  		}
  		if( e.getSource() == jButton_NayoseMaintenance )
  		{
- 			logger.info(jButton_NayoseMaintenance.getText());
  			pushedNayoseButton( e );
  		}
- 		if( e.getSource() == jButton_TeikeiMaintenance )
- 		{
- 			logger.info(jButton_TeikeiMaintenance.getText());
- 			pushedTeikeiButton( e );
- 		}
- 	}
  
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 
- 		int mod = keyEvent.getModifiersEx();
- 		switch(keyEvent.getKeyCode()){
- 		case KeyEvent.VK_F1:
- 			if ((mod & InputEvent.ALT_DOWN_MASK) != 0){
- 				logger.info(jButton_KenshinKoumokuMaintenance.getText());
- 				pushedKoumokuButton(null);
- 				break;
- 			}
- 			logger.info(jButton_End.getText());
- 			pushedEndButton(null);
- 			break;
- // edit s.inoue 2010/04/01
- //		case KeyEvent.VK_F2:
- //			pushedKoumokuButton(null);break;
- 		case KeyEvent.VK_F2:
- 			if ((mod & InputEvent.ALT_DOWN_MASK) != 0){
- 				logger.info(jButton_KikanMaintenance.getText());
- 				pushedHokenjyaButton(null);
- 			}
- 			break;
- 		case KeyEvent.VK_F3:
- 			if ((mod & InputEvent.ALT_DOWN_MASK) != 0){
- 				logger.info(jButton_KenshinPatternMaintenance.getText());
- 				pushedPatternButton(null);
- 			}
- 			break;
- 		case KeyEvent.VK_F4:
- 			if ((mod & InputEvent.ALT_DOWN_MASK) != 0){
- 				logger.info(jButton_ShiharaiMaintenance.getText());
- 				pushedShiharaiButton(null);
- 			}
- 			break;
- 		case KeyEvent.VK_F5:
- 			if ((mod & InputEvent.ALT_DOWN_MASK) != 0){
- 				logger.info(jButton_KikanMaintenance.getText());
- 				pushedKikanButton(null);
- 			}
- 			break;
- 		case KeyEvent.VK_F6:
- 			if ((mod & InputEvent.ALT_DOWN_MASK) != 0){
- 				logger.info(jButton_NayoseMaintenance.getText());
- 				pushedNayoseButton(null);
- 			}
- 			break;
- 		case KeyEvent.VK_F7:
- 			if ((mod & InputEvent.ALT_DOWN_MASK) != 0){
- 				logger.info(jButton_TeikeiMaintenance.getText());
- 				pushedTeikeiButton(null);
- 			}
- 			break;
- 		}
- 	}
  
  }
  
  
--- 95,145 ----
  	{
  		if( e.getSource() == jButton_End )
  		{
  			pushedEndButton( e );
  		}
+ 
  		if( e.getSource() == jButton_KikanMaintenance )
  		{
  			pushedKikanButton( e );
  		}
+ 
  		if( e.getSource() == jButton_KenshinPatternMaintenance )
  		{
  			pushedPatternButton( e );
  		}
+ 
  		if( e.getSource() == jButton_KenshinKoumokuMaintenance )
  		{
  			pushedKoumokuButton( e );
  		}
+ 
  		if( e.getSource() == jButton_HokenjyaMaintenance )
  		{
  			pushedHokenjyaButton( e );
  		}
+ 
  		if( e.getSource() == jButton_KensaCenterCodeMaintenance )
  		{
  			pushedCenterButton( e );
  		}
+ 
  		if( e.getSource() == jButton_ShiharaiMaintenance )
  		{
  			pushedShiharaiButton( e );
  		}
+ 
  		if( e.getSource() == jButton_NayoseMaintenance )
  		{
  			pushedNayoseButton( e );
  		}
  
  
+ 		// add s.inoue 20090317
+ //		if( e.getSource() == jButton_TeikeiMaintenance )
+ //		{
+ //			pushedTeikeiButton( e );
+ //		}
+ 	}
  }
  
  
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JMenuFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JMenuFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JMenuFrame.java	Wed Apr 28 09:29:14 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JMenuFrame.java	Mon Apr 26 11:10:42 2010
***************
*** 16,25 ****
  import java.awt.Rectangle;
  import java.awt.event.ActionEvent;
  import java.awt.event.ActionListener;
- import java.awt.event.KeyEvent;
- import java.awt.event.KeyListener;
- import java.awt.event.WindowEvent;
- import java.awt.event.WindowListener;
  
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedButton;
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedLabel;
--- 16,21 ----
***************
*** 31,37 ****
  import javax.swing.BorderFactory;
  
  
! public class JMenuFrame extends JFrame implements ActionListener,WindowListener,KeyListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
--- 27,33 ----
  import javax.swing.BorderFactory;
  
  
! public class JMenuFrame extends JFrame implements ActionListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
***************
*** 148,155 ****
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setPreferredSize(new Dimension(95, 25));
! 			jButton_End.setText("終了(F1)");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
--- 144,151 ----
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setPreferredSize(new Dimension(75, 25));
! 			jButton_End.setText("終了");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
***************
*** 285,293 ****
  			gridBagConstraints61.gridwidth = 2;
  			gridBagConstraints61.insets = new Insets(1, 0, 1, 0);
  			gridBagConstraints61.gridy = 7;
! //			jLabel5 = new ExtendedLabel();
! //			jLabel5.setText("↓");
! //			jLabel5.setFont(new Font("Dialog", Font.BOLD, 18));
  
  			GridBagConstraints gridBagConstraints41 = new GridBagConstraints();
  			gridBagConstraints41.gridx = 1;
--- 281,289 ----
  			gridBagConstraints61.gridwidth = 2;
  			gridBagConstraints61.insets = new Insets(1, 0, 1, 0);
  			gridBagConstraints61.gridy = 7;
! 			jLabel5 = new ExtendedLabel();
! 			jLabel5.setText("↓");
! 			jLabel5.setFont(new Font("Dialog", Font.BOLD, 18));
  
  			GridBagConstraints gridBagConstraints41 = new GridBagConstraints();
  			gridBagConstraints41.gridx = 1;
***************
*** 414,425 ****
  		if (jButton_InputJyusinken == null) {
  			jButton_InputJyusinken = new ExtendedButton();
  
! 			jButton_InputJyusinken.setText("１．受診券入力（個人情報登録）(1)");
  			jButton_InputJyusinken.setPreferredSize(new Dimension(500, 50));
  			jButton_InputJyusinken.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_InputJyusinken.addActionListener(this);
- 			jButton_InputJyusinken.addKeyListener(this);
- 			jButton_InputJyusinken.setMnemonic(KeyEvent.VK_1);
  		}
  		return jButton_InputJyusinken;
  	}
--- 410,419 ----
  		if (jButton_InputJyusinken == null) {
  			jButton_InputJyusinken = new ExtendedButton();
  
! 			jButton_InputJyusinken.setText("１．受診券入力（個人情報登録）");
  			jButton_InputJyusinken.setPreferredSize(new Dimension(500, 50));
  			jButton_InputJyusinken.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_InputJyusinken.addActionListener(this);
  		}
  		return jButton_InputJyusinken;
  	}
***************
*** 432,442 ****
  	private ExtendedButton getJButton_InputMonshinKekka() {
  		if (jButton_InputMonshinKekka == null) {
  			jButton_InputMonshinKekka = new ExtendedButton();
! 			jButton_InputMonshinKekka.setText("２-１．健診・問診結果データ入力(2)");
  			jButton_InputMonshinKekka.setPreferredSize(new Dimension(245, 50));
  			jButton_InputMonshinKekka.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_InputMonshinKekka.addActionListener(this);
- 			jButton_InputMonshinKekka.setMnemonic(KeyEvent.VK_2);
  		}
  		return jButton_InputMonshinKekka;
  	}
--- 426,435 ----
  	private ExtendedButton getJButton_InputMonshinKekka() {
  		if (jButton_InputMonshinKekka == null) {
  			jButton_InputMonshinKekka = new ExtendedButton();
! 			jButton_InputMonshinKekka.setText("２-１．健診・問診結果データ入力");
  			jButton_InputMonshinKekka.setPreferredSize(new Dimension(245, 50));
  			jButton_InputMonshinKekka.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_InputMonshinKekka.addActionListener(this);
  		}
  		return jButton_InputMonshinKekka;
  	}
***************
*** 449,461 ****
  	private ExtendedButton getJButton_ImportData() {
  		if (jButton_ImportData == null) {
  			jButton_ImportData = new ExtendedButton();
! 			jButton_ImportData.setText("２-２．検査データ取り込み(3)");
  			jButton_ImportData.setPreferredSize(new Dimension(245, 50));
  			// edit ver2 s.inoue 2009/04/17 9999
  			jButton_ImportData.setEnabled(false);
  			jButton_ImportData.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_ImportData.addActionListener(this);
- 			jButton_ImportData.setMnemonic(KeyEvent.VK_3);
  		}
  		return jButton_ImportData;
  	}
--- 442,453 ----
  	private ExtendedButton getJButton_ImportData() {
  		if (jButton_ImportData == null) {
  			jButton_ImportData = new ExtendedButton();
! 			jButton_ImportData.setText("２-２．検査データ取り込み");
  			jButton_ImportData.setPreferredSize(new Dimension(245, 50));
  			// edit ver2 s.inoue 2009/04/17 9999
  			jButton_ImportData.setEnabled(false);
  			jButton_ImportData.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_ImportData.addActionListener(this);
  		}
  		return jButton_ImportData;
  	}
***************
*** 468,478 ****
  	private ExtendedButton getJButton_ShowHantei() {
  		if (jButton_ShowHantei == null) {
  			jButton_ShowHantei = new ExtendedButton();
! 			jButton_ShowHantei.setText("３．メタボリックシンドローム判定・階層化(4)");
  			jButton_ShowHantei.setPreferredSize(new Dimension(500, 50));
  			jButton_ShowHantei.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_ShowHantei.addActionListener(this);
- 			jButton_ShowHantei.setMnemonic(KeyEvent.VK_4);
  		}
  		return jButton_ShowHantei;
  	}
--- 460,469 ----
  	private ExtendedButton getJButton_ShowHantei() {
  		if (jButton_ShowHantei == null) {
  			jButton_ShowHantei = new ExtendedButton();
! 			jButton_ShowHantei.setText("３．メタボリックシンドローム判定・階層化");
  			jButton_ShowHantei.setPreferredSize(new Dimension(500, 50));
  			jButton_ShowHantei.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_ShowHantei.addActionListener(this);
  		}
  		return jButton_ShowHantei;
  	}
***************
*** 487,497 ****
  			jButton_OutputNitiji = new ExtendedButton();
  			// edit ver2 s.inoue 2009/08/03
  			// jButton_OutputToHL7.setText("４．請求・HL7出力");
! 			jButton_OutputNitiji.setText("４．日次処理（請求）(5)");
  			jButton_OutputNitiji.setPreferredSize(new Dimension(500, 50));
  			jButton_OutputNitiji.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_OutputNitiji.addActionListener(this);
- 			jButton_OutputNitiji.setMnemonic(KeyEvent.VK_5);
  		}
  		return jButton_OutputNitiji;
  	}
--- 478,487 ----
  			jButton_OutputNitiji = new ExtendedButton();
  			// edit ver2 s.inoue 2009/08/03
  			// jButton_OutputToHL7.setText("４．請求・HL7出力");
! 			jButton_OutputNitiji.setText("４．日次処理（請求）");
  			jButton_OutputNitiji.setPreferredSize(new Dimension(500, 50));
  			jButton_OutputNitiji.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_OutputNitiji.addActionListener(this);
  		}
  		return jButton_OutputNitiji;
  	}
***************
*** 506,516 ****
  			jButton_OutputGetuji = new ExtendedButton();
  			// edit ver2 s.inoue 2009/08/03
  			// jButton_OutputToHL7.setText("４．請求・HL7出力");
! 			jButton_OutputGetuji.setText("５．月次処理（請求確定/HL7出力）(6)");
  			jButton_OutputGetuji.setPreferredSize(new Dimension(500, 50));
  			jButton_OutputGetuji.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_OutputGetuji.addActionListener(this);
- 			jButton_OutputGetuji.setMnemonic(KeyEvent.VK_6);
  		}
  		return jButton_OutputGetuji;
  	}
--- 496,505 ----
  			jButton_OutputGetuji = new ExtendedButton();
  			// edit ver2 s.inoue 2009/08/03
  			// jButton_OutputToHL7.setText("４．請求・HL7出力");
! 			jButton_OutputGetuji.setText("５．月次処理（請求確定/HL7出力）");
  			jButton_OutputGetuji.setPreferredSize(new Dimension(500, 50));
  			jButton_OutputGetuji.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_OutputGetuji.addActionListener(this);
  		}
  		return jButton_OutputGetuji;
  	}
***************
*** 523,533 ****
  	private ExtendedButton getJButton_MasterMaintenance() {
  		if (jButton_MasterMaintenance == null) {
  			jButton_MasterMaintenance = new ExtendedButton();
! 			jButton_MasterMaintenance.setText("６．マスタメンテナンス(7)");
  			jButton_MasterMaintenance.setPreferredSize(new Dimension(245, 50));
  			jButton_MasterMaintenance.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_MasterMaintenance.addActionListener(this);
- 			jButton_MasterMaintenance.setMnemonic(KeyEvent.VK_7);
  		}
  		return jButton_MasterMaintenance;
  	}
--- 512,521 ----
  	private ExtendedButton getJButton_MasterMaintenance() {
  		if (jButton_MasterMaintenance == null) {
  			jButton_MasterMaintenance = new ExtendedButton();
! 			jButton_MasterMaintenance.setText("６．マスタメンテナンス");
  			jButton_MasterMaintenance.setPreferredSize(new Dimension(245, 50));
  			jButton_MasterMaintenance.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_MasterMaintenance.addActionListener(this);
  		}
  		return jButton_MasterMaintenance;
  	}
***************
*** 540,550 ****
  	private ExtendedButton getJButton_SystemMaintenance() {
  		if (jButton_SystemMaintenance == null) {
  			jButton_SystemMaintenance = new ExtendedButton();
! 			jButton_SystemMaintenance.setText("７．システムメンテナンス(8)");
  			jButton_SystemMaintenance.setPreferredSize(new Dimension(245, 50));
  			jButton_SystemMaintenance.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_SystemMaintenance.addActionListener(this);
- 			jButton_SystemMaintenance.setMnemonic(KeyEvent.VK_8);
  		}
  		return jButton_SystemMaintenance;
  	}
--- 528,537 ----
  	private ExtendedButton getJButton_SystemMaintenance() {
  		if (jButton_SystemMaintenance == null) {
  			jButton_SystemMaintenance = new ExtendedButton();
! 			jButton_SystemMaintenance.setText("７．システムメンテナンス");
  			jButton_SystemMaintenance.setPreferredSize(new Dimension(245, 50));
  			jButton_SystemMaintenance.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_SystemMaintenance.addActionListener(this);
  		}
  		return jButton_SystemMaintenance;
  	}
***************
*** 580,588 ****
  	private ExtendedToggleButton getJButton_Version() {
  		if (jButton_Version == null) {
  			jButton_Version = new ExtendedToggleButton();
! 			jButton_Version.setText("バージョン(F12)");
  			jButton_Version.setVisible(true);
- 			jButton_Version.setPreferredSize(new Dimension(120, 25));
  			jButton_Version.addActionListener(this);
  		}
  		return jButton_Version;
--- 567,574 ----
  	private ExtendedToggleButton getJButton_Version() {
  		if (jButton_Version == null) {
  			jButton_Version = new ExtendedToggleButton();
! 			jButton_Version.setText("バージョン");
  			jButton_Version.setVisible(true);
  			jButton_Version.addActionListener(this);
  		}
  		return jButton_Version;
***************
*** 599,668 ****
  			jButton_ReturnLogin.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_ReturnLogin.setActionCommand("\u7d42\u4e86");
  			jButton_ReturnLogin.setHorizontalAlignment(SwingConstants.CENTER);
! 			jButton_ReturnLogin.setPreferredSize(new Dimension(160, 25));
! 			jButton_ReturnLogin.setText("ログイン画面に戻る(F2)");
  			jButton_ReturnLogin.addActionListener(this);
  		}
  		return jButton_ReturnLogin;
  	}
- 
- 	@Override
- 	public void windowActivated(WindowEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void windowClosed(WindowEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void windowClosing(WindowEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void windowDeactivated(WindowEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void windowDeiconified(WindowEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void windowIconified(WindowEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void windowOpened(WindowEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyPressed(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyReleased(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyTyped(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
  }
--- 585,594 ----
  			jButton_ReturnLogin.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_ReturnLogin.setActionCommand("\u7d42\u4e86");
  			jButton_ReturnLogin.setHorizontalAlignment(SwingConstants.CENTER);
! 			jButton_ReturnLogin.setPreferredSize(new Dimension(120, 25));
! 			jButton_ReturnLogin.setText("ログイン画面に戻る");
  			jButton_ReturnLogin.addActionListener(this);
  		}
  		return jButton_ReturnLogin;
  	}
  }
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JMenuFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JMenuFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JMenuFrameCtrl.java	Fri Apr 23 16:47:18 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JMenuFrameCtrl.java	Mon Apr 26 11:10:42 2010
***************
*** 1,31 ****
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
  
- import java.awt.Component;
  import java.awt.event.ActionEvent;
  import java.awt.event.ComponentAdapter;
  import java.awt.event.ComponentEvent;
- import java.awt.event.InputEvent;
- import java.awt.event.KeyEvent;
  import java.awt.event.WindowAdapter;
  import java.awt.event.WindowEvent;
  import java.sql.Connection;
  import java.sql.SQLException;
  
- import javax.swing.JFrame;
- import javax.swing.WindowConstants;
- 
- import org.apache.log4j.Logger;
- 
- import jp.or.med.orca.jma_tokutei.common.convert.JInteger;
  import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
  import jp.or.med.orca.jma_tokutei.common.execlocker.JExecLocker;
  import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  import jp.or.med.orca.jma_tokutei.common.scene.JScene;
- import jp.or.med.orca.jma_tokutei.common.sql.JConnection;
  import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.JSoftware;
  import jp.or.med.orca.jma_tokutei.common.app.JApplication;
- //import jp.or.med.orca.jma_tokutei.common.app.SplitTable;
  
  /**
   * メニューフレームのコントロール
--- 1,20 ----
***************
*** 34,40 ****
  
  	// add h.yoshitama 2009/09/30
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
- 	private static org.apache.log4j.Logger logger = Logger.getLogger(JMenuFrameCtrl.class);
  
  	public JMenuFrameCtrl() {
  
--- 23,28 ----
***************
*** 53,64 ****
  		this.focusTraversalPolicy.addComponent(jButton_ReturnLogin);
  		this.focusTraversalPolicy.addComponent(jButton_End);
  
- 		// add s.inoue 2009/12/02
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			Component comp = focusTraversalPolicy.getComponent(i);
- 			comp.addKeyListener(this);
- 		}
- 
  		// 権限によってボタンの変更
  		if (JApplication.authority == JApplication.authorityAdmin) {
  			jButton_SystemMaintenance.setEnabled(true);
--- 41,46 ----
***************
*** 110,164 ****
  	}
  
  	public void pushedJyusinkenButton(ActionEvent e) {
- 		logger.info(jButton_InputJyusinken.getText());
  		jp.or.med.orca.jma_tokutei.common.scene.JScene.CreateDialog(this,
  				new JKojinRegisterFrameCtrl());
  	}
  
  	public void pushedInputButton(ActionEvent e) {
- 		logger.info(jButton_InputMonshinKekka.getText());
  		jp.or.med.orca.jma_tokutei.common.scene.JScene.CreateDialog(this,
  				new JKekkaListFrameCtrl());
  	}
  
  	public void pushedImportButton(ActionEvent e) {
- 		logger.info(jButton_ImportData.getText());
  		jp.or.med.orca.jma_tokutei.common.scene.JScene.CreateDialog(this,
  				new JImportDataFrameCtrl());
  	}
  
  	public void pushedHanteiButton(ActionEvent e) {
! 		logger.info(jButton_ShowHantei.getText());
! 		jp.or.med.orca.jma_tokutei.common.scene.JScene.CreateDialog(this,
! 				new JSearchResultListFrameCtrl());
  	}
  
  	public void pushedNitijiButton(ActionEvent e) {
- 		logger.info(jButton_OutputGetuji.getText());
  		jp.or.med.orca.jma_tokutei.common.scene.JScene.CreateDialog(this,
  				new JOutputNitijiFrameCtrl());
  	}
  
  	public void pushedGetujiButton(ActionEvent e) {
- 		logger.info(jButton_OutputGetuji.getText());
  		jp.or.med.orca.jma_tokutei.common.scene.JScene.CreateDialog(this,
  				new JOutputGetujiFrameCtrl());
  	}
  
  	public void pushedMasterButton(ActionEvent e) {
- 		logger.info(jButton_MasterMaintenance.getText());
  		jp.or.med.orca.jma_tokutei.common.scene.JScene.CreateDialog(this,
  				new JMasterMaintenanceFrameCtrl());
  	}
  
  	public void pushedSystemButton(ActionEvent e) {
- 		logger.info(jButton_SystemMaintenance.getText());
  		jp.or.med.orca.jma_tokutei.common.scene.JScene.CreateDialog(this,
  				new JSystemMaintenanceFrameCtrl());
  	}
  
  	public void pushedEndButton(ActionEvent e) {
- 		logger.info(jButton_End.getText());
  		Connection con = null;
  		try {
  			con = JApplication.kikanDatabase.getMConnection();
--- 92,141 ----
  	}
  
  	public void pushedJyusinkenButton(ActionEvent e) {
  		jp.or.med.orca.jma_tokutei.common.scene.JScene.CreateDialog(this,
  				new JKojinRegisterFrameCtrl());
  	}
  
  	public void pushedInputButton(ActionEvent e) {
  		jp.or.med.orca.jma_tokutei.common.scene.JScene.CreateDialog(this,
  				new JKekkaListFrameCtrl());
  	}
  
  	public void pushedImportButton(ActionEvent e) {
  		jp.or.med.orca.jma_tokutei.common.scene.JScene.CreateDialog(this,
  				new JImportDataFrameCtrl());
  	}
  
  	public void pushedHanteiButton(ActionEvent e) {
! 		jp.or.med.orca.jma_tokutei.common.scene.JScene.CreateDialog(this,new JSearchResultListFrameCtrl());
  	}
  
+ 	// edit ver2 s.inoue 2009/08/03
+ 	// public void pushedHL7Button(ActionEvent e) {
  	public void pushedNitijiButton(ActionEvent e) {
  		jp.or.med.orca.jma_tokutei.common.scene.JScene.CreateDialog(this,
+ 				// edit ver2 s.inoue 2009/08/03 HL7→Nitiji
+ 				// new JOutputHL7FrameCtrl()
  				new JOutputNitijiFrameCtrl());
  	}
  
+ 	// edit ver2 s.inoue 2009/08/20
  	public void pushedGetujiButton(ActionEvent e) {
  		jp.or.med.orca.jma_tokutei.common.scene.JScene.CreateDialog(this,
  				new JOutputGetujiFrameCtrl());
  	}
  
  	public void pushedMasterButton(ActionEvent e) {
  		jp.or.med.orca.jma_tokutei.common.scene.JScene.CreateDialog(this,
  				new JMasterMaintenanceFrameCtrl());
  	}
  
  	public void pushedSystemButton(ActionEvent e) {
  		jp.or.med.orca.jma_tokutei.common.scene.JScene.CreateDialog(this,
  				new JSystemMaintenanceFrameCtrl());
  	}
  
  	public void pushedEndButton(ActionEvent e) {
  		Connection con = null;
  		try {
  			con = JApplication.kikanDatabase.getMConnection();
***************
*** 232,367 ****
  	public void actionPerformed(ActionEvent e) {
  		Object source = e.getSource();
  		if (source == jButton_End) {
- 			logger.info(jButton_End.getText());
  			pushedEndButton(e);
  		} else if (e.getSource() == jButton_ShowHantei) {
- 			logger.info(jButton_ShowHantei.getText());
  			pushedHanteiButton(e);
  		} else if (e.getSource() == jButton_OutputNitiji) {
! 			logger.info(jButton_OutputNitiji.getText());
  			pushedNitijiButton(e);
  		} else if (e.getSource() == jButton_OutputGetuji) {
! 			logger.info(jButton_OutputGetuji.getText());
  			pushedGetujiButton(e);
  		} else if (e.getSource() == jButton_ImportData) {
- 			logger.info(jButton_ImportData.getText());
  			pushedImportButton(e);
  		} else if (e.getSource() == jButton_InputJyusinken) {
- 			logger.info(jButton_InputJyusinken.getText());
  			pushedJyusinkenButton(e);
  		} else if (e.getSource() == jButton_MasterMaintenance) {
- 			logger.info(jButton_MasterMaintenance.getText());
  			pushedMasterButton(e);
  		} else if (e.getSource() == jButton_SystemMaintenance) {
- 			logger.info(jButton_SystemMaintenance.getText());
  			pushedSystemButton(e);
  		} else if (e.getSource() == jButton_InputMonshinKekka) {
- 			logger.info(jButton_InputMonshinKekka.getText());
  			pushedInputButton(e);
  		} else if (e.getSource() == jButton_Version) {
- 			logger.info(jButton_Version.getText());
  			pushedVersionButton(e);
  		} else if (e.getSource() == jButton_ReturnLogin) {
- 			logger.info(jButton_ReturnLogin.getText());
  			pushedReturnLoginButton(e);
  		}
  	}
- 
- 	// add s.inoue 2009/12/02
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 
- 		int mod = keyEvent.getModifiersEx();
- 		switch(keyEvent.getKeyCode()){
- 		case KeyEvent.VK_F1:
- 			if ((mod & InputEvent.ALT_DOWN_MASK) != 0){
- 				logger.info(jButton_InputJyusinken.getText());
- 				pushedJyusinkenButton(null);
- 				break;
- 			}
- 			logger.info(jButton_End.getText());
- 			pushedEndButton(null);
- 			break;
- 		case KeyEvent.VK_F2:
- // edit s.inoue 2010/04/22
- //			if ((mod & InputEvent.ALT_DOWN_MASK) != 0){
- //				logger.info(jButton_InputMonshinKekka.getText());
- //				pushedInputButton(null);
- //				break;
- //			}
- 			logger.info(jButton_ReturnLogin.getText());
- 			pushedReturnLoginButton(null);
- 			break;
- //		case KeyEvent.VK_F3:
- //			if ((mod & InputEvent.ALT_DOWN_MASK) != 0){
- //				logger.info(jButton_ImportData.getText());
- //				pushedImportButton(null);
- //			}
- //			break;
- //		case KeyEvent.VK_F4:
- //			if ((mod & InputEvent.ALT_DOWN_MASK) != 0){
- //				logger.info(jButton_ShowHantei.getText());
- //				pushedHanteiButton(null);
- //			}
- //			break;
- //		case KeyEvent.VK_F5:
- //			if ((mod & InputEvent.ALT_DOWN_MASK) != 0){
- //				logger.info(jButton_OutputNitiji.getText());
- //				pushedNitijiButton(null);
- //			}
- //			break;
- //		case KeyEvent.VK_F6:
- //			if ((mod & InputEvent.ALT_DOWN_MASK) != 0){
- //				logger.info(jButton_OutputGetuji.getText());
- //				pushedGetujiButton(null);
- //			}
- //			break;
- //		case KeyEvent.VK_F7:
- //			if ((mod & InputEvent.ALT_DOWN_MASK) != 0){
- //				logger.info(jButton_MasterMaintenance.getText());
- //				pushedMasterButton(null);
- //			}
- //			break;
- //		case KeyEvent.VK_F9:
- //			if ((mod & InputEvent.ALT_DOWN_MASK) != 0){
- //				if (jButton_SystemMaintenance.isEnabled()){
- //					logger.info(jButton_SystemMaintenance.getText());
- //					pushedSystemButton(null);
- //				}
- //			}
- //			break;
- 		case KeyEvent.VK_F12:
- 			logger.info(jButton_Version.getText());
- 			if (jButton_Version.isSelected()){
- 				jButton_Version.setSelected(false);
- 			}else{
- 				jButton_Version.setSelected(true);
- 			}
- 			pushedVersionButton(null);break;
- 
- // edit s.inoue 2010/04/01
- //		case KeyEvent.VK_F3:
- //			pushedJyusinkenButton(null);break;
- //		case KeyEvent.VK_F4:
- //			pushedInputButton(null);break;
- //		case KeyEvent.VK_F5:
- //			pushedImportButton(null);break;
- //		case KeyEvent.VK_F6:
- //			pushedHanteiButton(null);break;
- //		case KeyEvent.VK_F7:
- //			pushedNitijiButton(null);break;
- //		case KeyEvent.VK_F8:
- //			pushedGetujiButton(null);break;
- //		case KeyEvent.VK_F9:
- //			pushedMasterButton(null);break;
- //		case KeyEvent.VK_F11:
- //			if (jButton_SystemMaintenance.isEnabled()){
- //				pushedSystemButton(null);
- //			}
- //			break;
- 		}
- 	}
- 
  }
  
  //Source Code Version Tag System v1.00  -- Do not remove --
--- 209,243 ----
  	public void actionPerformed(ActionEvent e) {
  		Object source = e.getSource();
  		if (source == jButton_End) {
  			pushedEndButton(e);
  		} else if (e.getSource() == jButton_ShowHantei) {
  			pushedHanteiButton(e);
  		} else if (e.getSource() == jButton_OutputNitiji) {
! 			// edit ver2 s.inoue 2009/08/03
! 			// pushedHL7Button(e);
  			pushedNitijiButton(e);
+ 		// edit ver2 s.inoue 2009/08/03
  		} else if (e.getSource() == jButton_OutputGetuji) {
! 			// edit ver2 s.inoue 2009/08/03
! 			// pushedHL7Button(e);
! 			// edit ver2 s.inoue 2009/08/20
  			pushedGetujiButton(e);
  		} else if (e.getSource() == jButton_ImportData) {
  			pushedImportButton(e);
  		} else if (e.getSource() == jButton_InputJyusinken) {
  			pushedJyusinkenButton(e);
  		} else if (e.getSource() == jButton_MasterMaintenance) {
  			pushedMasterButton(e);
  		} else if (e.getSource() == jButton_SystemMaintenance) {
  			pushedSystemButton(e);
  		} else if (e.getSource() == jButton_InputMonshinKekka) {
  			pushedInputButton(e);
  		} else if (e.getSource() == jButton_Version) {
  			pushedVersionButton(e);
  		} else if (e.getSource() == jButton_ReturnLogin) {
  			pushedReturnLoginButton(e);
  		}
  	}
  }
  
  //Source Code Version Tag System v1.00  -- Do not remove --
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JNayoseMaintenanceEditFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JNayoseMaintenanceEditFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JNayoseMaintenanceEditFrame.java	Mon Apr 19 19:16:20 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JNayoseMaintenanceEditFrame.java	Wed Feb 24 17:45:24 2010
***************
*** 168,174 ****
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
--- 168,174 ----
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
***************
*** 582,588 ****
  	private ExtendedButton getJButton_Register() {
  		if (jButton_Register == null) {
  			jButton_Register = new ExtendedButton();
! 			jButton_Register.setText("登録(F12)");
  			jButton_Register.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Register.addActionListener(this);
  		}
--- 582,588 ----
  	private ExtendedButton getJButton_Register() {
  		if (jButton_Register == null) {
  			jButton_Register = new ExtendedButton();
! 			jButton_Register.setText("登録");
  			jButton_Register.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Register.addActionListener(this);
  		}
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JNayoseMaintenanceEditFrameCtl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JNayoseMaintenanceEditFrameCtl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JNayoseMaintenanceEditFrameCtl.java	Mon Apr 19 18:29:30 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JNayoseMaintenanceEditFrameCtl.java	Wed Feb 24 17:45:24 2010
***************
*** 31,38 ****
  		super();
  		// focus制御
  		initializefocus();
- 		// function
- 		functionListner();
  	}
  
  	/**
--- 31,36 ----
***************
*** 65,72 ****
  		initilizeControlSetting(himotukeID,uketukeID,name,nameKana,birthDay,sex,home,hiKigou,hiBangou);
  		// focus制御
  		initializefocus();
- 		// function
- 		functionListner();
  	}
  
  	private void initilizeControlSetting(String himotukeID,String uketukeID,String name,String nameKana,String birthDay,String sex,String home,String hiKigou, String hiBangou){
--- 63,68 ----
***************
*** 107,118 ****
  
  	}
  
- 	private void functionListner(){
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			Component comp = focusTraversalPolicy.getComponent(i);
- 			comp.addKeyListener(this);
- 		}
- 	}
  	/**
  	 * 終了ボタン
  	 */
--- 103,108 ----
***************
*** 178,194 ****
  		}
  	}
  
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 		switch(keyEvent.getKeyCode()){
- 		case KeyEvent.VK_F1:
- 			logger.info(jButton_End.getText());
- 			pushedEndButton(null);break;
- 		case KeyEvent.VK_F12:
- 			logger.info(jButton_Register.getText());
- 			pushedRegisterButton(null);break;
- 		}
- 	}
  }
  
  
--- 168,173 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JNayoseMaintenanceListFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JNayoseMaintenanceListFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JNayoseMaintenanceListFrame.java	Mon Apr 19 19:16:52 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JNayoseMaintenanceListFrame.java	Wed Feb 24 17:45:24 2010
***************
*** 237,243 ****
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
--- 237,243 ----
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
***************
*** 251,257 ****
  	private ExtendedButton getJButton_Nayose() {
  		if (jButton_Nayose == null) {
  			jButton_Nayose = new ExtendedButton();
! 			jButton_Nayose.setText("名寄せ(F9)");
  			jButton_Nayose.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Nayose.addActionListener(this);
  		}
--- 251,257 ----
  	private ExtendedButton getJButton_Nayose() {
  		if (jButton_Nayose == null) {
  			jButton_Nayose = new ExtendedButton();
! 			jButton_Nayose.setText("名寄せ");
  			jButton_Nayose.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Nayose.addActionListener(this);
  		}
***************
*** 266,272 ****
  	private ExtendedButton getJButton_Edit() {
  		if (jButton_Change == null) {
  			jButton_Change = new ExtendedButton();
! 			jButton_Change.setText("編集(F11)");
  			jButton_Change.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Change.addActionListener(this);
  		}
--- 266,272 ----
  	private ExtendedButton getJButton_Edit() {
  		if (jButton_Change == null) {
  			jButton_Change = new ExtendedButton();
! 			jButton_Change.setText("編集");
  			jButton_Change.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Change.addActionListener(this);
  		}
***************
*** 281,287 ****
  	private ExtendedButton getJButton_Del() {
  		if (jButton_Delete == null) {
  			jButton_Delete = new ExtendedButton();
! 			jButton_Delete.setText("削除(F12)");
  			jButton_Delete.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Delete.addActionListener(this);
  		}
--- 281,287 ----
  	private ExtendedButton getJButton_Del() {
  		if (jButton_Delete == null) {
  			jButton_Delete = new ExtendedButton();
! 			jButton_Delete.setText("削除");
  			jButton_Delete.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Delete.addActionListener(this);
  		}
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JNayoseMaintenanceListFrameCtl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JNayoseMaintenanceListFrameCtl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JNayoseMaintenanceListFrameCtl.java	Fri Apr 23 16:23:58 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JNayoseMaintenanceListFrameCtl.java	Wed Feb 24 17:45:24 2010
***************
*** 94,100 ****
  		dmodel = new DefaultTableModel(resultRefresh(),header){
  	      public boolean isCellEditable(int row, int column) {
  	    	boolean retflg = false;
! 	    	if (column >9){
  	    		retflg = true;
  	      	}
  	        return retflg;
--- 94,100 ----
  		dmodel = new DefaultTableModel(resultRefresh(),header){
  	      public boolean isCellEditable(int row, int column) {
  	    	boolean retflg = false;
! 	    	if (column == 0 || column >9){
  	    		retflg = true;
  	      	}
  	        return retflg;
***************
*** 128,135 ****
  	    modelfixed.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
  
  		initilizeFocus();
- 		// add s.inoue 2009/12/02
- 		functionListner();
  
  		// add s.inoue 2009/10/26
          final JScrollPane scroll = new JScrollPane(table);
--- 128,133 ----
***************
*** 209,289 ****
  		this.focusTraversalPolicy.addComponent(this.jButton_End);
  	}
  
- 	// add s.inoue 2009/12/02
- 	private void functionListner(){
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			Component comp = focusTraversalPolicy.getComponent(i);
- 			comp.addKeyListener(this);
- 		}
- 	}
- 
- 	// add s.inoue 2010/04/21
- 	/*
- 	 * 検索リフレッシュ処理
- 	 */
- 	private void searchRefresh(){
- 
- 		modelfixed.setPreferedColumnWidths(new int[] { 100, 100, 175 });
- 		table.setPreferedColumnWidths(new int[] { 150, 80, 50, 120, 120, 120, 180 });
- 		// add s.inoue 2009/10/23
- 		modelfixed.setSelectionModel(table.getSelectionModel());
- 
- 		    // validationCheck
- 		    Object [][] resultref=resultRefresh();
- 		    if (resultref == null)
- 		    	return;
- 
- 		    // edit s.inoue 2010/02/16
- 		    if (resultref.length == 0){
- 		    	JErrorMessage.show("M3550", this);
- 		    }
- 
- 		    // add s.inoue 2009/10/26
- 		    for(int i=dmodel.getColumnCount()-1;i>=0;i--) {
- 	            if(i<5) {
- 	                table.removeColumn(table.getColumnModel().getColumn(i));
- 	            }
- 	        }
- 
- 		    dmodel.setDataVector(resultref,header);
- 
- 			// 4列以下は固定、以降は変動
- 			for(int i=dmodel.getColumnCount()-1;i>=0;i--) {
- 	            if(i<3) {
- 	                table.removeColumn(table.getColumnModel().getColumn(i));
- 	                modelfixed.getColumnModel().getColumn(i).setResizable(false);
- 	            }else{
- 	                modelfixed.removeColumn(modelfixed.getColumnModel().getColumn(i));
- 	            }
- 	        	}
- 
- 
- 		   // add s.inoue 2009/10/26
- 		   TableColumnModel columnsfix = modelfixed.getColumnModel();
- 		   for(int i=1;i<columnsfix.getColumnCount();i++) {
- 
- 			   columnsfix.getColumn(i).setCellRenderer(new JSimpleTableCellRowRenderer(
- 		   			(DefaultTableCellRenderer)modelfixed.getDefaultRenderer(modelfixed.getColumnClass(i))));
- 		   }
- 
- 		   TableColumnModel columns = table.getColumnModel();
- 		   for(int i=0;i<columns.getColumnCount();i++) {
- 
- 			   columns.getColumn(i).setCellRenderer(new JSimpleTableCellRowRenderer(
- 		   			(DefaultTableCellRenderer)table.getDefaultRenderer(table.getColumnClass(i))));
- 		   }
- 
- 	  	// add s.inoue 2009/11/12
- 		   table.addHeader(this.header);
- 		   table.refreshTable(); modelfixed.refreshTable();
- 
- 		   // edit s.inoue 2009/11/09
- 		   // 初期選択
- 		   if (table.getRowCount() > 0) {
- 			   table.setRowSelectionInterval(0, 0);
- 		   }
- 	}
- 
  	// edit s.inoue 2009/10/26
  	// 一覧用データ取得
  	private Object[][] resultRefresh()
--- 207,212 ----
***************
*** 563,571 ****
  				JApplication.kikanDatabase.Commit();
  				// edit s.inoue 2009/11/14
  				// initializeTable();
! 				// edit s.inoue 2010/04/23
! 				// resultRefresh();
! 				searchRefresh();
  			} catch (SQLException e1) {
  				e1.printStackTrace();
  				JErrorMessage.show("M4003", this);
--- 486,492 ----
  				JApplication.kikanDatabase.Commit();
  				// edit s.inoue 2009/11/14
  				// initializeTable();
! 				resultRefresh();
  			} catch (SQLException e1) {
  				e1.printStackTrace();
  				JErrorMessage.show("M4003", this);
***************
*** 592,615 ****
  		}
  	}
  
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 		switch(keyEvent.getKeyCode()){
- 		case KeyEvent.VK_F1:
- 			logger.info(jButton_End.getText());
- 			pushedEndButton(null);break;
- 		case KeyEvent.VK_F9:
- 			logger.info(jButton_Nayose.getText());
- 			pushedNayoseButton(null);break;
- 		case KeyEvent.VK_F11:
- 			logger.info(jButton_Change.getText());
- 			pushedChangeButton(null);break;
- 		case KeyEvent.VK_F12:
- 			logger.info(jButton_Delete.getText());
- 			pushedDeleteButton(null);break;
- 		}
- 	}
- 
  	/**
  	 * 遷移先の画面から戻ってきた場合
  	 */
--- 513,518 ----
***************
*** 617,628 ****
  		public void windowClosed(WindowEvent e) {
  			// edit s.inoue 2009/11/14
  			// initializeTable();
! //			resultRefresh();
! //			table.clearAllColumn();
! //			modelfixed.clearAllColumn();
! //			initializeSetting();
! 			// edit s.inoue 2010/04/23
! 			searchRefresh();
  		}
  	}
  }
--- 520,526 ----
  		public void windowClosed(WindowEvent e) {
  			// edit s.inoue 2009/11/14
  			// initializeTable();
! 			resultRefresh();
  		}
  	}
  }
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JOutputGetujiFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JOutputGetujiFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JOutputGetujiFrame.java	Thu Apr 22 17:03:52 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JOutputGetujiFrame.java	Fri Oct  9 10:07:46 2009
***************
*** 35,41 ****
  /**
   * 日次処理(請求)
   */
! public class JOutputGetujiFrame extends JFrame implements ActionListener,KeyListener,
  	ItemListener {
      protected static final long serialVersionUID = 1L;
      protected JPanel jPanel_Content = null;
--- 35,41 ----
  /**
   * 日次処理(請求)
   */
! public class JOutputGetujiFrame extends JFrame implements ActionListener,
  	ItemListener {
      protected static final long serialVersionUID = 1L;
      protected JPanel jPanel_Content = null;
***************
*** 99,105 ****
      protected ExtendedCheckBox jCheckBox_JisiYear = null;
      // add s.inoue 2009/09/14
      protected ExtendedCheckBox jCheckBox_IsPermitHL7 = null;
- 	protected ExtendedLabel jLabel_count = null;
  
      /**
           * This is the default constructor
--- 99,104 ----
***************
*** 172,180 ****
  //	    gridBagConstraints27.insets = new Insets(0, 5, 0, 0);
  //	    gridBagConstraints27.gridx = 3;
  	    GridBagConstraints gridBagConstraints23 = new GridBagConstraints();
  	    gridBagConstraints23.weightx = 1.0D;
  	    gridBagConstraints23.anchor = GridBagConstraints.EAST;
- 	    gridBagConstraints23.gridy = 0;
  	    gridBagConstraints23.gridx = 1;
  	    gridBagConstraints23.insets = new Insets(0, 0, 0, 5);
  
--- 171,179 ----
  //	    gridBagConstraints27.insets = new Insets(0, 5, 0, 0);
  //	    gridBagConstraints27.gridx = 3;
  	    GridBagConstraints gridBagConstraints23 = new GridBagConstraints();
+ 	    gridBagConstraints23.gridy = 0;
  	    gridBagConstraints23.weightx = 1.0D;
  	    gridBagConstraints23.anchor = GridBagConstraints.EAST;
  	    gridBagConstraints23.gridx = 1;
  	    gridBagConstraints23.insets = new Insets(0, 0, 0, 5);
  
***************
*** 205,211 ****
  	    jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  	    jButton_End.setActionCommand("終了");
  	    jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 	    jButton_End.setText("戻る(F1)");
  	    jButton_End.addActionListener(this);
  	}
  	return jButton_End;
--- 204,210 ----
  	    jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  	    jButton_End.setActionCommand("終了");
  	    jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 	    jButton_End.setText("戻る");
  	    jButton_End.addActionListener(this);
  	}
  	return jButton_End;
***************
*** 260,268 ****
  	    gridBagConstraints3.gridx = 0;
  
  	    jLabel_MainExpl = new GuidanceLabel("tokutei.hl7.frame.guidance.main");
- 	    // edit s.inoue 2010/02/25
- 		jLabel_MainExpl.setFont(new Font("Dialog", Font.PLAIN, 13));
- 		jLabel_MainExpl.setName("jLabel1");
  
  	    jPanel_TitleArea = new JPanel();
  	    jPanel_TitleArea.setLayout(new GridBagLayout());
--- 259,264 ----
***************
*** 296,302 ****
      private ExtendedButton getJButton_HL7Output() {
  	if (jButton_HL7Output == null) {
  	    jButton_HL7Output = new ExtendedButton();
! 	    jButton_HL7Output.setText("HL7出力(F9)");
  	    jButton_HL7Output.addActionListener(this);
  	}
  	return jButton_HL7Output;
--- 292,298 ----
      private ExtendedButton getJButton_HL7Output() {
  	if (jButton_HL7Output == null) {
  	    jButton_HL7Output = new ExtendedButton();
! 	    jButton_HL7Output.setText("HL7出力");
  	    jButton_HL7Output.addActionListener(this);
  	}
  	return jButton_HL7Output;
***************
*** 310,316 ****
      private ExtendedButton getJButton_Seikyu() {
  	if (jButton_Seikyu == null) {
  	    jButton_Seikyu = new ExtendedButton();
! 	    jButton_Seikyu.setText("請求確定(F7)");
  	    jButton_Seikyu.addActionListener(this);
  	}
  	return jButton_Seikyu;
--- 306,312 ----
      private ExtendedButton getJButton_Seikyu() {
  	if (jButton_Seikyu == null) {
  	    jButton_Seikyu = new ExtendedButton();
! 	    jButton_Seikyu.setText("請求確定");
  	    jButton_Seikyu.addActionListener(this);
  	}
  	return jButton_Seikyu;
***************
*** 325,332 ****
  	private ExtendedButton getJButton_SeikyuListPrint() {
  	if (jButton_SeikyuListPrint == null) {
  		jButton_SeikyuListPrint = new ExtendedButton();
! 		jButton_SeikyuListPrint.setText("請求リスト印刷(F11)");
! 		jButton_SeikyuListPrint.setPreferredSize(new Dimension(150, 25));
  		jButton_SeikyuListPrint.addActionListener(this);
  	}
  	return jButton_SeikyuListPrint;
--- 321,328 ----
  	private ExtendedButton getJButton_SeikyuListPrint() {
  	if (jButton_SeikyuListPrint == null) {
  		jButton_SeikyuListPrint = new ExtendedButton();
! 		jButton_SeikyuListPrint.setText("請求リスト印刷");
! 		jButton_SeikyuListPrint.setPreferredSize(new Dimension(100, 25));
  		jButton_SeikyuListPrint.addActionListener(this);
  	}
  	return jButton_SeikyuListPrint;
***************
*** 360,370 ****
      private ExtendedButton getJButton_AllSelect() {
  	if (jButton_AllSelect == null) {
  	    jButton_AllSelect = new ExtendedButton();
! 	    jButton_AllSelect.setText("全て選択(A)");
  	    jButton_AllSelect.setMinimumSize(new Dimension(82, 20));
  	    jButton_AllSelect.setFont(new Font("Dialog", Font.PLAIN, 12));
  	    jButton_AllSelect.addActionListener(this);
- 	    jButton_AllSelect.setMnemonic(KeyEvent.VK_A);
  	}
  	return jButton_AllSelect;
      }
--- 356,365 ----
      private ExtendedButton getJButton_AllSelect() {
  	if (jButton_AllSelect == null) {
  	    jButton_AllSelect = new ExtendedButton();
! 	    jButton_AllSelect.setText("全て選択");
  	    jButton_AllSelect.setMinimumSize(new Dimension(82, 20));
  	    jButton_AllSelect.setFont(new Font("Dialog", Font.PLAIN, 12));
  	    jButton_AllSelect.addActionListener(this);
  	}
  	return jButton_AllSelect;
      }
***************
*** 431,437 ****
      private ExtendedTextField getJTextField_Name() {
  	if (jTextField_Name == null) {
  	    jTextField_Name = new ExtendedTextField(ImeMode.IME_ZENKAKU_KANA);
- 	    jTextField_Name.setPreferredSize(new Dimension(100, 20));
  	}
  	return jTextField_Name;
      }
--- 426,431 ----
***************
*** 470,480 ****
      private ExtendedButton getJButton_Search() {
  	if (jButton_Search == null) {
  	    jButton_Search = new ExtendedButton();
! 	    jButton_Search.setText("検索(S)");
  	    jButton_Search.setMinimumSize(new Dimension(58, 20));
  	    jButton_Search.setFont(new Font("Dialog", Font.PLAIN, 12));
  	    jButton_Search.addActionListener(this);
- 	    jButton_Search.setMnemonic(KeyEvent.VK_S);
  	}
  	return jButton_Search;
      }
--- 464,473 ----
      private ExtendedButton getJButton_Search() {
  	if (jButton_Search == null) {
  	    jButton_Search = new ExtendedButton();
! 	    jButton_Search.setText("検索");
  	    jButton_Search.setMinimumSize(new Dimension(58, 20));
  	    jButton_Search.setFont(new Font("Dialog", Font.PLAIN, 12));
  	    jButton_Search.addActionListener(this);
  	}
  	return jButton_Search;
      }
***************
*** 576,588 ****
  	    gridBagConstraints26.gridy = 0;
  	    GridBagConstraints gridBagConstraints12 = new GridBagConstraints();
  	    gridBagConstraints12.gridx = 6;
! 	    // del s.inoue 2010/03/23
! //	    gridBagConstraints12.ipadx = 10;
! //	    gridBagConstraints12.ipady = 10;
  	    gridBagConstraints12.weightx = 1.0D;
  	    gridBagConstraints12.gridy = 3;
- 	    gridBagConstraints12.anchor = GridBagConstraints.EAST;
- 
  	    GridBagConstraints gridBagConstraints1 = new GridBagConstraints();
  	    gridBagConstraints1.gridx = 1;
  	    gridBagConstraints1.gridwidth = 9;
--- 569,578 ----
  	    gridBagConstraints26.gridy = 0;
  	    GridBagConstraints gridBagConstraints12 = new GridBagConstraints();
  	    gridBagConstraints12.gridx = 6;
! 	    gridBagConstraints12.ipadx = 10;
! 	    gridBagConstraints12.ipady = 10;
  	    gridBagConstraints12.weightx = 1.0D;
  	    gridBagConstraints12.gridy = 3;
  	    GridBagConstraints gridBagConstraints1 = new GridBagConstraints();
  	    gridBagConstraints1.gridx = 1;
  	    gridBagConstraints1.gridwidth = 9;
***************
*** 623,629 ****
  	    GridBagConstraints gridBagConstraints47 = new GridBagConstraints();
  	    gridBagConstraints47.gridx = 0;
  	    gridBagConstraints47.gridy = 2;
- 	    gridBagConstraints47.gridy = 2;
  	    gridBagConstraints47.anchor = GridBagConstraints.WEST;
  	    jLabel2 = new ExtendedLabel();
  	    jLabel2.setText("保険者番号");
--- 613,618 ----
***************
*** 723,749 ****
  	    // gridBagConstraints11.fill = GridBagConstraints.HORIZONTAL;
  	    gridBagConstraints11.gridwidth = 1;
  		gridBagConstraints11.anchor = GridBagConstraints.EAST;
! 	    gridBagConstraints11.insets = new Insets(0, 0, 0, 85);
! 	    gridBagConstraints11.gridy = 5;
! 
! 	    // edit s.inoue 2010/02/24
! 	    GridBagConstraints gridBagConstraints60 = new GridBagConstraints();
! 	    gridBagConstraints60.gridx = 6;
! 	    gridBagConstraints60.anchor = GridBagConstraints.NORTHEAST;
! 	    gridBagConstraints60.insets = new Insets(0, 0, 0, 0);
! 	    gridBagConstraints60.gridy = 4;
! 
! 		// edit s.inoue 2010/02/24
! 		jLabel_count = new ExtendedLabel();
! 		jLabel_count.setPreferredSize(new Dimension(100, 15));
! 		jLabel_count.setFont(new Font("Dialog", Font.PLAIN, 12));
  
  	    jPanel1 = new JPanel();
  	    jPanel1.setLayout(new GridBagLayout());
  	    jPanel1.setName("jPanel1");
  	    jPanel1.setBorder(BorderFactory.createCompoundBorder(BorderFactory.createLineBorder(Color.gray, 1), BorderFactory.createEmptyBorder(5, 5, 5, 5)));
! 	    jPanel1.add(jLabel, gridBagConstraints40);
! 	    jPanel1.add(getJTextField_JyushinKenID(), gridBagConstraints17);
  	    jPanel1.add(getJTextField_HokensyoCode(), gridBagConstraints24);
  	    jPanel1.add(jLabel32, gridBagConstraints43);
  	    jPanel1.add(getJComboBox_HokenjyaNumber(), gridBagConstraints20);
--- 712,726 ----
  	    // gridBagConstraints11.fill = GridBagConstraints.HORIZONTAL;
  	    gridBagConstraints11.gridwidth = 1;
  		gridBagConstraints11.anchor = GridBagConstraints.EAST;
! 	    gridBagConstraints11.insets = new Insets(0, 70, 0, 0);
! 	    gridBagConstraints11.gridy = 3;
  
  	    jPanel1 = new JPanel();
  	    jPanel1.setLayout(new GridBagLayout());
  	    jPanel1.setName("jPanel1");
  	    jPanel1.setBorder(BorderFactory.createCompoundBorder(BorderFactory.createLineBorder(Color.gray, 1), BorderFactory.createEmptyBorder(5, 5, 5, 5)));
! 	    jPanel1.add(jLabel, gridBagConstraints38);
! 	    jPanel1.add(getJTextField_JyushinKenID(), gridBagConstraints39);
  	    jPanel1.add(getJTextField_HokensyoCode(), gridBagConstraints24);
  	    jPanel1.add(jLabel32, gridBagConstraints43);
  	    jPanel1.add(getJComboBox_HokenjyaNumber(), gridBagConstraints20);
***************
*** 751,775 ****
  	    jPanel1.add(getJTextField_HokensyoNumber(), gridBagConstraints25);
  	    jPanel1.add(jLabel33, gridBagConstraints48);
  	    jPanel1.add(getJComboBox_SeikyuKikanNumber(), gridBagConstraints53);
! 	    jPanel1.add(jLabel1, gridBagConstraints38);
! 	    jPanel1.add(getJTextField_Name(), gridBagConstraints39);
  	    jPanel1.add(getJComboBox_SyubetuCode(), gridBagConstraints50);
- 	    // del s.inoue 2010/03/23
- 	    // jPanel1.add(jLabel_count, gridBagConstraints60);
  	    jPanel1.add(getJButton_Search(), gridBagConstraints19);
- 
  	    jPanel1.add(getJButton_AllSelect(), gridBagConstraints28);
  	    jPanel1.add(jLabel31, gridBagConstraints58);
! 	    // edit s.inoue 2010/03/23
! 	    // jPanel1.add(getJPanel31(), gridBagConstraints12);
! 	    jPanel1.add(jLabel_count, gridBagConstraints12);
! 
  	    jPanel1.add(getJPanel32(), gridBagConstraints26);
  	    // add ver2 s.inoue 2009/06/23
  		jPanel1.add(getJCheckBox_JisiYear(), gridBagConstraints59);
  
  		// edit s.inoue 2009/09/14
  	    jPanel1.add(getjCheckBox_IsPermitHL7(), gridBagConstraints11);
  	}
  	return jPanel1;
      }
--- 728,748 ----
  	    jPanel1.add(getJTextField_HokensyoNumber(), gridBagConstraints25);
  	    jPanel1.add(jLabel33, gridBagConstraints48);
  	    jPanel1.add(getJComboBox_SeikyuKikanNumber(), gridBagConstraints53);
! 	    jPanel1.add(jLabel1, gridBagConstraints40);
! 	    jPanel1.add(getJTextField_Name(), gridBagConstraints17);
  	    jPanel1.add(getJComboBox_SyubetuCode(), gridBagConstraints50);
  	    jPanel1.add(getJButton_Search(), gridBagConstraints19);
  	    jPanel1.add(getJButton_AllSelect(), gridBagConstraints28);
  	    jPanel1.add(jLabel31, gridBagConstraints58);
! 	    jPanel1.add(getJPanel31(), gridBagConstraints12);
  	    jPanel1.add(getJPanel32(), gridBagConstraints26);
  	    // add ver2 s.inoue 2009/06/23
  		jPanel1.add(getJCheckBox_JisiYear(), gridBagConstraints59);
  
  		// edit s.inoue 2009/09/14
  	    jPanel1.add(getjCheckBox_IsPermitHL7(), gridBagConstraints11);
+ 
+ 	    gridBagConstraints47.gridy = 2;
  	}
  	return jPanel1;
      }
***************
*** 784,791 ****
  		if (jCheckBox_IsPermitHL7 == null) {
  		    jCheckBox_IsPermitHL7 = new ExtendedCheckBox();
  		    jCheckBox_IsPermitHL7.setText("HL7出力済");
- 		    // add h.yoshitama 2009/11/11
- 		    jCheckBox_IsPermitHL7.addItemListener(this);
  		}
  		return jCheckBox_IsPermitHL7;
      }
--- 757,762 ----
***************
*** 854,860 ****
      private JPanel getJPanel2() {
  	if (jPanel2 == null) {
  	    GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
! 	    gridBagConstraints2.insets = new Insets(5, 10, 0, 10);
  	    gridBagConstraints2.gridy = 0;
  	    gridBagConstraints2.weightx = 1.0D;
  	    gridBagConstraints2.weighty = 1.0D;
--- 825,831 ----
      private JPanel getJPanel2() {
  	if (jPanel2 == null) {
  	    GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
! 	    gridBagConstraints2.insets = new Insets(10, 10, 10, 10);
  	    gridBagConstraints2.gridy = 0;
  	    gridBagConstraints2.weightx = 1.0D;
  	    gridBagConstraints2.weighty = 1.0D;
***************
*** 877,883 ****
  	if (jPanel_TableArea == null) {
  	    jPanel_TableArea = new JPanel();
  	    jPanel_TableArea.setLayout(new BorderLayout());
! 	    jPanel_TableArea.setBorder(BorderFactory.createEmptyBorder(5, 10, 0, 10));
  	}
  	return jPanel_TableArea;
      }
--- 848,855 ----
  	if (jPanel_TableArea == null) {
  	    jPanel_TableArea = new JPanel();
  	    jPanel_TableArea.setLayout(new BorderLayout());
! 	    jPanel_TableArea.setBorder(BorderFactory.createEmptyBorder(0, 10,
! 		    10, 10));
  	}
  	return jPanel_TableArea;
      }
***************
*** 982,1051 ****
          return jPanel33;
      }
  
! 
! // del s.inoue 2009/12/02
! //	/**
! //	 * This method initializes jTextField_DocTanka1
! //	 *
! //	 * @return jp.or.med.orca.jma_tokutei.common.component.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_TankaGoukei() {
! //		if (jTextField_TankaGoukei == null) {
! //			jTextField_TankaGoukei = new ExtendedTextField();
! //			jTextField_TankaGoukei.setPreferredSize(new Dimension(80, 20));
! //			jTextField_TankaGoukei.setHorizontalAlignment(JTextField.RIGHT);
! //			jTextField_TankaGoukei.setEditable(false);
! //		}
! //		return jTextField_TankaGoukei;
! //	}
! 
! 
! // del s.inoue 2009/12/02
! //	/**
! //	 * This method initializes jTextField_FutanGoukei
! //	 *
! //	 * @return jp.or.med.orca.jma_tokutei.common.component.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_FutanGoukei() {
! //		if (jTextField_FutanGoukei == null) {
! //			jTextField_FutanGoukei = new ExtendedTextField();
! //			jTextField_FutanGoukei.setPreferredSize(new Dimension(80, 20));
! //			jTextField_FutanGoukei.setHorizontalAlignment(JTextField.RIGHT);
! //			jTextField_FutanGoukei.setEditable(false);
! //		}
! //		return jTextField_FutanGoukei;
! //	}
! 
! //	/**
! //	 * This method initializes jTextField_SeikyuGoukei
! //	 *
! //	 * @return jp.or.med.orca.jma_tokutei.common.component.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_SeikyuGoukei() {
! //		if (jTextField_SeikyuGoukei == null) {
! //			jTextField_SeikyuGoukei = new ExtendedTextField();
! //			jTextField_SeikyuGoukei.setPreferredSize(new Dimension(80, 20));
! //			jTextField_SeikyuGoukei.setHorizontalAlignment(JTextField.RIGHT);
! //			jTextField_SeikyuGoukei.setEditable(false);
! //		}
! //		return jTextField_SeikyuGoukei;
! //	}
! 
! 	@Override
! 	public void keyPressed(KeyEvent e) {
! 		// TODO 自動生成されたメソッド・スタブ
! 
  	}
  
! 	@Override
! 	public void keyReleased(KeyEvent e) {
! 		// TODO 自動生成されたメソッド・スタブ
! 
  	}
  
! 	@Override
! 	public void keyTyped(KeyEvent e) {
! 		// TODO 自動生成されたメソッド・スタブ
! 
  	}
  }
\ No newline at end of file
--- 954,1003 ----
          return jPanel33;
      }
  
!     // edit ver2 s.inoue 2009/08/27
! 	/**
! 	 * This method initializes jTextField_DocTanka1
! 	 *
! 	 * @return jp.or.med.orca.jma_tokutei.common.component.ExtendedTextField
! 	 */
! 	private ExtendedTextField getJTextField_TankaGoukei() {
! 		if (jTextField_TankaGoukei == null) {
! 			jTextField_TankaGoukei = new ExtendedTextField();
! 			jTextField_TankaGoukei.setPreferredSize(new Dimension(80, 20));
! 			jTextField_TankaGoukei.setHorizontalAlignment(JTextField.RIGHT);
! 			jTextField_TankaGoukei.setEditable(false);
! 		}
! 		return jTextField_TankaGoukei;
  	}
  
! 	// edit ver2 s.inoue 2009/08/27
! 	/**
! 	 * This method initializes jTextField_FutanGoukei
! 	 *
! 	 * @return jp.or.med.orca.jma_tokutei.common.component.ExtendedTextField
! 	 */
! 	private ExtendedTextField getJTextField_FutanGoukei() {
! 		if (jTextField_FutanGoukei == null) {
! 			jTextField_FutanGoukei = new ExtendedTextField();
! 			jTextField_FutanGoukei.setPreferredSize(new Dimension(80, 20));
! 			jTextField_FutanGoukei.setHorizontalAlignment(JTextField.RIGHT);
! 			jTextField_FutanGoukei.setEditable(false);
! 		}
! 		return jTextField_FutanGoukei;
  	}
  
! 	/**
! 	 * This method initializes jTextField_SeikyuGoukei
! 	 *
! 	 * @return jp.or.med.orca.jma_tokutei.common.component.ExtendedTextField
! 	 */
! 	private ExtendedTextField getJTextField_SeikyuGoukei() {
! 		if (jTextField_SeikyuGoukei == null) {
! 			jTextField_SeikyuGoukei = new ExtendedTextField();
! 			jTextField_SeikyuGoukei.setPreferredSize(new Dimension(80, 20));
! 			jTextField_SeikyuGoukei.setHorizontalAlignment(JTextField.RIGHT);
! 			jTextField_SeikyuGoukei.setEditable(false);
! 		}
! 		return jTextField_SeikyuGoukei;
  	}
  }
\ No newline at end of file
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JOutputGetujiFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JOutputGetujiFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JOutputGetujiFrameCtrl.java	Wed Apr 28 18:09:54 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JOutputGetujiFrameCtrl.java	Wed Feb 24 17:45:24 2010
***************
*** 11,17 ****
  import java.util.ArrayList;
  import java.util.Collections;
  import java.util.Hashtable;
- import java.util.Iterator;
  import java.util.TreeMap;
  import java.util.TreeSet;
  import java.util.Vector;
--- 11,16 ----
***************
*** 81,92 ****
      private static org.apache.log4j.Logger logger = Logger
      .getLogger(JOutputGetujiFrameCtrl.class);
  
-     // add s.inoue 2010/04/23
-     private static final String INPUT_DONE_FLG = "済";
-     private static final String INPUT_UNDONE_FLG = "未";
- 
- 	private IDialog filePathDialog;
- 
  	// フレームの状態を管理する
  	public enum JOutputHL7FrameState {
  		/* 初期状態 */
--- 80,85 ----
***************
*** 113,138 ****
  	// 一覧データ列項目
  	private static final int COLUMN_INDEX_CHECK = 0;
  	private static final int COLUMN_INDEX_NENDO = 1;
! 	private static final int COLUMN_INDEX_YUKOU = 2;
  
! 	private static final int COLUMN_INDEX_JYUSHIN_SEIRI_NO = 3;
! 	private static final int COLUMN_INDEX_KANANAME = 4;
! 	private static final int COLUMN_INDEX_NAME = 5;
! 	private static final int COLUMN_INDEX_SEX = 6;
! 	private static final int COLUMN_INDEX_BIRTHDAY = 7;
! 	private static final int COLUMN_INDEX_KENSA_NENGAPI = 8;
! 	private static final int COLUMN_INDEX_HENKAN_NITIJI = 9;
! 	private static final int COLUMN_INDEX_HKNJANUM = 10;
! 	private static final int COLUMN_INDEX_SIHARAI_DAIKOU_BANGO = 11;
! 	private static final int COLUMN_INDEX_HIHOKENJYASYO_KIGOU = 12;
! 	private static final int COLUMN_INDEX_HIHOKENJYASYO_NO = 13;
! 	private static final int COLUMN_INDEX_TANKA_GOUKEI = 14;
! 	private static final int COLUMN_INDEX_MADO_FUTAN_GOUKEI = 15;
! 	private static final int COLUMN_INDEX_SEIKYU_KINGAKU = 16;
! 	private static final int COLUMN_INDEX_UPDATE_TIMESTAMP = 17;
! 
! 	// edit s.inoue 2010/04/23
! 	private static final String[] header = {"", "年度" ,"日次", "受診券整理番号", "氏名（カナ）","氏名（漢字）", "性別",
  			"生年月日", "健診実施日","HL7出力日","保険者番号","代行機関番号","被保険者証等記号", "被保険者証等番号",
  			"単価合計","窓口負担合計", "請求金額合計", "更新日付"};
  
--- 106,129 ----
  	// 一覧データ列項目
  	private static final int COLUMN_INDEX_CHECK = 0;
  	private static final int COLUMN_INDEX_NENDO = 1;
! 	private static final int COLUMN_INDEX_JYUSHIN_SEIRI_NO = 2;
! 	private static final int COLUMN_INDEX_KANANAME = 3;
! 	private static final int COLUMN_INDEX_NAME = 4;
! 	private static final int COLUMN_INDEX_SEX = 5;
! 	private static final int COLUMN_INDEX_BIRTHDAY = 6;
! 	private static final int COLUMN_INDEX_KENSA_NENGAPI = 7;
! 	private static final int COLUMN_INDEX_HENKAN_NITIJI = 8;
! 	private static final int COLUMN_INDEX_HKNJANUM = 9;
! 	private static final int COLUMN_INDEX_SIHARAI_DAIKOU_BANGO = 10;
! 	private static final int COLUMN_INDEX_HIHOKENJYASYO_KIGOU = 11;
! 	private static final int COLUMN_INDEX_HIHOKENJYASYO_NO = 12;
! 	private static final int COLUMN_INDEX_TANKA_GOUKEI = 13;
! 	private static final int COLUMN_INDEX_MADO_FUTAN_GOUKEI = 14;
! 	private static final int COLUMN_INDEX_SEIKYU_KINGAKU = 15;
! 	private static final int COLUMN_INDEX_UPDATE_TIMESTAMP = 16;
  
! 	// edit s.inoue 2009/10/26
! 	private static final String[] header = {"", "年度", "受診券整理番号", "氏名（カナ）","氏名（漢字）", "性別",
  			"生年月日", "健診実施日","HL7出力日","保険者番号","代行機関番号","被保険者証等記号", "被保険者証等番号",
  			"単価合計","窓口負担合計", "請求金額合計", "更新日付"};
  
***************
*** 146,156 ****
  	private JSimpleTable modelfixed = null;
  
  	private IDialog messageDialog;
- 	private static String saveTitle= "HL7ファイルを保存";
- 	private static String selectTitle= "保存先を選択";
- 	private static String savaDialogTitle= "HL７ファイルの保存先を選択してください";
- 	private static String selectDialogTitle= "HL７ファイルを選択してください";
- 	private static String saveFileName = "フォルダ";
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
  
  	/**
--- 137,142 ----
***************
*** 161,176 ****
  		switch(state)
  		{
  		case STATUS_INITIALIZED:
! 			// del s.inoue 2010/03/23 初期検索機能
! //			jButton_Seikyu.setEnabled(false);
! //			// edit ver2 s.inoue 2009/08/31
! //			jButton_HL7Output.setEnabled(false);
! //			jButton_End.setEnabled(true);
! //			jButton_Search.setEnabled(true);
! //			jButton_AllSelect.setEnabled(false);
! //			forbitCells.clear();
! //			forbitCells.add(new JSimpleTableCellPosition(-1,0));
! //			break;
  
  		case STATUS_AFTER_SEARCH:
  			jButton_Seikyu.setEnabled(true);
--- 147,161 ----
  		switch(state)
  		{
  		case STATUS_INITIALIZED:
! 			jButton_Seikyu.setEnabled(false);
! 			// edit ver2 s.inoue 2009/08/31
! 			jButton_HL7Output.setEnabled(false);
! 			jButton_End.setEnabled(true);
! 			jButton_Search.setEnabled(true);
! 			jButton_AllSelect.setEnabled(false);
! 			forbitCells.clear();
! 			forbitCells.add(new JSimpleTableCellPosition(-1,0));
! 			break;
  
  		case STATUS_AFTER_SEARCH:
  			jButton_Seikyu.setEnabled(true);
***************
*** 278,304 ****
  				logger.error(e.getMessage());
  			}
  
- 			// add s.inoue 2010/04/23
- 			// 日次請求済みフラグ追加(受付IDの配列をリスト化する)
- 			ArrayList<Hashtable<String, String>> resultItemKeys
- 				= new ArrayList<Hashtable<String, String>>();
- 
- 			StringBuilder sb = new StringBuilder();
- 			sb.append("select UKETUKE_ID CNT from T_KESAI_WK ");
- 
- 			try {
- 				resultItemKeys = JApplication.kikanDatabase.sendExecuteQuery(sb.toString());
- 			} catch (SQLException e) {
- 				logger.error(e.getMessage());
- 				e.printStackTrace();
- 			}
- 
  			// edit s.inoue 2009/10/26
  			/* 検索結果をテーブルに追加する。 */
  			// this.addRowToTable();
! 			rowcolumn = new Object[result.size()][18];
! 			// edit s.inoue 2009/11/14
! 			NumberFormat kingakuFormat = NumberFormat.getNumberInstance();
  
  			for(int i = 0;i < result.size();i++ )
  			{
--- 263,272 ----
  				logger.error(e.getMessage());
  			}
  
  			// edit s.inoue 2009/10/26
  			/* 検索結果をテーブルに追加する。 */
  			// this.addRowToTable();
! 			rowcolumn = new Object[result.size()][17];
  
  			for(int i = 0;i < result.size();i++ )
  			{
***************
*** 307,325 ****
  				/* チェックボックス */
  				// rowcolumn.add(null);
  				rowcolumn[i][COLUMN_INDEX_CHECK] = null;
- 				// edit s.inoue 2010/04/23
- 				boolean nitijiFlg = false;
- 				String uketukeId = resultItem.get("UKETUKE_ID");
- 				for (Hashtable<String, String> key : resultItemKeys) {
- 					if (key.get("CNT").equals(uketukeId)){
- 						nitijiFlg = true;
- 						rowcolumn[i][COLUMN_INDEX_YUKOU] = INPUT_DONE_FLG;
- 						break;
- 					}
- 				}
- 				if(!nitijiFlg)
- 					rowcolumn[i][COLUMN_INDEX_YUKOU] = INPUT_UNDONE_FLG;
- 
  				/* 年度 */
  				// rowcolumn.add(resultItem.get("NENDO"));
  				rowcolumn[i][COLUMN_INDEX_NENDO] = resultItem.get("NENDO");
--- 275,280 ----
***************
*** 355,376 ****
  				/* 被保険者証等番号 */
  				// rowcolumn.add(resultItem.get("HIHOKENJYASYO_NO"));
  				rowcolumn[i][COLUMN_INDEX_HIHOKENJYASYO_NO] = resultItem.get("HIHOKENJYASYO_NO");
- 
  				/* 単価合計 */
  				// rowcolumn.add(resultItem.get("TANKA_GOUKEI"));
! 				String tankaGoukei = resultItem.get("TANKA_GOUKEI");
! 				tankaGoukei = (tankaGoukei.equals("")) ? "0": tankaGoukei;
! 				rowcolumn[i][COLUMN_INDEX_TANKA_GOUKEI] =kingakuFormat.format(Long.parseLong(tankaGoukei));
  				/* 窓口負担合計 */
  				// rowcolumn.add(resultItem.get("MADO_FUTAN_GOUKEI"));
! 				String madogutiGoukei = resultItem.get("MADO_FUTAN_GOUKEI");
! 				madogutiGoukei = (madogutiGoukei.equals("")) ? "0": madogutiGoukei;
! 				rowcolumn[i][COLUMN_INDEX_MADO_FUTAN_GOUKEI] = kingakuFormat.format(Long.parseLong(madogutiGoukei));
  				/* 請求金額合計 */
  				// rowcolumn.add(resultItem.get("SEIKYU_KINGAKU"));
! 				String seikyuGoukei = resultItem.get("SEIKYU_KINGAKU");
! 				seikyuGoukei = (seikyuGoukei.equals("")) ? "0": seikyuGoukei;
! 				rowcolumn[i][COLUMN_INDEX_SEIKYU_KINGAKU] =kingakuFormat.format(Long.parseLong(seikyuGoukei));
  				/* 更新日時 */
  				// rowcolumn.add(resultItem.get("UPDATE_TIMESTAMP").replaceAll("-",""));
  				rowcolumn[i][COLUMN_INDEX_UPDATE_TIMESTAMP] = resultItem.get("UPDATE_TIMESTAMP").replaceAll("-","");
--- 310,324 ----
  				/* 被保険者証等番号 */
  				// rowcolumn.add(resultItem.get("HIHOKENJYASYO_NO"));
  				rowcolumn[i][COLUMN_INDEX_HIHOKENJYASYO_NO] = resultItem.get("HIHOKENJYASYO_NO");
  				/* 単価合計 */
  				// rowcolumn.add(resultItem.get("TANKA_GOUKEI"));
! 				rowcolumn[i][COLUMN_INDEX_TANKA_GOUKEI] = resultItem.get("TANKA_GOUKEI");
  				/* 窓口負担合計 */
  				// rowcolumn.add(resultItem.get("MADO_FUTAN_GOUKEI"));
! 				rowcolumn[i][COLUMN_INDEX_MADO_FUTAN_GOUKEI] = resultItem.get("MADO_FUTAN_GOUKEI");
  				/* 請求金額合計 */
  				// rowcolumn.add(resultItem.get("SEIKYU_KINGAKU"));
! 				rowcolumn[i][COLUMN_INDEX_SEIKYU_KINGAKU] = resultItem.get("SEIKYU_KINGAKU");
  				/* 更新日時 */
  				// rowcolumn.add(resultItem.get("UPDATE_TIMESTAMP").replaceAll("-",""));
  				rowcolumn[i][COLUMN_INDEX_UPDATE_TIMESTAMP] = resultItem.get("UPDATE_TIMESTAMP").replaceAll("-","");
***************
*** 551,557 ****
  	private void searchRefresh(){
  
  		/* 列幅の設定 */
! 		modelfixed.setPreferedColumnWidths(new int[] {50, 50, 50, 100, 200});
  		table.setPreferedColumnWidths(new int[] {100, 30, 70, 70, 70,70,80, 110, 110, 80, 80, 80, 140});
  
  	    // add s.inoue 2009/10/23
--- 499,505 ----
  	private void searchRefresh(){
  
  		/* 列幅の設定 */
! 		modelfixed.setPreferedColumnWidths(new int[] {50, 50, 100, 175});
  		table.setPreferedColumnWidths(new int[] {100, 30, 70, 70, 70,70,80, 110, 110, 80, 80, 80, 140});
  
  	    // add s.inoue 2009/10/23
***************
*** 571,579 ****
  	    }
  
  	    for(int i=dmodel.getColumnCount()-1;i>=0;i--) {
!             // edit s.inoue 2010/04/23
! 	    	// 4 → 5
! 	    	if(i < 5) {
                  table.removeColumn(table.getColumnModel().getColumn(i));
  		    }else{
  	            modelfixed.removeColumn(modelfixed.getColumnModel().getColumn(i));
--- 519,525 ----
  	    }
  
  	    for(int i=dmodel.getColumnCount()-1;i>=0;i--) {
!             if(i < 4) {
                  table.removeColumn(table.getColumnModel().getColumn(i));
  		    }else{
  	            modelfixed.removeColumn(modelfixed.getColumnModel().getColumn(i));
***************
*** 601,616 ****
  	    initilizeSeikyu();
  	    table.refreshTable();
  
- 	    // edit s.inoue 2010/02/24
- 		// 初期選択
- 	    int count = 0;
- 		if (table.getRowCount() > 0) {
- 			table.setRowSelectionInterval(0, 0);
- 			count = table.getRowCount();
- 			} else {
- 				jTextField_Name.requestFocus();
- 		}
- 		jLabel_count.setText(count + " 件");
  	}
  
  	/**
--- 547,552 ----
***************
*** 638,656 ****
  		// state = JOutputHL7FrameState.STATUS_INITIALIZED;
  
  		/* 列幅の設定 */
! 		modelfixed.setPreferedColumnWidths(new int[] {50, 50, 50, 100, 200});
  		table.setPreferedColumnWidths(new int[] {100, 30, 70, 70, 70,70,80, 110, 110, 80, 80, 80, 140});
  
  	    // add s.inoue 2009/10/23
  	    modelfixed.setSelectionModel(table.getSelectionModel());
  
-         // edit s.inoue 2010/04/23
-     	// 5 → 6,4 → 5
  	    for(int i=dmodel.getColumnCount()-1;i>=0;i--) {
!             if(i < 6) {
                  table.removeColumn(table.getColumnModel().getColumn(i));
                  modelfixed.getColumnModel().getColumn(i).setResizable(false);
!             }else if(i != 5) {
                  modelfixed.removeColumn(modelfixed.getColumnModel().getColumn(i));
              }
          }
--- 574,590 ----
  		// state = JOutputHL7FrameState.STATUS_INITIALIZED;
  
  		/* 列幅の設定 */
! 		modelfixed.setPreferedColumnWidths(new int[] {50, 50, 100, 175});
  		table.setPreferedColumnWidths(new int[] {100, 30, 70, 70, 70,70,80, 110, 110, 80, 80, 80, 140});
  
  	    // add s.inoue 2009/10/23
  	    modelfixed.setSelectionModel(table.getSelectionModel());
  
  	    for(int i=dmodel.getColumnCount()-1;i>=0;i--) {
!             if(i < 5) {
                  table.removeColumn(table.getColumnModel().getColumn(i));
                  modelfixed.getColumnModel().getColumn(i).setResizable(false);
!             }else if(i != 4) {
                  modelfixed.removeColumn(modelfixed.getColumnModel().getColumn(i));
              }
          }
***************
*** 694,707 ****
  		/* フォーカス初期化 */
  		initilizeFocus();
  
- 		// add s.inoue 2009/12/01
- 		this.functionListner();
- 
- 	    // edit s.inoue 2009/12/12
- 		/* ワンクリックの処理 */
- 		table.addMouseListener(new JSingleDoubleClickEvent(null,null,modelfixed));
- 		modelfixed.addMouseListener(new JSingleDoubleClickEvent(null, null,modelfixed));
- 
  		// add h.yoshitama 2009/09/03
  //		modelfixed.setSelectionModel(table.getSelectionModel());
  //		modelfixed.getColumnModel().getColumn(0).setResizable(false);
--- 628,633 ----
***************
*** 730,739 ****
  
  		dmodel.setDataVector(resultRefresh(),header);
  
! 		// 4 → 5
  		// 4列以下は固定、以降は変動
  		for(int i=dmodel.getColumnCount()-1;i>=0;i--) {
!             if(i<5) {
                  table.removeColumn(table.getColumnModel().getColumn(i));
                  modelfixed.getColumnModel().getColumn(i).setResizable(false);
              }else{
--- 656,665 ----
  
  		dmodel.setDataVector(resultRefresh(),header);
  
! 		// add s.inoue 2009/10/26
  		// 4列以下は固定、以降は変動
  		for(int i=dmodel.getColumnCount()-1;i>=0;i--) {
!             if(i<4) {
                  table.removeColumn(table.getColumnModel().getColumn(i));
                  modelfixed.getColumnModel().getColumn(i).setResizable(false);
              }else{
***************
*** 758,810 ****
  	    // edit s.inoue 2009/12/07
  	    modelfixed.setCellCheckBoxEditor(new ExtendedCheckBox(), 0);
  	    table.refreshTable();
- 
- 		 // edit s.inoue 2009/11/09
- 		 // 初期選択
- 	     int count = 0;
- 		 if (table.getRowCount() > 0) {
- 			 table.setRowSelectionInterval(0, 0);
- 			 count = table.getRowCount();
- 		 } else {
- 			 jTextField_JyushinKenID.requestFocus();
- 		 }
- 		 jLabel_count.setText(count + " 件");
- 
- 	   // add s.inoue 2009/12/12
- 	   // selectedrowの初期化(simpletableとの連携)
- 	   table.getSelectionModel().addListSelectionListener(new ListSelectionListener() {
- 		   public void valueChanged(ListSelectionEvent e) {
- 		     if(e.getValueIsAdjusting()) return;
- 
- 		     int i = table.getSelectedRow();
- 		     if (i <= 0) return;
- 
- 		     if(modelfixed.getValueAt(i, 0) == null){
- 		    	 modelfixed.setValueAt(Boolean.FALSE, i, 0);
- 		     }else if (modelfixed.getValueAt(i, 0).equals(Boolean.TRUE)){
- 		    	 modelfixed.setValueAt(Boolean.TRUE, i, 0);
- 		     }else{
- 		    	 modelfixed.setValueAt(Boolean.FALSE, i, 0);
- 		     }
- 		   }
- 		 });
- 	   modelfixed.getSelectionModel().addListSelectionListener(new ListSelectionListener() {
- 		   public void valueChanged(ListSelectionEvent e) {
- 		     if(e.getValueIsAdjusting()) return;
- 
- 		     int i = table.getSelectedRow();
- 		     if (i <= 0) return;
- 
- 		     if(modelfixed.getValueAt(i, 0) == null){
- 		    	 modelfixed.setValueAt(Boolean.FALSE, i, 0);
- 		     }else if (modelfixed.getValueAt(i, 0).equals(Boolean.TRUE)){
- 		    	 modelfixed.setValueAt(Boolean.TRUE, i, 0);
- 		     }else{
- 		    	 modelfixed.setValueAt(Boolean.FALSE, i, 0);
- 		     }
- 		   }
- 		 });
- 
  	}
  	/**
  	 * フォーカスを初期化する。
--- 684,689 ----
***************
*** 813,821 ****
  		// edit s.inoue 2009/10/07
  		this.focusTraversalPolicy = new JFocusTraversalPolicy();
  		this.setFocusTraversalPolicy(this.focusTraversalPolicy);
! 		this.focusTraversalPolicy.setDefaultComponent(jTextField_Name);
! 		this.focusTraversalPolicy.addComponent(this.jTextField_Name);
  		this.focusTraversalPolicy.addComponent(this.jTextField_JyushinKenID);
  		this.focusTraversalPolicy.addComponent(this.jTextField_JissiBeginDate);
  		this.focusTraversalPolicy.addComponent(this.jTextField_JissiEndDate);
  		this.focusTraversalPolicy.addComponent(this.jTextField_Hihokenjyasyo_kigou);
--- 692,700 ----
  		// edit s.inoue 2009/10/07
  		this.focusTraversalPolicy = new JFocusTraversalPolicy();
  		this.setFocusTraversalPolicy(this.focusTraversalPolicy);
! 		this.focusTraversalPolicy.setDefaultComponent(jTextField_JyushinKenID);
  		this.focusTraversalPolicy.addComponent(this.jTextField_JyushinKenID);
+ 		this.focusTraversalPolicy.addComponent(this.jTextField_Name);
  		this.focusTraversalPolicy.addComponent(this.jTextField_JissiBeginDate);
  		this.focusTraversalPolicy.addComponent(this.jTextField_JissiEndDate);
  		this.focusTraversalPolicy.addComponent(this.jTextField_Hihokenjyasyo_kigou);
***************
*** 834,851 ****
  		this.focusTraversalPolicy.addComponent(this.jButton_SeikyuListPrint);
  		this.focusTraversalPolicy.addComponent(this.jButton_End);
  	}
- 
- 	// add s.inoue 2009/12/02
- 	/* focus初期化 */
- 	private void functionListner(){
- 		Component comp = null;
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			comp = focusTraversalPolicy.getComponent(i);
- 			comp.addKeyListener(this);
- 		}
- 		modelfixed.addKeyListener(this);
- 	}
- 
  	/**
  	 * テーブルを初期化する。
  	 */
--- 713,718 ----
***************
*** 1057,1135 ****
  	private boolean HL7OutputFiles(JOutputGetujiFrameData JOutputData){
  
  		boolean retCansel = false;
  
! 		// add s.inoue 2010/04/26
! 		try {
! 			// String saveFileName = JPath.createDirectoryUniqueName("HokenjyaMaster");
! 
! // edit s.inoue 2010/04/28
! //			String defaltPath = JPath.getDesktopPath();
! ////			File.separator +
! ////			saveFileName;
! //
! //			// edit s.inoue 2010/04/28
! ////			filePathDialog = DialogFactory.getInstance().createDialog(this, defaltPath);
! ////			filePathDialog.setMessageTitle(saveTitle);
! ////			filePathDialog.setEnabled(false);
! ////			filePathDialog.setDialogSelect(true);
! ////			filePathDialog.setDialogTitle(savaDialogTitle);
! ////			filePathDialog.setSaveFileName(saveFileName);
! ////			filePathDialog.setVisible(true);
! //			filePathDialog = DialogFactory.getInstance().createDialog(this, defaltPath);
! //			filePathDialog.setMessageTitle(saveTitle);
! //			filePathDialog.setEnabled(false);
! //			filePathDialog.setDialogSelect(false);
! //			filePathDialog.setDialogTitle(savaDialogTitle);
! //			filePathDialog.setVisible(true);
! //
! //			// edit s.inoue 2010/03/25
! //			if (filePathDialog.getStatus().equals(RETURN_VALUE.CANCEL))
! //				return false;
! //
! //			String filePath = filePathDialog.getFilePath();
! //			if (filePath.equals(""))
! //				return false;
! //
! //			ArrayList<JOutputHL7Directory> outputHL7
! //				= JOutputData.getJOutputDir();
! //
! //			// HL7出力処理
! //			for (int i = 0; i < outputHL7.size(); i++) {
! //				// edit s.inoue 2009/09/25
! //				JOutputHL7Directory outputHL7List = outputHL7.get(i);
! //
! //				// edit s.inoue 2010/01/05
! //				// Data/HL7の時はコピー先コピー元が同じ回避
! //				if ((JPath.CURRENT_DIR_PATH + File.separator + JPath.ZIP_OUTPUT_DIRECTORY_PATH
! //						+ outputHL7List.GetUniqueName() + ".zip").equals(filePath + File.separator
! //								+ outputHL7List.GetUniqueName() + ".zip"))break;
! //
! //				if( JFileCopy.copyFile(
! //						// コピー元
! //						JPath.CURRENT_DIR_PATH + File.separator + JPath.ZIP_OUTPUT_DIRECTORY_PATH
! //						// edit s.inoue 2009/10/18
! //						// + outputHL7List.GetUniqueName(i) + ".zip",
! //						+ outputHL7List.GetUniqueName() + ".zip",
! //
! //						// コピー先
! //						filePath + File.separator
! //						// edit s.inoue 2009/10/18
! //						// + outputHL7List.GetUniqueName(i) + ".zip"
! //						+ outputHL7List.GetUniqueName() + ".zip"
! //						) != true ){
! //					JErrorMessage.show("M4720", this);
! //				}
! //			}
! 
  		JDirChooser dirSelect = new JDirChooser(JPath.getDesktopPath());
! 		// edit s.inoue 2010/04/28
! 		dirSelect.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
  
  		// ファイル選択ダイアログの表示
  		// 出力するファイルを選択してください。
  		ArrayList<JOutputHL7Directory> outputHL7
  			= JOutputData.getJOutputDir();
  
  			// 出力先のフォルダを選択してください。
  			if( dirSelect.showSaveDialog( this ) == JFileChooser.APPROVE_OPTION ){
  					// HL7出力処理
--- 924,945 ----
  	private boolean HL7OutputFiles(JOutputGetujiFrameData JOutputData){
  
  		boolean retCansel = false;
+ 		// del s.inoue 2009/09/24
+ 		// String SAVESTRING = "出力するHL7ファイルを選択";
+ 		// String OUTSTRING = "HL7ファイルの出力先を選択";
  
! 		// edit s.inoue 2009/10/16
  		JDirChooser dirSelect = new JDirChooser(JPath.getDesktopPath());
! 		// del s.inoue 2009/09/24
! 		// JFileChooser chooser = new JFileChooser(JPath.ZIP_OUTPUT_DIRECTORY_PATH);
  
+ 		// edit s.inoue 2009/09/18
  		// ファイル選択ダイアログの表示
  		// 出力するファイルを選択してください。
  		ArrayList<JOutputHL7Directory> outputHL7
  			= JOutputData.getJOutputDir();
  
+ 		try{
  			// 出力先のフォルダを選択してください。
  			if( dirSelect.showSaveDialog( this ) == JFileChooser.APPROVE_OPTION ){
  					// HL7出力処理
***************
*** 1162,1246 ****
  			}else{
  				retCansel = true;
  			}
! 		} catch (Exception ex) {
! 			ex.printStackTrace();
! 			logger.error(ex.getMessage());
  			JErrorMessage.show("M4720", this);
  		}
  
  		return retCansel;
  	}
  
- // edit s.inoue 2010/04/26
- // こちら修正前のソース
- //	// add s.inoue 2009/09/18
- //	private boolean HL7OutputFiles(JOutputGetujiFrameData JOutputData){
- //
- //		boolean retCansel = false;
- //		// del s.inoue 2009/09/24
- //		// String SAVESTRING = "出力するHL7ファイルを選択";
- //		// String OUTSTRING = "HL7ファイルの出力先を選択";
- //
- //		// edit s.inoue 2009/10/16
- //		JDirChooser dirSelect = new JDirChooser(JPath.getDesktopPath());
- //		// del s.inoue 2009/09/24
- //		// JFileChooser chooser = new JFileChooser(JPath.ZIP_OUTPUT_DIRECTORY_PATH);
- //
- //		// edit s.inoue 2009/09/18
- //		// ファイル選択ダイアログの表示
- //		// 出力するファイルを選択してください。
- //		ArrayList<JOutputHL7Directory> outputHL7
- //			= JOutputData.getJOutputDir();
- //
- //		try{
- //			// 出力先のフォルダを選択してください。
- //			if( dirSelect.showSaveDialog( this ) == JFileChooser.APPROVE_OPTION ){
- //					// HL7出力処理
- //					for (int i = 0; i < outputHL7.size(); i++) {
- //						// edit s.inoue 2009/09/25
- //						JOutputHL7Directory outputHL7List = outputHL7.get(i);
- //
- //						// edit s.inoue 2010/01/05
- //						// Data/HL7の時はコピー先コピー元が同じ回避
- //						if ((JPath.CURRENT_DIR_PATH + File.separator + JPath.ZIP_OUTPUT_DIRECTORY_PATH
- //								+ outputHL7List.GetUniqueName() + ".zip").equals(dirSelect.getSelectedFile().getPath() + File.separator
- //										+ outputHL7List.GetUniqueName() + ".zip"))break;
- //
- //						if( JFileCopy.copyFile(
- //								// コピー元
- //								JPath.CURRENT_DIR_PATH + File.separator + JPath.ZIP_OUTPUT_DIRECTORY_PATH
- //								// edit s.inoue 2009/10/18
- //								// + outputHL7List.GetUniqueName(i) + ".zip",
- //								+ outputHL7List.GetUniqueName() + ".zip",
- //
- //								// コピー先
- //								dirSelect.getSelectedFile().getPath() + File.separator
- //								// edit s.inoue 2009/10/18
- //								// + outputHL7List.GetUniqueName(i) + ".zip"
- //								+ outputHL7List.GetUniqueName() + ".zip"
- //								) != true ){
- //							JErrorMessage.show("M4720", this);
- //						}
- //					}
- //			}else{
- //				retCansel = true;
- //			}
- //		} catch (IOException e) {
- //			e.printStackTrace();
- //			logger.error(e.getMessage());
- //			JErrorMessage.show("M4720", this);
- //		}
- //
- //		return retCansel;
- //	}
- 
  	// add s.inoue 2010/01/19
  	private void checkKigenSetting(String kenshinDate,String limitDataStart,String limitDataEnd){
  		if (!kenshinDate.equals("") &&
  			!limitDataStart.equals("") &&
  				!limitDataEnd.equals("")){
  			if(!(Integer.parseInt(limitDataStart) <= Integer.parseInt(kenshinDate) &&
! 					Integer.parseInt(kenshinDate) <= Integer.parseInt(limitDataEnd))){
  				JErrorMessage.show("M4756", this);
  			}
  		}
--- 972,993 ----
  			}else{
  				retCansel = true;
  			}
! 		} catch (IOException e) {
! 			e.printStackTrace();
! 			logger.error(e.getMessage());
  			JErrorMessage.show("M4720", this);
  		}
  
  		return retCansel;
  	}
  
  	// add s.inoue 2010/01/19
  	private void checkKigenSetting(String kenshinDate,String limitDataStart,String limitDataEnd){
  		if (!kenshinDate.equals("") &&
  			!limitDataStart.equals("") &&
  				!limitDataEnd.equals("")){
  			if(!(Integer.parseInt(limitDataStart) <= Integer.parseInt(kenshinDate) &&
! 					Integer.parseInt(kenshinDate) < Integer.parseInt(limitDataEnd))){
  				JErrorMessage.show("M4756", this);
  			}
  		}
***************
*** 1256,1265 ****
  		// 選択状態を保持する
  		ArrayList<Integer> selectedRows = table.getselectedRows(modelfixed,table);
  
! // del s.inoue 2010/04/06
! //		switch(state)
! //		{
! //		case STATUS_AFTER_SEARCH:
  			int count = 0;
  
  			boolean notExtMessage = false;
--- 1003,1011 ----
  		// 選択状態を保持する
  		ArrayList<Integer> selectedRows = table.getselectedRows(modelfixed,table);
  
! 		switch(state)
! 		{
! 		case STATUS_AFTER_SEARCH:
  			int count = 0;
  
  			boolean notExtMessage = false;
***************
*** 1439,1446 ****
  					logger.error(ex.getMessage());
  				}
  			}
! // del s.inoue 2010/04/06
! //		}
  		buttonCtrl();
  		// add s.inoue 2009/10/27
  		searchRefresh();
--- 1185,1191 ----
  					logger.error(ex.getMessage());
  				}
  			}
! 		}
  		buttonCtrl();
  		// add s.inoue 2009/10/27
  		searchRefresh();
***************
*** 1591,1605 ****
  		       	    		String sumTanka="";
  		       	    		String sumMadoguti="";
  		       	    		String sumSeikyu="";
! 		       	    		// edit s.inoue 2009/11/18
  		       	    		if(table.getData(i,COLUMN_INDEX_TANKA_GOUKEI) != null){
! 		       	    			sumTanka = String.valueOf(table.getData(i,COLUMN_INDEX_TANKA_GOUKEI)).replaceAll(",", "");;
  		       	    		}
  		       	    		if(table.getData(i,COLUMN_INDEX_MADO_FUTAN_GOUKEI) != null){
! 		       	    			sumMadoguti = String.valueOf(table.getData(i,COLUMN_INDEX_MADO_FUTAN_GOUKEI)).replaceAll(",", "");;
  		       	    		}
  		       	    		if(table.getData(i,COLUMN_INDEX_SEIKYU_KINGAKU) != null){
! 		       	    			sumSeikyu = String.valueOf(table.getData(i,COLUMN_INDEX_SEIKYU_KINGAKU)).replaceAll(",", "");;
  		       	    		}
  
  		       	    		// 選択行の合計処理
--- 1336,1350 ----
  		       	    		String sumTanka="";
  		       	    		String sumMadoguti="";
  		       	    		String sumSeikyu="";
! 
  		       	    		if(table.getData(i,COLUMN_INDEX_TANKA_GOUKEI) != null){
! 		       	    			sumTanka = String.valueOf(table.getData(i,COLUMN_INDEX_TANKA_GOUKEI));
  		       	    		}
  		       	    		if(table.getData(i,COLUMN_INDEX_MADO_FUTAN_GOUKEI) != null){
! 		       	    			sumMadoguti = String.valueOf(table.getData(i,COLUMN_INDEX_MADO_FUTAN_GOUKEI));
  		       	    		}
  		       	    		if(table.getData(i,COLUMN_INDEX_SEIKYU_KINGAKU) != null){
! 		       	    			sumSeikyu = String.valueOf(table.getData(i,COLUMN_INDEX_SEIKYU_KINGAKU));
  		       	    		}
  
  		       	    		// 選択行の合計処理
***************
*** 1677,1686 ****
  	 */
  	public void pushedAllSelectButton( ActionEvent e )
  	{
! // del s.inoue 2010/04/19
! //		switch(state)
! //		{
! //		case STATUS_AFTER_SEARCH:
  			// edit h.yoshitama 2009/09/03
  			for(int i = 0;i < modelfixed.getRowCount();i++ )
  			{
--- 1422,1430 ----
  	 */
  	public void pushedAllSelectButton( ActionEvent e )
  	{
! 		switch(state)
! 		{
! 		case STATUS_AFTER_SEARCH:
  			// edit h.yoshitama 2009/09/03
  			for(int i = 0;i < modelfixed.getRowCount();i++ )
  			{
***************
*** 1697,1704 ****
  				isAllSelect = true;
  			}
  
! //			break;
! //		}
  		buttonCtrl();
  	}
  
--- 1441,1448 ----
  				isAllSelect = true;
  			}
  
! 			break;
! 		}
  		buttonCtrl();
  	}
  
***************
*** 1707,1714 ****
  	 */
  	public void pushedSearchButton( ActionEvent e )
  	{
! 		// edit s.inoue 2010/04/06
! 		state = JOutputHL7FrameState.STATUS_AFTER_SEARCH;
  		if(!searchCondition(false))
  			searchRefresh();
  	}
--- 1451,1457 ----
  	 */
  	public void pushedSearchButton( ActionEvent e )
  	{
! 		// add s.inoue 2009/10/27
  		if(!searchCondition(false))
  			searchRefresh();
  	}
***************
*** 1727,1798 ****
  		case STATUS_AFTER_SEARCH:
  		case STATUS_AFTER_SEIKYU:
  		case STATUS_AFTER_HL7:
  
! 			Object[][] obj = resultRefresh();
! 
! 			if(!jCheckBox_IsPermitHL7.isSelected())
! 				return retflg;
! 			if (!initialize){
! 				for (int i = 0; i < obj.length; i++) {
! 					String tutiNengapi = (String) obj[i][COLUMN_INDEX_HENKAN_NITIJI];
! 					if (!tutiNengapi.equals("")){
! 						RETURN_VALUE Ret = JErrorMessage.show("M4740", this);
! 						if(Ret == RETURN_VALUE.NO){
! 							state = JOutputHL7FrameState.STATUS_INITIALIZED;
! 							buttonCtrl();
! 							retflg = true;
! 							break;
! 						}else{
! 							break;
  						}
  					}
  				}
  			}
  			break;
- //			// edit s.inoue 2009/10/26
- //			// rowCount = tableRefresh();
- //			// if( rowCount == 0 )
- //			// {
- //			if (resultRefresh() == null){
- //				// state = JOutputHL7FrameState.STATUS_INITIALIZED;
- //				// edit s.inoue 2009/10/27
- //				retflg= true;
- //			}else{
- //				// add ver2 s.inoue 2009/06/24
- //				if (!initialize){
- //					// 検索結果にＨＬ７変換済みの受診者がいるかどうかチェックする
- //					for(int i = 0; i < table.getRowCount();i++ )
- //					{
- //						// edit ver2 s.inoue 2009/06/23
- //						//Object tutiNengapi = model.getData(i, 7);
- //						// edit h.yoshitama 2009/09/03
- //						Object tutiNengapi = table.getData(i, COLUMN_INDEX_HENKAN_NITIJI);
- //						if(tutiNengapi != null && ! tutiNengapi.equals("") )
- //						{
- //							// add s.inoue 2009/12/15
- //							if(!jCheckBox_IsPermitHL7.isSelected())
- //								return retflg;
- //
- //							RETURN_VALUE Ret = JErrorMessage.show("M4740", this);
- //							if(Ret == RETURN_VALUE.NO)
- //							{
- //								state = JOutputHL7FrameState.STATUS_INITIALIZED;
- //								buttonCtrl();
- //								// del s.inoue 2010/03/23
- ////								table.clearAllRow();
- ////								modelfixed.clearAllRow();
- //								// edit s.inoue 2010/03/23
- //								retflg = false;
- //								break;
- //							}else{
- //								break;
- //							}
- //						}
- //					}
- //				}
- //				state = JOutputHL7FrameState.STATUS_AFTER_SEARCH;
- //			}
- //			break;
  		}
  		buttonCtrl();
  		return retflg;
--- 1470,1517 ----
  		case STATUS_AFTER_SEARCH:
  		case STATUS_AFTER_SEIKYU:
  		case STATUS_AFTER_HL7:
+ 			// edit s.inoue 2009/10/26
+ 			// rowCount = tableRefresh();
+ 			// if( rowCount == 0 )
+ 			// {
+ 			if (resultRefresh() == null){
+ 				// state = JOutputHL7FrameState.STATUS_INITIALIZED;
+ 				// edit s.inoue 2009/10/27
+ 				retflg= true;
+ 			}else{
+ 				// add ver2 s.inoue 2009/06/24
+ 				if (!initialize){
+ 					// 検索結果にＨＬ７変換済みの受診者がいるかどうかチェックする
+ 					for(int i = 0; i < table.getRowCount();i++ )
+ 					{
+ 						// edit ver2 s.inoue 2009/06/23
+ 						//Object tutiNengapi = model.getData(i, 7);
+ 						// edit h.yoshitama 2009/09/03
+ 						Object tutiNengapi = table.getData(i, COLUMN_INDEX_HENKAN_NITIJI);
+ 						if(tutiNengapi != null && ! tutiNengapi.equals("") )
+ 						{
+ 							// add s.inoue 2009/12/15
+ 							if(!jCheckBox_IsPermitHL7.isSelected())
+ 								return retflg;
  
! 							RETURN_VALUE Ret = JErrorMessage.show("M4740", this);
! 							if(Ret == RETURN_VALUE.NO)
! 							{
! 								state = JOutputHL7FrameState.STATUS_INITIALIZED;
! 								buttonCtrl();
! 								table.clearAllRow();
! 								modelfixed.clearAllRow();
! 								// edit s.inoue 2009/10/27
! 								retflg = false;
! 							}else{
! 								break;
! 							}
  						}
  					}
  				}
+ 				state = JOutputHL7FrameState.STATUS_AFTER_SEARCH;
  			}
  			break;
  		}
  		buttonCtrl();
  		return retflg;
***************
*** 1802,1840 ****
  	{
  		Object source = e.getSource();
  		// 5
! 		if( source == jButton_End)
  		{
- 			logger.info(jButton_End.getText());
  			pushedEndButton( e );
  		}
  		// 請求確定処理ボタン
! 		else if( source == jButton_Seikyu)
  		{
- 			logger.info(jButton_Seikyu.getText());
  			pushedSeikyuButton( e );
  		}
  		// HL7 出力ボタン
! 		else if( source == jButton_HL7Output)
  		{
- 			logger.info(jButton_HL7Output.getText());
  			pushedHL7OutputButton( e );
  		}
  		// edit ver2 s.inoue 2009/08/17
! 		else if( source == jButton_SeikyuListPrint)
  		{
- 			logger.info(jButton_SeikyuListPrint.getText());
  			pushedSeikyuPrintButton( e );
  		}
  		// 全選択 ボタン
! 		else if( source == jButton_AllSelect)
  		{
- 			logger.info(jButton_AllSelect.getText());
  			pushedAllSelectButton( e );
  		}
  		// 検索ボタン
! 		else if( source == jButton_Search)
  		{
- 			logger.info(jButton_Search.getText());
  			pushedSearchButton( e );
  		}
  	}
--- 1521,1553 ----
  	{
  		Object source = e.getSource();
  		// 5
! 		if( source == jButton_End			)
  		{
  			pushedEndButton( e );
  		}
  		// 請求確定処理ボタン
! 		else if( source == jButton_Seikyu		)
  		{
  			pushedSeikyuButton( e );
  		}
  		// HL7 出力ボタン
! 		else if( source == jButton_HL7Output	)
  		{
  			pushedHL7OutputButton( e );
  		}
  		// edit ver2 s.inoue 2009/08/17
! 		else if( source == jButton_SeikyuListPrint		)
  		{
  			pushedSeikyuPrintButton( e );
  		}
  		// 全選択 ボタン
! 		else if( source == jButton_AllSelect	)
  		{
  			pushedAllSelectButton( e );
  		}
  		// 検索ボタン
! 		else if( source == jButton_Search		)
  		{
  			pushedSearchButton( e );
  		}
  	}
***************
*** 1859,1897 ****
  		}
  	}
  
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 		int mod = keyEvent.getModifiersEx();
- 
- 		switch(keyEvent.getKeyCode()){
- 		case KeyEvent.VK_F1:
- 			logger.info(jButton_End.getText());
- 			pushedEndButton(null);break;
- 		case KeyEvent.VK_F7:
- 			if (jButton_Seikyu.isEnabled()){
- 				logger.info(jButton_Seikyu.getText());
- 				pushedSeikyuButton(null);
- 			}
- 			break;
- 		case KeyEvent.VK_F9:
- 			if (jButton_HL7Output.isEnabled()){
- 				logger.info(jButton_HL7Output.getText());
- 				pushedHL7OutputButton(null);
- 			}
- 			break;
- 		case KeyEvent.VK_F11:
- 			logger.info(jButton_SeikyuListPrint.getText());
- 			pushedSeikyuPrintButton(null);break;
- 
- 		case KeyEvent.VK_S:
- 			if ((mod & InputEvent.ALT_DOWN_MASK) != 0){
- 				logger.info(jButton_Search.getText());
- 				pushedSearchButton( null );
- 			}
- 			break;
- 		}
- 	}
- 
  	// del s.inoue 2009/09/14
  //	/**
  //	 * 支払代行機関が設定されているかを調べる。
--- 1572,1577 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JOutputNitijiFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JOutputNitijiFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JOutputNitijiFrame.java	Thu Apr 22 17:02:10 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JOutputNitijiFrame.java	Fri Oct  9 10:07:46 2009
***************
*** 33,39 ****
  /**
   * 日次処理(請求)
   */
! public class JOutputNitijiFrame extends JFrame implements ActionListener,KeyListener,
  	ItemListener {
      protected static final long serialVersionUID = 1L;
      protected JPanel jPanel_Content = null;
--- 33,39 ----
  /**
   * 日次処理(請求)
   */
! public class JOutputNitijiFrame extends JFrame implements ActionListener,
  	ItemListener {
      protected static final long serialVersionUID = 1L;
      protected JPanel jPanel_Content = null;
***************
*** 104,110 ****
  //	protected ExtendedTextField jTextField_TankaGoukei = null;
  //	protected ExtendedTextField jTextField_FutanGoukei = null;
  //	protected ExtendedTextField jTextField_SeikyuGoukei = null;
- 	protected ExtendedLabel jLabel_count = null;
  
      /**
           * This is the default constructor
--- 104,109 ----
***************
*** 207,213 ****
  	    jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  	    jButton_End.setActionCommand("終了");
  	    jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 	    jButton_End.setText("戻る(F1)");
  	    jButton_End.addActionListener(this);
  	}
  	return jButton_End;
--- 206,212 ----
  	    jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  	    jButton_End.setActionCommand("終了");
  	    jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 	    jButton_End.setText("戻る");
  	    jButton_End.addActionListener(this);
  	}
  	return jButton_End;
***************
*** 261,271 ****
  	    gridBagConstraints3.ipady = 15;
  	    gridBagConstraints3.gridx = 0;
  
- 	    // edit s.inoue 2010/02/24
  	    jLabel_MainExpl = new GuidanceLabel("tokutei.hl7.frame.guidance.main");
- 		jLabel_MainExpl.setText("検索条件を入力し、検索ボタンを押して受診者を検索します。");
- 		jLabel_MainExpl.setFont(new Font("Dialog", Font.PLAIN, 13));
- 		jLabel_MainExpl.setName("jLabel1");
  
  	    jPanel_TitleArea = new JPanel();
  	    jPanel_TitleArea.setLayout(new GridBagLayout());
--- 260,266 ----
***************
*** 284,290 ****
      private ExtendedButton getJButton_Seikyu() {
  	if (jButton_Seikyu == null) {
  	    jButton_Seikyu = new ExtendedButton();
! 	    jButton_Seikyu.setText("請求処理(F9)");
  	    jButton_Seikyu.addActionListener(this);
  	}
  	return jButton_Seikyu;
--- 279,285 ----
      private ExtendedButton getJButton_Seikyu() {
  	if (jButton_Seikyu == null) {
  	    jButton_Seikyu = new ExtendedButton();
! 	    jButton_Seikyu.setText("請求処理");
  	    jButton_Seikyu.addActionListener(this);
  	}
  	return jButton_Seikyu;
***************
*** 298,305 ****
  	private ExtendedButton getJButton_SeikyuListPrint() {
  	if (jButton_SeikyuListPrint == null) {
  		jButton_SeikyuListPrint = new ExtendedButton();
! 		jButton_SeikyuListPrint.setText("請求リスト印刷(F11)");
! 		jButton_SeikyuListPrint.setPreferredSize(new Dimension(140, 25));
  		jButton_SeikyuListPrint.addActionListener(this);
  	}
  	return jButton_SeikyuListPrint;
--- 293,300 ----
  	private ExtendedButton getJButton_SeikyuListPrint() {
  	if (jButton_SeikyuListPrint == null) {
  		jButton_SeikyuListPrint = new ExtendedButton();
! 		jButton_SeikyuListPrint.setText("請求リスト印刷");
! 		jButton_SeikyuListPrint.setPreferredSize(new Dimension(100, 25));
  		jButton_SeikyuListPrint.addActionListener(this);
  	}
  	return jButton_SeikyuListPrint;
***************
*** 330,340 ****
      private ExtendedButton getJButton_AllSelect() {
  	if (jButton_AllSelect == null) {
  	    jButton_AllSelect = new ExtendedButton();
! 	    jButton_AllSelect.setText("全て選択(A)");
  	    jButton_AllSelect.setMinimumSize(new Dimension(82, 20));
  	    jButton_AllSelect.setFont(new Font("Dialog", Font.PLAIN, 12));
  	    jButton_AllSelect.addActionListener(this);
- 	    jButton_AllSelect.setMnemonic(KeyEvent.VK_A);
  	}
  	return jButton_AllSelect;
      }
--- 325,334 ----
      private ExtendedButton getJButton_AllSelect() {
  	if (jButton_AllSelect == null) {
  	    jButton_AllSelect = new ExtendedButton();
! 	    jButton_AllSelect.setText("全て選択");
  	    jButton_AllSelect.setMinimumSize(new Dimension(82, 20));
  	    jButton_AllSelect.setFont(new Font("Dialog", Font.PLAIN, 12));
  	    jButton_AllSelect.addActionListener(this);
  	}
  	return jButton_AllSelect;
      }
***************
*** 401,407 ****
      private ExtendedTextField getJTextField_Name() {
  	if (jTextField_Name == null) {
  	    jTextField_Name = new ExtendedTextField(ImeMode.IME_ZENKAKU_KANA);
- 	    jTextField_Name.setPreferredSize(new Dimension(100, 20));
  	}
  	return jTextField_Name;
      }
--- 395,400 ----
***************
*** 440,450 ****
      private ExtendedButton getJButton_Search() {
  	if (jButton_Search == null) {
  	    jButton_Search = new ExtendedButton();
! 	    jButton_Search.setText("検索(S)");
  	    jButton_Search.setMinimumSize(new Dimension(58, 20));
  	    jButton_Search.setFont(new Font("Dialog", Font.PLAIN, 12));
  	    jButton_Search.addActionListener(this);
- 	    jButton_Search.setMnemonic(KeyEvent.VK_S);
  	}
  	return jButton_Search;
      }
--- 433,442 ----
      private ExtendedButton getJButton_Search() {
  	if (jButton_Search == null) {
  	    jButton_Search = new ExtendedButton();
! 	    jButton_Search.setText("検索");
  	    jButton_Search.setMinimumSize(new Dimension(58, 20));
  	    jButton_Search.setFont(new Font("Dialog", Font.PLAIN, 12));
  	    jButton_Search.addActionListener(this);
  	}
  	return jButton_Search;
      }
***************
*** 460,467 ****
      private ExtendedButton getJButton_Kessai() {
  	if (jButton_SeikyuEdit == null) {
  	    jButton_SeikyuEdit = new ExtendedButton();
! 	    jButton_SeikyuEdit.setText("請求データ編集(F12)");
! 	    jButton_SeikyuEdit.setPreferredSize(new Dimension(150, 25));
  	    jButton_SeikyuEdit.addActionListener(this);
  	}
  	return jButton_SeikyuEdit;
--- 452,459 ----
      private ExtendedButton getJButton_Kessai() {
  	if (jButton_SeikyuEdit == null) {
  	    jButton_SeikyuEdit = new ExtendedButton();
! 	    jButton_SeikyuEdit.setText("請求データ編集");
! 	    jButton_SeikyuEdit.setPreferredSize(new Dimension(100, 25));
  	    jButton_SeikyuEdit.addActionListener(this);
  	}
  	return jButton_SeikyuEdit;
***************
*** 499,511 ****
  	    gridBagConstraints26.insets = new Insets(0, 5, 0, 0);
  	    GridBagConstraints gridBagConstraints12 = new GridBagConstraints();
  	    gridBagConstraints12.gridx = 6;
! 	    // del s.inoue 2010/03/23
! //	    gridBagConstraints12.ipadx = 10;
! //	    gridBagConstraints12.ipady = 10;
  	    gridBagConstraints12.weightx = 1.0D;
  	    gridBagConstraints12.gridy = 3;
- 	    gridBagConstraints12.anchor = GridBagConstraints.EAST;
- 
  	    GridBagConstraints gridBagConstraints1 = new GridBagConstraints();
  	    gridBagConstraints1.gridx = 1;
  	    gridBagConstraints1.gridwidth = 9;
--- 491,500 ----
  	    gridBagConstraints26.insets = new Insets(0, 5, 0, 0);
  	    GridBagConstraints gridBagConstraints12 = new GridBagConstraints();
  	    gridBagConstraints12.gridx = 6;
! 	    gridBagConstraints12.ipadx = 10;
! 	    gridBagConstraints12.ipady = 10;
  	    gridBagConstraints12.weightx = 1.0D;
  	    gridBagConstraints12.gridy = 3;
  	    GridBagConstraints gridBagConstraints1 = new GridBagConstraints();
  	    gridBagConstraints1.gridx = 1;
  	    gridBagConstraints1.gridwidth = 9;
***************
*** 548,554 ****
  	    GridBagConstraints gridBagConstraints47 = new GridBagConstraints();
  	    gridBagConstraints47.gridx = 0;
  	    gridBagConstraints47.gridy = 2;
- 	    gridBagConstraints47.gridy = 2;
  	    gridBagConstraints47.anchor = GridBagConstraints.WEST;
  	    jLabel2 = new ExtendedLabel();
  	    jLabel2.setText("保険者番号");
--- 537,542 ----
***************
*** 588,594 ****
  	    gridBagConstraints28.gridx = 0;
  	    gridBagConstraints28.anchor = GridBagConstraints.WEST;
  	    gridBagConstraints28.insets = new Insets(0, 0, 0, 0);
! 	    gridBagConstraints28.gridy = 6;
  	    GridBagConstraints gridBagConstraints25 = new GridBagConstraints();
  	    gridBagConstraints25.fill = GridBagConstraints.HORIZONTAL;
  	    gridBagConstraints25.gridy = 1;
--- 576,582 ----
  	    gridBagConstraints28.gridx = 0;
  	    gridBagConstraints28.anchor = GridBagConstraints.WEST;
  	    gridBagConstraints28.insets = new Insets(0, 0, 0, 0);
! 	    gridBagConstraints28.gridy = 5;
  	    GridBagConstraints gridBagConstraints25 = new GridBagConstraints();
  	    gridBagConstraints25.fill = GridBagConstraints.HORIZONTAL;
  	    gridBagConstraints25.gridy = 1;
***************
*** 616,622 ****
  	    gridBagConstraints19.gridx = 6;
  	    gridBagConstraints19.anchor = GridBagConstraints.NORTHEAST;
  	    gridBagConstraints19.insets = new Insets(0, 0, 0, 0);
! 	    gridBagConstraints19.gridy = 6;
  	    GridBagConstraints gridBagConstraints17 = new GridBagConstraints();
  	    gridBagConstraints17.fill = GridBagConstraints.HORIZONTAL;
  	    gridBagConstraints17.gridy = 0;
--- 604,610 ----
  	    gridBagConstraints19.gridx = 6;
  	    gridBagConstraints19.anchor = GridBagConstraints.NORTHEAST;
  	    gridBagConstraints19.insets = new Insets(0, 0, 0, 0);
! 	    gridBagConstraints19.gridy = 5;
  	    GridBagConstraints gridBagConstraints17 = new GridBagConstraints();
  	    gridBagConstraints17.fill = GridBagConstraints.HORIZONTAL;
  	    gridBagConstraints17.gridy = 0;
***************
*** 637,661 ****
  		gridBagConstraints59.anchor = GridBagConstraints.EAST;
  		// gridBagConstraints59.fill = GridBagConstraints.BOTH;
  		// gridBagConstraints59.gridwidth = 1;
! 		gridBagConstraints59.gridy = 6;
! 
! 		// edit s.inoue 2010/02/24
! 		jLabel_count = new ExtendedLabel();
! 		jLabel_count.setPreferredSize(new Dimension(100, 15));
! 		jLabel_count.setFont(new Font("Dialog", Font.PLAIN, 12));
! 
! 	    GridBagConstraints gridBagConstraints60 = new GridBagConstraints();
! 	    gridBagConstraints60.gridx = 6;
! 	    gridBagConstraints60.anchor = GridBagConstraints.NORTHEAST;
! 	    gridBagConstraints60.insets = new Insets(5, 0, 0, 0);
! 	    gridBagConstraints60.gridy = 6;
  
  	    jPanel1 = new JPanel();
  	    jPanel1.setLayout(new GridBagLayout());
  	    jPanel1.setName("jPanel1");
  	    jPanel1.setBorder(BorderFactory.createCompoundBorder(BorderFactory.createLineBorder(Color.gray, 1), BorderFactory.createEmptyBorder(5, 5, 5, 5)));
! 	    jPanel1.add(jLabel, gridBagConstraints40);
! 	    jPanel1.add(getJTextField_JyushinKenID(), gridBagConstraints17);
  	    jPanel1.add(getJTextField_HokensyoCode(), gridBagConstraints24);
  	    jPanel1.add(jLabel32, gridBagConstraints43);
  	    jPanel1.add(getJComboBox_HokenjyaNumber(), gridBagConstraints20);
--- 625,638 ----
  		gridBagConstraints59.anchor = GridBagConstraints.EAST;
  		// gridBagConstraints59.fill = GridBagConstraints.BOTH;
  		// gridBagConstraints59.gridwidth = 1;
! 		gridBagConstraints59.gridy = 5;
  
  	    jPanel1 = new JPanel();
  	    jPanel1.setLayout(new GridBagLayout());
  	    jPanel1.setName("jPanel1");
  	    jPanel1.setBorder(BorderFactory.createCompoundBorder(BorderFactory.createLineBorder(Color.gray, 1), BorderFactory.createEmptyBorder(5, 5, 5, 5)));
! 	    jPanel1.add(jLabel, gridBagConstraints38);
! 	    jPanel1.add(getJTextField_JyushinKenID(), gridBagConstraints39);
  	    jPanel1.add(getJTextField_HokensyoCode(), gridBagConstraints24);
  	    jPanel1.add(jLabel32, gridBagConstraints43);
  	    jPanel1.add(getJComboBox_HokenjyaNumber(), gridBagConstraints20);
***************
*** 663,685 ****
  	    jPanel1.add(getJTextField_HokensyoNumber(), gridBagConstraints25);
  	    jPanel1.add(jLabel33, gridBagConstraints48);
  	    jPanel1.add(getJComboBox_SeikyuKikanNumber(), gridBagConstraints53);
! 	    jPanel1.add(jLabel1, gridBagConstraints38);
! 	    jPanel1.add(getJTextField_Name(), gridBagConstraints39);
  	    jPanel1.add(getJComboBox_SyubetuCode(), gridBagConstraints50);
- 
- 	    // edit s.inoue 2010/02/24
- 	    // jPanel1.add(jLabel_count, gridBagConstraints60);
  	    jPanel1.add(getJButton_Search(), gridBagConstraints19);
  	    jPanel1.add(getJButton_AllSelect(), gridBagConstraints28);
  	    jPanel1.add(jLabel31, gridBagConstraints58);
! 	    // edit s.inoue 2010/03/23
! 	    // jPanel1.add(getJPanel31(), gridBagConstraints12);
! 	    jPanel1.add(jLabel_count, gridBagConstraints12);
! 
  	    jPanel1.add(getJPanel32(), gridBagConstraints26);
  	    // add ver2 s.inoue 2009/06/23
  	    jPanel1.add(getJCheckBox_JisiYear(), gridBagConstraints59);
! 
  	}
  	return jPanel1;
      }
--- 640,657 ----
  	    jPanel1.add(getJTextField_HokensyoNumber(), gridBagConstraints25);
  	    jPanel1.add(jLabel33, gridBagConstraints48);
  	    jPanel1.add(getJComboBox_SeikyuKikanNumber(), gridBagConstraints53);
! 	    jPanel1.add(jLabel1, gridBagConstraints40);
! 	    jPanel1.add(getJTextField_Name(), gridBagConstraints17);
  	    jPanel1.add(getJComboBox_SyubetuCode(), gridBagConstraints50);
  	    jPanel1.add(getJButton_Search(), gridBagConstraints19);
  	    jPanel1.add(getJButton_AllSelect(), gridBagConstraints28);
  	    jPanel1.add(jLabel31, gridBagConstraints58);
! 	    // del s.inoue 2009/08/28
! 	    jPanel1.add(getJPanel31(), gridBagConstraints12);
  	    jPanel1.add(getJPanel32(), gridBagConstraints26);
  	    // add ver2 s.inoue 2009/06/23
  	    jPanel1.add(getJCheckBox_JisiYear(), gridBagConstraints59);
! 	    gridBagConstraints47.gridy = 2;
  	}
  	return jPanel1;
      }
***************
*** 748,754 ****
      private JPanel getJPanel2() {
  	if (jPanel2 == null) {
  	    GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
! 	    gridBagConstraints2.insets = new Insets(5, 10, 5, 10);
  	    gridBagConstraints2.gridy = 0;
  	    gridBagConstraints2.weightx = 1.0D;
  	    gridBagConstraints2.weighty = 1.0D;
--- 720,726 ----
      private JPanel getJPanel2() {
  	if (jPanel2 == null) {
  	    GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
! 	    gridBagConstraints2.insets = new Insets(10, 10, 10, 10);
  	    gridBagConstraints2.gridy = 0;
  	    gridBagConstraints2.weightx = 1.0D;
  	    gridBagConstraints2.weighty = 1.0D;
***************
*** 771,777 ****
  	if (jPanel_TableArea == null) {
  	    jPanel_TableArea = new JPanel();
  	    jPanel_TableArea.setLayout(new BorderLayout());
! 	    jPanel_TableArea.setBorder(BorderFactory.createEmptyBorder(0, 10,0, 10));
  	}
  	return jPanel_TableArea;
      }
--- 743,749 ----
  	if (jPanel_TableArea == null) {
  	    jPanel_TableArea = new JPanel();
  	    jPanel_TableArea.setLayout(new BorderLayout());
! 	    jPanel_TableArea.setBorder(BorderFactory.createEmptyBorder(0, 10,10, 10));
  	}
  	return jPanel_TableArea;
      }
***************
*** 945,968 ****
          return jPanel33;
      }
  
- 	@Override
- 	public void keyPressed(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyReleased(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyTyped(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
      // del s.inoue 2009/08/28
  	/**
  	 * This method initializes jTextField_DocTanka1
--- 917,922 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JOutputNitijiFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JOutputNitijiFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JOutputNitijiFrameCtrl.java	Mon Apr 19 18:50:58 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JOutputNitijiFrameCtrl.java	Wed Feb 24 17:45:24 2010
***************
*** 18,24 ****
  import java.util.Vector;
  import java.awt.Component;
  import java.awt.event.ActionEvent;
- import java.awt.event.InputEvent;
  import java.awt.event.ItemEvent;
  import java.awt.event.KeyEvent;
  import java.awt.event.WindowAdapter;
--- 18,23 ----
***************
*** 220,242 ****
  
  	    // edit s.inoue 2009/12/07
  		// 固定,変動リフレッシュ
! 	    modelfixed.setCellCheckBoxEditor(new ExtendedCheckBox(), 0);
  //		table.setCellEditForbid(forbitCells);
  //		modelfixed.setCellEditForbid(forbitFixedCells);
  	    initilizeSeikyu();
  	    table.refreshTable();
  
- 	    // edit s.inoue 2010/02/24
- 		// 初期選択
- 	    int count = 0;
- 		if (table.getRowCount() > 0) {
- 			table.setRowSelectionInterval(0, 0);
- 			count = table.getRowCount();
- 			} else {
- 				jTextField_Name.requestFocus();
- 		}
- 		jLabel_count.setText(count + " 件");
- 
  	}
  
  	// add s.inoue 2010/01/19
--- 219,230 ----
  
  	    // edit s.inoue 2009/12/07
  		// 固定,変動リフレッシュ
! 	    modelfixed.setCellCheckBoxEditor(new JCheckBox(), 0);
  //		table.setCellEditForbid(forbitCells);
  //		modelfixed.setCellEditForbid(forbitFixedCells);
  	    initilizeSeikyu();
  	    table.refreshTable();
  
  	}
  
  	// add s.inoue 2010/01/19
***************
*** 245,251 ****
  			!limitDataStart.equals("") &&
  				!limitDataEnd.equals("")){
  			if(!(Integer.parseInt(limitDataStart) <= Integer.parseInt(kenshinDate) &&
! 					Integer.parseInt(kenshinDate) <= Integer.parseInt(limitDataEnd))){
  				JErrorMessage.show("M4756", this);
  			}
  		}
--- 233,239 ----
  			!limitDataStart.equals("") &&
  				!limitDataEnd.equals("")){
  			if(!(Integer.parseInt(limitDataStart) <= Integer.parseInt(kenshinDate) &&
! 					Integer.parseInt(kenshinDate) < Integer.parseInt(limitDataEnd))){
  				JErrorMessage.show("M4756", this);
  			}
  		}
***************
*** 626,633 ****
  
  		this.initilizeSeikyu();
  		this.initilizeFocus();
- 		// add s.inoue 2009/12/01
- 		this.functionListner();
  
  		// add s.inoue 2009/10/26
          final JScrollPane scroll = new JScrollPane(table);
--- 614,619 ----
***************
*** 698,716 ****
  	   }
  
  	   // add s.inoue 2009/12/07
! 	   modelfixed.setCellCheckBoxEditor(new ExtendedCheckBox(), 0);
  	   table.refreshTable();
  
  		 // edit s.inoue 2009/11/09
  		 // 初期選択
- 	     int count = 0;
  		 if (table.getRowCount() > 0) {
  			 table.setRowSelectionInterval(0, 0);
- 			 count = table.getRowCount();
  		 } else {
  			 jTextField_JyushinKenID.requestFocus();
  		 }
- 		 jLabel_count.setText(count + " 件");
  
  		  	// add s.inoue 2009/12/12
  		   // selectedrowの初期化(simpletableとの連携)
--- 684,699 ----
  	   }
  
  	   // add s.inoue 2009/12/07
! 	   modelfixed.setCellCheckBoxEditor(new JCheckBox(), 0);
  	   table.refreshTable();
  
  		 // edit s.inoue 2009/11/09
  		 // 初期選択
  		 if (table.getRowCount() > 0) {
  			 table.setRowSelectionInterval(0, 0);
  		 } else {
  			 jTextField_JyushinKenID.requestFocus();
  		 }
  
  		  	// add s.inoue 2009/12/12
  		   // selectedrowの初期化(simpletableとの連携)
***************
*** 756,764 ****
  		// edit s.inoue 2009/10/07
  		this.focusTraversalPolicy = new JFocusTraversalPolicy();
  		this.setFocusTraversalPolicy(this.focusTraversalPolicy);
! 		this.focusTraversalPolicy.setDefaultComponent(jTextField_Name);
! 		this.focusTraversalPolicy.addComponent(this.jTextField_Name);
  		this.focusTraversalPolicy.addComponent(this.jTextField_JyushinKenID);
  		this.focusTraversalPolicy.addComponent(this.jTextField_JissiBeginDate);
  		this.focusTraversalPolicy.addComponent(this.jTextField_JissiEndDate);
  		this.focusTraversalPolicy.addComponent(this.jTextField_Hihokenjyasyo_kigou);
--- 739,747 ----
  		// edit s.inoue 2009/10/07
  		this.focusTraversalPolicy = new JFocusTraversalPolicy();
  		this.setFocusTraversalPolicy(this.focusTraversalPolicy);
! 		this.focusTraversalPolicy.setDefaultComponent(jTextField_JyushinKenID);
  		this.focusTraversalPolicy.addComponent(this.jTextField_JyushinKenID);
+ 		this.focusTraversalPolicy.addComponent(this.jTextField_Name);
  		this.focusTraversalPolicy.addComponent(this.jTextField_JissiBeginDate);
  		this.focusTraversalPolicy.addComponent(this.jTextField_JissiEndDate);
  		this.focusTraversalPolicy.addComponent(this.jTextField_Hihokenjyasyo_kigou);
***************
*** 774,789 ****
  		this.focusTraversalPolicy.addComponent(this.jButton_SeikyuEdit);
  		this.focusTraversalPolicy.addComponent(this.jButton_End);
  	}
- 	// add s.inoue 2009/12/01
- 	/* focus初期化 */
- 	private void functionListner(){
- 		Component comp = null;
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			comp = focusTraversalPolicy.getComponent(i);
- 			comp.addKeyListener(this);
- 		}
- 		modelfixed.addKeyListener(this);
- 	}
  
  	/**
  	 * テーブルを初期化する。
--- 757,762 ----
***************
*** 1252,1258 ****
  			searchRefresh();
  	}
  
! 	// add s.inoue 2010/02/03
  	/**
  	 * 遷移先の画面から戻ってきた場合
  	 */
--- 1225,1231 ----
  			searchRefresh();
  	}
  
! 	// add s.inoue 2009/11/25
  	/**
  	 * 遷移先の画面から戻ってきた場合
  	 */
***************
*** 1436,1468 ****
  	{
  	}
  
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 		int mod = keyEvent.getModifiersEx();
- 
- 		switch(keyEvent.getKeyCode()){
- 		case KeyEvent.VK_F1:
- 			logger.info(jButton_End.getText());
- 			pushedEndButton(null);break;
- 		case KeyEvent.VK_F9:
- 			logger.info(jButton_Seikyu.getText());
- 			pushedSeikyuButton(null);break;
- 		case KeyEvent.VK_F11:
- 			logger.info(jButton_SeikyuListPrint.getText());
- 			pushedSeikyuPrintButton(null);break;
- 		case KeyEvent.VK_F12:
- 			logger.info(jButton_SeikyuEdit.getText());
- 			pushedSeikyuEditButton(null);break;
- 
- //		case KeyEvent.VK_S:
- //			if ((mod & InputEvent.ALT_DOWN_MASK) != 0){
- //				logger.info(jButton_Search.getText());
- //				pushedSearchButton( null );
- //			}
- //			break;
- 		}
- 	}
- 
  	public void actionPerformed( ActionEvent e )
  	{
  		Object source = e.getSource();
--- 1409,1414 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JRegisterUserFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JRegisterUserFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JRegisterUserFrame.java	Mon Apr 19 19:19:52 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JRegisterUserFrame.java	Tue Aug 11 17:55:30 2009
***************
*** 6,14 ****
  import java.awt.Dimension;
  import java.awt.GridBagLayout;
  import java.awt.GridLayout;
  import javax.swing.SwingConstants;
  import java.awt.CardLayout;
- import java.awt.Component;
  import java.awt.GridBagConstraints;
  import java.awt.Font;
  import java.awt.Color;
--- 6,15 ----
  import java.awt.Dimension;
  import java.awt.GridBagLayout;
  import java.awt.GridLayout;
+ import java.awt.FlowLayout;
  import javax.swing.SwingConstants;
+ import javax.swing.JLabel;
  import java.awt.CardLayout;
  import java.awt.GridBagConstraints;
  import java.awt.Font;
  import java.awt.Color;
***************
*** 17,57 ****
  
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedButton;
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedComboBox;
- import jp.or.med.orca.jma_tokutei.common.component.ExtendedLabel;
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedPasswordField;
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedTextField;
- import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  import javax.swing.BorderFactory;
  
  
  
! public class JRegisterUserFrame extends JFrame implements ActionListener,KeyListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
  	protected JPanel jPanel_ButtonArea = null;
  	protected JPanel jPanel_NaviArea = null;
  	protected JPanel jPanel_TitleArea = null;
  	protected JPanel jPanel_ExplArea2 = null;
  	protected JPanel jPanel_ExplArea1 = null;
  	protected JPanel jPanel_MainArea = null;
  	protected JPanel jPanel_DrawArea = null;
- //	protected JPanel jPanel = null;
- 	protected ExtendedLabel jLabel_Title = null;
- 	protected ExtendedLabel jLabel_MainExpl = null;
- 	protected ExtendedLabel jLabal_SubExpl = null;
- 
- 	protected ExtendedButton jButton_End = null;
  	protected ExtendedTextField jTextField_UserName = null;
  	protected ExtendedPasswordField jPasswordField_Password = null;
  	protected ExtendedButton jButton_Register = null;
  	protected ExtendedComboBox jComboBox_Grant = null;
! 	protected ExtendedLabel jLabel = null;
! 	protected ExtendedLabel jLabel1 = null;
! 	protected ExtendedLabel jLabel2 = null;
! 	protected ExtendedLabel jLabel3 = null;
! 	private JFocusTraversalPolicy focusTraversalPolicy = null;
  
  	/**
  	 * This is the default constructor
--- 18,54 ----
  
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedButton;
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedComboBox;
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedPasswordField;
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedTextField;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
+ import java.awt.Insets;
  import javax.swing.BorderFactory;
  
  
  
! public class JRegisterUserFrame extends JFrame implements ActionListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
  	protected JPanel jPanel_ButtonArea = null;
+ 	protected ExtendedButton jButton_End = null;
  	protected JPanel jPanel_NaviArea = null;
+ 	protected JLabel jLabel_Title = null;
+ 	protected JLabel jLabel_MainExpl = null;
  	protected JPanel jPanel_TitleArea = null;
  	protected JPanel jPanel_ExplArea2 = null;
+ 	protected JLabel jLabal_SubExpl = null;
  	protected JPanel jPanel_ExplArea1 = null;
  	protected JPanel jPanel_MainArea = null;
  	protected JPanel jPanel_DrawArea = null;
  	protected ExtendedTextField jTextField_UserName = null;
  	protected ExtendedPasswordField jPasswordField_Password = null;
  	protected ExtendedButton jButton_Register = null;
  	protected ExtendedComboBox jComboBox_Grant = null;
! 	private JLabel jLabel = null;
! 	private JLabel jLabel1 = null;
! 	private JLabel jLabel2 = null;
! 	private JPanel jPanel = null;
  
  	/**
  	 * This is the default constructor
***************
*** 63,91 ****
  
  	/**
  	 * This method initializes this
! 	 *
  	 * @return void
  	 */
  	private void initialize() {
! 		// edit s.inoue 2009/12/04
! //		this.setTitle(ViewSettings.getTokuteFrameTitleWithKikanInfomation());
! //		Dimension size = ViewSettings.getTokuteiLoginFrameSize();
! //		this.setSize(size);
! //		this.setMinimumSize(size);
! //		this.setPreferredSize(size);
! //		this.setLocationRelativeTo( null );
! //		this.setVisible(true);
  //		this.setContentPane(getJPanel_Content());
! 		this.setContentPane(getJPanel_Content());
  		this.setTitle(ViewSettings.getTokuteFrameTitleWithKikanInfomation());
! 		this.setSize(ViewSettings.getAdminLoginFrameSize());
  		this.setLocationRelativeTo( null );
! 		this.setVisible(true);
  	}
  
  	/**
  	 * This method initializes jPanel_Content
! 	 *
  	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_Content() {
--- 60,94 ----
  
  	/**
  	 * This method initializes this
! 	 * 
  	 * @return void
  	 */
  	private void initialize() {
! 		/* Modified 2008/05/06 若月  */
! 		/* --------------------------------------------------- */
! //		this.setSize(600, 300);
  //		this.setContentPane(getJPanel_Content());
! //		this.setTitle("特定健診システム");
! //		setLocationRelativeTo( null );
! //		this.setVisible(true);
! 		/* --------------------------------------------------- */
  		this.setTitle(ViewSettings.getTokuteFrameTitleWithKikanInfomation());
! 		
! 		Dimension size = ViewSettings.getTokuteiLoginFrameSize();
! 		this.setSize(size);
! 		this.setMinimumSize(size);
! 		this.setPreferredSize(size);
! 
  		this.setLocationRelativeTo( null );
! 		this.setVisible(true);		
! 
! 		this.setContentPane(getJPanel_Content());
! 		/* --------------------------------------------------- */
  	}
  
  	/**
  	 * This method initializes jPanel_Content
! 	 * 
  	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_Content() {
***************
*** 102,110 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_ButtonArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_ButtonArea() {
  		if (jPanel_ButtonArea == null) {
--- 105,113 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_ButtonArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_ButtonArea() {
  		if (jPanel_ButtonArea == null) {
***************
*** 126,134 ****
  	}
  
  	/**
! 	 * This method initializes jButton_End
! 	 *
! 	 * @return javax.swing.ExtendedButton
  	 */
  	private ExtendedButton getJButton_End() {
  		if (jButton_End == null) {
--- 129,137 ----
  	}
  
  	/**
! 	 * This method initializes jButton_End	
! 	 * 	
! 	 * @return javax.swing.ExtendedButton	
  	 */
  	private ExtendedButton getJButton_End() {
  		if (jButton_End == null) {
***************
*** 136,162 ****
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
  	}
  
  	/**
! 	 * This method initializes jPanel_NaviArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_NaviArea() {
  		if (jPanel_NaviArea == null) {
  			CardLayout cardLayout2 = new CardLayout();
  			cardLayout2.setHgap(10);
  			cardLayout2.setVgap(10);
! 			jLabel_MainExpl = new ExtendedLabel();
  			jLabel_MainExpl.setText("ユーザ情報を登録します。");
  			jLabel_MainExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
  			jLabel_MainExpl.setName("jLabel1");
! 			jLabel_Title = new ExtendedLabel();
  			jLabel_Title.setText("ユーザ情報登録");
  			jLabel_Title.setFont(new Font("Dialog", Font.PLAIN, 18));
  			jLabel_Title.setBackground(new Color(153, 204, 255));
--- 139,165 ----
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
  	}
  
  	/**
! 	 * This method initializes jPanel_NaviArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_NaviArea() {
  		if (jPanel_NaviArea == null) {
  			CardLayout cardLayout2 = new CardLayout();
  			cardLayout2.setHgap(10);
  			cardLayout2.setVgap(10);
! 			jLabel_MainExpl = new JLabel();
  			jLabel_MainExpl.setText("ユーザ情報を登録します。");
  			jLabel_MainExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
  			jLabel_MainExpl.setName("jLabel1");
! 			jLabel_Title = new JLabel();
  			jLabel_Title.setText("ユーザ情報登録");
  			jLabel_Title.setFont(new Font("Dialog", Font.PLAIN, 18));
  			jLabel_Title.setBackground(new Color(153, 204, 255));
***************
*** 171,179 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_TitleArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_TitleArea() {
  		if (jPanel_TitleArea == null) {
--- 174,182 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_TitleArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_TitleArea() {
  		if (jPanel_TitleArea == null) {
***************
*** 192,205 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea2
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_ExplArea2() {
  		if (jPanel_ExplArea2 == null) {
! 			jLabal_SubExpl = new ExtendedLabel();
! 			jLabal_SubExpl.setText("");
  			jLabal_SubExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
  			GridLayout gridLayout1 = new GridLayout();
  			gridLayout1.setRows(2);
--- 195,208 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea2	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_ExplArea2() {
  		if (jPanel_ExplArea2 == null) {
! 			jLabal_SubExpl = new JLabel();
! 			jLabal_SubExpl.setText("　");
  			jLabal_SubExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
  			GridLayout gridLayout1 = new GridLayout();
  			gridLayout1.setRows(2);
***************
*** 213,221 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea1
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_ExplArea1() {
  		if (jPanel_ExplArea1 == null) {
--- 216,224 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea1	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_ExplArea1() {
  		if (jPanel_ExplArea1 == null) {
***************
*** 229,237 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_MainArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_MainArea() {
  		if (jPanel_MainArea == null) {
--- 232,240 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_MainArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_MainArea() {
  		if (jPanel_MainArea == null) {
***************
*** 245,322 ****
  		return jPanel_MainArea;
  	}
  
- 
  	/**
! 	 * This method initializes jPanel
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_DrawArea() {
  		if (jPanel_DrawArea == null) {
! 
! 			/* フィールド設定 */
! 			GridBagConstraints gridBagConstraints11 = new GridBagConstraints();
! 			gridBagConstraints11.fill = GridBagConstraints.HORIZONTAL;
! 			gridBagConstraints11.gridx = 1;
! 			gridBagConstraints11.gridy = 0;
! 			gridBagConstraints11.weightx = 1.0;
! 
! 			GridBagConstraints gridBagConstraints14 = new GridBagConstraints();
! 			gridBagConstraints14.fill = GridBagConstraints.HORIZONTAL;
! 			gridBagConstraints14.gridx = 1;
! 			gridBagConstraints14.gridy = 1;
! 			gridBagConstraints14.weightx = 1.0;
! 
! 			GridBagConstraints gridBagConstraints15 = new GridBagConstraints();
! 			gridBagConstraints15.fill = GridBagConstraints.BOTH;
! 			gridBagConstraints15.gridx = 1;
! 			gridBagConstraints15.gridy = 2;
! 			gridBagConstraints15.gridwidth = 3;
! 
! 			/* ラベル設定 */
  			GridBagConstraints gridBagConstraints = new GridBagConstraints();
- 			gridBagConstraints.anchor = GridBagConstraints.WEST;
  			gridBagConstraints.gridx = 0;
  			gridBagConstraints.gridy = 0;
! 
! 			GridBagConstraints gridBagConstraints12 = new GridBagConstraints();
! 			gridBagConstraints12.anchor = GridBagConstraints.WEST;
! 			gridBagConstraints12.gridx = 0;
! 			gridBagConstraints12.gridy = 1;
! 
! 			GridBagConstraints gridBagConstraints13 = new GridBagConstraints();
! 			gridBagConstraints13.anchor = GridBagConstraints.WEST;
! 			gridBagConstraints13.gridx = 0;
! 			gridBagConstraints13.gridy = 2;
! 
! 			jLabel = new ExtendedLabel();
! 			jLabel.setText("ユーザ名");
! 			jLabel.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jLabel1 = new ExtendedLabel();
  			jLabel1.setText("パスワード");
  			jLabel1.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jLabel3 = new ExtendedLabel();
! 			jLabel3.setText("権限");
! 			jLabel3.setFont(new Font("Dialog", Font.PLAIN, 12));
! 
  			jPanel_DrawArea = new JPanel();
  			jPanel_DrawArea.setLayout(new GridBagLayout());
  			jPanel_DrawArea.setName("jPanel_DrawArea");
! 			jPanel_DrawArea.add(jLabel, gridBagConstraints);
! 			jPanel_DrawArea.add(jLabel1, gridBagConstraints12);
! 			jPanel_DrawArea.add(jLabel3, gridBagConstraints13);
! 
  			jPanel_DrawArea.add(getJTextField_UserName(), gridBagConstraints11);
! 			jPanel_DrawArea.add(getJPasswordField_Password(), gridBagConstraints14);
! 			jPanel_DrawArea.add(getJComboBox_Grant(),gridBagConstraints15);
  		}
  		return jPanel_DrawArea;
  	}
  
  	/**
! 	 * This method initializes jTextField_UserName
! 	 *
! 	 * @return javax.swing.ExtendedTextField
  	 */
  	private ExtendedTextField getJTextField_UserName() {
  		if (jTextField_UserName == null) {
--- 248,318 ----
  		return jPanel_MainArea;
  	}
  
  	/**
! 	 * This method initializes jPanel_DrawArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_DrawArea() {
  		if (jPanel_DrawArea == null) {
! 			GridBagConstraints gridBagConstraints12 = new GridBagConstraints();
! 			gridBagConstraints12.gridx = 0;
! 			gridBagConstraints12.weighty = 1.0D;
! 			gridBagConstraints12.gridy = 3;
! 			GridBagConstraints gridBagConstraints1 = new GridBagConstraints();
! 			gridBagConstraints1.gridx = 0;
! 			gridBagConstraints1.anchor = GridBagConstraints.WEST;
! 			gridBagConstraints1.gridy = 2;
  			GridBagConstraints gridBagConstraints = new GridBagConstraints();
  			gridBagConstraints.gridx = 0;
+ 			gridBagConstraints.anchor = GridBagConstraints.WEST;
  			gridBagConstraints.gridy = 0;
! 			GridBagConstraints gridBagConstraints4 = new GridBagConstraints();
! 			gridBagConstraints4.gridx = 0;
! 			gridBagConstraints4.anchor = GridBagConstraints.WEST;
! 			gridBagConstraints4.gridy = 1;
! 			jLabel2 = new JLabel();
! 			jLabel2.setText("ユーザ名");
! 			jLabel2.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jLabel1 = new JLabel();
  			jLabel1.setText("パスワード");
  			jLabel1.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jLabel = new JLabel();
! 			jLabel.setText("権限");
! 			jLabel.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			GridBagConstraints gridBagConstraints3 = new GridBagConstraints();
! 			gridBagConstraints3.fill = GridBagConstraints.HORIZONTAL;
! 			gridBagConstraints3.gridx = 1;
! 			gridBagConstraints3.gridy = 2;
! 			gridBagConstraints3.weightx = 1.0;
! 			GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
! 			gridBagConstraints2.fill = GridBagConstraints.HORIZONTAL;
! 			gridBagConstraints2.gridy = 1;
! 			gridBagConstraints2.gridx = 1;
! 			gridBagConstraints2.weightx = 1.0;
! 			GridBagConstraints gridBagConstraints11 = new GridBagConstraints();
! 			gridBagConstraints11.fill = GridBagConstraints.HORIZONTAL;
! 			gridBagConstraints11.gridx = 1;
! 			gridBagConstraints11.gridy = 0;
! 			gridBagConstraints11.weightx = 1.0;
  			jPanel_DrawArea = new JPanel();
  			jPanel_DrawArea.setLayout(new GridBagLayout());
  			jPanel_DrawArea.setName("jPanel_DrawArea");
! 			jPanel_DrawArea.add(jLabel2, gridBagConstraints);
  			jPanel_DrawArea.add(getJTextField_UserName(), gridBagConstraints11);
! 			jPanel_DrawArea.add(jLabel1, gridBagConstraints4);
! 			jPanel_DrawArea.add(getJPasswordField_Password(), gridBagConstraints2);
! 			jPanel_DrawArea.add(jLabel, gridBagConstraints1);
! 			jPanel_DrawArea.add(getJComboBox_Grant(), gridBagConstraints3);
! 			jPanel_DrawArea.add(getJPanel(), gridBagConstraints12);
  		}
  		return jPanel_DrawArea;
  	}
  
  	/**
! 	 * This method initializes jTextField_UserName	
! 	 * 	
! 	 * @return javax.swing.ExtendedTextField	
  	 */
  	private ExtendedTextField getJTextField_UserName() {
  		if (jTextField_UserName == null) {
***************
*** 327,335 ****
  	}
  
  	/**
! 	 * This method initializes jPasswordField_Password
! 	 *
! 	 * @return javax.swing.ExtendedPasswordField
  	 */
  	private ExtendedPasswordField getJPasswordField_Password() {
  		if (jPasswordField_Password == null) {
--- 323,331 ----
  	}
  
  	/**
! 	 * This method initializes jPasswordField_Password	
! 	 * 	
! 	 * @return javax.swing.ExtendedPasswordField	
  	 */
  	private ExtendedPasswordField getJPasswordField_Password() {
  		if (jPasswordField_Password == null) {
***************
*** 340,353 ****
  	}
  
  	/**
! 	 * This method initializes jButton_Register
! 	 *
! 	 * @return javax.swing.ExtendedButton
  	 */
  	private ExtendedButton getJButton_Register() {
  		if (jButton_Register == null) {
  			jButton_Register = new ExtendedButton();
! 			jButton_Register.setText("登録(F12)");
  			jButton_Register.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Register.addActionListener(this);
  		}
--- 336,349 ----
  	}
  
  	/**
! 	 * This method initializes jButton_Register	
! 	 * 	
! 	 * @return javax.swing.ExtendedButton	
  	 */
  	private ExtendedButton getJButton_Register() {
  		if (jButton_Register == null) {
  			jButton_Register = new ExtendedButton();
! 			jButton_Register.setText("登録");
  			jButton_Register.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Register.addActionListener(this);
  		}
***************
*** 355,389 ****
  	}
  
  	/**
! 	 * This method initializes jComboBox_Grant
! 	 *
! 	 * @return javax.swing.ExtendedComboBox
  	 */
  	private ExtendedComboBox getJComboBox_Grant() {
  		if (jComboBox_Grant == null) {
  			jComboBox_Grant = new ExtendedComboBox();
! 			jComboBox_Grant.setPreferredSize(new Dimension(260, 20));
! 			jComboBox_Grant.addActionListener(this);
  		}
  		return jComboBox_Grant;
  	}
  
  	public void actionPerformed( ActionEvent e )
  	{
  	}
! 
  	/*
  	 * FrameSize Control
  	 */
  	public void validate()
  	{
  		Rectangle rect = getBounds();
! 
  		super.validate();
  
  		int width = ViewSettings.getTokuteiLoginFrameWidth();
  		int height = ViewSettings.getTokuteiLoginFrameHeight();
! 
  		if( width > rect.width  ||
  				height > rect.height )
  		{
--- 351,409 ----
  	}
  
  	/**
! 	 * This method initializes jComboBox_Grant	
! 	 * 	
! 	 * @return javax.swing.ExtendedComboBox	
  	 */
  	private ExtendedComboBox getJComboBox_Grant() {
  		if (jComboBox_Grant == null) {
  			jComboBox_Grant = new ExtendedComboBox();
! 			jComboBox_Grant.setPreferredSize(new Dimension(31, 20));
  		}
  		return jComboBox_Grant;
  	}
  
  	public void actionPerformed( ActionEvent e )
  	{
+ 		
  	}
! 	
  	/*
  	 * FrameSize Control
  	 */
  	public void validate()
  	{
  		Rectangle rect = getBounds();
! 		
  		super.validate();
  
+ 		/* Modified 2008/05/06 若月  */
+ 		/* --------------------------------------------------- */
+ //		/* Modified 2008/03/09 若月  */
+ //		/* --------------------------------------------------- */
+ ////		if( ViewSettings.NORMALFRAME_MINSIZE_W > rect.width  ||
+ ////		ViewSettings.NORMALFRAME_MINSIZE_H > rect.height )
+ ////{
+ ////	setBounds( rect.x,
+ ////			   rect.y,
+ ////			   ViewSettings.NORMALFRAME_MINSIZE_W,
+ ////			   ViewSettings.NORMALFRAME_MINSIZE_H );
+ ////}
+ //		/* --------------------------------------------------- */
+ //		if( ViewSettings.getFrameCommonWidth() > rect.width  ||
+ //				ViewSettings.getFrameCommonHeight() > rect.height )
+ //		{
+ //			setBounds( rect.x,
+ //					   rect.y,
+ //					   ViewSettings.getFrameCommonWidth(),
+ //					   ViewSettings.getFrameCommonHeight() );
+ //		}
+ //		/* --------------------------------------------------- */
+ 		
+ 		
  		int width = ViewSettings.getTokuteiLoginFrameWidth();
  		int height = ViewSettings.getTokuteiLoginFrameHeight();
! 		
  		if( width > rect.width  ||
  				height > rect.height )
  		{
***************
*** 392,414 ****
  					   width,
  					   height );
  		}
  	}
  
! 	@Override
! 	public void keyPressed(KeyEvent e) {
! 		// TODO 自動生成されたメソッド・スタブ
! 
! 	}
! 
! 	@Override
! 	public void keyReleased(KeyEvent e) {
! 		// TODO 自動生成されたメソッド・スタブ
! 
! 	}
! 
! 	@Override
! 	public void keyTyped(KeyEvent e) {
! 		// TODO 自動生成されたメソッド・スタブ
! 
  	}
  }
--- 412,432 ----
  					   width,
  					   height );
  		}
+ 		/* --------------------------------------------------- */
+ 		
  	}
  
! 	/**
! 	 * This method initializes jPanel	
! 	 * 	
! 	 * @return javax.swing.JPanel	
! 	 */
! 	private JPanel getJPanel() {
! 		if (jPanel == null) {
! 			jPanel = new JPanel();
! 			jPanel.setLayout(new GridBagLayout());
! 			jPanel.setPreferredSize(new Dimension(10, 10));
! 		}
! 		return jPanel;
  	}
  }
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JRegisterUserFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JRegisterUserFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JRegisterUserFrameCtrl.java	Mon Apr 19 18:52:36 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JRegisterUserFrameCtrl.java	Tue Oct 13 09:53:08 2009
***************
*** 1,6 ****
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
  
- import java.awt.Component;
  import java.awt.Dimension;
  import java.awt.event.*;
  import java.sql.SQLException;
--- 1,5 ----
***************
*** 10,17 ****
  import javax.swing.event.DocumentEvent;
  import javax.swing.event.DocumentListener;
  
- import org.apache.log4j.Logger;
- 
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
  import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
  import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
--- 9,14 ----
***************
*** 24,30 ****
  
  	/* フォーカス移動制御 */
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
- 	private static Logger logger = Logger.getLogger(JRegisterUserFrameCtrl.class);
  
  	/**
  	 * 実行しているフレームのモード １：ユーザの追加 ２：ユーザの変更
--- 21,26 ----
***************
*** 63,80 ****
--- 59,87 ----
  		super();
  		mode = ADD_MODE;
  		init();
+ 
+ 		// 初期選択
+ 		jTextField_UserName.requestFocus();
  	}
  
  	/**
  	 * ユーザ情報変更時のコンストラクタ
  	 */
  	public JRegisterUserFrameCtrl(String userName) {
+ 		super();
+ 
+ //		this.setSize(new Dimension(600, 280));
+ //		this.setMinimumSize(new Dimension(600, 280));
+ //		this.setPreferredSize(new Dimension(600, 280));
+ 
  		mode = CHANGE_MODE;
  		init();
  
  		jTextField_UserName.setText(userName);
  		jTextField_UserName.setEditable(false);
  
+ 		/* Added 2008/05/06 若月  */
+ 		/* --------------------------------------------------- */
  		StringBuffer buffer = new StringBuffer();
  		buffer.append("select * from t_user where user_name = ?");
  		String query = buffer.toString();
***************
*** 91,96 ****
--- 98,104 ----
  
  		if (result != null && ! result.isEmpty()) {
  			Hashtable<String, String> item = result.get(0);
+ //			String dbUserName = item.get("USER_NAME");
  			String dbPassword = item.get("PASS");
  			String dbKengen = item.get("KENGEN");
  
***************
*** 107,123 ****
  			this.jPasswordField_Password.setText(dbPassword);
  			this.jComboBox_Grant.setSelectedItem(kengenItem);
  		}
! 		// add s.inoue 2009/12/07
! 		// focus初期設定
! 		this.addComponentListener(new ComponentAdapter()
! 		{
! 		    public void componentShown(ComponentEvent e)
! 		    {
! 		        // ensure password text field has focus initially
! 		    	jPasswordField_Password.requestFocusInWindow();
! 		    }
! 		});
  
  	}
  
  	/**
--- 115,124 ----
  			this.jPasswordField_Password.setText(dbPassword);
  			this.jComboBox_Grant.setSelectedItem(kengenItem);
  		}
! 		/* --------------------------------------------------- */
  
+ 		// 初期選択
+ 		jPasswordField_Password.requestFocus();
  	}
  
  	/**
***************
*** 130,168 ****
  		jComboBox_Grant.addItem("管理者");
  
  		// ログインボタンの状態を管理
! 		jTextField_UserName.getDocument().addDocumentListener(new LoginButtonStatus());
! 		jPasswordField_Password.getDocument().addDocumentListener(new LoginButtonStatus());
! 		// edit s.inoue 2010/03/24
! 		functionListner();
! 	}
! 
! 	private void functionListner(){
  
  		// focus制御
  		// edit s.inoue 2009/10/07
  		this.focusTraversalPolicy = new JFocusTraversalPolicy();
  		this.setFocusTraversalPolicy(this.focusTraversalPolicy);
- 		// edit s.inoue 2010/03/24
  		if (mode == ADD_MODE) {
- 			this.focusTraversalPolicy.setDefaultComponent(this.jTextField_UserName);
  			this.focusTraversalPolicy.addComponent(this.jTextField_UserName);
! 			this.focusTraversalPolicy.addComponent(this.jPasswordField_Password);
! 		}else if (mode == CHANGE_MODE){
! 			this.focusTraversalPolicy.setDefaultComponent(this.jPasswordField_Password);
! 			this.focusTraversalPolicy.addComponent(this.jPasswordField_Password);
! 		}
! 		// del s.inoue 2010/03/24
! 		// this.focusTraversalPolicy.addComponent(this.jTextField_UserName);
! 		// this.focusTraversalPolicy.addComponent(this.jPasswordField_Password);
  		this.focusTraversalPolicy.addComponent(this.jComboBox_Grant);
  		this.focusTraversalPolicy.addComponent(this.jButton_Register);
  		this.focusTraversalPolicy.addComponent(jButton_End);
- 
- 		// add s.inoue 2009/12/02
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			Component comp = focusTraversalPolicy.getComponent(i);
- 			comp.addKeyListener(this);
- 		}
  	}
  
  	/**
--- 131,152 ----
  		jComboBox_Grant.addItem("管理者");
  
  		// ログインボタンの状態を管理
! 		jTextField_UserName.getDocument().addDocumentListener(
! 				new LoginButtonStatus());
! 		jPasswordField_Password.getDocument().addDocumentListener(
! 				new LoginButtonStatus());
  
  		// focus制御
  		// edit s.inoue 2009/10/07
  		this.focusTraversalPolicy = new JFocusTraversalPolicy();
  		this.setFocusTraversalPolicy(this.focusTraversalPolicy);
  		if (mode == ADD_MODE) {
  			this.focusTraversalPolicy.addComponent(this.jTextField_UserName);
! 		}
! 		this.focusTraversalPolicy.addComponent(this.jPasswordField_Password);
  		this.focusTraversalPolicy.addComponent(this.jComboBox_Grant);
  		this.focusTraversalPolicy.addComponent(this.jButton_Register);
  		this.focusTraversalPolicy.addComponent(jButton_End);
  	}
  
  	/**
***************
*** 254,292 ****
  	public void actionPerformed(ActionEvent e) {
  		Object source = e.getSource();
  		if (source == jButton_End) {
- 			logger.info(jButton_End.getText());
  			pushedEndButton(e);
  		}
  		else if (source == jButton_Register) {
- 			logger.info(jButton_Register.getText());
  			pushedRegisterButton(e);
  		}
  		// エンターキーでの移動
  		else if (source == jTextField_UserName) {
  			jTextField_UserName.transferFocus();
  		}
  		else if (source == jPasswordField_Password) {
  			jPasswordField_Password.transferFocus();
  		}
- // del s.inoue 2009/12/04
- //		else if (source == jComboBox_Grant) {
- //			// 登録ボタンが有効であったら処理を行う
- //			if (jButton_Register.isEnabled()) {
- //				pushedRegisterButton(null);
- //			}
- //		}
- 	}
  
! 	@Override
! 	public void keyPressed(KeyEvent keyEvent) {
! 		switch(keyEvent.getKeyCode()){
! 		case KeyEvent.VK_F1:
! 			logger.info(jButton_End.getText());
! 			pushedEndButton(null);break;
! 		case KeyEvent.VK_F12:
! 			if (jButton_Register.isEnabled()){
! 				logger.info(jButton_Register.getText());
! 				pushedRegisterButton(null);break;
  			}
  		}
  	}
--- 238,263 ----
  	public void actionPerformed(ActionEvent e) {
  		Object source = e.getSource();
  		if (source == jButton_End) {
  			pushedEndButton(e);
  		}
+ 
  		else if (source == jButton_Register) {
  			pushedRegisterButton(e);
  		}
+ 
  		// エンターキーでの移動
  		else if (source == jTextField_UserName) {
  			jTextField_UserName.transferFocus();
  		}
+ 
  		else if (source == jPasswordField_Password) {
  			jPasswordField_Password.transferFocus();
  		}
  
! 		else if (source == jComboBox_Grant) {
! 			// 登録ボタンが有効であったら処理を行う
! 			if (jButton_Register.isEnabled() == true) {
! 				pushedRegisterButton(null);
  			}
  		}
  	}
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JSearchResultListFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JSearchResultListFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JSearchResultListFrame.java	Mon Apr 19 19:21:14 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JSearchResultListFrame.java	Fri Oct  9 10:07:46 2009
***************
*** 13,22 ****
  import java.awt.Rectangle;
  import java.awt.event.ActionListener;
  import java.awt.event.ActionEvent;
- import java.awt.event.ItemEvent;
- import java.awt.event.ItemListener;
  import java.awt.event.KeyEvent;
- import java.awt.event.KeyListener;
  
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedButton;
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedCheckBox;
--- 13,19 ----
***************
*** 30,42 ****
  import javax.swing.BorderFactory;
  import java.awt.Insets;
  
  /**
   * 健診結果表示・自動判定　検索画面
   *
   * Modified 2008/03/19 若月 画面コンポーネント共通化
   */
! // edit h.yoshitama 2009/11/11
! public class JSearchResultListFrame extends JFrame implements ActionListener, ItemListener,KeyListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
--- 27,39 ----
  import javax.swing.BorderFactory;
  import java.awt.Insets;
  
+ 
  /**
   * 健診結果表示・自動判定　検索画面
   *
   * Modified 2008/03/19 若月 画面コンポーネント共通化
   */
! public class JSearchResultListFrame extends JFrame implements ActionListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
***************
*** 62,71 ****
  	protected ExtendedTextField jTextField_KensaEndDate = null;
  	protected ExtendedTextField jTextField_HanteiEndDate = null;
  	protected ExtendedTextField jTextField_TsuuchiEndDate = null;
! 	// edit s.inoue 2010/02/23
! 	// protected ExtendedTextField jTextField_HokensyoNumber = null;
! 	protected ExtendedComboBox jComboBox_HokenjyaNumber = null;
! 
  	protected ExtendedComboBox jComboBox_HanteiResult = null;
  	protected ExtendedButton jButton_Serach = null;
  	protected ExtendedButton jButton_Print = null;
--- 59,65 ----
  	protected ExtendedTextField jTextField_KensaEndDate = null;
  	protected ExtendedTextField jTextField_HanteiEndDate = null;
  	protected ExtendedTextField jTextField_TsuuchiEndDate = null;
! 	protected ExtendedTextField jTextField_HokensyoNumber = null;
  	protected ExtendedComboBox jComboBox_HanteiResult = null;
  	protected ExtendedButton jButton_Serach = null;
  	protected ExtendedButton jButton_Print = null;
***************
*** 92,100 ****
  	protected JPanel jPanel1 = null;
  	protected ExtendedButton jButton_PrintSetsumei = null;
  	protected ExtendedCheckBox jCheckBox_JisiYear = null;
- 	// add h.yoshitama 2009/11/26
-     protected ExtendedButton jButton_AllSelect = null;
-     protected ExtendedLabel jLabel_count = null;
  
  	/**
  	 * This is the default constructor
--- 86,91 ----
***************
*** 120,130 ****
  		/* --------------------------------------------------- */
  		this.setContentPane(getJPanel_Content());
  		this.setTitle(ViewSettings.getTokuteFrameTitleWithKikanInfomation());
- 
  		this.setPreferredSize(ViewSettings.getFrameCommonSize());
- 
- 		// replace s.inoue 2010/02/19
- //		this.setSize(new Dimension(921, 662));
  		this.setSize(ViewSettings.getFrameCommonSize());
  		this.setLocationRelativeTo( null );
  		this.setVisible(true);
--- 111,117 ----
***************
*** 188,206 ****
  		return jPanel_ButtonArea;
  	}
  
- 	// add h.yoshitama 2009/11/26
- 	private ExtendedButton getJButton_AllSelect() {
- 		if (jButton_AllSelect == null) {
- 		    jButton_AllSelect = new ExtendedButton();
- 		    jButton_AllSelect.setText("全て選択(A)");
- 		    jButton_AllSelect.setMinimumSize(new Dimension(82, 20));
- 		    jButton_AllSelect.setFont(new Font("Dialog", Font.PLAIN, 12));
- 		    jButton_AllSelect.addActionListener(this);
- 		    jButton_AllSelect.setMnemonic(KeyEvent.VK_A);
- 		}
- 		return jButton_AllSelect;
- 	    }
- 
  	/**
  	 * This method initializes jButton_End
  	 *
--- 175,180 ----
***************
*** 212,218 ****
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
--- 186,192 ----
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
***************
*** 247,257 ****
  			gridBagConstraints25.fill = GridBagConstraints.BOTH;
  			gridBagConstraints25.anchor = GridBagConstraints.WEST;
  			gridBagConstraints25.gridx = 0;
- 
- 			// edit s.inoue 2010/02/24
  			jLabel_MainExpl = new GuidanceLabel("tokutei.searchresult.frame.guidance.main");
! 			jLabel_MainExpl.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jLabel_MainExpl.setName("jLabel1");
  
  			/* Modified 2008/03/19 若月 UI標準化 */
  			/* --------------------------------------------------- */
--- 221,230 ----
  			gridBagConstraints25.fill = GridBagConstraints.BOTH;
  			gridBagConstraints25.anchor = GridBagConstraints.WEST;
  			gridBagConstraints25.gridx = 0;
  			jLabel_MainExpl = new GuidanceLabel("tokutei.searchresult.frame.guidance.main");
! //			jLabel_MainExpl.setText("検索条件を入力し、検索ボタンを押して受診者を検索します。");
! //			jLabel_MainExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
! //			jLabel_MainExpl.setName("jLabel1");
  
  			/* Modified 2008/03/19 若月 UI標準化 */
  			/* --------------------------------------------------- */
***************
*** 376,382 ****
  	private JPanel getJPanel_MainArea() {
  		if (jPanel_MainArea == null) {
  			GridBagConstraints gridBagConstraints27 = new GridBagConstraints();
! 			gridBagConstraints27.insets = new Insets(5, 10, 0, 10);
  			gridBagConstraints27.gridy = 0;
  			gridBagConstraints27.weightx = 1.0D;
  			gridBagConstraints27.weighty = 1.0D;
--- 349,355 ----
  	private JPanel getJPanel_MainArea() {
  		if (jPanel_MainArea == null) {
  			GridBagConstraints gridBagConstraints27 = new GridBagConstraints();
! 			gridBagConstraints27.insets = new Insets(10, 10, 10, 10);
  			gridBagConstraints27.gridy = 0;
  			gridBagConstraints27.weightx = 1.0D;
  			gridBagConstraints27.weighty = 1.0D;
***************
*** 412,448 ****
  	 */
  	private JPanel getJPanel() {
  		if (jPanel == null) {
- 			// add h.yoshitama 2009/11/26
- 			GridBagConstraints gridBagConstraints13 = new GridBagConstraints();
- 			gridBagConstraints13.anchor = GridBagConstraints.SOUTHEAST;
- 			gridBagConstraints13.gridy = 3;
- 			gridBagConstraints13.gridheight = 2;
- 			gridBagConstraints13.gridx = 7;
- 			gridBagConstraints13.insets = new Insets(0, 0, 0, 0);
- 			GridBagConstraints gridBagConstraints61 = new GridBagConstraints();
- 			gridBagConstraints61.anchor = GridBagConstraints.WEST;
- 			gridBagConstraints61.gridx = 6;
- 			gridBagConstraints61.gridy = 1;
- 			gridBagConstraints61.weightx = 1.0D;
- 			gridBagConstraints61.insets = new Insets(0, 5, 0, 0);
- 			GridBagConstraints gridBagConstraints43 = new GridBagConstraints();
- 			gridBagConstraints43.anchor = GridBagConstraints.WEST;
- 			gridBagConstraints43.gridx = 5;
- 			gridBagConstraints43.gridy = 1;
- 			gridBagConstraints43.insets = new Insets(0, 20, 0, 0);
- 
  			GridBagConstraints gridBagConstraints52 = new GridBagConstraints();
  			gridBagConstraints52.gridy = 1;
  			gridBagConstraints52.gridx = 3;
- 			// edit s.inoue 2010/02/24
- 			gridBagConstraints52.fill = GridBagConstraints.WEST;
- 
  			GridBagConstraints gridBagConstraints42 = new GridBagConstraints();
! 			// edit h.yoshitama 2009/11/26
! 			gridBagConstraints42.fill = GridBagConstraints.WEST;
  			gridBagConstraints42.gridheight = 3;
! 			gridBagConstraints42.gridwidth = 9;
  			gridBagConstraints42.anchor = GridBagConstraints.NORTHWEST;
  			gridBagConstraints42.gridy = 2;
  			jLabel11 = new JLabel();
  			jLabel11.setText("保健指導レベル");
--- 385,400 ----
  	 */
  	private JPanel getJPanel() {
  		if (jPanel == null) {
  			GridBagConstraints gridBagConstraints52 = new GridBagConstraints();
  			gridBagConstraints52.gridy = 1;
  			gridBagConstraints52.gridx = 3;
  			GridBagConstraints gridBagConstraints42 = new GridBagConstraints();
! 			gridBagConstraints42.gridx = 0;
! 			gridBagConstraints42.fill = GridBagConstraints.BOTH;
  			gridBagConstraints42.gridheight = 3;
! 			gridBagConstraints42.gridwidth = 7;
  			gridBagConstraints42.anchor = GridBagConstraints.NORTHWEST;
+ 			gridBagConstraints42.insets = new Insets(10, 0, 0, 0);
  			gridBagConstraints42.gridy = 2;
  			jLabel11 = new JLabel();
  			jLabel11.setText("保健指導レベル");
***************
*** 458,471 ****
  //			jLabel13.setPreferredSize(new Dimension(80, 16));
  //			k.setFont(new Font("Dialog", Font.PLAIN, 12));
  
- 			// edit s.inoue 2010/02/24
- 			GridBagConstraints gridBagConstraints63 = new GridBagConstraints();
- 			gridBagConstraints63.anchor = GridBagConstraints.SOUTHEAST;
- 			gridBagConstraints63.gridy = 3;
- 			gridBagConstraints63.gridheight = 2;
- 			gridBagConstraints63.gridx = 7;
- 			gridBagConstraints63.insets = new Insets(0, 0, 30, 0);
- 
  			jLabel10 = new JLabel();
  			jLabel10.setText("〜");
  			jLabel10.setFont(new Font("Dialog", Font.PLAIN, 12));
--- 410,415 ----
***************
*** 485,503 ****
  			jLabel6.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jLabel5 = new JLabel();
  			jLabel5.setText("健診実施日");
! 			// edit h.yoshitama 2009/11/26
! 			jLabel5.setPreferredSize(new Dimension(68, 16));
  			jLabel5.setFont(new Font("Dialog", Font.PLAIN, 12));
- 
- 			// edit s.inoue 2010/02/24
- 			jLabel_count = new ExtendedLabel();
- 			jLabel_count.setPreferredSize(new Dimension(100, 20));
- 			jLabel_count.setFont(new Font("Dialog", Font.PLAIN, 12));
- 
  			GridBagConstraints gridBagConstraints51 = new GridBagConstraints();
  			gridBagConstraints51.gridx = 2;
  			gridBagConstraints51.anchor = GridBagConstraints.WEST;
! 			gridBagConstraints51.insets = new Insets(0, 25, 0, 0);
  			gridBagConstraints51.gridy = 1;
  			jLabel4 = new JLabel();
  			jLabel4.setText("氏名（カナ）");
--- 429,440 ----
  			jLabel6.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jLabel5 = new JLabel();
  			jLabel5.setText("健診実施日");
! 			jLabel5.setPreferredSize(new Dimension(100, 16));
  			jLabel5.setFont(new Font("Dialog", Font.PLAIN, 12));
  			GridBagConstraints gridBagConstraints51 = new GridBagConstraints();
  			gridBagConstraints51.gridx = 2;
  			gridBagConstraints51.anchor = GridBagConstraints.WEST;
! 			gridBagConstraints51.insets = new Insets(0, 20, 0, 0);
  			gridBagConstraints51.gridy = 1;
  			jLabel4 = new JLabel();
  			jLabel4.setText("氏名（カナ）");
***************
*** 506,514 ****
  			gridBagConstraints41.gridx = 0;
  			gridBagConstraints41.anchor = GridBagConstraints.WEST;
  			gridBagConstraints41.gridy = 1;
- 			// edit s.inoue 2010/02/24
- 			gridBagConstraints41.insets = new Insets(0, 0, 0, 4);
- 
  			jLabel3 = new JLabel();
  			jLabel3.setText("保険者番号");
  			jLabel3.setFont(new Font("Dialog", Font.PLAIN, 12));
--- 443,448 ----
***************
*** 523,529 ****
  			GridBagConstraints gridBagConstraints21 = new GridBagConstraints();
  			gridBagConstraints21.gridx = 2;
  			gridBagConstraints21.anchor = GridBagConstraints.WEST;
! 			gridBagConstraints21.insets = new Insets(0, 25, 0, 0);
  			gridBagConstraints21.gridy = 0;
  			jLabel1 = new JLabel();
  			jLabel1.setText("被保険者証等記号");
--- 457,463 ----
  			GridBagConstraints gridBagConstraints21 = new GridBagConstraints();
  			gridBagConstraints21.gridx = 2;
  			gridBagConstraints21.anchor = GridBagConstraints.WEST;
! 			gridBagConstraints21.insets = new Insets(0, 20, 0, 10);
  			gridBagConstraints21.gridy = 0;
  			jLabel1 = new JLabel();
  			jLabel1.setText("被保険者証等記号");
***************
*** 533,540 ****
  			gridBagConstraints11.weightx = 1.0D;
  			gridBagConstraints11.anchor = GridBagConstraints.WEST;
  			gridBagConstraints11.gridx = 6;
- 			gridBagConstraints11.insets = new Insets(0, 5, 0, 5);
- 
  			GridBagConstraints gridBagConstraints6 = new GridBagConstraints();
  			gridBagConstraints6.gridy = 0;
  			gridBagConstraints6.gridx = 3;
--- 467,472 ----
***************
*** 550,572 ****
  			gridBagConstraints.gridx = 0;
  			gridBagConstraints.anchor = GridBagConstraints.WEST;
  			gridBagConstraints.gridy = 0;
- 			// edit s.inoue 2010/02/24
- 			gridBagConstraints.insets = new Insets(0, 0, 0, 4);
- 
- 			// add s.inoue 2010/03/24
- 			GridBagConstraints gridBagConstraints64 = new GridBagConstraints();
- 			gridBagConstraints64.gridy = 4;
- 			gridBagConstraints64.gridx = 6;
- 			gridBagConstraints64.anchor = GridBagConstraints.WEST;
- 			gridBagConstraints64.insets = new Insets(50, 90, 0, 0);
- 
- 			// add s.inoue 2010/03/24
- 			GridBagConstraints gridBagConstraints65 = new GridBagConstraints();
- 			gridBagConstraints65.gridy = 4;
- 			gridBagConstraints65.gridx = 6;
- 			gridBagConstraints65.anchor = GridBagConstraints.WEST;
- 			gridBagConstraints65.insets = new Insets(50, 0, 0, 0);
- 
  			jLabel = new JLabel();
  			jLabel.setText("受診券整理番号");
  			jLabel.setPreferredSize(new Dimension(100, 16));
--- 482,487 ----
***************
*** 575,610 ****
  			jPanel.setLayout(new GridBagLayout());
  			jPanel.setName("jPanel");
  			jPanel.setBorder(BorderFactory.createCompoundBorder(BorderFactory.createLineBorder(Color.gray, 1), BorderFactory.createEmptyBorder(5, 5, 5, 5)));
! 			// edit s.inoue 2010/02/23
! 			jPanel.add(jLabel, gridBagConstraints21);
! 			jPanel.add(getJTextField_Jyusinken_ID(), gridBagConstraints6);
! 			// edit s.inoue 2010/02/23
! 			jPanel.add(jLabel1, gridBagConstraints51);
! 			jPanel.add(getJTextField_HokensyoCode(), gridBagConstraints52);
! 			// edit s.inoue 2010/02/23
! 			jPanel.add(jLabel2, gridBagConstraints41);
! 			jPanel.add(getJComboBox_HokenjyaNumber(), gridBagConstraints11);
! 			// edit s.inoue 2010/02/23
! 			jPanel.add(jLabel3, gridBagConstraints31);
  			jPanel.add(getJTextField_HokenjyaNumber(), gridBagConstraints2);
! 
! 			// edit s.inoue 2010/02/23
! 			jPanel.add(jLabel4, gridBagConstraints);
! 			jPanel.add(getJTextField_Name(), gridBagConstraints1);
! // del s.inoue 2010/02/24
  			jPanel.add(getJPanel1(), gridBagConstraints42);
! 			// add h.yoshitama 2009/11/26
! 			jPanel.add(jLabel11, gridBagConstraints43);
! 			jPanel.add(getJComboBox_HanteiResult(), gridBagConstraints61);
! 
! 			// edit s.inoue 2010/02/24
! 			jPanel.add(jLabel_count,gridBagConstraints63);
! 
! 			jPanel.add(getJButton_Serach(), gridBagConstraints13);
! 			// add s.inoue 2010/03/24
! 			jPanel.add(getJCheckBox_JisiYear(),gridBagConstraints64);
! 			jPanel.add(getJCheckBox_IsKekkaInput(),gridBagConstraints65);
! 
  		}
  		return jPanel;
  	}
--- 490,506 ----
  			jPanel.setLayout(new GridBagLayout());
  			jPanel.setName("jPanel");
  			jPanel.setBorder(BorderFactory.createCompoundBorder(BorderFactory.createLineBorder(Color.gray, 1), BorderFactory.createEmptyBorder(5, 5, 5, 5)));
! 			jPanel.add(jLabel, gridBagConstraints);
! 			jPanel.add(getJTextField_Jyusinken_ID(), gridBagConstraints1);
! 			jPanel.add(jLabel1, gridBagConstraints21);
! 			jPanel.add(getJTextField_HokensyoCode(), gridBagConstraints6);
! 			jPanel.add(jLabel2, gridBagConstraints31);
! 			jPanel.add(getJTextField_HokensyoNumber(), gridBagConstraints11);
! 			jPanel.add(jLabel3, gridBagConstraints41);
  			jPanel.add(getJTextField_HokenjyaNumber(), gridBagConstraints2);
! 			jPanel.add(jLabel4, gridBagConstraints51);
  			jPanel.add(getJPanel1(), gridBagConstraints42);
! 			jPanel.add(getJTextField_Name(), gridBagConstraints52);
  		}
  		return jPanel;
  	}
***************
*** 739,770 ****
  		return jTextField_TsuuchiEndDate;
  	}
  
! // edit s.inoue 2010/02/23
! //	/**
! //	 * This method initializes jTextField_HokensyoNumber
! //	 *
! //	 * @return javax.swing.ExtendedTextField
! //	 */
! //	private ExtendedTextField getJTextField_HokensyoNumber() {
! //		if (jTextField_HokensyoNumber == null) {
! //			jTextField_HokensyoNumber = new ExtendedTextField(ImeMode.IME_ZENKAKU);
! //			jTextField_HokensyoNumber.setPreferredSize(new Dimension(130, 20));
! //		}
! //		return jTextField_HokensyoNumber;
! //	}
! 	 /**
!      * This method initializes jComboBox_HokenjyaNumber
!      *
!      * @return javax.swing.ExtendedComboBox
!      */
! 	private ExtendedComboBox getJComboBox_HokenjyaNumber() {
! 		if (jComboBox_HokenjyaNumber == null) {
! 			jComboBox_HokenjyaNumber = new ExtendedComboBox();
! 			jComboBox_HokenjyaNumber.setMinimumSize(new Dimension(200, 20));
! 			jComboBox_HokenjyaNumber.setPreferredSize(new Dimension(240, 20));
! 		    jComboBox_HokenjyaNumber.addItemListener(this);
  		}
! 		return jComboBox_HokenjyaNumber;
  	}
  
  	/**
--- 635,651 ----
  		return jTextField_TsuuchiEndDate;
  	}
  
! 	/**
! 	 * This method initializes jTextField_HokensyoNumber
! 	 *
! 	 * @return javax.swing.ExtendedTextField
! 	 */
! 	private ExtendedTextField getJTextField_HokensyoNumber() {
! 		if (jTextField_HokensyoNumber == null) {
! 			jTextField_HokensyoNumber = new ExtendedTextField(ImeMode.IME_ZENKAKU);
! 			jTextField_HokensyoNumber.setPreferredSize(new Dimension(130, 20));
  		}
! 		return jTextField_HokensyoNumber;
  	}
  
  	/**
***************
*** 788,798 ****
  	private ExtendedButton getJButton_Serach() {
  		if (jButton_Serach == null) {
  			jButton_Serach = new ExtendedButton();
! 			jButton_Serach.setText("検索(S)");
  //			jButton_Serach.setPreferredSize(new Dimension(58, 20));
  //			jButton_Serach.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Serach.addActionListener(this);
- 			jButton_Serach.setMnemonic(KeyEvent.VK_S);
  		}
  		return jButton_Serach;
  	}
--- 669,678 ----
  	private ExtendedButton getJButton_Serach() {
  		if (jButton_Serach == null) {
  			jButton_Serach = new ExtendedButton();
! 			jButton_Serach.setText("検索");
  //			jButton_Serach.setPreferredSize(new Dimension(58, 20));
  //			jButton_Serach.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Serach.addActionListener(this);
  		}
  		return jButton_Serach;
  	}
***************
*** 805,811 ****
  	private ExtendedButton getJButton_Print() {
  		if (jButton_Print == null) {
  			jButton_Print = new ExtendedButton();
! 			jButton_Print.setText("通知表印刷(F9)");
  			jButton_Print.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Print.addActionListener(this);
  		}
--- 685,691 ----
  	private ExtendedButton getJButton_Print() {
  		if (jButton_Print == null) {
  			jButton_Print = new ExtendedButton();
! 			jButton_Print.setText("通知表印刷");
  			jButton_Print.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Print.addActionListener(this);
  		}
***************
*** 820,826 ****
  	private ExtendedButton getJButton_OK() {
  		if (jButton_OK == null) {
  			jButton_OK = new ExtendedButton();
! 			jButton_OK.setText("詳細(F12)");
  			jButton_OK.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_OK.addActionListener(this);
  		}
--- 700,707 ----
  	private ExtendedButton getJButton_OK() {
  		if (jButton_OK == null) {
  			jButton_OK = new ExtendedButton();
! 			jButton_OK.setText("決定");
! 			jButton_OK.setText("詳細");
  			jButton_OK.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_OK.addActionListener(this);
  		}
***************
*** 835,841 ****
  	private ExtendedButton getJButton_Metabo() {
  		if (jButton_Metabo == null) {
  			jButton_Metabo = new ExtendedButton();
! 			jButton_Metabo.setText("メタボリックシンドローム判定・階層化(F7)");
  //			jButton_Metabo.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Metabo.setPreferredSize(new Dimension(250, 25));
  			jButton_Metabo.addActionListener(this);
--- 716,722 ----
  	private ExtendedButton getJButton_Metabo() {
  		if (jButton_Metabo == null) {
  			jButton_Metabo = new ExtendedButton();
! 			jButton_Metabo.setText("メタボリックシンドローム判定・階層化");
  //			jButton_Metabo.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Metabo.setPreferredSize(new Dimension(250, 25));
  			jButton_Metabo.addActionListener(this);
***************
*** 887,893 ****
  		if (jPanel_Table == null) {
  			jPanel_Table = new JPanel();
  			jPanel_Table.setLayout(new BorderLayout());
! 			jPanel_Table.setBorder(BorderFactory.createEmptyBorder(5, 0, 0, 0));
  		}
  		return jPanel_Table;
  	}
--- 768,774 ----
  		if (jPanel_Table == null) {
  			jPanel_Table = new JPanel();
  			jPanel_Table.setLayout(new BorderLayout());
! 			jPanel_Table.setBorder(BorderFactory.createEmptyBorder(10, 0, 0, 0));
  		}
  		return jPanel_Table;
  	}
***************
*** 902,909 ****
  			jCheckBox_IsKekkaInput = new ExtendedCheckBox();
  			jCheckBox_IsKekkaInput.setText("結果入力済");
  			jCheckBox_IsKekkaInput.setPreferredSize(new Dimension(90, 20));
- 		    // add h.yoshitama 2009/11/11
- 		    jCheckBox_IsKekkaInput.addItemListener(this);
  		}
  		return jCheckBox_IsKekkaInput;
  	}
--- 783,788 ----
***************
*** 915,945 ****
  	 */
  	private JPanel getJPanel1() {
  		if (jPanel1 == null) {
! 			// del h.yoshitama 2009/11/26
! //			GridBagConstraints gridBagConstraints13 = new GridBagConstraints();
! //			gridBagConstraints13.anchor = GridBagConstraints.SOUTHEAST;
! //			gridBagConstraints13.gridy = 2;
! //			gridBagConstraints13.gridheight = 2;
! //			gridBagConstraints13.gridx = 9;
! //			gridBagConstraints13.insets = new Insets(0, 0, 0, 0);
! 			// del h.yoshitama 2009/11/26
! //			GridBagConstraints gridBagConstraints12 = new GridBagConstraints();
! //			gridBagConstraints12.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints12.gridy = 1;
! //			gridBagConstraints12.insets = new Insets(0, 20, 0, 0);
! //			gridBagConstraints12.weightx = 1.0D;
! //			gridBagConstraints12.gridx = 5;
! //			GridBagConstraints gridBagConstraints15 = new GridBagConstraints();
! //			gridBagConstraints15.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints15.gridx = 4;
! //			gridBagConstraints15.gridy = 1;
! //			gridBagConstraints15.insets = new Insets(0, 20, 0, 0);
! 			// edit h.yoshitama 2009/11/26
  			GridBagConstraints gridBagConstraints22 = new GridBagConstraints();
  			gridBagConstraints22.anchor = GridBagConstraints.WEST;
  			gridBagConstraints22.gridy = 3;
  			gridBagConstraints22.gridx = 0;
- 			// edit h.yoshitama 2009/11/26
  			GridBagConstraints gridBagConstraints20 = new GridBagConstraints();
  			gridBagConstraints20.anchor = GridBagConstraints.WEST;
  			gridBagConstraints20.gridy = 2;
--- 794,820 ----
  	 */
  	private JPanel getJPanel1() {
  		if (jPanel1 == null) {
! 			GridBagConstraints gridBagConstraints13 = new GridBagConstraints();
! 			gridBagConstraints13.anchor = GridBagConstraints.SOUTHEAST;
! 			gridBagConstraints13.gridy = 2;
! 			gridBagConstraints13.gridheight = 2;
! 			gridBagConstraints13.gridx = 6;
! 			GridBagConstraints gridBagConstraints12 = new GridBagConstraints();
! 			gridBagConstraints12.anchor = GridBagConstraints.WEST;
! 			gridBagConstraints12.gridy = 1;
! 			gridBagConstraints12.insets = new Insets(0, 20, 0, 0);
! 			gridBagConstraints12.weightx = 1.0D;
! 			gridBagConstraints12.gridx = 5;
! 
! 			GridBagConstraints gridBagConstraints15 = new GridBagConstraints();
! 			gridBagConstraints15.anchor = GridBagConstraints.WEST;
! 			gridBagConstraints15.gridx = 4;
! 			gridBagConstraints15.gridy = 1;
! 			gridBagConstraints15.insets = new Insets(0, 20, 0, 0);
  			GridBagConstraints gridBagConstraints22 = new GridBagConstraints();
  			gridBagConstraints22.anchor = GridBagConstraints.WEST;
  			gridBagConstraints22.gridy = 3;
  			gridBagConstraints22.gridx = 0;
  			GridBagConstraints gridBagConstraints20 = new GridBagConstraints();
  			gridBagConstraints20.anchor = GridBagConstraints.WEST;
  			gridBagConstraints20.gridy = 2;
***************
*** 949,976 ****
  			gridBagConstraints19.gridy = 1;
  			gridBagConstraints19.gridx = 0;
  			GridBagConstraints gridBagConstraints3 = new GridBagConstraints();
! 			// edit s.inoue 2010/02/24
! 			gridBagConstraints3.fill = GridBagConstraints.WEST;
  			gridBagConstraints3.gridy = 1;
  			gridBagConstraints3.gridx = 1;
- 			// edit h.yoshitama 2009/11/26
  			GridBagConstraints gridBagConstraints18 = new GridBagConstraints();
  			gridBagConstraints18.gridx = 2;
  			gridBagConstraints18.gridy = 3;
- 			// edit h.yoshitama 2009/11/26
  			GridBagConstraints gridBagConstraints17 = new GridBagConstraints();
  			gridBagConstraints17.gridx = 2;
  			gridBagConstraints17.gridy = 2;
- 			gridBagConstraints17.insets = new Insets(0, 9, 0, 9);
  			GridBagConstraints gridBagConstraints16 = new GridBagConstraints();
  			gridBagConstraints16.gridx = 2;
  			gridBagConstraints16.gridy = 1;
- 			// edit h.yoshitama 2009/11/26
  			GridBagConstraints gridBagConstraints10 = new GridBagConstraints();
  			gridBagConstraints10.gridx = 3;
  			gridBagConstraints10.anchor = GridBagConstraints.WEST;
  			gridBagConstraints10.gridy = 3;
- 			// edit h.yoshitama 2009/11/26
  			GridBagConstraints gridBagConstraints9 = new GridBagConstraints();
  			gridBagConstraints9.gridy = 2;
  			gridBagConstraints9.anchor = GridBagConstraints.WEST;
--- 824,845 ----
  			gridBagConstraints19.gridy = 1;
  			gridBagConstraints19.gridx = 0;
  			GridBagConstraints gridBagConstraints3 = new GridBagConstraints();
! 			gridBagConstraints3.fill = GridBagConstraints.HORIZONTAL;
  			gridBagConstraints3.gridy = 1;
  			gridBagConstraints3.gridx = 1;
  			GridBagConstraints gridBagConstraints18 = new GridBagConstraints();
  			gridBagConstraints18.gridx = 2;
  			gridBagConstraints18.gridy = 3;
  			GridBagConstraints gridBagConstraints17 = new GridBagConstraints();
  			gridBagConstraints17.gridx = 2;
  			gridBagConstraints17.gridy = 2;
  			GridBagConstraints gridBagConstraints16 = new GridBagConstraints();
  			gridBagConstraints16.gridx = 2;
  			gridBagConstraints16.gridy = 1;
  			GridBagConstraints gridBagConstraints10 = new GridBagConstraints();
  			gridBagConstraints10.gridx = 3;
  			gridBagConstraints10.anchor = GridBagConstraints.WEST;
  			gridBagConstraints10.gridy = 3;
  			GridBagConstraints gridBagConstraints9 = new GridBagConstraints();
  			gridBagConstraints9.gridy = 2;
  			gridBagConstraints9.anchor = GridBagConstraints.WEST;
***************
*** 985,1022 ****
  			gridBagConstraints7.gridy = 1;
  			gridBagConstraints7.gridx = 3;
  
- 			// edit h.yoshitama 2009/11/26
  			GridBagConstraints gridBagConstraints5 = new GridBagConstraints();
  			gridBagConstraints5.gridy = 3;
  			gridBagConstraints5.gridx = 1;
- 
- 			// edit h.yoshitama 2009/11/26
  			GridBagConstraints gridBagConstraints4 = new GridBagConstraints();
  			gridBagConstraints4.fill = GridBagConstraints.HORIZONTAL;
  			gridBagConstraints4.gridy = 2;
  			gridBagConstraints4.gridx = 1;
! // del s.inoue 2010/03/24
! //			// edit h.yoshitama 2009/11/26
! //			GridBagConstraints gridBagConstraints36 = new GridBagConstraints();
! //			gridBagConstraints36.gridx = 6;
! //			gridBagConstraints36.gridy = 4;
! //			gridBagConstraints36.insets = new Insets(0, 265, 0, 0);
! //			gridBagConstraints36.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints36.gridwidth = 1;
! //
! //			// edit h.yoshitama 2009/11/26
! //			GridBagConstraints gridBagConstraints39 = new GridBagConstraints();
! //			gridBagConstraints39.gridx = 6;
! //			gridBagConstraints39.gridy = 4;
! //			gridBagConstraints39.insets = new Insets(0, 175, 0, 0);
! //			gridBagConstraints39.anchor = GridBagConstraints.WEST;
! //			gridBagConstraints39.gridwidth = 1;
! 
! 		    GridBagConstraints gridBagConstraints40 = new GridBagConstraints();
! 		    gridBagConstraints40.gridx = 0;
! 		    gridBagConstraints40.anchor = GridBagConstraints.WEST;
! 		    gridBagConstraints40.insets = new Insets(0, 0, 0, 0);
! 		    gridBagConstraints40.gridy = 4;
  
  			jPanel1 = new JPanel();
  			jPanel1.setLayout(new GridBagLayout());
--- 854,886 ----
  			gridBagConstraints7.gridy = 1;
  			gridBagConstraints7.gridx = 3;
  
  			GridBagConstraints gridBagConstraints5 = new GridBagConstraints();
  			gridBagConstraints5.gridy = 3;
  			gridBagConstraints5.gridx = 1;
  			GridBagConstraints gridBagConstraints4 = new GridBagConstraints();
  			gridBagConstraints4.fill = GridBagConstraints.HORIZONTAL;
  			gridBagConstraints4.gridy = 2;
  			gridBagConstraints4.gridx = 1;
! 
! 			GridBagConstraints gridBagConstraints36 = new GridBagConstraints();
! 			gridBagConstraints36.gridx = 5;
! 			gridBagConstraints36.gridy = 3;
! 			gridBagConstraints36.insets = new Insets(0, 175, 0, 0);
! 			gridBagConstraints36.anchor = GridBagConstraints.WEST;
! 			gridBagConstraints36.gridwidth = 1;
! 
! 			GridBagConstraints gridBagConstraints39 = new GridBagConstraints();
! 			gridBagConstraints39.gridx = 5;
! 			gridBagConstraints39.gridy = 2;
! 			gridBagConstraints39.insets = new Insets(0, 175, 0, 0);
! 			gridBagConstraints39.anchor = GridBagConstraints.WEST;
! 			gridBagConstraints39.gridwidth = 1;
! 
! 			GridBagConstraints gridBagConstraints40 = new GridBagConstraints();
! 			gridBagConstraints40.gridx = 4;
! 			gridBagConstraints40.gridy = 3;
! 			gridBagConstraints40.anchor = GridBagConstraints.WEST;
! 			gridBagConstraints40.insets = new Insets(0, 20, 0, 0);
  
  			jPanel1 = new JPanel();
  			jPanel1.setLayout(new GridBagLayout());
***************
*** 1032,1051 ****
  			jPanel1.add(jLabel5, gridBagConstraints19);
  			jPanel1.add(jLabel7, gridBagConstraints20);
  			jPanel1.add(jLabel9, gridBagConstraints22);
! 
! 			// del h.yoshitama 2009/11/26
! //			jPanel1.add(jLabel11, gridBagConstraints15);
  
  			//jPanel1.add(getJCheckBox_IsKekkaInput(), gridBagConstraints14);
! 			// del h.yoshitama 2009/11/26
! //			jPanel1.add(getJComboBox_HanteiResult(), gridBagConstraints12);
! 			// del h.yoshitama 2009/11/26
! //			jPanel1.add(getJButton_Serach(), gridBagConstraints13);
! 			// del s.inoue 2010/03/24
! //			jPanel1.add(getJCheckBox_JisiYear(), gridBagConstraints36);
! //			jPanel1.add(getJCheckBox_IsKekkaInput(), gridBagConstraints39);
! 			// add h.yoshitama 2009/11/26
! 		    jPanel1.add(getJButton_AllSelect(), gridBagConstraints40);
  		}
  		return jPanel1;
  	}
--- 896,908 ----
  			jPanel1.add(jLabel5, gridBagConstraints19);
  			jPanel1.add(jLabel7, gridBagConstraints20);
  			jPanel1.add(jLabel9, gridBagConstraints22);
! 			jPanel1.add(jLabel11, gridBagConstraints15);
  
  			//jPanel1.add(getJCheckBox_IsKekkaInput(), gridBagConstraints14);
! 			jPanel1.add(getJComboBox_HanteiResult(), gridBagConstraints12);
! 			jPanel1.add(getJButton_Serach(), gridBagConstraints13);
! 			jPanel1.add(getJCheckBox_JisiYear(), gridBagConstraints36);
! 			jPanel1.add(getJCheckBox_IsKekkaInput(), gridBagConstraints39);
  		}
  		return jPanel1;
  	}
***************
*** 1059,1069 ****
  	public void keyTyped(KeyEvent e) {
  	}
  
- 	// add h.yoshitama 2009/11/11
- 	public void itemStateChanged(ItemEvent arg0) {
- 
- 	}
- 
  	/**
  	 * This method initializes jButton_PrintSetsumei
  	 *
--- 916,921 ----
***************
*** 1072,1082 ****
  	private ExtendedButton getJButton_PrintSetsumei() {
  		if (jButton_PrintSetsumei == null) {
  			jButton_PrintSetsumei = new ExtendedButton();
! //			jButton_PrintSetsumei.setFont(new Font("Dialog", Font.PLAIN, 12));
! //			jButton_PrintSetsumei.setPreferredSize(new Dimension(100, 25));
! 			jButton_PrintSetsumei.setText("説明用印刷(F11)");
  			jButton_PrintSetsumei.addActionListener(this);
  		}
  		return jButton_PrintSetsumei;
  	}
! }  //  @jve:decl-index=0:visual-constraint="10,10"
--- 924,934 ----
  	private ExtendedButton getJButton_PrintSetsumei() {
  		if (jButton_PrintSetsumei == null) {
  			jButton_PrintSetsumei = new ExtendedButton();
! 			jButton_PrintSetsumei.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_PrintSetsumei.setPreferredSize(new Dimension(100, 25));
! 			jButton_PrintSetsumei.setText("説明用帳票印刷");
  			jButton_PrintSetsumei.addActionListener(this);
  		}
  		return jButton_PrintSetsumei;
  	}
! }
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JSearchResultListFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JSearchResultListFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JSearchResultListFrameCtrl.java	Tue Apr 27 17:44:50 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JSearchResultListFrameCtrl.java	Mon Apr 26 11:18:16 2010
***************
*** 1,11 ****
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
  
- import java.awt.Color;
- import java.awt.Component;
  import java.awt.event.ActionEvent;
- import java.awt.event.InputEvent;
- import java.awt.event.ItemEvent;
- import java.awt.event.KeyEvent;
  import java.awt.event.WindowAdapter;
  import java.awt.event.WindowEvent;
  import java.io.BufferedReader;
--- 1,6 ----
***************
*** 14,62 ****
  import java.io.InputStream;
  import java.io.InputStreamReader;
  import java.sql.SQLException;
- import java.text.DateFormat;
- import java.text.SimpleDateFormat;
  import java.util.ArrayList;
- import java.util.Arrays;
  import java.util.Calendar;
- import java.util.Date;
- import java.util.HashMap;
  import java.util.Hashtable;
  import java.util.List;
- import java.util.Map;
- import java.util.SortedMap;
  import java.util.TreeMap;
  import java.util.Vector;
- import java.awt.event.MouseEvent;
  
- import javax.swing.DefaultListSelectionModel;
- import javax.swing.JCheckBox;
  import javax.swing.JFrame;
  import javax.swing.JScrollPane;
  import javax.swing.JTable;
  import javax.swing.JViewport;
  import javax.swing.ListSelectionModel;
  
- import org.apache.log4j.helpers.DateTimeDateFormat;
  import jp.or.med.orca.jma_tokutei.common.app.JApplication;
- import jp.or.med.orca.jma_tokutei.common.component.DialogFactory;
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedCheckBox;
- import jp.or.med.orca.jma_tokutei.common.component.IDialog;
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
  import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
- import jp.or.med.orca.jma_tokutei.common.errormessage.RETURN_VALUE;
- import jp.or.med.orca.jma_tokutei.common.event.JSingleDoubleClickEvent;
  import jp.or.med.orca.jma_tokutei.common.event.JEnterEvent;
! import jp.or.med.orca.jma_tokutei.common.hl7.common.Utility;
  import jp.or.med.orca.jma_tokutei.common.scene.JScene;
  import jp.or.med.orca.jma_tokutei.common.sql.dao.DaoFactory;
  import jp.or.med.orca.jma_tokutei.common.sql.dao.TKensakekaSonotaDao;
  import jp.or.med.orca.jma_tokutei.common.sql.model.TKensakekaSonota;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTable;
- import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellPosition;
- import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableScrollPanel;
  import jp.or.med.orca.jma_tokutei.common.validate.JValidate;
- import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame.JKekkaListFrameCtrl.WindowRefreshEvent;
  import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.ippanhantei.JIppanHantei;
  import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.ippanhantei.JIppanHanteiStartData;
  import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.kekkahantei.JKaisoukaHantei;
--- 9,39 ----
  import java.io.InputStream;
  import java.io.InputStreamReader;
  import java.sql.SQLException;
  import java.util.ArrayList;
  import java.util.Calendar;
  import java.util.Hashtable;
  import java.util.List;
  import java.util.TreeMap;
  import java.util.Vector;
  
  import javax.swing.JFrame;
  import javax.swing.JScrollPane;
  import javax.swing.JTable;
  import javax.swing.JViewport;
  import javax.swing.ListSelectionModel;
  
  import jp.or.med.orca.jma_tokutei.common.app.JApplication;
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedCheckBox;
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
  import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
  import jp.or.med.orca.jma_tokutei.common.event.JEnterEvent;
! import jp.or.med.orca.jma_tokutei.common.event.JSingleDoubleClickEvent;
  import jp.or.med.orca.jma_tokutei.common.scene.JScene;
  import jp.or.med.orca.jma_tokutei.common.sql.dao.DaoFactory;
  import jp.or.med.orca.jma_tokutei.common.sql.dao.TKensakekaSonotaDao;
  import jp.or.med.orca.jma_tokutei.common.sql.model.TKensakekaSonota;
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTable;
  import jp.or.med.orca.jma_tokutei.common.validate.JValidate;
  import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.ippanhantei.JIppanHantei;
  import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.ippanhantei.JIppanHanteiStartData;
  import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.kekkahantei.JKaisoukaHantei;
***************
*** 67,73 ****
  import jp.or.med.orca.jma_tokutei.common.util.FiscalYearUtil;
  
  import com.lowagie.tools.Executable;
- import com.sun.corba.se.spi.orbutil.fsm.Guard.Result;
  
  import javax.swing.table.DefaultTableColumnModel;
  import javax.swing.table.DefaultTableCellRenderer;
--- 44,49 ----
***************
*** 77,84 ****
  import javax.swing.table.TableRowSorter;
  import javax.swing.event.ChangeEvent;
  import javax.swing.event.ChangeListener;
- import javax.swing.event.ListSelectionEvent;
- import javax.swing.event.ListSelectionListener;
  
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellRowRenderer;
  import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
--- 53,58 ----
***************
*** 102,107 ****
--- 76,91 ----
  	private static final int COLUMN_INDEX_NAME = 4;
  	private static final int COLUMN_INDEX_BIRTHDAY = 5;
  	private static final int COLUMN_INDEX_SEX = 6;
+ 	// edit s.inoue 2009/10/31
+ //	private static final int COLUMN_INDEX_KENSA_NENGAPI = 7;
+ //	private static final int COLUMN_INDEX_INPUT_FLAG = 8;
+ //	private static final int COLUMN_INDEX_HANTEI_NENGAPI = 9;
+ //	private static final int COLUMN_INDEX_METBO_HANTEI = 10;
+ //	private static final int COLUMN_INDEX_HOKENSHIDOU_LEVEL = 11;
+ //	private static final int COLUMN_INDEX_TUTI_NENGAPI = 12;
+ //	private static final int COLUMN_INDEX_KOMENTO = 13;
+ //	private static final int COLUMN_INDEX_HOME_ADRS = 14;
+ //	private static final int COLUMN_INDEX_UKETUKE_ID = 15;
  	private static final int COLUMN_INDEX_INPUT_FLAG = 7;
  	private static final int COLUMN_INDEX_METBO_HANTEI = 8;
  	private static final int COLUMN_INDEX_HOKENSHIDOU_LEVEL = 9;
***************
*** 153,176 ****
  
  	private ArrayList<Hashtable<String,String>> searchResult = new ArrayList<Hashtable<String,String>>();
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
- 	// add s.inoue 2010/02/23
- 	/** 保険者番号、支払代行機関選択欄の、番号と名称の区切り文字列 */
- 	private static final String COMBOBOX_NUMBER_NAME_SEPARATOR = " ";
  
  	private static final String[] header = {"","年度","受診券整理番号","氏名（カナ）","氏名（漢字）","生年月日","性別","入力","判定結果","保健指導レベル","健診実施日","判定日","結果通知日","被保険者証等記号","被保険者証等番号","保険者番号","代行機関番号","総合コメント",""};
  	private DefaultTableModel dmodel = null;
  	private TableRowSorter<TableModel> sorter =null;
  	private JSimpleTable table=null;
  	private JSimpleTable modelfixed= null;
- 	// add s.inoue 2009/12/24
- 	private IDialog pageSelectDialog;
- 
- 	// edit s.inoue 2010/04/27
- 	private ArrayList<Integer> selectedRows = null;
  
! 	// add h.yoshitama 2009/11/26
! 	// 全選択ボタンの状態
! 	boolean isAllSelect = true;
  
  	/*
  	 * コンストラクタ
--- 137,157 ----
  
  	private ArrayList<Hashtable<String,String>> searchResult = new ArrayList<Hashtable<String,String>>();
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
  
+ 	// edit s.inoue 2009/10/31
+ 	// private static final String[] header = {"","年度","受診券整理番号","氏名（カナ）","氏名（漢字）","生年月日","性別","健診実施日","入力","判定日","判定結果","保健指導レベル","結果通知日","総合コメント",	"住所","",};
  	private static final String[] header = {"","年度","受診券整理番号","氏名（カナ）","氏名（漢字）","生年月日","性別","入力","判定結果","保健指導レベル","健診実施日","判定日","結果通知日","被保険者証等記号","被保険者証等番号","保険者番号","代行機関番号","総合コメント",""};
+ 
+ 	// add s.inoue 2009/10/26
  	private DefaultTableModel dmodel = null;
+     // add s.inoue 2009/10/26
  	private TableRowSorter<TableModel> sorter =null;
+ 	// add s.inoue 2009/10/26
  	private JSimpleTable table=null;
  	private JSimpleTable modelfixed= null;
  
! 	// private JSimpleTable model = new JSimpleTable();
! 	// private JSimpleTable modelfixed = new JSimpleTable();
  
  	/*
  	 * コンストラクタ
***************
*** 182,187 ****
--- 163,169 ----
  
  	// edit s.inoue 2009/10/26
  	private void initializeSetting(){
+ 		// edit s.inoue 2009/10/27
  		dmodel = new DefaultTableModel(resultRefresh(),header){
  	      public boolean isCellEditable(int row, int column) {
  	    	boolean retflg = false;
***************
*** 206,215 ****
--- 188,203 ----
  		jComboBox_HanteiResult.addItem("なし（情報提供）");
  		jComboBox_HanteiResult.addItem("判定不能");
  
+ 		// edit s.inoue 2009/10/26
+ //		modelfixed.setPreferedColumnWidths(new int[] {50, 50, 100, 175});
+ //		table.setPreferedColumnWidths(new int[] {120, 80, 30, 80, 30, 80, 100, 100, 100, 100, 200, 0});
  		modelfixed.setPreferedColumnWidths(new int[] {50, 50, 100, 175});
  		table.setPreferedColumnWidths(new int[] {120, 80, 40, 40, 100, 100, 80, 80, 80, 100, 100,80,80, 200, 0});
+ 
+ 		// add s.inoue 2009/10/23
  	    modelfixed.setSelectionModel(table.getSelectionModel());
  
+ 	    // add s.inoue 2009/10/26
  	    for(int i=dmodel.getColumnCount()-1;i>=0;i--) {
              if(i<5) {
                  table.removeColumn(table.getColumnModel().getColumn(i));
***************
*** 219,237 ****
              }
          }
  
  	    table.setRowSorter(sorter);
  	    table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
  	    table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
  	    modelfixed.setRowSorter(sorter);
  	    modelfixed.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
  	    modelfixed.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
  
  	    initilizeFocus();
- 	    // add s.inoue 2009/12/01
- 	    functionListner();
- 	   	// add s.inoue 2010/02/23
- 		initializeHokenjaNumComboBox();
  
          final JScrollPane scroll = new JScrollPane(table);
          JViewport viewport = new JViewport();
          viewport.setView(modelfixed);
--- 207,228 ----
              }
          }
  
+ 	    // add s.inoue 2009/10/23
  	    table.setRowSorter(sorter);
  	    table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
  	    table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
+ 	    // add s.inoue 2009/10/23
  	    modelfixed.setRowSorter(sorter);
  	    modelfixed.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
  	    modelfixed.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
  
+ 	    // edit s.inoue 2009/10/26
+ 		// String[] solidheader = {"","年度","受診券整理番号","氏名（カナ）",};
+ 		// String[] header = {"氏名（漢字）","生年月日","性別","健診実施日","入力","判定日","判定結果","保健指導レベル","結果通知日","総合コメント",	"住所","",};
+ 
  	    initilizeFocus();
  
+ 		// add s.inoue 2009/10/26
          final JScrollPane scroll = new JScrollPane(table);
          JViewport viewport = new JViewport();
          viewport.setView(modelfixed);
***************
*** 258,273 ****
  		table.addKeyListener(new JEnterEvent(this,jButton_OK));
  
  		/* ダブルクリックの処理 */
  		table.addMouseListener(new JSingleDoubleClickEvent(this,jButton_OK,modelfixed));
  		modelfixed.addMouseListener(new JSingleDoubleClickEvent(this, jButton_OK,modelfixed));
  
  		dmodel.setDataVector(resultRefresh(),header);
  
- 		// edit s.inoue 2010/02/16
- 	    if (resultRefresh().length == 0){
- 	    	JErrorMessage.show("M4955", this);
- 	    }
- 
  		// add s.inoue 2009/10/26
  		// 4列以下は固定、以降は変動
  		for(int i=dmodel.getColumnCount()-1;i>=0;i--) {
--- 249,262 ----
  		table.addKeyListener(new JEnterEvent(this,jButton_OK));
  
  		/* ダブルクリックの処理 */
+ 		// edit s.inoue 2010/04/26
+ 		// table.addMouseListener(new JDoubleClickEvent(this,jButton_OK));
+ 		// modelfixed.addMouseListener(new JDoubleClickEvent(this, jButton_OK));
  		table.addMouseListener(new JSingleDoubleClickEvent(this,jButton_OK,modelfixed));
  		modelfixed.addMouseListener(new JSingleDoubleClickEvent(this, jButton_OK,modelfixed));
  
  		dmodel.setDataVector(resultRefresh(),header);
  
  		// add s.inoue 2009/10/26
  		// 4列以下は固定、以降は変動
  		for(int i=dmodel.getColumnCount()-1;i>=0;i--) {
***************
*** 294,383 ****
  	   			(DefaultTableCellRenderer)table.getDefaultRenderer(table.getColumnClass(i))));
  	   }
  
! 	   this.initializeColumnWidth();
  
! 		modelfixed.setSelectionModel(table.getSelectionModel());
! 		modelfixed.getColumnModel().getColumn(0).setResizable(false);
! 		modelfixed.getColumnModel().getColumn(1).setResizable(false);
! 		modelfixed.getColumnModel().getColumn(2).setResizable(false);
! 		modelfixed.getColumnModel().getColumn(3).setResizable(false);
  
  		hanteiSetting();
  		// 固定,変動リフレッシュ
! 	    // edit s.inoue 2009/12/07
! 		modelfixed.setCellCheckBoxEditor(new ExtendedCheckBox(), 0);
  	    table.refreshTable();
- 
- 	     // edit s.inoue 2010/02/24
- 	     int count = 0;
- 	     // 初期選択
- 		 if (table.getRowCount() > 0) {
- 			 table.setRowSelectionInterval(0, 0);
- 			 count = table.getRowCount();
- 		 } else {
- 			 jTextField_Jyusinken_ID.requestFocus();
- 		 }
- 		 jLabel_count.setText(count + "件");
- 
- 	   // add s.inoue 2009/12/12
- 	   table.getSelectionModel().addListSelectionListener(new ListSelectionListener() {
- 		   public void valueChanged(ListSelectionEvent e) {
- 		     if(e.getValueIsAdjusting()) return;
- 
- 		     int i = table.getSelectedRow();
- 		     if (i <= 0) return;
- 
- 		     if(modelfixed.getValueAt(i, 0) == null){
- 		    	 modelfixed.setValueAt(Boolean.TRUE, i, 0);return;
- 		     }
- 		     // selectedrowの初期化(simpletableとの連携)
- 		     if (modelfixed.getValueAt(i, 0).equals(Boolean.TRUE)){
- 		    	 modelfixed.setValueAt(Boolean.TRUE, i, 0);
- 		     }else{
- 		    	 modelfixed.setValueAt(Boolean.FALSE, i, 0);
- 		     }
- 		   }
- 		 });
- 
- 	   modelfixed.getSelectionModel().addListSelectionListener(new ListSelectionListener() {
- 		   public void valueChanged(ListSelectionEvent e) {
- 		     if(e.getValueIsAdjusting()) return;
- 
- 		     int i = table.getSelectedRow();
- 		     if (i <= 0) return;
- 
- 		     if(modelfixed.getValueAt(i, 0) == null){
- 		    	 modelfixed.setValueAt(Boolean.FALSE, i, 0);
- 		     }else if (modelfixed.getValueAt(i, 0).equals(Boolean.TRUE)){
- 		    	 modelfixed.setValueAt(Boolean.TRUE, i, 0);
- 		     }else{
- 		    	 modelfixed.setValueAt(Boolean.FALSE, i, 0);
- 		     }
- 		   }
- 		 });
- 
  	}
  
  	/* focus初期化 */
  	private void initilizeFocus(){
  		this.focusTraversalPolicy = new JFocusTraversalPolicy();
  		this.setFocusTraversalPolicy(this.focusTraversalPolicy);
! 		this.focusTraversalPolicy.setDefaultComponent(jTextField_Name);
! 		this.focusTraversalPolicy.addComponent(jTextField_Name);
  		this.focusTraversalPolicy.addComponent(jTextField_Jyusinken_ID);
- 		this.focusTraversalPolicy.addComponent(jComboBox_HokenjyaNumber);
- 		this.focusTraversalPolicy.addComponent(jTextField_HokenjyaNumber);
  		this.focusTraversalPolicy.addComponent(jTextField_HokensyoCode);
! 		this.focusTraversalPolicy.addComponent(jComboBox_HanteiResult);
  		this.focusTraversalPolicy.addComponent(jTextField_KensaBeginDate);
  		this.focusTraversalPolicy.addComponent(jTextField_KensaEndDate);
  		this.focusTraversalPolicy.addComponent(jTextField_HanteiBeginDate);
  		this.focusTraversalPolicy.addComponent(jTextField_HanteiEndDate);
  		this.focusTraversalPolicy.addComponent(jTextField_TsuuchiBeginDate);
  		this.focusTraversalPolicy.addComponent(jTextField_TsuuchiEndDate);
  		this.focusTraversalPolicy.addComponent(jCheckBox_IsKekkaInput);
  		this.focusTraversalPolicy.addComponent(jCheckBox_JisiYear);
- 		this.focusTraversalPolicy.addComponent(jButton_AllSelect);
  		this.focusTraversalPolicy.addComponent(jButton_Serach);
  		this.focusTraversalPolicy.addComponent(table);
  		this.focusTraversalPolicy.addComponent(jButton_Metabo);
--- 283,322 ----
  	   			(DefaultTableCellRenderer)table.getDefaultRenderer(table.getColumnClass(i))));
  	   }
  
! 		this.initializeColumnWidth();
  
! //		modelfixed.setSelectionModel(table.getSelectionModel());
! //		modelfixed.getColumnModel().getColumn(0).setResizable(false);
! //		modelfixed.getColumnModel().getColumn(1).setResizable(false);
! //		modelfixed.getColumnModel().getColumn(2).setResizable(false);
! //		modelfixed.getColumnModel().getColumn(3).setResizable(false);
  
+ 		// add s.inoue 2009/10/26
  		hanteiSetting();
  		// 固定,変動リフレッシュ
! 	    modelfixed.setCellCheckBoxEditor(new ExtendedCheckBox(), 0);
  	    table.refreshTable();
  	}
  
  	/* focus初期化 */
  	private void initilizeFocus(){
  		this.focusTraversalPolicy = new JFocusTraversalPolicy();
  		this.setFocusTraversalPolicy(this.focusTraversalPolicy);
! 		this.focusTraversalPolicy.setDefaultComponent(jTextField_Jyusinken_ID);
  		this.focusTraversalPolicy.addComponent(jTextField_Jyusinken_ID);
  		this.focusTraversalPolicy.addComponent(jTextField_HokensyoCode);
! 		this.focusTraversalPolicy.addComponent(jTextField_HokensyoNumber);
! 		this.focusTraversalPolicy.addComponent(jTextField_HokenjyaNumber);
! 		this.focusTraversalPolicy.addComponent(jTextField_Name);
  		this.focusTraversalPolicy.addComponent(jTextField_KensaBeginDate);
  		this.focusTraversalPolicy.addComponent(jTextField_KensaEndDate);
+ 		this.focusTraversalPolicy.addComponent(jComboBox_HanteiResult);
  		this.focusTraversalPolicy.addComponent(jTextField_HanteiBeginDate);
  		this.focusTraversalPolicy.addComponent(jTextField_HanteiEndDate);
  		this.focusTraversalPolicy.addComponent(jTextField_TsuuchiBeginDate);
  		this.focusTraversalPolicy.addComponent(jTextField_TsuuchiEndDate);
  		this.focusTraversalPolicy.addComponent(jCheckBox_IsKekkaInput);
  		this.focusTraversalPolicy.addComponent(jCheckBox_JisiYear);
  		this.focusTraversalPolicy.addComponent(jButton_Serach);
  		this.focusTraversalPolicy.addComponent(table);
  		this.focusTraversalPolicy.addComponent(jButton_Metabo);
***************
*** 387,445 ****
  		this.focusTraversalPolicy.addComponent(jButton_End);
  
  	}
- 
- 	// add s.inoue 2009/12/01
- 	private void functionListner(){
- 		Component comp = null;
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			comp = focusTraversalPolicy.getComponent(i);
- 			comp.addKeyListener(this);
- 		}
- 		modelfixed.addKeyListener(this);
- 	}
- 
- 	// add s.inoue 2010/02/23
- 	/**
- 	 * 保険者番号、名称の一覧を取得する。
- 	 */
- 	private ArrayList<Hashtable<String, String>> getHokenjaNumAndNames() {
- 		ArrayList<Hashtable<String, String>> result = null;
- 		// add s.inoue 2010/01/15
- 		String query = new String("SELECT HKNJANUM,HKNJANAME FROM T_HOKENJYA WHERE YUKOU_FLG = '1' ORDER BY HKNJANUM");
- 		try{
- 			result = JApplication.kikanDatabase.sendExecuteQuery(query);
- 		}catch(SQLException e){
- 			e.printStackTrace();
- 			logger.error(e.getMessage());
- 		}
- 		return result;
- 	}
- 
- 	/**
- 	 * 保険者番号コンボボックスの初期化
- 	 */
- 	private void initializeHokenjaNumComboBox() {
- 		ArrayList<Hashtable<String, String>> result = this.getHokenjaNumAndNames();
- 
- 		jComboBox_HokenjyaNumber.addItem("");
- 
- 		for(int i = 0;i < result.size();i++ )
- 		{
- 			Hashtable<String,String> resultItem = result.get(i);
- 			String num = resultItem.get("HKNJANUM");
- 			String name = resultItem.get("HKNJANAME");
- 
- 			StringBuffer buffer = new StringBuffer();
- 			buffer.append(num);
- 			if (name != null && ! num.isEmpty()) {
- 				buffer.append(COMBOBOX_NUMBER_NAME_SEPARATOR);
- 				buffer.append(name);
- 			}
- 
- 			jComboBox_HokenjyaNumber.addItem(buffer.toString());
- 		}
- 	}
- 
  	// edit s.inoue 2009/10/26
  	/**
  	 * 列サイズを初期化する。
--- 326,331 ----
***************
*** 499,523 ****
  		searchRefresh();
  	}
  
- 	// add s.inoue 2009/11/18
  	/*
  	 * 検索リフレッシュ処理
  	 */
  	private void searchRefresh(){
  
  		modelfixed.setPreferedColumnWidths(new int[] {50, 50, 100, 175});
  		table.setPreferedColumnWidths(new int[] {120, 80, 40, 40, 100, 100, 80, 80, 80, 100, 100,80,80, 200, 0});
  	    modelfixed.setSelectionModel(table.getSelectionModel());
  
  	    Object [][] resultref=resultRefresh();
  	    if (resultref == null)
  	    	return;
  
- 	    // add h.yoshitama 2009/11/16
- 	    if (resultref.length == 0){
- 	    	JErrorMessage.show("M4955", this);
- 	    }
- 
  	    // add s.inoue 2009/10/26
  	    for(int i=dmodel.getColumnCount()-1;i>=0;i--) {
              if(i<5) {
--- 385,408 ----
  		searchRefresh();
  	}
  
  	/*
  	 * 検索リフレッシュ処理
  	 */
  	private void searchRefresh(){
  
+ //		modelfixed.setPreferedColumnWidths(new int[] {50, 50, 100, 175});
+ //		table.setPreferedColumnWidths(new int[] {120, 80, 50, 80, 50, 80, 100, 100, 100, 100, 200, 0});
  		modelfixed.setPreferedColumnWidths(new int[] {50, 50, 100, 175});
  		table.setPreferedColumnWidths(new int[] {120, 80, 40, 40, 100, 100, 80, 80, 80, 100, 100,80,80, 200, 0});
+ 
+ 		// add s.inoue 2009/10/23
  	    modelfixed.setSelectionModel(table.getSelectionModel());
  
+ 	    // validationCheck
  	    Object [][] resultref=resultRefresh();
  	    if (resultref == null)
  	    	return;
  
  	    // add s.inoue 2009/10/26
  	    for(int i=dmodel.getColumnCount()-1;i>=0;i--) {
              if(i<5) {
***************
*** 527,532 ****
--- 412,422 ----
  
  	    dmodel.setDataVector(resultref,header);
  
+ 	    // edit s.inoue 2010/02/16
+ 	    if (resultRefresh().length == 0){
+ 	    	JErrorMessage.show("M4955", this);
+ 	    }
+ 
  		// add s.inoue 2009/10/26
  		// 4列以下は固定、以降は変動
  		for(int i=dmodel.getColumnCount()-1;i>=0;i--) {
***************
*** 557,578 ****
  	    // add s.inoue 2009/10/26
  		hanteiSetting();
  
- 		// edit s.inoue 2009/12/07
  		// 固定,変動リフレッシュ
  	    modelfixed.setCellCheckBoxEditor(new ExtendedCheckBox(), 0);
  	    table.refreshTable();
- 
- 	    // edit s.inoue 2009/11/09
- 		// 初期選択
- 	    int count = 0;
- 		if (table.getRowCount() > 0) {
- 
- 			count = table.getRowCount();
- 			table.setRowSelectionInterval(0, 0);
- 			} else {
- 				jTextField_Jyusinken_ID.requestFocus();
- 		}
- 		jLabel_count.setText(count + " 件");
  	}
  
  	/**
--- 447,455 ----
***************
*** 871,891 ****
  		// 選択状態を保持する
  		ArrayList<Integer> selectedRows = table.getselectedRows(modelfixed,table);
  
- 
- 		// add s.inoue 2009/12/24
- 		// A4-1枚,2枚選択
- 		pageSelectDialog = DialogFactory.getInstance().createDialog(this);
- 
- 		// 印刷方法選択ダイアログを表示
- 		pageSelectDialog.setMessageTitle("印刷方法選択画面");
- 		pageSelectDialog.setVisible(true);
- 
- 		int pageSelect = (pageSelectDialog.getPrintSelect()==2) ?2:1;
- 		// cancelはbreak
- 		if(pageSelectDialog.getStatus().equals(RETURN_VALUE.CANCEL)){
- 			return;
- 		}
- 
  		/*
  		 * 個人情報データ作成
  		 */
--- 748,753 ----
***************
*** 927,934 ****
  							hihokenjyaCode,
  							hihokenjyaNumber,
  							hokenjyaNumber,
! 							this,
! 							pageSelect);
  			}
  		}
  		// add 20081224 s.inoueチェック状態を保持して処理後状態を戻す
--- 789,795 ----
  							hihokenjyaCode,
  							hihokenjyaNumber,
  							hokenjyaNumber,
! 							this);
  			}
  		}
  		// add 20081224 s.inoueチェック状態を保持して処理後状態を戻す
***************
*** 941,965 ****
  		if (selectedRowCount != 1) return;
  		int selectedIndex = -1;
  
! 		// edit s.inoue 2010/04/27
! 		setSelectedRows();
! //		ArrayList<Integer> selectedRow = new ArrayList<Integer>();
! //
! //		//現在チェックされている行のリストを抽出
! //		// edit ver2 s.inoue 2009/09/02
! //		for( int i = 0;i < table.getRowCount();i++)
! //		{
! //			if( modelfixed.getData(i, 0) == Boolean.TRUE )
! //			{
! //				selectedRow.add(i);
! //			}
! //		}
! //		if( selectedRow.size() != 1 ){
! //			JErrorMessage.show("M3520", this);
! //			return;
! //		}
  
! 		selectedIndex = selectedRows.get(0).intValue();
  
  		// Hashtableは将来廃止予定のため、List<Map<String,String>>に詰め替える
  		List<TreeMap<String, String>> recordList = new ArrayList<TreeMap<String,String>>();
--- 802,825 ----
  		if (selectedRowCount != 1) return;
  		int selectedIndex = -1;
  
! 		ArrayList<Integer> selectedRow = new ArrayList<Integer>();
! 
! 		//現在チェックされている行のリストを抽出
! 		// edit ver2 s.inoue 2009/09/02
! 		for( int i = 0;i < table.getRowCount();i++)
! 		{
! 			if( modelfixed.getData(i, 0) == Boolean.TRUE )
! 			{
! 				selectedRow.add(i);
! 			}
! 		}
! 
! 		if( selectedRow.size() != 1 ){
! 			JErrorMessage.show("M3520", this);
! 			return;
! 		}
  
! 		selectedIndex = selectedRow.get(0).intValue();
  
  		// Hashtableは将来廃止予定のため、List<Map<String,String>>に詰め替える
  		List<TreeMap<String, String>> recordList = new ArrayList<TreeMap<String,String>>();
***************
*** 974,991 ****
  		JScene.CreateDialog(this, new JShowResultFrameCtrl(recordList, selectedIndex), new WindowRefreshEvent());
  	}
  
- 	// add s.inoue 2010/04/27
- 	private void setSelectedRows(){
- 		selectedRows =  new ArrayList<Integer>();
- 
- 		// 現在チェックされている行のリストを抽出
- 		for (int i = 0; i < this.modelfixed.getRowCount(); i++) {
- 			if (this.modelfixed.getData(i, 0) == Boolean.TRUE) {
- 				selectedRows.add(i);
- 			}
- 		}
- 	}
- 
  	/**
  	 * 遷移先の画面から戻ってきた場合にテーブルの再描画を行う
  	 */
--- 834,839 ----
***************
*** 995,1003 ****
  			// table.clearAllRow();
  			// modelfixed.clearAllRow();
  			pushedSearchButton(null);
- 			// edit s.inoue 2010/04/27
- 			if (selectedRows != null)
- 				modelfixed.setselectedRows(modelfixed,selectedRows);
  		}
  	}
  
--- 843,848 ----
***************
*** 1593,1632 ****
  		Object source = e.getSource();
  		if( source == jButton_End )
  		{
- 			logger.info(jButton_End.getText());
  			pushedEndButton( e );
  		}
  		else if( source == jButton_Serach )
  		{
- 			logger.info(jButton_Serach.getText());
  			pushedSearchButton( e );
  		}
  		else if( source == jButton_Print )
  		{
- 			logger.info(jButton_Print.getText());
  			pushedPrintButton( e );
  		}
  		else if( source == jButton_OK )
  		{
- 			logger.info(jButton_OK.getText());
  			pushedOKButton( e );
  		}
  		else if( source == jButton_Metabo )
  		{
- 			logger.info(jButton_Metabo.getText());
  			pushedMetaboButton( e );
  		}
  		else if( source == jButton_PrintSetsumei )
  		{
- 			logger.info(jButton_PrintSetsumei.getText());
  			pushePrintSetsumei( e );
  		}
- 		// add h.yoshitama 2009/11/26
- 		else if( source == jButton_AllSelect	)
- 		{
- 			logger.info(jButton_AllSelect.getText());
- 			pushedAllSelectButton( e );
- 		}
  	}
  
  	/**
--- 1438,1470 ----
  		Object source = e.getSource();
  		if( source == jButton_End )
  		{
  			pushedEndButton( e );
  		}
+ 
  		else if( source == jButton_Serach )
  		{
  			pushedSearchButton( e );
  		}
+ 
  		else if( source == jButton_Print )
  		{
  			pushedPrintButton( e );
  		}
+ 
  		else if( source == jButton_OK )
  		{
  			pushedOKButton( e );
  		}
+ 
  		else if( source == jButton_Metabo )
  		{
  			pushedMetaboButton( e );
  		}
+ 
  		else if( source == jButton_PrintSetsumei )
  		{
  			pushePrintSetsumei( e );
  		}
  	}
  
  	/**
***************
*** 1689,1793 ****
  		}
  	}
  
- 	// add h.yoshitama 2009/11/26
- 	/**
- 	 * 全て選択ボタンが押された場合
- 	 */
- 	public void pushedAllSelectButton( ActionEvent e )
- 	{
- 		for(int i = 0;i < modelfixed.getRowCount();i++ )
- 		{
- 			if( isAllSelect )
- 				modelfixed.setData(true, i, 0);
- 			else
- 				modelfixed.setData(false, i, 0);
- 		}
- 
- 		if( isAllSelect )
- 		{
- 			isAllSelect = false;
- 		}else{
- 			isAllSelect = true;
- 		}
- 	}
- 
- 	// add h.yoshitama 2009/11/11
- 	public void itemStateChanged(ItemEvent e) {
- 		if ((e.getSource()) == jCheckBox_IsKekkaInput) {
- 			if( !jCheckBox_IsKekkaInput.isSelected() )
- 			{
- 				/* 健診実施日 */
- 				jTextField_KensaBeginDate.setEditable(false);
- 				jTextField_KensaBeginDate.setEnabled(false);
- 				jTextField_KensaBeginDate.setText("");
- 				jTextField_KensaEndDate.setEditable(false);
- 				jTextField_KensaEndDate.setEnabled(false);
- 				jTextField_KensaEndDate.setText("");
- 				/* 判定日 */
- 				jTextField_HanteiBeginDate.setEditable(false);
- 				jTextField_HanteiBeginDate.setEnabled(false);
- 				jTextField_HanteiBeginDate.setText("");
- 				jTextField_HanteiEndDate.setEditable(false);
- 				jTextField_HanteiEndDate.setEnabled(false);
- 				jTextField_HanteiEndDate.setText("");
- 				/* 結果通知日 */
- 				jTextField_TsuuchiBeginDate.setEditable(false);
- 				jTextField_TsuuchiBeginDate.setEnabled(false);
- 				jTextField_TsuuchiBeginDate.setText("");
- 				jTextField_TsuuchiEndDate.setEditable(false);
- 				jTextField_TsuuchiEndDate.setEnabled(false);
- 				jTextField_TsuuchiEndDate.setText("");
- 			} else {
- 				/* 健診実施日 */
- 				jTextField_KensaBeginDate.setEditable(true);
- 				jTextField_KensaBeginDate.setEnabled(true);
- 				jTextField_KensaEndDate.setEditable(true);
- 				jTextField_KensaEndDate.setEnabled(true);
- 				/* 判定日 */
- 				jTextField_HanteiBeginDate.setEditable(true);
- 				jTextField_HanteiBeginDate.setEnabled(true);
- 				jTextField_HanteiEndDate.setEditable(true);
- 				jTextField_HanteiEndDate.setEnabled(true);
- 				/* 結果通知日 */
- 				jTextField_TsuuchiBeginDate.setEditable(true);
- 				jTextField_TsuuchiBeginDate.setEnabled(true);
- 				jTextField_TsuuchiEndDate.setEditable(true);
- 				jTextField_TsuuchiEndDate.setEnabled(true);
- 
- 			}
- 		}
- 	}
- 
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 		int mod = keyEvent.getModifiersEx();
- 
- 		switch(keyEvent.getKeyCode()){
- 		case KeyEvent.VK_F1:
- 			logger.info(jButton_End.getText());
- 			pushedEndButton(null);break;
- 		case KeyEvent.VK_F7:
- 			logger.info(jButton_Serach.getText());
- 			pushedMetaboButton(null);break;
- 		case KeyEvent.VK_F9:
- 			logger.info(jButton_Print.getText());
- 			pushedPrintButton(null);break;
- 		case KeyEvent.VK_F11:
- 			logger.info(jButton_PrintSetsumei.getText());
- 			pushePrintSetsumei(null);break;
- 		case KeyEvent.VK_F12:
- 			logger.info(jButton_OK.getText());
- 			pushedOKButton(null);break;
- //		case KeyEvent.VK_S:
- //			if ((mod & InputEvent.ALT_DOWN_MASK) != 0){
- //				logger.info(jButton_Serach.getText());
- //				pushedSearchButton( null );
- //			}
- //			break;
- 		}
- 
- 	}
- 
  	// edit s.inoue 2009/10/26
  	// 一覧用データ取得
  	private Object[][] resultRefresh()
--- 1527,1532 ----
***************
*** 1800,1825 ****
  		boolean validateflg = true;
  		Object[][] rowcolumn = null;
  		String calSelect = (jComboBox_HanteiResult.getSelectedItem() == null) ? "":(String)jComboBox_HanteiResult.getSelectedItem();
- 
- 		// edit s.inoue 2010/02/23
- 		/* コンボボックスで選択されている保険者番号、名称を取得する。 */
- 		String hokenjaNumberAndNameString = (String)jComboBox_HokenjyaNumber.getSelectedItem();
- 		String hokenjaNumber = "";
- 		String hokenjaName = "";
- 		if (hokenjaNumberAndNameString != null && ! hokenjaNumberAndNameString.isEmpty()) {
- 			String[] hokenjaNumberAndName = hokenjaNumberAndNameString.split(COMBOBOX_NUMBER_NAME_SEPARATOR);
- 			hokenjaNumber = hokenjaNumberAndName[0];
- 
- 			if (hokenjaNumberAndName.length > 1) {
- 				hokenjaName = hokenjaNumberAndName[1];
- 			}
- 		}
- 
  		// edit s.inoue 2009/10/27
  		// エラー時の処理追加
  			validateflg = validatedData.setJyushinkenID(jTextField_Jyusinken_ID.getText()) &&
  			validatedData.setHihokenjyaCode(  jTextField_HokensyoCode.getText()) &&
! 			validatedData.setHihokenjyaNumber(hokenjaNumber) &&
  			validatedData.setHokenjyaNumber(  jTextField_HokenjyaNumber.getText()) &&
  			validatedData.setName(jTextField_Name.getText()) &&
  			validatedData.setKensaBeginDate(jTextField_KensaBeginDate.getText()) &&
--- 1539,1549 ----
  		boolean validateflg = true;
  		Object[][] rowcolumn = null;
  		String calSelect = (jComboBox_HanteiResult.getSelectedItem() == null) ? "":(String)jComboBox_HanteiResult.getSelectedItem();
  		// edit s.inoue 2009/10/27
  		// エラー時の処理追加
  			validateflg = validatedData.setJyushinkenID(jTextField_Jyusinken_ID.getText()) &&
  			validatedData.setHihokenjyaCode(  jTextField_HokensyoCode.getText()) &&
! 			validatedData.setHihokenjyaNumber(jTextField_HokensyoNumber.getText()) &&
  			validatedData.setHokenjyaNumber(  jTextField_HokenjyaNumber.getText()) &&
  			validatedData.setName(jTextField_Name.getText()) &&
  			validatedData.setKensaBeginDate(jTextField_KensaBeginDate.getText()) &&
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JShiharaiMasterMaintenanceEditFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JShiharaiMasterMaintenanceEditFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JShiharaiMasterMaintenanceEditFrame.java	Mon Apr 19 19:21:56 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JShiharaiMasterMaintenanceEditFrame.java	Thu Oct  1 19:50:36 2009
***************
*** 15,22 ****
  import java.awt.Rectangle;
  import java.awt.event.ActionEvent;
  import java.awt.event.ActionListener;
- import java.awt.event.FocusEvent;
- import java.awt.event.FocusListener;
  import java.awt.event.KeyEvent;
  import java.awt.event.KeyListener;
  import java.awt.Cursor;
--- 15,20 ----
***************
*** 39,45 ****
   */
  public class JShiharaiMasterMaintenanceEditFrame
  extends JFrame
! implements ActionListener,KeyListener,FocusListener {
  
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
--- 37,43 ----
   */
  public class JShiharaiMasterMaintenanceEditFrame
  extends JFrame
! implements ActionListener,KeyListener {
  
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
***************
*** 202,208 ****
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
--- 200,206 ----
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
***************
*** 510,516 ****
  	private ExtendedTextField getJTextField_Zipcode() {
  		if (jTextField_Zipcode == null) {
  			jTextField_Zipcode = new ExtendedTextField("", 7, ImeMode.IME_OFF);
- 			jTextField_Zipcode.addFocusListener(this);
  		}
  		return jTextField_Zipcode;
  	}
--- 508,513 ----
***************
*** 626,632 ****
  	private ExtendedButton getJButton_Register() {
  		if (jButton_Register == null) {
  			jButton_Register = new ExtendedButton();
! 			jButton_Register.setText("登録(F12)");
  			jButton_Register.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Register.addActionListener(this);
  		}
--- 623,629 ----
  	private ExtendedButton getJButton_Register() {
  		if (jButton_Register == null) {
  			jButton_Register = new ExtendedButton();
! 			jButton_Register.setText("登録");
  			jButton_Register.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Register.addActionListener(this);
  		}
***************
*** 995,1016 ****
  			jButton_Clear = new ExtendedButton();
  			jButton_Clear.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Clear.setHorizontalAlignment(SwingConstants.CENTER);
! 			jButton_Clear.setText("クリア(F2)");
  			jButton_Clear.setActionCommand("\u7d42\u4e86");
  			jButton_Clear.addActionListener(this);
  		}
  		return jButton_Clear;
  	}
- 
- 	@Override
- 	public void focusGained(FocusEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void focusLost(FocusEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
  }
--- 992,1001 ----
  			jButton_Clear = new ExtendedButton();
  			jButton_Clear.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Clear.setHorizontalAlignment(SwingConstants.CENTER);
! 			jButton_Clear.setText("クリア");
  			jButton_Clear.setActionCommand("\u7d42\u4e86");
  			jButton_Clear.addActionListener(this);
  		}
  		return jButton_Clear;
  	}
  }
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JShiharaiMasterMaintenanceEditFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JShiharaiMasterMaintenanceEditFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JShiharaiMasterMaintenanceEditFrameCtrl.java	Tue Apr 27 10:29:50 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JShiharaiMasterMaintenanceEditFrameCtrl.java	Mon Nov  9 16:18:10 2009
***************
*** 1,14 ****
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
  
- import java.awt.Component;
  import java.awt.event.*;
  import java.sql.SQLException;
  import java.util.*;
  
- import org.apache.log4j.Logger;
- 
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
- import jp.or.med.orca.jma_tokutei.common.convert.JZenkakuKatakanaToHankakuKatakana;
  import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
  import jp.or.med.orca.jma_tokutei.common.errormessage.RETURN_VALUE;
  import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
--- 1,10 ----
***************
*** 33,39 ****
  
  	/* フォーカス移動制御 */
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
- 	private static Logger logger = Logger.getLogger(JShiharaiMasterMaintenanceEditFrameCtrl.class);
  
  	/**
  	 * 支払代行機関情報追加の場合のコンストラクタ（遷移元：マスタメンテナンス）
--- 29,34 ----
***************
*** 45,52 ****
  		jTextField_DaikouNumber.setBackground(ViewSettings
  				.getRequiedItemBgColor());
  		initializefocus();
- 		// add s.inoue 2009/12/02
- 		functionListner();
  	}
  
  	/**
--- 40,45 ----
***************
*** 61,68 ****
  		jTextField_DaikouNumber.setBackground(ViewSettings
  				.getRequiedItemBgColor());
  		initializefocus();
- 		// add s.inoue 2009/12/02
- 		functionListner();
  	}
  
  	/**
--- 54,59 ----
***************
*** 112,135 ****
  
  		mode = CHANGE_MODE;
  
! 		// del s.inoue 2009/12/02
! //		this.jTextField_DaikouName.grabFocus();
  		initializefocus();
- 		// edit s.inoue 2009/12/02
- 		functionListner();
  	}
  	private void initializefocus(){
  		// focus制御
  		// edit s.inoue 2009/10/07
  		this.focusTraversalPolicy = new JFocusTraversalPolicy();
  		this.setFocusTraversalPolicy(this.focusTraversalPolicy);
! 		// edit s.inoue 2009/12/02
! 		if (mode == CHANGE_MODE){
! 			this.focusTraversalPolicy.setDefaultComponent(this.jTextField_DaikouName);
! 		}else if (mode == ADD_MODE){
! 			this.focusTraversalPolicy.setDefaultComponent(this.jTextField_DaikouNumber);
! 		}
! 		this.focusTraversalPolicy.addComponent(this.jTextField_DaikouNumber);
  		this.focusTraversalPolicy.addComponent(this.jTextField_DaikouName);
  		this.focusTraversalPolicy.addComponent(this.jTextField_Zipcode);
  		this.focusTraversalPolicy.addComponent(this.jTextField_Address);
--- 103,117 ----
  
  		mode = CHANGE_MODE;
  
! 		this.jTextField_DaikouName.grabFocus();
  		initializefocus();
  	}
  	private void initializefocus(){
  		// focus制御
  		// edit s.inoue 2009/10/07
  		this.focusTraversalPolicy = new JFocusTraversalPolicy();
  		this.setFocusTraversalPolicy(this.focusTraversalPolicy);
! 		this.focusTraversalPolicy.setDefaultComponent(this.jTextField_DaikouName);
  		this.focusTraversalPolicy.addComponent(this.jTextField_DaikouName);
  		this.focusTraversalPolicy.addComponent(this.jTextField_Zipcode);
  		this.focusTraversalPolicy.addComponent(this.jTextField_Address);
***************
*** 139,153 ****
  		this.focusTraversalPolicy.addComponent(jButton_End);
  
  	}
- 
- 	// edit s.inoue 2009/12/02
- 	private void functionListner(){
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			Component comp = focusTraversalPolicy.getComponent(i);
- 			comp.addKeyListener(this);
- 		}
- 	}
- 
  	/**
  	 * 印刷時の必須項目をチェックする
  	 */
--- 121,126 ----
***************
*** 299,314 ****
  	}
  
  	private boolean validateData() {
! 
! 		// edit s.inoue 2010/04/27
! 		String address = jTextField_Address.getText();
! 		if (!JValidate.isAllZenkaku(address)){
! 			address = JZenkakuKatakanaToHankakuKatakana.eisukigoHanToZen(address);
! 			address = JValidate.encodeUNICODEtoConvert(address);
! 		}
! 		return validatedData.setAddress(address)
! 				&& validatedData.setDaikouName(jTextField_DaikouName.getText())
! 				&& validatedData.setDaikouNumber(jTextField_DaikouNumber.getText())
  				&& validatedData.setTEL(jTextField_TEL.getText())
  				&& validatedData.setZipcode(jTextField_Zipcode.getText());
  	}
--- 272,282 ----
  	}
  
  	private boolean validateData() {
! 		return validatedData.setAddress(jTextField_Address.getText())
! 				&& validatedData.setDaikouName(jTextField_DaikouName
! 						.getText())
! 				&& validatedData.setDaikouNumber(jTextField_DaikouNumber
! 						.getText())
  				&& validatedData.setTEL(jTextField_TEL.getText())
  				&& validatedData.setZipcode(jTextField_Zipcode.getText());
  	}
***************
*** 342,437 ****
  		Object source = e.getSource();
  
  		if (source == jButton_End) {
- 			logger.info(jButton_End.getText());
  			pushedEndButton(e);
  		}
  		else if (source == jButton_Register) {
- 			logger.info(jButton_Register.getText());
  			pushedRegisterButton(e);
  		}
  		else if (source == jButton_Cancel) {
- 			logger.info(jButton_Cancel.getText());
  			pushedCancelButton(e);
  		}
- 		else if (source == jButton_Clear) {
- 			logger.info(jButton_Clear.getText());
- 			crearControl();
- 		}
- 	}
- 
- 	// edit s.inoue 2010/04/05
- 	@Override
- 	public void focusLost(FocusEvent event) {
- 		Object source = event.getSource();
- 
- 		// add s.inoue 2010/03/29
- 		if(source.equals(this.jTextField_Zipcode)){
- 			if (jTextField_Zipcode.getText().equals(""))
- 				return;
- 
- 			String zipText = setZipCodeAddress(this.jTextField_Zipcode.getText());
- 			if (zipText.equals(""))
- 				return;
- 
- 			jTextField_Address.setText(zipText);
- 		}
- 	}
- 
- 	// edit s.inoue 2010/04/05
- 	private String setZipCodeAddress(String zipCode){
  
! 		ArrayList<Hashtable<String, String>> result = new ArrayList<Hashtable<String, String>>();
! 		Hashtable<String, String> resultItem = new Hashtable<String, String>();
! 
! 		StringBuilder sb = new StringBuilder();
! 
! 		sb.append("SELECT ADDRESS FROM T_POST,");
! 		sb.append("(SELECT SUBSTRING(POST_CD FROM 1 FOR 3) || SUBSTRING(POST_CD FROM 5 FOR 4) POSTCD,");
! 		sb.append(" POST_CD SP_POSTCD FROM T_POST) SUB_POST");
! 		sb.append(" where SUB_POST.POSTCD = ");
! 		sb.append(JQueryConvert.queryConvert(zipCode));
! 		sb.append(" and SUB_POST.SP_POSTCD = T_POST.POST_CD ");
! 
! 		try {
! 			result = JApplication.systemDatabase.sendExecuteQuery(sb.toString());
! 		} catch (SQLException e) {
! 			logger.error(e.getMessage());
! 			e.printStackTrace();
! 		}
! 
! 		if (result.size() <= 0)
! 			return "";
! 
! 		resultItem = result.get(0);
! 		return resultItem.get("ADDRESS");
! 
! 	}
! 
! 	// edit s.inoue 2009/12/02
! 	private void crearControl(){
! 		if (mode == ADD_MODE) {
! 			jTextField_DaikouNumber.setText("");
! 		}
! 
! 		jTextField_DaikouName.setText("");
! 		jTextField_Zipcode.setText("");
! 		jTextField_Address.setText("");
! 		jTextField_TEL.setText("");
! 	}
  
! 	@Override
! 	public void keyPressed(KeyEvent keyEvent) {
! 		switch(keyEvent.getKeyCode()){
! 		case KeyEvent.VK_F1:
! 			logger.info(jButton_End.getText());
! 			pushedEndButton(null);break;
! 		case KeyEvent.VK_F2:
! 			logger.info(jButton_Clear.getText());
! 			crearControl();break;
! 		case KeyEvent.VK_F12:
! 			pushedRegisterButton(null);
! 			logger.info(jButton_Register.getText());
! 			break;
  		}
  	}
  
--- 310,335 ----
  		Object source = e.getSource();
  
  		if (source == jButton_End) {
  			pushedEndButton(e);
  		}
+ 
  		else if (source == jButton_Register) {
  			pushedRegisterButton(e);
  		}
+ 
  		else if (source == jButton_Cancel) {
  			pushedCancelButton(e);
  		}
  
! 		else if (source == jButton_Clear) {
! 			if (mode == ADD_MODE) {
! 				jTextField_DaikouNumber.setText("");
! 			}
  
! 			jTextField_DaikouName.setText("");
! 			jTextField_Zipcode.setText("");
! 			jTextField_Address.setText("");
! 			jTextField_TEL.setText("");
  		}
  	}
  
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JShiharaiMasterMaintenanceListFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JShiharaiMasterMaintenanceListFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JShiharaiMasterMaintenanceListFrame.java	Thu Apr 22 15:01:16 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JShiharaiMasterMaintenanceListFrame.java	Tue Aug 11 17:55:30 2009
***************
*** 27,33 ****
  /**
   * 支払代行一覧画面
   */
! public class JShiharaiMasterMaintenanceListFrame extends JFrame implements ActionListener,KeyListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
--- 27,33 ----
  /**
   * 支払代行一覧画面
   */
! public class JShiharaiMasterMaintenanceListFrame extends JFrame implements ActionListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
***************
*** 44,53 ****
  	protected ExtendedButton jButton_Change = null;
  	protected ExtendedButton jButton_Delete = null;
  	protected JPanel jPanel_MainArea = null;
- 	// add s.inoue 2010/02/25
- 	protected ExtendedButton jButton_Import = null;
- 	protected ExtendedButton jButton_Export = null;
- 
  	/**
  	 * This is the default constructor
  	 */
--- 44,49 ----
***************
*** 94,138 ****
  	 */
  	private JPanel getJPanel_ButtonArea() {
  		if (jPanel_ButtonArea == null) {
- 			// add s.inoue 2010/02/25
- 			GridBagConstraints gridBagConstraints4 = new GridBagConstraints();
- 			gridBagConstraints4.gridy = 0;
- 			gridBagConstraints4.insets = new Insets(0, 5, 0, 0);
- 			gridBagConstraints4.gridx = 1;
- 			gridBagConstraints4.anchor = GridBagConstraints.EAST;
- 			gridBagConstraints4.weightx = 1.0D;
- 
- 			GridBagConstraints gridBagConstraints5 = new GridBagConstraints();
- 			gridBagConstraints5.gridy = 0;
- 			gridBagConstraints5.insets = new Insets(0, 5, 0, 0);
- 			gridBagConstraints5.gridx = 2;
- 
  			GridBagConstraints gridBagConstraints3 = new GridBagConstraints();
  			gridBagConstraints3.gridy = 0;
  			gridBagConstraints3.gridx = 0;
- 			gridBagConstraints3.insets = new Insets(0, 5, 0, 0);
- 
  			GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
  			gridBagConstraints2.gridy = 0;
  			gridBagConstraints2.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints2.gridx = 5;
  			GridBagConstraints gridBagConstraints1 = new GridBagConstraints();
  			gridBagConstraints1.gridy = 0;
  			gridBagConstraints1.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints1.gridx = 4;
  			GridBagConstraints gridBagConstraints = new GridBagConstraints();
  			gridBagConstraints.gridy = 0;
! 			gridBagConstraints.gridx = 3;
! 			gridBagConstraints.insets = new Insets(0, 5, 0, 0);
! 
  			jPanel_ButtonArea = new JPanel();
  			jPanel_ButtonArea.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
  			jPanel_ButtonArea.setLayout(new GridBagLayout());
- 
- 			// add s.inoue 2010/02/25
- 			jPanel_ButtonArea.add(getJButton_Import(), gridBagConstraints4);
- 			jPanel_ButtonArea.add(getJButton_Export(), gridBagConstraints5);
- 
  			jPanel_ButtonArea.add(getJButton_Add(), gridBagConstraints);
  			jPanel_ButtonArea.add(getJButton_Change(), gridBagConstraints1);
  			jPanel_ButtonArea.add(getJButton_Delete(), gridBagConstraints2);
--- 90,114 ----
  	 */
  	private JPanel getJPanel_ButtonArea() {
  		if (jPanel_ButtonArea == null) {
  			GridBagConstraints gridBagConstraints3 = new GridBagConstraints();
  			gridBagConstraints3.gridy = 0;
  			gridBagConstraints3.gridx = 0;
  			GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
  			gridBagConstraints2.gridy = 0;
  			gridBagConstraints2.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints2.gridx = 3;
  			GridBagConstraints gridBagConstraints1 = new GridBagConstraints();
  			gridBagConstraints1.gridy = 0;
  			gridBagConstraints1.insets = new Insets(0, 5, 0, 0);
! 			gridBagConstraints1.gridx = 2;
  			GridBagConstraints gridBagConstraints = new GridBagConstraints();
  			gridBagConstraints.gridy = 0;
! 			gridBagConstraints.anchor = GridBagConstraints.EAST;
! 			gridBagConstraints.weightx = 1.0D;
! 			gridBagConstraints.gridx = 1;
  			jPanel_ButtonArea = new JPanel();
  			jPanel_ButtonArea.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
  			jPanel_ButtonArea.setLayout(new GridBagLayout());
  			jPanel_ButtonArea.add(getJButton_Add(), gridBagConstraints);
  			jPanel_ButtonArea.add(getJButton_Change(), gridBagConstraints1);
  			jPanel_ButtonArea.add(getJButton_Delete(), gridBagConstraints2);
***************
*** 152,158 ****
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
--- 128,134 ----
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
***************
*** 247,282 ****
  	}
  
  	/**
- 	 * This method initializes jButton_Import
- 	 *
- 	 * @return javax.swing.ExtendedButton
- 	 */
- 	private ExtendedButton getJButton_Import() {
- 		if (jButton_Import == null) {
- 			jButton_Import = new ExtendedButton();
- 			jButton_Import.setText("取込(F4)");
- 			jButton_Import.setFont(new Font("Dialog", Font.PLAIN, 12));
- 			jButton_Import.addActionListener(this);
- 		}
- 		return jButton_Import;
- 	}
- 
- 	/**
- 	 * This method initializes jButton_Export
- 	 *
- 	 * @return javax.swing.ExtendedButton
- 	 */
- 	private ExtendedButton getJButton_Export() {
- 		if (jButton_Export == null) {
- 			jButton_Export = new ExtendedButton();
- 			jButton_Export.setText("書出(F5)");
- 			jButton_Export.setFont(new Font("Dialog", Font.PLAIN, 12));
- 			jButton_Export.addActionListener(this);
- 		}
- 		return jButton_Export;
- 	}
- 
- 	/**
  	 * This method initializes jButton_Add
  	 *
  	 * @return javax.swing.ExtendedButton
--- 223,228 ----
***************
*** 284,290 ****
  	private ExtendedButton getJButton_Add() {
  		if (jButton_Add == null) {
  			jButton_Add = new ExtendedButton();
! 			jButton_Add.setText("追加(F9)");
  			jButton_Add.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Add.addActionListener(this);
  		}
--- 230,236 ----
  	private ExtendedButton getJButton_Add() {
  		if (jButton_Add == null) {
  			jButton_Add = new ExtendedButton();
! 			jButton_Add.setText("追加");
  			jButton_Add.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Add.addActionListener(this);
  		}
***************
*** 299,305 ****
  	private ExtendedButton getJButton_Change() {
  		if (jButton_Change == null) {
  			jButton_Change = new ExtendedButton();
! 			jButton_Change.setText("変更(F11)");
  			jButton_Change.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Change.addActionListener(this);
  		}
--- 245,251 ----
  	private ExtendedButton getJButton_Change() {
  		if (jButton_Change == null) {
  			jButton_Change = new ExtendedButton();
! 			jButton_Change.setText("変更");
  			jButton_Change.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Change.addActionListener(this);
  		}
***************
*** 314,320 ****
  	private ExtendedButton getJButton_Delete() {
  		if (jButton_Delete == null) {
  			jButton_Delete = new ExtendedButton();
! 			jButton_Delete.setText("削除(F12)");
  			jButton_Delete.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Delete.addActionListener(this);
  		}
--- 260,266 ----
  	private ExtendedButton getJButton_Delete() {
  		if (jButton_Delete == null) {
  			jButton_Delete = new ExtendedButton();
! 			jButton_Delete.setText("削除");
  			jButton_Delete.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Delete.addActionListener(this);
  		}
***************
*** 357,378 ****
  					   ViewSettings.getFrameCommonHeight() );
  		}
  	}
- 
- 	@Override
- 	public void keyPressed(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyReleased(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyTyped(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
  }
--- 303,306 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JShiharaiMasterMaintenanceListFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JShiharaiMasterMaintenanceListFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JShiharaiMasterMaintenanceListFrameCtrl.java	Tue Apr 27 10:55:52 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JShiharaiMasterMaintenanceListFrameCtrl.java	Mon Apr 26 11:10:42 2010
***************
*** 1,43 ****
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
  
- import java.awt.Component;
  import java.awt.event.*;
- import java.io.File;
- import java.io.IOException;
- import java.sql.Connection;
  import java.sql.SQLException;
  import java.util.ArrayList;
  import java.util.Hashtable;
- import java.util.Iterator;
- import java.util.List;
  import java.util.Vector;
  
- import jp.or.med.orca.jma_tokutei.common.component.DialogFactory;
- import jp.or.med.orca.jma_tokutei.common.component.IDialog;
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
- import jp.or.med.orca.jma_tokutei.common.convert.JZenkakuKatakanaToHankakuKatakana;
- import jp.or.med.orca.jma_tokutei.common.csv.JCSVReaderStream;
- import jp.or.med.orca.jma_tokutei.common.csv.JCSVWriterStream;
  import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
  import jp.or.med.orca.jma_tokutei.common.errormessage.RETURN_VALUE;
  import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
  import jp.or.med.orca.jma_tokutei.common.scene.JScene;
- import jp.or.med.orca.jma_tokutei.common.sql.dao.DaoFactory;
- import jp.or.med.orca.jma_tokutei.common.sql.dao.THokenjyaDao;
  import jp.or.med.orca.jma_tokutei.common.table.*;
  import jp.or.med.orca.jma_tokutei.common.app.JApplication;
- import jp.or.med.orca.jma_tokutei.common.app.JPath;
- 
- import javax.swing.JButton;
  import javax.swing.table.DefaultTableCellRenderer;
  import javax.swing.table.TableColumnModel;
  
- import org.apache.log4j.Logger;
- 
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellRowRenderer;
- import jp.or.med.orca.jma_tokutei.common.validate.JValidate;
- import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.dataimport.JImportMasterErrorHokenjyaResultFrameData;
- import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.dataimport.JImportMasterErrorSiharaiResultFrameData;
  
  /**
   * 支払い代行機関マスタメンテナンス
--- 1,22 ----
***************
*** 47,110 ****
  	private JSimpleTable model = new JSimpleTable();
  	/* フォーカス移動制御 */
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
- 	private static Logger logger = Logger.getLogger(JShiharaiMasterMaintenanceListFrameCtrl.class);
- 
- 	// add s.inoue 2010/03/05
- 	private static jp.or.med.orca.jma_tokutei.common.csv.JCSVReaderStream reader = null;
- 	private static jp.or.med.orca.jma_tokutei.common.csv.JCSVWriterStream writer = null;
- 	private static Vector<Vector<String>> CSVItems = null;
- 	private IDialog filePathDialog;
- 	private JShiharaiMasterMaintenanceEditFrameData validatedData = new JShiharaiMasterMaintenanceEditFrameData();  //  @jve:decl-index=0:
- 
- 	private static String saveTitle= "csvファイル保存先選択";
- 	private static String selectTitle= "csvファイル選択";
- 	private static String savaDialogTitle= "csvファイルの保存先を選択、ファイル名を指定してください";
- 	private static String selectDialogTitle= "csvファイルを選択してください";
- 
- 	private static final String[] TABLE_COLUMNS = {
- 		"SHIHARAI_DAIKO_NO", "SHIHARAI_DAIKO_NAME", "SHIHARAI_DAIKO_ZIPCD",
- 		"SHIHARAI_DAIKO_ADR", "SHIHARAI_DAIKO_TEL"
- 		 };
  
  	public JShiharaiMasterMaintenanceListFrameCtrl() {
  		JSimpleTableScrollPanel scroll = new JSimpleTableScrollPanel(model);
  		jPanel_MainArea.add(scroll);
  
  		this.initializeTable();
- 		initilizefocus();
- 		// edit s.inoue 2009/12/02
- 		functionListner();
- 
- 		model.addKeyListener(new jp.or.med.orca.jma_tokutei.common.event.JEnterEvent(
- 						this, jButton_Change));
  
- 		// ダブルクリックの処理
- 		model.addMouseListener(new jp.or.med.orca.jma_tokutei.common.event.JSingleDoubleClickEvent(
- 						this, jButton_Change));
- 	}
- 
- 	// add s.inoue 2009/12/02
- 	private void initilizefocus(){
  		// focus制御
  		// edit s.inoue 2009/10/07
  		this.focusTraversalPolicy = new JFocusTraversalPolicy();
  		this.setFocusTraversalPolicy(this.focusTraversalPolicy);
  		this.focusTraversalPolicy.setDefaultComponent(model);
  		this.focusTraversalPolicy.addComponent(this.model);
- 		// edit s.inoue 2010/04/23
- 		this.focusTraversalPolicy.addComponent(this.jButton_Import);
- 		this.focusTraversalPolicy.addComponent(this.jButton_Export);
  		this.focusTraversalPolicy.addComponent(this.jButton_Add);
  		this.focusTraversalPolicy.addComponent(this.jButton_Change);
  		this.focusTraversalPolicy.addComponent(this.jButton_Delete);
  		this.focusTraversalPolicy.addComponent(jButton_End);
- 	}
  
! 	private void functionListner(){
! 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
! 			Component comp = focusTraversalPolicy.getComponent(i);
! 			comp.addKeyListener(this);
! 		}
  	}
  
  	/**
--- 26,59 ----
  	private JSimpleTable model = new JSimpleTable();
  	/* フォーカス移動制御 */
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
  
  	public JShiharaiMasterMaintenanceListFrameCtrl() {
  		JSimpleTableScrollPanel scroll = new JSimpleTableScrollPanel(model);
  		jPanel_MainArea.add(scroll);
  
  		this.initializeTable();
  
  		// focus制御
  		// edit s.inoue 2009/10/07
  		this.focusTraversalPolicy = new JFocusTraversalPolicy();
  		this.setFocusTraversalPolicy(this.focusTraversalPolicy);
  		this.focusTraversalPolicy.setDefaultComponent(model);
  		this.focusTraversalPolicy.addComponent(this.model);
  		this.focusTraversalPolicy.addComponent(this.jButton_Add);
  		this.focusTraversalPolicy.addComponent(this.jButton_Change);
  		this.focusTraversalPolicy.addComponent(this.jButton_Delete);
  		this.focusTraversalPolicy.addComponent(jButton_End);
  
! 		model.addKeyListener(new jp.or.med.orca.jma_tokutei.common.event.JEnterEvent(
! 						this, jButton_Change));
! 
! 		// ダブルクリックの処理
! 		// edit s.inoue 2010/04/23
! 		// model.addMouseListener(new jp.or.med.orca.jma_tokutei.common.event.JDoubleClickEvent(
! 		//				this, jButton_Change));
! 		model.addMouseListener(new jp.or.med.orca.jma_tokutei.common.event.JSingleDoubleClickEvent(
! 				this, jButton_Change));
! 
  	}
  
  	/**
***************
*** 172,296 ****
  			jButton_Add.requestFocus();
  		}
  	}
- // edit s.inoue 2010/04/20
- // 登録済みの代行機関を優先的に上位へ表示する
- //	/**
- //	 * テーブルの初期化
- //	 */
- //	public void initializeTable() {
- //		//テーブルの再読み込みを行う
- //		model.clearAllColumn();
- //		model.clearAllRow();
- //		model.setPreferedColumnWidths(new int[] { 150, 200, 100, 200, 150 });
- //
- //		//テーブルの初期設定
- //		model.addHeader("支払代行機関番号");
- //		model.addHeader("支払代行機関名称");
- //		model.addHeader("郵便番号");
- //		model.addHeader("所在地");
- //		model.addHeader("電話番号");
- //
- //		//DBにアクセスしテーブルの要素を取得する
- //		try {
- //
- //			// edit s.inoue 2009/12/22
- //			// オーダー順を登録順に変更 in句用にキーを取得する
- //			ArrayList<Hashtable<String, String>> result_keys;
- //			Hashtable<String, String> resultItem_keys;
- //			StringBuilder sb_keys = new StringBuilder();
- //			sb_keys.append("SELECT distinct (SIHARAI_DAIKOU_BANGO) ");
- //			sb_keys.append("FROM T_KOJIN where SIHARAI_DAIKOU_BANGO is not null ");
- //			// String query = new String(
- //			//		"SELECT SHIHARAI_DAIKO_NO, SHIHARAI_DAIKO_NAME, SHIHARAI_DAIKO_ZIPCD, SHIHARAI_DAIKO_ADR, SHIHARAI_DAIKO_TEL FROM T_SHIHARAI ORDER BY SHIHARAI_DAIKO_NO DESC");
- //
- //			result_keys = JApplication.kikanDatabase.sendExecuteQuery(sb_keys.toString());
- //			String strWhere = "";
- //			for (int i = 0; i < result_keys.size(); i++) {
- //				resultItem_keys = result_keys.get(i);
- //				strWhere += JQueryConvert.queryConvertAppendComma(
- //						resultItem_keys.get("SIHARAI_DAIKOU_BANGO"));
- //			}
- //			if (strWhere.length() > 0)
- //				strWhere = strWhere.substring(0, strWhere.lastIndexOf(","));
- //
- //			// edit s.inoue 2009/12/22
- //			// 登録済みを上位にunionしデータを取得する
- //			String[] row = new String[5];
- //			ArrayList<Hashtable<String, String>> result;
- //			Hashtable<String, String> resultItem;
- //
- //			StringBuilder sb = new StringBuilder();
- //// edit s.inoue 2010/04/20
- ////			if (strWhere.length() > 0){
- ////				sb.append("SELECT SHIHARAI_DAIKO_NO, SHIHARAI_DAIKO_NAME, SHIHARAI_DAIKO_ZIPCD, SHIHARAI_DAIKO_ADR, SHIHARAI_DAIKO_TEL");
- ////				sb.append(" FROM T_SHIHARAI ");
- ////
- ////				sb.append(" Where SHIHARAI_DAIKO_NO IN (");
- ////				sb.append(strWhere);
- ////				sb.append(")");
- ////				sb.append(" union all ");
- ////				sb.append("SELECT SHIHARAI_DAIKO_NO, SHIHARAI_DAIKO_NAME, SHIHARAI_DAIKO_ZIPCD, SHIHARAI_DAIKO_ADR, SHIHARAI_DAIKO_TEL");
- ////				sb.append(" FROM T_SHIHARAI ");
- ////				sb.append(" Where SHIHARAI_DAIKO_NO NOT IN (");
- ////				sb.append(strWhere);
- ////				sb.append(")");
- ////			}else{
- ////				sb.append("SELECT SHIHARAI_DAIKO_NO, SHIHARAI_DAIKO_NAME, SHIHARAI_DAIKO_ZIPCD, SHIHARAI_DAIKO_ADR, SHIHARAI_DAIKO_TEL");
- ////				sb.append(" FROM T_SHIHARAI ");
- ////			}
- //			sb.append("SELECT SHIHARAI_DAIKO_NO, SHIHARAI_DAIKO_NAME, SHIHARAI_DAIKO_ZIPCD, SHIHARAI_DAIKO_ADR, SHIHARAI_DAIKO_TEL");
- //			sb.append(" FROM T_SHIHARAI ");
- //			sb.append(" Where SHIHARAI_DAIKO_NO IN (");
- //			sb.append(strWhere);
- //			sb.append(")");
- //			sb.append(" union all ");
- //			sb.append("SELECT SHIHARAI_DAIKO_NO, SHIHARAI_DAIKO_NAME, SHIHARAI_DAIKO_ZIPCD, SHIHARAI_DAIKO_ADR, SHIHARAI_DAIKO_TEL");
- //			sb.append(" FROM T_SHIHARAI ");
- //			sb.append(" Where SHIHARAI_DAIKO_NO NOT IN (");
- //			sb.append(strWhere);
- //			sb.append(")");
- //
- //			result = JApplication.kikanDatabase.sendExecuteQuery(sb.toString());
- //
- //			for (int i = 0; i < result.size(); i++) {
- //				resultItem = result.get(i);
- //
- //				row[0] = resultItem.get("SHIHARAI_DAIKO_NO");
- //				row[1] = resultItem.get("SHIHARAI_DAIKO_NAME");
- //				row[2] = resultItem.get("SHIHARAI_DAIKO_ZIPCD");
- //				row[3] = resultItem.get("SHIHARAI_DAIKO_ADR");
- //				row[4] = resultItem.get("SHIHARAI_DAIKO_TEL");
- //
- //				model.addData(row);
- //			}
- //		} catch (SQLException e) {
- //			e.printStackTrace();
- //			JErrorMessage.show("M5101", this);
- //			return;
- //		}
- //
- //		Vector<JSimpleTableCellPosition> forbitList = new Vector<JSimpleTableCellPosition>();
- //		forbitList.add(new JSimpleTableCellPosition(-1, -1));
- //
- //		model.setCellEditForbid(forbitList);
- //		// edit s.inoue 2009/10/31
- //		model.setAutoCreateRowSorter(true);
- //		model.refreshTable();
- //
- //		// add ver2 s.inoue 2009/05/08
- //		TableColumnModel columns = model.getColumnModel();
- //        for(int i=0;i<columns.getColumnCount();i++) {
- //
- //            columns.getColumn(i).setCellRenderer(new JSimpleTableCellRowRenderer(
- //                (DefaultTableCellRenderer)model.getDefaultRenderer(model.getColumnClass(i))));
- //        }
- //		// 初期選択
- //		if (model.getRowCount() > 0) {
- //			model.setRowSelectionInterval(0, 0);
- //		} else {
- //			jButton_Add.requestFocus();
- //		}
- //	}
  
  	/**
  	 * 終了ボタン
--- 121,126 ----
***************
*** 356,707 ****
  		}
  	}
  
- 	// 未実装部分 edit s.inoue 2010/03/04
- 	/**ImportStart↓↓↓↓↓**********************************************************/
- 	/**
- 	 * 取込ボタン
- 	 */
- 	public void pushedImportButton( ActionEvent e )
- 	{
- 		try {
- 			filePathDialog = DialogFactory.getInstance().createDialog(this ,null);
- 
- 			filePathDialog.setMessageTitle(selectTitle);
- 			filePathDialog.setDialogTitle(selectDialogTitle);
- 			filePathDialog.setEnabled(false);
- 			filePathDialog.setDialogSelect(true);
- 			filePathDialog.setVisible(true);
- 
- 			// edit s.inoue 2010/03/25
- 			if (filePathDialog.getStatus().equals(RETURN_VALUE.CANCEL))
- 				return;
- 
- 			String filePath = filePathDialog.getFilePath();
- 			// add s.inoue 2010/03/05
- 			File fileImport = new File(filePath);
- 			if(!fileImport.exists())
- 				return;
- 			importCsvData(filePath);
- 			// 再描画処理
- 			this.initializeTable();
- 		} catch (Exception ex) {
- 			JErrorMessage.show("M5105",this);
- 			logger.error(ex.getMessage());
- 		}
- 	}
- 
- 	// edit s.inoue 2010/03/04
- 	/* 取込処理 */
- 	private void importCsvData(String filePath){
- 
- 		RETURN_VALUE retValue = JErrorMessage.show("M5107", this);
- 
- 		// cancel時
- 		if (retValue == RETURN_VALUE.NO){
- 			return;
- 		}else if (retValue == RETURN_VALUE.YES){
- 
- 			JImportMasterErrorSiharaiResultFrameData data = new JImportMasterErrorSiharaiResultFrameData();
- 
- 			// CSV読込処理
- 			reader = new JCSVReaderStream();
- 
- 			try {
- 				reader.openCSV(filePath,JApplication.CSV_CHARSET);
- 			} catch (IOException e) {
- 				JErrorMessage.show("M5105",this);
- 				logger.error(e.getMessage());
- 			}
- 
- 			CSVItems = reader.readAllTable();
- 
- 			try {
- 				JApplication.kikanDatabase.Transaction();
- 
- 				int csvCount = CSVItems.size();
- 
- 				if(csvCount == 0){
- 					JErrorMessage.show("M5111",this);
- 					return;
- 				}
- 
- 				// 既存データall削除
- 				shiharaiMasterDelete();
- 
- 				// 検査結果データ取込処理
- 				for (int i = 1; i < csvCount; i++) {
- 
- 					Vector<String> insertRow = new Vector<String>();
- 
- 					insertRow =CSVItems.get(i);
- 
- 					// 属性情報取得 CSVデータをローカル変数にセット(「"」を除去したもの)
- 					setCSVItemsToDB(data,insertRow);
- 
- 					// validate処理
- 					if (!validateData(data))
- 						return;
- 
- 					shiharaiMasterRegister(data);
- 
- 				}
- 
- 				JApplication.kikanDatabase.Commit();
- 
- 				String[] messageParams = {String.valueOf(csvCount-1)};
- 				JErrorMessage.show("M5108",this,messageParams);
- 			} catch (SQLException e) {
- 				try {
- 					JApplication.kikanDatabase.rollback();
- 				} catch (SQLException e1) {}
- 				JErrorMessage.show("M5105",this);
- 				logger.error(e.getMessage());
- 			}
- 		}
- 	}
- 
- 	/* csvデータ取込 */
- 	private void setCSVItemsToDB(JImportMasterErrorSiharaiResultFrameData data,
- 			Vector<String> insertRow){
- 
- 		data.CSV_COLUMN_SHIHARAI_DAIKO_NO = reader.rmQuart(insertRow.get(0));
- 		data.CSV_COLUMN_SHIHARAI_DAIKO_NAME = reader.rmQuart(insertRow.get(1));
- 		data.CSV_COLUMN_SHIHARAI_DAIKO_ZIPCD = reader.rmQuart(insertRow.get(2));
- 		data.CSV_COLUMN_SHIHARAI_DAIKO_ADR = reader.rmQuart(insertRow.get(3));
- 		data.CSV_COLUMN_SHIHARAI_DAIKO_TEL = reader.rmQuart(insertRow.get(4));
- 	}
- 
- 	// edit s.inoue 2010/03/04
- 	/* validate処理 */
- 	private boolean validateData(JImportMasterErrorSiharaiResultFrameData data) {
- 
- 		boolean rettanka = false;
- 		// edit s.inoue 2010/04/27
- 		String address = data.CSV_COLUMN_SHIHARAI_DAIKO_ADR;
- 		if (!JValidate.isAllZenkaku(address)){
- 			address = JZenkakuKatakanaToHankakuKatakana.eisukigoHanToZen(address);
- 		}
- 		address = JValidate.encodeUNICODEtoConvert(address);
- 
- 		rettanka= validatedData.setDaikouNumber(data.CSV_COLUMN_SHIHARAI_DAIKO_NO)
- 			&& validatedData.setDaikouName(data.CSV_COLUMN_SHIHARAI_DAIKO_NAME)
- 			&& validatedData.setZipcode(data.CSV_COLUMN_SHIHARAI_DAIKO_ZIPCD)
- 			&& validatedData.setAddress(address)
- 			&& validatedData.setTEL(data.CSV_COLUMN_SHIHARAI_DAIKO_TEL);
- 		return rettanka;
- 	}
- 
- //	/*
- //	 * 接続処理
- //	 */
- //	private void getconnectDao(){
- //		try {
- //			Connection connection = JApplication.kikanDatabase.getMConnection();
- //		} catch (Exception e) {
- //			logger.error("機関FDBへの接続処理に失敗しました。");
- //			JErrorMessage.show("M3326",this);
- //			return;
- //		}
- //	}
- 
- 	/**
- 	 * 既存保険者削除
- 	 * @throws SQLException
- 	 */
- 	private void shiharaiMasterDelete(){
- 		try {
- 			String query = new String(
- 					"DELETE FROM T_SHIHARAI ");
- 			JApplication.kikanDatabase.sendNoResultQuery(query);
- 		} catch (SQLException e) {
- 			JErrorMessage.show("M5109",this);
- 			e.printStackTrace();
- 			logger.error(e.getMessage());
- 		}
- 	}
- 
- 	/**
- 	 * CSVデータ登録
- 	 * @throws SQLException
- 	 */
- 	private void shiharaiMasterRegister(JImportMasterErrorSiharaiResultFrameData data)
- 		throws SQLException
- 	{
- 		StringBuffer buffer = new StringBuffer();
- 
- 		buffer.append(" INSERT INTO T_SHIHARAI ");
- 		buffer.append(" (SHIHARAI_DAIKO_NO, SHIHARAI_DAIKO_NAME, SHIHARAI_DAIKO_ZIPCD,");
- 		buffer.append("SHIHARAI_DAIKO_ADR, SHIHARAI_DAIKO_TEL ");
- 		buffer.append(" )VALUES( "
- 			+ JQueryConvert.queryConvertAppendComma(validatedData.getDaikouNumber())
- 			+ JQueryConvert.queryConvertAppendBlankAndComma(validatedData.getDaikouName())
- 			+ JQueryConvert.queryConvertAppendBlankAndComma(validatedData.getZipcode())
- 			+ JQueryConvert.queryConvertAppendBlankAndComma(validatedData.getAddress())
- 			+ JQueryConvert.queryConvert(validatedData.getTEL())
- 			+ ")");
- 
- 		JApplication.kikanDatabase.sendNoResultQuery(buffer.toString());
- 
- 	}
- 	/**ImportEnd↑↑↑↑↑**********************************************************/
- 
- 	/**ExportStart↓↓↓↓↓**********************************************************/
- 	/**
- 	 * 書出ボタン
- 	 */
- 	public void pushedExportButton( ActionEvent e )
- 	{
- 		try {
- 			String saveFileName = JPath.createDirectoryUniqueName("SiharaiMaster");
- 
- 			String defaltPath = JPath.getDesktopPath() +
- 			File.separator +
- 			saveFileName;
- 
- 			filePathDialog = DialogFactory.getInstance().createDialog(this,defaltPath);
- 			filePathDialog.setMessageTitle(saveTitle);
- 			filePathDialog.setDialogTitle(savaDialogTitle);
- 			filePathDialog.setEnabled(false);
- 			filePathDialog.setDialogSelect(true);
- 			filePathDialog.setVisible(true);
- 
- 			// edit s.inoue 2010/03/25
- 			if (filePathDialog.getStatus().equals(RETURN_VALUE.CANCEL))
- 				return;
- 
- 			String filePath = filePathDialog.getFilePath();
- 			if (filePath.equals(""))
- 				return;
- 
- 			exportCsvData(filePath);
- 
- 		} catch (Exception ex) {
- 			JErrorMessage.show("M5109", this);
- 			logger.error(ex.getMessage());
- 		}
- 	}
- 
- 	/* export処理 */
- 	private void exportCsvData(String filePath){
- 		JImportMasterErrorSiharaiResultFrameData data = new JImportMasterErrorSiharaiResultFrameData();
- 
- 		// CSV読込処理
- 		writer = new JCSVWriterStream();
- 
- 		try {
- 			writer.writeTable(getExportData());
- 			writer.saveCSV(filePath,JApplication.CSV_CHARSET);
- 		} catch (IOException e) {
- 			JErrorMessage.show("M5110", this);
- 			logger.error(e.getMessage());
- 		}
- 	}
- 
- 	/* DBよりデータ取得*/
- 	private Vector<Vector<String>> getExportData(){
- 
- 		Vector<Vector<String>> newTable = new Vector<Vector<String>>();
- 
- 		ArrayList<Hashtable<String, String>> result
- 			= new ArrayList<Hashtable<String, String>>();
- 
- 		// add s.inoue 2010/03/04
- 		StringBuilder sb = new StringBuilder();
- 		sb.append(" SELECT SHIHARAI_DAIKO_NO, SHIHARAI_DAIKO_NAME,");
- 		sb.append(" SHIHARAI_DAIKO_ZIPCD, SHIHARAI_DAIKO_ADR, SHIHARAI_DAIKO_TEL");
- 		sb.append(" FROM T_SHIHARAI ORDER BY SHIHARAI_DAIKO_NO");
- 
- 		try {
- 			result = JApplication.kikanDatabase.sendExecuteQuery(sb.toString());
- 		} catch (SQLException e) {
- 			e.printStackTrace();
- 			return null;
- 		}
- 
- 		Hashtable<String, String> resultItem = new Hashtable<String, String>();
- 		for( int i=0; i<result.size(); ++i )
- 		{
- 			resultItem = result.get(i);
- 
- 			Vector<String> data = new Vector<String>();
- 
- 			for (int j=0; j<resultItem.size(); ++j){
- 				// 空要素
- 				String exportItem =resultItem.get(TABLE_COLUMNS[j]).trim();
- 
- 				data.add(exportItem);
- 			}
- 
- 			// header設定
- 			if (i==0){
- 				Vector colmn = new Vector<String>();
- 				List l = java.util.Arrays.asList(TABLE_COLUMNS);
- 				for (Iterator item = l.iterator(); item.hasNext();) {
- 					colmn.add((String)item.next());
- 				}
- 				newTable.add(colmn);
- 			}
- 			newTable.add(data);
- 		}
- 		return newTable;
- 	}
- 	/**ExportEnd↑↑↑↑↑**********************************************************/
  	public void actionPerformed(ActionEvent e) {
- 
- 		if (e.getSource() == jButton_Import)
- 		{
- 			logger.info(jButton_Import.getText());
- 			pushedImportButton(e);
- 		}
- 		else if (e.getSource() == jButton_Export)
- 		{
- 			logger.info(jButton_Export.getText());
- 			pushedExportButton(e);
- 		}
- 
  		if (e.getSource() == jButton_End) {
- 			logger.info(jButton_End.getText());
  			pushedEndButton(e);
  		}
  		if (e.getSource() == jButton_Add) {
- 			logger.info(jButton_Add.getText());
  			pushedAddButton(e);
  		}
  		if (e.getSource() == jButton_Change) {
- 			logger.info(jButton_Change.getText());
  			pushedChangeButton(e);
  		}
  		if (e.getSource() == jButton_Delete) {
- 			logger.info(jButton_Delete.getText());
  			pushedDeleteButton(e);
  		}
  	}
  
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 		switch(keyEvent.getKeyCode()){
- 		case KeyEvent.VK_F1:
- 			logger.info(jButton_End.getText());
- 			pushedEndButton(null);break;
- 		// edit s.inoue 2010/03/24
- 		case KeyEvent.VK_F4:
- 			logger.info(jButton_Import.getText());
- 			pushedImportButton(null);break;
- 		case KeyEvent.VK_F5:
- 			logger.info(jButton_Export.getText());
- 			pushedExportButton(null);break;
- 		case KeyEvent.VK_F9:
- 			logger.info(jButton_Add.getText());
- 			pushedAddButton(null);break;
- 		case KeyEvent.VK_F11:
- 			logger.info(jButton_Change.getText());
- 			pushedChangeButton(null);break;
- 		case KeyEvent.VK_F12:
- 			logger.info(jButton_Delete.getText());
- 			pushedDeleteButton(null);break;
- 		}
- 	}
- 
  	/**
  	 * 遷移先の画面から戻ってきた場合
  	 */
--- 186,209 ----
  		}
  	}
  
  	public void actionPerformed(ActionEvent e) {
  		if (e.getSource() == jButton_End) {
  			pushedEndButton(e);
  		}
+ 
  		if (e.getSource() == jButton_Add) {
  			pushedAddButton(e);
  		}
+ 
  		if (e.getSource() == jButton_Change) {
  			pushedChangeButton(e);
  		}
+ 
  		if (e.getSource() == jButton_Delete) {
  			pushedDeleteButton(e);
  		}
  	}
  
  	/**
  	 * 遷移先の画面から戻ってきた場合
  	 */
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JShowResultFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JShowResultFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JShowResultFrame.java	Thu Apr 22 16:34:50 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JShowResultFrame.java	Fri Oct  9 10:07:46 2009
***************
*** 15,21 ****
  import javax.swing.JScrollPane;
  import javax.swing.BorderFactory;
  import java.awt.event.*;
- 
  import javax.swing.border.EtchedBorder;
  
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedButton;
--- 15,20 ----
***************
*** 38,44 ****
   *
   * Modified 2008/03/19 若月 画面コンポーネント共通化　
   */
! public class JShowResultFrame extends JFrame implements ActionListener,KeyListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
--- 37,43 ----
   *
   * Modified 2008/03/19 若月 画面コンポーネント共通化　
   */
! public class JShowResultFrame extends JFrame implements ActionListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
***************
*** 189,195 ****
  //			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  //			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
--- 188,194 ----
  //			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  //			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
***************
*** 595,601 ****
  	private ExtendedButton getJButton_Print() {
  		if (jButton_Print == null) {
  			jButton_Print = new ExtendedButton();
! 			jButton_Print.setText("通知表印刷(F11)");
  //			jButton_Print.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Print.addActionListener(this);
  		}
--- 594,600 ----
  	private ExtendedButton getJButton_Print() {
  		if (jButton_Print == null) {
  			jButton_Print = new ExtendedButton();
! 			jButton_Print.setText("印刷");
  //			jButton_Print.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Print.addActionListener(this);
  		}
***************
*** 610,616 ****
  	private ExtendedButton getJButton_Fix() {
  		if (jButton_Fix == null) {
  			jButton_Fix = new ExtendedButton();
! 			jButton_Fix.setText("修正(F12)");
  //			jButton_Fix.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Fix.addActionListener(this);
  		}
--- 609,615 ----
  	private ExtendedButton getJButton_Fix() {
  		if (jButton_Fix == null) {
  			jButton_Fix = new ExtendedButton();
! 			jButton_Fix.setText("修正");
  //			jButton_Fix.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Fix.addActionListener(this);
  		}
***************
*** 780,786 ****
  	private ExtendedButton getJButton_Next() {
  		if (jButton_Next == null) {
  			jButton_Next = new ExtendedButton();
! 			jButton_Next.setText("次のデータ(F9)");
  //			jButton_Next.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Next.addActionListener(this);
  		}
--- 779,785 ----
  	private ExtendedButton getJButton_Next() {
  		if (jButton_Next == null) {
  			jButton_Next = new ExtendedButton();
! 			jButton_Next.setText("次のデータ");
  //			jButton_Next.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Next.addActionListener(this);
  		}
***************
*** 795,801 ****
  	private ExtendedButton getJButton_Prev() {
  		if (jButton_Prev == null) {
  			jButton_Prev = new ExtendedButton();
! 			jButton_Prev.setText("前のデータ(F7)");
  //			jButton_Prev.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Prev.addActionListener(this);
  		}
--- 794,800 ----
  	private ExtendedButton getJButton_Prev() {
  		if (jButton_Prev == null) {
  			jButton_Prev = new ExtendedButton();
! 			jButton_Prev.setText("前のデータ");
  //			jButton_Prev.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Prev.addActionListener(this);
  		}
***************
*** 973,994 ****
  		}
  		return jPanel5;
  	}
- 
- 	@Override
- 	public void keyPressed(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyReleased(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyTyped(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
  }
\ No newline at end of file
--- 972,975 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JShowResultFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JShowResultFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JShowResultFrameCtrl.java	Thu Apr 29 13:47:00 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JShowResultFrameCtrl.java	Wed Feb 24 17:45:24 2010
***************
*** 8,14 ****
  import java.text.DecimalFormat;
  import java.util.*;
  
- import javax.swing.JButton;
  import javax.swing.JCheckBox;
  import javax.swing.JComboBox;
  import javax.swing.JComponent;
--- 8,13 ----
***************
*** 144,161 ****
  		refresh();
  		// テーブル初期化
  		initializeSetting();
- 
- 		// edit s.inoue 2010/04/29
- 		if (curIndex > 0) {
- 			jButton_Prev.setEnabled(true);
- 		}else if (curIndex == 0){
- 			jButton_Prev.setEnabled(false);
- 		}
- 		if (curIndex < kojinData.size() - 1) {
- 			jButton_Next.setEnabled(true);
- 		}else if (curIndex == kojinData.size() - 1){
- 			jButton_Next.setEnabled(false);
- 		}
  	}
  
  	/**
--- 143,148 ----
***************
*** 206,224 ****
  		String kensaNengapi = kojinDataItem.get("KENSA_NENGAPI");
  		String hokenjyaNo = kojinDataItem.get("HKNJANUM");
  
- 		// add s.inoue 2009/12/24
- 		// A4-1枚,2枚選択
- 		pageSelectDialog = DialogFactory.getInstance().createDialog(this);
- 		// 印刷方法選択ダイアログを表示
- 		pageSelectDialog.setMessageTitle("印刷方法選択画面");
- 		pageSelectDialog.setVisible(true);
- 
- 		int pageSelect = (pageSelectDialog.getPrintSelect()==2) ?2:1;
  
  		/* 健診結果通知表を印刷する。 */
  		PrintKekka kekka = new PrintKekka();
  		kekka.printResultCard(kensaNengapi, uketukeId, hihokenjyasyoKigou,
! 				hihokenjyasyoNo, hokenjyaNo, this, pageSelect);
  	}
  
  	/**
--- 193,204 ----
  		String kensaNengapi = kojinDataItem.get("KENSA_NENGAPI");
  		String hokenjyaNo = kojinDataItem.get("HKNJANUM");
  
  
  		/* 健診結果通知表を印刷する。 */
  		PrintKekka kekka = new PrintKekka();
  		kekka.printResultCard(kensaNengapi, uketukeId, hihokenjyasyoKigou,
! 				hihokenjyasyoNo, hokenjyaNo, this);
! 
  	}
  
  	/**
***************
*** 423,430 ****
  	    modelfixed.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
  
  	    initilizeFocus();
- 		// add s.inoue 2009/12/01
- 		functionListner();
  
          final JScrollPane scroll = new JScrollPane(table);
          JViewport viewport = new JViewport();
--- 403,408 ----
***************
*** 556,594 ****
  		this.focusTraversalPolicy.addComponent(jButton_End);
  	}
  
- 	// add s.inoue 2009/12/01
- 	private void functionListner(){
- 		Component comp = null;
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			comp = focusTraversalPolicy.getComponent(i);
- 			comp.addKeyListener(this);
- 		}
- 		table.addKeyListener(this);
- 		modelfixed.addKeyListener(this);
- 	}
- 
- 	// add s.inoue 2009/12/01
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 		switch(keyEvent.getKeyCode()){
- 		case KeyEvent.VK_F1:
- 			logger.info(jButton_End.getText());
- 			dispose();break;
- 		case KeyEvent.VK_F7:
- 			logger.info(jButton_Prev.getText());
- 			pushedPrevButton(null);break;
- 		case KeyEvent.VK_F9:
- 			logger.info(jButton_Next.getText());
- 			pushedNextButton(null);break;
- 		case KeyEvent.VK_F11:
- 			logger.info(jButton_Print.getText());
- 			pushedPrintButton(null);break;
- 		case KeyEvent.VK_F12:
- 			logger.info(jButton_Fix.getText());
- 			pushedFixButton(null);break;
- 		}
- 	}
- 
  	/**
  	 * DAOのセットアップ
  	 */
--- 534,539 ----
***************
*** 927,929 ****
--- 872,1706 ----
  //Source Code Version Tag System v1.00  -- Do not remove --
  //Product-Tag: {4F85C2F4EE-5847B3BB7A9-ADC5AC59E3-EF66F79A1}
  
+ 
+ //package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
+ //
+ //import java.awt.event.*;
+ //import java.math.BigDecimal;
+ //import java.sql.Connection;
+ //import java.sql.SQLException;
+ //import java.text.DecimalFormat;
+ //import java.util.*;
+ //
+ //import javax.swing.JComboBox;
+ //import javax.swing.JComponent;
+ //import javax.swing.JEditorPane;
+ //import javax.swing.JScrollPane;
+ //import javax.swing.JTextField;
+ //import javax.swing.JViewport;
+ //
+ //import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
+ //import jp.or.med.orca.jma_tokutei.common.table.JSimpleTable;
+ //import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellPosition;
+ //import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableScrollPanel;
+ //import jp.or.med.orca.jma_tokutei.common.validate.JValidate;
+ //import jp.or.med.orca.jma_tokutei.common.app.JApplication;
+ //import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.print.PrintKekka;
+ //import jp.or.med.orca.jma_tokutei.common.scene.JScene;
+ //import jp.or.med.orca.jma_tokutei.common.sql.dao.DaoFactory;
+ //import jp.or.med.orca.jma_tokutei.common.sql.dao.JShowResultFrameDao;
+ //import jp.or.med.orca.jma_tokutei.common.sql.dao.TDataTypeCodeDao;
+ //import jp.or.med.orca.jma_tokutei.common.sql.dao.TKensakekaSonotaDao;
+ //import jp.or.med.orca.jma_tokutei.common.sql.dao.TKensakekaTokuteiDao;
+ //import jp.or.med.orca.jma_tokutei.common.sql.model.JShowResultFrameModel;
+ //import jp.or.med.orca.jma_tokutei.common.sql.model.TDataTypeCode;
+ //import jp.or.med.orca.jma_tokutei.common.sql.model.TKensakekaSonota;
+ //import jp.or.med.orca.jma_tokutei.common.sql.model.TKensakekaTokutei;
+ //
+ //import javax.swing.event.ChangeEvent;
+ //import javax.swing.event.ChangeListener;
+ //import javax.swing.table.DefaultTableCellRenderer;
+ //import javax.swing.table.DefaultTableColumnModel;
+ //import javax.swing.table.TableColumnModel;
+ //
+ //import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellRowRenderer;
+ //
+ ////add h.yoshitama 2009/09/30
+ //import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
+ //
+ ///**
+ // * 健診結果表示画面制御　
+ // */
+ //public class JShowResultFrameCtrl extends JShowResultFrame {
+ //	// edit h.yoshitama 2009/09/02
+ ////	private static final String[] header = { "項目名", "検査方法", "結果（数値）",
+ ////			"結果（コード）", "結果（文字列）", "実施区分","基準値下限(男性)", "基準値上限(男性)", "基準値下限(女性)",
+ ////			"基準値上限(女性)", "H/L", "判定", "コメント", "入力下限値", "入力上限値" };
+ //
+ //	// edit h.yoshitama 2009/11/09
+ //	private static final int[] DEFAULT_COLUMNSFIX_WIDTH = new int[] {
+ //		140, 140};
+ //	// edit h.yoshitama 2009/11/09
+ //	private static final int[] DEFAULT_COLUMNS_WIDTH = new int[] {
+ //		80, 80, 80, 80, 80, 80, 80, 80, 50, 120, 120};
+ //
+ //	// edit s.inoue 2009/10/12
+ //	// 固定項目変更
+ //	private static final String[] solidheader = { "項目名", "検査方法"};
+ //	private static final String[] header = { "結果（数値）","結果（コード）", "結果（文字列）" ,
+ //		"実施区分","基準値下限(男性)", "基準値上限(男性)", "基準値下限(女性)",
+ //		"基準値上限(女性)", "H/L", "判定", "コメント", "入力下限値", "入力上限値" };
+ //	// edit s.inoue 20080910
+ //	private static final String[] fieldKeys = { "KOUMOKU_NAME", "KENSA_HOUHOU",
+ //			"KEKA_TI_DECIMAL", "KEKA_TI_CODE", "KEKA_TI_STRING", "JISI_KBN","DS_KAGEN",
+ //			"DS_JYOUGEN", "JS_KAGEN", "JS_JYOUGEN", "H_L", "HANTEI", "KOMENT",
+ //			"KAGEN", "JYOUGEN" };
+ //
+ //	private static final String[] hokenShidouLevelTable = { "未判定", "積極的支援",
+ //			"動機づけ支援",
+ ////			"情報提供",
+ //			"なし（情報提供）",
+ //			"判定不能" };
+ //
+ //	private static final String[] metaboHanteiTable = { "未判定", "基準該当",
+ //			"予備群該当",
+ //			"非該当", "判定不能" };
+ //
+ //	/**
+ //	 * メタボ判定の項目コード
+ //	 */
+ //	private static final String METABO_HANTEI_KOUMOKU_CD = "9N501000000000011";
+ //
+ //	/**
+ //	 * 保健指導レベルの項目コード
+ //	 */
+ //	private static final String HOKEN_LEVEL_KOUMOKU_CD = "9N506000000000011";  //  @jve:decl-index=0:
+ //	private JSimpleTable model = new JSimpleTable();
+ //	// add h.yoshitama 2009/09/02
+ //	private JSimpleTable modelfixed = new JSimpleTable();
+ //
+ //	private Map<String, JComponent> fieldComponentMap;  //  @jve:decl-index=0:
+ //	private List<TDataTypeCode> dataTypeCodes;
+ //	private List<Map<String, String>> kojinData;
+ //	private int curIndex;
+ //	Vector<JSimpleTableCellPosition> forbitCells = new Vector<JSimpleTableCellPosition>();
+ //	private JShowResultFrameDao jShowResultFrameDao = null;
+ //	private TKensakekaSonotaDao kensakekaSonotaDao = null;  //  @jve:decl-index=0:
+ //	private TKensakekaTokuteiDao kensakekaTokuteiDao = null;
+ //	private TDataTypeCodeDao dataTypeCodeDao = null;
+ //	/** 健診パターン番号 */
+ //	private int kenshinPatternNumber = 0;
+ //
+ //	// add h.yoshitama 2009/09/30
+ //	private JFocusTraversalPolicy focusTraversalPolicy = null;
+ //
+ //	/**
+ //	 * コンストラクタ
+ //	 * @param recordList 検索結果レコードリスト
+ //	 * @param curIndex   前画面で選択されたレコードのインデックス
+ //	 */
+ //	public JShowResultFrameCtrl(List<Map<String, String>> recordList,
+ //			int curIndex) {
+ //		kojinData = recordList;
+ //		this.curIndex = curIndex;
+ //
+ //		// コンポーネントのセットアップ
+ //		setUpComponent();
+ //		// DAOセットアップ
+ //		setUpDao();
+ //		// 表示
+ //		refresh();
+ //	}
+ //
+ //	/**
+ //	 * 終了ボタン押下時コールバック
+ //	 * @param e アクションイベント
+ //	 */
+ //	public void pushedEndButton(ActionEvent e) {
+ //		dispose();
+ //	}
+ //
+ //	/*
+ //	 * 印刷機能
+ //	 * 特定健診結果通知
+ //	 * import Print.*;
+ //	 * import PrintData.*;
+ //	 *
+ //	 * 1ページ
+ //	 * 表紙
+ //	 * 必須データ：受診日、被保険者証等記号、被保険者証等番号
+ //	 * import	Print.Kekka_P1
+ //	 * class	Kekka_P1
+ //	 *
+ //	 * 2ページ
+ //	 * 健診結果（詳細）
+ //	 * 必須データ：受診日、被保険者証等記号、被保険者証等番号
+ //	 * import	Print.Kekka_P2
+ //	 * class	Kekka_P2
+ //	 *
+ //	 * 3ページ
+ //	 * 健診結果（一覧）
+ //	 * 必須データ：受診日、被保険者証等記号、被保険者証等番号
+ //	 * import	Print.Kekka_P3
+ //	 * class	Kekka_P3
+ //	 *
+ //	 *
+ //	 * 4ページ
+ //	 * 健診結果（問診）
+ //	 * 必須データ：受診日、被保険者証等記号、被保険者証等番号
+ //	 * import	Print.Kekka_P4
+ //	 * class	Kekka_P4
+ //	 *
+ //	 */
+ //	public void pushedPrintButton(ActionEvent e) {
+ //		Map<String, String> kojinDataItem = kojinData.get(curIndex);
+ //		String uketukeId = kojinDataItem.get("UKETUKE_ID");
+ //		String hihokenjyasyoKigou = kojinDataItem.get("HIHOKENJYASYO_KIGOU");
+ //		String hihokenjyasyoNo = kojinDataItem.get("HIHOKENJYASYO_NO");
+ //		String kensaNengapi = kojinDataItem.get("KENSA_NENGAPI");
+ //		String hokenjyaNo = kojinDataItem.get("HKNJANUM");
+ //
+ //		/* 健診結果通知表を印刷する。 */
+ //		PrintKekka kekka = new PrintKekka();
+ //		kekka.printResultCard(kensaNengapi, uketukeId, hihokenjyasyoKigou,
+ //				hihokenjyasyoNo, hokenjyaNo, this);
+ //	}
+ //
+ //	/**
+ //	 * 修正ボタン押下時コールバック
+ //	 * @param アクションイベント
+ //	 */
+ //	public void pushedFixButton(ActionEvent e) {
+ //		JKekkaListFrameData srcData = new JKekkaListFrameData();
+ //
+ //		Map<String, String> map = kojinData.get(curIndex);
+ //
+ //		String uketukeId = map.get("UKETUKE_ID");
+ //		String kigou = map.get("HIHOKENJYASYO_KIGOU");
+ //		String no = map.get("HIHOKENJYASYO_NO");
+ //		String kanaName = map.get("KANANAME");
+ //		String hokenjaNumber = map.get("HKNJANUM");
+ //
+ //		String sex = map.get("SEX");
+ //		String birthDay = map.get("BIRTHDAY");
+ //		String age = map.get("");
+ //
+ //		srcData.setUketuke_id(uketukeId);
+ //		srcData.setHihokenjyaCode(kigou);
+ //		srcData.setHihokenjyaNumber(no);
+ //		srcData.setName(kanaName);
+ //		srcData.setHokenjyaNumber(hokenjaNumber);
+ //		srcData.setSex(sex);
+ //		srcData.setBirthDay(birthDay);
+ //
+ //		JScene.CreateDialog(
+ //				this,
+ //				new JKekkaRegisterFrameCtrl(
+ //						srcData,
+ //						// edit ver2 s.inoue 2009/08/26
+ //						this.jTextField_Date.getText(),
+ //						// map.get("KENSA_NENGAPI"),
+ //						false),
+ //				new WindowRefreshEvent());
+ //	}
+ //
+ //	/**
+ //	 * 次ボタン押下時コールバック
+ //	 * @param e アクションイベント
+ //	 */
+ //	public void pushedNextButton(ActionEvent e) {
+ //		if (curIndex < kojinData.size() - 1) {
+ //			curIndex++;
+ //			refresh();
+ //		}
+ //	}
+ //
+ //	/**
+ //	 * 前ボタン押下時コールバック
+ //	 * @param e アクションイベント
+ //	 */
+ //	public void pushedPrevButton(ActionEvent e) {
+ //		if (curIndex > 0) {
+ //			curIndex--;
+ //			refresh();
+ //		}
+ //	}
+ //
+ //	/**
+ //	 * 遷移先の画面から戻ってきた場合
+ //	 */
+ //	public class WindowRefreshEvent extends WindowAdapter {
+ //		public void windowClosed(WindowEvent e) {
+ //			//テーブルの再読み込みを行う
+ //			model.clearAllRow();
+ //			// add 2009/09/02
+ //			modelfixed.clearAllRow();
+ //
+ //			refresh();
+ //		}
+ //	}
+ //
+ //	/**
+ //	 * アクションイベントコールバック
+ //	 * @param e アクションイベント
+ //	 */
+ //	public void actionPerformed(ActionEvent e) {
+ //		Object soruce = (e.getSource());
+ //		if (soruce == jButton_End) {
+ //			pushedEndButton(e);
+ //		}
+ //
+ //		else if (soruce == jButton_Print) {
+ //			pushedPrintButton(e);
+ //		}
+ //
+ //		else if (soruce == jButton_Fix) {
+ //			pushedFixButton(e);
+ //		}
+ //
+ //		else if (soruce == jButton_Next) {
+ //			pushedNextButton(e);
+ //		}
+ //
+ //		else if (soruce == jButton_Prev) {
+ //			pushedPrevButton(e);
+ //		}
+ //	}
+ //
+ //	/**
+ //	 * 画面の各コンポーネントのプロパティを設定し、
+ //	 * コンポーネントをウインドウ上に配置する
+ //	 */
+ //	private void setUpComponent() {
+ //
+ //		//保健指導レベルコンボボックスの初期設定
+ //		for (String item : hokenShidouLevelTable) {
+ //			jComboBox_HokenSidouLevel.addItem(item);
+ //		}
+ //		//メタボリックシンドローム判定コンボボックスの初期設定
+ //		for (String item : metaboHanteiTable) {
+ //			jComboBox_MetaboHantei.addItem(item);
+ //		}
+ //
+ //		// TextField,EditorPaneを編集不可に設定する
+ //		jTextField_HihokenjyaCode.setEditable(false);
+ //		jTextField_HihokenjyaNumber.setEditable(false);
+ //		jTextField_Name.setEditable(false);
+ //		jTextField_PatternName.setEditable(false);
+ //		jTextField_KensaCenterName.setEditable(false);
+ //		jTextField_Date.setEditable(false);
+ //		jEditorPane_Comment.setEditable(false);
+ //
+ //		// レコードフィールド名とデータをセットするコンポーネントを
+ //		// 関連付けるマップを生成する
+ //		fieldComponentMap = new HashMap<String, JComponent>();
+ //		fieldComponentMap.put("HIHOKENJYASYO_KIGOU", jTextField_HihokenjyaCode);
+ //		fieldComponentMap.put("HIHOKENJYASYO_NO", jTextField_HihokenjyaNumber);
+ //		fieldComponentMap.put("KANANAME", jTextField_Name);
+ //		fieldComponentMap.put("K_P_NO", jTextField_PatternName);
+ //		fieldComponentMap.put("KENSA_CENTER_CD", jTextField_KensaCenterName);
+ //		fieldComponentMap.put("KENSA_NENGAPI", jTextField_Date);
+ //
+ //		forbitCells.add(new JSimpleTableCellPosition(-1, -1));
+ //		// edit h.yoshitama 2009/09/02
+ //		//JSimpleTableScrollPanel scroll = new JSimpleTableScrollPanel(model);
+ //		final JScrollPane scroll = new JScrollPane(model);
+ //
+ //		model.setCellEditForbid(forbitCells);
+ //		// add h.yoshitama 2009/09/30
+ //		modelfixed.setCellEditForbid(forbitCells);
+ //		model.addHeader(header);
+ //		// add h.yoshitama 2009/09/02
+ //		modelfixed.addHeader(solidheader);
+ //
+ //		// add h.yoshitama 2009/09/02
+ //		/* 列の幅を初期化する。 */
+ //		this.modelfixed.setPreferedColumnWidths(DEFAULT_COLUMNSFIX_WIDTH);
+ //		this.model.setPreferedColumnWidths(DEFAULT_COLUMNS_WIDTH);
+ //
+ //		this.model.refreshTable();
+ //		this.modelfixed.refreshTable();
+ //
+ //
+ //		// add h.yoshitama 2009/09/30
+ //		this.focusTraversalPolicy = new JFocusTraversalPolicy();
+ //		this.setFocusTraversalPolicy(this.focusTraversalPolicy);
+ //		this.focusTraversalPolicy.setDefaultComponent(jButton_Prev);
+ //		this.focusTraversalPolicy.addComponent(jButton_Prev);
+ //		this.focusTraversalPolicy.addComponent(jButton_Next);
+ //		this.focusTraversalPolicy.addComponent(jButton_Print);
+ //		this.focusTraversalPolicy.addComponent(jButton_Fix);
+ //		this.focusTraversalPolicy.addComponent(jButton_End);
+ //
+ //		// add h.yoshitama 2009/09/02
+ //		JViewport viewport = new JViewport();
+ //		viewport.setView(modelfixed);
+ //		viewport.setPreferredSize(modelfixed.getPreferredSize());
+ //		scroll.setRowHeader(viewport);
+ //
+ //		scroll.setCorner(JScrollPane.UPPER_LEFT_CORNER, modelfixed.getTableHeader());
+ //
+ //		scroll.getRowHeader().addChangeListener(new ChangeListener() {
+ //			  public void stateChanged(ChangeEvent e) {
+ //			    JViewport viewport = (JViewport) e.getSource();
+ //			    scroll.getVerticalScrollBar().setValue(viewport.getViewPosition().y);
+ //			  }
+ //			});
+ //		jPanel_TableArea.add(scroll);
+ //
+ //		// add h.yoshitama 2009/09/02
+ //		modelfixed.setSelectionModel(model.getSelectionModel());
+ //// edit s.inoue 2010/02/02
+ ////		modelfixed.getColumnModel().getColumn(0).setResizable(false);
+ ////		modelfixed.getColumnModel().getColumn(1).setResizable(false);
+ //
+ ////		modelfixed.getColumnModel().getColumn(2).setResizable(false);
+ ////		modelfixed.getColumnModel().getColumn(3).setResizable(false);
+ ////		modelfixed.getColumnModel().getColumn(4).setResizable(false);
+ //
+ //		// add ver2 s.inoue 2009/05/08
+ //		TableColumnModel columns = model.getColumnModel();
+ //        for(int i=0;i<columns.getColumnCount();i++) {
+ //
+ //            columns.getColumn(i).setCellRenderer(new JSimpleTableCellRowRenderer(
+ //                (DefaultTableCellRenderer)model.getDefaultRenderer(model.getColumnClass(i))));
+ //        }
+ //        // edit h.yoshitama 2009/09/02
+ //        TableColumnModel columnsfix = modelfixed.getColumnModel();
+ //        for(int i=0;i<columnsfix.getColumnCount();i++) {
+ //
+ //        	columnsfix.getColumn(i).setCellRenderer(new JSimpleTableCellRowRenderer(
+ //        			(DefaultTableCellRenderer)modelfixed.getDefaultRenderer(modelfixed.getColumnClass(i))));
+ //        }
+ //	}
+ //
+ //	/**
+ //	 * DAOのセットアップ
+ //	 */
+ //	private void setUpDao() {
+ //
+ //		Connection con = null;
+ //		try {
+ //			con = JApplication.kikanDatabase.getMConnection();
+ //			jShowResultFrameDao = (JShowResultFrameDao) DaoFactory.createDao(
+ //					con, new JShowResultFrameModel());
+ //			kensakekaSonotaDao = (TKensakekaSonotaDao) DaoFactory.createDao(
+ //					con, new TKensakekaSonota());
+ //			dataTypeCodeDao = (TDataTypeCodeDao) DaoFactory.createDao(con,
+ //					new TDataTypeCode());
+ //
+ //			kensakekaTokuteiDao = (TKensakekaTokuteiDao) DaoFactory.createDao(
+ //					con, new TKensakekaTokutei());
+ //		} catch (Exception e) {
+ //			e.printStackTrace();
+ //		}
+ //	}
+ //
+ //	/**
+ //	 * データ表示
+ //	 */
+ //	private void refresh() {
+ //
+ //		Map<String, String> recordMap = kojinData.get(curIndex);
+ //		if (recordMap == null)
+ //			return;
+ //
+ //		String uketukeId = recordMap.get("UKETUKE_ID");
+ //
+ //		// 検査特定レコード関連のコンポーネントにデータをセット
+ //		setUpKensaTokuteiComponents(recordMap);
+ //
+ //		// 健診パターン・検査センターテキストフィールドにデータをセット
+ //		setUpRecordKpNameCenterName(uketukeId);
+ //		// メタボ判定コンボボックスにデータをセット
+ //		setUpRecordMetaboHokenShidou(uketukeId,METABO_HANTEI_KOUMOKU_CD, jComboBox_MetaboHantei);
+ //		// 保健指導レベルコンボボックスにデータをセット
+ //		setUpRecordMetaboHokenShidou(uketukeId,HOKEN_LEVEL_KOUMOKU_CD, jComboBox_HokenSidouLevel);
+ //		// コメント欄設定
+ //		this.setUpKoment(uketukeId, this.jEditorPane_Comment);
+ //
+ //// edit ver2 s.inoue 2009/08/26
+ ////		String kensaNengapi = recordMap.get("KENSA_NENGAPI");
+ ////
+ ////		if (kensaNengapi == null) {
+ ////			JErrorMessage.show("M3532", this);
+ ////			return;
+ ////		}
+ ////
+ ////		// 検査特定レコード関連のコンポーネントにデータをセット
+ ////		setUpKensaTokuteiComponents(recordMap);
+ ////		// 健診パターン・検査センターテキストフィールドにデータをセット
+ ////		setUpRecordKpNameCenterName(uketukeId, kensaNengapi);
+ ////		// メタボ判定コンボボックスにデータをセット
+ ////		setUpRecordMetaboHokenShidou(uketukeId, kensaNengapi,
+ ////				METABO_HANTEI_KOUMOKU_CD, jComboBox_MetaboHantei);
+ ////		// 保健指導レベルコンボボックスにデータをセット
+ ////		setUpRecordMetaboHokenShidou(uketukeId, kensaNengapi,
+ ////				HOKEN_LEVEL_KOUMOKU_CD, jComboBox_HokenSidouLevel);
+ ////
+ ////		this.setUpKoment(uketukeId, kensaNengapi, this.jEditorPane_Comment);
+ //
+ //		// テーブルにレコードをセット
+ //		setUpRecordTable(recordMap);
+ //	}
+ //
+ //	/**
+ //	 * 検査特定レコード関連コンポーネントにデータをセット
+ //	 * @param recordMap レコードマップ(キー : フィールド名 値 : フィールド値)
+ //	 */
+ //	private void setUpKensaTokuteiComponents(Map<String, String> recordMap) {
+ //		for (String fieldName : recordMap.keySet()) {
+ //			JComponent component = fieldComponentMap.get(fieldName);
+ //			String value = recordMap.get(fieldName);
+ //
+ //			if (component instanceof JTextField) {
+ //				JTextField text = (JTextField) component;
+ //				text.setText(value);
+ //			} else if (component instanceof JEditorPane) {
+ //				JEditorPane pane = (JEditorPane) component;
+ //				pane.setText(value);
+ //			}
+ //		}
+ //	}
+ //
+ //	// edit ver2 s.inoue 2009/08/26
+ //	// 健診実施日を除く
+ //	/**
+ //	 * 健診パターン・検査センタ名にデータをセット
+ //	 * @param uketukeId 受付ID
+ //	 * @param kensaNengapi 検査実施年月日
+ //	 */
+ //	private void setUpRecordKpNameCenterName(String uketukeId) {
+ //
+ //		Long uketukeIdValue = null;
+ //
+ //		try {
+ //			uketukeIdValue = new Long(uketukeId);
+ //		} catch (NumberFormatException e) {
+ //		}
+ //
+ //		JShowResultFrameModel recordModel = null;
+ //		try {
+ //			recordModel = jShowResultFrameDao.selectKpNameCenterName(uketukeIdValue, null);
+ //		} catch (SQLException e) {
+ //			e.printStackTrace();
+ //		}
+ //
+ //		if (recordModel == null) {
+ //			return;
+ //		}
+ //
+ //		jTextField_PatternName.setText(recordModel.getK_P_NAME());
+ //		jTextField_KensaCenterName.setText(recordModel.getCENTER_NAME());
+ //
+ //		kenshinPatternNumber = recordModel.getK_P_NO();
+ //	}
+ //
+ ////	private void setUpRecordKpNameCenterName(String uketukeId,String kensaNengapi) {
+ ////
+ ////		Long uketukeIdValue = null;
+ ////		Integer kensaNengapiValue = null;
+ ////
+ ////		try {
+ ////			uketukeIdValue = new Long(uketukeId);
+ ////			kensaNengapiValue = new Integer(kensaNengapi);
+ ////		} catch (NumberFormatException e) {
+ ////		}
+ ////
+ ////		JShowResultFrameModel recordModel = null;
+ ////		try {
+ ////			recordModel = jShowResultFrameDao.selectKpNameCenterName(
+ ////					uketukeIdValue, kensaNengapiValue, null);
+ ////		} catch (SQLException e) {
+ ////			e.printStackTrace();
+ ////		}
+ ////
+ ////		if (recordModel == null) {
+ ////			return;
+ ////		}
+ ////
+ ////		jTextField_PatternName.setText(recordModel.getK_P_NAME());
+ ////		jTextField_KensaCenterName.setText(recordModel.getCENTER_NAME());
+ ////
+ ////		kenshinPatternNumber = recordModel.getK_P_NO();
+ ////	}
+ //
+ //	// edit ver2 s.inoue 2009/08/26
+ //	/**
+ //	 * メタボ判定・保健指導レベルコンボボックスにデータをセット
+ //	 * @param uketukeId 受付ID
+ //	 * @param kensaNengapi 検査実施年月日
+ //	 * @param koumokuCd メタボ判定・保険指導レベル項目コード
+ //	 * @param cmb メタボ判定・保険指導レベルコンボボックス
+ //	 */
+ //	private void setUpRecordMetaboHokenShidou(String uketukeId,
+ //			String koumokuCd, JComboBox cmb) {
+ //
+ //		Long uketukeIdValue = null;
+ //
+ //		try {
+ //			uketukeIdValue = new Long(uketukeId);
+ //		} catch (NumberFormatException e) {
+ //		}
+ //
+ //		TKensakekaSonota recordModel = null;
+ //		try {
+ //			recordModel = kensakekaSonotaDao.selectByPrimaryKey(uketukeIdValue,koumokuCd);
+ //		} catch (Exception e) {
+ //			e.printStackTrace();
+ //		}
+ //
+ //		if (recordModel == null)
+ //			return;
+ //
+ //		String keka_ti = recordModel.getKEKA_TI();
+ //		Integer value = new Integer(0);
+ //		try {
+ //			value = new Integer(keka_ti);
+ //		} catch (NumberFormatException e) {
+ //		}
+ //		cmb.setSelectedIndex(value);
+ //	}
+ ////	private void setUpRecordMetaboHokenShidou(String uketukeId,
+ ////			String kensaNengapi, String koumokuCd, JComboBox cmb) {
+ ////
+ ////		Long uketukeIdValue = null;
+ ////		Integer kensaNengapiValue = null;
+ ////
+ ////		try {
+ ////			uketukeIdValue = new Long(uketukeId);
+ ////			kensaNengapiValue = new Integer(kensaNengapi);
+ ////		} catch (NumberFormatException e) {
+ ////		}
+ ////
+ ////		TKensakekaSonota recordModel = null;
+ ////		try {
+ ////			recordModel = kensakekaSonotaDao.selectByPrimaryKey(uketukeIdValue,
+ ////					kensaNengapiValue, koumokuCd);
+ ////		} catch (Exception e) {
+ ////			e.printStackTrace();
+ ////		}
+ ////
+ ////		if (recordModel == null)
+ ////			return;
+ ////
+ ////		String keka_ti = recordModel.getKEKA_TI();
+ ////		Integer value = new Integer(0);
+ ////		try {
+ ////			value = new Integer(keka_ti);
+ ////		} catch (NumberFormatException e) {
+ ////		}
+ ////		cmb.setSelectedIndex(value);
+ ////	}
+ //
+ //	// edit ver2 s.inoue 2009/08/26
+ //	private void setUpKoment(String uketukeId,JEditorPane komentPane){
+ //
+ //		Long uketukeIdValue = null;
+ //
+ //		try {
+ //			uketukeIdValue = new Long(uketukeId);
+ //		} catch (NumberFormatException e) {
+ //		}
+ //
+ //		TKensakekaTokutei recordModel = null;
+ //		try {
+ //			// edit ver2 s.inoue 2009/08/26
+ //			recordModel = kensakekaTokuteiDao.selectByPrimaryKey(uketukeIdValue);
+ //		} catch (Exception e) {
+ //			e.printStackTrace();
+ //		}
+ //
+ //		if (recordModel == null)
+ //			return;
+ //
+ //		String komento = recordModel.getKOMENTO();
+ //		komentPane.setText(komento);
+ //	}
+ ////	private void setUpKoment(String uketukeId, String kensaNengapi,
+ ////			JEditorPane komentPane){
+ ////
+ ////		Long uketukeIdValue = null;
+ ////		Integer kensaNengapiValue = null;
+ ////
+ ////		try {
+ ////			uketukeIdValue = new Long(uketukeId);
+ ////			kensaNengapiValue = new Integer(kensaNengapi);
+ ////		} catch (NumberFormatException e) {
+ ////		}
+ ////
+ ////		TKensakekaTokutei recordModel = null;
+ ////		try {
+ ////			recordModel = kensakekaTokuteiDao.selectByPrimaryKey(
+ ////					uketukeIdValue,
+ ////					kensaNengapiValue);
+ ////		} catch (Exception e) {
+ ////			e.printStackTrace();
+ ////		}
+ ////
+ ////		if (recordModel == null)
+ ////			return;
+ ////
+ ////		String komento = recordModel.getKOMENTO();
+ ////		komentPane.setText(komento);
+ ////	}
+ //	/**
+ //	 * テーブルにレコードをセット
+ //	 * @param recordMap 現在の表示対象レコードのマップ
+ //	 */
+ //	private void setUpRecordTable(Map<String, String> recordMap) {
+ //
+ //		model.clearAllRow();
+ //		// add 2009/09/02
+ //		modelfixed.clearAllRow();
+ //		String hknjaNum = recordMap.get("HKNJANUM");
+ //		Long uketukeId = null;
+ //		Integer kensaNengapi = null;
+ //		Integer kenshinPatternNumber = null;
+ //		try {
+ //			uketukeId = new Long(recordMap.get("UKETUKE_ID"));
+ //			// del ver2 s.inoue 2009/08/26
+ //			// kensaNengapi = new Integer(recordMap.get("KENSA_NENGAPI"));
+ //			kenshinPatternNumber = new Integer(this.kenshinPatternNumber);
+ //		} catch (NumberFormatException e) {
+ //		}
+ //
+ //		// add ver2 s.inoue 2009/08/26
+ //		TKensakekaTokutei recordModel = null;
+ //		try {
+ //			recordModel = kensakekaTokuteiDao.selectByPrimaryKey(uketukeId);
+ //		} catch (Exception e) {
+ //			e.printStackTrace();
+ //		}
+ //
+ //		if (recordModel == null)
+ //			return;
+ //
+ //		// edit ver2 s.inoue 2009/08/26
+ //		this.jTextField_Date.setText(String.valueOf(recordModel.getKENSA_NENGAPI()));
+ //		//refresh();
+ //
+ //		// 健診項目マスタ・検査その他テーブルレコードを抽出
+ //		List<Map<String, String>> recList = null;
+ //		try {
+ //// edit ver2 s.inoue 2009/08/26
+ ////			recList = jShowResultFrameDao.selectTableRecord(
+ ////					uketukeId,
+ ////					kensaNengapi,
+ ////					hknjaNum,
+ ////					kenshinPatternNumber);
+ //			recList = jShowResultFrameDao.selectTableRecord(
+ //			uketukeId,
+ //			hknjaNum,
+ //			kenshinPatternNumber);
+ //
+ //		} catch (Exception e) {
+ //			e.printStackTrace();
+ //		}
+ //		if (recList == null)
+ //			return;
+ //
+ //		// データタイプコードを読み込む
+ //		try {
+ //			dataTypeCodes = dataTypeCodeDao.selectByAll();
+ //		} catch (SQLException e) {
+ //			e.printStackTrace();
+ //			return;
+ //		}
+ //
+ //		//一行ごとにデータを挿入していく
+ //		boolean kekkaDecimal = false;
+ //
+ //		for (Map<String, String> map : recList) {
+ //			kekkaDecimal = false;
+ //
+ //			List<String> tableData = new ArrayList<String>();
+ //			setKekaTiValue(map);
+ //			for (String fieldName : fieldKeys) {
+ //				tableData.add(map.get(fieldName));
+ //			}
+ //			modelfixed.addData(tableData.toArray(new String[0]));
+ //			// add h.yoshitama 2009/09/02
+ //			for (int i = 0; i < modelfixed.getColumnCount(); i++) {
+ //				tableData.remove(0);
+ //			}
+ //			model.addData(tableData.toArray(new String[0]));
+ //		}
+ //	}
+ //
+ //	/**
+ //	 * 健診項目マスタのデータタイプにより検査結果その他レコードの
+ //	 * 結果値をセットする
+ //	 * @param recMap 現在表示対象のレコードマップ
+ //	 */
+ //	private void setKekaTiValue(Map<String, String> recMap) {
+ //
+ //		if (recMap == null)
+ //			return;
+ //
+ //		String dataType = recMap.get("DATA_TYPE");
+ //		String kekaTi = recMap.get("KEKA_TI_DECIMAL");
+ //		String maxByteLength = recMap.get("MAX_BYTE_LENGTH");
+ //
+ //		recMap.put("KEKA_TI_DECIMAL", "");
+ //		recMap.put("KEKA_TI_CODE", "");
+ //		recMap.put("KEKA_TI_STRING", "");
+ //
+ //		// edit s.inoue 2009/09/14
+ //		String koumokuCd = recMap.get("KOUMOKU_CD");
+ //		// "1" 数値型
+ //		// "2" コード型
+ //		// "3" 文字列型
+ //
+ //		if ("1".equals(dataType)) {
+ //			// edit s.inoue 2009/09/14
+ //			String limitValeDsKagen = recMap.get("DS_KAGEN") == null ? "" : recMap.get("DS_KAGEN");;
+ //			String limitValeDsJyougen = recMap.get("DS_JYOUGEN") == null ? "" : recMap.get("DS_JYOUGEN");;
+ //			String limitValeJsKagen = recMap.get("JS_KAGEN") == null ? "" : recMap.get("JS_KAGEN");;
+ //			String limitValeJsJyougen = recMap.get("JS_JYOUGEN") == null ? "" : recMap.get("JS_JYOUGEN");;
+ //			String maxValeKagen = recMap.get("KAGEN") == null ? "" : recMap.get("KAGEN");;
+ //			String maxValeJyougen = recMap.get("JYOUGEN") == null ? "" : recMap.get("JYOUGEN");
+ //
+ //			// edit s.inoue 2009/09/28
+ //			// 共通関数を呼び出すように修正
+ //			if (koumokuCd.equals("2A040000001930102")){
+ //				recMap.put("JYOUGEN", "99.9");
+ //			}else{
+ //				recMap.put("JYOUGEN", JValidate.validateKensaKekkaDecimal(maxValeJyougen, maxByteLength));
+ //			}
+ //
+ //			recMap.put("KAGEN", JValidate.validateKensaKekkaDecimal(maxValeKagen, maxByteLength));
+ //			recMap.put("DS_JYOUGEN", JValidate.validateKensaKekkaDecimal(limitValeDsJyougen, maxByteLength));
+ //			recMap.put("DS_KAGEN", JValidate.validateKensaKekkaDecimal(limitValeDsKagen, maxByteLength));
+ //			recMap.put("JS_JYOUGEN", JValidate.validateKensaKekkaDecimal(limitValeJsJyougen, maxByteLength));
+ //			recMap.put("JS_KAGEN", JValidate.validateKensaKekkaDecimal(limitValeJsKagen, maxByteLength));
+ //			// add s.inoue 2009/10/26
+ //			// 上限下限値による修正で消えていた；；
+ //			recMap.put("KEKA_TI_DECIMAL", JValidate.validateKensaKekkaDecimal(
+ //					kekaTi, maxByteLength));
+ //
+ //		} else if ("2".equals(dataType)) {
+ //			// コード型の場合、データタイプコード詳細レコードの項目コードと一致する
+ //			// データタイプコード項目名を結果値にセット
+ //
+ //			for (TDataTypeCode code : dataTypeCodes) {
+ //				if (code.getKOUMOKU_CD().equals(koumokuCd)) {
+ //					if (code.getCODE_NUM().toString().equals(kekaTi)) {
+ //						recMap.put("KEKA_TI_CODE", code.getCODE_NAME());
+ //						return;
+ //					}
+ //				}
+ //			}
+ //			// edit s.inoue 2009/09/28
+ //			recMap.put("JYOUGEN", "");
+ //			recMap.put("KAGEN", "");
+ //			recMap.put("DS_JYOUGEN", "");
+ //			recMap.put("DS_KAGEN", "");
+ //			recMap.put("JS_JYOUGEN", "");
+ //			recMap.put("JS_KAGEN", "");
+ //		} else if ("3".equals(dataType)) {
+ //			recMap.put("KEKA_TI_STRING", kekaTi);
+ //			// edit s.inoue 2009/09/28
+ //			recMap.put("JYOUGEN", "");
+ //			recMap.put("KAGEN", "");
+ //			recMap.put("DS_JYOUGEN", "");
+ //			recMap.put("DS_KAGEN", "");
+ //			recMap.put("JS_JYOUGEN", "");
+ //			recMap.put("JS_KAGEN", "");
+ //		}
+ //	}
+ //}
+ //
+ ////Source Code Version Tag System v1.00  -- Do not remove --
+ ////Product-Tag: {4F85C2F4EE-5847B3BB7A9-ADC5AC59E3-EF66F79A1}
+ //
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JSystemMaintenanceFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JSystemMaintenanceFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JSystemMaintenanceFrame.java	Mon Apr 19 19:29:52 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JSystemMaintenanceFrame.java	Tue Nov 17 10:05:00 2009
***************
*** 3,14 ****
  import java.awt.BorderLayout;
  import javax.swing.JPanel;
  import javax.swing.JFrame;
- 
  import java.awt.Dimension;
  import java.awt.GridBagLayout;
  import java.awt.GridLayout;
! import java.awt.Insets;
! 
  import javax.swing.SwingConstants;
  import java.awt.CardLayout;
  import java.awt.Font;
--- 3,12 ----
  import java.awt.BorderLayout;
  import javax.swing.JPanel;
  import javax.swing.JFrame;
  import java.awt.Dimension;
  import java.awt.GridBagLayout;
  import java.awt.GridLayout;
! import java.awt.FlowLayout;
  import javax.swing.SwingConstants;
  import java.awt.CardLayout;
  import java.awt.Font;
***************
*** 20,31 ****
  import jp.or.med.orca.jma_tokutei.common.component.TitleLabel;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  import java.awt.GridBagConstraints;
  import javax.swing.BorderFactory;
  
  /**
   * システムメンテナンス画面
   */
! public class JSystemMaintenanceFrame extends JFrame implements ActionListener,KeyListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
--- 18,31 ----
  import jp.or.med.orca.jma_tokutei.common.component.TitleLabel;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  import java.awt.GridBagConstraints;
+ import java.awt.Insets;
  import javax.swing.BorderFactory;
  
+ 
  /**
   * システムメンテナンス画面
   */
! public class JSystemMaintenanceFrame extends JFrame implements ActionListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
***************
*** 44,50 ****
  	protected JPanel jPanel_Right = null;
  	protected JPanel jPanel_Center = null;
  	protected ExtendedButton jButton_Maintenance = null;
- 	protected ExtendedButton jButton_Usability = null;
  	protected ExtendedButton jButton_Backup = null;
  
  	/**
--- 44,49 ----
***************
*** 74,79 ****
--- 73,79 ----
  		this.setSize(ViewSettings.getFrameCommonSize());
  		this.setLocationRelativeTo( null );
  		this.setVisible(true);
+ 		/* --------------------------------------------------- */
  	}
  
  	/**
***************
*** 125,131 ****
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
--- 125,131 ----
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
***************
*** 299,340 ****
  			gridLayout2.setColumns(1);
  			jPanel_Center = new JPanel();
  			jPanel_Center.setLayout(gridLayout2);
! 
! 			GridBagConstraints gridBagConstraints1 = new GridBagConstraints();
! 			gridBagConstraints1.gridy = 0;
! 			gridBagConstraints1.gridx = 0;
! 			GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
! 			gridBagConstraints1.gridy = 1;
! 			gridBagConstraints1.gridx = 0;
! 			GridBagConstraints gridBagConstraints3 = new GridBagConstraints();
! 			gridBagConstraints1.gridy = 2;
! 			gridBagConstraints1.gridx = 0;
! 
! 			jPanel_Center.add(getJButton_Usability(),gridBagConstraints1);
! 			jPanel_Center.add(getJButton_Maintenance(), gridBagConstraints2);
! 			jPanel_Center.add(getJButton_Backup(), gridBagConstraints3);
  		}
  		return jPanel_Center;
  	}
  
- 	// add s.inoue 2009/11/25
- 	/**
- 	 * This method initializes jButton_Usability
- 	 *
- 	 * @return javax.swing.ExtendedButton
- 	 */
- 	private ExtendedButton getJButton_Usability() {
- 		if (jButton_Usability == null) {
- 			jButton_Usability = new ExtendedButton();
- 			jButton_Usability.setText("７-１．ユーザビリティメンテナンス(1)");
- 			jButton_Usability.setFont(new Font("Dialog", Font.PLAIN, 12));
- 			jButton_Usability.addActionListener(this);
- 			jButton_Usability.addKeyListener(this);
- 			jButton_Usability.setMnemonic(KeyEvent.VK_1);
- 		}
- 		return jButton_Usability;
- 	}
- 
  	/**
  	 * This method initializes jButton_Maintenance
  	 *
--- 299,310 ----
  			gridLayout2.setColumns(1);
  			jPanel_Center = new JPanel();
  			jPanel_Center.setLayout(gridLayout2);
! 			jPanel_Center.add(getJButton_Maintenance(), null);
! 			jPanel_Center.add(getJButton_Backup(), null);
  		}
  		return jPanel_Center;
  	}
  
  	/**
  	 * This method initializes jButton_Maintenance
  	 *
***************
*** 343,353 ****
  	private ExtendedButton getJButton_Maintenance() {
  		if (jButton_Maintenance == null) {
  			jButton_Maintenance = new ExtendedButton();
! 			jButton_Maintenance.setText("７-２．システム利用者メンテナンス(2)");
  			jButton_Maintenance.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Maintenance.addActionListener(this);
- 			jButton_Maintenance.addKeyListener(this);
- 			jButton_Maintenance.setMnemonic(KeyEvent.VK_2);
  		}
  		return jButton_Maintenance;
  	}
--- 313,321 ----
  	private ExtendedButton getJButton_Maintenance() {
  		if (jButton_Maintenance == null) {
  			jButton_Maintenance = new ExtendedButton();
! 			jButton_Maintenance.setText("７-１．システム利用者メンテナンス");
  			jButton_Maintenance.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Maintenance.addActionListener(this);
  		}
  		return jButton_Maintenance;
  	}
***************
*** 360,370 ****
  	private ExtendedButton getJButton_Backup() {
  		if (jButton_Backup == null) {
  			jButton_Backup = new ExtendedButton();
! 			jButton_Backup.setText("７-３．バックアップ＆復元(3)");
  			jButton_Backup.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Backup.addActionListener(this);
- 			jButton_Backup.addKeyListener(this);
- 			jButton_Backup.setMnemonic(KeyEvent.VK_3);
  		}
  		return jButton_Backup;
  	}
--- 328,336 ----
  	private ExtendedButton getJButton_Backup() {
  		if (jButton_Backup == null) {
  			jButton_Backup = new ExtendedButton();
! 			jButton_Backup.setText("７-２．バックアップ＆復元");
  			jButton_Backup.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Backup.addActionListener(this);
  		}
  		return jButton_Backup;
  	}
***************
*** 403,425 ****
  		}
  		/* --------------------------------------------------- */
  	}
! 
! 	@Override
! 	public void keyPressed(KeyEvent e) {
! 		// TODO 自動生成されたメソッド・スタブ
! 
! 	}
! 
! 	@Override
! 	public void keyReleased(KeyEvent e) {
! 		// TODO 自動生成されたメソッド・スタブ
! 
! 	}
! 
! 	@Override
! 	public void keyTyped(KeyEvent e) {
! 		// TODO 自動生成されたメソッド・スタブ
! 
! 	}
! 
! }  //  @jve:decl-index=0:visual-constraint="16,8"
--- 369,372 ----
  		}
  		/* --------------------------------------------------- */
  	}
! }
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JSystemMaintenanceFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JSystemMaintenanceFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JSystemMaintenanceFrameCtrl.java	Mon Apr 19 19:00:44 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JSystemMaintenanceFrameCtrl.java	Tue Oct 13 09:53:08 2009
***************
*** 1,10 ****
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
  
- import java.awt.Component;
  import java.awt.event.*;
  
- import org.apache.log4j.Logger;
- 
  import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
  
  /**
--- 1,7 ----
***************
*** 12,37 ****
   */
  public class JSystemMaintenanceFrameCtrl extends JSystemMaintenanceFrame {
  
- 	private static Logger logger = Logger.getLogger(JSystemMaintenanceFrameCtrl.class);
- 	private JFocusTraversalPolicy focusTraversalPolicy = null;
- 
  	public JSystemMaintenanceFrameCtrl() {
- 	    functionListner();
- 	}
- 
- 	private void functionListner(){
- 		this.focusTraversalPolicy = new JFocusTraversalPolicy();
- 		this.setFocusTraversalPolicy(this.focusTraversalPolicy);
- 		this.focusTraversalPolicy.setDefaultComponent(jButton_Usability);
- 		this.focusTraversalPolicy.addComponent(this.jButton_Usability);
- 		this.focusTraversalPolicy.addComponent(this.jButton_Maintenance);
- 		this.focusTraversalPolicy.addComponent(this.jButton_Backup);
- 		this.focusTraversalPolicy.addComponent(this.jButton_End);
- 
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			Component comp = focusTraversalPolicy.getComponent(i);
- 			comp.addKeyListener(this);
- 		}
  	}
  
  	/**
--- 9,15 ----
***************
*** 41,54 ****
  		dispose();
  	}
  
- 	// add s.inoue 2009/11/25
- 	/**
- 	 * ユーザビリティボタン
- 	 */
- 	public void pushedUsabilityButton(ActionEvent e) {
- 		jp.or.med.orca.jma_tokutei.common.scene.JScene.CreateDialog(this,
- 				new JUsabilityFrameCtrl());
- 	}
  	/**
  	 * システム利用者メンテナンスボタン
  	 */
--- 19,24 ----
***************
*** 56,61 ****
--- 26,32 ----
  		jp.or.med.orca.jma_tokutei.common.scene.JScene.CreateDialog(this,
  				new JUserMaintenanceFrameCtrl());
  	}
+ 
  	/**
  	 * バックアップ・復元ボタン
  	 */
***************
*** 67,120 ****
  	public void actionPerformed(ActionEvent e) {
  		Object source = e.getSource();
  		if (source == jButton_End) {
- 			logger.info(jButton_End.getText());
  			pushedEndButton(e);
  		}
! 		if (source == jButton_Usability) {
! 			logger.info(jButton_Usability.getText());
! 			pushedUsabilityButton(e);
! 		}
  		if (source == jButton_Maintenance) {
- 			logger.info(jButton_Maintenance.getText());
  			pushedMaintenanceButton(e);
  		}
  		if (source == jButton_Backup) {
- 			logger.info(jButton_Backup.getText());
  			pushedBackupButton(e);
  		}
  	}
- 
- 
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 
- 		int mod = keyEvent.getModifiersEx();
- 		switch(keyEvent.getKeyCode()){
- 		case KeyEvent.VK_F1:
- 			if ((mod & InputEvent.ALT_DOWN_MASK) != 0){
- 				logger.info(jButton_Usability.getText());
- 				pushedUsabilityButton(null);break;
- 			}
- 			logger.info(jButton_End.getText());
- 			pushedEndButton(null);
- 			break;
- // del s.inoue 2010/04/19
- //		case KeyEvent.VK_F2:
- //			pushedUsabilityButton(null);break;
- //		case KeyEvent.VK_F2:
- //			if ((mod & InputEvent.ALT_DOWN_MASK) != 0){
- //				logger.info(jButton_Maintenance.getText());
- //				pushedMaintenanceButton(null);
- //			}
- //			break;
- //		case KeyEvent.VK_F3:
- //			if ((mod & InputEvent.ALT_DOWN_MASK) != 0){
- //				logger.info(jButton_Usability.getText());
- //				pushedBackupButton(null);
- //			}
- //			break;
- 		}
- 	}
  }
  
  //Source Code Version Tag System v1.00  -- Do not remove --
--- 38,54 ----
  	public void actionPerformed(ActionEvent e) {
  		Object source = e.getSource();
  		if (source == jButton_End) {
  			pushedEndButton(e);
  		}
! 
  		if (source == jButton_Maintenance) {
  			pushedMaintenanceButton(e);
  		}
+ 
  		if (source == jButton_Backup) {
  			pushedBackupButton(e);
  		}
  	}
  }
  
  //Source Code Version Tag System v1.00  -- Do not remove --
Only in ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame: JUsabilityFrame.java
Only in ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame: JUsabilityFrameCtrl.java
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JUserMaintenanceFrame.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JUserMaintenanceFrame.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JUserMaintenanceFrame.java	Mon Apr 19 19:31:12 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JUserMaintenanceFrame.java	Tue Aug 11 17:55:30 2009
***************
*** 23,29 ****
  /**
   * システム利用者メンテナンス画面
   */
! public class JUserMaintenanceFrame extends JFrame implements ActionListener,KeyListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
--- 23,29 ----
  /**
   * システム利用者メンテナンス画面
   */
! public class JUserMaintenanceFrame extends JFrame implements ActionListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
***************
*** 40,46 ****
  	protected ExtendedButton jButton_Add = null;
  	protected ExtendedButton jButton_Change = null;
  	protected ExtendedButton jButton_Delete = null;
! 
  	/**
  	 * This is the default constructor
  	 */
--- 40,46 ----
  	protected ExtendedButton jButton_Add = null;
  	protected ExtendedButton jButton_Change = null;
  	protected ExtendedButton jButton_Delete = null;
! 	
  	/**
  	 * This is the default constructor
  	 */
***************
*** 51,70 ****
  
  	/**
  	 * This method initializes this
! 	 *
  	 * @return void
  	 */
  	private void initialize() {
  		this.setContentPane(getJPanel_Content());
  		this.setTitle(ViewSettings.getTokuteFrameTitleWithKikanInfomation());
  		this.setSize(ViewSettings.getFrameCommonSize());
  		this.setLocationRelativeTo( null );
! 		this.setVisible(true);
  	}
  
  	/**
  	 * This method initializes jPanel_Content
! 	 *
  	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_Content() {
--- 51,79 ----
  
  	/**
  	 * This method initializes this
! 	 * 
  	 * @return void
  	 */
  	private void initialize() {
+ 		/* Modified 2008/03/22 若月  */
+ 		/* --------------------------------------------------- */
+ //		this.setSize(800, 600);
+ //		this.setContentPane(getJPanel_Content());
+ //		this.setTitle("特定健診システム");
+ //		setLocationRelativeTo( null );
+ //		this.setVisible(true);
+ 		/* --------------------------------------------------- */
  		this.setContentPane(getJPanel_Content());
  		this.setTitle(ViewSettings.getTokuteFrameTitleWithKikanInfomation());
  		this.setSize(ViewSettings.getFrameCommonSize());
  		this.setLocationRelativeTo( null );
! 		this.setVisible(true);		
! 		/* --------------------------------------------------- */
  	}
  
  	/**
  	 * This method initializes jPanel_Content
! 	 * 
  	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_Content() {
***************
*** 81,89 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_ButtonArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_ButtonArea() {
  		if (jPanel_ButtonArea == null) {
--- 90,98 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_ButtonArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_ButtonArea() {
  		if (jPanel_ButtonArea == null) {
***************
*** 115,123 ****
  	}
  
  	/**
! 	 * This method initializes jButton_End
! 	 *
! 	 * @return javax.swing.ExtendedButton
  	 */
  	private ExtendedButton getJButton_End() {
  		if (jButton_End == null) {
--- 124,132 ----
  	}
  
  	/**
! 	 * This method initializes jButton_End	
! 	 * 	
! 	 * @return javax.swing.ExtendedButton	
  	 */
  	private ExtendedButton getJButton_End() {
  		if (jButton_End == null) {
***************
*** 125,140 ****
  //			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  //			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
  	}
  
  	/**
! 	 * This method initializes jPanel_NaviArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_NaviArea() {
  		if (jPanel_NaviArea == null) {
--- 134,149 ----
  //			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  //			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
  	}
  
  	/**
! 	 * This method initializes jPanel_NaviArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_NaviArea() {
  		if (jPanel_NaviArea == null) {
***************
*** 160,168 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_TitleArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_TitleArea() {
  		if (jPanel_TitleArea == null) {
--- 169,177 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_TitleArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_TitleArea() {
  		if (jPanel_TitleArea == null) {
***************
*** 181,189 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea2
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_ExplArea2() {
  		if (jPanel_ExplArea2 == null) {
--- 190,198 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea2	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_ExplArea2() {
  		if (jPanel_ExplArea2 == null) {
***************
*** 202,210 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea1
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_ExplArea1() {
  		if (jPanel_ExplArea1 == null) {
--- 211,219 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea1	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_ExplArea1() {
  		if (jPanel_ExplArea1 == null) {
***************
*** 218,226 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_MainArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_MainArea() {
  		if (jPanel_MainArea == null) {
--- 227,235 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_MainArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_MainArea() {
  		if (jPanel_MainArea == null) {
***************
*** 232,245 ****
  	}
  
  	/**
! 	 * This method initializes jButton_Add
! 	 *
! 	 * @return javax.swing.ExtendedButton
  	 */
  	private ExtendedButton getJButton_Add() {
  		if (jButton_Add == null) {
  			jButton_Add = new ExtendedButton();
! 			jButton_Add.setText("追加(F9)");
  //			jButton_Add.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Add.addActionListener(this);
  		}
--- 241,254 ----
  	}
  
  	/**
! 	 * This method initializes jButton_Add	
! 	 * 	
! 	 * @return javax.swing.ExtendedButton	
  	 */
  	private ExtendedButton getJButton_Add() {
  		if (jButton_Add == null) {
  			jButton_Add = new ExtendedButton();
! 			jButton_Add.setText("追加");
  //			jButton_Add.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Add.addActionListener(this);
  		}
***************
*** 247,260 ****
  	}
  
  	/**
! 	 * This method initializes jButton_Change
! 	 *
! 	 * @return javax.swing.ExtendedButton
  	 */
  	private ExtendedButton getJButton_Change() {
  		if (jButton_Change == null) {
  			jButton_Change = new ExtendedButton();
! 			jButton_Change.setText("変更(F11)");
  //			jButton_Change.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Change.addActionListener(this);
  		}
--- 256,269 ----
  	}
  
  	/**
! 	 * This method initializes jButton_Change	
! 	 * 	
! 	 * @return javax.swing.ExtendedButton	
  	 */
  	private ExtendedButton getJButton_Change() {
  		if (jButton_Change == null) {
  			jButton_Change = new ExtendedButton();
! 			jButton_Change.setText("変更");
  //			jButton_Change.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Change.addActionListener(this);
  		}
***************
*** 262,275 ****
  	}
  
  	/**
! 	 * This method initializes jButton_Delete
! 	 *
! 	 * @return javax.swing.ExtendedButton
  	 */
  	private ExtendedButton getJButton_Delete() {
  		if (jButton_Delete == null) {
  			jButton_Delete = new ExtendedButton();
! 			jButton_Delete.setText("削除(F12)");
  //			jButton_Delete.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Delete.addActionListener(this);
  		}
--- 271,284 ----
  	}
  
  	/**
! 	 * This method initializes jButton_Delete	
! 	 * 	
! 	 * @return javax.swing.ExtendedButton	
  	 */
  	private ExtendedButton getJButton_Delete() {
  		if (jButton_Delete == null) {
  			jButton_Delete = new ExtendedButton();
! 			jButton_Delete.setText("削除");
  //			jButton_Delete.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Delete.addActionListener(this);
  		}
***************
*** 278,295 ****
  
  	public void actionPerformed( ActionEvent e )
  	{
! 
  	}
! 
  	/*
  	 * FrameSize Control
  	 */
  	public void validate()
  	{
  		Rectangle rect = getBounds();
! 
  		super.validate();
  
  		if( ViewSettings.getFrameCommonWidth() > rect.width  ||
  				ViewSettings.getFrameCommonHeight() > rect.height )
  		{
--- 287,315 ----
  
  	public void actionPerformed( ActionEvent e )
  	{
! 		
  	}
! 	
  	/*
  	 * FrameSize Control
  	 */
  	public void validate()
  	{
  		Rectangle rect = getBounds();
! 		
  		super.validate();
  
+ 		/* Modified 2008/03/09 若月  */
+ 		/* --------------------------------------------------- */
+ //		if( ViewSettings.NORMALFRAME_MINSIZE_W > rect.width  ||
+ //		ViewSettings.NORMALFRAME_MINSIZE_H > rect.height )
+ //{
+ //	setBounds( rect.x,
+ //			   rect.y,
+ //			   ViewSettings.NORMALFRAME_MINSIZE_W,
+ //			   ViewSettings.NORMALFRAME_MINSIZE_H );
+ //}
+ 		/* --------------------------------------------------- */
  		if( ViewSettings.getFrameCommonWidth() > rect.width  ||
  				ViewSettings.getFrameCommonHeight() > rect.height )
  		{
***************
*** 300,321 ****
  		}
  		/* --------------------------------------------------- */
  	}
- 
- 	@Override
- 	public void keyPressed(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyReleased(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyTyped(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
  }
--- 320,323 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JUserMaintenanceFrameCtrl.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JUserMaintenanceFrameCtrl.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JUserMaintenanceFrameCtrl.java	Fri Apr  9 14:45:12 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/frame/JUserMaintenanceFrameCtrl.java	Mon Apr 26 11:10:42 2010
***************
*** 1,6 ****
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame;
  
- import java.awt.Component;
  import java.awt.event.*;
  import java.sql.SQLException;
  import java.util.*;
--- 1,5 ----
***************
*** 10,17 ****
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
  import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
  import jp.or.med.orca.jma_tokutei.common.errormessage.RETURN_VALUE;
- import jp.or.med.orca.jma_tokutei.common.event.JSingleDoubleClickEvent;
  import jp.or.med.orca.jma_tokutei.common.event.JEnterEvent;
  import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
  import jp.or.med.orca.jma_tokutei.common.scene.JScene;
  import jp.or.med.orca.jma_tokutei.common.table.*;
--- 9,16 ----
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
  import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
  import jp.or.med.orca.jma_tokutei.common.errormessage.RETURN_VALUE;
  import jp.or.med.orca.jma_tokutei.common.event.JEnterEvent;
+ import jp.or.med.orca.jma_tokutei.common.event.JSingleDoubleClickEvent;
  import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
  import jp.or.med.orca.jma_tokutei.common.scene.JScene;
  import jp.or.med.orca.jma_tokutei.common.table.*;
***************
*** 20,27 ****
  import javax.swing.table.DefaultTableCellRenderer;
  import javax.swing.table.TableColumnModel;
  
- import org.apache.log4j.Logger;
- 
  import jp.or.med.orca.jma_tokutei.common.table.JSimpleTableCellRowRenderer;
  
  /**
--- 19,24 ----
***************
*** 33,40 ****
  	/* フォーカス移動制御 */
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
  
- 	private static Logger logger = Logger.getLogger(JUserMaintenanceFrameCtrl.class);
- 
  	/**
  	 * デフォルトコンストラクタ
  	 */
--- 30,35 ----
***************
*** 46,51 ****
--- 41,48 ----
  		model.addKeyListener(new JEnterEvent(this, jButton_Change));
  
  		// ダブルクリックの処理
+ 		// edit 2010/04/23 s.inoue
+ 		// model.addMouseListener(new JDoubleClickEvent(this, jButton_Change));
  		model.addMouseListener(new JSingleDoubleClickEvent(this, jButton_Change));
  
  		this.focusTraversalPolicy = new JFocusTraversalPolicy();
***************
*** 56,66 ****
  		this.focusTraversalPolicy.addComponent(this.jButton_Change);
  		this.focusTraversalPolicy.addComponent(this.jButton_Delete);
  		this.focusTraversalPolicy.addComponent(jButton_End);
- 		// add s.inoue 2009/12/02
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			Component comp = focusTraversalPolicy.getComponent(i);
- 			comp.addKeyListener(this);
- 		}
  
  		model.setAutoResizeMode(JTable.AUTO_RESIZE_ALL_COLUMNS);
  
--- 53,58 ----
***************
*** 207,248 ****
  		Object souce = e.getSource();
  		/* 終了ボタン */
  		if (souce == jButton_End) {
- 			logger.info(jButton_End.getText());
  			pushedEndButton(e);
  		}
  		/* 追加ボタン */
  		else if (souce == jButton_Add) {
- 			logger.info(jButton_Add.getText());
  			pushedAddButton(e);
  		}
  		/* 変更ボタン */
  		else if (souce == jButton_Change) {
- 			logger.info(jButton_Change.getText());
  			pushedChangeButton(e);
  		}
  		/* 削除ボタン */
  		else if (souce == jButton_Delete) {
- 			logger.info(jButton_Delete.getText());
  			pushedDeleteButton(e);
  		}
  	}
! 	@Override
! 	public void keyPressed(KeyEvent keyEvent) {
! 		switch(keyEvent.getKeyCode()){
! 		case KeyEvent.VK_F1:
! 			logger.info(jButton_End.getText());
! 			pushedEndButton(null);break;
! 		case KeyEvent.VK_F9:
! 			logger.info(jButton_Add.getText());
! 			pushedAddButton(null);break;
! 		case KeyEvent.VK_F11:
! 			logger.info(jButton_Change.getText());
! 			pushedChangeButton(null);break;
! 		case KeyEvent.VK_F12:
! 			logger.info(jButton_Delete.getText());
! 			pushedDeleteButton(null);break;
! 		}
! 	}
  	/**
  	 * 遷移先の画面から戻ってきた場合
  	 */
--- 199,220 ----
  		Object souce = e.getSource();
  		/* 終了ボタン */
  		if (souce == jButton_End) {
  			pushedEndButton(e);
  		}
  		/* 追加ボタン */
  		else if (souce == jButton_Add) {
  			pushedAddButton(e);
  		}
  		/* 変更ボタン */
  		else if (souce == jButton_Change) {
  			pushedChangeButton(e);
  		}
  		/* 削除ボタン */
  		else if (souce == jButton_Delete) {
  			pushedDeleteButton(e);
  		}
  	}
! 
  	/**
  	 * 遷移先の画面から戻ってきた場合
  	 */
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/ippanhantei/JIppanHantei.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/ippanhantei/JIppanHantei.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/ippanhantei/JIppanHantei.java	Tue Dec 15 18:15:10 2009
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/ippanhantei/JIppanHantei.java	Tue Aug 11 17:55:30 2009
***************
*** 145,150 ****
--- 145,151 ----
  
  						} catch (NumberFormatException e) {
  							/* 変換に失敗した場合は、この項目の処理を中止する。 */
+ 							e.printStackTrace();
  							System.out.println("continue to next roop.");
  							continue;
  						}
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/kekkahantei/JKaisoukaHantei.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/kekkahantei/JKaisoukaHantei.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/kekkahantei/JKaisoukaHantei.java	Tue Nov 24 18:39:58 2009
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/kekkahantei/JKaisoukaHantei.java	Wed Sep  2 10:55:26 2009
***************
*** 1,11 ****
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.kekkahantei;
  
- import java.util.ArrayList;
- 
  /**
!  * 階層化判定処理
   */
  public class JKaisoukaHantei {
  	private static final String CODE_KITSUEN = "9N736000000000011";
  	private static final String CODE_HDL_1 = "3F070000002327101";
  	private static final String CODE_CYUSEI_SHIBOU_1 = "3F015000002327101";
--- 1,12 ----
  package jp.or.med.orca.jma_tokutei.kenshin.healthexamination.kekkahantei;
  
  /**
!  * Modified 2008/03/31 若月
!  * コード値を定数に置き換え
   */
  public class JKaisoukaHantei {
+ 	/* Added 2008/03/31 若月  */
+ 	/* --------------------------------------------------- */
  	private static final String CODE_KITSUEN = "9N736000000000011";
  	private static final String CODE_HDL_1 = "3F070000002327101";
  	private static final String CODE_CYUSEI_SHIBOU_1 = "3F015000002327101";
***************
*** 19,24 ****
--- 20,27 ----
  	private static final String CODE_HUKUYAKU_3 = "9N711000000000011";
  	private static final String CODE_HUKUYAKU_2 = "9N706000000000011";
  	private static final String CODE_HUKUYAKU_1 = "9N701000000000011";
+ 	/* --------------------------------------------------- */
+ 
  	public final static int SEKKYOKUTEKI_SHIEN = 1;
  	public final static int DOUKIDUKE_SHIEN = 2;
  	public final static int JYOUHOU_TEIKYOU = 3;
***************
*** 26,31 ****
--- 29,523 ----
  
  	public static int Hantei(JKaisoukaHanteiData data)
  	{
+ 		/* Modified 2008/03/31 若月 全面的に修正 */
+ 		/* --------------------------------------------------- */
+ //		/*
+ //		 * 以下の階層判定はtokuteikenshin.jpのhttp://tokuteikenshin.jp/update/2-1/latest/systemdoc-appe20080205.pdfの
+ //		 * 資料を元にして、判定を行っている。
+ //		 * コメントの多くは、この資料の中の階層判定の項を参照しており、このソースコードに手を加える
+ //		 * 必要がある場合、その資料と見比べながら作業をしていただきたい。
+ //		 * 欠損値項目の処理についても、上記の資料をもとに作成している。
+ //		 */
+ //
+ //		// 判定結果
+ //		int Code = 0;
+ //
+ //		// 服薬のチェック
+ //		// 質問票服薬のいずれかが「服薬あり」であれば、情報提供レベルとして。判定終了
+ //		// これに関しては、一番先にチェックを行う。
+ //		if(
+ //				JKaisoukaHanteiItemCheck.CheckItem(CODE_HUKUYAKU_1, Data.getGender(),
+ //						Data.getKetsuatsuHukuyaku()) == JKaisoukaHanteiItemCheck.TRUE ||
+ //				JKaisoukaHanteiItemCheck.CheckItem(CODE_HUKUYAKU_2, Data.getGender(),
+ //						Data.getKettoHukuyaku()) == JKaisoukaHanteiItemCheck.TRUE ||
+ //				JKaisoukaHanteiItemCheck.CheckItem(CODE_HUKUYAKU_3, Data.getGender(),
+ //						Data.getShishitsuHukuyaku()) == JKaisoukaHanteiItemCheck.TRUE
+ //		)
+ //		{
+ //			Code = JYOUHOU_TEIKYOU;
+ //			return Code;
+ //		}
+ //
+ //		// ステップ1
+ //		// 該当なし = 0
+ //		int Step1 = 0;
+ //		boolean Step1Kesson = false;
+ //
+ //		// 内臓脂肪面積
+ //		if(JKaisoukaHanteiItemCheck.CheckItem(CODE_NAIZOU_SHIBOU_MENSEKI, Data.getGender(),
+ //				Data.getNaizouShibou()) == JKaisoukaHanteiItemCheck.TRUE)
+ //		{
+ //			Step1 = 1;
+ //		}else{
+ //			// 内蔵脂肪面積が無い場合
+ //			if(JKaisoukaHanteiItemCheck.CheckItem(CODE_NAIZOU_SHIBOU_MENSEKI, Data.getGender(),
+ //					Data.getNaizouShibou()) == JKaisoukaHanteiItemCheck.KESSON)
+ //			{
+ //				/* Modified 2008/03/31 若月 欠損値の判定が間違っているので修正 */
+ //				/* --------------------------------------------------- */
+ ////				Step1Kesson = true;
+ ////
+ ////				// 腹囲
+ ////				if(JKaisoukaHanteiItemCheck.CheckItem("9N016160100000001", Data.getGender(),
+ ////						Data.getHukui()) == JKaisoukaHanteiItemCheck.TRUE)
+ ////				{
+ ////					Step1 = 1;
+ ////				}
+ //				/* --------------------------------------------------- */
+ //				// 腹囲
+ //				if(JKaisoukaHanteiItemCheck.CheckItem(CODE_HUKUI_ZISOKU, Data.getGender(),
+ //						Data.getHukui()) == JKaisoukaHanteiItemCheck.TRUE)
+ //				{
+ //					Step1 = 1;
+ //				}
+ //				else if(JKaisoukaHanteiItemCheck.CheckItem(CODE_HUKUI_ZISOKU, Data.getGender(),
+ //						Data.getHukui()) == JKaisoukaHanteiItemCheck.KESSON){
+ //					Step1Kesson = true;
+ //				}
+ //				/* --------------------------------------------------- */
+ //			}
+ //		}
+ //
+ //		// パターン1に該当しない場合
+ //		if(Step1 == 0)
+ //		{
+ //			// BMI
+ //			if(JKaisoukaHanteiItemCheck.CheckItem(CODE_BMI, Data.getGender(),
+ //					Data.getBMI()) == JKaisoukaHanteiItemCheck.TRUE)
+ //			{
+ //				Step1 = 2;
+ //			}
+ //		}
+ //
+ //		if(Step1 == 0)
+ //		{
+ //			return 3;
+ //		}
+ //
+ //		// ステップ2
+ //
+ //		// カテゴリ1
+ //		boolean Category1 = false;
+ //		boolean Category1Kesson = false;
+ //
+ //		// 空腹時血糖
+ //		if(JKaisoukaHanteiItemCheck.CheckItem(CODE_KUHUKUZI_KETO_1, Data.getGender(),
+ //				Data.getKuhukujiKetto()) == JKaisoukaHanteiItemCheck.TRUE)
+ //		{
+ //			Category1 = true;
+ //		}else{
+ //			if(JKaisoukaHanteiItemCheck.CheckItem(CODE_KUHUKUZI_KETO_1, Data.getGender(),
+ //					Data.getKuhukujiKetto()) == JKaisoukaHanteiItemCheck.KESSON)
+ //			{
+ //				// HbA1c
+ //				if(JKaisoukaHanteiItemCheck.CheckItem(CODE_HBA1C, Data.getGender(),
+ //						Data.getHbA1c()) == JKaisoukaHanteiItemCheck.TRUE)
+ //				{
+ //					Category1 = true;
+ //				}
+ //
+ //				// 欠損チェック
+ //				// NOの場合は、判定不能となる場合があるので、ここでチェックする。最終的に使用するのは、一番最後の欠損チェック
+ //				if(
+ //						JKaisoukaHanteiItemCheck.CheckItem(CODE_KUHUKUZI_KETO_1, Data.getGender(),
+ //								Data.getKuhukujiKetto()) == JKaisoukaHanteiItemCheck.KESSON
+ //				)
+ //				{
+ //					Category1Kesson = true;
+ //				}
+ //			}
+ //
+ //			if(JKaisoukaHanteiItemCheck.CheckItem(CODE_KUHUKUZI_KETO_1, Data.getGender(),
+ //					Data.getKuhukujiKetto()) == JKaisoukaHanteiItemCheck.FALSE)
+ //			{
+ //				Category1 = false;
+ //			}
+ //		}
+ //
+ //		// 質問票服薬2（血糖）
+ //		if(JKaisoukaHanteiItemCheck.CheckItem(CODE_HUKUYAKU_2, Data.getGender(),
+ //				Data.getKettoHukuyaku()) == JKaisoukaHanteiItemCheck.TRUE && Category1 == false)
+ //		{
+ //			Category1 = true;
+ //		}else{
+ //			// 欠損チェック
+ //			if(JKaisoukaHanteiItemCheck.CheckItem(CODE_HUKUYAKU_2, Data.getGender(),
+ //					Data.getKettoHukuyaku()) == JKaisoukaHanteiItemCheck.KESSON && Category1 == false)
+ //			{
+ //				Category1Kesson = true;
+ //			}
+ //		}
+ //
+ //		// カテゴリ2
+ //		boolean Category2 = false;
+ //		boolean Category2Kesson = false;
+ //		if(
+ //				JKaisoukaHanteiItemCheck.CheckItem(CODE_SYUSYUKUKI_KETSUATSU_1, Data.getGender(),
+ //						Data.getShushukuKetsuatsu()) == JKaisoukaHanteiItemCheck.TRUE ||
+ //				JKaisoukaHanteiItemCheck.CheckItem(CODE_KAKUCHOKI_KETSUATSU_1, Data.getGender(),
+ //						Data.getKakutyoKetsuatsu()) == JKaisoukaHanteiItemCheck.TRUE ||
+ //				JKaisoukaHanteiItemCheck.CheckItem(CODE_HUKUYAKU_1, Data.getGender(),
+ //						Data.getKetsuatsuHukuyaku()) == JKaisoukaHanteiItemCheck.TRUE
+ //		)
+ //		{
+ //			Category2 = true;
+ //		}else{
+ //			if(
+ //					JKaisoukaHanteiItemCheck.CheckItem(CODE_SYUSYUKUKI_KETSUATSU_1, Data.getGender(),
+ //							Data.getShushukuKetsuatsu()) == JKaisoukaHanteiItemCheck.KESSON ||
+ //					JKaisoukaHanteiItemCheck.CheckItem(CODE_KAKUCHOKI_KETSUATSU_1, Data.getGender(),
+ //							Data.getKakutyoKetsuatsu()) == JKaisoukaHanteiItemCheck.KESSON ||
+ //					JKaisoukaHanteiItemCheck.CheckItem(CODE_HUKUYAKU_1, Data.getGender(),
+ //							Data.getKetsuatsuHukuyaku()) == JKaisoukaHanteiItemCheck.KESSON
+ //			)
+ //			{
+ //				Category2Kesson = true;
+ //			}
+ //		}
+ //
+ //		// カテゴリ3
+ //		boolean Category3 = false;
+ //		boolean Category3Kesson = false;
+ //		if(
+ //				JKaisoukaHanteiItemCheck.CheckItem(CODE_CYUSEI_SHIBOU_1, Data.getGender(),
+ //						Data.getChuseiShibou()) == JKaisoukaHanteiItemCheck.TRUE ||
+ //				JKaisoukaHanteiItemCheck.CheckItem(CODE_HDL_1, Data.getGender(),
+ //						Data.getHDLCholesterol()) == JKaisoukaHanteiItemCheck.TRUE ||
+ //				JKaisoukaHanteiItemCheck.CheckItem(CODE_HUKUYAKU_3, Data.getGender(),
+ //						Data.getShishitsuHukuyaku()) == JKaisoukaHanteiItemCheck.TRUE
+ //		)
+ //		{
+ //			Category3 = true;
+ //		}else{
+ //			if(
+ //					JKaisoukaHanteiItemCheck.CheckItem(CODE_CYUSEI_SHIBOU_1, Data.getGender(),
+ //							Data.getChuseiShibou()) == JKaisoukaHanteiItemCheck.TRUE ||
+ //					JKaisoukaHanteiItemCheck.CheckItem(CODE_HDL_1, Data.getGender(),
+ //							Data.getHDLCholesterol()) == JKaisoukaHanteiItemCheck.TRUE ||
+ //					JKaisoukaHanteiItemCheck.CheckItem(CODE_HUKUYAKU_3, Data.getGender(),
+ //							Data.getShishitsuHukuyaku()) == JKaisoukaHanteiItemCheck.TRUE
+ //			)
+ //			{
+ //				Category3Kesson = true;
+ //			}
+ //		}
+ //
+ //		// カテゴリ4
+ //		boolean Category4 = false;
+ //		boolean Category4Kesson = false;
+ //		if(JKaisoukaHanteiItemCheck.CheckItem(CODE_KITSUEN, Data.getGender(),
+ //				Data.getKitsuen()) == JKaisoukaHanteiItemCheck.TRUE)
+ //		{
+ //			Category4 = true;
+ //		}
+ //		if(JKaisoukaHanteiItemCheck.CheckItem(CODE_KITSUEN, Data.getGender(),
+ //				Data.getKitsuen()) == JKaisoukaHanteiItemCheck.KESSON)
+ //		{
+ //			Category4Kesson = true;
+ //		}
+ //
+ //		// ステップ3
+ //
+ //		// コードの判定
+ //
+ //		if(Step1 == 0)
+ //		{
+ //			Code = JYOUHOU_TEIKYOU;
+ //		}
+ //
+ //		// ステップ2の該当する数を計算
+ //		int Step2Count = 0;
+ //
+ //		if(Category1 == true)
+ //		{
+ //			Step2Count++;
+ //		}
+ //		if(Category2 == true)
+ //		{
+ //			Step2Count++;
+ //		}
+ //		if(Category3 == true)
+ //		{
+ //			Step2Count++;
+ //		}
+ //
+ //		// 結果の判定
+ //
+ //		if(Step1 == 1)
+ //		{
+ //			if(Step2Count == 0)
+ //			{
+ //				Code = JYOUHOU_TEIKYOU;
+ //			}
+ //			if(Step2Count == 1)
+ //			{
+ //				if(Category4 == true)
+ //				{
+ //					Code = SEKKYOKUTEKI_SHIEN;
+ //				}else{
+ //					Code = DOUKIDUKE_SHIEN;
+ //				}
+ //
+ //				// 欠損の判定
+ //				if(JKaisoukaHanteiItemCheck.CheckItem(CODE_KITSUEN, Data.getGender(),
+ //						Data.getKitsuen()) == JKaisoukaHanteiItemCheck.KESSON)
+ //				{
+ //					Code = HANTEI_HUNOU;
+ //					return Code;
+ //				}
+ //			}
+ //
+ //			if(Step2Count >= 2)
+ //			{
+ //				Code = SEKKYOKUTEKI_SHIEN;
+ //			}
+ //		}
+ //
+ //		if(Step1 == 2)
+ //		{
+ //			if(Step2Count == 0)
+ //			{
+ //				Code = JYOUHOU_TEIKYOU;
+ //			}
+ //
+ //			if(Step2Count == 1)
+ //			{
+ //				Code = DOUKIDUKE_SHIEN;
+ //			}
+ //
+ //			if(Step2Count == 2)
+ //			{
+ //				if(Category4 == true)
+ //				{
+ //					Code = SEKKYOKUTEKI_SHIEN;
+ //				}else{
+ //					Code = DOUKIDUKE_SHIEN;
+ //				}
+ //
+ //				// 欠損の判定
+ //				if(JKaisoukaHanteiItemCheck.CheckItem(CODE_KITSUEN, Data.getGender(),
+ //					Data.getKitsuen()) == JKaisoukaHanteiItemCheck.KESSON)
+ //				{
+ //					Code = HANTEI_HUNOU;
+ //					return Code;
+ //				}
+ //			}
+ //
+ //			if(Step2Count >= 3)
+ //			{
+ //				Code = SEKKYOKUTEKI_SHIEN;
+ //			}
+ //		}
+ //
+ //		// ステップ4
+ //		if(Code == SEKKYOKUTEKI_SHIEN || Code == DOUKIDUKE_SHIEN)
+ //		{
+ //			if(65 <= Data.getAge() && Data.getAge() <= 74)
+ //			{
+ //				Code = DOUKIDUKE_SHIEN;
+ //				return Code;
+ //			}
+ //
+ //			return Code;
+ //		}
+ //
+ //		// 欠損値チェック1
+ //
+ //		// 1、内臓脂肪面積、腹囲に関する情報のどちらもまったく存在しない場合には「判定不能」として完了
+ //		if(
+ //				JKaisoukaHanteiItemCheck.CheckItem(CODE_NAIZOU_SHIBOU_MENSEKI, Data.getGender(),
+ //						Data.getNaizouShibou()) == JKaisoukaHanteiItemCheck.KESSON &&
+ //				JKaisoukaHanteiItemCheck.CheckItem(CODE_HUKUI_ZISOKU, Data.getGender(),
+ //						Data.getHukui()) == JKaisoukaHanteiItemCheck.KESSON
+ //		)
+ //		{
+ //			Code = HANTEI_HUNOU;
+ //			return Code;
+ //		}
+ //
+ //		// 2、STEP1でパターン1に該当しない場合で、BMIが欠損しており、身長、体重のどちらかが存在しない場合
+ //		if(
+ //				JKaisoukaHanteiItemCheck.CheckItem(CODE_BMI, Data.getGender(),
+ //						Data.getBMI()) == JKaisoukaHanteiItemCheck.KESSON &&
+ //				(Data.getShintyou() == -1 || Data.getTaijyu() == -1)
+ //		)
+ //		{
+ //			Code = HANTEI_HUNOU;
+ //			return Code;
+ //		}
+ //
+ //		// 3、判定に使った検査、および質問票の服薬関係の3問、喫煙において欠損値がない場合
+ //		if(JKaisoukaHanteiItemCheck.IsKesson() == false)
+ //		{
+ //			return Code;
+ //		}
+ //
+ //		// 4、STEP2のカテゴリー4が欠損値項目であるために特定ができない状況が発生する場合
+ //		// カテゴリー4を使って判定を行う部分で、欠損のチェックを行っている。
+ //
+ //		// 服薬の欠損
+ //		boolean HukuyakuKesson = false;
+ //
+ //		if(
+ //			JKaisoukaHanteiItemCheck.CheckItem(CODE_HUKUYAKU_2, Data.getGender(),
+ //					Data.getKettoHukuyaku()) == JKaisoukaHanteiItemCheck.KESSON ||
+ //			JKaisoukaHanteiItemCheck.CheckItem(CODE_HUKUYAKU_1, Data.getGender(),
+ //					Data.getKetsuatsuHukuyaku()) == JKaisoukaHanteiItemCheck.KESSON ||
+ //			JKaisoukaHanteiItemCheck.CheckItem(CODE_HUKUYAKU_3, Data.getGender(),
+ //					Data.getShishitsuHukuyaku()) == JKaisoukaHanteiItemCheck.KESSON
+ //		)
+ //		{
+ //			HukuyakuKesson = true;
+ //		}
+ //
+ //		// 判定結果が「情報提供レベル」
+ //		if(Code == JYOUHOU_TEIKYOU)
+ //		{
+ //			// 5、欠損値が服薬に関するものだけであって、服薬以外の項目には欠損値がない場合
+ //			if(
+ //					HukuyakuKesson == true &&
+ //					(Step1Kesson == false && Category1Kesson == false && Category2Kesson == false &&
+ //					Category3Kesson == false && Category4Kesson == false)
+ //			)
+ //			{
+ //				return Code;
+ //			}
+ //
+ //			// 6、服薬以外の項目に欠損値がある場合
+ //			if(
+ //					(Step1Kesson == true || Category1Kesson == true || Category2Kesson == true ||
+ //					Category3Kesson == true || Category4Kesson == true)
+ //			)
+ //			{
+ //				Code = HANTEI_HUNOU;
+ //				return Code;
+ //			}
+ //		}
+ //
+ //		// 7、判定結果が「情報提供レベル」以外であって、かつ、服薬が一つでも欠損している場合
+ //		if(Code != JYOUHOU_TEIKYOU && HukuyakuKesson == true)
+ //		{
+ //			Code = HANTEI_HUNOU;
+ //			return Code;
+ //		}
+ //
+ //		// 8、積極的支援レベルであった場合、欠損値項目の有無にかかわらず完了
+ //		if(Code == SEKKYOKUTEKI_SHIEN)
+ //		{
+ //			return Code;
+ //		}
+ //
+ //
+ //		// 9、65〜74歳であって、動機づけ支援レベルであれば、欠損値項目の有無にかかわらず完了
+ //		if(65 <= Data.getAge() && Data.getAge() <= 74 && Code == DOUKIDUKE_SHIEN)
+ //		{
+ //			return Code;
+ //		}
+ //
+ //		// 欠損チェック2
+ //		// 欠損値項目が1個以上あり、結果が「非該当」または「動機づけ支援レベル」であればチェック
+ //		if(JKaisoukaHanteiItemCheck.IsKesson() == true && (Code == JYOUHOU_TEIKYOU || Code == DOUKIDUKE_SHIEN))
+ //		{
+ //			if(Step1 == 1)
+ //			{
+ //				// 欠損値項目の属するカテゴリーのひとつでもSTEP2でNOである場合
+ //				if(
+ //						(Category1 == false && Category1Kesson == true) ||
+ //						(Category2 == false && Category2Kesson == true) ||
+ //						(Category3 == false && Category3Kesson == true)
+ //				)
+ //				{
+ //					Code = HANTEI_HUNOU;
+ //					return Code;
+ //				}
+ //
+ //				// それ以外は変更なし
+ //				return Code;
+ //			}
+ //
+ //			if(Step1 == 2)
+ //			{
+ //				if(Step2Count == 0)
+ //				{
+ //					/* Modified 2008/03/31 若月 判定不能になっている理由が不明。 */
+ //					/* --------------------------------------------------- */
+ ////					Code = HANTEI_HUNOU;
+ //					/* --------------------------------------------------- */
+ //					return Code;
+ //				}
+ //
+ //				if(Step2Count == 1)
+ //				{
+ //					// Step2でNoとなっている2カテゴリの両方に欠損値がある
+ //					if(
+ //							(Category1 == true && Category2Kesson == true && Category3Kesson == true) ||
+ //							(Category2 == true && Category1Kesson == true && Category3Kesson == true) ||
+ //							(Category3 == true && Category2Kesson == true && Category1Kesson == true)
+ //					)
+ //					{
+ //						Code = HANTEI_HUNOU;
+ //						return Code;
+ //					}
+ //
+ //					// Step2でNoとなっている2カテゴリのうち1カテゴリだけに欠損値がある
+ //					if(
+ //							(Category1 == true && (Category2Kesson == true || Category3Kesson == true)) ||
+ //							(Category2 == true && (Category1Kesson == true || Category3Kesson == true)) ||
+ //							(Category3 == true && (Category2Kesson == true || Category1Kesson == true))
+ //					)
+ //					{
+ //						if(Category4 == false)
+ //						{
+ //							return Code;
+ //						}else{
+ //							Code = HANTEI_HUNOU;
+ //							return Code;
+ //						}
+ //					}
+ //
+ //					return Code;
+ //				}
+ //
+ //				if(Step2Count == 2)
+ //				{
+ //					if(
+ //							(Category1 == false && Category1Kesson == true) ||
+ //							(Category2 == false && Category2Kesson == true) ||
+ //							(Category3 == false && Category3Kesson == true)
+ //					)
+ //					{
+ //						Code = HANTEI_HUNOU;
+ //						return Code;
+ //					}
+ //
+ //					return Code;
+ //				}
+ //			}
+ //
+ //		}
+ //
+ //		return Code;
+ 		/* --------------------------------------------------- */
  		/*
  		 * 以下の階層判定はtokuteikenshin.jpのhttp://tokuteikenshin.jp/update/2-1/latest/systemdoc-appe20080205.pdfの
  		 * 資料を元にして、判定を行っている。
***************
*** 79,84 ****
--- 571,577 ----
  				else if(JKaisoukaHanteiItemCheck.CheckItem(CODE_HUKUI_ZISOKU, gender,hukui) == JKaisoukaHanteiItemCheck.KESSON){
  					Step1Kesson = true;
  				}
+ 				/* --------------------------------------------------- */
  			}
  		}
  
***************
*** 115,121 ****
  			if(kuhukuziKeto1Check == JKaisoukaHanteiItemCheck.KESSON)
  			{
  
! 				/* 空腹時血糖が存在しない場合のみ、カテゴリー１を欠損としていたため、修正 */
  				// HbA1c
  				int hba1cCheck = JKaisoukaHanteiItemCheck.CheckItem(CODE_HBA1C, gender, data.getHbA1c());
  				if(hba1cCheck == JKaisoukaHanteiItemCheck.TRUE)
--- 608,632 ----
  			if(kuhukuziKeto1Check == JKaisoukaHanteiItemCheck.KESSON)
  			{
  
! 				/* Modified 2008/07/08 若月
! 				 * 空腹時血糖が存在しない場合のみ、カテゴリー１を欠損としていたため、修正 */
! 				/* --------------------------------------------------- */
! //				// HbA1c
! //				if(JKaisoukaHanteiItemCheck.CheckItem(CODE_HBA1C, gender,
! //						data.getHbA1c()) == JKaisoukaHanteiItemCheck.TRUE)
! //				{
! //					Category1 = true;
! //				}
! //
! //				// 欠損チェック
! //				// NOの場合は、判定不能となる場合があるので、ここでチェックする。最終的に使用するのは、一番最後の欠損チェック
! //				if(
! //						kuhukuziKeto1Check == JKaisoukaHanteiItemCheck.KESSON
! //				)
! //				{
! //					Category1Kesson = true;
! //				}
! 				/* --------------------------------------------------- */
  				// HbA1c
  				int hba1cCheck = JKaisoukaHanteiItemCheck.CheckItem(CODE_HBA1C, gender, data.getHbA1c());
  				if(hba1cCheck == JKaisoukaHanteiItemCheck.TRUE)
***************
*** 130,135 ****
--- 641,648 ----
  				{
  					Category1Kesson = true;
  				}
+ 				/* --------------------------------------------------- */
+ 
  			}
  
  			if(kuhukuziKeto1Check == JKaisoukaHanteiItemCheck.FALSE)
***************
*** 391,396 ****
--- 904,924 ----
  			return Code;
  		}
  
+ 		/* Modified 2008/06/03 若月  */
+ 		/* --------------------------------------------------- */
+ //		// 8、積極的支援レベルであった場合、欠損値項目の有無にかかわらず完了
+ //		if(Code == SEKKYOKUTEKI_SHIEN)
+ //		{
+ //			return Code;
+ //		}
+ //
+ //
+ //		// 9、65〜74歳であって、動機づけ支援レベルであれば、欠損値項目の有無にかかわらず完了
+ //		if(65 <= data.getAge() && data.getAge() <= 74 && Code == DOUKIDUKE_SHIEN)
+ //		{
+ //			return Code;
+ //		}
+ 		/* --------------------------------------------------- */
  		// 9、65〜74歳であって、動機づけ支援レベルであれば、欠損値項目の有無にかかわらず完了
  		// edit ver2 s.inoue 2009/08/19 75歳条件含む
  		// if(65 <= data.getAge() && data.getAge() <= 74 && ( Code == DOUKIDUKE_SHIEN || Code == SEKKYOKUTEKI_SHIEN ) )
***************
*** 407,412 ****
--- 935,941 ----
  		{
  			return Code;
  		}
+ 		/* --------------------------------------------------- */
  
  		// 欠損チェック2
  		// 欠損値項目が1個以上あり、結果が「非該当」または「動機づけ支援レベル」であればチェック
***************
*** 433,438 ****
--- 962,971 ----
  			{
  				if(Step2Count == 0)
  				{
+ 					/* Modified 2008/03/31 若月 判定不能になっている理由が不明。 */
+ 					/* --------------------------------------------------- */
+ //					Code = HANTEI_HUNOU;
+ 					/* --------------------------------------------------- */
  					return Code;
  				}
  
***************
*** 487,491 ****
--- 1020,1025 ----
  		}
  
  		return Code;
+ 		/* --------------------------------------------------- */
  	}
  }
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/kekkahantei/JKaisoukaHanteiItemCheck.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/kekkahantei/JKaisoukaHanteiItemCheck.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/kekkahantei/JKaisoukaHanteiItemCheck.java	Thu Nov 19 11:47:48 2009
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/kekkahantei/JKaisoukaHanteiItemCheck.java	Tue Aug 11 17:55:30 2009
***************
*** 49,56 ****
  			return KESSON;
  		}
  
! 		/* 単位は存在しない場合がある。
  		 * よって、ここでは単位の有無による検証を行わない。 */
  		// 該当する項目を探す
  		double kijun = -1;
  		String tanni = null;
--- 49,124 ----
  			return KESSON;
  		}
  
! 		/* Modified 2008/03/22 若月 単位は存在しない場合がある。
  		 * よって、ここでは単位の有無による検証を行わない。 */
+ 		/* --------------------------------------------------- */
+ //		// 該当する項目を探す
+ //		double Kijun = -1;
+ //		String Tani = null;
+ //
+ //		for(int i = 0 ; i < Items.size() ; i++)
+ //		{
+ //			if(Items.get(i).get(0).equals(KoumokuCode) && Items.get(i).get(1).equals(Gender))
+ //			{
+ //				try
+ //				{
+ //					Kijun = Double.valueOf(Items.get(i).get(2));
+ //					Tani = Items.get(i).get(3);
+ //				}catch(Exception e)
+ //				{
+ //					throw new RuntimeException();
+ //				}
+ //			}
+ //		}
+ //
+ //		if(Tani == null || Kijun == -1)
+ //		{
+ //			throw new RuntimeException();
+ //		}
+ //
+ //		if(Tani.equals("以上"))
+ //		{
+ //			if(Kijun <= Value)
+ //			{
+ //				return True;
+ //			}else
+ //			{
+ //				return False;
+ //			}
+ //		}
+ //		if(Tani.equals("未満"))
+ //		{
+ //			if(Kijun > Value)
+ //			{
+ //				return True;
+ //			}else
+ //			{
+ //				return False;
+ //			}
+ //		}
+ //		if(Tani.equals("以下"))
+ //		{
+ //			if(Kijun >= Value)
+ //			{
+ //				return True;
+ //			}else
+ //			{
+ //				return False;
+ //			}
+ //		}
+ //		if(Tani.equals(""))
+ //		{
+ //			if(Kijun == Value)
+ //			{
+ //				return True;
+ //			}else
+ //			{
+ //				return False;
+ //			}
+ //		}
+ //
+ //		throw new RuntimeException();
+ 		/* --------------------------------------------------- */
  		// 該当する項目を探す
  		double kijun = -1;
  		String tanni = null;
***************
*** 137,141 ****
--- 205,210 ----
  		}
  
  		throw new RuntimeException();
+ 		/* --------------------------------------------------- */
  	}
  }
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/outputhl7/JOutputHL7.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/outputhl7/JOutputHL7.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/outputhl7/JOutputHL7.java	Tue Apr  6 10:16:58 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/outputhl7/JOutputHL7.java	Wed Feb 24 17:45:24 2010
***************
*** 665,675 ****
  		String hokenjyaFutanKihon = kessaiData.get("HOKENJYA_FUTAN_KIHON");
  		if (hokenjyaFutanKihon != null && ! hokenjyaFutanKihon.isEmpty()) {
  			hokenjyaFutanKihon = hokenjyaFutanKihon.replaceAll("^0+", "");
! 			// edit s.inoue 2010/04/06
! 			if (!hokenjyaFutanKihon.equals("")){
! 				if (Integer.valueOf(hokenjyaFutanKihon) >= 0)
! 					inputMadoHutanKihonSyubetsu = "4";
! 			}
  		}
  		processData.outputFutanSyubetsuKihon = JInteger.valueOf(inputMadoHutanKihonSyubetsu);
  
--- 665,672 ----
  		String hokenjyaFutanKihon = kessaiData.get("HOKENJYA_FUTAN_KIHON");
  		if (hokenjyaFutanKihon != null && ! hokenjyaFutanKihon.isEmpty()) {
  			hokenjyaFutanKihon = hokenjyaFutanKihon.replaceAll("^0+", "");
! 			if (Integer.valueOf(hokenjyaFutanKihon) >= 0)
! 				inputMadoHutanKihonSyubetsu = "4";
  		}
  		processData.outputFutanSyubetsuKihon = JInteger.valueOf(inputMadoHutanKihonSyubetsu);
  
***************
*** 679,689 ****
  		String hokenjyaFutanSyousai = kessaiData.get("HOKENJYA_FUTAN_SYOUSAI");
  		if (hokenjyaFutanSyousai != null && ! hokenjyaFutanSyousai.isEmpty()) {
  			hokenjyaFutanSyousai = hokenjyaFutanSyousai.replaceAll("^0+", "");
! 			// edit s.inoue 2010/04/06
! 			if (!hokenjyaFutanSyousai.equals("")){
! 				if (Integer.valueOf(hokenjyaFutanSyousai) >= 0)
! 					inputMadoHutanSyosaiSyubetsu = "4";
! 			}
  		}
  		processData.outputFutanSyubetsuSyousai = JInteger.valueOf(inputMadoHutanSyosaiSyubetsu);
  
--- 676,683 ----
  		String hokenjyaFutanSyousai = kessaiData.get("HOKENJYA_FUTAN_SYOUSAI");
  		if (hokenjyaFutanSyousai != null && ! hokenjyaFutanSyousai.isEmpty()) {
  			hokenjyaFutanSyousai = hokenjyaFutanSyousai.replaceAll("^0+", "");
! 			if (Integer.valueOf(hokenjyaFutanSyousai) >= 0)
! 				inputMadoHutanSyosaiSyubetsu = "4";
  		}
  		processData.outputFutanSyubetsuSyousai = JInteger.valueOf(inputMadoHutanSyosaiSyubetsu);
  
***************
*** 693,703 ****
  		String hokenjyaFutanTsuika = kessaiData.get("HOKENJYA_FUTAN_TSUIKA");
  		if (hokenjyaFutanTsuika != null && ! hokenjyaFutanTsuika.isEmpty()) {
  			hokenjyaFutanTsuika = hokenjyaFutanTsuika.replaceAll("^0+", "");
! 			// edit s.inoue 2010/04/06
! 			if (!hokenjyaFutanTsuika.equals("")){
! 				if (Integer.valueOf(hokenjyaFutanTsuika) >= 0)
! 					inputMadoHutanTsuikaSyubetu = "4";
! 			}
  		}
  		processData.outputFutanSyubetsuTsuika = JInteger.valueOf(inputMadoHutanTsuikaSyubetu);
  
--- 687,694 ----
  		String hokenjyaFutanTsuika = kessaiData.get("HOKENJYA_FUTAN_TSUIKA");
  		if (hokenjyaFutanTsuika != null && ! hokenjyaFutanTsuika.isEmpty()) {
  			hokenjyaFutanTsuika = hokenjyaFutanTsuika.replaceAll("^0+", "");
! 			if (Integer.valueOf(hokenjyaFutanTsuika) >= 0)
! 				inputMadoHutanTsuikaSyubetu = "4";
  		}
  		processData.outputFutanSyubetsuTsuika = JInteger.valueOf(inputMadoHutanTsuikaSyubetu);
  
***************
*** 707,717 ****
  		String hokenjyaFutanDoc = kessaiData.get("HOKENJYA_FUTAN_DOC");
  		if (hokenjyaFutanDoc != null && ! hokenjyaFutanDoc.isEmpty()) {
  			hokenjyaFutanDoc = hokenjyaFutanDoc.replaceAll("^0+", "");
! 			// edit s.inoue 2010/04/06
! 			if (!hokenjyaFutanDoc.equals("")){
! 				if (Integer.valueOf(hokenjyaFutanDoc) >= 0)
! 					inputMadoHutanDockSyubetu = "4";
! 			}
  		}
  		processData.outputFutanSyubetsuDoc = JInteger.valueOf(inputMadoHutanDockSyubetu);
  
--- 698,705 ----
  		String hokenjyaFutanDoc = kessaiData.get("HOKENJYA_FUTAN_DOC");
  		if (hokenjyaFutanDoc != null && ! hokenjyaFutanDoc.isEmpty()) {
  			hokenjyaFutanDoc = hokenjyaFutanDoc.replaceAll("^0+", "");
! 			if (Integer.valueOf(hokenjyaFutanDoc) >= 0)
! 				inputMadoHutanDockSyubetu = "4";
  		}
  		processData.outputFutanSyubetsuDoc = JInteger.valueOf(inputMadoHutanDockSyubetu);
  
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/print/PrintDefine.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/print/PrintDefine.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/print/PrintDefine.java	Tue Jan  5 14:20:28 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/print/PrintDefine.java	Fri Oct 30 14:05:00 2009
***************
*** 18,38 ****
  	public static final String LIVER_FAILURE = "腎不全・人工透析について既往歴あり";
  	public static final String CARDIOVASCULAR_SYSTEM = "心血管について既往歴あり";
  	public static final String CEREBRAL_BLOOD_VESSEL = "脳血管について既往歴あり";
- 	// add h.yoshitama 2009/11/24
- 	public static final String NO_ANEMIA = "貧血について既往歴なし";
- 	public static final String NO_LIVER_FAILURE = "腎不全・人工透析について既往歴なし";
- 	public static final String NO_CARDIOVASCULAR_SYSTEM = "心血管について既往歴なし";
- 	public static final String NO_CEREBRAL_BLOOD_VESSEL = "脳血管について既往歴なし";
- 	public static final String NO_TOKKIJIKO = "特記すべきことなし";
- 	public static final String NO_HUKUYAKU = "服薬なし";
  
  	public static final String WORK_PDF_INKEKKA2PAGE_PDF = "."+File.separator+"work"+File.separator+"PDF"+File.separator+"inkekka2page.pdf";
  	public static final String WORK_PDF_INKEKKA3PAGE_PDF = "."+File.separator+"work"+File.separator+"PDF"+File.separator+"inkekka3page.pdf";
  	public static final String WORK_PDF_INKEKKA4PAGE_PDF = "."+File.separator+"work"+File.separator+"PDF"+File.separator+"inkekka4page.pdf";
  	public static final String WORK_PDF_TMP_DUMMY_PDF = "."+File.separator+"work"+File.separator+"PDF"+File.separator+"tmp"+File.separator+"dummy.pdf";
- 	// add s.inoue 2009/12/25
- 	public static final String WORK_PDF_DUMMY2_PDF = "."+File.separator+"work"+File.separator+"PDF"+File.separator+"tmp"+File.separator+"inKekkaTemplate_2.pdf";
- 
  	public static final String WORK_PDF_TMP_INKEKKA2PAGE_PDF = "."+File.separator+"work"+File.separator+"PDF"+File.separator+"tmp"+File.separator+"inkekka2page.pdf";
  	public static final String WORK_PDF_TMP_INKEKKA3PAGE_PDF = "."+File.separator+"work"+File.separator+"PDF"+File.separator+"tmp"+File.separator+"inkekka3page.pdf";
  	public static final String WORK_PDF_TMP_INKEKKA4PAGE_PDF = "."+File.separator+"work"+File.separator+"PDF"+File.separator+"tmp"+File.separator+"inkekka4page.pdf";
--- 18,28 ----
***************
*** 92,101 ****
  	public static final String CODE_KIOUREKI3_ZINHUZEN_ZINKOTOSEKI = "9N726000000000011";
  	public static final String CODE_KIOUREKI2_SINKEKAN = "9N721000000000011";
  	public static final String CODE_KIOUREKI1_NOKEKAN = "9N716000000000011";
- 	// add h.yoshitama 2009/11/24
- 	public static final String CODE_TAKAKU_UMU = "9N066000000000011";
- 	public static final String CODE_ZIKAKU_UMU = "9N061000000000011";
- 
  	/* テーブル項目 */
  	public static final String COLUMN_NAME_KOUMOKU_NAME = "KOUMOKU_NAME";
  	public static final String COLUMN_NAME_KENSA_HOUHOU = "KENSA_HOUHOU";
--- 82,87 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/print/PrintHitokutei.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/print/PrintHitokutei.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/print/PrintHitokutei.java	Wed Apr 21 18:31:02 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/print/PrintHitokutei.java	Wed Feb 24 17:45:24 2010
***************
*** 59,65 ****
  	 * @return pdfPathList
  	 */
  	public List startAddMedical(List kensaNenList, Hashtable<String, String> kojinData,
! 			Hashtable<String, String> kikanData, String ishiName,int printSelect ){
  
  		String kensaNengappi = "";
  		String zKensaNengappi = "";
--- 59,65 ----
  	 * @return pdfPathList
  	 */
  	public List startAddMedical(List kensaNenList, Hashtable<String, String> kojinData,
! 			Hashtable<String, String> kikanData, String ishiName  ){
  
  		String kensaNengappi = "";
  		String zKensaNengappi = "";
***************
*** 200,206 ****
  		//生活基本の項目がひとつでもあれば、基本チェックリスト作成。
  		if (div > sDiv) {
  			if(seikatuKihonList.size()>0){
! 				kihonPdf = pKChkList.createChkList(kensaNenList, kojinData, kikanData, ishiName ,commonMaxPageNum++,printSelect);
  				syokenMaxPageNum++;
  				// add ver2 s.inoue 2009/06/25
  				koumokuMaxPageNum++;
--- 200,206 ----
  		//生活基本の項目がひとつでもあれば、基本チェックリスト作成。
  		if (div > sDiv) {
  			if(seikatuKihonList.size()>0){
! 				kihonPdf = pKChkList.createChkList(kensaNenList, kojinData, kikanData, ishiName ,commonMaxPageNum++);
  				syokenMaxPageNum++;
  				// add ver2 s.inoue 2009/06/25
  				koumokuMaxPageNum++;
***************
*** 208,214 ****
  		}
  		else {
  			if(seikatuKihonList.size()>0){
! 				kihonPdf = pKChkList.createChkList(kensaNenList, kojinData, kikanData, ishiName ,commonMaxPageNum++,printSelect);
  				// edit ver2 s.inoue 2009/07/28 所見ページもカウント
  				syokenMaxPageNum++;
  				koumokuMaxPageNum++;
--- 208,214 ----
  		}
  		else {
  			if(seikatuKihonList.size()>0){
! 				kihonPdf = pKChkList.createChkList(kensaNenList, kojinData, kikanData, ishiName ,commonMaxPageNum++);
  				// edit ver2 s.inoue 2009/07/28 所見ページもカウント
  				syokenMaxPageNum++;
  				koumokuMaxPageNum++;
***************
*** 456,462 ****
  		}
  
  		// edit h.yoshitama 2009/09/15
! 		// 所見ベースのループを実装する。項目を駆動にする
  		if(sDiv+syokenFlg<=div+kFlg){
  
  			for(int i = 0;i<div;i++){
--- 456,464 ----
  		}
  
  		// edit h.yoshitama 2009/09/15
! 		/* Modified 2008/08/06 若月
! 		 * 所見ベースのループを実装する。 */
! 		//項目を駆動にする
  		if(sDiv+syokenFlg<=div+kFlg){
  
  			for(int i = 0;i<div;i++){
***************
*** 464,477 ****
  				cnt++;
  				startNum = 20*cnt;
  
- 				System.out.println("startNum:" + startNum
- 						+"pageNum" + pageNum
- 						+"koumokuMaxPageNum" + koumokuMaxPageNum
- 						+"sStrNum" + sStrNum
- 						);
- 
  				createPdf(kensaNenList, tmpPath, allMap,startNum,
! 						i,surPlus,kojinData,kikanData,ishiName,pageNum,koumokuMaxPageNum,0,syokenList,sStrNum,itemMergedCodes,printSelect,20);
  
  				//sStrNum = 4*cnt;
  				sStrNum = 3*cnt;
--- 466,473 ----
  				cnt++;
  				startNum = 20*cnt;
  
  				createPdf(kensaNenList, tmpPath, allMap,startNum,
! 						i,surPlus,kojinData,kikanData,ishiName,pageNum,koumokuMaxPageNum,0,syokenList,sStrNum,itemMergedCodes);
  
  				//sStrNum = 4*cnt;
  				sStrNum = 3*cnt;
***************
*** 487,508 ****
  //				if (cnt >= 4){
  //					sStrNum ++;
  //				}
- 
- 				// add s.inoue 2010/04/20
- 				int sabunNum = itemMergedCodes.size() - 20*cnt;
- 				startNum = itemMergedCodes.size();
- 
- 				System.out.println("startNum:" + startNum
- 						+"pageNum" + pageNum
- 						+"koumokuMaxPageNum" + koumokuMaxPageNum
- 						+"sStrNum" + sStrNum
- 						);
- 
  				if (cnt >= 3){
  					sStrNum ++;
  				}
  				createPdf(kensaNenList, tmpPath, allMap,startNum,
! 						cnt,surPlus,kojinData,kikanData,ishiName,pageNum,koumokuMaxPageNum,1,syokenList,sStrNum,itemMergedCodes,printSelect,sabunNum);
  			}
  
  		//所見を駆動にする
--- 483,493 ----
  //				if (cnt >= 4){
  //					sStrNum ++;
  //				}
  				if (cnt >= 3){
  					sStrNum ++;
  				}
  				createPdf(kensaNenList, tmpPath, allMap,startNum,
! 						cnt,surPlus,kojinData,kikanData,ishiName,pageNum,koumokuMaxPageNum,1,syokenList,sStrNum,itemMergedCodes);
  			}
  
  		//所見を駆動にする
***************
*** 526,532 ****
  //				sStrNum = 4 * cnt;
  				sStrNum = 3 * cnt;
  				createPdfBasedSyokenRoop(kensaNenList, tmpPath, allMap,startNum + 20,
! 						i,surPlus,kojinData,kikanData,ishiName,pageNum,syokenMaxPageNum,0,syokenList,sStrNum,itemMergedCodes,printSelect);
  			}
  		}
  
--- 511,517 ----
  //				sStrNum = 4 * cnt;
  				sStrNum = 3 * cnt;
  				createPdfBasedSyokenRoop(kensaNenList, tmpPath, allMap,startNum + 20,
! 						i,surPlus,kojinData,kikanData,ishiName,pageNum,syokenMaxPageNum,0,syokenList,sStrNum,itemMergedCodes);
  			}
  		}
  
***************
*** 952,958 ****
  	private void createPdf(List kensaNenList, String tmpPath, Hashtable allMap,
  			int startNum,int cnt,int surplus,Hashtable<String, String> kojinData,
  			Hashtable<String, String> kikanData,String ishiName,int pageNum,
! 			int div,int isflg, List<TreeMap<String, String>> tmpSyoken, int sStrNum, List<String> itemCodes ,int printSelect,int sabunNum) {
  
  		try {
  			PdfReader reader = new PdfReader(WORK_PDF_HITOKUTEI_PDF);
--- 937,943 ----
  	private void createPdf(List kensaNenList, String tmpPath, Hashtable allMap,
  			int startNum,int cnt,int surplus,Hashtable<String, String> kojinData,
  			Hashtable<String, String> kikanData,String ishiName,int pageNum,
! 			int div,int isflg, List<TreeMap<String, String>> tmpSyoken, int sStrNum, List<String> itemCodes ) {
  
  		try {
  			PdfReader reader = new PdfReader(WORK_PDF_HITOKUTEI_PDF);
***************
*** 961,985 ****
  			AcroFields form = stamp.getAcroFields();
  
  			//ヘッダー項目、ページ数など印字
! 			makeHaeder(kensaNenList, kojinData, kikanData, ishiName, pageNum, div, form, printSelect);
! 			// edit s.inoue 2010/04/20
! 			int num = sabunNum;
! 			// int num = 20;
! 
! 			// edit s.inoue 2010/04/20
! 			// startNum = startNum - 20;
! 			startNum = startNum - sabunNum;
! 			if (startNum < sabunNum){
  				startNum = 0;
- 			}else{
- 				if(startNum<=0&&isflg==1){
- 					num = surplus;
- 					startNum = startNum + 20;
- 
- 				}else if(startNum<0){
- 					num = surplus;
- 					startNum = 0;
- 				}
  			}
  
  			// edit ver2 s.inoue 2009/06/11
--- 946,963 ----
  			AcroFields form = stamp.getAcroFields();
  
  			//ヘッダー項目、ページ数など印字
! 			makeHaeder(kensaNenList, kojinData, kikanData, ishiName, pageNum, div, form);
! 
! 			int num = 20;
! 			startNum = startNum - 20;
! 
! 			if(startNum<=0&&isflg==1){
! 				num = surplus;
! 				startNum = startNum + 20;
! 
! 			}else if(startNum<0){
! 				num = surplus;
  				startNum = 0;
  			}
  
  			// edit ver2 s.inoue 2009/06/11
***************
*** 1223,1229 ****
  	private void createPdfBasedSyokenRoop(List kensaNenList, String tmpPath, Hashtable allMap,
  			int startNum,int cnt,int surplus,Hashtable<String, String> kojinData,
  			Hashtable<String, String> kikanData,String ishiName,int pageNum,
! 			int div,int isflg, List tmpSyoken, int sStrNum, List<String> itemCodes,int printSelect ) {
  
  		try {
  			PdfReader reader = new PdfReader(WORK_PDF_HITOKUTEI_PDF);
--- 1201,1207 ----
  	private void createPdfBasedSyokenRoop(List kensaNenList, String tmpPath, Hashtable allMap,
  			int startNum,int cnt,int surplus,Hashtable<String, String> kojinData,
  			Hashtable<String, String> kikanData,String ishiName,int pageNum,
! 			int div,int isflg, List tmpSyoken, int sStrNum, List<String> itemCodes ) {
  
  		try {
  			PdfReader reader = new PdfReader(WORK_PDF_HITOKUTEI_PDF);
***************
*** 1232,1238 ****
  			AcroFields form = stamp.getAcroFields();
  
  			//ヘッダー項目、ページ数など印字
! 			makeHaeder(kensaNenList, kojinData, kikanData, ishiName, pageNum, div, form, printSelect);
  
  			int num = 20;
  			int itemCodesSize = itemCodes.size();
--- 1210,1216 ----
  			AcroFields form = stamp.getAcroFields();
  
  			//ヘッダー項目、ページ数など印字
! 			makeHaeder(kensaNenList, kojinData, kikanData, ishiName, pageNum, div, form);
  
  			int num = 20;
  			int itemCodesSize = itemCodes.size();
***************
*** 1254,1260 ****
  			startNum = (pageNum - 1) * 20;
  
  			for(int i=0;i<num;i++){
- 
  				//結果 印字
  				String strKekka = kekkaOut(allMap, startNum, form, i,"DATATYPE_LIST","valsesList","KEKA_","JISI_KBN",itemCodes);
  				// edit s.inoue 2009/11/30
--- 1232,1237 ----
***************
*** 1413,1419 ****
  	 * @throws DocumentException
  	 */
  	private void makeHaeder(List kensaNenList, Hashtable<String, String> kojinData, Hashtable<String, String>
! 	kikanData, String ishiName, int pageNum, int div, AcroFields form, int printSelect)
  	throws IOException, DocumentException {
  		form.setField("KENSHIN" , kikanData.get("KIKAN_NAME"));
  		form.setField("KANA_NAME",kojinData.get("KANANAME"));
--- 1390,1396 ----
  	 * @throws DocumentException
  	 */
  	private void makeHaeder(List kensaNenList, Hashtable<String, String> kojinData, Hashtable<String, String>
! 	kikanData, String ishiName, int pageNum, int div, AcroFields form)
  	throws IOException, DocumentException {
  		form.setField("KENSHIN" , kikanData.get("KIKAN_NAME"));
  		form.setField("KANA_NAME",kojinData.get("KANANAME"));
***************
*** 1422,1438 ****
  		form.setField("kNENGAPPI",isVal(kensaNenList,0));
  		form.setField("zNENGAPPI",isVal(kensaNenList,1));
  		form.setField("zzNENGAPPI", isVal(kensaNenList,2));
! 
! 		// edit s.inoue 2010/01/05
! 		// ページ設定（印刷方式変更対応）
! 		int sabunPageNum = 1;
! 		int sabunDivNum = 1;
! 		if (printSelect == 2) {
! 			sabunPageNum++;
! 			sabunDivNum++;
! 		}
! 		form.setField("PAGE_KO",  Integer.toString(pageNum+sabunPageNum));
! 		form.setField("PAGE_OYA", Integer.toString(div+sabunDivNum));
  	}
  
  	/**
--- 1399,1406 ----
  		form.setField("kNENGAPPI",isVal(kensaNenList,0));
  		form.setField("zNENGAPPI",isVal(kensaNenList,1));
  		form.setField("zzNENGAPPI", isVal(kensaNenList,2));
! 		form.setField("PAGE_KO",  Integer.toString(pageNum+1));
! 		form.setField("PAGE_OYA", Integer.toString(div+1));
  	}
  
  	/**
***************
*** 1521,1529 ****
  		//項目コード取得
  		String strCd =  (String)itemCodes.get(startNum);
  
! 		if(strKekka==null||strKekka.equals("")){
  			return "";
! 		}
  
  		// edit h.yoshitama 2009/09/11
  		/*
--- 1489,1500 ----
  		//項目コード取得
  		String strCd =  (String)itemCodes.get(startNum);
  
! 		// edit s.inoue 2009/11/27
! 		if(strKekka==null)
  			return "";
! 
! 		if(strKekka.equals(""))
! 			return null;
  
  		// edit h.yoshitama 2009/09/11
  		/*
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/print/PrintKekka.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/print/PrintKekka.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/print/PrintKekka.java	Wed Jan  6 10:06:40 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/print/PrintKekka.java	Mon Oct 19 14:53:12 2009
***************
*** 20,45 ****
  import java.util.regex.Pattern;
  import java.util.Collections;
  import java.util.Comparator;
- 
- import javax.swing.JButton;
  import javax.swing.JFrame;
  
- import org.apache.log4j.Logger;
- 
  import jp.or.med.orca.jma_tokutei.common.app.JApplication;
  import jp.or.med.orca.jma_tokutei.common.app.JPath;
  import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
  import jp.or.med.orca.jma_tokutei.common.frame.ProgressWindow;
  import jp.or.med.orca.jma_tokutei.common.hl7.common.Utility;
  import jp.or.med.orca.jma_tokutei.common.printer.JTKenshinPrint;
- import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame.JSearchResultListFrameCtrl;
  import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.printdata.AddMedical;
  import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.printdata.KenshinKekka;
  import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.printdata.KihonKensaKoumoku;
  import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.printdata.Kikan;
  import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.printdata.Kojin;
- import jp.or.med.orca.jma_tokutei.common.component.DialogFactory;
- import jp.or.med.orca.jma_tokutei.common.component.IDialog;
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
  import jp.or.med.orca.jma_tokutei.common.convert.JZenkakuKatakanaToHankakuKatakana;
  
--- 20,38 ----
***************
*** 55,87 ****
  	/* 改行文字 */
  //	public static String LINE_SEPARATOR = System.getProperties().getProperty("line.separator");
  
- 	private static org.apache.log4j.Logger logger = Logger.getLogger(PrintKekka.class);
  
  	private String templatePath = ""; // ディレクトリパス
  	private String outputPath = ""; // ディレクトリパス
  	private String infilename = "inKekkaTemplate.pdf";
  	private String outfilename = "outKekkaTemplate.pdf";
! 	// add s.inoue 2009/12/25
! 	private String templatePath_1 = ""; // ディレクトリパス
! 	private String templatePath_2 = ""; // ディレクトリパス
! 	private String infilename_single = "inKekkaTemplate_1.pdf";
! 	private String infilename_double = "inKekkaTemplate_2.pdf";
  
  	private String kensaNengapiLast = "";
  	private String kensaNengapiLast2 = "";
  	private String kensaNengapiLast3 = "";
- 	// edit s.inoue 2009/12/25
- 	// 印刷方法
- 	private int printSelect;
- 
- 	File printFile = null;
  	//	 add s.inoue 20080904
  	// 実施区分
  	private static final String KEKKA_OUTPUT_JISI_KBN_0 = "未実施";
  	private static final String KEKKA_OUTPUT_JISI_KBN_2 = "測定不可能";
  
  	KenshinKekka kenshinKekka = new KenshinKekka();
  	AddMedical addMedical = new AddMedical();
  	PrintHitokutei printHitokutei = new PrintHitokutei();
  
  	/* Added 2008/05/08 若月  */
--- 48,76 ----
  	/* 改行文字 */
  //	public static String LINE_SEPARATOR = System.getProperties().getProperty("line.separator");
  
  
  	private String templatePath = ""; // ディレクトリパス
+ 
  	private String outputPath = ""; // ディレクトリパス
+ 
  	private String infilename = "inKekkaTemplate.pdf";
+ 
  	private String outfilename = "outKekkaTemplate.pdf";
! 
! 	File printFile = null;
  
  	private String kensaNengapiLast = "";
  	private String kensaNengapiLast2 = "";
  	private String kensaNengapiLast3 = "";
  	//	 add s.inoue 20080904
  	// 実施区分
  	private static final String KEKKA_OUTPUT_JISI_KBN_0 = "未実施";
  	private static final String KEKKA_OUTPUT_JISI_KBN_2 = "測定不可能";
  
  	KenshinKekka kenshinKekka = new KenshinKekka();
+ 
  	AddMedical addMedical = new AddMedical();
+ 
  	PrintHitokutei printHitokutei = new PrintHitokutei();
  
  	/* Added 2008/05/08 若月  */
***************
*** 112,125 ****
  		PropertyUtil util = new PropertyUtil(JPath.PATH_FILE_PROPERTIES);
  
  		templatePath = util.getProperty("filePath");
! 
! 		// edit s.inoue 2009/12/25
! 		if (this.printSelect == 2){
! 			templatePath_1 = templatePath + infilename_single;
! 			templatePath_2 = templatePath + infilename_double;
! 		}else{
! 			templatePath = templatePath + infilename;
! 		}
  
  		outputPath = "."+File.separator+"Data"+File.separator+"PDF"+File.separator+"" + outfilename;
  
--- 101,107 ----
  		PropertyUtil util = new PropertyUtil(JPath.PATH_FILE_PROPERTIES);
  
  		templatePath = util.getProperty("filePath");
! 		templatePath = templatePath + infilename;
  
  		outputPath = "."+File.separator+"Data"+File.separator+"PDF"+File.separator+"" + outfilename;
  
***************
*** 154,163 ****
--- 136,149 ----
  
  		/*
  		 * 1page目の特定健康診査受診結果を印刷
+ 		 *
  		 * 医師の氏名を取得するため暫定的に起動する。
+ 		 *
  		 */
  		create1Page( stamp, KikanData, kojinData, uketukeId, kensaNengapi,0);
  
+ 		/* --------------------------------------------------- */
+ 
  		int jugePdfUnit = 0;//PDFを結合するか判定
  
  		//非特定健診ページ追加
***************
*** 173,197 ****
  			kensaNenList.add(kensaNengapiLast3);
  		}
  
! 		// edit s.inoue 2009/12/29
! 		List pdfPathSplitList = new ArrayList();
! 		List pdfPathHitokuteiList = new ArrayList();
! 
! 		// edit s.inoue 2010/01/05
! 		pdfPathHitokuteiList = printHitokutei.startAddMedical(kensaNenList,kojinData,KikanData,ishiName,printSelect);
! 
! 		if (printSelect == 2){
! 			filePathList.add(create2Page(stamp, KikanData, kojinData, uketukeId, kensaNengapi,pdfPathHitokuteiList.size()+printSelect).get(0));
! 		}
! 		for (int i = 0; i < pdfPathHitokuteiList.size(); i++) {
! 			filePathList.add(pdfPathHitokuteiList.get(i));
! 		}
  
  		/*
  		 * 1page目の特定健康診査受診結果を印刷
  		 */
  		create1Page( stamp, KikanData, kojinData, uketukeId, kensaNengapi,filePathList.size());
! 		// ファイル結合
  		unitPdf(jugePdfUnit,filePathList);
  
  		// 印刷実施した結果通知日を登録
--- 159,171 ----
  			kensaNenList.add(kensaNengapiLast3);
  		}
  
! 		filePathList = printHitokutei.startAddMedical(kensaNenList,kojinData,KikanData,ishiName);
  
  		/*
  		 * 1page目の特定健康診査受診結果を印刷
  		 */
  		create1Page( stamp, KikanData, kojinData, uketukeId, kensaNengapi,filePathList.size());
! 
  		unitPdf(jugePdfUnit,filePathList);
  
  		// 印刷実施した結果通知日を登録
***************
*** 224,288 ****
  		return printFile;
  	}
  
! //	// add s.inoue 2009/12/25
! //	private List create2Page(
! //			AcroFields form,
! //			KenshinKekka tmpKenshinKekka,
! //			ArrayList<Hashtable<String, Hashtable<String, String>>> kenshinKekkaData,
! //			String[] kensaNengapiAll,
! //			Hashtable<String, Hashtable<String, String>> dataItemMap,
! //			List ketuatuHL_List,
! //			List KetyuHL_List,
! //			List kankinouHL_List,
! //			List KetouHL_List,
! //			List NyoHL_List,
! //			List ketuatuVal_List,
! //			List KetyuVal_List,
! //			List kankinouVal_List,
! //			List KetouVal_List,
! //			List NyoVal_List
! //	) throws Exception{
! //
! //		List pdfPathList = new ArrayList();
! //
! //		try {
! //			// edit s.inoue 2010/01/05
! //			PdfReader reader = new PdfReader(PrintDefine.WORK_PDF_DUMMY2_PDF);
! //
! //			// edit s.inoue 2009/12/29
! //			FileOutputStream fileOutputStream = new FileOutputStream(templatePath_2 + this.printSelect);
! //			// FileOutputStream fileOutputStream = new FileOutputStream(templatePath_2);
! //
! //			// edit s.inoue 2009/12/29
! //			// PdfStamper stamp = new PdfStamper(reader, new FileOutputStream(templatePath_2 + this.printSelect));
! //			PdfStamper stamp = new PdfStamper(reader, fileOutputStream);
! //
! //			// del s.inoue 2010/01/05
! //			// AcroFields form = stamp.getAcroFields();
! //
! //			/* ヘッダー情報出力 */
! //			this.printKikanData(KikanData, form);
! //
! //			create2PageSetting(form, tmpKenshinKekka,kenshinKekkaData,kensaNengapiAll,dataItemMap,
! //					ketuatuHL_List,KetyuHL_List,kankinouHL_List,KetouHL_List,NyoHL_List,
! //					ketuatuVal_List,KetyuVal_List,kankinouVal_List,KetouVal_List,NyoVal_List);
! //
! //			stamp.setFormFlattening(true);
! //
! //			stamp.close();
! //			reader.close();
! //			fileOutputStream.close();
! //		}
! //		catch (Exception e){
! //			logger.error(e.getMessage());
! //			e.printStackTrace();
! //		}
! //		// edit s.inoue 2010/01/05
! //		 pdfPathList.add(templatePath_2 + this.printSelect);
! //		return pdfPathList;
! //	}
  	/**
! 	 * 特定健康診査受診結果(右ページ)を作成する　
  	 *
  	 * @param stamp
  	 * @param KikanData
--- 198,206 ----
  		return printFile;
  	}
  
! //	private File create1Page(String ishiName, PdfStamper stamp, Hashtable<String, String> KikanData, Hashtable<String, String> kojinData, String uketukeId, String kensaNengapi) {
  	/**
! 	 * 特定健康診査受診結果を作成する　
  	 *
  	 * @param stamp
  	 * @param KikanData
***************
*** 291,297 ****
  	 * @param kensaNengapi
  	 * @return
  	 */
! 	private List create2Page(PdfStamper stamp, Hashtable<String, String> KikanData,
  			Hashtable<String, String> kojinData,
  			String uketukeId, String kensaNengapi,
  			int maxPage) {
--- 209,215 ----
  	 * @param kensaNengapi
  	 * @return
  	 */
! 	private File create1Page(PdfStamper stamp, Hashtable<String, String> KikanData,
  			Hashtable<String, String> kojinData,
  			String uketukeId, String kensaNengapi,
  			int maxPage) {
***************
*** 320,327 ****
  		KetouVal_List.clear();
  		NyoVal_List.clear();
  
- 		List pdfPathList = new ArrayList();
- 
  		try {
  			if (KikanData == null) {
  				System.out.println("KikanData is null.");
--- 238,243 ----
***************
*** 329,348 ****
  			}
  
  			// ファイル作成
! 			// edit s.inoue 2009/12/25
! 			String temppath_1 ="";
! 			String temppath_2 ="";
! 			if (printSelect == 2){
! 				temppath_1 = templatePath_1;
! 				temppath_2 = templatePath_2;
! 			}else{
! 				temppath_1 = templatePath;
! 			}
! 
! 			// PdfReader reader = new PdfReader(temppath_1);
! 			PdfReader reader = new PdfReader(PrintDefine.WORK_PDF_DUMMY2_PDF);
  
- 			/*
  			kensaNengapi = kensaNengapi.replaceAll("年", "");
  			kensaNengapi = kensaNengapi.replaceAll("月", "");
  			kensaNengapi = kensaNengapi.replaceAll("日", "");
--- 245,252 ----
  			}
  
  			// ファイル作成
! 			PdfReader reader = new PdfReader(templatePath);
  
  			kensaNengapi = kensaNengapi.replaceAll("年", "");
  			kensaNengapi = kensaNengapi.replaceAll("月", "");
  			kensaNengapi = kensaNengapi.replaceAll("日", "");
***************
*** 353,359 ****
  			buffer.append( "-" );
  			buffer.append( kensaNengapi );
  
! 			// 同じ受付ID、健診年月日のファイルを開けるようにする。
  			Calendar cal = Calendar.getInstance();
  			buffer.append( "-" );
  			buffer.append( cal.getTimeInMillis() );
--- 257,263 ----
  			buffer.append( "-" );
  			buffer.append( kensaNengapi );
  
! 			/* 同じ受付ID、健診年月日のファイルを開けるようにする。 */
  			Calendar cal = Calendar.getInstance();
  			buffer.append( "-" );
  			buffer.append( cal.getTimeInMillis() );
***************
*** 361,370 ****
  			buffer.append(".pdf");
  			String kekkaFilePath = buffer.toString();
  
! 			// 2枚目追加の為1枚目は、名前をdummyで作成する。
  			FileOutputStream fileOutputStream = new FileOutputStream(PrintDefine.WORK_PDF_TMP_DUMMY_PDF);
-  			*/
- 			FileOutputStream fileOutputStream = new FileOutputStream(templatePath_2 + this.printSelect);
  
  			stamp = new PdfStamper(
  					reader,
--- 265,272 ----
  			buffer.append(".pdf");
  			String kekkaFilePath = buffer.toString();
  
! 			/* 2枚目追加の為1枚目は、名前をdummyで作成する。 */
  			FileOutputStream fileOutputStream = new FileOutputStream(PrintDefine.WORK_PDF_TMP_DUMMY_PDF);
  
  			stamp = new PdfStamper(
  					reader,
***************
*** 372,387 ****
  
  			AcroFields form = stamp.getAcroFields();
  
! 			// printFile = new File(kekkaFilePath);
  
  
  			//ページ番号を設定する
! 			// edit s.inoue 2010/01/05
! 			if (printSelect ==2){
! 				int maxP = Integer.valueOf(maxPage);
! 				String maxSt = Integer.toString(maxP);
! 				form.setField("PAGE_NUM", "（2／"+maxSt+"）");
! 			}
  
  			/* 機関情報を出力する。 */
  			this.printKikanData(KikanData, form);
--- 274,286 ----
  
  			AcroFields form = stamp.getAcroFields();
  
! 			printFile = new File(kekkaFilePath);
  
  
  			//ページ番号を設定する
! 			int maxP = Integer.valueOf(maxPage);
! 			String maxSt = Integer.toString(maxP+1);
! 			form.setField("PAGE_NUM", "（１／"+maxSt+"）");
  
  			/* 機関情報を出力する。 */
  			this.printKikanData(KikanData, form);
***************
*** 398,1041 ****
  
  			if (tmpKenshinKekka == null) {
  				System.out.println("tmpKenshinKekka is null.");
! 				// edit s.inoue 2010/01/05
! 				return null;
! 				// return printFile;
  			}
  
! 			// edit s.inoue 2010/01/05
! 			// 機能外だし
  			ArrayList<Hashtable<String, Hashtable<String, String>>> kenshinKekkaData =
  				tmpKenshinKekka.getPrintKenshinKekkaData();
  			String[] kensaNengapiAll = tmpKenshinKekka.getKensaNengapi();
  			Hashtable<String, Hashtable<String, String>> dataItemMap = kenshinKekkaData.get(0);
  
- 			// edit s.inoue 2010/01/05
- 			// 左ページを外出し
  			/*
! 			try {
! 				create1PageSetting(form, tmpKenshinKekka,kenshinKekkaData,kensaNengapiAll,dataItemMap,
! 						ketuatuHL_List,KetyuHL_List,kankinouHL_List,KetouHL_List,NyoHL_List,
! 						ketuatuVal_List,KetyuVal_List,kankinouVal_List,KetouVal_List,NyoVal_List,itemCodes,kojinData,ResultMap);
! 			}catch(Exception ex){
! 				logger.error(ex.getMessage());
  			}
- 			*/
  
! 			// edit s.inoue 2010/01/05
! 			// 右ページを外出し
  			try {
! 				create2PageSetting(form, tmpKenshinKekka,kenshinKekkaData,kensaNengapiAll,dataItemMap,
! 						ketuatuHL_List,KetyuHL_List,kankinouHL_List,KetouHL_List,NyoHL_List,
! 						ketuatuVal_List,KetyuVal_List,kankinouVal_List,KetouVal_List,NyoVal_List);
! 			}catch(Exception ex){
! 				logger.error(ex.getMessage());
  			}
- 			stamp.setFormFlattening(true);
- 			stamp.close();
- 			fileOutputStream.close();
- 		} catch (Exception e) {
- 			e.printStackTrace();
- 		}
  
! 		finally {
! 			try {
! 				if (stamp != null) {
! 					stamp.setFormFlattening(true);
! 					stamp.close();
! 				}
! 			} catch (Exception e) {
! 				e.printStackTrace();
! 				/* 何もしない */
  			}
- 		}
- 		// edit s.inoue 2010/01/05
- 		pdfPathList.add(templatePath_2 + this.printSelect);
- 		return pdfPathList;
- 	}
- 	// add s.inoue 2010/01/05
- 	private File create1PageSetting(
- 			AcroFields form,
- 			KenshinKekka tmpKenshinKekka,
- 			ArrayList<Hashtable<String, Hashtable<String, String>>> kenshinKekkaData,
- 			String[] kensaNengapiAll,
- 			Hashtable<String, Hashtable<String, String>> dataItemMap,
- 			List ketuatuHL_List,
- 			List KetyuHL_List,
- 			List kankinouHL_List,
- 			List KetouHL_List,
- 			List NyoHL_List,
- 			List ketuatuVal_List,
- 			List KetyuVal_List,
- 			List kankinouVal_List,
- 			List KetouVal_List,
- 			List NyoVal_List,
- 			ArrayList<String> itemCodes,
- 			Hashtable<String, String> kojinData,
- 			Map<String,ArrayList<String>>ResultMap
- 	) throws Exception{
  
- 		/*
- 		 * 健診年月日ごとのデータを取得 0=>今回 1=>前回 2=>前々回
- 		 */
- 		// del s.inoue 2010/01/05
- 		// ArrayList<Hashtable<String, Hashtable<String, String>>> kenshinKekkaData =
- 		//	tmpKenshinKekka.getPrintKenshinKekkaData();
- 		if (kenshinKekkaData == null || kenshinKekkaData.size() < 1) {
- 			return printFile;
- 		}
  
! 		/*
! 		 * 健診年月日を取得 0=>今回 1=>前回 2=>前々回
! 		 */
! 		// del s.inoue 2010/01/05
! 		// String[] kensaNengapiAll = tmpKenshinKekka.getKensaNengapi();
! 		if (kensaNengapiAll == null || kensaNengapiAll.length == 0) {
! 			return printFile;
! 		}
  
! 		// del s.inoue 2010/01/05
! 		// Hashtable<String, Hashtable<String, String>> dataItemMap = kenshinKekkaData.get(0);
! 		if (dataItemMap == null) {
! 			return printFile;
! 		}
  
! 		/*
! 		 * 既往歴、既往症、自覚症状、他覚症状、喫煙歴
! 		 */
! 		// 既往歴
! 		if (kenshinKekkaData.size() != 0) {
  
! 			this.printKiourekiGroup(form, itemCodes, tmpKenshinKekka, dataItemMap);
! 		}
  
- 		/*
- 		 * 健診年月日セット 今回、前回、前々回
- 		 */
- 		kensaNengapiLast = kensaNengapiAll[0];
- 		kensaNengapiLast2 = kensaNengapiAll[1];
- 		kensaNengapiLast3 = kensaNengapiAll[2];
- 		try {
- 			// 今回
- 			form.setField("T183", this.getYmdRemoved0(kensaNengapiLast) );
- 			// 前回
- 			form.setField("T300", this.getYmdRemoved0(kensaNengapiLast2));
- 			// 前々回
- 			form.setField("T339", this.getYmdRemoved0(kensaNengapiLast3));
  
! 		} catch (NullPointerException e) {
! 		}
  
! 		/*
! 		 * 全ての表示項目を出力する。
! 		 * 基準値については、身体測定、血圧、血中脂質検査、肝機能検査、
! 		 * 血糖検査、尿検査 身長、体重、腹囲は不要。
! 		 */
! 		boolean isMail = true;
! 		if (kojinData.get("SEX").equals("女性")) {
! 			isMail= false;
! 		}
  
  
! 		//身長
! 		itemCodes.clear();
! 		itemCodes.add(PrintDefine.CODE_HIGHT);
! 		String[][] forms = new String[][]{
! 				/* 基準値 */
! 				null,
! 				/* H/L 判定 */
! 				{ "T184", "T301", "T340",  },
! 				/* 結果値 */
! 				{ "T185", "T320", "T361",  },
! 		};
! 		this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 
! 		//体重
! 		itemCodes.clear();
! 		itemCodes.add(PrintDefine.CODE_WEIGHT);
! 		forms = new String[][]{
! 				/* 基準値 */
! 				null,
! 				/* H/L 判定 */
! 				{ "T186", "T302", "T341",  },
! 				/* 結果値 */
! 				{ "T187", "T321", "T362",  },
! 		};
! 		this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
  
! 		/*
! 		 * 腹囲（実測） 9N016160100000001 腹囲（自己判定） 9N016160200000001
! 		 * 腹囲（自己申告） 9N016160300000001
! 		 */
! 		itemCodes.clear();
! 		itemCodes.add("9N016160100000001");
! 		itemCodes.add("9N016160200000001");
! 		itemCodes.add("9N016160300000001");
! 		forms = new String[][]{
! 				/* 基準値 */
! 				null,
! 				/* H/L 判定 */
! 				{ "T188", "T303", "T342",  },
! 				/* 結果値 */
! 				{ "T189", "T322", "T363",  },
! 		};
! 		this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 
! 
! 		// BMI
! 		itemCodes.clear();
! 		itemCodes.add(PrintDefine.CODE_BMI);
! 
! 		forms = new String[][]{
! 				/* 基準値 */
! 				{ "T253" },
! 				/* H/L 判定 */
! 				{ "T190", "T304", "T343",  },
! 				/* 結果値 */
! 				{ "T191", "T323", "T364",  },
! 		};
  
! 		this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
  
! 		/*
! 		 * 収縮期血圧（1回目） 9A751000000000001 収縮期血圧（2回目） 9A752000000000001
! 		 * 収縮期血圧（その他） 9A755000000000001
! 		 */
! 		itemCodes.clear();
! 		itemCodes.add(PrintDefine.CODE_SYUSYUKUKI_KETUATU_SONOTA);
! 		itemCodes.add(PrintDefine.CODE_SYUSYUKUKI_KETUATU_2);
! 		itemCodes.add(PrintDefine.CODE_SYUSYUKUKI_KETUATU_1);
! 
! 		forms = new String[][]{
! 				/* 基準値 */
! 				{ "T254" },
! 				/* H/L 判定 */
! 				{ "T192", "T305", "T345",  },
! 				/* 結果値 */
! 				{ "T193", "T324", "T365",  },
! 		};
! 
! 		//this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 		ResultMap=this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 		ketuatuHL_List.add(ResultMap.get("HL").get(0));
! 		ketuatuVal_List.add(ResultMap.get("Value").get(0));
  
  
! 		/*
! 		 * 拡張期血圧（一回目） 9A761000000000001 拡張期血圧（二回目） 9A762000000000001
! 		 * 拡張期血圧（その他） 9A765000000000001
! 		 */
! 		itemCodes.clear();
! 		itemCodes.add(PrintDefine.CODE_KAKUCHOKI_KETUATU_SONOTA);
! 		itemCodes.add(PrintDefine.CODE_KAKUCHOKI_KETUATU_2);
! 		itemCodes.add(PrintDefine.CODE_KAKUCHOKI_KETUATU_1);
! 
! 		forms = new String[][]{
! 				/* 基準値 */
! 				{ "T255" },
! 				/* H/L 判定 */
! 				{ "T194", "T306", "T346",  },
! 				/* 結果値 */
! 				{ "T195", "T325", "T366",  },
! 		};
! 
! 		//this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 		ResultMap=this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 		ketuatuHL_List.add(ResultMap.get("HL").get(0));
! 		ketuatuVal_List.add(ResultMap.get("Value").get(0));
  
! 		/*
! 		 * 中性脂肪（可視吸光光度法（酵素比色法・グリセロール消去）） 3F015000002327101
! 		 * 中性脂肪（紫外吸光光度法（酵素比色法・グリセロール消去）） 3F015000002327201 中性脂肪（その他）
! 		 * 3F015000002399901
! 		 */
! 		itemCodes.clear();
! 		itemCodes.add(PrintDefine.CODE_CHUSEISIBOU_KASI);
! 		itemCodes.add(PrintDefine.CODE_CHUSEISIBOU_SIGAI);
! 		itemCodes.add(PrintDefine.CODE_CHUSEISIBOU_SONOTA);
! 
! 		forms = new String[][]{
! 				/* 基準値 */
! 				{ "T256" },
! 				/* H/L 判定 */
! 				{ "T196", "T307", "T347",  },
! 				/* 結果値 */
! 				{ "T197", "T326", "T367",  },
! 		};
! 		//this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 		ResultMap=this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 		KetyuHL_List.add(ResultMap.get("HL").get(0));
  
- 		/*
- 		 * HDL-コレステロール-（可視吸光光度法（直接法（非沈殿法））） 3F070000002327101
- 		 * HDL-コレステロール-（紫外吸光光度法（直接法（非沈殿法））） 3F070000002327201
- 		 * HDL-コレステロール-（その他） 3F070000002399901
- 		 */
- 		itemCodes.clear();
- 		itemCodes.add(PrintDefine.CODE_HDL_KASI);
- 		itemCodes.add(PrintDefine.CODE_HDL_SIGAI);
- 		itemCodes.add(PrintDefine.CODE_HDL_SONOTA);
- 
- 		forms = new String[][]{
- 				/* 基準値 */
- 				{ "T257" },
- 				/* H/L 判定 */
- 				{ "T198", "T308", "T348",  },
- 				/* 結果値 */
- 				{ "T199", "T327", "T368",  },
- 		};
- 		//this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
- 		ResultMap=this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
- 		KetyuHL_List.add(ResultMap.get("HL").get(0));
- 		KetyuVal_List.add(ResultMap.get("Value").get(0));
  
! 		/*
! 		 * LDL-コレステロール-（可視吸光光度法（直接法（非沈殿法）） 3F077000002327101
! 		 * LDL-コレステロール-（紫外吸光光度法（直接法（非沈殿法）） 3F077000002327201
! 		 * LDL-コレステロール-（その他） 3F077000002399901
! 		 */
! 		itemCodes.clear();
! 		itemCodes.add(PrintDefine.CODE_LDL_KASI);
! 		itemCodes.add(PrintDefine.CODE_LDL_SIGAI);
! 		itemCodes.add(PrintDefine.CODE_LDL_SONOTA);
! 		forms = new String[][]{
! 				/* 基準値 */
! 				{ "T258" },
! 				/* H/L 判定 */
! 				{ "T200", "T309", "T349",  },
! 				/* 結果値 */
! 				{ "T201", "T328", "T369",  },
! 		};
! 		//this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 		ResultMap=this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 		KetyuHL_List.add(ResultMap.get("HL").get(0));
! 		KetyuVal_List.add(ResultMap.get("Value").get(0));
  
! 		/*
! 		 * GOT（紫外吸光光度法（JSCC標準化対応法）） 3B035000002327201 GOT（その他）
! 		 * 3B035000002399901
! 		 */
! 		itemCodes.clear();
! 		itemCodes.add(PrintDefine.CODE_GOT_SIGAI);
! 		itemCodes.add(PrintDefine.CODE_GOT_SONOTA);
! 		forms = new String[][]{
! 				/* 基準値 */
! 				{ "T259" },
! 				/* H/L 判定 */
! 				{ "T202", "T310", "T350",  },
! 				/* 結果値 */
! 				{ "T203", "T329", "T370",  },
! 		};
! 		//this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 		ResultMap=this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 		kankinouHL_List.add(ResultMap.get("HL").get(0));
! 		kankinouVal_List.add(ResultMap.get("Value").get(0));
  
! 		/*
! 		 * GPT（紫外吸光光度法（JSCC標準化対応法）） 3B045000002327201 GPT（その他）
! 		 * 3B045000002399901
! 		 */
! 		itemCodes.clear();
! 		itemCodes.add(PrintDefine.CODE_GPT_SIGAI);
! 		itemCodes.add(PrintDefine.CODE_GPT_SONOTA);
! 		forms = new String[][]{
! 				/* 基準値 */
! 				{ "T260" },
! 				/* H/L 判定 */
! 				{ "T204", "T311", "T351",  },
! 				/* 結果値 */
! 				{ "T205", "T330", "T371",  },
! 		};
! 		//this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 		ResultMap=this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 		kankinouHL_List.add(ResultMap.get("HL").get(0));
! 		kankinouVal_List.add(ResultMap.get("Value").get(0));
  
! 		/*
! 		 * /* y-GTP（可視吸光光度法（JSCC標準化対応法）） 3B090000002327101 y-GTP（その他）
! 		 * 3B090000002399901
! 		 */
! 		itemCodes.clear();
! 		itemCodes.add(PrintDefine.CODE_GAMMA_GTP_KASI);
! 		itemCodes.add(PrintDefine.CODE_GAMMA_GTP_SONOTA);
! 		forms = new String[][]{
! 				/* 基準値 */
! 				{ "T261" },
! 				/* H/L 判定 */
! 				{ "T206", "T312", "T352",  },
! 				/* 結果値 */
! 				// edit ver2 s.inoue 2009/06/22
! 				{ "T207", "T331", "T372",  },
! 		};
! 		//this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 		ResultMap=this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 		kankinouHL_List.add(ResultMap.get("HL").get(0));
! 		kankinouVal_List.add(ResultMap.get("Value").get(0));
  
! 		/*
! 		 * 空腹時血糖（電位差法（ブドウ糖酸化酵素電極法）） 3D010000001926101
! 		 * 空腹時血糖（可視吸光光度法（ブドウ糖酸化酵素法）） 3D010000001727101
! 		 * 空腹時血糖（紫外吸光光度法（ヘキソキナーゼ法、グルコキナーゼ法、ブドウ糖脱水素酵素法））
! 		 * 3D010000001927201 空腹時血糖（その他） 3D010000001999901
! 		 */
! 		itemCodes.clear();
! 		itemCodes.add(PrintDefine.CODE_KUHUKUZI_KETO_DENNI);
! 		itemCodes.add(PrintDefine.CODE_KUHUKUZI_KETO_KASI);
! 		itemCodes.add(PrintDefine.CODE_KUHUKUZI_KETO_SIGAI);
! 		itemCodes.add(PrintDefine.CODE_KUHUKUZI_KETO_SONOTA);
! 		forms = new String[][]{
! 				/* 基準値 */
! 				{ "T262" },
! 				/* H/L 判定 */
! 				{ "T208", "T313", "T353",  },
! 				/* 結果値 */
! 				// edit ver2 s.inoue 2009/06/22
! 				{ "T209", "T332", "T373",  },
! 		};
! 
! 		//List kufukuList = this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 		ResultMap=this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 		List kufukuList = ResultMap.get("Value");
! 		KetouHL_List.add(ResultMap.get("HL").get(0));
! 		KetouVal_List.add(ResultMap.get("Value").get(0));
  
! 		/*
! 		 * ﾍﾓｸﾞﾛﾋﾞﾝA1c 免疫学的方法（ラテックス凝集比濁法等） 3D045000001906202 ﾍﾓｸﾞﾛﾋﾞﾝA1c
! 		 * HPLC(不安定分画除去HPLC法） 3D045000001920402 ﾍﾓｸﾞﾛﾋﾞﾝA1c 酵素法
! 		 * 3D045000001927102 ﾍﾓｸﾞﾛﾋﾞﾝA1c その他 3D045000001999902
! 		 */
! 		itemCodes.clear();
! 		itemCodes.add(PrintDefine.CODE_HBA1C_RATEX);
! 		itemCodes.add(PrintDefine.CODE_HBA1C_HPLC);
! 		itemCodes.add(PrintDefine.CODE_HBA1C_COUSOHO);
! 		itemCodes.add(PrintDefine.CODE_HBA1C_SONOTA);
! 		forms = new String[][]{
! 				/* 基準値 */
! 				{ "T263" },
! 				/* H/L 判定 */
! 				{ "T210", "T314", "T354",  },
! 				/* 結果値 */
! 				// edit ver2 s.inoue 2009/06/22
! 				{ "T211", "T333", "T374",  },
! 		};
! //		this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 		ResultMap=this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 		KetouHL_List.add(ResultMap.get("HL").get(0));
! 		KetouVal_List.add(ResultMap.get("Value").get(0));
! 
! 		// 赤血球数
! 		itemCodes.clear();
! 		itemCodes.add(PrintDefine.CODE_SEKEKYUSU);
! //		itemCodes.add(CODE_SEKEKYUSU);
! 		forms = new String[][]{
! 				/* 基準値 */
! 				{ "T264" },
! 				/* H/L 判定 */
! 				{ "T216", "T317", "T358",  },
! 				/* 結果値 */
! 				// edit ver2 s.inoue 2009/06/22
! 				{ "T217", "T336", "T377",  },
! 		};
! 		this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 
! 		// 血色素数
! 		itemCodes.clear();
! 		itemCodes.add(PrintDefine.CODE_KESIKISOSU);
! //		itemCodes.add(CODE_KESIKISOSU);
! 		forms = new String[][]{
! 				/* 基準値 */
! 				{ "T265" },
! 				/* H/L 判定 */
! 				{ "T218", "T318", "T359",  },
! 				/* 結果値 */
! 				// edit ver2 s.inoue 2009/06/22
! 				{ "T219", "T337", "T378",  },
! 		};
! 		this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 
! 		// ヘマトクリット値
! 		itemCodes.clear();
! 		itemCodes.add(PrintDefine.CODE_HEMATCLIT);
! //		itemCodes.add(CODE_HEMATCLIT);
! 		forms = new String[][]{
! 				/* 基準値 */
! 				{ "T266" },
! 				/* H/L 判定 */
! 				{ "T220", "T319", "T360",  },
! 				/* 結果値 */
! 				// edit ver2 s.inoue 2009/06/22
! 				{ "T221", "T338", "T379",  },
! 		};
! 		this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
  
  
! 		/*
! 		 * 身体測定、血圧、血中脂質検査、肝機能検査、血糖検査、尿検査 今回、前回、前々回
! 		 */
! 		for (int i = 0; i < kensaNengapiAll.length; i++) {
! 			try {
! 				/*
! 				 * 糖 試験紙法（機械読み取り） 1A020000000191111 糖 試験紙法（目視法）
! 				 * 1A020000000190111
! 				 */
! 				itemCodes.clear();
! 				itemCodes.add(PrintDefine.TOU_KIKAI);
! 				itemCodes.add(PrintDefine.TOU_MOKUSHI);
  
! 				String formId = null;
! 				switch (i) {
! 				case 0:
! 					formId = "T213";
! 					break;
! 				case 1:
! 					// edit ver2 s.inoue 2009/06/22
! 					formId = "T334";
! 					break;
! 				case 2:
! 					formId = "T375";
! 					break;
! 				default:
! 					break;
! 				}
  
! 				String kekati = tmpKenshinKekka.getKekati(itemCodes, i);
  
! 				// edit s.inoue 20080904
! 				if (tmpKenshinKekka.getJisiKbn(itemCodes,i).equals(""))
! 				{
! 					continue;
! 				}
  
! 				Integer jisiKbnTou= Integer.valueOf(tmpKenshinKekka.getJisiKbn(itemCodes,i));
! 				switch (jisiKbnTou) {
  					case 0:
! 						kekati = KEKKA_OUTPUT_JISI_KBN_0;
  						break;
  					case 1:
  						break;
  					case 2:
! 						kekati = KEKKA_OUTPUT_JISI_KBN_2;
  						break;
! 				}
  
! 				// edit s.inoue 20080904
! 				if (jisiKbnTou == 1)
! 				{
! 					if (kekati != null && ! kekati.isEmpty()) {
! 						int kekatiInt = -1;
! 						try {
! 							kekatiInt = Integer.parseInt(kekati);
! 						} catch (NumberFormatException e) {
! 							e.printStackTrace();
! 							continue;
! 						}
  
! 						for (Iterator iter = itemCodes.iterator(); iter.hasNext();) {
! 							String code = (String) iter.next();
  
! 							String codeName = tmpKenshinKekka.getCodeName(code, kekatiInt);
  
! 							if (codeName != null && ! codeName.isEmpty()) {
  
! 								StringBuffer buffer = new StringBuffer();
! 								buffer.append("(");
! 								buffer.append(codeName.replaceFirst("\\d+:", ""));
  
! 								buffer.append(")");
! 								String displayCodeName = buffer.toString();
  
! 								form.setField(formId,displayCodeName);
! 								break;
! 							}
! 						}
! 					}
  
! 				}else{
! 					form.setField(formId,kekati);
! 				}
  
! 				/*
! 				 * 蛋白 試験紙法（機械読み取り） 1A010000000191111 蛋白 試験紙法（目視法）
! 				 * 1A010000000190111
! 				 */
! 				itemCodes.clear();
! 				itemCodes.add(PrintDefine.CODE_NYOTANPAKU_KIKAI);
! 				itemCodes.add(PrintDefine.CODE_NYOTANPAKU_MOKUSI);
  
! 				formId = null;
! 				switch (i) {
! 				case 0:
! 					formId = "T215";
! 					break;
! 				case 1:
! 					// edit ver2 s.inoue 2009/06/22
! 					formId = "T335";
! 					break;
! 				case 2:
! 					formId = "T376";
! 					break;
! 				default:
! 					break;
! 				}
  
! 				kekati = tmpKenshinKekka.getKekati(itemCodes, i);
  
! 				// edit s.inoue 20080904
! 				if(tmpKenshinKekka.getJisiKbn(itemCodes,i).equals("")){
! 					continue;
  				}
  
! 				Integer jisiKbnTanpaku= Integer.valueOf(tmpKenshinKekka.getJisiKbn(itemCodes,i));
! 				switch (jisiKbnTanpaku) {
! 					case 0:
! 						kekati = KEKKA_OUTPUT_JISI_KBN_0;
! 						break;
! 					case 1:
! 						break;
! 					case 2:
! 						kekati = KEKKA_OUTPUT_JISI_KBN_2;
! 						break;
  				}
  
! 				// edit s.inoue 20080904
! 				if (jisiKbnTanpaku == 1)
! 				{
! 					if (kekati != null && ! kekati.isEmpty()) {
! 						int kekatiInt = -1;
! 						try {
! 							kekatiInt = Integer.parseInt(kekati);
! 						} catch (NumberFormatException e) {
! 							e.printStackTrace();
! 							continue;
  						}
  
! 						for (Iterator iter = itemCodes.iterator(); iter.hasNext();) {
! 							String code = (String) iter.next();
! 
! 							String codeName = tmpKenshinKekka.getCodeName(code, kekatiInt);
  
! 							if (codeName != null && ! codeName.isEmpty()) {
  
! 								StringBuffer buffer = new StringBuffer();
! 								buffer.append("(");
  
! 								codeName = codeName.replaceFirst("\\d+:", "");
  
! 								buffer.append(codeName);
  
! 								buffer.append(")");
! 								String displayCodeName = buffer.toString();
  
! 								form.setField(formId,displayCodeName);
! 								break;
! 							}
  						}
  					}
- 				}else{
- 					form.setField(formId,kekati);
  				}
  
! 			} catch (IndexOutOfBoundsException e) {
  			}
  
  			/*　2008/06/09 藪 空腹時血糖追加
--- 297,1027 ----
  
  			if (tmpKenshinKekka == null) {
  				System.out.println("tmpKenshinKekka is null.");
! 				return printFile;
  			}
  
! 			/*
! 			 * 健診年月日ごとのデータを取得 0=>今回 1=>前回 2=>前々回
! 			 */
  			ArrayList<Hashtable<String, Hashtable<String, String>>> kenshinKekkaData =
  				tmpKenshinKekka.getPrintKenshinKekkaData();
+ 
+ 			if (kenshinKekkaData == null || kenshinKekkaData.size() < 1) {
+ 				return printFile;
+ 			}
+ 
+ 			/*
+ 			 * 健診年月日を取得 0=>今回 1=>前回 2=>前々回
+ 			 */
  			String[] kensaNengapiAll = tmpKenshinKekka.getKensaNengapi();
+ 
+ 			if (kensaNengapiAll == null || kensaNengapiAll.length == 0) {
+ 				return printFile;
+ 			}
+ 
  			Hashtable<String, Hashtable<String, String>> dataItemMap = kenshinKekkaData.get(0);
+ 			if (dataItemMap == null) {
+ 				return printFile;
+ 			}
  
  			/*
! 			 * 既往歴、既往症、自覚症状、他覚症状、喫煙歴
! 			 */
! 			// 既往歴
! 			if (kenshinKekkaData.size() != 0) {
! 
! 				this.printKiourekiGroup(form, itemCodes, tmpKenshinKekka, dataItemMap);
  			}
  
! 			/*
! 			 * 健診年月日セット 今回、前回、前々回
! 			 */
! 			kensaNengapiLast = kensaNengapiAll[0];
! 			kensaNengapiLast2 = kensaNengapiAll[1];
! 			kensaNengapiLast3 = kensaNengapiAll[2];
  			try {
! 				// 今回
! 				form.setField("T183", this.getYmdRemoved0(kensaNengapiLast) );
! 				// 前回
! 				form.setField("T300", this.getYmdRemoved0(kensaNengapiLast2));
! 				// 前々回
! 				form.setField("T339", this.getYmdRemoved0(kensaNengapiLast3));
! 
! 			} catch (NullPointerException e) {
  			}
  
! 			/*
! 			 * 全ての表示項目を出力する。
! 			 * 基準値については、身体測定、血圧、血中脂質検査、肝機能検査、
! 			 * 血糖検査、尿検査 身長、体重、腹囲は不要。
! 			 */
! 			boolean isMail = true;
! 			if (kojinData.get("SEX").equals("女性")) {
! 				isMail= false;
  			}
  
  
! 			//身長
! 			itemCodes.clear();
! 			itemCodes.add(PrintDefine.CODE_HIGHT);
! 			String[][] forms = new String[][]{
! 					/* 基準値 */
! 					null,
! 					/* H/L 判定 */
! 					{ "T184", "T301", "T340",  },
! 					/* 結果値 */
! 					{ "T185", "T320", "T361",  },
! 			};
! 			this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 
! 			//体重
! 			itemCodes.clear();
! 			itemCodes.add(PrintDefine.CODE_WEIGHT);
! 			forms = new String[][]{
! 					/* 基準値 */
! 					null,
! 					/* H/L 判定 */
! 					{ "T186", "T302", "T341",  },
! 					/* 結果値 */
! 					{ "T187", "T321", "T362",  },
! 			};
! 			this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
  
! 			/*
! 			 * 腹囲（実測） 9N016160100000001 腹囲（自己判定） 9N016160200000001
! 			 * 腹囲（自己申告） 9N016160300000001
! 			 */
! 			itemCodes.clear();
! 			itemCodes.add("9N016160100000001");
! 			itemCodes.add("9N016160200000001");
! 			itemCodes.add("9N016160300000001");
! 			forms = new String[][]{
! 					/* 基準値 */
! 					null,
! 					/* H/L 判定 */
! 					{ "T188", "T303", "T342",  },
! 					/* 結果値 */
! 					{ "T189", "T322", "T363",  },
! 			};
! 			this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 
! 
! 			// BMI
! 			itemCodes.clear();
! 			itemCodes.add(PrintDefine.CODE_BMI);
! 
! 			forms = new String[][]{
! 					/* 基準値 */
! 					{ "T253" },
! 					/* H/L 判定 */
! 					{ "T190", "T304", "T343",  },
! 					/* 結果値 */
! 					{ "T191", "T323", "T364",  },
! 			};
  
! 			this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
  
! 			/*
! 			 * 収縮期血圧（1回目） 9A751000000000001 収縮期血圧（2回目） 9A752000000000001
! 			 * 収縮期血圧（その他） 9A755000000000001
! 			 */
! 			itemCodes.clear();
! 			itemCodes.add(PrintDefine.CODE_SYUSYUKUKI_KETUATU_SONOTA);
! 			itemCodes.add(PrintDefine.CODE_SYUSYUKUKI_KETUATU_2);
! 			itemCodes.add(PrintDefine.CODE_SYUSYUKUKI_KETUATU_1);
! 
! 			forms = new String[][]{
! 					/* 基準値 */
! 					{ "T254" },
! 					/* H/L 判定 */
! 					{ "T192", "T305", "T345",  },
! 					/* 結果値 */
! 					{ "T193", "T324", "T365",  },
! 			};
! 
! 			//this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 			ResultMap=this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 			ketuatuHL_List.add(ResultMap.get("HL").get(0));
! 			ketuatuVal_List.add(ResultMap.get("Value").get(0));
  
  
! 			/*
! 			 * 拡張期血圧（一回目） 9A761000000000001 拡張期血圧（二回目） 9A762000000000001
! 			 * 拡張期血圧（その他） 9A765000000000001
! 			 */
! 			itemCodes.clear();
! 			itemCodes.add(PrintDefine.CODE_KAKUCHOKI_KETUATU_SONOTA);
! 			itemCodes.add(PrintDefine.CODE_KAKUCHOKI_KETUATU_2);
! 			itemCodes.add(PrintDefine.CODE_KAKUCHOKI_KETUATU_1);
! 
! 			forms = new String[][]{
! 					/* 基準値 */
! 					{ "T255" },
! 					/* H/L 判定 */
! 					{ "T194", "T306", "T346",  },
! 					/* 結果値 */
! 					{ "T195", "T325", "T366",  },
! 			};
! 
! 			//this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 			ResultMap=this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 			ketuatuHL_List.add(ResultMap.get("HL").get(0));
! 			ketuatuVal_List.add(ResultMap.get("Value").get(0));
  
! 			/*
! 			 * 中性脂肪（可視吸光光度法（酵素比色法・グリセロール消去）） 3F015000002327101
! 			 * 中性脂肪（紫外吸光光度法（酵素比色法・グリセロール消去）） 3F015000002327201 中性脂肪（その他）
! 			 * 3F015000002399901
! 			 */
! 			itemCodes.clear();
! 			itemCodes.add(PrintDefine.CODE_CHUSEISIBOU_KASI);
! 			itemCodes.add(PrintDefine.CODE_CHUSEISIBOU_SIGAI);
! 			itemCodes.add(PrintDefine.CODE_CHUSEISIBOU_SONOTA);
! 
! 			forms = new String[][]{
! 					/* 基準値 */
! 					{ "T256" },
! 					/* H/L 判定 */
! 					{ "T196", "T307", "T347",  },
! 					/* 結果値 */
! 					{ "T197", "T326", "T367",  },
! 			};
! 			//this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 			ResultMap=this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 			KetyuHL_List.add(ResultMap.get("HL").get(0));
  
+ 			/*
+ 			 * HDL-コレステロール-（可視吸光光度法（直接法（非沈殿法））） 3F070000002327101
+ 			 * HDL-コレステロール-（紫外吸光光度法（直接法（非沈殿法））） 3F070000002327201
+ 			 * HDL-コレステロール-（その他） 3F070000002399901
+ 			 */
+ 			itemCodes.clear();
+ 			itemCodes.add(PrintDefine.CODE_HDL_KASI);
+ 			itemCodes.add(PrintDefine.CODE_HDL_SIGAI);
+ 			itemCodes.add(PrintDefine.CODE_HDL_SONOTA);
+ 
+ 			forms = new String[][]{
+ 					/* 基準値 */
+ 					{ "T257" },
+ 					/* H/L 判定 */
+ 					{ "T198", "T308", "T348",  },
+ 					/* 結果値 */
+ 					{ "T199", "T327", "T368",  },
+ 			};
+ 			//this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
+ 			ResultMap=this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
+ 			KetyuHL_List.add(ResultMap.get("HL").get(0));
+ 			KetyuVal_List.add(ResultMap.get("Value").get(0));
  
! 			/*
! 			 * LDL-コレステロール-（可視吸光光度法（直接法（非沈殿法）） 3F077000002327101
! 			 * LDL-コレステロール-（紫外吸光光度法（直接法（非沈殿法）） 3F077000002327201
! 			 * LDL-コレステロール-（その他） 3F077000002399901
! 			 */
! 			itemCodes.clear();
! 			itemCodes.add(PrintDefine.CODE_LDL_KASI);
! 			itemCodes.add(PrintDefine.CODE_LDL_SIGAI);
! 			itemCodes.add(PrintDefine.CODE_LDL_SONOTA);
! 			forms = new String[][]{
! 					/* 基準値 */
! 					{ "T258" },
! 					/* H/L 判定 */
! 					{ "T200", "T309", "T349",  },
! 					/* 結果値 */
! 					{ "T201", "T328", "T369",  },
! 			};
! 			//this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 			ResultMap=this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 			KetyuHL_List.add(ResultMap.get("HL").get(0));
! 			KetyuVal_List.add(ResultMap.get("Value").get(0));
  
! 			/*
! 			 * GOT（紫外吸光光度法（JSCC標準化対応法）） 3B035000002327201 GOT（その他）
! 			 * 3B035000002399901
! 			 */
! 			itemCodes.clear();
! 			itemCodes.add(PrintDefine.CODE_GOT_SIGAI);
! 			itemCodes.add(PrintDefine.CODE_GOT_SONOTA);
! 			forms = new String[][]{
! 					/* 基準値 */
! 					{ "T259" },
! 					/* H/L 判定 */
! 					{ "T202", "T310", "T350",  },
! 					/* 結果値 */
! 					{ "T203", "T329", "T370",  },
! 			};
! 			//this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 			ResultMap=this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 			kankinouHL_List.add(ResultMap.get("HL").get(0));
! 			kankinouVal_List.add(ResultMap.get("Value").get(0));
  
! 			/*
! 			 * GPT（紫外吸光光度法（JSCC標準化対応法）） 3B045000002327201 GPT（その他）
! 			 * 3B045000002399901
! 			 */
! 			itemCodes.clear();
! 			itemCodes.add(PrintDefine.CODE_GPT_SIGAI);
! 			itemCodes.add(PrintDefine.CODE_GPT_SONOTA);
! 			forms = new String[][]{
! 					/* 基準値 */
! 					{ "T260" },
! 					/* H/L 判定 */
! 					{ "T204", "T311", "T351",  },
! 					/* 結果値 */
! 					{ "T205", "T330", "T371",  },
! 			};
! 			//this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 			ResultMap=this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 			kankinouHL_List.add(ResultMap.get("HL").get(0));
! 			kankinouVal_List.add(ResultMap.get("Value").get(0));
  
! 			/*
! 			 * /* y-GTP（可視吸光光度法（JSCC標準化対応法）） 3B090000002327101 y-GTP（その他）
! 			 * 3B090000002399901
! 			 */
! 			itemCodes.clear();
! 			itemCodes.add(PrintDefine.CODE_GAMMA_GTP_KASI);
! 			itemCodes.add(PrintDefine.CODE_GAMMA_GTP_SONOTA);
! 			forms = new String[][]{
! 					/* 基準値 */
! 					{ "T261" },
! 					/* H/L 判定 */
! 					{ "T206", "T312", "T352",  },
! 					/* 結果値 */
! 					// edit ver2 s.inoue 2009/06/22
! 					{ "T207", "T331", "T372",  },
! 			};
! 			//this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 			ResultMap=this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 			kankinouHL_List.add(ResultMap.get("HL").get(0));
! 			kankinouVal_List.add(ResultMap.get("Value").get(0));
  
+ 			/*
+ 			 * 空腹時血糖（電位差法（ブドウ糖酸化酵素電極法）） 3D010000001926101
+ 			 * 空腹時血糖（可視吸光光度法（ブドウ糖酸化酵素法）） 3D010000001727101
+ 			 * 空腹時血糖（紫外吸光光度法（ヘキソキナーゼ法、グルコキナーゼ法、ブドウ糖脱水素酵素法））
+ 			 * 3D010000001927201 空腹時血糖（その他） 3D010000001999901
+ 			 */
+ 			itemCodes.clear();
+ 			itemCodes.add(PrintDefine.CODE_KUHUKUZI_KETO_DENNI);
+ 			itemCodes.add(PrintDefine.CODE_KUHUKUZI_KETO_KASI);
+ 			itemCodes.add(PrintDefine.CODE_KUHUKUZI_KETO_SIGAI);
+ 			itemCodes.add(PrintDefine.CODE_KUHUKUZI_KETO_SONOTA);
+ 			forms = new String[][]{
+ 					/* 基準値 */
+ 					{ "T262" },
+ 					/* H/L 判定 */
+ 					{ "T208", "T313", "T353",  },
+ 					/* 結果値 */
+ 					// edit ver2 s.inoue 2009/06/22
+ 					{ "T209", "T332", "T373",  },
+ 			};
  
! 			//List kufukuList = this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 			ResultMap=this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 			List kufukuList = ResultMap.get("Value");
! 			KetouHL_List.add(ResultMap.get("HL").get(0));
! 			KetouVal_List.add(ResultMap.get("Value").get(0));
  
! 			/*
! 			 * ﾍﾓｸﾞﾛﾋﾞﾝA1c 免疫学的方法（ラテックス凝集比濁法等） 3D045000001906202 ﾍﾓｸﾞﾛﾋﾞﾝA1c
! 			 * HPLC(不安定分画除去HPLC法） 3D045000001920402 ﾍﾓｸﾞﾛﾋﾞﾝA1c 酵素法
! 			 * 3D045000001927102 ﾍﾓｸﾞﾛﾋﾞﾝA1c その他 3D045000001999902
! 			 */
! 			itemCodes.clear();
! 			itemCodes.add(PrintDefine.CODE_HBA1C_RATEX);
! 			itemCodes.add(PrintDefine.CODE_HBA1C_HPLC);
! 			itemCodes.add(PrintDefine.CODE_HBA1C_COUSOHO);
! 			itemCodes.add(PrintDefine.CODE_HBA1C_SONOTA);
! 			forms = new String[][]{
! 					/* 基準値 */
! 					{ "T263" },
! 					/* H/L 判定 */
! 					{ "T210", "T314", "T354",  },
! 					/* 結果値 */
! 					// edit ver2 s.inoue 2009/06/22
! 					{ "T211", "T333", "T374",  },
! 			};
! //			this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 			ResultMap=this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 			KetouHL_List.add(ResultMap.get("HL").get(0));
! 			KetouVal_List.add(ResultMap.get("Value").get(0));
! 
! 			// 赤血球数
! 			itemCodes.clear();
! 			itemCodes.add(PrintDefine.CODE_SEKEKYUSU);
! //			itemCodes.add(CODE_SEKEKYUSU);
! 			forms = new String[][]{
! 					/* 基準値 */
! 					{ "T264" },
! 					/* H/L 判定 */
! 					{ "T216", "T317", "T358",  },
! 					/* 結果値 */
! 					// edit ver2 s.inoue 2009/06/22
! 					{ "T217", "T336", "T377",  },
! 			};
! 			this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 
! 			// 血色素数
! 			itemCodes.clear();
! 			itemCodes.add(PrintDefine.CODE_KESIKISOSU);
! //			itemCodes.add(CODE_KESIKISOSU);
! 			forms = new String[][]{
! 					/* 基準値 */
! 					{ "T265" },
! 					/* H/L 判定 */
! 					{ "T218", "T318", "T359",  },
! 					/* 結果値 */
! 					// edit ver2 s.inoue 2009/06/22
! 					{ "T219", "T337", "T378",  },
! 			};
! 			this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
! 
! 			// ヘマトクリット値
! 			itemCodes.clear();
! 			itemCodes.add(PrintDefine.CODE_HEMATCLIT);
! //			itemCodes.add(CODE_HEMATCLIT);
! 			forms = new String[][]{
! 					/* 基準値 */
! 					{ "T266" },
! 					/* H/L 判定 */
! 					{ "T220", "T319", "T360",  },
! 					/* 結果値 */
! 					// edit ver2 s.inoue 2009/06/22
! 					{ "T221", "T338", "T379",  },
! 			};
! 			this.setAllToForm(form, itemCodes, tmpKenshinKekka, isMail, forms);
  
  
! 			/*
! 			 * 身体測定、血圧、血中脂質検査、肝機能検査、血糖検査、尿検査 今回、前回、前々回
! 			 */
! 			for (int i = 0; i < kensaNengapiAll.length; i++) {
! 				try {
! 					/*
! 					 * 糖 試験紙法（機械読み取り） 1A020000000191111 糖 試験紙法（目視法）
! 					 * 1A020000000190111
! 					 */
! 					itemCodes.clear();
! 					itemCodes.add(PrintDefine.TOU_KIKAI);
! 					itemCodes.add(PrintDefine.TOU_MOKUSHI);
  
! 					String formId = null;
! 					switch (i) {
! 					case 0:
! 						formId = "T213";
! 						break;
! 					case 1:
! 						// edit ver2 s.inoue 2009/06/22
! 						formId = "T334";
! 						break;
! 					case 2:
! 						formId = "T375";
! 						break;
! 					default:
! 						break;
! 					}
  
! 					String kekati = tmpKenshinKekka.getKekati(itemCodes, i);
  
! 					// edit s.inoue 20080904
! 					if (tmpKenshinKekka.getJisiKbn(itemCodes,i).equals(""))
! 					{
! 						continue;
! 					}
  
! 					Integer jisiKbnTou= Integer.valueOf(tmpKenshinKekka.getJisiKbn(itemCodes,i));
! 					switch (jisiKbnTou) {
! 						case 0:
! 							kekati = KEKKA_OUTPUT_JISI_KBN_0;
! 							break;
! 						case 1:
! 							break;
! 						case 2:
! 							kekati = KEKKA_OUTPUT_JISI_KBN_2;
! 							break;
! 					}
  
! 					// edit s.inoue 20080904
! 					if (jisiKbnTou == 1)
! 					{
! 						if (kekati != null && ! kekati.isEmpty()) {
! 							int kekatiInt = -1;
! 							try {
! 								kekatiInt = Integer.parseInt(kekati);
! 							} catch (NumberFormatException e) {
! 								e.printStackTrace();
! 								continue;
! 							}
  
+ 							for (Iterator iter = itemCodes.iterator(); iter.hasNext();) {
+ 								String code = (String) iter.next();
  
! 								String codeName = tmpKenshinKekka.getCodeName(code, kekatiInt);
  
! 								if (codeName != null && ! codeName.isEmpty()) {
  
! 									buffer = new StringBuffer();
! 									buffer.append("(");
! 									buffer.append(codeName.replaceFirst("\\d+:", ""));
  
! 									buffer.append(")");
! 									String displayCodeName = buffer.toString();
! 
! 									form.setField(formId,displayCodeName);
! 									break;
! 								}
! 							}
! 						}
! 
! 					}else{
! 						form.setField(formId,kekati);
! 					}
  
! 					/*
! 					 * 蛋白 試験紙法（機械読み取り） 1A010000000191111 蛋白 試験紙法（目視法）
! 					 * 1A010000000190111
! 					 */
! 					itemCodes.clear();
! 					itemCodes.add(PrintDefine.CODE_NYOTANPAKU_KIKAI);
! 					itemCodes.add(PrintDefine.CODE_NYOTANPAKU_MOKUSI);
! 
! 					formId = null;
! 					switch (i) {
  					case 0:
! 						formId = "T215";
  						break;
  					case 1:
+ 						// edit ver2 s.inoue 2009/06/22
+ 						formId = "T335";
  						break;
  					case 2:
! 						formId = "T376";
  						break;
! 					default:
! 						break;
! 					}
  
! 					kekati = tmpKenshinKekka.getKekati(itemCodes, i);
  
! 					// edit s.inoue 20080904
! 					if(tmpKenshinKekka.getJisiKbn(itemCodes,i).equals("")){
! 						continue;
! 					}
  
! 					Integer jisiKbnTanpaku= Integer.valueOf(tmpKenshinKekka.getJisiKbn(itemCodes,i));
! 					switch (jisiKbnTanpaku) {
! 						case 0:
! 							kekati = KEKKA_OUTPUT_JISI_KBN_0;
! 							break;
! 						case 1:
! 							break;
! 						case 2:
! 							kekati = KEKKA_OUTPUT_JISI_KBN_2;
! 							break;
! 					}
  
! 					// edit s.inoue 20080904
! 					if (jisiKbnTanpaku == 1)
! 					{
! 						if (kekati != null && ! kekati.isEmpty()) {
! 							int kekatiInt = -1;
! 							try {
! 								kekatiInt = Integer.parseInt(kekati);
! 							} catch (NumberFormatException e) {
! 								e.printStackTrace();
! 								continue;
! 							}
  
! 							for (Iterator iter = itemCodes.iterator(); iter.hasNext();) {
! 								String code = (String) iter.next();
  
! 								String codeName = tmpKenshinKekka.getCodeName(code, kekatiInt);
  
! 								if (codeName != null && ! codeName.isEmpty()) {
  
! 									buffer = new StringBuffer();
! 									buffer.append("(");
  
! 									codeName = codeName.replaceFirst("\\d+:", "");
  
! 									buffer.append(codeName);
  
! 									buffer.append(")");
! 									String displayCodeName = buffer.toString();
  
! 									form.setField(formId,displayCodeName);
! 									break;
! 								}
! 							}
! 						}
! 					}else{
! 						form.setField(formId,kekati);
! 					}
! 
! 				} catch (IndexOutOfBoundsException e) {
  				}
+ 			}
  
! 			//今回、前回、前々回　日付印字
! 			try {
! 				// 今回
! 				form.setField("T227", this.getYmdRemoved0(kensaNengapiLast));
! 				// 前回
! 				form.setField("T400", this.getYmdRemoved0(kensaNengapiLast2));
! 				// 前々回
! 				form.setField("T401", this.getYmdRemoved0(kensaNengapiLast3));
! 			} catch (NullPointerException e) {
! 			}
! 
! 			/*
! 			 * 心電図検査、眼底検査、メタボリックシンドローム判定 今回、前回、前々回
! 			 */
! 			for (int i = 0; i < kensaNengapiAll.length; i++) {
! 				if (kensaNengapiAll[i] != null){
! 					shindenzuGanteiKensa(form, tmpKenshinKekka, kenshinKekkaData, kensaNengapiAll, dataItemMap,i);
  				}
+ 			}
  
! 			/*
! 			 * メタボリックシンドローム判定
! 			 */
! 			/*
! 			 * 結果値をセット
! 			 */
! 			try {
! 				for (int i = 0; i < kensaNengapiAll.length; i++) {
! 					if (kensaNengapiAll[i] != null){
! 						String kekka="";
! 						// edit ver2 s.inoue 2009/07/27
! 						// kekka = (dataItemMap.get("9N501000000000011").get("CODE_NAME").replaceFirst("\\d+:", ""));
! 						if (kenshinKekkaData.get(0).size() > 0){
! 							kekka = (kenshinKekkaData.get(0).get("9N501000000000011").get("CODE_NAME").replaceFirst("\\d+:", ""));
! 							form.setField("T241",kekka );
  						}
  
! 						if (i > 0) {
! 							if (i > 1) {
! 								if (kenshinKekkaData.get(2).size() > 0){
! 									String kekka2="";
! 									kekka2 = (kenshinKekkaData.get(2).get("9N501000000000011").get("CODE_NAME").replaceFirst("\\d+:", ""));
! 									form.setField("T407", kekka2);
! 								}
! 							}
! 							if (kenshinKekkaData.get(1).size() > 0){
! 								String kekka1="";
! 								kekka1 = (kenshinKekkaData.get(1).get("9N501000000000011").get("CODE_NAME").replaceFirst("\\d+:", ""));
! 								form.setField("T406", kekka1);
! 							}
! 						}
! 					}
! 				}
! 			} catch (IndexOutOfBoundsException e) {
  
! 			}
  
! 			// 検査分野別判定
! 			try {
! 				List kensaContain = new ArrayList();
! 				kensaContain.add("");
! //				kensaContain.add(null);
! 
! 				String strValues = "";
! 
! 				//血圧
! 				strValues = kensabunyaBetuHntei(ketuatuHL_List, ketuatuVal_List, kensaContain, strValues,PrintDefine.KETUATU_SEIJYO,PrintDefine.KETUATU_IJYO);
! 				//血中脂質検査
! 				strValues = kensabunyaBetuHntei(KetyuHL_List, KetyuVal_List, kensaContain, strValues,PrintDefine.KETTYU_SEIJYO,PrintDefine.KETTYU_IJYO);
! 				//肝機能検査
! 				strValues = kensabunyaBetuHntei(kankinouHL_List, kankinouVal_List, kensaContain, strValues,PrintDefine.KANKINOU_SEIJYO,PrintDefine.KANKINOU_IJYO);
! 				//血糖検査
! 				strValues = kensabunyaBetuHntei(KetouHL_List, KetouVal_List, kensaContain, strValues,PrintDefine.KETTOU_SEIJYO,PrintDefine.KETTOU_IJYO);
  
! 				form.setField("T236",strValues);
  
! 			} catch (Exception e) {
! 			}
! 			/*
! 			 * 医師の判断（今回の健診のみ）
! 			 */
! 			if (kenshinKekkaData.size() > 0) {
! 				/* --------------------------------------------------- */
! 				Hashtable<String, Hashtable<String, String>> kekkaData = dataItemMap;
! 
! 				buffer = new StringBuffer();
! 				if (kekkaData.keySet().contains(PrintDefine.CODE_ISHINO_HANDAN)) {
! 					Hashtable<String, String> item = kekkaData
! 					.get(PrintDefine.CODE_ISHINO_HANDAN);
! 
! 					if (item.keySet().contains(PrintDefine.COLUMN_NAME_KEKA_TI)) {
! 						String kekati = item.get(PrintDefine.COLUMN_NAME_KEKA_TI);
! 
! 						if (kekati != null && ! kekati.isEmpty()) {
! //							form.setField("T242", item.get(COLUMN_NAME_KEKA_TI));
! 							buffer.append(kekati);
! 							buffer.append(JApplication.LINE_SEPARATOR);
! 						}
! 					}
! 				}
  
! 				// 貧血検査（実施理由）
! 				if (kekkaData.keySet().contains("2A020161001930149")) {
! 					Hashtable<String, String> item = kekkaData.get("2A020161001930149");
! 
! 					if (item.keySet().contains(PrintDefine.COLUMN_NAME_KEKA_TI)) {
! 						String kekati = item.get(PrintDefine.COLUMN_NAME_KEKA_TI);
! 
! 						if (kekati != null && ! kekati.isEmpty()) {
! 							buffer.append("貧血検査　："+kekati);
! 							buffer.append(JApplication.LINE_SEPARATOR);
! 						}
! 					}
! 				}
  
! 				// 心電図（実施理由）
! 				if (kekkaData.keySet().contains("9A110161000000049")) {
! 					Hashtable<String, String> item = kekkaData.get("9A110161000000049");
! 
! 					if (item.keySet().contains(PrintDefine.COLUMN_NAME_KEKA_TI)) {
! 						String kekati = item.get(PrintDefine.COLUMN_NAME_KEKA_TI);
! 
! 						if (kekati != null && ! kekati.isEmpty()) {
! 							buffer.append("心電図検査："+kekati);
! 							buffer.append(JApplication.LINE_SEPARATOR);
! 						}
! 					}
! 				}
! 				// 眼底検査（実施理由）
! 				if (kekkaData.keySet().contains("9E100161000000049")) {
! 					Hashtable<String, String> item = kekkaData.get("9E100161000000049");
! 
! 					if (item.keySet().contains(PrintDefine.COLUMN_NAME_KEKA_TI)) {
! 						String kekati = item.get(PrintDefine.COLUMN_NAME_KEKA_TI);
! 
! 						if (kekati != null && ! kekati.isEmpty()) {
! 							buffer.append("眼底検査　："+kekati);
! 							buffer.append(JApplication.LINE_SEPARATOR);
  						}
  					}
  				}
  
! 				String riyuAll = buffer.toString();
! 				if (riyuAll != null && ! riyuAll.isEmpty()) {
! 					form.setField("T242", riyuAll);
! 				}
! 				/* --------------------------------------------------- */
! 
! 				// 判断した医師名
! 				if (kekkaData.keySet().contains(PrintDefine.CODE_KENKOUSINDAN_WO_JISISITA_ISI_NO_SHIMEI)) {
! 					Hashtable<String, String> item = kekkaData
! 					.get(PrintDefine.CODE_KENKOUSINDAN_WO_JISISITA_ISI_NO_SHIMEI);
! 
! 					if (item.keySet().contains(PrintDefine.COLUMN_NAME_KEKA_TI)) {
! 						ishiName = item.get(PrintDefine.COLUMN_NAME_KEKA_TI);
! 						form.setField("T252", ishiName);
! //						form.setField("T252", item.get(PrintDefine.COLUMN_NAME_KEKA_TI));
! 					}
! 				}
  			}
  
  			/*　2008/06/09 藪 空腹時血糖追加
***************
*** 1081,1425 ****
  			} catch (NumberFormatException e) {
  				e.printStackTrace();
  			}
- 		}
- 		return printFile;
- 	}
- 
- 	// add s.inoue 2010/01/05
- 	private void create2PageSetting(
- 			AcroFields form,
- 			KenshinKekka tmpKenshinKekka,
- 			ArrayList<Hashtable<String, Hashtable<String, String>>> kenshinKekkaData,
- 			String[] kensaNengapiAll,
- 			Hashtable<String, Hashtable<String, String>> dataItemMap,
- 			List ketuatuHL_List,
- 			List KetyuHL_List,
- 			List kankinouHL_List,
- 			List KetouHL_List,
- 			List NyoHL_List,
- 			List ketuatuVal_List,
- 			List KetyuVal_List,
- 			List kankinouVal_List,
- 			List KetouVal_List,
- 			List NyoVal_List
- 	) throws Exception{
- 		//今回、前回、前々回　日付印字
- 		try {
- 			// 今回
- 			form.setField("T227", this.getYmdRemoved0(kensaNengapiLast));
- 			// 前回
- 			form.setField("T400", this.getYmdRemoved0(kensaNengapiLast2));
- 			// 前々回
- 			form.setField("T401", this.getYmdRemoved0(kensaNengapiLast3));
- 		} catch (NullPointerException e) {
- 		}
- 
- 		/*
- 		 * 心電図検査、眼底検査、メタボリックシンドローム判定 今回、前回、前々回
- 		 */
- 		for (int i = 0; i < kensaNengapiAll.length; i++) {
- 			if (kensaNengapiAll[i] != null){
- 				shindenzuGanteiKensa(form, tmpKenshinKekka, kenshinKekkaData, kensaNengapiAll, dataItemMap,i);
- 			}
- 		}
- 
- 		/*
- 		 * メタボリックシンドローム判定
- 		 */
- 		/*
- 		 * 結果値をセット
- 		 */
- 		try {
- 			for (int i = 0; i < kensaNengapiAll.length; i++) {
- 				if (kensaNengapiAll[i] != null){
- 					String kekka="";
- 					// edit ver2 s.inoue 2009/07/27
- 					// kekka = (dataItemMap.get("9N501000000000011").get("CODE_NAME").replaceFirst("\\d+:", ""));
- 					if (kenshinKekkaData.get(0).size() > 0){
- 						kekka = (kenshinKekkaData.get(0).get("9N501000000000011").get("CODE_NAME").replaceFirst("\\d+:", ""));
- 						form.setField("T241",kekka );
- 					}
- 
- 					if (i > 0) {
- 						if (i > 1) {
- 							if (kenshinKekkaData.get(2).size() > 0){
- 								String kekka2="";
- 								kekka2 = (kenshinKekkaData.get(2).get("9N501000000000011").get("CODE_NAME").replaceFirst("\\d+:", ""));
- 								form.setField("T407", kekka2);
- 							}
- 						}
- 						if (kenshinKekkaData.get(1).size() > 0){
- 							String kekka1="";
- 							kekka1 = (kenshinKekkaData.get(1).get("9N501000000000011").get("CODE_NAME").replaceFirst("\\d+:", ""));
- 							form.setField("T406", kekka1);
- 						}
- 					}
- 				}
- 			}
- 		} catch (IndexOutOfBoundsException e) {
- 
- 		}
- 
- 		// 検査分野別判定
- 		try {
- 			List kensaContain = new ArrayList();
- 			kensaContain.add("");
- //			kensaContain.add(null);
- 
- 			String strValues = "";
- 
- 			//血圧
- 			strValues = kensabunyaBetuHntei(ketuatuHL_List, ketuatuVal_List, kensaContain, strValues,PrintDefine.KETUATU_SEIJYO,PrintDefine.KETUATU_IJYO);
- 			//血中脂質検査
- 			strValues = kensabunyaBetuHntei(KetyuHL_List, KetyuVal_List, kensaContain, strValues,PrintDefine.KETTYU_SEIJYO,PrintDefine.KETTYU_IJYO);
- 			//肝機能検査
- 			strValues = kensabunyaBetuHntei(kankinouHL_List, kankinouVal_List, kensaContain, strValues,PrintDefine.KANKINOU_SEIJYO,PrintDefine.KANKINOU_IJYO);
- 			//血糖検査
- 			strValues = kensabunyaBetuHntei(KetouHL_List, KetouVal_List, kensaContain, strValues,PrintDefine.KETTOU_SEIJYO,PrintDefine.KETTOU_IJYO);
- 
- 			form.setField("T236",strValues);
- 
- 		} catch (Exception e) {
- 		}
- 		/*
- 		 * 医師の判断（今回の健診のみ）
- 		 */
- 		if (kenshinKekkaData.size() > 0) {
- 			/* --------------------------------------------------- */
- 			Hashtable<String, Hashtable<String, String>> kekkaData = dataItemMap;
- 
- 			StringBuffer buffer = new StringBuffer();
- 			if (kekkaData.keySet().contains(PrintDefine.CODE_ISHINO_HANDAN)) {
- 				Hashtable<String, String> item = kekkaData
- 				.get(PrintDefine.CODE_ISHINO_HANDAN);
- 
- 				if (item.keySet().contains(PrintDefine.COLUMN_NAME_KEKA_TI)) {
- 					String kekati = item.get(PrintDefine.COLUMN_NAME_KEKA_TI);
- 
- 					if (kekati != null && ! kekati.isEmpty()) {
- //						form.setField("T242", item.get(COLUMN_NAME_KEKA_TI));
- 						buffer.append(kekati);
- 						buffer.append(JApplication.LINE_SEPARATOR);
- 					}
- 				}
- 			}
- 
- 			// 貧血検査（実施理由）
- 			if (kekkaData.keySet().contains("2A020161001930149")) {
- 				Hashtable<String, String> item = kekkaData.get("2A020161001930149");
- 
- 				if (item.keySet().contains(PrintDefine.COLUMN_NAME_KEKA_TI)) {
- 					String kekati = item.get(PrintDefine.COLUMN_NAME_KEKA_TI);
- 
- 					if (kekati != null && ! kekati.isEmpty()) {
- 						buffer.append("貧血検査　："+kekati);
- 						buffer.append(JApplication.LINE_SEPARATOR);
- 					}
- 				}
- 			}
- 
- 			// 心電図（実施理由）
- 			if (kekkaData.keySet().contains("9A110161000000049")) {
- 				Hashtable<String, String> item = kekkaData.get("9A110161000000049");
- 
- 				if (item.keySet().contains(PrintDefine.COLUMN_NAME_KEKA_TI)) {
- 					String kekati = item.get(PrintDefine.COLUMN_NAME_KEKA_TI);
- 
- 					if (kekati != null && ! kekati.isEmpty()) {
- 						buffer.append("心電図検査："+kekati);
- 						buffer.append(JApplication.LINE_SEPARATOR);
- 					}
- 				}
- 			}
- 			// 眼底検査（実施理由）
- 			if (kekkaData.keySet().contains("9E100161000000049")) {
- 				Hashtable<String, String> item = kekkaData.get("9E100161000000049");
- 
- 				if (item.keySet().contains(PrintDefine.COLUMN_NAME_KEKA_TI)) {
- 					String kekati = item.get(PrintDefine.COLUMN_NAME_KEKA_TI);
- 
- 					if (kekati != null && ! kekati.isEmpty()) {
- 						buffer.append("眼底検査　："+kekati);
- 						buffer.append(JApplication.LINE_SEPARATOR);
- 					}
- 				}
- 			}
- 
- 			String riyuAll = buffer.toString();
- 			if (riyuAll != null && ! riyuAll.isEmpty()) {
- 				form.setField("T242", riyuAll);
- 			}
- 			/* --------------------------------------------------- */
- 
- 			// 判断した医師名
- 			if (kekkaData.keySet().contains(PrintDefine.CODE_KENKOUSINDAN_WO_JISISITA_ISI_NO_SHIMEI)) {
- 				Hashtable<String, String> item = kekkaData
- 				.get(PrintDefine.CODE_KENKOUSINDAN_WO_JISISITA_ISI_NO_SHIMEI);
- 
- 				if (item.keySet().contains(PrintDefine.COLUMN_NAME_KEKA_TI)) {
- 					ishiName = item.get(PrintDefine.COLUMN_NAME_KEKA_TI);
- 					form.setField("T252", ishiName);
- //					form.setField("T252", item.get(PrintDefine.COLUMN_NAME_KEKA_TI));
- 				}
- 			}
- 		}
- 	}
- 
- 
- 
- 	/**
- 	 * 特定健康診査受診結果を作成する　
- 	 *
- 	 * @param stamp
- 	 * @param KikanData
- 	 * @param kojinData
- 	 * @param uketukeId
- 	 * @param kensaNengapi
- 	 * @return
- 	 */
- 	private File create1Page(PdfStamper stamp, Hashtable<String, String> KikanData,
- 			Hashtable<String, String> kojinData,
- 			String uketukeId, String kensaNengapi,
- 			int maxPage) {
- 
- 		Map<String,ArrayList<String>>ResultMap  = new HashMap<String,ArrayList<String>>();
- 
- 		List ketuatuHL_List = new ArrayList();
- 		List KetyuHL_List = new ArrayList();
- 		List kankinouHL_List = new ArrayList();
- 		List KetouHL_List = new ArrayList();
- 		List NyoHL_List = new ArrayList();
- 		ketuatuHL_List.clear();
- 		KetyuHL_List.clear();
- 		kankinouHL_List.clear();
- 		KetouHL_List.clear();
- 		NyoHL_List.clear();
- 
- 		List ketuatuVal_List = new ArrayList();
- 		List KetyuVal_List = new ArrayList();
- 		List kankinouVal_List = new ArrayList();
- 		List KetouVal_List = new ArrayList();
- 		List NyoVal_List = new ArrayList();
- 		ketuatuVal_List.clear();
- 		KetyuVal_List.clear();
- 		kankinouVal_List.clear();
- 		KetouVal_List.clear();
- 		NyoVal_List.clear();
- 
- 		try {
- 			if (KikanData == null) {
- 				System.out.println("KikanData is null.");
- 				return null;
- 			}
- 
- 			// ファイル作成
- 			// edit s.inoue 2009/12/25
- 			String temppath_1 ="";
- 			String temppath_2 ="";
- 			if (printSelect == 2){
- 				temppath_1 = templatePath_1;
- 				temppath_2 = templatePath_2;
- // del s.inoue 2009/12/25
- //				if (maxPage == 0){
- //					try{
- //						PdfReader reader = new PdfReader(temppath_2);
- //
- //						PdfStamper stamp_2 = new PdfStamper(reader, new FileOutputStream(temppath_2));
- //						AcroFields form_2 = stamp.getAcroFields();
- //						stamp.close();
- //						reader.close();
- //
- //						pdfPathList.add(tmpPath+Integer.toString(cnt));
- //					}catch (Exception e){
- //						e.printStackTrace();
- //					}
- //				}
- 			}else{
- 				temppath_1 = templatePath;
- 			}
- 
- 			// PdfReader reader = new PdfReader(templatePath);
- 			PdfReader reader = new PdfReader(temppath_1);
- 
- 			kensaNengapi = kensaNengapi.replaceAll("年", "");
- 			kensaNengapi = kensaNengapi.replaceAll("月", "");
- 			kensaNengapi = kensaNengapi.replaceAll("日", "");
- 
- 			StringBuffer buffer = new StringBuffer();
- 			buffer.append("."+File.separator+"Data"+File.separator+"PDF"+File.separator+"kekka");
- 			buffer.append( uketukeId );
- 			buffer.append( "-" );
- 			buffer.append( kensaNengapi );
- 
- 			/* 同じ受付ID、健診年月日のファイルを開けるようにする。 */
- 			Calendar cal = Calendar.getInstance();
- 			buffer.append( "-" );
- 			buffer.append( cal.getTimeInMillis() );
- 
- 			buffer.append(".pdf");
- 			String kekkaFilePath = buffer.toString();
- 
- 			/* 2枚目追加の為1枚目は、名前をdummyで作成する。 */
- 			FileOutputStream fileOutputStream = new FileOutputStream(PrintDefine.WORK_PDF_TMP_DUMMY_PDF);
- 
- 			stamp = new PdfStamper(
- 					reader,
- 					fileOutputStream);
- 
- 			AcroFields form = stamp.getAcroFields();
- 
- 			printFile = new File(kekkaFilePath);
- 
- 
- 			//ページ番号を設定する
- 			int maxP = Integer.valueOf(maxPage);
- 			String maxSt = Integer.toString(maxP+1);
- 			form.setField("PAGE_NUM", "（1／"+maxSt+"）");
- 
- 			/* 機関情報を出力する。 */
- 			this.printKikanData(KikanData, form);
- 
- 			/* 個人情報を出力する。 */
- 			this.printKojinData(kojinData, kensaNengapi, form);
- 
- 			/*
- 			 * 健診結果情報 PrintDataから健診結果情報を抽出
- 			 */
- 			ArrayList<String> itemCodes = new ArrayList<String>();
- 			KenshinKekka tmpKenshinKekka = (KenshinKekka) printData
- 			.get("KenshinKekka");
- 
- 			if (tmpKenshinKekka == null) {
- 				System.out.println("tmpKenshinKekka is null.");
- 				return printFile;
- 			}
- 
- 			// edit s.inoue 2010/01/05
- 			// 機能外だし
- 			ArrayList<Hashtable<String, Hashtable<String, String>>> kenshinKekkaData =
- 				tmpKenshinKekka.getPrintKenshinKekkaData();
- 			String[] kensaNengapiAll = tmpKenshinKekka.getKensaNengapi();
- 			Hashtable<String, Hashtable<String, String>> dataItemMap = kenshinKekkaData.get(0);
- 
- 			// edit s.inoue 2010/01/05
- 			// 左ページを外出し
- 			try {
- 				create1PageSetting(form, tmpKenshinKekka,kenshinKekkaData,kensaNengapiAll,dataItemMap,
- 						ketuatuHL_List,KetyuHL_List,kankinouHL_List,KetouHL_List,NyoHL_List,
- 						ketuatuVal_List,KetyuVal_List,kankinouVal_List,KetouVal_List,NyoVal_List,itemCodes,kojinData,ResultMap);
- 			}catch(Exception ex){
- 				logger.error(ex.getMessage());
- 			}
  
- 			// edit s.inoue 2010/01/05
- 			// 右ページを外出し
- 			try {
- 				create2PageSetting(form, tmpKenshinKekka,kenshinKekkaData,kensaNengapiAll,dataItemMap,
- 						ketuatuHL_List,KetyuHL_List,kankinouHL_List,KetouHL_List,NyoHL_List,
- 						ketuatuVal_List,KetyuVal_List,kankinouVal_List,KetouVal_List,NyoVal_List);
- 			}catch(Exception ex){
- 				logger.error(ex.getMessage());
- 			}
  			stamp.setFormFlattening(true);
  			stamp.close();
  			fileOutputStream.close();
--- 1067,1073 ----
***************
*** 1999,2006 ****
  		PdfReader addpage2 ;
  		PdfReader addpage3 ;
  		PdfReader addpage4 ;
- 		// edit s.inoue 2009/12/29
- 		PdfReader addpage5 ;
  
  		int fileAddCnt = filePathList.size();
  
--- 1647,1652 ----
***************
*** 2018,2065 ****
  				reader.close();
  			}
  
- 			// edit s.inoue 2009/12/29
  			if(juge==1){
! 				addpage2 = new PdfReader(PrintDefine.WORK_PDF_DUMMY2_PDF);
  				copy.addDocument(addpage2);
  			}else if(juge==2){
! 				addpage2 = new PdfReader(PrintDefine.WORK_PDF_DUMMY2_PDF);
! 				addpage3 = new PdfReader(PrintDefine.WORK_PDF_TMP_INKEKKA2PAGE_PDF);
  				copy.addDocument(addpage2);
  				copy.addDocument(addpage3);
  			}else if(juge==3){
! 				addpage2 = new PdfReader(PrintDefine.WORK_PDF_DUMMY2_PDF);
! 				addpage3 = new PdfReader(PrintDefine.WORK_PDF_TMP_INKEKKA2PAGE_PDF);
! 				addpage4 = new PdfReader(PrintDefine.WORK_PDF_TMP_INKEKKA3PAGE_PDF);
! 				copy.addDocument(addpage2);
! 				copy.addDocument(addpage3);
! 				copy.addDocument(addpage4);
! 			}else if(juge==4){
! 				addpage2 = new PdfReader(PrintDefine.WORK_PDF_DUMMY2_PDF);
! 				addpage3 = new PdfReader(PrintDefine.WORK_PDF_TMP_INKEKKA2PAGE_PDF);
! 				addpage4 = new PdfReader(PrintDefine.WORK_PDF_TMP_INKEKKA3PAGE_PDF);
! 				addpage5 = new PdfReader(PrintDefine.WORK_PDF_TMP_INKEKKA4PAGE_PDF);
  				copy.addDocument(addpage2);
  				copy.addDocument(addpage3);
  				copy.addDocument(addpage4);
- 				copy.addDocument(addpage5);
  			}
- //			if(juge==1){
- //				addpage2 = new PdfReader(PrintDefine.WORK_PDF_TMP_INKEKKA2PAGE_PDF);
- //				copy.addDocument(addpage2);
- //			}else if(juge==2){
- //				addpage2 = new PdfReader(PrintDefine.WORK_PDF_TMP_INKEKKA2PAGE_PDF);
- //				addpage3 = new PdfReader(PrintDefine.WORK_PDF_TMP_INKEKKA3PAGE_PDF);
- //				copy.addDocument(addpage2);
- //				copy.addDocument(addpage3);
- //			}else if(juge==3){
- //				addpage2 = new PdfReader(PrintDefine.WORK_PDF_TMP_INKEKKA2PAGE_PDF);
- //				addpage3 = new PdfReader(PrintDefine.WORK_PDF_TMP_INKEKKA3PAGE_PDF);
- //				addpage4 = new PdfReader(PrintDefine.WORK_PDF_TMP_INKEKKA4PAGE_PDF);
- //				copy.addDocument(addpage2);
- //				copy.addDocument(addpage3);
- //				copy.addDocument(addpage4);
- //			}
  			copy.close();
  		} catch (FileNotFoundException e) {
  			e.printStackTrace();
--- 1664,1685 ----
  				reader.close();
  			}
  
  			if(juge==1){
! 				addpage2 = new PdfReader(PrintDefine.WORK_PDF_TMP_INKEKKA2PAGE_PDF);
  				copy.addDocument(addpage2);
  			}else if(juge==2){
! 				addpage2 = new PdfReader(PrintDefine.WORK_PDF_TMP_INKEKKA2PAGE_PDF);
! 				addpage3 = new PdfReader(PrintDefine.WORK_PDF_TMP_INKEKKA3PAGE_PDF);
  				copy.addDocument(addpage2);
  				copy.addDocument(addpage3);
  			}else if(juge==3){
! 				addpage2 = new PdfReader(PrintDefine.WORK_PDF_TMP_INKEKKA2PAGE_PDF);
! 				addpage3 = new PdfReader(PrintDefine.WORK_PDF_TMP_INKEKKA3PAGE_PDF);
! 				addpage4 = new PdfReader(PrintDefine.WORK_PDF_TMP_INKEKKA4PAGE_PDF);
  				copy.addDocument(addpage2);
  				copy.addDocument(addpage3);
  				copy.addDocument(addpage4);
  			}
  			copy.close();
  		} catch (FileNotFoundException e) {
  			e.printStackTrace();
***************
*** 2205,2213 ****
  		String kekati = tmpKenshinKekka.getKekati(tmp, 0);
  		if (kekati != null && kekati.equals(PrintDefine.ONE)) {
  			kiourekiList.add(PrintDefine.CEREBRAL_BLOOD_VESSEL);
- 		// add h.yoshitama 2009/11/24
- 		}else if(kekati != null && kekati.equals(PrintDefine.TWO)) {
- 			kiourekiList.add(PrintDefine.NO_CEREBRAL_BLOOD_VESSEL);
  		}
  
  		/* 既往歴２（心血管） */
--- 1825,1830 ----
***************
*** 2216,2223 ****
  		kekati = tmpKenshinKekka.getKekati(tmp, 0);
  		if (kekati != null && kekati.equals(PrintDefine.ONE)) {
  			kiourekiList.add(PrintDefine.CARDIOVASCULAR_SYSTEM);
- 		}else if(kekati != null && kekati.equals(PrintDefine.TWO)) {
- 			kiourekiList.add(PrintDefine.NO_CARDIOVASCULAR_SYSTEM);
  		}
  
  		/* 既往歴３（腎不全・人工透析） */
--- 1833,1838 ----
***************
*** 2226,2233 ****
  		kekati = tmpKenshinKekka.getKekati(tmp, 0);
  		if (kekati != null && kekati.equals(PrintDefine.ONE)) {
  			kiourekiList.add(PrintDefine.LIVER_FAILURE);
- 		}else if(kekati != null && kekati.equals(PrintDefine.TWO)) {
- 			kiourekiList.add(PrintDefine.NO_LIVER_FAILURE);
  		}
  
  		/* 貧血 */
--- 1841,1846 ----
***************
*** 2237,2245 ****
  		kekati = tmpKenshinKekka.getKekati(tmp, 0);
  		if (kekati != null && kekati.equals(PrintDefine.ONE)) {
  			kiourekiList.add(PrintDefine.ANEMIA);
- 		// add h.yoshitama 2009/11/24
- 		}else if(kekati != null && kekati.equals(PrintDefine.TWO)) {
- 			kiourekiList.add(PrintDefine.NO_ANEMIA);
  		}
  
  		/* 既往歴 */
--- 1850,1855 ----
***************
*** 2259,2275 ****
  					kiourekiList.add(kiourekis[i]);
  				}
  			}
- 		// add h.yoshitama 2009/11/24
- 		}else if (kekati.equals(PrintDefine.TWO)){
- 			/* （具体的な既往歴） */
- 			tmp.clear();
- 			tmp.add(PrintDefine.CODE_GUTAITEKINA_KIOUREKI);
- 
- 			kekati = tmpKenshinKekka.getKekati(tmp, 0);
- 			if (kekati != null && ! kekati.isEmpty()) {
- 				kiourekiList.add(PrintDefine.NO_TOKKIJIKO);
- 
- 			}
  		}
  
  		buffer = new StringBuffer();
--- 1869,1874 ----
***************
*** 2284,2318 ****
  		form.setField("T171", buffer.toString());
  
  		// 自覚症状
- 		// edit h.yoshitama 2009/11/24
- 		tmp.clear();
- 		tmp.add(PrintDefine.CODE_ZIKAKU_UMU);
- 		kekati = tmpKenshinKekka.getKekati(tmp, 0);
  		Hashtable<String, String> item = dataItemMap.get(
  				PrintDefine.CODE_ZIKAKUSYOJOU);
! 		if (kekati.equals(PrintDefine.ONE)) {
! 			if (item != null) {
! 				form.setField("T179", item.get(PrintDefine.COLUMN_NAME_KEKA_TI));
! 			}
! 		}else if(kekati.equals(PrintDefine.TWO)) {
! 			form.setField("T179", PrintDefine.NO_TOKKIJIKO);
  		}
  
  
  		// 他覚症状
- 		// edit h.yoshitama 2009/11/24
- 		tmp.clear();
- 		tmp.add(PrintDefine.CODE_TAKAKU_UMU);
- 		kekati = tmpKenshinKekka.getKekati(tmp, 0);
  		item = dataItemMap.get(PrintDefine.CODE_TAKAKUSYOJOU);
! 		if (kekati.equals(PrintDefine.ONE)) {
! 			if (item != null) {
! 				form.setField("T181", item.get(PrintDefine.COLUMN_NAME_KEKA_TI));
! 			}
! 		}else if(kekati.equals(PrintDefine.TWO)) {
! 			form.setField("T181", PrintDefine.NO_TOKKIJIKO);
  		}
  
  		/* 服薬歴 */
  		this.setFukuyakuToFields(form, tmpKenshinKekka);
  
--- 1883,1902 ----
  		form.setField("T171", buffer.toString());
  
  		// 自覚症状
  		Hashtable<String, String> item = dataItemMap.get(
  				PrintDefine.CODE_ZIKAKUSYOJOU);
! 		if (item != null) {
! 			form.setField("T179", item.get(PrintDefine.COLUMN_NAME_KEKA_TI));
  		}
  
  
  		// 他覚症状
  		item = dataItemMap.get(PrintDefine.CODE_TAKAKUSYOJOU);
! 		if (item != null) {
! 			form.setField("T181", item.get(PrintDefine.COLUMN_NAME_KEKA_TI));
  		}
  
+ 
  		/* 服薬歴 */
  		this.setFukuyakuToFields(form, tmpKenshinKekka);
  
***************
*** 2697,2706 ****
  
  	private void setFukuyakuToFields(AcroFields form, KenshinKekka tmpKenshinKekka)
  	throws IOException, DocumentException {
- 		// add h.yoshitama 2009/11/24
- 		boolean ketsuatsu = false;
- 		boolean ketto = false;
- 		boolean shishitsu = false;
  
  		if (tmpKenshinKekka == null) {
  			return;
--- 2281,2286 ----
***************
*** 2718,2726 ****
  		if (kekati != null) {
  			if (kekati.equals(PrintDefine.ONE)) {
  				hukuyakuList.add(PrintDefine.NAME_KETUATU);
- 			// add h.yoshitama 2009/11/24
- 			}else if (kekati.equals(PrintDefine.TWO)) {
- 				ketsuatsu = true;
  			}
  		}
  
--- 2298,2303 ----
***************
*** 2731,2739 ****
  		if (kekati != null) {
  			if (kekati.equals(PrintDefine.ONE)) {
  				hukuyakuList.add(PrintDefine.NAME_KETTOU);
- 			// add h.yoshitama 2009/11/24
- 			}else if (kekati.equals(PrintDefine.TWO)) {
- 				ketto = true;
  			}
  		}
  
--- 2308,2313 ----
***************
*** 2744,2752 ****
  		if (kekati != null) {
  			if (kekati.equals(PrintDefine.ONE)) {
  				hukuyakuList.add(PrintDefine.NAME_SHISHITU);
- 			// add h.yoshitama 2009/11/24
- 			}else if (kekati.equals(PrintDefine.TWO)) {
- 				shishitsu = true;
  			}
  		}
  		/* --------------------------------------------------- */
--- 2318,2323 ----
***************
*** 2762,2788 ****
  		}
  
  		String fukuyakureki = buffer.toString();
! 		// edit h.yoshitama 2009/11/24
! 		if(ketsuatsu && ketto && shishitsu){
! 			form.setField("T177", PrintDefine.NO_HUKUYAKU);
! 		}else{
! 			form.setField("T177", fukuyakureki);
! 		}
  	}
  
  	/**
  	 * 健診結果通知表を印刷する。
  	 */
  	public void printResultCard(String kensaNengapi, String uketukeId,
  			String hihokenjyaCode, String hihokenjyaNumber,
! 			String hokenjyaNumber, JFrame owner, int printSelect) {
! 
! 		// edit s.inoue 2009/12/25
! 		this.printSelect = printSelect;
  
  		/* 進捗通知画面を表示する。 */
  		ProgressWindow progressWindow = new ProgressWindow(owner, false, true);
! 		progressWindow.setGuidanceByKey("tokutei.showresult.frame.progress.guidance.print1");
  		progressWindow.setVisible(true);
  
  		try {
--- 2333,2354 ----
  		}
  
  		String fukuyakureki = buffer.toString();
! 		form.setField("T177", fukuyakureki);
  	}
  
+ 
+ 	/* --------------------------------------------------- */
  	/**
  	 * 健診結果通知表を印刷する。
  	 */
  	public void printResultCard(String kensaNengapi, String uketukeId,
  			String hihokenjyaCode, String hihokenjyaNumber,
! 			String hokenjyaNumber, JFrame owner) {
  
  		/* 進捗通知画面を表示する。 */
  		ProgressWindow progressWindow = new ProgressWindow(owner, false, true);
! 		progressWindow
! 		.setGuidanceByKey("tokutei.showresult.frame.progress.guidance.print1");
  		progressWindow.setVisible(true);
  
  		try {
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/print/PrintKihonChkList.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/print/PrintKihonChkList.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/print/PrintKihonChkList.java	Tue Jan  5 18:42:38 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/print/PrintKihonChkList.java	Tue Aug 11 17:55:30 2009
***************
*** 36,42 ****
  	 * @return pdfPathList
  	 */
  	public String createChkList(List kensaNenList, Hashtable<String, String> kojinData,
! 			Hashtable<String, String> kikanData, String ishiName, int div, int printSelect){
  
  		String tmpPath = WORK_SEIKATU_KIHION_PDF;
  		String kensaNengappi = replaseNenGaPii(kensaNenList,0);
--- 36,42 ----
  	 * @return pdfPathList
  	 */
  	public String createChkList(List kensaNenList, Hashtable<String, String> kojinData,
! 			Hashtable<String, String> kikanData, String ishiName, int div  ){
  
  		String tmpPath = WORK_SEIKATU_KIHION_PDF;
  		String kensaNengappi = replaseNenGaPii(kensaNenList,0);
***************
*** 74,85 ****
  			if  (tmpChkListKeys.size() > 2){
  				zzTmpChkList = addM.getKihonChk(kojinData, zzKensaNengappi, Arrays.asList(PrintDefine.codesSeikatuKihon),tmpChkListKeys.get(2));
  			}
! 			createPdf(kensaNenList,tmpPath,tmpChkList,zTmpChkList,zzTmpChkList,kikanData,kojinData,ishiName,div,printSelect);
  		}else{
  			if (tmpChkListKeys.size() > 0){
  				tmpChkList = addM.getKihonChk(kojinData, kensaNengappi, Arrays.asList(PrintDefine.codesSeikatuKihon),tmpChkListKeys.get(0));
  			}
! 			createPdf(kensaNenList,tmpPath,tmpChkList,null,null,kikanData,kojinData,ishiName,div,printSelect);
  		}
  
  		return pdfPathList;
--- 74,85 ----
  			if  (tmpChkListKeys.size() > 2){
  				zzTmpChkList = addM.getKihonChk(kojinData, zzKensaNengappi, Arrays.asList(PrintDefine.codesSeikatuKihon),tmpChkListKeys.get(2));
  			}
! 			createPdf(kensaNenList,tmpPath,tmpChkList,zTmpChkList,zzTmpChkList,kikanData,kojinData,ishiName,div);
  		}else{
  			if (tmpChkListKeys.size() > 0){
  				tmpChkList = addM.getKihonChk(kojinData, kensaNengappi, Arrays.asList(PrintDefine.codesSeikatuKihon),tmpChkListKeys.get(0));
  			}
! 			createPdf(kensaNenList,tmpPath,tmpChkList,null,null,kikanData,kojinData,ishiName,div);
  		}
  
  		return pdfPathList;
***************
*** 96,103 ****
  			Hashtable<String, String> kikanData,
  			Hashtable<String, String> kojinData,
  			String ishiName,
! 			int cnt,
! 			int printSelect
  	) {
  
  		String kensaNengappi;
--- 96,103 ----
  			Hashtable<String, String> kikanData,
  			Hashtable<String, String> kojinData,
  			String ishiName,
! 			int cnt
! 
  	) {
  
  		String kensaNengappi;
***************
*** 125,141 ****
  			form.setField("kNENGAPPI",isVal(kensaNenList,0));
  			form.setField("zNENGAPPI",isVal(kensaNenList,1));
  			form.setField("zzNENGAPPI", isVal(kensaNenList,2));
! 
! 			// edit s.inoue 2010/01/05
! 			// ページ設定（印刷方式変更対応）
! 			int sabunPageNum = cnt+2;
! 			int sabunDivNum = cnt+2;
! 			if (printSelect == 2) {
! 				sabunPageNum++;
! 				sabunDivNum++;
! 			}
! 			form.setField("PAGE_KO",  Integer.toString(sabunPageNum));
! 			form.setField("PAGE_OYA", Integer.toString(sabunDivNum));
  
  			//今回
  			if(!tmpChkList.isEmpty()){
--- 125,132 ----
  			form.setField("kNENGAPPI",isVal(kensaNenList,0));
  			form.setField("zNENGAPPI",isVal(kensaNenList,1));
  			form.setField("zzNENGAPPI", isVal(kensaNenList,2));
! 			form.setField("PAGE_KO",  Integer.toString(cnt+2));
! 			form.setField("PAGE_OYA", Integer.toString(cnt+2));
  
  			//今回
  			if(!tmpChkList.isEmpty()){
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/print/PrintNyuryoku.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/print/PrintNyuryoku.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/print/PrintNyuryoku.java	Tue Nov 17 10:24:22 2009
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/print/PrintNyuryoku.java	Tue Nov 17 10:25:48 2009
***************
*** 164,169 ****
--- 164,170 ----
  			form.setField("T28", kojinData.get("AGE"));
  
  // del s.inoue 2009/11/16
+ // 追加健診項目は印字しない
  //			if (kojinData.get("UKETUKE_ID") != null) {
  //				Hashtable<String, String> ResultItem = null;
  //				// 追加の項目
***************
*** 214,233 ****
  
  		ArrayList<Hashtable<String, String>> rtnList = new ArrayList<Hashtable<String, String>>();
  
- 		/* Modified 2008/07/15 若月  */
- 		/* --------------------------------------------------- */
- //		Query = "SELECT"
- //			+ " T_KENSAKEKA_SONOTA.KOUMOKU_CD AS KOUMOKU_CD, "
- //			+ " T_KENSHINMASTER.KOUMOKU_NAME AS KOUMOKU_NAME, "
- //			+ " T_KENSHINMASTER.TANI AS TANI"
- //			+ " From (T_KENSAKEKA_SONOTA INNER JOIN T_KENSHINMASTER ON T_KENSAKEKA_SONOTA.KOUMOKU_CD = T_KENSHINMASTER.KOUMOKU_CD)"
- //			+ " WHERE T_KENSAKEKA_SONOTA.UKETUKE_ID = "
- //			+ KojinData.get("UKETUKE_ID")
- //			+ " AND T_KENSAKEKA_SONOTA.KENSA_NENGAPI = "
- //			+ KojinData.get("UKETUKE_NENGAPI")
- //			+ " AND T_KENSHINMASTER.HKNJANUM = "
- //			+ KojinData.get("HKNJANUM");
- 		/* --------------------------------------------------- */
  		Query = "SELECT"
  			+ " T_KENSAKEKA_SONOTA.KOUMOKU_CD AS KOUMOKU_CD, "
  			+ " T_KENSHINMASTER.KOUMOKU_NAME AS KOUMOKU_NAME, "
--- 215,220 ----
***************
*** 241,247 ****
  			+ "' AND T_KENSHINMASTER.HKNJANUM = '"
  			+ KojinData.get("HKNJANUM")
  			+ "'";
- 		/* --------------------------------------------------- */
  
  		try {
  			Result = JApplication.kikanDatabase.sendExecuteQuery(Query);
--- 228,233 ----
***************
*** 253,258 ****
--- 239,245 ----
  		kihonKensaKoumoku.setKenshinCD();
  		for (int i = 0; i < Result.size(); i++) {
  			ResultItem = Result.get(i);
+ 
  			if (! kihonKensaKoumoku.TSUIKA_CODES.contains(ResultItem
  					.get("KOUMOKU_CD"))) {
  			} else {
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/printdata/AddMedical.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/printdata/AddMedical.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/printdata/AddMedical.java	Wed Apr 21 18:51:24 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/printdata/AddMedical.java	Fri Oct 30 14:05:00 2009
***************
*** 3,9 ****
  import java.sql.SQLException;
  import java.util.ArrayList;
  import java.util.Arrays;
- import java.util.HashSet;
  import java.util.Hashtable;
  import java.util.List;
  import java.util.SortedMap;
--- 3,8 ----
***************
*** 13,19 ****
  
  import jp.or.med.orca.jma_tokutei.common.app.JApplication;
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
- import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.frame.JKenshinPatternMaintenanceEditFrameData;
  import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.print.PrintDefine;
  import jp.or.med.orca.jma_tokutei.kenshin.healthexamination.print.PrintShukeiList;
  import jp.or.med.orca.jma_tokutei.common.util.FiscalYearUtil;
--- 12,17 ----
***************
*** 187,205 ****
  			e.printStackTrace();
  		}
  
- 		// edit s.inoue 2010/04/21
- 		JKenshinPatternMaintenanceEditFrameData kenshinmast
- 			= new JKenshinPatternMaintenanceEditFrameData();
- 		HashSet<String> dokuji= kenshinmast.getDokujiTuikaCD();
- 
  		// 追加健診コード一覧比較処理
  		for (int i = 0; i < result.size(); i++) {
  			item = result.get(i);
  
  			String code = item.get(PrintDefine.CODE_KOUMOKU);
! 			// edit s.inoue 2010/04/21
! 			if (KihonKensaKoumoku.TSUIKA_CODES.contains(code) ||
! 					dokuji.contains(code)) {
  				rtnList.add(item);
  			}
  		}
--- 185,197 ----
  			e.printStackTrace();
  		}
  
  		// 追加健診コード一覧比較処理
  		for (int i = 0; i < result.size(); i++) {
  			item = result.get(i);
  
  			String code = item.get(PrintDefine.CODE_KOUMOKU);
! 
! 			if (KihonKensaKoumoku.TSUIKA_CODES.contains(code)) {
  				rtnList.add(item);
  			}
  		}
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/printdata/Gekeihyo.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/printdata/Gekeihyo.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/printdata/Gekeihyo.java	Thu Apr 22 17:18:24 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/printdata/Gekeihyo.java	Fri Oct 30 14:05:00 2009
***************
*** 79,94 ****
  		}
  
  		// ＨＬ７出力日 ↓↓ヘッダ情報↓↓
! 		// edit s.inoue 2010/04/22
! 		String henkanNitiji = ResultItem.get("HENKAN_NITIJI");
! 		henkanNitiji = (henkanNitiji == null)?"":henkanNitiji;
! 
! 		if (!henkanNitiji.equals("")){
! 		// if(ResultItem.get("HENKAN_NITIJI") != null){
  			this.SeikyuData.put("HENKAN_NITIJI",
  					ResultItem.get("HENKAN_NITIJI").substring(0, 4) + "年"
  					+ ResultItem.get("HENKAN_NITIJI").substring(4, 6) + "月"
  					+ ResultItem.get("HENKAN_NITIJI").substring(6, 8) + "日");
  		} else {
  			Calendar cal = Calendar.getInstance();
  			String date = JValidate.fillZero(String.valueOf(cal.get(Calendar.YEAR)), 4) +
--- 79,90 ----
  		}
  
  		// ＨＬ７出力日 ↓↓ヘッダ情報↓↓
! 		if(ResultItem.get("HENKAN_NITIJI") != null){
  			this.SeikyuData.put("HENKAN_NITIJI",
  					ResultItem.get("HENKAN_NITIJI").substring(0, 4) + "年"
  					+ ResultItem.get("HENKAN_NITIJI").substring(4, 6) + "月"
  					+ ResultItem.get("HENKAN_NITIJI").substring(6, 8) + "日");
+ 
  		} else {
  			Calendar cal = Calendar.getInstance();
  			String date = JValidate.fillZero(String.valueOf(cal.get(Calendar.YEAR)), 4) +
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/printdata/KenshinKekka.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/printdata/KenshinKekka.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/printdata/KenshinKekka.java	Tue Apr 13 19:07:22 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/printdata/KenshinKekka.java	Fri Sep 18 19:58:06 2009
***************
*** 56,238 ****
  	 * @return	boolean
  	 */
  	public boolean setPrintKenshinKekkaSQL(Hashtable<String, String> data){
! 		ArrayList<Hashtable<String,String>> resultCount = null;
! 		ArrayList<Hashtable<String,String>> resultList = null;
! 		ArrayList<Hashtable<String,String>> resultHistoryList = null;
! 
! 		Hashtable<String,String> resultItem = null;
  		Hashtable<String,String> tmp1 = new Hashtable<String,String>();
  		Hashtable<String, Hashtable<String,String>> tmp2 = new Hashtable<String, Hashtable<String,String>>();
  
  		/*
  		 * 健診年月日を取得
  		 * 今回、前回、前々回
  		 */
! //		try{
  // edit ver2 s.inoue 2009/06/03
  //			Query =
  //			"SELECT DISTINCT KENSA_NENGAPI FROM T_KENSAKEKA_SONOTA WHERE UKETUKE_ID = "
  //			+ JQueryConvert.queryConvert(data.get("UKETUKE_ID")) +
  //			" ORDER BY KENSA_NENGAPI DESC";
  
- // edit s.inoue 2010/04/06
- 			// 指定レコードより過去３件分表示
  			// 今年度かどうか
! //			String kensaNenGappi = data.get("KENSA_NENGAPI");
! //			boolean blnYear = FiscalYearUtil.getJugeThisYear(kensaNenGappi);
! 
! //			// 1件データかどうか
! //			if (blnYear) {
! //				// 1.受付IDから紐付けIDを取得
! //				sbNengapi.append(" SELECT KENSA_NENGAPI,GET_NAYOSE.UKETUKE_ID FROM T_KENSAKEKA_TOKUTEI TS, ");
! //				sbNengapi.append(" (SELECT UKETUKE_ID FROM T_NAYOSE TN ");
! //				sbNengapi.append(" WHERE TN.NAYOSE_NO = ");
! //				sbNengapi.append(" (SELECT NAYOSE_NO FROM T_NAYOSE TN WHERE TN.UKETUKE_ID = ");
! //				sbNengapi.append(JQueryConvert.queryConvert(data.get("UKETUKE_ID")));
! //				sbNengapi.append("  )) GET_NAYOSE WHERE TS.UKETUKE_ID = GET_NAYOSE.UKETUKE_ID ");
! //				sbNengapi.append("  ORDER BY KENSA_NENGAPI DESC");
! //			}else{
! //				sbNengapi.append("SELECT DISTINCT KENSA_NENGAPI,UKETUKE_ID FROM T_KENSAKEKA_TOKUTEI WHERE UKETUKE_ID = ");
! //				sbNengapi.append(JQueryConvert.queryConvert(data.get("UKETUKE_ID")));
! //				sbNengapi.append(" ORDER BY KENSA_NENGAPI DESC");
! //			}
! //		} catch (Exception ex){
! //			logger.warn(ex.getMessage());
! //			return false;
! //		}
! 
! 		// edit s.inoue 2010/04/13
! 		int cntNayose = 0;
! 
! 		try {
! 			StringBuilder sbCount = new StringBuilder();
! 			sbCount.append("SELECT COUNT(UKETUKE_ID) N_COUNT FROM T_NAYOSE ");
! 			sbCount.append(" WHERE UKETUKE_ID = ");
! 			sbCount.append(JQueryConvert.queryConvert(data.get("UKETUKE_ID")));
! 
! 			resultCount = JApplication.kikanDatabase.sendExecuteQuery(sbCount.toString());
! 
! 			Hashtable<String, String> Ncount = resultCount.get(0);
! 			cntNayose = Integer.parseInt(Ncount.get("N_COUNT").toString());
  
! 		}catch(Exception ex){
! 			logger.warn(ex.getMessage());
! 			return false;
! 		}
! 
! 		// edit s.inoue 2010/04/13
! 		if (cntNayose == 0){
! 			// edit s.inoue 2010/04/06
! 			// 結果通知表-選択した履歴より過去３回分
! 			try {
! 				StringBuilder sbHistoryKey = new StringBuilder();
! 
! 				// 1.受付IDから取得
! 				sbHistoryKey.append(" SELECT  TS.KENSA_NENGAPI, TS.UKETUKE_ID ");
! 				sbHistoryKey.append(" FROM T_KENSAKEKA_TOKUTEI TS");
! 				sbHistoryKey.append(" WHERE TS.UKETUKE_ID = ");
! 				sbHistoryKey.append(JQueryConvert.queryConvert(data.get("UKETUKE_ID")));
! 				sbHistoryKey.append("  ORDER BY KENSA_NENGAPI DESC");
  
! 				resultList = JApplication.kikanDatabase.sendExecuteQuery(sbHistoryKey.toString());
! 
! 			}catch (Exception ex){
! 				logger.warn(ex.getMessage());
! 				return false;
! 			}
! 		}else{
! 			// edit s.inoue 2010/04/06
! 			// 結果通知表-選択した履歴より過去３回分
! 			try {
! 				StringBuilder sbHistoryKey = new StringBuilder();
! 
! 				// 1.受付IDから紐付けIDを取得
! 				sbHistoryKey.append(" SELECT KENSA_NENGAPI,GET_NAYOSE.UKETUKE_ID FROM T_KENSAKEKA_TOKUTEI TS, ");
! 				sbHistoryKey.append(" (SELECT UKETUKE_ID FROM T_NAYOSE TN ");
! 				sbHistoryKey.append(" WHERE TN.NAYOSE_NO = ");
! 				sbHistoryKey.append(" (SELECT NAYOSE_NO FROM T_NAYOSE TN WHERE TN.UKETUKE_ID = ");
! 				sbHistoryKey.append(JQueryConvert.queryConvert(data.get("UKETUKE_ID")));
! 				sbHistoryKey.append("  )) GET_NAYOSE WHERE TS.UKETUKE_ID = GET_NAYOSE.UKETUKE_ID ");
! 				sbHistoryKey.append("  ORDER BY KENSA_NENGAPI DESC");
! 
! 				resultList = JApplication.kikanDatabase.sendExecuteQuery(sbHistoryKey.toString());
! 
! 			}catch (Exception ex){
! 				logger.warn(ex.getMessage());
! 				return false;
  			}
- 		}
- 
- 		// 2.取得したデータから指定レコードの健診実施日より
- 		// 過去３件のキーを割り出しWhere句を生成
- 		int resultSize = 0;
- 		StringBuilder sbWhere = new StringBuilder();
  
! 		String kenshinDate = data.get("KENSA_NENGAPI");
! 		try {
! 			for (int i = 0; i < resultList.size(); i++) {
! 				Hashtable<String, String> history_rec = resultList.get(i);
! 				if (Integer.parseInt(history_rec.get("KENSA_NENGAPI"))
! 						<= Integer.parseInt(kenshinDate)){
! 					resultSize++;
! 					if ( i == resultList.size() -1){
! 						sbWhere.append(JQueryConvert.queryConvert(history_rec.get("UKETUKE_ID")));
! 					}else{
! 						sbWhere.append(JQueryConvert.queryConvertAppendComma(history_rec.get("UKETUKE_ID")));
! 					}
! 				}
! 			}
! 		}catch (Exception ex){
! 			logger.warn(ex.getMessage());
  			return false;
  		}
  
! 		// 3.取得キーの受付IDを指定してデータを取得する
! 		try {
! 			StringBuilder sbHistoryData = new StringBuilder();
! 
! 			sbHistoryData.append("SELECT DISTINCT KENSA_NENGAPI,UKETUKE_ID FROM T_KENSAKEKA_TOKUTEI ");
! 			sbHistoryData.append(" WHERE UKETUKE_ID IN ( ");
! 			sbHistoryData.append(sbWhere.toString());
! 			sbHistoryData.append(" ) ");
! 			sbHistoryData.append(" ORDER BY KENSA_NENGAPI DESC");
! 			resultList = JApplication.kikanDatabase.sendExecuteQuery(sbHistoryData.toString());
! 
! 		} catch (Exception ex) {
! 			logger.error(ex.getMessage());
! 		}
! 
! // del s.inoue 2010/04/06
! //			if(resultSize == 0){
! //				sbNengapi.delete(0, sbNengapi.length());
! //				sbNengapi.append("SELECT DISTINCT KENSA_NENGAPI,UKETUKE_ID FROM T_KENSAKEKA_TOKUTEI WHERE UKETUKE_ID = ");
! //				sbNengapi.append(JQueryConvert.queryConvert(data.get("UKETUKE_ID")));
! //				sbNengapi.append(" ORDER BY KENSA_NENGAPI DESC");
! //				resultList = JApplication.kikanDatabase.sendExecuteQuery(sbNengapi.toString());
! //				resultSize = resultList.size();
! //			}
  
  		try{
! 
  			int j = 0;
! 			resultSize = resultList.size();
  
  			for (int i =0; i < resultSize; i++){
! 				resultItem = resultList.get(i);
  				/*
  				 * 健診年月日を保持
  				 * 引数で渡された健診年月日より古いやつだけを格納
  				 */
! 				this.uketukeID[j] = resultItem.get("UKETUKE_ID");
! 				this.KensaNengapi[j] = resultItem.get("KENSA_NENGAPI");
  				j++;
  				this.KensaNengapiNum = j;
  				if(j == 3){
  					break;
  				}
  			}
! 		} catch (Exception ex){
! 			logger.warn(ex.getMessage());
  		}
  
  		/*
--- 56,145 ----
  	 * @return	boolean
  	 */
  	public boolean setPrintKenshinKekkaSQL(Hashtable<String, String> data){
! 		ArrayList<Hashtable<String,String>> result = null;
! 		Hashtable<String,String> ResultItem = null;
  		Hashtable<String,String> tmp1 = new Hashtable<String,String>();
  		Hashtable<String, Hashtable<String,String>> tmp2 = new Hashtable<String, Hashtable<String,String>>();
  
+ 		StringBuilder sbNengapi = new StringBuilder();
+ 
  		/*
  		 * 健診年月日を取得
  		 * 今回、前回、前々回
  		 */
! 		try{
  // edit ver2 s.inoue 2009/06/03
  //			Query =
  //			"SELECT DISTINCT KENSA_NENGAPI FROM T_KENSAKEKA_SONOTA WHERE UKETUKE_ID = "
  //			+ JQueryConvert.queryConvert(data.get("UKETUKE_ID")) +
  //			" ORDER BY KENSA_NENGAPI DESC";
  
  			// 今年度かどうか
! 			String kensaNenGappi = data.get("KENSA_NENGAPI");
! 			boolean blnYear = FiscalYearUtil.getJugeThisYear(kensaNenGappi);
  
! 			// add ver2 s.inoue 2009/07/06
! 			// 1件データかどうか
  
! 			if (blnYear) {
! 				// 名寄せ対応SQL
! 				sbNengapi.append(" SELECT KENSA_NENGAPI,GET_NAYOSE.UKETUKE_ID FROM T_KENSAKEKA_TOKUTEI TS, ");
! 				sbNengapi.append(" (SELECT UKETUKE_ID FROM T_NAYOSE TN ");
! 				sbNengapi.append(" WHERE TN.NAYOSE_NO = ");
! 				sbNengapi.append(" (SELECT NAYOSE_NO FROM T_NAYOSE TN WHERE TN.UKETUKE_ID = ");
! 				sbNengapi.append(JQueryConvert.queryConvert(data.get("UKETUKE_ID")));
! 				sbNengapi.append("  )) GET_NAYOSE WHERE TS.UKETUKE_ID = GET_NAYOSE.UKETUKE_ID ");
! 				sbNengapi.append("  ORDER BY KENSA_NENGAPI DESC");
! 			}else{
! 				sbNengapi.append("SELECT DISTINCT KENSA_NENGAPI,UKETUKE_ID FROM T_KENSAKEKA_TOKUTEI WHERE UKETUKE_ID = ");
! 				sbNengapi.append(JQueryConvert.queryConvert(data.get("UKETUKE_ID")));
! 				sbNengapi.append(" ORDER BY KENSA_NENGAPI DESC");
  			}
  
! 		} catch (NullPointerException e){
! 			logger.warn(e.getMessage());
  			return false;
  		}
  
! 		int resultSize = 0;
  
  		try{
! 			result = JApplication.kikanDatabase.sendExecuteQuery(sbNengapi.toString());
  			int j = 0;
! 
! 			resultSize = result.size();
! 
! 			// add ver2 s.inoue 2009/07/06
! 			if(resultSize == 0){
! 				sbNengapi.delete(0, sbNengapi.length());
! 				sbNengapi.append("SELECT DISTINCT KENSA_NENGAPI,UKETUKE_ID FROM T_KENSAKEKA_TOKUTEI WHERE UKETUKE_ID = ");
! 				sbNengapi.append(JQueryConvert.queryConvert(data.get("UKETUKE_ID")));
! 				sbNengapi.append(" ORDER BY KENSA_NENGAPI DESC");
! 				result = JApplication.kikanDatabase.sendExecuteQuery(sbNengapi.toString());
! 				resultSize = result.size();
! 			}
  
  			for (int i =0; i < resultSize; i++){
! 				ResultItem = result.get(i);
  				/*
  				 * 健診年月日を保持
  				 * 引数で渡された健診年月日より古いやつだけを格納
  				 */
! 				Integer kensaNengapiInteger = Integer.valueOf(ResultItem.get("KENSA_NENGAPI"));
! 
! 				this.uketukeID[j] = ResultItem.get("UKETUKE_ID");
! 				this.KensaNengapi[j] = ResultItem.get("KENSA_NENGAPI");
  				j++;
  				this.KensaNengapiNum = j;
  				if(j == 3){
  					break;
  				}
+ 
+ 				//if (kensaNengapiInteger <= Integer.valueOf(data.get("KENSA_NENGAPI"))){
+ 				//}
  			}
! 		} catch (SQLException e){
! 			logger.warn(e.getMessage());
  		}
  
  		/*
***************
*** 277,283 ****
  			}
  
  			try{
! 				resultList = JApplication.kikanDatabase.sendExecuteQuery(sbKekka.toString());
  			}catch(SQLException e){
  				logger.warn(e.getMessage());
  			}
--- 184,190 ----
  			}
  
  			try{
! 				result = JApplication.kikanDatabase.sendExecuteQuery(sbKekka.toString());
  			}catch(SQLException e){
  				logger.warn(e.getMessage());
  			}
***************
*** 285,312 ****
  			/*
  			 * 項目コード, 結果値
  			 */
! 			resultSize = resultList.size();
  			for (int j =0; j < resultSize; j++){
! 				resultItem = resultList.get(j);
  				tmp1.clear();
! 				tmp1.put("KOUMOKU_CD", resultItem.get("KOUMOKU_CD"));
! 				tmp1.put("KOUMOKU_NAME", resultItem.get("KOUMOKU_NAME"));
  
  				// 実施区分 0:未実施,1:実施,2:測定不可能
! 				tmp1.put("KEKA_TI", resultItem.get("KEKA_TI"));
! 				tmp1.put("JISI_KBN", resultItem.get("JISI_KBN"));
! 				tmp1.put("KIJYUNTI_HANI", resultItem.get("KIJYUNTI_HANI"));
! 				tmp1.put("DATA_TYPE", resultItem.get("DATA_TYPE"));
! 				tmp1.put("TANI", resultItem.get("TANI"));
! 				tmp1.put("BIKOU", resultItem.get("BIKOU"));
  
  				// edit ver2 s.inoue 2009/09/17
  				int data_type = 0;
  
  				try{
! 					data_type = Integer.valueOf(resultItem.get("DATA_TYPE")).intValue();
  					if (data_type == 2){
! 						String code_name = this.getCodeName(resultItem.get("KOUMOKU_CD"), Integer.valueOf(resultItem.get("KEKA_TI")));
  						tmp1.put("CODE_NAME", code_name);
  					} else {
  						tmp1.put("CODE_NAME", "");
--- 192,219 ----
  			/*
  			 * 項目コード, 結果値
  			 */
! 			resultSize = result.size();
  			for (int j =0; j < resultSize; j++){
! 				ResultItem = result.get(j);
  				tmp1.clear();
! 				tmp1.put("KOUMOKU_CD", ResultItem.get("KOUMOKU_CD"));
! 				tmp1.put("KOUMOKU_NAME", ResultItem.get("KOUMOKU_NAME"));
  
  				// 実施区分 0:未実施,1:実施,2:測定不可能
! 				tmp1.put("KEKA_TI", ResultItem.get("KEKA_TI"));
! 				tmp1.put("JISI_KBN", ResultItem.get("JISI_KBN"));
! 				tmp1.put("KIJYUNTI_HANI", ResultItem.get("KIJYUNTI_HANI"));
! 				tmp1.put("DATA_TYPE", ResultItem.get("DATA_TYPE"));
! 				tmp1.put("TANI", ResultItem.get("TANI"));
! 				tmp1.put("BIKOU", ResultItem.get("BIKOU"));
  
  				// edit ver2 s.inoue 2009/09/17
  				int data_type = 0;
  
  				try{
! 					data_type = Integer.valueOf(ResultItem.get("DATA_TYPE")).intValue();
  					if (data_type == 2){
! 						String code_name = this.getCodeName(ResultItem.get("KOUMOKU_CD"), Integer.valueOf(ResultItem.get("KEKA_TI")));
  						tmp1.put("CODE_NAME", code_name);
  					} else {
  						tmp1.put("CODE_NAME", "");
***************
*** 317,323 ****
  				}
  
  				try{
! 					int H_L = Integer.valueOf(resultItem.get("H_L")).intValue();
  					if (H_L == 1){
  						tmp1.put("H_L", "L");
  					} else if (H_L == 2){
--- 224,230 ----
  				}
  
  				try{
! 					int H_L = Integer.valueOf(ResultItem.get("H_L")).intValue();
  					if (H_L == 1){
  						tmp1.put("H_L", "L");
  					} else if (H_L == 2){
***************
*** 331,337 ****
  				// edit ver2 s.inoue 2009/09/17
  				try{
  					if (data_type == 1){
! 						String koumokuFormat = resultItem.get("MAX_BYTE_LENGTH").toString();
  						tmp1.put("MAX_BYTE_LENGTH",koumokuFormat);
  					}else{
  						tmp1.put("MAX_BYTE_LENGTH", "");
--- 238,244 ----
  				// edit ver2 s.inoue 2009/09/17
  				try{
  					if (data_type == 1){
! 						String koumokuFormat = ResultItem.get("MAX_BYTE_LENGTH").toString();
  						tmp1.put("MAX_BYTE_LENGTH",koumokuFormat);
  					}else{
  						tmp1.put("MAX_BYTE_LENGTH", "");
***************
*** 341,347 ****
  				}
  
  				try{//男性上限値
! 					double DS_JYOUGEN = Double.valueOf(resultItem.get("DS_JYOUGEN")).doubleValue();
  					String ds_jyougen = Double.toString(DS_JYOUGEN);
  					tmp1.put("DS_JYOUGEN",ds_jyougen.toString());
  				} catch(NumberFormatException e) {
--- 248,254 ----
  				}
  
  				try{//男性上限値
! 					double DS_JYOUGEN = Double.valueOf(ResultItem.get("DS_JYOUGEN")).doubleValue();
  					String ds_jyougen = Double.toString(DS_JYOUGEN);
  					tmp1.put("DS_JYOUGEN",ds_jyougen.toString());
  				} catch(NumberFormatException e) {
***************
*** 349,355 ****
  				}
  
  				try{//男性下限値
! 					double DS_KAGEN = Double.valueOf(resultItem.get("DS_KAGEN")).doubleValue();
  					String ds_kagen = Double.toString(DS_KAGEN);
  					tmp1.put("DS_KAGEN", ds_kagen);
  				} catch(NumberFormatException e) {
--- 256,262 ----
  				}
  
  				try{//男性下限値
! 					double DS_KAGEN = Double.valueOf(ResultItem.get("DS_KAGEN")).doubleValue();
  					String ds_kagen = Double.toString(DS_KAGEN);
  					tmp1.put("DS_KAGEN", ds_kagen);
  				} catch(NumberFormatException e) {
***************
*** 357,363 ****
  				}
  
  				try{//女性上限値
! 					double JS_JYOUGEN = Double.valueOf(resultItem.get("JS_JYOUGEN")).doubleValue();
  					String js_jyougen = Double.toString(JS_JYOUGEN);
  					tmp1.put("JS_JYOUGEN", js_jyougen);
  				} catch(NumberFormatException e) {
--- 264,270 ----
  				}
  
  				try{//女性上限値
! 					double JS_JYOUGEN = Double.valueOf(ResultItem.get("JS_JYOUGEN")).doubleValue();
  					String js_jyougen = Double.toString(JS_JYOUGEN);
  					tmp1.put("JS_JYOUGEN", js_jyougen);
  				} catch(NumberFormatException e) {
***************
*** 365,371 ****
  				}
  
  				try{//女性下限値
! 					double JS_KAGEN = Double.valueOf(resultItem.get("JS_KAGEN")).doubleValue();
  					String js_kagen = Double.toString(JS_KAGEN);
  					tmp1.put("JS_KAGEN", js_kagen);
  				} catch(NumberFormatException e) {
--- 272,278 ----
  				}
  
  				try{//女性下限値
! 					double JS_KAGEN = Double.valueOf(ResultItem.get("JS_KAGEN")).doubleValue();
  					String js_kagen = Double.toString(JS_KAGEN);
  					tmp1.put("JS_KAGEN", js_kagen);
  				} catch(NumberFormatException e) {
***************
*** 375,381 ****
  				/*
  				 * tmp2に代入
  				 */
! 				tmp2.put(resultItem.get("KOUMOKU_CD"), (Hashtable<String, String>) tmp1.clone());
  			}
  
  			// i 0:今回,1:前回,2:前々回
--- 282,288 ----
  				/*
  				 * tmp2に代入
  				 */
! 				tmp2.put(ResultItem.get("KOUMOKU_CD"), (Hashtable<String, String>) tmp1.clone());
  			}
  
  			// i 0:今回,1:前回,2:前々回
***************
*** 398,412 ****
  
  			String query = sbTokutei.toString();
  			try{
! 				resultList = JApplication.kikanDatabase.sendExecuteQuery(query);
  			}catch(SQLException e){
  				logger.warn(e.getMessage());
  			}
  
  			// edit ver2 s.inoue 2009/07/16
  			if (i == 0 &&
! 				resultList != null && ! resultList.isEmpty()) {
! 				this.comment = resultList.get(0).get("KOMENTO");
  			}
  		}
  		try {
--- 305,319 ----
  
  			String query = sbTokutei.toString();
  			try{
! 				result = JApplication.kikanDatabase.sendExecuteQuery(query);
  			}catch(SQLException e){
  				logger.warn(e.getMessage());
  			}
  
  			// edit ver2 s.inoue 2009/07/16
  			if (i == 0 &&
! 				result != null && ! result.isEmpty()) {
! 				this.comment = result.get(0).get("KOMENTO");
  			}
  		}
  		try {
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/printdata/Kojin.java ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/printdata/Kojin.java
*** ./kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/printdata/Kojin.java	Tue Apr 20 18:30:36 2010
--- ../nittoku_src_127/kenshin-software/src/jp/or/med/orca/jma_tokutei/kenshin/healthexamination/printdata/Kojin.java	Mon Nov  2 17:48:50 2009
***************
*** 35,57 ****
  	 * 			Keys => JYUSHIN_SEIRI_NO, KANANAME, HKNJANUM, HIHOKENJYASYO_KIGOU, HIHOKENJYASYO_NO
  	 * @return	boolean
  	 */
! 	public boolean setPrintKojinData(Hashtable<String, String> data,int regMode) {
  		try {
  
  			//受診日
  			// edit s.inoue 2009/10/19
  			SimpleDateFormat sdf = new SimpleDateFormat("yyyy'年'MM'月'dd'日'");
  
! 			// edit s.inoue 2010/04/20
! 			if (regMode == 1){
! 			// if (data.get("UKETUKE_ID").equals("")){
  				String dates = data.get("KENSA_NENGAPI").substring(0, 4)+ "年"
  				+ data.get("KENSA_NENGAPI").substring(4,6)+ "月"
  				+ data.get("KENSA_NENGAPI").substring(6,8)+ "日";
  
  				this.kojinData.put("KENSA_NENGAPI", dates);
! 				// del s.inoue 2010/04/15
! 				// return true;
  			}else{
  				this.kojinData.put("KENSA_NENGAPI", sdf.format(data.get("KENSA_NENGAPI")));
  			}
--- 35,55 ----
  	 * 			Keys => JYUSHIN_SEIRI_NO, KANANAME, HKNJANUM, HIHOKENJYASYO_KIGOU, HIHOKENJYASYO_NO
  	 * @return	boolean
  	 */
! 	public boolean setPrintKojinData(Hashtable<String, String> data) {
! 
  		try {
  
  			//受診日
  			// edit s.inoue 2009/10/19
  			SimpleDateFormat sdf = new SimpleDateFormat("yyyy'年'MM'月'dd'日'");
  
! 			if (data.get("UKETUKE_ID").equals("")){
  				String dates = data.get("KENSA_NENGAPI").substring(0, 4)+ "年"
  				+ data.get("KENSA_NENGAPI").substring(4,6)+ "月"
  				+ data.get("KENSA_NENGAPI").substring(6,8)+ "日";
  
  				this.kojinData.put("KENSA_NENGAPI", dates);
! 				return true;
  			}else{
  				this.kojinData.put("KENSA_NENGAPI", sdf.format(data.get("KENSA_NENGAPI")));
  			}
***************
*** 110,144 ****
  //					year = Long.toString(age);
  //
  //					this.kojinData.put("AGE", year + "歳");
- 
  					/* --------------------------------------------------- */
  					/*
  					 * 年齢
  					 * DBにないので計算する
  					 */
! // edit s.inoue 2010/04/15
! //					Calendar calendar1 = Calendar.getInstance();
! //
! //					int birthdayYear = Integer.valueOf(yearString);
! //					int birthdayMonth = Integer.valueOf(monthString);
! //					int birthdayDay = Integer.valueOf(dayString);
! //
! //					int todayYear = calendar1.get(Calendar.YEAR);
! //					int todayMonth = calendar1.get(Calendar.MONTH) + 1;
! //					int todayDay = calendar1.get(Calendar.DATE);
! //
! //					int age = todayYear - birthdayYear;
! //
! //					if (todayMonth < birthdayMonth) {
! //						--age;
! //					}
! //					else if(todayMonth == birthdayMonth){
! //						if (todayDay < birthdayDay) {
! //							--age;
! //						}
! //					}
  
! 					this.kojinData.put("AGE", FiscalYearUtil.getFiscalYear(birthday) + "歳");
  					/* --------------------------------------------------- */
  				}
  			}
--- 108,140 ----
  //					year = Long.toString(age);
  //
  //					this.kojinData.put("AGE", year + "歳");
  					/* --------------------------------------------------- */
  					/*
  					 * 年齢
  					 * DBにないので計算する
  					 */
! 					Calendar calendar1 = Calendar.getInstance();
! 
! 					int birthdayYear = Integer.valueOf(yearString);
! 					int birthdayMonth = Integer.valueOf(monthString);
! 					int birthdayDay = Integer.valueOf(dayString);
! 
! 					int todayYear = calendar1.get(Calendar.YEAR);
! 					int todayMonth = calendar1.get(Calendar.MONTH) + 1;
! 					int todayDay = calendar1.get(Calendar.DATE);
! 
! 					int age = todayYear - birthdayYear;
! 
! 					if (todayMonth < birthdayMonth) {
! 						--age;
! 					}
! 					else if(todayMonth == birthdayMonth){
! 						if (todayDay < birthdayDay) {
! 							--age;
! 						}
! 					}
  
! 					this.kojinData.put("AGE", age + "歳");
  					/* --------------------------------------------------- */
  				}
  			}
***************
*** 341,378 ****
  		 */
  // edit s.inoue 20081113
  		// 共通化⇒getFiscalYear
  
! // edit s.inoue 2010/04/15
! //		Calendar calendar1 = Calendar.getInstance();
! //
! //		int birthdayYear = Integer.valueOf(yearString);
! //		int birthdayMonth = Integer.valueOf(monthString);
! //		int birthdayDay = Integer.valueOf(dayString);
! //
! //		int todayYear = calendar1.get(Calendar.YEAR);
! //		int todayMonth = calendar1.get(Calendar.MONTH) + 1;
! //		int todayDay = calendar1.get(Calendar.DATE);
! //
! //		int age = todayYear - birthdayYear;
! //
! //		if (todayMonth < birthdayMonth) {
! //			--age;
! //		}
! //		else if(todayMonth == birthdayMonth){
! //			if (todayDay < birthdayDay) {
! //				--age;
! //			}
! //		}
! 		// edit s.inoue 20081113　年度末年齢仕様の場合
! 		//int age =FiscalYearUtil.getFiscalYear(JCalendarConvert.JCtoAD(birthday));
  
! 		// edit s.inoue 2010/04/15
! 		// this.kojinData.put("AGE", age + "歳");
! 		String selectedItem
! 		= JValidate.validateSendSeinengapi(birthday);
  
! 		this.kojinData.put("AGE", FiscalYearUtil.getFiscalYear(selectedItem) + "歳");
  
  		/* --------------------------------------------------- */
  
  //		2008/3/25 藪 修正
--- 337,366 ----
  		 */
  // edit s.inoue 20081113
  		// 共通化⇒getFiscalYear
+ 		Calendar calendar1 = Calendar.getInstance();
  
! 		int birthdayYear = Integer.valueOf(yearString);
! 		int birthdayMonth = Integer.valueOf(monthString);
! 		int birthdayDay = Integer.valueOf(dayString);
! 
! 		int todayYear = calendar1.get(Calendar.YEAR);
! 		int todayMonth = calendar1.get(Calendar.MONTH) + 1;
! 		int todayDay = calendar1.get(Calendar.DATE);
  
! 		int age = todayYear - birthdayYear;
  
! 		if (todayMonth < birthdayMonth) {
! 			--age;
! 		}
! 		else if(todayMonth == birthdayMonth){
! 			if (todayDay < birthdayDay) {
! 				--age;
! 			}
! 		}
! 		// edit s.inoue 20081113　年度末年齢仕様の場合
! 		//int age =FiscalYearUtil.getFiscalYear(JCalendarConvert.JCtoAD(birthday));
  
+ 		this.kojinData.put("AGE", age + "歳");
  		/* --------------------------------------------------- */
  
  //		2008/3/25 藪 修正
Only in ../nittoku_src_127: readme_euc.txt
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./system-administrator-software/build.xml ../nittoku_src_127/system-administrator-software/build.xml
*** ./system-administrator-software/build.xml	Tue Aug 11 17:55:30 2009
--- ../nittoku_src_127/system-administrator-software/build.xml	Tue Apr 27 15:51:49 2010
***************
*** 3,11 ****
  	<!-- フォルダ類の定数 -->
  	<property name="class_directory" value="class"/>
  	<property name="javadoc_directory" value="javadoc"/>
! 	<property name="lib_directory" value="./../work-directory/Lib"/>
  <!--	<property name="lib_directory2" value="./../online-update/output"/>-->
! 	<property name="lib_directory3" value="./../work-directory/"/>
  	<property name="source_directory" value="src"/>
  	<property name="common_directory" value="./../common-component/src/"/>
  	<property name="output_directory" value="output"/>
--- 3,11 ----
  	<!-- フォルダ類の定数 -->
  	<property name="class_directory" value="class"/>
  	<property name="javadoc_directory" value="javadoc"/>
! 	<property name="lib_directory" value="./../resources/NITTOKU/Lib"/>
  <!--	<property name="lib_directory2" value="./../online-update/output"/>-->
! 	<property name="lib_directory3" value="./../resources/NITTOKU/"/>
  	<property name="source_directory" value="src"/>
  	<property name="common_directory" value="./../common-component/src/"/>
  	<property name="output_directory" value="output"/>
***************
*** 38,45 ****
  	<!-- コンパイル -->
  	<target name="compile">
  		<mkdir dir="${class_directory}"/>
! 		<javac srcdir="${common_directory}" classpathref="lib.classpath" destdir="${class_directory}"/>
! 		<javac srcdir="${source_directory}" classpathref="lib.classpath" destdir="${class_directory}"/>
  	</target>
  
  	<!-- JavaDoc -->
--- 38,45 ----
  	<!-- コンパイル -->
  	<target name="compile">
  		<mkdir dir="${class_directory}"/>
! 		<javac srcdir="${common_directory}" classpathref="lib.classpath" destdir="${class_directory}" encoding="ms932"/>
! 		<javac srcdir="${source_directory}" classpathref="lib.classpath" destdir="${class_directory}" encoding="ms932"/>
  	</target>
  
  	<!-- JavaDoc -->
***************
*** 51,54 ****
--- 51,75 ----
  			destdir="${javadoc_directory}"
  			/>
  	</target>
+ 
+ 	<!-- 署名 -->
+ 	<target name="sign-jar" depends="jar" if="do.sign">
+ 		<input message="Input the store password" addproperty="storepass"/>
+ 		<signjar alias="${alias}" storepass="${storepass}" keystore="${keystore}">
+ 		<fileset dir="${output_directory}">
+ 			<include name="*.jar"/>
+ 		</fileset>
+ 		</signjar>
+ 		<apply executable="jarsigner">
+ 			<arg value="-verify"/>
+ 			<arg value="-keystore"/>
+ 			<arg value="${keystore}"/>
+ 			<fileset dir="${output_directory}">
+ 				<include name="*.jar"/>
+ 			</fileset>
+ 		</apply>
+ 		<copy todir="${lib_directory3}">
+ 		  <fileset dir="${output_directory}" />
+ 		</copy>
+ 	</target>
  </project>
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JDBBackupFrame.java ../nittoku_src_127/system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JDBBackupFrame.java
*** ./system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JDBBackupFrame.java	Wed Apr 21 09:48:06 2010
--- ../nittoku_src_127/system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JDBBackupFrame.java	Tue Aug 11 17:55:30 2009
***************
*** 22,28 ****
  /**
   * データベースバックアップ
   */
! public class JDBBackupFrame extends JFrame implements ActionListener,KeyListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
--- 22,28 ----
  /**
   * データベースバックアップ
   */
! public class JDBBackupFrame extends JFrame implements ActionListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
***************
*** 131,137 ****
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
--- 131,137 ----
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
***************
*** 248,254 ****
  	private ExtendedButton getJButton_Reload() {
  		if (jButton_Reload == null) {
  			jButton_Reload = new ExtendedButton();
! 			jButton_Reload.setText("再表示(F7)");
  			jButton_Reload.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Reload.addActionListener(this);
  		}
--- 248,254 ----
  	private ExtendedButton getJButton_Reload() {
  		if (jButton_Reload == null) {
  			jButton_Reload = new ExtendedButton();
! 			jButton_Reload.setText("再表示");
  			jButton_Reload.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Reload.addActionListener(this);
  		}
***************
*** 263,270 ****
  	private ExtendedButton getJButton_Backup() {
  		if (jButton_Backup == null) {
  			jButton_Backup = new ExtendedButton();
! 			jButton_Backup.setText("バックアップ(F9)");
! 			jButton_Backup.setPreferredSize(new Dimension(130, 25));
  			jButton_Backup.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Backup.addActionListener(this);
  		}
--- 263,270 ----
  	private ExtendedButton getJButton_Backup() {
  		if (jButton_Backup == null) {
  			jButton_Backup = new ExtendedButton();
! 			jButton_Backup.setText("バックアップ");
! 			jButton_Backup.setPreferredSize(new Dimension(100, 25));
  			jButton_Backup.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Backup.addActionListener(this);
  		}
***************
*** 279,285 ****
  	private ExtendedButton getJButton_Restore() {
  		if (jButton_Restore == null) {
  			jButton_Restore = new ExtendedButton();
! 			jButton_Restore.setText("復元(F11)");
  			jButton_Restore.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Restore.addActionListener(this);
  		}
--- 279,285 ----
  	private ExtendedButton getJButton_Restore() {
  		if (jButton_Restore == null) {
  			jButton_Restore = new ExtendedButton();
! 			jButton_Restore.setText("復元");
  			jButton_Restore.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Restore.addActionListener(this);
  		}
***************
*** 294,300 ****
  	private ExtendedButton getJButton_Delete() {
  		if (jButton_Delete == null) {
  			jButton_Delete = new ExtendedButton();
! 			jButton_Delete.setText("削除(F12)");
  			jButton_Delete.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Delete.addActionListener(this);
  		}
--- 294,300 ----
  	private ExtendedButton getJButton_Delete() {
  		if (jButton_Delete == null) {
  			jButton_Delete = new ExtendedButton();
! 			jButton_Delete.setText("削除");
  			jButton_Delete.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Delete.addActionListener(this);
  		}
***************
*** 323,344 ****
  	public void actionPerformed( ActionEvent e )
  	{
  	}
- 
- 	@Override
- 	public void keyPressed(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyReleased(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyTyped(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
  }
--- 323,326 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JDBBackupFrameCtrl.java ../nittoku_src_127/system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JDBBackupFrameCtrl.java
*** ./system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JDBBackupFrameCtrl.java	Wed Apr 21 09:48:06 2010
--- ../nittoku_src_127/system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JDBBackupFrameCtrl.java	Tue Nov 17 10:45:36 2009
***************
*** 13,21 ****
  import java.util.TreeMap;
  import java.util.Vector;
  import java.awt.BorderLayout;
- import java.awt.Component;
  import java.awt.event.ActionEvent;
- import java.awt.event.KeyEvent;
  import java.io.File;
  
  import jp.or.med.orca.jma_tokutei.common.app.JApplication;
--- 13,19 ----
***************
*** 90,101 ****
  		this.focusTraversalPolicy.addComponent(this.jButton_Delete);
  		this.focusTraversalPolicy.addComponent(jButton_End);
  
- 		// add s.inoue 2009/12/03
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			Component comp = focusTraversalPolicy.getComponent(i);
- 			comp.addKeyListener(this);
- 		}
- 
  		// add ver2 s.inoue 2009/05/08
  		TableColumnModel columns = m_model.getColumnModel();
          for(int i=0;i<columns.getColumnCount();i++) {
--- 88,93 ----
***************
*** 529,580 ****
  
  		/* 終了ボタン */
  		if (source == jButton_End) {
- 			logger.info(jButton_End.getText());
  			pushedEndButton(e);
  		}
  		/* 再表示ボタン */
  		else if (source == jButton_Reload) {
- 			logger.info(jButton_Reload.getText());
  			pushedReloadButton(e);
  		}
  		/* バックアップボタン */
  		else if (source == jButton_Backup) {
- 			logger.info(jButton_Backup.getText());
  			pushedBackupButton(e);
  		}
  		/* 復元ボタン */
  		else if (source == jButton_Restore) {
- 			logger.info(jButton_Restore.getText());
  			pushedRestoreButton(e);
  		}
  		/* 削除ボタン */
  		else if (source == jButton_Delete) {
- 			logger.info(jButton_Delete.getText());
  			pushedDeleteButton(e);
  		}
  	}
- 
- 	// add s.inoue 2009/12/03
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 		switch(keyEvent.getKeyCode()){
- 		case KeyEvent.VK_F1:
- 			logger.info(jButton_End.getText());
- 			pushedEndButton(null);break;
- 		case KeyEvent.VK_F7:
- 			logger.info(jButton_Reload.getText());
- 			pushedReloadButton(null);break;
- 		case KeyEvent.VK_F9:
- 			logger.info(jButton_Backup.getText());
- 			pushedBackupButton(null);break;
- 		case KeyEvent.VK_F11:
- 			logger.info(jButton_Restore.getText());
- 			pushedRestoreButton(null);break;
- 		case KeyEvent.VK_F12:
- 			logger.info(jButton_Delete.getText());
- 			pushedDeleteButton(null);break;
- 		}
- 	}
  }
  
  //Source Code Version Tag System v1.00
--- 521,545 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JKikanMaintenanceFrame.java ../nittoku_src_127/system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JKikanMaintenanceFrame.java
*** ./system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JKikanMaintenanceFrame.java	Wed Apr 21 09:48:06 2010
--- ../nittoku_src_127/system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JKikanMaintenanceFrame.java	Tue Aug 11 17:55:30 2009
***************
*** 25,35 ****
  
  /**
   * 機関メンテナンス
!  *
   * Modified 2008/03/07 若月
!  * UI 改善のため、画面コンポーネントを独自クラスに置き換えた。
   */
! public class JKikanMaintenanceFrame extends JFrame implements ActionListener,KeyListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
--- 25,35 ----
  
  /**
   * 機関メンテナンス
!  * 
   * Modified 2008/03/07 若月
!  * UI 改善のため、画面コンポーネントを独自クラスに置き換えた。 
   */
! public class JKikanMaintenanceFrame extends JFrame implements ActionListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
***************
*** 47,53 ****
  	protected ExtendedButton jButton_Add = null;
  	protected JPanel jPanel_MainArea = null;
  	protected JPanel jPanel_Table = null;
! 
  	/**
  	 * This is the default constructor
  	 */
--- 47,53 ----
  	protected ExtendedButton jButton_Add = null;
  	protected JPanel jPanel_MainArea = null;
  	protected JPanel jPanel_Table = null;
! 	
  	/**
  	 * This is the default constructor
  	 */
***************
*** 58,84 ****
  
  	/**
  	 * This method initializes this
! 	 *
  	 * @return void
  	 */
  	private void initialize() {
  		this.setSize(ViewSettings.getFrameCommonSize());
  		this.setPreferredSize(ViewSettings.getFrameCommonSize());
  		this.setContentPane(getJPanel_Content());
! 
  		String title = ViewSettings.getTokuteFrameTitleWithKikanInfomation();
  		if (title == null || title.isEmpty()) {
  			title  = ViewSettings.getAdminCommonTitleWithVersion();
  		}
  		this.setTitle(title);
! 
  		this.setLocationRelativeTo( null );
  		this.setVisible(true);
  	}
  
  	/**
  	 * This method initializes jPanel_Content
! 	 *
  	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_Content() {
--- 58,84 ----
  
  	/**
  	 * This method initializes this
! 	 * 
  	 * @return void
  	 */
  	private void initialize() {
  		this.setSize(ViewSettings.getFrameCommonSize());
  		this.setPreferredSize(ViewSettings.getFrameCommonSize());
  		this.setContentPane(getJPanel_Content());
! 		
  		String title = ViewSettings.getTokuteFrameTitleWithKikanInfomation();
  		if (title == null || title.isEmpty()) {
  			title  = ViewSettings.getAdminCommonTitleWithVersion();
  		}
  		this.setTitle(title);
! 		
  		this.setLocationRelativeTo( null );
  		this.setVisible(true);
  	}
  
  	/**
  	 * This method initializes jPanel_Content
! 	 * 
  	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_Content() {
***************
*** 95,103 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_ButtonArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_ButtonArea() {
  		if (jPanel_ButtonArea == null) {
--- 95,103 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_ButtonArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_ButtonArea() {
  		if (jPanel_ButtonArea == null) {
***************
*** 129,137 ****
  	}
  
  	/**
! 	 * This method initializes jButton_End
! 	 *
! 	 * @return javax.swing.EventHandleButton
  	 */
  	private ExtendedButton getJButton_End() {
  		if (jButton_End == null) {
--- 129,137 ----
  	}
  
  	/**
! 	 * This method initializes jButton_End	
! 	 * 	
! 	 * @return javax.swing.EventHandleButton	
  	 */
  	private ExtendedButton getJButton_End() {
  		if (jButton_End == null) {
***************
*** 139,154 ****
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
  	}
  
  	/**
! 	 * This method initializes jPanel_NaviArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_NaviArea() {
  		if (jPanel_NaviArea == null) {
--- 139,154 ----
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
  	}
  
  	/**
! 	 * This method initializes jPanel_NaviArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_NaviArea() {
  		if (jPanel_NaviArea == null) {
***************
*** 174,182 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_TitleArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_TitleArea() {
  		if (jPanel_TitleArea == null) {
--- 174,182 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_TitleArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_TitleArea() {
  		if (jPanel_TitleArea == null) {
***************
*** 195,203 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea2
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_ExplArea2() {
  		if (jPanel_ExplArea2 == null) {
--- 195,203 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea2	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_ExplArea2() {
  		if (jPanel_ExplArea2 == null) {
***************
*** 216,224 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea1
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_ExplArea1() {
  		if (jPanel_ExplArea1 == null) {
--- 216,224 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea1	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_ExplArea1() {
  		if (jPanel_ExplArea1 == null) {
***************
*** 232,245 ****
  	}
  
  	/**
! 	 * This method initializes jButton_Delete
! 	 *
! 	 * @return javax.swing.EventHandleButton
  	 */
  	private ExtendedButton getJButton_Delete() {
  		if (jButton_Delete == null) {
  			jButton_Delete = new ExtendedButton();
! 			jButton_Delete.setText("削除(F12)");
  			jButton_Delete.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Delete.addActionListener(this);
  		}
--- 232,245 ----
  	}
  
  	/**
! 	 * This method initializes jButton_Delete	
! 	 * 	
! 	 * @return javax.swing.EventHandleButton	
  	 */
  	private ExtendedButton getJButton_Delete() {
  		if (jButton_Delete == null) {
  			jButton_Delete = new ExtendedButton();
! 			jButton_Delete.setText("削除");
  			jButton_Delete.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Delete.addActionListener(this);
  		}
***************
*** 247,260 ****
  	}
  
  	/**
! 	 * This method initializes jButton_Change
! 	 *
! 	 * @return javax.swing.EventHandleButton
  	 */
  	private ExtendedButton getJButton_Change() {
  		if (jButton_Change == null) {
  			jButton_Change = new ExtendedButton();
! 			jButton_Change.setText("変更(F11)");
  			jButton_Change.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Change.addActionListener(this);
  		}
--- 247,260 ----
  	}
  
  	/**
! 	 * This method initializes jButton_Change	
! 	 * 	
! 	 * @return javax.swing.EventHandleButton	
  	 */
  	private ExtendedButton getJButton_Change() {
  		if (jButton_Change == null) {
  			jButton_Change = new ExtendedButton();
! 			jButton_Change.setText("変更");
  			jButton_Change.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Change.addActionListener(this);
  		}
***************
*** 262,275 ****
  	}
  
  	/**
! 	 * This method initializes jButton_Add
! 	 *
! 	 * @return javax.swing.EventHandleButton
  	 */
  	private ExtendedButton getJButton_Add() {
  		if (jButton_Add == null) {
  			jButton_Add = new ExtendedButton();
! 			jButton_Add.setText("追加(F9)");
  			jButton_Add.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Add.addActionListener(this);
  		}
--- 262,275 ----
  	}
  
  	/**
! 	 * This method initializes jButton_Add	
! 	 * 	
! 	 * @return javax.swing.EventHandleButton	
  	 */
  	private ExtendedButton getJButton_Add() {
  		if (jButton_Add == null) {
  			jButton_Add = new ExtendedButton();
! 			jButton_Add.setText("追加");
  			jButton_Add.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Add.addActionListener(this);
  		}
***************
*** 277,285 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_MainArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_MainArea() {
  		if (jPanel_MainArea == null) {
--- 277,285 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_MainArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_MainArea() {
  		if (jPanel_MainArea == null) {
***************
*** 292,307 ****
  		}
  		return jPanel_MainArea;
  	}
! 
  //	/*
  //	 * FrameSize Control
  //	 */
  //	public void validate()
  //	{
  //		Rectangle rect = getBounds();
! //
  //		super.validate();
! //
  //		if( ViewSettings.getFrameCommonWidth() > rect.width  ||
  //			ViewSettings.getFrameCommonHeight() > rect.height )
  //		{
--- 292,307 ----
  		}
  		return jPanel_MainArea;
  	}
! 	
  //	/*
  //	 * FrameSize Control
  //	 */
  //	public void validate()
  //	{
  //		Rectangle rect = getBounds();
! //		
  //		super.validate();
! //		
  //		if( ViewSettings.getFrameCommonWidth() > rect.width  ||
  //			ViewSettings.getFrameCommonHeight() > rect.height )
  //		{
***************
*** 317,325 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_Table
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_Table() {
  		if (jPanel_Table == null) {
--- 317,325 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_Table	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_Table() {
  		if (jPanel_Table == null) {
***************
*** 329,350 ****
  		}
  		return jPanel_Table;
  	}
- 
- 	@Override
- 	public void keyPressed(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyReleased(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyTyped(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
  }
\ No newline at end of file
--- 329,332 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JKikanMaintenanceFrameCtrl.java ../nittoku_src_127/system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JKikanMaintenanceFrameCtrl.java
*** ./system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JKikanMaintenanceFrameCtrl.java	Thu May 27 10:36:26 2010
--- ../nittoku_src_127/system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JKikanMaintenanceFrameCtrl.java	Wed Feb 24 17:47:52 2010
***************
*** 1,9 ****
  package jp.or.med.orca.jma_tokutei.kenshin.admin.frame;
  
  //import java.awt.event.*;
- import java.awt.Component;
  import java.awt.event.ActionEvent;
- import java.awt.event.KeyEvent;
  import java.awt.event.WindowAdapter;
  import java.awt.event.WindowEvent;
  import java.sql.SQLException;
--- 1,7 ----
***************
*** 14,21 ****
  import javax.swing.table.DefaultTableColumnModel;
  import javax.swing.table.TableColumnModel;
  
- import org.apache.log4j.Logger;
- 
  import jp.or.med.orca.jma_tokutei.common.app.JApplication;
  import jp.or.med.orca.jma_tokutei.common.app.JPath;
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
--- 12,17 ----
***************
*** 41,47 ****
  	private JSimpleTable table = null;
  	/* フォーカス移動制御 */
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
- 	private static Logger logger = Logger.getLogger(JKikanMaintenanceFrameCtrl.class);
  
  	public JKikanMaintenanceFrameCtrl() {
  		this.table = new JSimpleTable();
--- 37,42 ----
***************
*** 86,97 ****
  		this.focusTraversalPolicy.addComponent(this.jButton_Delete);
  		this.focusTraversalPolicy.addComponent(jButton_End);
  
- 		// add s.inoue 2009/12/03
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			Component comp = focusTraversalPolicy.getComponent(i);
- 			comp.addKeyListener(this);
- 		}
- 
  		// 初期選択
  		if (this.table.getRowCount() > 0) {
  			this.table.setRowSelectionInterval(0, 0);
--- 81,86 ----
***************
*** 152,170 ****
  	 * 変更ボタン
  	 */
  	public void pushedChangeButton(ActionEvent e) {
! 
! // edit s.inoue 2010/05/26
! //		int Row = this.table.getSelectedRow();
! //		if (Row <= 0) {
! //			return;
! //		}
! 		int[] Row = this.table.getSelectedRows();
! 
! 		if (Row.length <= 0) {
  			return;
  		}
  
! 		String KikanNumber = (String) this.table.getData(Row[0], 0);
  		JScene.CreateDialog(this, new JChangeKikanInformationFrameCtrl(
  				JApplication.systemDatabase, KikanNumber), new RefreshEvent());
  	}
--- 141,152 ----
  	 * 変更ボタン
  	 */
  	public void pushedChangeButton(ActionEvent e) {
! 		int Row = this.table.getSelectedRow();
! 		if (Row < 0) {
  			return;
  		}
  
! 		String KikanNumber = (String) this.table.getData(Row, 0);
  		JScene.CreateDialog(this, new JChangeKikanInformationFrameCtrl(
  				JApplication.systemDatabase, KikanNumber), new RefreshEvent());
  	}
***************
*** 247,287 ****
  	public void actionPerformed(ActionEvent e) {
  		Object source = e.getSource();
  		if (source == jButton_End) {
- 			logger.info(jButton_End.getText());
  			pushedEndButton(e);
  		}
  		else if (source == jButton_Delete) {
- 			logger.info(jButton_Delete.getText());
  			pushedDeleteButton(e);
  		}
  		else if (source == jButton_Change) {
- 			logger.info(jButton_Change.getText());
  			pushedChangeButton(e);
  		}
  		else if (source == jButton_Add) {
- 			logger.info(jButton_Add.getText());
  			pushedAddButton(e);
  		}
  	}
  
- 	// add s.inoue 2009/12/03
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 		switch(keyEvent.getKeyCode()){
- 		case KeyEvent.VK_F1:
- 			logger.info(jButton_End.getText());
- 			pushedEndButton(null);break;
- 		case KeyEvent.VK_F9:
- 			logger.info(jButton_Add.getText());
- 			pushedAddButton(null);break;
- 		case KeyEvent.VK_F11:
- 			logger.info(jButton_Change.getText());
- 			pushedChangeButton(null);break;
- 		case KeyEvent.VK_F12:
- 			logger.info(jButton_Delete.getText());
- 			pushedDeleteButton(null);break;
- 		}
- 	}
  	/**
  	 * 機関情報追加時などに、追加画面が閉じたときに呼び出されるイベント
  	 */
--- 229,250 ----
  	public void actionPerformed(ActionEvent e) {
  		Object source = e.getSource();
  		if (source == jButton_End) {
  			pushedEndButton(e);
  		}
+ 
  		else if (source == jButton_Delete) {
  			pushedDeleteButton(e);
  		}
+ 
  		else if (source == jButton_Change) {
  			pushedChangeButton(e);
  		}
+ 
  		else if (source == jButton_Add) {
  			pushedAddButton(e);
  		}
  	}
  
  	/**
  	 * 機関情報追加時などに、追加画面が閉じたときに呼び出されるイベント
  	 */
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JLoginFrame.java ../nittoku_src_127/system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JLoginFrame.java
*** ./system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JLoginFrame.java	Mon May 24 16:56:18 2010
--- ../nittoku_src_127/system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JLoginFrame.java	Tue Aug 11 17:55:30 2009
***************
*** 12,19 ****
  import java.awt.Rectangle;
  import java.awt.event.ActionEvent;
  import java.awt.event.ActionListener;
- import java.awt.event.KeyEvent;
- import java.awt.event.KeyListener;
  
  
  import java.awt.GridBagLayout;
--- 12,17 ----
***************
*** 21,27 ****
  import java.awt.Dimension;
  
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedButton;
- import jp.or.med.orca.jma_tokutei.common.component.ExtendedLabel;
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedPasswordField;
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedTextField;
  import jp.or.med.orca.jma_tokutei.common.component.GuidanceLabel;
--- 19,24 ----
***************
*** 35,62 ****
  /**
   * ログインフレーム
   */
! public class JLoginFrame extends JFrame implements ActionListener,KeyListener {
  
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
  	protected JPanel jPanel_ButtonArea = null;
  	protected JPanel jPanel_NaviArea = null;
  	protected JPanel jPanel_TitleArea = null;
  	protected JPanel jPanel_ExplArea2 = null;
  	protected JPanel jPanel_ExplArea1 = null;
  	protected JPanel jPanel_MainArea = null;
- 	protected ExtendedLabel jLabal_SubExpl = null;
- 	protected ExtendedLabel jLabel_Title = null;
- 	protected ExtendedButton jButton_End = null;
- 	protected GuidanceLabel jLabel_MainExpl = null;
  	protected ExtendedButton jButton_Login = null;
  	protected JPanel jPanel = null;
! 	protected ExtendedLabel jLabel = null;
! 	protected ExtendedLabel jLabel1 = null;
  	protected ExtendedTextField jTextField_UserName = null;
  	protected ExtendedPasswordField jPasswordField_Password = null;
! 	// del y.okano 2010/05/24
! 	//protected ExtendedToggleButton jButton_Version = null;
  
  	/**
  	 * This is the default constructor
--- 32,58 ----
  /**
   * ログインフレーム
   */
! public class JLoginFrame extends JFrame implements ActionListener {
  
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
  	protected JPanel jPanel_ButtonArea = null;
+ 	protected ExtendedButton jButton_End = null;
  	protected JPanel jPanel_NaviArea = null;
+ 	protected JLabel jLabel_Title = null;
+ 	protected GuidanceLabel jLabel_MainExpl = null;
  	protected JPanel jPanel_TitleArea = null;
  	protected JPanel jPanel_ExplArea2 = null;
+ 	protected JLabel jLabal_SubExpl = null;
  	protected JPanel jPanel_ExplArea1 = null;
  	protected JPanel jPanel_MainArea = null;
  	protected ExtendedButton jButton_Login = null;
  	protected JPanel jPanel = null;
! 	protected JLabel jLabel = null;
! 	protected JLabel jLabel1 = null;
  	protected ExtendedTextField jTextField_UserName = null;
  	protected ExtendedPasswordField jPasswordField_Password = null;
! 	protected ExtendedToggleButton jButton_Version = null;
  
  	/**
  	 * This is the default constructor
***************
*** 68,78 ****
  
  	/**
  	 * This method initializes this
! 	 *
  	 * @return void
  	 */
  	private void initialize() {
! 
  		/* Modified 2008/03/09 若月  */
  		/* --------------------------------------------------- */
  //		this.setSize(600, 280);
--- 64,74 ----
  
  	/**
  	 * This method initializes this
! 	 * 
  	 * @return void
  	 */
  	private void initialize() {
! 		
  		/* Modified 2008/03/09 若月  */
  		/* --------------------------------------------------- */
  //		this.setSize(600, 280);
***************
*** 91,97 ****
  
  	/**
  	 * This method initializes jPanel_Content
! 	 *
  	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_Content() {
--- 87,93 ----
  
  	/**
  	 * This method initializes jPanel_Content
! 	 * 
  	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_Content() {
***************
*** 108,116 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_ButtonArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_ButtonArea() {
  		if (jPanel_ButtonArea == null) {
--- 104,112 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_ButtonArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_ButtonArea() {
  		if (jPanel_ButtonArea == null) {
***************
*** 131,146 ****
  			jPanel_ButtonArea.setLayout(new GridBagLayout());
  			jPanel_ButtonArea.add(getJButton_Login(), gridBagConstraints1);
  			jPanel_ButtonArea.add(getJButton_End(), gridBagConstraints2);
! 			// del y.okano 2010/05/24
! 			//jPanel_ButtonArea.add(getJButton_Version(), gridBagConstraints3);
  		}
  		return jPanel_ButtonArea;
  	}
  
  	/**
! 	 * This method initializes jButton_End
! 	 *
! 	 * @return javax.swing.EventHandleButton
  	 */
  	private ExtendedButton getJButton_End() {
  		if (jButton_End == null) {
--- 127,141 ----
  			jPanel_ButtonArea.setLayout(new GridBagLayout());
  			jPanel_ButtonArea.add(getJButton_Login(), gridBagConstraints1);
  			jPanel_ButtonArea.add(getJButton_End(), gridBagConstraints2);
! 			jPanel_ButtonArea.add(getJButton_Version(), gridBagConstraints3);
  		}
  		return jPanel_ButtonArea;
  	}
  
  	/**
! 	 * This method initializes jButton_End	
! 	 * 	
! 	 * @return javax.swing.EventHandleButton	
  	 */
  	private ExtendedButton getJButton_End() {
  		if (jButton_End == null) {
***************
*** 148,164 ****
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setPreferredSize(new Dimension(100, 25));
! 			jButton_End.setText("終了(F1)");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
  	}
  
  	/**
! 	 * This method initializes jPanel_NaviArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_NaviArea() {
  		if (jPanel_NaviArea == null) {
--- 143,159 ----
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setPreferredSize(new Dimension(75, 25));
! 			jButton_End.setText("終了");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
  	}
  
  	/**
! 	 * This method initializes jPanel_NaviArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_NaviArea() {
  		if (jPanel_NaviArea == null) {
***************
*** 176,182 ****
  //			jLabel_Title.setText("システムメンテナンスログイン");
  //			jLabel_Title.setFont(new Font("Dialog", Font.PLAIN, 18));
  //			jLabel_Title.setFont(ViewSettings.getCommonFrameTitlelabelFont());
! //
  //			jLabel_Title.setBackground(new Color(153, 204, 255));
  //			jLabel_Title.setForeground(new Color(51, 51, 51));
  //			jLabel_Title.setOpaque(true);
--- 171,177 ----
  //			jLabel_Title.setText("システムメンテナンスログイン");
  //			jLabel_Title.setFont(new Font("Dialog", Font.PLAIN, 18));
  //			jLabel_Title.setFont(ViewSettings.getCommonFrameTitlelabelFont());
! //			
  //			jLabel_Title.setBackground(new Color(153, 204, 255));
  //			jLabel_Title.setForeground(new Color(51, 51, 51));
  //			jLabel_Title.setOpaque(true);
***************
*** 187,205 ****
  			/* --------------------------------------------------- */
  			jLabel_MainExpl = new GuidanceLabel("admin.login.frame.guidance.main");
  			jLabel_Title = new TitleLabel("admin.login.frame.title");
! 
  			jPanel_NaviArea = new JPanel();
  			jPanel_NaviArea.setLayout(cardLayout2);
  			jPanel_NaviArea.add(getJPanel_TitleArea(), getJPanel_TitleArea().getName());
! 			/* --------------------------------------------------- */
  		}
  		return jPanel_NaviArea;
  	}
  
  	/**
! 	 * This method initializes jPanel_TitleArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_TitleArea() {
  		if (jPanel_TitleArea == null) {
--- 182,200 ----
  			/* --------------------------------------------------- */
  			jLabel_MainExpl = new GuidanceLabel("admin.login.frame.guidance.main");
  			jLabel_Title = new TitleLabel("admin.login.frame.title");
! 			
  			jPanel_NaviArea = new JPanel();
  			jPanel_NaviArea.setLayout(cardLayout2);
  			jPanel_NaviArea.add(getJPanel_TitleArea(), getJPanel_TitleArea().getName());
! 			/* --------------------------------------------------- */			
  		}
  		return jPanel_NaviArea;
  	}
  
  	/**
! 	 * This method initializes jPanel_TitleArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_TitleArea() {
  		if (jPanel_TitleArea == null) {
***************
*** 218,230 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea2
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_ExplArea2() {
  		if (jPanel_ExplArea2 == null) {
! 			jLabal_SubExpl = new ExtendedLabel();
  			jLabal_SubExpl.setText("終了ボタンを押すと、操作を終了することができます。");
  			jLabal_SubExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
  			GridLayout gridLayout1 = new GridLayout();
--- 213,225 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea2	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_ExplArea2() {
  		if (jPanel_ExplArea2 == null) {
! 			jLabal_SubExpl = new JLabel();
  			jLabal_SubExpl.setText("終了ボタンを押すと、操作を終了することができます。");
  			jLabal_SubExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
  			GridLayout gridLayout1 = new GridLayout();
***************
*** 239,247 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea1
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_ExplArea1() {
  		if (jPanel_ExplArea1 == null) {
--- 234,242 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea1	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_ExplArea1() {
  		if (jPanel_ExplArea1 == null) {
***************
*** 255,267 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_MainArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_MainArea() {
  		if (jPanel_MainArea == null) {
! 			jLabel1 = new ExtendedLabel();
  			jLabel1.setText("パスワード");
  			jLabel1.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jLabel1.setName("jLabel1");
--- 250,262 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_MainArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_MainArea() {
  		if (jPanel_MainArea == null) {
! 			jLabel1 = new JLabel();
  			jLabel1.setText("パスワード");
  			jLabel1.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jLabel1.setName("jLabel1");
***************
*** 276,290 ****
  	}
  
  	/**
! 	 * This method initializes jButton_Login
! 	 *
! 	 * @return javax.swing.EventHandleButton
  	 */
  	private ExtendedButton getJButton_Login() {
  		if (jButton_Login == null) {
  			jButton_Login = new ExtendedButton();
! 			jButton_Login.setText("ログイン(F12)");
! 			jButton_Login.setPreferredSize(new Dimension(120, 25));
  			jButton_Login.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Login.addActionListener(this);
  		}
--- 271,285 ----
  	}
  
  	/**
! 	 * This method initializes jButton_Login	
! 	 * 	
! 	 * @return javax.swing.EventHandleButton	
  	 */
  	private ExtendedButton getJButton_Login() {
  		if (jButton_Login == null) {
  			jButton_Login = new ExtendedButton();
! 			jButton_Login.setText("ログイン");
! 			jButton_Login.setPreferredSize(new Dimension(75, 25));
  			jButton_Login.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Login.addActionListener(this);
  		}
***************
*** 297,305 ****
  	public void validate()
  	{
  		Rectangle rect = getBounds();
! 
  		super.validate();
! 
  		if( ViewSettings.getAdminLoginFrameWidth() > rect.width  ||
  				ViewSettings.getAdminLoginFrameHeight() > rect.height )
  		{
--- 292,300 ----
  	public void validate()
  	{
  		Rectangle rect = getBounds();
! 		
  		super.validate();
! 		
  		if( ViewSettings.getAdminLoginFrameWidth() > rect.width  ||
  				ViewSettings.getAdminLoginFrameHeight() > rect.height )
  		{
***************
*** 309,323 ****
  					   ViewSettings.getAdminLoginFrameHeight() );
  		}
  	}
! 
  	public void actionPerformed(ActionEvent e)
  	{
  	}
  
  	/**
! 	 * This method initializes jPanel
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel() {
  		if (jPanel == null) {
--- 304,318 ----
  					   ViewSettings.getAdminLoginFrameHeight() );
  		}
  	}
! 	
  	public void actionPerformed(ActionEvent e)
  	{
  	}
  
  	/**
! 	 * This method initializes jPanel	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel() {
  		if (jPanel == null) {
***************
*** 341,347 ****
  			gridBagConstraints.gridx = 0;
  			gridBagConstraints.fill = GridBagConstraints.HORIZONTAL;
  			gridBagConstraints.gridy = 0;
! 			jLabel = new ExtendedLabel();
  			jLabel.setText("ユーザ名");
  			jLabel.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jLabel.setName("jLabel");
--- 336,342 ----
  			gridBagConstraints.gridx = 0;
  			gridBagConstraints.fill = GridBagConstraints.HORIZONTAL;
  			gridBagConstraints.gridy = 0;
! 			jLabel = new JLabel();
  			jLabel.setText("ユーザ名");
  			jLabel.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jLabel.setName("jLabel");
***************
*** 357,365 ****
  	}
  
  	/**
! 	 * This method initializes jTextField_UserName
! 	 *
! 	 * @return javax.swing.EventHandleTextField
  	 */
  	private ExtendedTextField getJTextField_UserName() {
  		if (jTextField_UserName == null) {
--- 352,360 ----
  	}
  
  	/**
! 	 * This method initializes jTextField_UserName	
! 	 * 	
! 	 * @return javax.swing.EventHandleTextField	
  	 */
  	private ExtendedTextField getJTextField_UserName() {
  		if (jTextField_UserName == null) {
***************
*** 370,378 ****
  	}
  
  	/**
! 	 * This method initializes jPasswordField_Password
! 	 *
! 	 * @return javax.swing.EventHandlePasswordField
  	 */
  	private ExtendedPasswordField getJPasswordField_Password() {
  		if (jPasswordField_Password == null) {
--- 365,373 ----
  	}
  
  	/**
! 	 * This method initializes jPasswordField_Password	
! 	 * 	
! 	 * @return javax.swing.EventHandlePasswordField	
  	 */
  	private ExtendedPasswordField getJPasswordField_Password() {
  		if (jPasswordField_Password == null) {
***************
*** 383,419 ****
  	}
  
  	/**
! 	 * This method initializes jButton_Version
! 	 *
! 	 * @return jp.or.med.orca.jma_tokutei.common.component.ExtendedToggleButton
! 	 */
! 	// del y.okano 2010/05/24
! 	//private ExtendedToggleButton getJButton_Version() {
! 	//	if (jButton_Version == null) {
! 	//		jButton_Version = new ExtendedToggleButton();
! 	//		jButton_Version.setText("バージョン(F9)");
! 	//		jButton_Version.setPreferredSize(new Dimension(120, 25));
! 	//		jButton_Version.setVisible(true);
! 	//		jButton_Version.addActionListener(this);
! 	//	}
! 	//	return jButton_Version;
! 	//}
! 
! 	@Override
! 	public void keyPressed(KeyEvent e) {
! 		// TODO 自動生成されたメソッド・スタブ
! 
! 	}
! 
! 	@Override
! 	public void keyReleased(KeyEvent e) {
! 		// TODO 自動生成されたメソッド・スタブ
! 
! 	}
! 
! 	@Override
! 	public void keyTyped(KeyEvent e) {
! 		// TODO 自動生成されたメソッド・スタブ
! 
  	}
  }
--- 378,394 ----
  	}
  
  	/**
! 	 * This method initializes jButton_Version	
! 	 * 	
! 	 * @return jp.or.med.orca.jma_tokutei.common.component.ExtendedToggleButton	
! 	 */
! 	private ExtendedToggleButton getJButton_Version() {
! 		if (jButton_Version == null) {
! 			jButton_Version = new ExtendedToggleButton();
! 			jButton_Version.setText("バージョン");
! 			jButton_Version.setVisible(true);
! 			jButton_Version.addActionListener(this);
! 		}
! 		return jButton_Version;
  	}
  }
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JLoginFrameCtrl.java ../nittoku_src_127/system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JLoginFrameCtrl.java
*** ./system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JLoginFrameCtrl.java	Mon May 24 16:59:30 2010
--- ../nittoku_src_127/system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JLoginFrameCtrl.java	Mon Nov  9 17:55:00 2009
***************
*** 1,10 ****
  package jp.or.med.orca.jma_tokutei.kenshin.admin.frame;
  
- import java.awt.Component;
  import java.awt.event.ActionEvent;
  import java.awt.event.ComponentAdapter;
  import java.awt.event.ComponentEvent;
- import java.awt.event.KeyEvent;
  import java.awt.event.WindowAdapter;
  import java.awt.event.WindowEvent;
  import java.sql.SQLException;
--- 1,8 ----
***************
*** 13,20 ****
  import javax.swing.event.DocumentEvent;
  import javax.swing.event.DocumentListener;
  
- import org.apache.log4j.Logger;
- 
  import jp.or.med.orca.jma_tokutei.common.app.JApplication;
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
  import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
--- 11,16 ----
***************
*** 32,43 ****
  
  	/* フォーカス移動制御 */
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
- 	private static Logger logger = Logger.getLogger(JLoginFrameCtrl.class);
  
  	public static void main(String[] args) {
  		new JLoginFrameCtrl();
  	}
  
  	public JLoginFrameCtrl() {
  		jButton_Login.setEnabled(false);
  
--- 28,40 ----
  
  	/* フォーカス移動制御 */
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
  
  	public static void main(String[] args) {
  		new JLoginFrameCtrl();
  	}
  
+ 	/* --------------------------------------------------- */
+ 
  	public JLoginFrameCtrl() {
  		jButton_Login.setEnabled(false);
  
***************
*** 55,79 ****
  		this.focusTraversalPolicy.addComponent(this.jTextField_UserName);
  		this.focusTraversalPolicy.addComponent(this.jPasswordField_Password);
  		this.focusTraversalPolicy.addComponent(this.jButton_Login);
! 		// del y.okano 2010/05/24
! 		//this.focusTraversalPolicy.addComponent(this.jButton_Version);
  		this.focusTraversalPolicy.addComponent(jButton_End);
! 		// jTextField_UserName.requestFocus();
  
! 		// add s.inoue 2009/12/04
! 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
! 			Component comp = focusTraversalPolicy.getComponent(i);
! 			comp.addKeyListener(this);
! 		}
! 		// del y.okano 2010/05/24
! 		//JAdminSoftware.getSplashFrame().addComponentListener(
! 		//		new ComponentAdapter() {
! 
! 		//			@Override
! 		//			public void componentHidden(ComponentEvent arg0) {
! 		//				JLoginFrameCtrl.this.jButton_Version.setSelected(false);
! 		//			}
! 		//		});
  
  		this.addWindowListener(new WindowAdapter() {
  
--- 52,69 ----
  		this.focusTraversalPolicy.addComponent(this.jTextField_UserName);
  		this.focusTraversalPolicy.addComponent(this.jPasswordField_Password);
  		this.focusTraversalPolicy.addComponent(this.jButton_Login);
! 		this.focusTraversalPolicy.addComponent(this.jButton_Version);
  		this.focusTraversalPolicy.addComponent(jButton_End);
! 		jTextField_UserName.requestFocus();
! 
! 		JAdminSoftware.getSplashFrame().addComponentListener(
! 				new ComponentAdapter() {
  
! 					@Override
! 					public void componentHidden(ComponentEvent arg0) {
! 						JLoginFrameCtrl.this.jButton_Version.setSelected(false);
! 					}
! 				});
  
  		this.addWindowListener(new WindowAdapter() {
  
***************
*** 82,87 ****
--- 72,78 ----
  				JAdminSoftware.getSplashFrame().hideSplashWindow();
  			}
  		});
+ 		/* --------------------------------------------------- */
  
  		StringBuffer buffer = new StringBuffer();
  		buffer.append(ViewSettings.getAdminFrameCommonTitle());
***************
*** 102,123 ****
  		System.exit(0);
  	}
  
  	/**
  	 * バージョンボタン
  	 */
! 	// del y.okano 2010/05/24
! 	//public void pushedVersionButton(ActionEvent e) {
! 	//	if (jButton_Version.isSelected()) {
! 	//		JAdminSoftware.getSplashFrame().showSplashWindow();
! 	//	} else {
! 	//		JAdminSoftware.getSplashFrame().hideSplashWindow();
! 	//	}
! 	//}
  
  	/**
  	 * ログインボタン
  	 */
  	public void pushedLoginButton() {
  
  		String username = jTextField_UserName.getText();
  		String password = new String(jPasswordField_Password.getPassword());
--- 93,163 ----
  		System.exit(0);
  	}
  
+ 	/* Added 2008/03/11 若月  */
+ 	/* --------------------------------------------------- */
  	/**
  	 * バージョンボタン
  	 */
! 	public void pushedVersionButton(ActionEvent e) {
! 		if (jButton_Version.isSelected()) {
! 			JAdminSoftware.getSplashFrame().showSplashWindow();
! 		} else {
! 			JAdminSoftware.getSplashFrame().hideSplashWindow();
! 		}
! 	}
  
+ 	/* --------------------------------------------------- */
  	/**
  	 * ログインボタン
  	 */
  	public void pushedLoginButton() {
+ 		/* Modified 2008/03/09 若月  */
+ 		/* --------------------------------------------------- */
+ 		//		// 入力文字列の長さのチェック
+ 		//		if(jTextField_UserName.getText().length() <= 0)
+ 		//		{
+ 		//			jp.or.med.orca.jma_tokutei.errormessage.JErrorMessage.show("M7100",this);
+ 		//			return;
+ 		//		}
+ 		//		if((new String(jPasswordField_Password.getPassword())).length() <= 0)
+ 		//		{
+ 		//			jp.or.med.orca.jma_tokutei.errormessage.JErrorMessage.show("M7101",this);
+ 		//			return;
+ 		//		}
+ 		//		// データベースから該当するユーザを取得
+ 		//		ArrayList<Hashtable<String, String>> Result;
+ 		//
+ 		//		try {
+ 		//			Result = JApplication.SystemDatabase.sendQuery(
+ 		//					"SELECT * FROM T_SYS_USER WHERE USER_NAME = " +
+ 		//					JQueryConvert.queryConvert(jTextField_UserName.getText()));
+ 		//		} catch (SQLException e1) {
+ 		//			e1.printStackTrace();
+ 		//			jp.or.med.orca.jma_tokutei.errormessage.JErrorMessage.show("M7102",this);
+ 		//			return;
+ 		//		}
+ 		//
+ 		//		if(Result.size() <= 0)
+ 		//		{
+ 		//			jp.or.med.orca.jma_tokutei.errormessage.JErrorMessage.show("M7102",this);
+ 		//			return;
+ 		//		}
+ 		/* --------------------------------------------------- */
+ 
+ //		/* Added 2008/05/15 若月  */
+ //		/* --------------------------------------------------- */
+ //		try {
+ //			/* 二重起動防止 */
+ //			JExecLocker.getLockWithPattern(
+ //					JExecLockerConfig.ADMIN_LOCK_FILENAME,
+ //					JExecLockerConfig.KIKAN_LOCK_FILENAME_PATTERN);
+ //		} catch (Exception e) {
+ //			JErrorMessage.show("M1002", null);
+ //			//
+ //			//			System.exit(-1);
+ //			return;
+ //		}
+ //		/* --------------------------------------------------- */
  
  		String username = jTextField_UserName.getText();
  		String password = new String(jPasswordField_Password.getPassword());
***************
*** 151,166 ****
  			JErrorMessage.show("M7102", this);
  			return;
  		}
  
  		Hashtable<String, String> ResultItem = result.get(0);
  		String Password = ResultItem.get("PASS");
  
  		if (!Password.equals(password)) {
! 			// edit h.yoshitama 2009/11/10
! 			JErrorMessage.show("M7102", this);
  			return;
  		}
  
  		try {
  			/* 二重起動防止 */
  			JExecLocker.getLockWithPattern(
--- 191,208 ----
  			JErrorMessage.show("M7102", this);
  			return;
  		}
+ 		/* --------------------------------------------------- */
  
  		Hashtable<String, String> ResultItem = result.get(0);
  		String Password = ResultItem.get("PASS");
  
  		if (!Password.equals(password)) {
! 			JErrorMessage.show("M7103", this);
  			return;
  		}
  
+ 		/* Added 2008/05/15 若月  */
+ 		/* --------------------------------------------------- */
  		try {
  			/* 二重起動防止 */
  			JExecLocker.getLockWithPattern(
***************
*** 168,175 ****
--- 210,220 ----
  					JExecLockerConfig.KIKAN_LOCK_FILENAME_PATTERN);
  		} catch (Exception e) {
  			JErrorMessage.show("M1002", null);
+ 			//
+ 			//			System.exit(-1);
  			return;
  		}
+ 		/* --------------------------------------------------- */
  
  		JApplication.userID = ResultItem.get("USER_NAME");
  		JApplication.password = ResultItem.get("PASS");
***************
*** 180,189 ****
  	public void actionPerformed(ActionEvent e) {
  		Object source = e.getSource();
  		if (source == jButton_End) {
- 			logger.info(jButton_End.getText());
  			pushedEndButton(e);
  		} else if (source == jButton_Login) {
- 			logger.info(jButton_Login.getText());
  			pushedLoginButton();
  		}
  
--- 225,232 ----
***************
*** 193,236 ****
  		} else if (source == jPasswordField_Password) {
  			// 登録ボタンが有効な時だけEnterキーでログインを行う
  
  			if (jButton_Login.isEnabled()) {
  				pushedLoginButton();
  			} else {
  				jButton_Login.transferFocus();
  			}
  		}
  
! 		// del y.okano 2010/05/24
! 		//else if (source == jButton_Version) {
! 		//	logger.info(jButton_Version.getText());
! 		//	pushedVersionButton(e);
! 		//}
! 	}
! 
! 	// add s.inoue 2009/12/04
! 	@Override
! 	public void keyPressed(KeyEvent keyEvent) {
! 		switch(keyEvent.getKeyCode()){
! 		case KeyEvent.VK_F1:
! 			logger.info(jButton_End.getText());
! 			pushedEndButton(null);break;
! 		case KeyEvent.VK_F12:
! 			if (jButton_Login.isEnabled()){
! 				logger.info(jButton_Login.getText());
! 				pushedLoginButton();
! 			}
! 			break;
! 		// del y.okano 2010/05/24
! 		//case KeyEvent.VK_F9:
! 			// edit s.inoue 2009/12/05
! 		//	logger.info(jButton_Version.getText());
! 		//	if (jButton_Version.isSelected()){
! 		//		jButton_Version.setSelected(false);
! 		//	}else{
! 		//		jButton_Version.setSelected(true);
! 		//	}
! 		//	pushedVersionButton(null);break;
  		}
  	}
  
  	/**
--- 236,262 ----
  		} else if (source == jPasswordField_Password) {
  			// 登録ボタンが有効な時だけEnterキーでログインを行う
  
+ 			/* Modified 2008/03/06 若月  */
+ 			/* --------------------------------------------------- */
+ 			//			if( jButton_Login.isEnabled() ){
+ 			//				pushedLoginButton();
+ 			//			}
+ 			/* --------------------------------------------------- */
  			if (jButton_Login.isEnabled()) {
  				pushedLoginButton();
  			} else {
  				jButton_Login.transferFocus();
  			}
+ 			/* --------------------------------------------------- */
  		}
+ 		/* --------------------------------------------------- */
  
! 		/* Added 2008/03/11 若月  */
! 		/* --------------------------------------------------- */
! 		else if (source == jButton_Version) {
! 			pushedVersionButton(e);
  		}
+ 		/* --------------------------------------------------- */
  	}
  
  	/**
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JMenuFrame.java ../nittoku_src_127/system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JMenuFrame.java
*** ./system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JMenuFrame.java	Wed Apr 21 09:48:06 2010
--- ../nittoku_src_127/system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JMenuFrame.java	Tue Aug 11 17:55:30 2009
***************
*** 6,21 ****
  import java.awt.Dimension;
  import java.awt.GridBagLayout;
  import java.awt.GridLayout;
  import javax.swing.SwingConstants;
  import javax.swing.JLabel;
  import java.awt.CardLayout;
  import java.awt.Font;
  import java.awt.Color;
  import java.awt.Rectangle;
  import java.awt.event.ActionEvent;
  import java.awt.event.ActionListener;
- import java.awt.event.KeyEvent;
- import java.awt.event.KeyListener;
  
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedButton;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
--- 6,22 ----
  import java.awt.Dimension;
  import java.awt.GridBagLayout;
  import java.awt.GridLayout;
+ import java.awt.FlowLayout;
  import javax.swing.SwingConstants;
  import javax.swing.JLabel;
+ 
+ 
  import java.awt.CardLayout;
  import java.awt.Font;
  import java.awt.Color;
  import java.awt.Rectangle;
  import java.awt.event.ActionEvent;
  import java.awt.event.ActionListener;
  
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedButton;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
***************
*** 26,34 ****
  
  /**
   * メニュー
   */
! public class JMenuFrame extends JFrame implements ActionListener,KeyListener{
! 
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
  	protected JPanel jPanel_ButtonArea = null;
--- 27,38 ----
  
  /**
   * メニュー
+  * 
+  * Modified 2008/03/08 若月
+  * 　UI 改善
   */
! public class JMenuFrame extends JFrame implements ActionListener{
! 	
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
  	protected JPanel jPanel_ButtonArea = null;
***************
*** 58,77 ****
  
  	/**
  	 * This method initializes this
! 	 *
  	 * @return void
  	 */
  	private void initialize() {
  		this.setContentPane(getJPanel_Content());
  		this.setTitle(ViewSettings.getTokuteFrameTitleWithKikanInfomation());
  		this.setSize(ViewSettings.getFrameCommonSize());
  		this.setLocationRelativeTo( null );
! 		this.setVisible(true);
  	}
  
  	/**
  	 * This method initializes jPanel_Content
! 	 *
  	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_Content() {
--- 62,90 ----
  
  	/**
  	 * This method initializes this
! 	 * 
  	 * @return void
  	 */
  	private void initialize() {
+ 		/* Modified 2008/03/11 若月  */
+ 		/* --------------------------------------------------- */
+ //		this.setSize(800, 600);
+ //		this.setContentPane(getJPanel_Content());
+ //		this.setTitle("特定健診システム");
+ //		setLocationRelativeTo( null );
+ //		this.setVisible(true);
+ 		/* --------------------------------------------------- */
  		this.setContentPane(getJPanel_Content());
  		this.setTitle(ViewSettings.getTokuteFrameTitleWithKikanInfomation());
  		this.setSize(ViewSettings.getFrameCommonSize());
  		this.setLocationRelativeTo( null );
! 		this.setVisible(true);		
! 		/* --------------------------------------------------- */
  	}
  
  	/**
  	 * This method initializes jPanel_Content
! 	 * 
  	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_Content() {
***************
*** 88,96 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_ButtonArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_ButtonArea() {
  		if (jPanel_ButtonArea == null) {
--- 101,109 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_ButtonArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_ButtonArea() {
  		if (jPanel_ButtonArea == null) {
***************
*** 117,125 ****
  	}
  
  	/**
! 	 * This method initializes jButton_End
! 	 *
! 	 * @return javax.swing.EventHandleButton
  	 */
  	private ExtendedButton getJButton_End() {
  		if (jButton_End == null) {
--- 130,138 ----
  	}
  
  	/**
! 	 * This method initializes jButton_End	
! 	 * 	
! 	 * @return javax.swing.EventHandleButton	
  	 */
  	private ExtendedButton getJButton_End() {
  		if (jButton_End == null) {
***************
*** 127,143 ****
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("終了(F1)");
  			jButton_End.addActionListener(this);
- 			jButton_End.addKeyListener(this);
  		}
  		return jButton_End;
  	}
  
  	/**
! 	 * This method initializes jPanel_NaviArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_NaviArea() {
  		if (jPanel_NaviArea == null) {
--- 140,155 ----
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("終了");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
  	}
  
  	/**
! 	 * This method initializes jPanel_NaviArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_NaviArea() {
  		if (jPanel_NaviArea == null) {
***************
*** 163,171 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_TitleArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_TitleArea() {
  		if (jPanel_TitleArea == null) {
--- 175,183 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_TitleArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_TitleArea() {
  		if (jPanel_TitleArea == null) {
***************
*** 184,192 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea2
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_ExplArea2() {
  		if (jPanel_ExplArea2 == null) {
--- 196,204 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea2	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_ExplArea2() {
  		if (jPanel_ExplArea2 == null) {
***************
*** 205,213 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea1
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_ExplArea1() {
  		if (jPanel_ExplArea1 == null) {
--- 217,225 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea1	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_ExplArea1() {
  		if (jPanel_ExplArea1 == null) {
***************
*** 221,229 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_MainArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_MainArea() {
  		if (jPanel_MainArea == null) {
--- 233,241 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_MainArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_MainArea() {
  		if (jPanel_MainArea == null) {
***************
*** 235,243 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_Center
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_Center() {
  		if (jPanel_Center == null) {
--- 247,255 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_Center	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_Center() {
  		if (jPanel_Center == null) {
***************
*** 265,332 ****
  	}
  
  	/**
! 	 * This method initializes jButton_KikanMaintenance
! 	 *
! 	 * @return javax.swing.EventHandleButton
  	 */
  	private ExtendedButton getJButton_KikanMaintenance() {
  		if (jButton_KikanMaintenance == null) {
  			jButton_KikanMaintenance = new ExtendedButton();
! 			jButton_KikanMaintenance.setText("１．健診機関情報メンテナンス(1)");
  			jButton_KikanMaintenance.setPreferredSize(new Dimension(500, 50));
  			jButton_KikanMaintenance.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_KikanMaintenance.addActionListener(this);
- 			jButton_KikanMaintenance.addKeyListener(this);
- 			jButton_KikanMaintenance.setMnemonic(KeyEvent.VK_1);
  		}
  		return jButton_KikanMaintenance;
  	}
  
  	/**
! 	 * This method initializes jButton_KanriUserMaintenance
! 	 *
! 	 * @return javax.swing.EventHandleButton
  	 */
  	private ExtendedButton getJButton_KanriUserMaintenance() {
  		if (jButton_KanriUserMaintenance == null) {
  			jButton_KanriUserMaintenance = new ExtendedButton();
! 			jButton_KanriUserMaintenance.setText("２．システム管理ユーザー情報メンテナンス(2)");
  			jButton_KanriUserMaintenance.setPreferredSize(new Dimension(500, 50));
  			jButton_KanriUserMaintenance.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_KanriUserMaintenance.addActionListener(this);
- 			jButton_KanriUserMaintenance.addKeyListener(this);
- 			jButton_KanriUserMaintenance.setMnemonic(KeyEvent.VK_2);
  		}
  		return jButton_KanriUserMaintenance;
  	}
  
  	/**
! 	 * This method initializes jButton_DBBackup
! 	 *
! 	 * @return javax.swing.EventHandleButton
  	 */
  	private ExtendedButton getJButton_DBBackup() {
  		if (jButton_DBBackup == null) {
  			jButton_DBBackup = new ExtendedButton();
! 			jButton_DBBackup.setText("３．システムDBバックアップ(3)");
  			jButton_DBBackup.setPreferredSize(new Dimension(500, 50));
  			jButton_DBBackup.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_DBBackup.addActionListener(this);
- 			jButton_DBBackup.addKeyListener(this);
- 			jButton_DBBackup.setMnemonic(KeyEvent.VK_3);
  		}
  		return jButton_DBBackup;
  	}
! 
  	/*
  	 * FrameSize Control
  	 */
  	public void validate()
  	{
  		Rectangle rect = getBounds();
! 
  		super.validate();
! 
  		if( ViewSettings.getFrameCommonWidth() > rect.width  ||
  			ViewSettings.getFrameCommonHeight() > rect.height )
  		{
--- 277,338 ----
  	}
  
  	/**
! 	 * This method initializes jButton_KikanMaintenance	
! 	 * 	
! 	 * @return javax.swing.EventHandleButton	
  	 */
  	private ExtendedButton getJButton_KikanMaintenance() {
  		if (jButton_KikanMaintenance == null) {
  			jButton_KikanMaintenance = new ExtendedButton();
! 			jButton_KikanMaintenance.setText("健診機関情報メンテナンス");
  			jButton_KikanMaintenance.setPreferredSize(new Dimension(500, 50));
  			jButton_KikanMaintenance.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_KikanMaintenance.addActionListener(this);
  		}
  		return jButton_KikanMaintenance;
  	}
  
  	/**
! 	 * This method initializes jButton_KanriUserMaintenance	
! 	 * 	
! 	 * @return javax.swing.EventHandleButton	
  	 */
  	private ExtendedButton getJButton_KanriUserMaintenance() {
  		if (jButton_KanriUserMaintenance == null) {
  			jButton_KanriUserMaintenance = new ExtendedButton();
! 			jButton_KanriUserMaintenance.setText("システム管理ユーザー情報メンテナンス");
  			jButton_KanriUserMaintenance.setPreferredSize(new Dimension(500, 50));
  			jButton_KanriUserMaintenance.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_KanriUserMaintenance.addActionListener(this);
  		}
  		return jButton_KanriUserMaintenance;
  	}
  
  	/**
! 	 * This method initializes jButton_DBBackup	
! 	 * 	
! 	 * @return javax.swing.EventHandleButton	
  	 */
  	private ExtendedButton getJButton_DBBackup() {
  		if (jButton_DBBackup == null) {
  			jButton_DBBackup = new ExtendedButton();
! 			jButton_DBBackup.setText("システムDBバックアップ");
  			jButton_DBBackup.setPreferredSize(new Dimension(500, 50));
  			jButton_DBBackup.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_DBBackup.addActionListener(this);
  		}
  		return jButton_DBBackup;
  	}
! 	
  	/*
  	 * FrameSize Control
  	 */
  	public void validate()
  	{
  		Rectangle rect = getBounds();
! 		
  		super.validate();
! 		
  		if( ViewSettings.getFrameCommonWidth() > rect.width  ||
  			ViewSettings.getFrameCommonHeight() > rect.height )
  		{
***************
*** 342,397 ****
  	}
  
  	/**
! 	 * This method initializes jButton_Version
! 	 *
! 	 * @return jp.or.med.orca.jma_tokutei.common.component.ExtendedToggleButton
  	 */
  	private ExtendedToggleButton getJButton_Version() {
  		if (jButton_Version == null) {
  			jButton_Version = new ExtendedToggleButton();
! 			jButton_Version.setText("バージョン(F9)");
  			jButton_Version.setVisible(true);
- 			jButton_Version.setPreferredSize(new Dimension(120, 25));
  			jButton_Version.addActionListener(this);
- 			jButton_Version.addKeyListener(this);
  		}
  		return jButton_Version;
  	}
  
  	/**
! 	 * This method initializes jButton_BackLogin
! 	 *
! 	 * @return jp.or.med.orca.jma_tokutei.common.component.ExtendedButton
  	 */
  	private ExtendedButton getJButton_BackLogin() {
  		if (jButton_BackLogin == null) {
  			jButton_BackLogin = new ExtendedButton();
  			jButton_BackLogin.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_BackLogin.setHorizontalAlignment(SwingConstants.CENTER);
! 			jButton_BackLogin.setText("ログイン画面に戻る(F2)");
! 			jButton_BackLogin.setPreferredSize(new Dimension(160, 25));
  			jButton_BackLogin.setActionCommand("\u7d42\u4e86");
  			jButton_BackLogin.addActionListener(this);
- 			jButton_BackLogin.addKeyListener(this);
  		}
  		return jButton_BackLogin;
  	}
- 
- 	@Override
- 	public void keyPressed(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyReleased(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyTyped(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
  }
--- 348,382 ----
  	}
  
  	/**
! 	 * This method initializes jButton_Version	
! 	 * 	
! 	 * @return jp.or.med.orca.jma_tokutei.common.component.ExtendedToggleButton	
  	 */
  	private ExtendedToggleButton getJButton_Version() {
  		if (jButton_Version == null) {
  			jButton_Version = new ExtendedToggleButton();
! 			jButton_Version.setText("バージョン");
  			jButton_Version.setVisible(true);
  			jButton_Version.addActionListener(this);
  		}
  		return jButton_Version;
  	}
  
  	/**
! 	 * This method initializes jButton_BackLogin	
! 	 * 	
! 	 * @return jp.or.med.orca.jma_tokutei.common.component.ExtendedButton	
  	 */
  	private ExtendedButton getJButton_BackLogin() {
  		if (jButton_BackLogin == null) {
  			jButton_BackLogin = new ExtendedButton();
  			jButton_BackLogin.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_BackLogin.setHorizontalAlignment(SwingConstants.CENTER);
! 			jButton_BackLogin.setText("ログイン画面に戻る");
! 			jButton_BackLogin.setPreferredSize(new Dimension(125, 25));
  			jButton_BackLogin.setActionCommand("\u7d42\u4e86");
  			jButton_BackLogin.addActionListener(this);
  		}
  		return jButton_BackLogin;
  	}
  }
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JMenuFrameCtrl.java ../nittoku_src_127/system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JMenuFrameCtrl.java
*** ./system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JMenuFrameCtrl.java	Thu May  6 11:20:46 2010
--- ../nittoku_src_127/system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JMenuFrameCtrl.java	Tue Oct 13 09:53:30 2009
***************
*** 1,17 ****
  package jp.or.med.orca.jma_tokutei.kenshin.admin.frame;
  
- import java.awt.Component;
  import java.awt.event.ActionEvent;
  import java.awt.event.ComponentAdapter;
  import java.awt.event.ComponentEvent;
- import java.awt.event.InputEvent;
- import java.awt.event.KeyEvent;
  import java.awt.event.WindowAdapter;
  import java.awt.event.WindowEvent;
  import java.io.File;
  
- import org.apache.log4j.Logger;
- 
  import jp.or.med.orca.jma_tokutei.common.app.JApplication;
  import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
  import jp.or.med.orca.jma_tokutei.common.execlocker.JExecLocker;
--- 1,12 ----
***************
*** 30,37 ****
  	/* フォーカス移動制御 */
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
  
- 	private static Logger logger = Logger.getLogger(JMenuFrameCtrl.class);
- 
  	public JMenuFrameCtrl()
  	{
  		this.setTitle(ViewSettings.getAdminCommonTitleWithVersion());
--- 25,30 ----
***************
*** 97,102 ****
--- 90,97 ----
  		JScene.CreateDialog(this, new JDBBackupFrameCtrl());
  	}
  
+ 	/* Added 2008/03/11 若月  */
+ 	/* --------------------------------------------------- */
  	/**
  	 * バージョンボタン
  	 */
***************
*** 110,217 ****
  		}
  	}
  
  	public void actionPerformed(ActionEvent e)
  	{
- 		// add s.inoue 2009/12/17
  		Object source = e.getSource();
  		if(source == jButton_End)
  		{
- 			logger.info(jButton_End.getText());
  			pushedEndButton( e );
  		}
  		else if(source == jButton_KikanMaintenance)
  		{
- 			logger.info(jButton_KikanMaintenance.getText());
  			pushedHukusuuButton( e );
  		}
  		else if(source == jButton_KanriUserMaintenance)
  		{
- 			logger.info(jButton_KanriUserMaintenance.getText());
  			pushedKanriButton( e );
  		}
  		else if(source == jButton_DBBackup)
  		{
- 			logger.info(jButton_DBBackup.getText());
  			pushedDBButton( e );
  		}
  		else if(source == jButton_Version)
  		{
- 			logger.info(jButton_Version.getText());
  			pushedVersionButton( e );
  		}
  		else if(source == jButton_BackLogin)
  		{
! 			logger.info(jButton_BackLogin.getText());
! 			backLogin();
! 		}
! 	}
  
! 	/* ログイン画面へ */
! 	private void backLogin(){
! 		JApplication.userID = null;
! 		JApplication.password = null;
! 
! 		/* ロックを解除する。 */
! 		File lockFile = JExecLocker.getLockFile();
! 		if (lockFile != null ) {
! 			lockFile.delete();
! 		}
! 
! 		JScene.ChangeScene(new JLoginFrameCtrl());
! 	}
! 
! 	// add s.inoue 2009/12/04
! 	@Override
! 	public void keyPressed(KeyEvent keyEvent) {
! 
! 		int mod = keyEvent.getModifiersEx();
! 
! 		switch(keyEvent.getKeyCode()){
! 		case KeyEvent.VK_F1:
! 			if ((mod & InputEvent.ALT_DOWN_MASK) != 0){
! 				logger.info(jButton_KikanMaintenance.getText());
! 				pushedHukusuuButton(null);
! 				break;
! 			}
! 			logger.info(jButton_End.getText());
! 			pushedEndButton(null);
! 			break;
! 		case KeyEvent.VK_F2:
! 			if ((mod & InputEvent.ALT_DOWN_MASK) != 0){
! 				logger.info(jButton_KikanMaintenance.getText());
! 				pushedKanriButton(null);
! 				break;
  			}
! 			logger.info(jButton_BackLogin.getText());
! 			backLogin();
! 			break;
! //		case KeyEvent.VK_F3:
! //			if ((mod & InputEvent.ALT_DOWN_MASK) != 0){
! //				logger.info(jButton_DBBackup.getText());
! //				pushedDBButton(null);
! //			}
! //			break;
! 
! 
! // edit s.inoue 2010/04/01
! //		case KeyEvent.VK_F3:
! //			pushedHukusuuButton(null);break;
! //		case KeyEvent.VK_F4:
! //			pushedKanriButton(null);break;
! //		case KeyEvent.VK_F5:
! //			pushedDBButton(null);break;
! //		case KeyEvent.VK_F2:
! //			backLogin();break;
! 		case KeyEvent.VK_F9:
! 			logger.info(jButton_Version.getText());
! 
! 			if (jButton_Version.isSelected()){
! 				jButton_Version.setSelected(false);
! 			}else{
! 				jButton_Version.setSelected(true);
! 			}
! 			pushedVersionButton(null);break;
  		}
  	}
  }
  
--- 105,183 ----
  		}
  	}
  
+ 	/* --------------------------------------------------- */
+ 
  	public void actionPerformed(ActionEvent e)
  	{
  		Object source = e.getSource();
+ 		/* Modified 2008/03/11 若月  */
+ 		/* --------------------------------------------------- */
+ //		if(e.getSource() == jButton_End)
+ //		{
+ //			pushedEndButton( e );
+ //		}
+ //
+ //		if(e.getSource() == jButton_KikanMaintenance)
+ //		{
+ //			pushedHukusuuButton( e );
+ //		}
+ //
+ //		if(e.getSource() == jButton_KanriUserMaintenance)
+ //		{
+ //			pushedKanriButton( e );
+ //		}
+ //
+ //		if(e.getSource() == jButton_DBBackup)
+ //		{
+ //			pushedDBButton( e );
+ //		}
+ 		/* --------------------------------------------------- */
  		if(source == jButton_End)
  		{
  			pushedEndButton( e );
  		}
+ 
  		else if(source == jButton_KikanMaintenance)
  		{
  			pushedHukusuuButton( e );
  		}
+ 
  		else if(source == jButton_KanriUserMaintenance)
  		{
  			pushedKanriButton( e );
  		}
+ 
  		else if(source == jButton_DBBackup)
  		{
  			pushedDBButton( e );
  		}
+ 		/* --------------------------------------------------- */
+ 
+ 
+ 		/* Added 2008/03/11 若月  */
+ 		/* --------------------------------------------------- */
  		else if(source == jButton_Version)
  		{
  			pushedVersionButton( e );
  		}
+ 		/* --------------------------------------------------- */
+ 
+ 		/* Added 2008/05/15 若月  */
+ 		/* --------------------------------------------------- */
  		else if(source == jButton_BackLogin)
  		{
! 			JApplication.userID = null;
! 			JApplication.password = null;
  
! 			/* ロックを解除する。 */
! 			File lockFile = JExecLocker.getLockFile();
! 			if (lockFile != null ) {
! 				lockFile.delete();
  			}
! 
! 			JScene.ChangeScene(new JLoginFrameCtrl());
  		}
+ 		/* --------------------------------------------------- */
  	}
  }
  
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JRegisterUserFrame.java ../nittoku_src_127/system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JRegisterUserFrame.java
*** ./system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JRegisterUserFrame.java	Wed Apr 21 09:48:06 2010
--- ../nittoku_src_127/system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JRegisterUserFrame.java	Tue Aug 11 17:55:30 2009
***************
*** 3,53 ****
  import java.awt.BorderLayout;
  import javax.swing.JPanel;
  import javax.swing.JFrame;
- import java.awt.Dimension;
- import java.awt.GridBagLayout;
  import java.awt.GridLayout;
  import javax.swing.SwingConstants;
  import java.awt.CardLayout;
- import java.awt.GridBagConstraints;
  import java.awt.Font;
  import java.awt.Color;
  import java.awt.Rectangle;
  import java.awt.event.*;
  
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedButton;
- import jp.or.med.orca.jma_tokutei.common.component.ExtendedComboBox;
- import jp.or.med.orca.jma_tokutei.common.component.ExtendedLabel;
- import jp.or.med.orca.jma_tokutei.common.component.ExtendedPasswordField;
- import jp.or.med.orca.jma_tokutei.common.component.ExtendedTextField;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  import javax.swing.BorderFactory;
  
! 
! public class JRegisterUserFrame extends JFrame implements ActionListener,KeyListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
  	protected JPanel jPanel_ButtonArea = null;
  	protected JPanel jPanel_NaviArea = null;
  	protected JPanel jPanel_TitleArea = null;
  	protected JPanel jPanel_ExplArea2 = null;
  	protected JPanel jPanel_ExplArea1 = null;
  	protected JPanel jPanel_MainArea = null;
- 	protected JPanel jPanel_DrawArea = null;
- //	protected JPanel jPanel = null;
- 	protected ExtendedLabel jLabel_Title = null;
- 	protected ExtendedLabel jLabel_MainExpl = null;
- 	protected ExtendedLabel jLabal_SubExpl = null;
- 
- 	protected ExtendedButton jButton_End = null;
- 	protected ExtendedTextField jTextField_UserName = null;
- 	protected ExtendedPasswordField jPasswordField_Password = null;
  	protected ExtendedButton jButton_Register = null;
! 	protected ExtendedComboBox jComboBox_Grant = null;
! 	protected ExtendedLabel jLabel = null;
! 	protected ExtendedLabel jLabel1 = null;
! 	protected ExtendedLabel jLabel2 = null;
! 
  	/**
  	 * This is the default constructor
  	 */
--- 3,50 ----
  import java.awt.BorderLayout;
  import javax.swing.JPanel;
  import javax.swing.JFrame;
  import java.awt.GridLayout;
+ import java.awt.FlowLayout;
  import javax.swing.SwingConstants;
+ import javax.swing.JLabel;
  import java.awt.CardLayout;
  import java.awt.Font;
  import java.awt.Color;
  import java.awt.Rectangle;
+ import javax.swing.JTextField;
+ import javax.swing.JPasswordField;
  import java.awt.event.*;
+ import java.awt.GridBagLayout;
+ import java.awt.GridBagConstraints;
  
  import jp.or.med.orca.jma_tokutei.common.component.ExtendedButton;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
+ import java.awt.Insets;
  import javax.swing.BorderFactory;
  
! /**
!  * ユーザ登録
!  */
! public class JRegisterUserFrame extends JFrame implements ActionListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
  	protected JPanel jPanel_ButtonArea = null;
+ 	protected ExtendedButton jButton_End = null;
  	protected JPanel jPanel_NaviArea = null;
+ 	protected JLabel jLabel_Title = null;
+ 	protected JLabel jLabel_MainExpl = null;
  	protected JPanel jPanel_TitleArea = null;
  	protected JPanel jPanel_ExplArea2 = null;
+ 	protected JLabel jLabal_SubExpl = null;
  	protected JPanel jPanel_ExplArea1 = null;
  	protected JPanel jPanel_MainArea = null;
  	protected ExtendedButton jButton_Register = null;
! 	protected JPanel jPanel = null;
! 	protected JLabel jLabel = null;
! 	protected JTextField jTextField_UserName = null;
! 	protected JLabel jLabel1 = null;
! 	protected JPasswordField jPasswordField_Password = null;
  	/**
  	 * This is the default constructor
  	 */
***************
*** 58,77 ****
  
  	/**
  	 * This method initializes this
! 	 *
  	 * @return void
  	 */
  	private void initialize() {
  		this.setContentPane(getJPanel_Content());
  		this.setTitle(ViewSettings.getAdminFrameCommonTitle());
  		this.setSize(ViewSettings.getAdminLoginFrameSize());
  		this.setLocationRelativeTo( null );
! 		this.setVisible(true);
  	}
  
  	/**
  	 * This method initializes jPanel_Content
! 	 *
  	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_Content() {
--- 55,83 ----
  
  	/**
  	 * This method initializes this
! 	 * 
  	 * @return void
  	 */
  	private void initialize() {
+ 		/* Modified 2008/05/06 若月  */
+ 		/* --------------------------------------------------- */
+ //		this.setSize(600, 280);
+ //		this.setContentPane(getJPanel_Content());
+ //		this.setTitle("特定健診システム");
+ //		setLocationRelativeTo( null );
+ //		this.setVisible(true);
+ 		/* --------------------------------------------------- */
  		this.setContentPane(getJPanel_Content());
  		this.setTitle(ViewSettings.getAdminFrameCommonTitle());
  		this.setSize(ViewSettings.getAdminLoginFrameSize());
  		this.setLocationRelativeTo( null );
! 		this.setVisible(true);	
! 		/* --------------------------------------------------- */
  	}
  
  	/**
  	 * This method initializes jPanel_Content
! 	 * 
  	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_Content() {
***************
*** 88,120 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_ButtonArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_ButtonArea() {
  		if (jPanel_ButtonArea == null) {
! 			GridBagConstraints gridBagConstraints6 = new GridBagConstraints();
! 			gridBagConstraints6.gridy = 0;
! 			gridBagConstraints6.gridx = 0;
! 			GridBagConstraints gridBagConstraints5 = new GridBagConstraints();
! 			gridBagConstraints5.gridy = 0;
! 			gridBagConstraints5.weightx = 1.0D;
! 			gridBagConstraints5.anchor = GridBagConstraints.EAST;
! 			gridBagConstraints5.gridx = 1;
  			jPanel_ButtonArea = new JPanel();
  			jPanel_ButtonArea.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
  			jPanel_ButtonArea.setLayout(new GridBagLayout());
! 			jPanel_ButtonArea.add(getJButton_Register(), gridBagConstraints5);
! 			jPanel_ButtonArea.add(getJButton_End(), gridBagConstraints6);
  		}
  		return jPanel_ButtonArea;
  	}
  
  	/**
! 	 * This method initializes jButton_End
! 	 *
! 	 * @return javax.swing.ExtendedButton
  	 */
  	private ExtendedButton getJButton_End() {
  		if (jButton_End == null) {
--- 94,126 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_ButtonArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_ButtonArea() {
  		if (jPanel_ButtonArea == null) {
! 			GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
! 			gridBagConstraints2.gridy = 0;
! 			gridBagConstraints2.gridx = 0;
! 			GridBagConstraints gridBagConstraints1 = new GridBagConstraints();
! 			gridBagConstraints1.gridy = 0;
! 			gridBagConstraints1.weightx = 1.0D;
! 			gridBagConstraints1.anchor = GridBagConstraints.EAST;
! 			gridBagConstraints1.gridx = 1;
  			jPanel_ButtonArea = new JPanel();
  			jPanel_ButtonArea.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
  			jPanel_ButtonArea.setLayout(new GridBagLayout());
! 			jPanel_ButtonArea.add(getJButton_Register(), gridBagConstraints1);
! 			jPanel_ButtonArea.add(getJButton_End(), gridBagConstraints2);
  		}
  		return jPanel_ButtonArea;
  	}
  
  	/**
! 	 * This method initializes jButton_End	
! 	 * 	
! 	 * @return javax.swing.ExtendedButton	
  	 */
  	private ExtendedButton getJButton_End() {
  		if (jButton_End == null) {
***************
*** 122,149 ****
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
  	}
  
  	/**
! 	 * This method initializes jPanel_NaviArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_NaviArea() {
  		if (jPanel_NaviArea == null) {
  			CardLayout cardLayout2 = new CardLayout();
  			cardLayout2.setHgap(10);
  			cardLayout2.setVgap(10);
! 			jLabel_MainExpl = new ExtendedLabel();
! 			jLabel_MainExpl.setText("システム管理ユーザ情報を登録します。");
  			jLabel_MainExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
  			jLabel_MainExpl.setName("jLabel1");
! 			jLabel_Title = new ExtendedLabel();
! 			jLabel_Title.setText("システム管理ユーザ登録");
  			jLabel_Title.setFont(new Font("Dialog", Font.PLAIN, 18));
  			jLabel_Title.setBackground(new Color(153, 204, 255));
  			jLabel_Title.setForeground(new Color(51, 51, 51));
--- 128,155 ----
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
  	}
  
  	/**
! 	 * This method initializes jPanel_NaviArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_NaviArea() {
  		if (jPanel_NaviArea == null) {
  			CardLayout cardLayout2 = new CardLayout();
  			cardLayout2.setHgap(10);
  			cardLayout2.setVgap(10);
! 			jLabel_MainExpl = new JLabel();
! 			jLabel_MainExpl.setText("システムユーザ情報を登録します。");
  			jLabel_MainExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
  			jLabel_MainExpl.setName("jLabel1");
! 			jLabel_Title = new JLabel();
! 			jLabel_Title.setText("システム管理ユーザ情報登録");
  			jLabel_Title.setFont(new Font("Dialog", Font.PLAIN, 18));
  			jLabel_Title.setBackground(new Color(153, 204, 255));
  			jLabel_Title.setForeground(new Color(51, 51, 51));
***************
*** 157,165 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_TitleArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_TitleArea() {
  		if (jPanel_TitleArea == null) {
--- 163,171 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_TitleArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_TitleArea() {
  		if (jPanel_TitleArea == null) {
***************
*** 178,190 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea2
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_ExplArea2() {
  		if (jPanel_ExplArea2 == null) {
! 			jLabal_SubExpl = new ExtendedLabel();
  			jLabal_SubExpl.setText("");
  			jLabal_SubExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
  			GridLayout gridLayout1 = new GridLayout();
--- 184,196 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea2	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_ExplArea2() {
  		if (jPanel_ExplArea2 == null) {
! 			jLabal_SubExpl = new JLabel();
  			jLabal_SubExpl.setText("");
  			jLabal_SubExpl.setFont(new Font("Dialog", Font.PLAIN, 14));
  			GridLayout gridLayout1 = new GridLayout();
***************
*** 199,207 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea1
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_ExplArea1() {
  		if (jPanel_ExplArea1 == null) {
--- 205,213 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea1	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_ExplArea1() {
  		if (jPanel_ExplArea1 == null) {
***************
*** 215,223 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_MainArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_MainArea() {
  		if (jPanel_MainArea == null) {
--- 221,229 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_MainArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_MainArea() {
  		if (jPanel_MainArea == null) {
***************
*** 226,376 ****
  			cardLayout.setVgap(10);
  			jPanel_MainArea = new JPanel();
  			jPanel_MainArea.setLayout(cardLayout);
! 			jPanel_MainArea.add(getJPanel_DrawArea(), getJPanel_DrawArea().getName());
  		}
  		return jPanel_MainArea;
  	}
  
- 
  	/**
! 	 * This method initializes jPanel
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
! 	private JPanel getJPanel_DrawArea() {
! 		if (jPanel_DrawArea == null) {
  
! 			/* フィールド設定 */
! 			GridBagConstraints gridBagConstraints11 = new GridBagConstraints();
! 			gridBagConstraints11.fill = GridBagConstraints.HORIZONTAL;
! 			gridBagConstraints11.gridx = 1;
! 			gridBagConstraints11.gridy = 0;
! 			gridBagConstraints11.weightx = 1.0;
  
  			GridBagConstraints gridBagConstraints14 = new GridBagConstraints();
  			gridBagConstraints14.fill = GridBagConstraints.HORIZONTAL;
  			gridBagConstraints14.gridx = 1;
  			gridBagConstraints14.gridy = 1;
  			gridBagConstraints14.weightx = 1.0;
- 
- 			/* ラベル設定 */
- 			GridBagConstraints gridBagConstraints = new GridBagConstraints();
- 			gridBagConstraints.anchor = GridBagConstraints.WEST;
- 			gridBagConstraints.gridx = 0;
- 			gridBagConstraints.gridy = 0;
- 
  			GridBagConstraints gridBagConstraints12 = new GridBagConstraints();
- 			gridBagConstraints12.anchor = GridBagConstraints.WEST;
  			gridBagConstraints12.gridx = 0;
  			gridBagConstraints12.gridy = 1;
! 
! 			GridBagConstraints gridBagConstraints13 = new GridBagConstraints();
! 			gridBagConstraints13.anchor = GridBagConstraints.WEST;
! 			gridBagConstraints13.gridx = 0;
! 			gridBagConstraints13.gridy = 2;
! 
! 			jLabel = new ExtendedLabel();
! 			jLabel.setText("ユーザ名");
! 			jLabel.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jLabel1 = new ExtendedLabel();
  			jLabel1.setText("パスワード");
  			jLabel1.setFont(new Font("Dialog", Font.PLAIN, 12));
! 
! 			jPanel_DrawArea = new JPanel();
! 			jPanel_DrawArea.setLayout(new GridBagLayout());
! 			jPanel_DrawArea.setName("jPanel_DrawArea");
! 			jPanel_DrawArea.add(jLabel, gridBagConstraints);
! 			jPanel_DrawArea.add(jLabel1, gridBagConstraints12);
! 
! 			jPanel_DrawArea.add(getJTextField_UserName(), gridBagConstraints11);
! 			jPanel_DrawArea.add(getJPasswordField_Password(), gridBagConstraints14);
  		}
! 		return jPanel_DrawArea;
  	}
  
  	/**
! 	 * This method initializes jTextField_UserName
! 	 *
! 	 * @return javax.swing.ExtendedTextField
  	 */
! 	private ExtendedTextField getJTextField_UserName() {
  		if (jTextField_UserName == null) {
! 			jTextField_UserName = new ExtendedTextField();
  			jTextField_UserName.addActionListener(this);
  		}
  		return jTextField_UserName;
  	}
  
  	/**
! 	 * This method initializes jPasswordField_Password
! 	 *
! 	 * @return javax.swing.ExtendedPasswordField
  	 */
! 	private ExtendedPasswordField getJPasswordField_Password() {
  		if (jPasswordField_Password == null) {
! 			jPasswordField_Password = new ExtendedPasswordField();
  			jPasswordField_Password.addActionListener(this);
  		}
  		return jPasswordField_Password;
  	}
- 
- 	/**
- 	 * This method initializes jButton_Register
- 	 *
- 	 * @return javax.swing.ExtendedButton
- 	 */
- 	private ExtendedButton getJButton_Register() {
- 		if (jButton_Register == null) {
- 			jButton_Register = new ExtendedButton();
- 			jButton_Register.setText("登録(F12)");
- 			jButton_Register.setFont(new Font("Dialog", Font.PLAIN, 12));
- 			jButton_Register.addActionListener(this);
- 		}
- 		return jButton_Register;
- 	}
- 
- 	public void actionPerformed( ActionEvent e )
- 	{
- 	}
- 
- 	/*
- 	 * FrameSize Control
- 	 */
- 	public void validate()
- 	{
- 		Rectangle rect = getBounds();
- 
- 		super.validate();
- 
- 		int width = ViewSettings.getTokuteiLoginFrameWidth();
- 		int height = ViewSettings.getTokuteiLoginFrameHeight();
- 
- 		if( width > rect.width  ||
- 				height > rect.height )
- 		{
- 			setBounds( rect.x,
- 					   rect.y,
- 					   width,
- 					   height );
- 		}
- 	}
- 
- 	@Override
- 	public void keyPressed(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyReleased(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyTyped(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
  }
- 
--- 232,345 ----
  			cardLayout.setVgap(10);
  			jPanel_MainArea = new JPanel();
  			jPanel_MainArea.setLayout(cardLayout);
! 			jPanel_MainArea.add(getJPanel(), getJPanel().getName());
  		}
  		return jPanel_MainArea;
  	}
  
  	/**
! 	 * This method initializes jButton_Register	
! 	 * 	
! 	 * @return javax.swing.ExtendedButton	
! 	 */
! 	private ExtendedButton getJButton_Register() {
! 		if (jButton_Register == null) {
! 			jButton_Register = new ExtendedButton();
! 			jButton_Register.setText("登録");
! 			jButton_Register.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_Register.addActionListener(this);
! 		}
! 		return jButton_Register;
! 	}
! 	
! 	/*
! 	 * FrameSize Control
  	 */
! 	public void validate()
! 	{
! 		Rectangle rect = getBounds();
! 		
! 		super.validate();
! 		
! 		if( ViewSettings.getAdminLoginFrameWidth() > rect.width  ||
! 				ViewSettings.getAdminLoginFrameHeight() > rect.height )
! 		{
! 			setBounds( rect.x,
! 					   rect.y,
! 					   ViewSettings.getAdminLoginFrameWidth(),
! 					   ViewSettings.getAdminLoginFrameHeight() );
! 		}
! 	}
  
! 	public void actionPerformed( ActionEvent e )
! 	{
! 	}
  
+ 	/**
+ 	 * This method initializes jPanel	
+ 	 * 	
+ 	 * @return javax.swing.JPanel	
+ 	 */
+ 	private JPanel getJPanel() {
+ 		if (jPanel == null) {
  			GridBagConstraints gridBagConstraints14 = new GridBagConstraints();
  			gridBagConstraints14.fill = GridBagConstraints.HORIZONTAL;
  			gridBagConstraints14.gridx = 1;
  			gridBagConstraints14.gridy = 1;
  			gridBagConstraints14.weightx = 1.0;
  			GridBagConstraints gridBagConstraints12 = new GridBagConstraints();
  			gridBagConstraints12.gridx = 0;
+ 			gridBagConstraints12.anchor = GridBagConstraints.WEST;
  			gridBagConstraints12.gridy = 1;
! 			jLabel1 = new JLabel();
  			jLabel1.setText("パスワード");
  			jLabel1.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			GridBagConstraints gridBagConstraints11 = new GridBagConstraints();
! 			gridBagConstraints11.fill = GridBagConstraints.HORIZONTAL;
! 			gridBagConstraints11.gridx = 1;
! 			gridBagConstraints11.gridy = 0;
! 			gridBagConstraints11.weightx = 1.0;
! 			GridBagConstraints gridBagConstraints = new GridBagConstraints();
! 			gridBagConstraints.gridx = 0;
! 			gridBagConstraints.anchor = GridBagConstraints.WEST;
! 			gridBagConstraints.gridy = 0;
! 			jLabel = new JLabel();
! 			jLabel.setText("ユーザ名");
! 			jLabel.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jPanel = new JPanel();
! 			jPanel.setLayout(new GridBagLayout());
! 			jPanel.setName("jPanel");
! 			jPanel.add(jLabel, gridBagConstraints);
! 			jPanel.add(getJTextField_UserName(), gridBagConstraints11);
! 			jPanel.add(jLabel1, gridBagConstraints12);
! 			jPanel.add(getJPasswordField_Password(), gridBagConstraints14);
  		}
! 		return jPanel;
  	}
  
  	/**
! 	 * This method initializes jTextField_UserName	
! 	 * 	
! 	 * @return javax.swing.JTextField	
  	 */
! 	private JTextField getJTextField_UserName() {
  		if (jTextField_UserName == null) {
! 			jTextField_UserName = new JTextField();
  			jTextField_UserName.addActionListener(this);
  		}
  		return jTextField_UserName;
  	}
  
  	/**
! 	 * This method initializes jPasswordField_Password	
! 	 * 	
! 	 * @return javax.swing.JPasswordField	
  	 */
! 	private JPasswordField getJPasswordField_Password() {
  		if (jPasswordField_Password == null) {
! 			jPasswordField_Password = new JPasswordField();
  			jPasswordField_Password.addActionListener(this);
  		}
  		return jPasswordField_Password;
  	}
  }
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JRegisterUserFrameCtrl.java ../nittoku_src_127/system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JRegisterUserFrameCtrl.java
*** ./system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JRegisterUserFrameCtrl.java	Mon May 24 17:02:40 2010
--- ../nittoku_src_127/system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JRegisterUserFrameCtrl.java	Tue Nov 17 10:45:36 2009
***************
*** 3,18 ****
  import javax.swing.event.DocumentEvent;
  import javax.swing.event.DocumentListener;
  
- import org.apache.log4j.Logger;
- 
- import java.awt.Component;
  import java.awt.event.*;
  import java.util.ArrayList;
- import java.util.HashMap;
  
  import jp.or.med.orca.jma_tokutei.common.app.JApplication;
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
  import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
  import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  
--- 3,15 ----
  import javax.swing.event.DocumentEvent;
  import javax.swing.event.DocumentListener;
  
  import java.awt.event.*;
  import java.util.ArrayList;
  
  import jp.or.med.orca.jma_tokutei.common.app.JApplication;
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
  import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
+ import jp.or.med.orca.jma_tokutei.common.event.JEnterEvent;
  import jp.or.med.orca.jma_tokutei.common.focus.JFocusTraversalPolicy;
  import jp.or.med.orca.jma_tokutei.common.frame.ViewSettings;
  
***************
*** 25,49 ****
  	/* フォーカス移動制御 */
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
  
- 	private static Logger logger = Logger.getLogger(JRegisterUserFrameCtrl.class);
- 
  	/**
  	 * このフレームの実行されているモード 1 : ユーザ追加 2 : ユーザ情報の変更
  	 */
! 	int mode = 0;
! 	int ADD_MODE = 1;
! 	int CHANGE_MODE = 2;
  
  	boolean validateAsRegisterPushed(JRegisterUserFrameData data) {
  		if (data.getPassword().isEmpty() || data.getUserName().isEmpty()) {
! 			JErrorMessage.show("M7310", this);
  			return false;
  		}
  
  		data.isValidateAsDataset();
  		initializefocus();
- 		// del y.okano 2010/05/24
- 		// functionListner();
  		return true;
  	}
  
--- 22,41 ----
  	/* フォーカス移動制御 */
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
  
  	/**
  	 * このフレームの実行されているモード 1 : ユーザ追加 2 : ユーザ情報の変更
  	 */
! 	int mode;
  
  	boolean validateAsRegisterPushed(JRegisterUserFrameData data) {
  		if (data.getPassword().isEmpty() || data.getUserName().isEmpty()) {
! 			jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage.show(
! 					"M7310", this);
  			return false;
  		}
  
  		data.isValidateAsDataset();
  		initializefocus();
  		return true;
  	}
  
***************
*** 52,141 ****
  		// edit s.inoue 2009/10/07
  		this.focusTraversalPolicy = new JFocusTraversalPolicy();
  		this.setFocusTraversalPolicy(this.focusTraversalPolicy);
! 		// edit s.inoue 2009/12/03
! 		if (mode == ADD_MODE){
! 			this.focusTraversalPolicy.setDefaultComponent(this.jTextField_UserName);
! 		}else if (mode == CHANGE_MODE){
! 			this.focusTraversalPolicy.setDefaultComponent(this.jPasswordField_Password);
! 		}
  		this.focusTraversalPolicy.addComponent(this.jTextField_UserName);
  		this.focusTraversalPolicy.addComponent(this.jPasswordField_Password);
  		this.focusTraversalPolicy.addComponent(this.jButton_Register);
  		this.focusTraversalPolicy.addComponent(jButton_End);
  	}
- 
- // edit y.okano 2010/05/24
- 	private void functionListner(){
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			Component comp = focusTraversalPolicy.getComponent(i);
- 			System.out.println(comp.getName());
- 			comp.addKeyListener(this);
- 		}
- //		Component comp =null;
- //		HashMap<String, Component> compHm = new HashMap<String, Component>();
- //
- //		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- //			comp = focusTraversalPolicy.getComponent(i);
- //
- //			if (!compHm.containsKey(comp.getName())){
- //				comp.addKeyListener(this);
- //				compHm.put(comp.getName(), comp);
- //			}
- //		}
- 	}
- 
  	/**
  	 * ユーザの追加を行うときに使用。
  	 */
  	public JRegisterUserFrameCtrl() {
! 		// edit s.inoue 2009/12/03
! 		mode = ADD_MODE;
! 		jPasswordField_Password.getDocument().addDocumentListener(new RegisterButtonStatus());
! 		jTextField_UserName.getDocument().addDocumentListener(new RegisterButtonStatus());
  		jButton_Register.setEnabled(false);
  
  		this.setTitle(ViewSettings.getAdminCommonTitleWithVersion());
  		initializefocus();
- 		// add s.inoue 2009/12/03
- 		functionListner();
  	}
  
  	/**
  	 * ユーザの変更を行うときに使用。
  	 */
  	public JRegisterUserFrameCtrl(String name) {
- 		super();
- 		mode = CHANGE_MODE;
- 
- 		jPasswordField_Password.addKeyListener(this);
  		validatedData.setUserName(name);
! 
! 		// ログインボタンの状態を管理
! 		jTextField_UserName.getDocument().addDocumentListener(new RegisterButtonStatus());
! 		jPasswordField_Password.getDocument().addDocumentListener(new RegisterButtonStatus());
! 
  		jTextField_UserName.setText(validatedData.getUserName());
  		jTextField_UserName.setEditable(false);
  		jButton_Register.setEnabled(false);
  
  		// エンターキーの処理
! 		// del s.inoue 2009/12/04
! //		jButton_End.addKeyListener(new JEnterEvent(this, jButton_End));
! //		jButton_Register.addKeyListener(new JEnterEvent(this, jButton_Register));
! 		this.setTitle(ViewSettings.getAdminCommonTitleWithVersion());
! 		initializefocus();
! 		functionListner();
  
! 		// add s.inoue 2009/12/07
! 		// focus初期設定
! 		this.addComponentListener(new ComponentAdapter()
! 		{
! 		    public void componentShown(ComponentEvent e)
! 		    {
! 		        // ensure password text field has focus initially
! 		    	jPasswordField_Password.requestFocusInWindow();
! 		    }
! 		});
  	}
  
  	/**
--- 44,99 ----
  		// edit s.inoue 2009/10/07
  		this.focusTraversalPolicy = new JFocusTraversalPolicy();
  		this.setFocusTraversalPolicy(this.focusTraversalPolicy);
! 		this.focusTraversalPolicy.setDefaultComponent(this.jTextField_UserName);
  		this.focusTraversalPolicy.addComponent(this.jTextField_UserName);
+ 		// edit s.inoue 2009/11/16
  		this.focusTraversalPolicy.addComponent(this.jPasswordField_Password);
  		this.focusTraversalPolicy.addComponent(this.jButton_Register);
  		this.focusTraversalPolicy.addComponent(jButton_End);
  	}
  	/**
  	 * ユーザの追加を行うときに使用。
  	 */
  	public JRegisterUserFrameCtrl() {
! 		jPasswordField_Password.getDocument().addDocumentListener(
! 				new RegisterButtonStatus());
! 		jTextField_UserName.getDocument().addDocumentListener(
! 				new RegisterButtonStatus());
  		jButton_Register.setEnabled(false);
+ 		mode = 1;
  
  		this.setTitle(ViewSettings.getAdminCommonTitleWithVersion());
  		initializefocus();
  	}
  
  	/**
  	 * ユーザの変更を行うときに使用。
  	 */
  	public JRegisterUserFrameCtrl(String name) {
  		validatedData.setUserName(name);
! 		jPasswordField_Password.getDocument().addDocumentListener(
! 				new RegisterButtonStatus());
  		jTextField_UserName.setText(validatedData.getUserName());
+ 
+ 		/* Modified 2008/05/06 若月 */
+ 		/* --------------------------------------------------- */
+ 		// jTextField_UserName.setEnabled(false);
+ 		/* --------------------------------------------------- */
  		jTextField_UserName.setEditable(false);
+ 		/* --------------------------------------------------- */
+ 
  		jButton_Register.setEnabled(false);
+ 		mode = 2;
  
  		// エンターキーの処理
! 		jButton_End.addKeyListener(new JEnterEvent(this, jButton_End));
! 		jButton_Register
! 				.addKeyListener(new JEnterEvent(this, jButton_Register));
  
! 		/* Added 2008/05/15 若月  */
! 		/* --------------------------------------------------- */
! 		this.setTitle(ViewSettings.getAdminCommonTitleWithVersion());
! 		/* --------------------------------------------------- */
  	}
  
  	/**
***************
*** 155,161 ****
  			if (validateAsRegisterPushed(validatedData)) {
  				try {
  					// 新規追加の場合
! 					if (mode == ADD_MODE) {
  
  						// add s.inoue 20081217
  						// ユーザ名称の重複チェック
--- 113,119 ----
  			if (validateAsRegisterPushed(validatedData)) {
  				try {
  					// 新規追加の場合
! 					if (mode == 1) {
  
  						// add s.inoue 20081217
  						// ユーザ名称の重複チェック
***************
*** 166,172 ****
  									JQueryConvert.queryConvert(validatedData.getUserName()));
  
  							if (kikanItem.size() > 0){
! 								JErrorMessage.show("M7303", this);
  								return;
  							}
  
--- 124,130 ----
  									JQueryConvert.queryConvert(validatedData.getUserName()));
  
  							if (kikanItem.size() > 0){
! 								JErrorMessage.show("M9638", this);
  								return;
  							}
  
***************
*** 188,194 ****
  					}
  
  					// 変更の場合
! 					if (mode == CHANGE_MODE) {
  						JApplication.systemDatabase
  								.sendNoResultQuery("UPDATE T_SYS_USER SET PASS = "
  										+ JQueryConvert
--- 146,152 ----
  					}
  
  					// 変更の場合
! 					if (mode == 2) {
  						JApplication.systemDatabase
  								.sendNoResultQuery("UPDATE T_SYS_USER SET PASS = "
  										+ JQueryConvert
***************
*** 213,229 ****
  	public void actionPerformed(ActionEvent e) {
  		Object source = e.getSource();
  		if (source == jButton_End) {
- 			logger.info(jButton_End.getText());
  			pushedEndButton(e);
  		}
  		else if (source == jButton_Register) {
- 			logger.info(jButton_Register.getText());
  			pushedRegisterButton(e);
  		}
  		// エンターキーでの移動
  		else if (source == jTextField_UserName) {
! 		// del s.inoue 2009/12/06
! 		//			jTextField_UserName.transferFocus();
  		} else if (source == jPasswordField_Password) {
  			// 登録ボタンが有効な時だけEnterキーでログインを行う
  			if (jButton_Register.isEnabled())
--- 171,186 ----
  	public void actionPerformed(ActionEvent e) {
  		Object source = e.getSource();
  		if (source == jButton_End) {
  			pushedEndButton(e);
  		}
+ 
  		else if (source == jButton_Register) {
  			pushedRegisterButton(e);
  		}
+ 
  		// エンターキーでの移動
  		else if (source == jTextField_UserName) {
! 			jTextField_UserName.transferFocus();
  		} else if (source == jPasswordField_Password) {
  			// 登録ボタンが有効な時だけEnterキーでログインを行う
  			if (jButton_Register.isEnabled())
***************
*** 231,250 ****
  		}
  	}
  
- 	// add s.inoue 2009/12/03
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 		switch(keyEvent.getKeyCode()){
- 		case KeyEvent.VK_F1:
- 			logger.info(jButton_End.getText());
- 			pushedEndButton(null);break;
- 		case KeyEvent.VK_F12:
- 			if (jButton_Register.isEnabled()){
- 				logger.info(jButton_Register.getText());
- 				pushedRegisterButton(null);break;
- 			}
- 		}
- 	}
  	/**
  	 * 登録ボタンのステータスをテキストフィールドの内容によって 変更するためのイベントリスナ
  	 */
--- 188,193 ----
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JUserMaintenanceFrame.java ../nittoku_src_127/system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JUserMaintenanceFrame.java
*** ./system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JUserMaintenanceFrame.java	Wed Apr 21 09:48:06 2010
--- ../nittoku_src_127/system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JUserMaintenanceFrame.java	Tue Aug 11 17:55:30 2009
***************
*** 24,30 ****
  /**
   * ユーザメンテナンス
   */
! public class JUserMaintenanceFrame extends JFrame implements ActionListener,KeyListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
--- 24,30 ----
  /**
   * ユーザメンテナンス
   */
! public class JUserMaintenanceFrame extends JFrame implements ActionListener
  {
  	protected static final long serialVersionUID = 1L;
  	protected JPanel jPanel_Content = null;
***************
*** 52,58 ****
  
  	/**
  	 * This method initializes this
! 	 *
  	 * @return void
  	 */
  	private void initialize() {
--- 52,58 ----
  
  	/**
  	 * This method initializes this
! 	 * 
  	 * @return void
  	 */
  	private void initialize() {
***************
*** 68,80 ****
  		this.setTitle(ViewSettings.getTokuteFrameTitleWithKikanInfomation());
  		this.setSize(ViewSettings.getFrameCommonSize());
  		this.setLocationRelativeTo( null );
! 		this.setVisible(true);
  		/* --------------------------------------------------- */
  	}
  
  	/**
  	 * This method initializes jPanel_Content
! 	 *
  	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_Content() {
--- 68,80 ----
  		this.setTitle(ViewSettings.getTokuteFrameTitleWithKikanInfomation());
  		this.setSize(ViewSettings.getFrameCommonSize());
  		this.setLocationRelativeTo( null );
! 		this.setVisible(true);		
  		/* --------------------------------------------------- */
  	}
  
  	/**
  	 * This method initializes jPanel_Content
! 	 * 
  	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_Content() {
***************
*** 91,99 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_ButtonArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_ButtonArea() {
  		if (jPanel_ButtonArea == null) {
--- 91,99 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_ButtonArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_ButtonArea() {
  		if (jPanel_ButtonArea == null) {
***************
*** 126,134 ****
  	}
  
  	/**
! 	 * This method initializes jButton_End
! 	 *
! 	 * @return javax.swing.ExtendedButton
  	 */
  	private ExtendedButton getJButton_End() {
  		if (jButton_End == null) {
--- 126,134 ----
  	}
  
  	/**
! 	 * This method initializes jButton_End	
! 	 * 	
! 	 * @return javax.swing.ExtendedButton	
  	 */
  	private ExtendedButton getJButton_End() {
  		if (jButton_End == null) {
***************
*** 136,151 ****
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る(F1)");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
  	}
  
  	/**
! 	 * This method initializes jPanel_NaviArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_NaviArea() {
  		if (jPanel_NaviArea == null) {
--- 136,151 ----
  			jButton_End.setHorizontalAlignment(SwingConstants.CENTER);
  			jButton_End.setActionCommand("終了");
  			jButton_End.setFont(new Font("Dialog", Font.PLAIN, 12));
! 			jButton_End.setText("戻る");
  			jButton_End.addActionListener(this);
  		}
  		return jButton_End;
  	}
  
  	/**
! 	 * This method initializes jPanel_NaviArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_NaviArea() {
  		if (jPanel_NaviArea == null) {
***************
*** 171,179 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_TitleArea
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_TitleArea() {
  		if (jPanel_TitleArea == null) {
--- 171,179 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_TitleArea	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_TitleArea() {
  		if (jPanel_TitleArea == null) {
***************
*** 192,200 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea2
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_ExplArea2() {
  		if (jPanel_ExplArea2 == null) {
--- 192,200 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea2	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_ExplArea2() {
  		if (jPanel_ExplArea2 == null) {
***************
*** 213,221 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea1
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_ExplArea1() {
  		if (jPanel_ExplArea1 == null) {
--- 213,221 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_ExplArea1	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_ExplArea1() {
  		if (jPanel_ExplArea1 == null) {
***************
*** 229,242 ****
  	}
  
  	/**
! 	 * This method initializes jButton_Add
! 	 *
! 	 * @return javax.swing.ExtendedButton
  	 */
  	private ExtendedButton getJButton_Add() {
  		if (jButton_Add == null) {
  			jButton_Add = new ExtendedButton();
! 			jButton_Add.setText("追加(F9)");
  			jButton_Add.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Add.addActionListener(this);
  		}
--- 229,242 ----
  	}
  
  	/**
! 	 * This method initializes jButton_Add	
! 	 * 	
! 	 * @return javax.swing.ExtendedButton	
  	 */
  	private ExtendedButton getJButton_Add() {
  		if (jButton_Add == null) {
  			jButton_Add = new ExtendedButton();
! 			jButton_Add.setText("追加");
  			jButton_Add.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Add.addActionListener(this);
  		}
***************
*** 244,257 ****
  	}
  
  	/**
! 	 * This method initializes jButton_Change
! 	 *
! 	 * @return javax.swing.ExtendedButton
  	 */
  	private ExtendedButton getJButton_Change() {
  		if (jButton_Change == null) {
  			jButton_Change = new ExtendedButton();
! 			jButton_Change.setText("変更(F11)");
  			jButton_Change.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Change.addActionListener(this);
  		}
--- 244,257 ----
  	}
  
  	/**
! 	 * This method initializes jButton_Change	
! 	 * 	
! 	 * @return javax.swing.ExtendedButton	
  	 */
  	private ExtendedButton getJButton_Change() {
  		if (jButton_Change == null) {
  			jButton_Change = new ExtendedButton();
! 			jButton_Change.setText("変更");
  			jButton_Change.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Change.addActionListener(this);
  		}
***************
*** 259,272 ****
  	}
  
  	/**
! 	 * This method initializes jButton_Delete
! 	 *
! 	 * @return javax.swing.ExtendedButton
  	 */
  	private ExtendedButton getJButton_Delete() {
  		if (jButton_Delete == null) {
  			jButton_Delete = new ExtendedButton();
! 			jButton_Delete.setText("削除(F12)");
  			jButton_Delete.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Delete.addActionListener(this);
  		}
--- 259,272 ----
  	}
  
  	/**
! 	 * This method initializes jButton_Delete	
! 	 * 	
! 	 * @return javax.swing.ExtendedButton	
  	 */
  	private ExtendedButton getJButton_Delete() {
  		if (jButton_Delete == null) {
  			jButton_Delete = new ExtendedButton();
! 			jButton_Delete.setText("削除");
  			jButton_Delete.setFont(new Font("Dialog", Font.PLAIN, 12));
  			jButton_Delete.addActionListener(this);
  		}
***************
*** 274,282 ****
  	}
  
  	/**
! 	 * This method initializes jPanel_Table
! 	 *
! 	 * @return javax.swing.JPanel
  	 */
  	private JPanel getJPanel_Table() {
  		if (jPanel_Table == null) {
--- 274,282 ----
  	}
  
  	/**
! 	 * This method initializes jPanel_Table	
! 	 * 	
! 	 * @return javax.swing.JPanel	
  	 */
  	private JPanel getJPanel_Table() {
  		if (jPanel_Table == null) {
***************
*** 293,301 ****
  	public void validate()
  	{
  		Rectangle rect = getBounds();
! 
  		super.validate();
! 
  		if( ViewSettings.getFrameCommonWidth() > rect.width  ||
  			ViewSettings.getFrameCommonHeight() > rect.height )
  		{
--- 293,301 ----
  	public void validate()
  	{
  		Rectangle rect = getBounds();
! 		
  		super.validate();
! 		
  		if( ViewSettings.getFrameCommonWidth() > rect.width  ||
  			ViewSettings.getFrameCommonHeight() > rect.height )
  		{
***************
*** 305,330 ****
  					   ViewSettings.getFrameCommonHeight() );
  		}
  	}
! 
  	public void actionPerformed( ActionEvent e )
  	{
  	}
- 
- 	@Override
- 	public void keyPressed(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyReleased(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
- 
- 	@Override
- 	public void keyTyped(KeyEvent e) {
- 		// TODO 自動生成されたメソッド・スタブ
- 
- 	}
  }
--- 305,312 ----
  					   ViewSettings.getFrameCommonHeight() );
  		}
  	}
! 	
  	public void actionPerformed( ActionEvent e )
  	{
  	}
  }
diff -c -r -x CVS -x resources -x class -x output -x dist -x diff.txt -x '*.log' -x .project -x .classpath -x RELDIFF ./system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JUserMaintenanceFrameCtrl.java ../nittoku_src_127/system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JUserMaintenanceFrameCtrl.java
*** ./system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JUserMaintenanceFrameCtrl.java	Wed Apr 21 09:48:06 2010
--- ../nittoku_src_127/system-administrator-software/src/jp/or/med/orca/jma_tokutei/kenshin/admin/frame/JUserMaintenanceFrameCtrl.java	Wed Feb 24 17:47:52 2010
***************
*** 1,9 ****
  package jp.or.med.orca.jma_tokutei.kenshin.admin.frame;
  
  //import java.awt.event.*;
- import java.awt.Component;
  import java.awt.event.ActionEvent;
- import java.awt.event.KeyEvent;
  import java.awt.event.WindowAdapter;
  import java.awt.event.WindowEvent;
  import java.sql.SQLException;
--- 1,7 ----
***************
*** 14,21 ****
  import javax.swing.table.DefaultTableCellRenderer;
  import javax.swing.table.TableColumnModel;
  
- import org.apache.log4j.Logger;
- 
  import jp.or.med.orca.jma_tokutei.common.app.JApplication;
  import jp.or.med.orca.jma_tokutei.common.convert.JQueryConvert;
  import jp.or.med.orca.jma_tokutei.common.errormessage.JErrorMessage;
--- 12,17 ----
***************
*** 38,44 ****
  
  	/* フォーカス移動制御 */
  	private JFocusTraversalPolicy focusTraversalPolicy = null;
- 	private static Logger logger = Logger.getLogger(JUserMaintenanceFrameCtrl.class);
  
  	public JUserMaintenanceFrameCtrl() {
  		JSimpleTableScrollPanel scroll = new JSimpleTableScrollPanel(model);
--- 34,39 ----
***************
*** 68,79 ****
  		this.focusTraversalPolicy.addComponent(this.jButton_Delete);
  		this.focusTraversalPolicy.addComponent(jButton_End);
  
- 		// add s.inoue 2009/12/03
- 		for (int i = 0; i < focusTraversalPolicy.getComponentSize(); i++) {
- 			Component comp = focusTraversalPolicy.getComponent(i);
- 			comp.addKeyListener(this);
- 		}
- 
  		this.setTitle(ViewSettings.getAdminCommonTitleWithVersion());
  
  		// add ver2 s.inoue 2009/05/08
--- 63,68 ----
***************
*** 110,120 ****
  		}
  
  		String name = (String) model.getData(Row, 0);
! 		JScene.CreateDialog(
! 				this,
! 				new JRegisterUserFrameCtrl(name),
! 				new RefreshEvent()
! 			);
  	}
  
  	/**
--- 99,106 ----
  		}
  
  		String name = (String) model.getData(Row, 0);
! 		JScene.CreateDialog(this, new JRegisterUserFrameCtrl(name),
! 				new RefreshEvent());
  	}
  
  	/**
***************
*** 185,226 ****
  	public void actionPerformed(ActionEvent e) {
  		Object source = e.getSource();
  		if (source == jButton_End) {
- 			logger.info(jButton_End.getText());
  			pushedEndButton(e);
  		}
  		else if (e.getSource() == jButton_Add) {
- 			logger.info(jButton_Add.getText());
  			pushedAddButton(e);
  		}
  		else if (e.getSource() == jButton_Change) {
- 			logger.info(jButton_Change.getText());
  			pushedChangeButton(e);
  		}
  		else if (e.getSource() == jButton_Delete) {
- 			logger.info(jButton_Delete.getText());
  			pushedDeleteButton(e);
  		}
  	}
  
- 	// add s.inoue 2009/12/03
- 	@Override
- 	public void keyPressed(KeyEvent keyEvent) {
- 		switch(keyEvent.getKeyCode()){
- 		case KeyEvent.VK_F1:
- 			logger.info(jButton_End.getText());
- 			pushedEndButton(null);break;
- 		case KeyEvent.VK_F9:
- 			logger.info(jButton_Add.getText());
- 			pushedAddButton(null);break;
- 		case KeyEvent.VK_F11:
- 			logger.info(jButton_Change.getText());
- 			pushedChangeButton(null);break;
- 		case KeyEvent.VK_F12:
- 			logger.info(jButton_Delete.getText());
- 			pushedDeleteButton(null);break;
- 		}
- 	}
- 
  	/**
  	 * ユーザ情報の登録画面を開いた後など、登録画面が閉じたときに呼び出されるイベント
  	 */
--- 171,192 ----
  	public void actionPerformed(ActionEvent e) {
  		Object source = e.getSource();
  		if (source == jButton_End) {
  			pushedEndButton(e);
  		}
+ 
  		else if (e.getSource() == jButton_Add) {
  			pushedAddButton(e);
  		}
+ 
  		else if (e.getSource() == jButton_Change) {
  			pushedChangeButton(e);
  		}
+ 
  		else if (e.getSource() == jButton_Delete) {
  			pushedDeleteButton(e);
  		}
  	}
  
  	/**
  	 * ユーザ情報の登録画面を開いた後など、登録画面が閉じたときに呼び出されるイベント
  	 */
